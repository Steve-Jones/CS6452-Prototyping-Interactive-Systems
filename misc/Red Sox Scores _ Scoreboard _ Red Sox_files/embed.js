/*
Do NOT edit this file!
This file will be deleted with the next Jenkins/Grunt build.
Build Date: Friday, September 1st, 2017, 4:27:04 PM UTC
Version:5111a2eac26f542c7d34042a3b2bf3d4af9c2262_1504283224
Questions? contact Paolo Vaca 
*/

define("../scripts/utils/polyfills/arrayFindIndex",[],function(){return function(){Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(a){if(null==this)throw new TypeError('"this" is null or not defined');var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var d=arguments[1],e=0;c>e;){var f=b[e];if(a.call(d,f,e,b))return e;e++}return-1}})}}),define("../scripts/utils/polyfills/arrayIncludes",[],function(){return function(){Array.prototype.includes||(Array.prototype.includes=function(a){"use strict";var b=Object(this),c=parseInt(b.length,10)||0;if(0===c)return!1;var d,e=parseInt(arguments[1],10)||0;e>=0?d=e:(d=c+e,0>d&&(d=0));for(var f;c>d;){if(f=b[d],a===f)return!0;d++}return!1})}}),define("../scripts/utils/polyfills/objectAssign",[],function(){return function(){"function"!=typeof Object.assign&&(Object.assign=function(a,b){"use strict";if(null==a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),d=1;d<arguments.length;d++){var e=arguments[d];if(null!=e)for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&(c[f]=e[f])}return c})}}),define("../scripts/utils/polyfills/stringIncludes",[],function(){return function(){String.prototype.includes||(String.prototype.includes=function(a,b){"use strict";var c="number"!=typeof b?0:b;return c+a.length>this.length?!1:-1!==this.indexOf(a,c)})}}),define("../scripts/utils/polyfills/polyfills",["./arrayFindIndex","./arrayIncludes","./objectAssign","./stringIncludes"],function(a,b,c,d){function e(){a(),b(),c(),d()}function f(){e()}var g;return f.prototype={},g=g||new f}),function(){function a(a,b){return a.set(b[0],b[1]),a}function b(a,b){return a.add(b),a}function c(a,b,c){var d=c.length;switch(d){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function d(a,b,c,d){for(var e=-1,f=a?a.length:0;++e<f;){var g=a[e];b(d,g,c(g),a)}return d}function e(a,b){for(var c=-1,d=a?a.length:0;++c<d&&b(a[c],c,a)!==!1;);return a}function f(a,b){for(var c=a?a.length:0;c--&&b(a[c],c,a)!==!1;);return a}function g(a,b){for(var c=-1,d=a?a.length:0;++c<d;)if(!b(a[c],c,a))return!1;return!0}function h(a,b){for(var c=-1,d=a?a.length:0,e=0,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[e++]=g)}return f}function i(a,b){var c=a?a.length:0;return!!c&&r(a,b,0)>-1}function j(a,b,c){for(var d=-1,e=a?a.length:0;++d<e;)if(c(b,a[d]))return!0;return!1}function k(a,b){for(var c=-1,d=a?a.length:0,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function l(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function m(a,b,c,d){var e=-1,f=a?a.length:0;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function n(a,b,c,d){var e=a?a.length:0;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c}function o(a,b){for(var c=-1,d=a?a.length:0;++c<d;)if(b(a[c],c,a))return!0;return!1}function p(a,b,c){var d;return c(a,function(a,c,e){return b(a,c,e)?(d=c,!1):void 0}),d}function q(a,b,c,d){for(var e=a.length,f=c+(d?1:-1);d?f--:++f<e;)if(b(a[f],f,a))return f;return-1}function r(a,b,c){if(b!==b)return K(a,c);for(var d=c-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function s(a,b,c,d){for(var e=c-1,f=a.length;++e<f;)if(d(a[e],b))return e;return-1}function t(a,b){var c=a?a.length:0;return c?w(a,b)/c:va}function u(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function v(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].value;return a}function w(a,b){for(var c,d=-1,e=a.length;++d<e;){var f=b(a[d]);f!==V&&(c=c===V?f:c+f)}return c}function x(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function y(a,b){return k(b,function(b){return[b,a[b]]})}function z(a){return function(b){return a(b)}}function A(a,b){return k(b,function(b){return a[b]})}function B(a,b){return a.has(b)}function C(a,b){for(var c=-1,d=a.length;++c<d&&r(b,a[c],0)>-1;);return c}function D(a,b){for(var c=a.length;c--&&r(b,a[c],0)>-1;);return c}function E(a){return a&&a.Object===Object?a:null}function F(a,b){for(var c=a.length,d=0;c--;)a[c]===b&&d++;return d}function G(a){return xc[a]}function H(a){return yc[a]}function I(a){return"\\"+Ac[a]}function J(a,b){return null==a?V:a[b]}function K(a,b,c){for(var d=a.length,e=b+(c?1:-1);c?e--:++e<d;){var f=a[e];if(f!==f)return e}return-1}function L(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(c){}return b}function M(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}function N(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c}function O(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c];(g===b||g===$)&&(a[c]=$,f[e++]=c)}return f}function P(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}function Q(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=[a,a]}),c}function R(a){if(!a||!rc.test(a))return a.length;for(var b=pc.lastIndex=0;pc.test(a);)b++;return b}function S(a){return a.match(pc)}function T(a){return zc[a]}function U(E){function Eb(a){if(rh(a)&&!pl(a)&&!(a instanceof Hb)){if(a instanceof Gb)return a;if(Cj.call(a,"__wrapped__"))return lf(a)}return new Gb(a)}function Fb(){}function Gb(a,b){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=V}function Hb(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=wa,this.__views__=[]}function Ib(){var a=new Hb(this.__wrapped__);return a.__actions__=be(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=be(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=be(this.__views__),a}function Jb(){if(this.__filtered__){var a=new Hb(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function Kb(){var a=this.__wrapped__.value(),b=this.__dir__,c=pl(a),d=0>b,e=c?a.length:0,f=Pe(0,e,this.__views__),g=f.start,h=f.end,i=h-g,j=d?h:g-1,k=this.__iteratees__,l=k.length,m=0,n=$j(i,this.__takeCount__);if(!c||X>e||e==i&&n==i)return Kd(a,this.__actions__);var o=[];a:for(;i--&&n>m;){j+=b;for(var p=-1,q=a[j];++p<l;){var r=k[p],s=r.iteratee,t=r.type,u=s(q);if(t==qa)q=u;else if(!u){if(t==pa)continue a;break a}}o[m++]=q}return o}function Lb(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Mb(){this.__data__=jk?jk(null):{}}function Nb(a){return this.has(a)&&delete this.__data__[a]}function Ob(a){var b=this.__data__;if(jk){var c=b[a];return c===Z?V:c}return Cj.call(b,a)?b[a]:V}function Pb(a){var b=this.__data__;return jk?b[a]!==V:Cj.call(b,a)}function Qb(a,b){var c=this.__data__;return c[a]=jk&&b===V?Z:b,this}function Rb(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Sb(){this.__data__=[]}function Tb(a){var b=this.__data__,c=pc(b,a);if(0>c)return!1;var d=b.length-1;return c==d?b.pop():Rj.call(b,c,1),!0}function Ub(a){var b=this.__data__,c=pc(b,a);return 0>c?V:b[c][1]}function Vb(a){return pc(this.__data__,a)>-1}function Wb(a,b){var c=this.__data__,d=pc(c,a);return 0>d?c.push([a,b]):c[d][1]=b,this}function Xb(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Yb(){this.__data__={hash:new Lb,map:new(fk||Rb),string:new Lb}}function Zb(a){return Je(this,a)["delete"](a)}function $b(a){return Je(this,a).get(a)}function _b(a){return Je(this,a).has(a)}function ac(a,b){return Je(this,a).set(a,b),this}function bc(a){var b=-1,c=a?a.length:0;for(this.__data__=new Xb;++b<c;)this.add(a[b])}function cc(a){return this.__data__.set(a,Z),this}function dc(a){return this.__data__.has(a)}function ec(a){this.__data__=new Rb(a)}function fc(){this.__data__=new Rb}function gc(a){return this.__data__["delete"](a)}function hc(a){return this.__data__.get(a)}function ic(a){return this.__data__.has(a)}function jc(a,b){var c=this.__data__;return c instanceof Rb&&c.__data__.length==X&&(c=this.__data__=new Xb(c.__data__)),c.set(a,b),this}function kc(a,b,c,d){return a===V||ah(a,xj[c])&&!Cj.call(d,c)?b:a}function lc(a,b,c){(c!==V&&!ah(a[b],c)||"number"==typeof b&&c===V&&!(b in a))&&(a[b]=c)}function mc(a,b,c){var d=a[b];Cj.call(a,b)&&ah(d,c)&&(c!==V||b in a)||(a[b]=c)}function pc(a,b){for(var c=a.length;c--;)if(ah(a[c][0],b))return c;return-1}function xc(a,b,c,d){return vk(a,function(a,e,f){b(d,a,c(a),f)}),d}function yc(a,b){return a&&ce(b,ci(b),a)}function zc(a,b){for(var c=-1,d=null==a,e=b.length,f=Array(e);++c<e;)f[c]=d?V:_h(a,b[c]);return f}function Ac(a,b,c){return a===a&&(c!==V&&(a=c>=a?a:c),b!==V&&(a=a>=b?a:b)),a}function Dc(a,b,c,d,f,g,h){var i;if(d&&(i=g?d(a,f,g,h):d(a)),i!==V)return i;if(!qh(a))return a;var j=pl(a);if(j){if(i=Re(a),!b)return be(a,i)}else{var k=Oe(a),l=k==Ea||k==Fa;if(ql(a))return Rd(a,b);if(k==Ia||k==za||l&&!g){if(L(a))return g?a:{};if(i=Se(l?{}:a),!b)return de(a,yc(i,a))}else{if(!wc[k])return g?a:{};i=Te(a,k,Dc,b)}}h||(h=new ec);var m=h.get(a);if(m)return m;if(h.set(a,i),!j)var n=c?Ee(a):ci(a);return e(n||a,function(e,f){n&&(f=e,e=a[f]),mc(i,f,Dc(e,b,c,d,f,a,h))}),i}function Ec(a){var b=ci(a),c=b.length;return function(d){if(null==d)return!c;for(var e=c;e--;){var f=b[e],g=a[f],h=d[f];if(h===V&&!(f in Object(d))||!g(h))return!1}return!0}}function Gc(a){return qh(a)?Pj(a):{}}function Hc(a,b,c){if("function"!=typeof a)throw new vj(Y);return Sj(function(){a.apply(V,c)},b)}function Ic(a,b,c,d){var e=-1,f=i,g=!0,h=a.length,l=[],m=b.length;if(!h)return l;c&&(b=k(b,z(c))),d?(f=j,g=!1):b.length>=X&&(f=B,g=!1,b=new bc(b));a:for(;++e<h;){var n=a[e],o=c?c(n):n;if(n=d||0!==n?n:0,g&&o===o){for(var p=m;p--;)if(b[p]===o)continue a;l.push(n)}else f(b,o,d)||l.push(n)}return l}function Lc(a,b){var c=!0;return vk(a,function(a,d,e){return c=!!b(a,d,e)}),c}function Mc(a,b,c){for(var d=-1,e=a.length;++d<e;){var f=a[d],g=b(f);if(null!=g&&(h===V?g===g&&!Fh(g):c(g,h)))var h=g,i=f}return i}function Nc(a,b,c,d){var e=a.length;for(c=Mh(c),0>c&&(c=-c>e?0:e+c),d=d===V||d>e?e:Mh(d),0>d&&(d+=e),d=c>d?0:Nh(d);d>c;)a[c++]=b;return a}function Oc(a,b){var c=[];return vk(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function Pc(a,b,c,d,e){var f=-1,g=a.length;for(c||(c=Ve),e||(e=[]);++f<g;){var h=a[f];b>0&&c(h)?b>1?Pc(h,b-1,c,d,e):l(e,h):d||(e[e.length]=h)}return e}function Qc(a,b){return a&&xk(a,b,ci)}function Rc(a,b){return a&&yk(a,b,ci)}function Sc(a,b){return h(b,function(b){return nh(a[b])})}function Tc(a,b){b=Ze(b,a)?[b]:Pd(b);for(var c=0,d=b.length;null!=a&&d>c;)a=a[jf(b[c++])];return c&&c==d?a:V}function Uc(a,b,c){var d=b(a);return pl(a)?d:l(d,c(a))}function Vc(a,b){return a>b}function Wc(a,b){return null!=a&&(Cj.call(a,b)||"object"==typeof a&&b in a&&null===Me(a))}function Xc(a,b){return null!=a&&b in Object(a)}function Yc(a,b,c){return a>=$j(b,c)&&a<Zj(b,c)}function Zc(a,b,c){for(var d=c?j:i,e=a[0].length,f=a.length,g=f,h=Array(f),l=1/0,m=[];g--;){var n=a[g];g&&b&&(n=k(n,z(b))),l=$j(n.length,l),h[g]=!c&&(b||e>=120&&n.length>=120)?new bc(g&&n):V}n=a[0];var o=-1,p=h[0];a:for(;++o<e&&m.length<l;){var q=n[o],r=b?b(q):q;if(q=c||0!==q?q:0,!(p?B(p,r):d(m,r,c))){for(g=f;--g;){var s=h[g];if(!(s?B(s,r):d(a[g],r,c)))continue a}p&&p.push(r),m.push(q)}}return m}function $c(a,b,c,d){return Qc(a,function(a,e,f){b(d,c(a),e,f)}),d}function _c(a,b,d){Ze(b,a)||(b=Pd(b),a=gf(a,b),b=Ef(b));var e=null==a?a:a[jf(b)];return null==e?V:c(e,a,d)}function ad(a,b,c,d,e){return a===b?!0:null==a||null==b||!qh(a)&&!rh(b)?a!==a&&b!==b:bd(a,b,ad,c,d,e)}function bd(a,b,c,d,e,f){var g=pl(a),h=pl(b),i=Aa,j=Aa;g||(i=Oe(a),i=i==za?Ia:i),h||(j=Oe(b),j=j==za?Ia:j);var k=i==Ia&&!L(a),l=j==Ia&&!L(b),m=i==j;if(m&&!k)return f||(f=new ec),g||Gh(a)?Be(a,b,c,d,e,f):Ce(a,b,i,c,d,e,f);if(!(e&ka)){var n=k&&Cj.call(a,"__wrapped__"),o=l&&Cj.call(b,"__wrapped__");if(n||o){var p=n?a.value():a,q=o?b.value():b;return f||(f=new ec),c(p,q,d,e,f)}}return m?(f||(f=new ec),De(a,b,c,d,e,f)):!1}function cd(a,b,c,d){var e=c.length,f=e,g=!d;if(null==a)return!f;for(a=Object(a);e--;){var h=c[e];if(g&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++e<f;){h=c[e];var i=h[0],j=a[i],k=h[1];if(g&&h[2]){if(j===V&&!(i in a))return!1}else{var l=new ec;if(d)var m=d(j,k,i,a,b,l);if(!(m===V?ad(k,j,d,ja|ka,l):m))return!1}}return!0}function dd(a){if(!qh(a)||af(a))return!1;var b=nh(a)||L(a)?Hj:yb;return b.test(kf(a))}function ed(a){return"function"==typeof a?a:null==a?Ti:"object"==typeof a?pl(a)?kd(a[0],a[1]):jd(a):_i(a)}function fd(a){return Yj(Object(a))}function gd(a){a=null==a?a:Object(a);var b=[];for(var c in a)b.push(c);return b}function hd(a,b){return b>a}function id(a,b){var c=-1,d=dh(a)?Array(a.length):[];return vk(a,function(a,e,f){d[++c]=b(a,e,f)}),d}function jd(a){var b=Ke(a);return 1==b.length&&b[0][2]?df(b[0][0],b[0][1]):function(c){return c===a||cd(c,a,b)}}function kd(a,b){return Ze(a)&&cf(b)?df(jf(a),b):function(c){var d=_h(c,a);return d===V&&d===b?bi(c,a):ad(b,d,V,ja|ka)}}function ld(a,b,c,d,f){if(a!==b){if(!pl(b)&&!Gh(b))var g=di(b);e(g||b,function(e,h){if(g&&(h=e,e=b[h]),qh(e))f||(f=new ec),md(a,b,h,c,ld,d,f);else{var i=d?d(a[h],e,h+"",a,b,f):V;i===V&&(i=e),lc(a,h,i)}})}}function md(a,b,c,d,e,f,g){var h=a[c],i=b[c],j=g.get(i);if(j)return void lc(a,c,j);var k=f?f(h,i,c+"",a,b,g):V,l=k===V;l&&(k=i,pl(i)||Gh(i)?pl(h)?k=h:eh(h)?k=be(h):(l=!1,k=Dc(i,!0)):Ah(i)||bh(i)?bh(h)?k=Ph(h):!qh(h)||d&&nh(h)?(l=!1,k=Dc(i,!0)):k=h:l=!1),g.set(i,k),l&&e(k,i,d,f,g),g["delete"](i),lc(a,c,k)}function nd(a,b){var c=a.length;if(c)return b+=0>b?c:0,Xe(b,c)?a[b]:V}function od(a,b,c){var d=-1;b=k(b.length?b:[Ti],z(Ie()));var e=id(a,function(a,c,e){var f=k(b,function(b){return b(a)});return{criteria:f,index:++d,value:a}});return v(e,function(a,b){return $d(a,b,c)})}function pd(a,b){return a=Object(a),m(b,function(b,c){return c in a&&(b[c]=a[c]),b},{})}function qd(a,b){for(var c=-1,d=Fe(a),e=d.length,f={};++c<e;){var g=d[c],h=a[g];b(h,g)&&(f[g]=h)}return f}function rd(a){return function(b){return null==b?V:b[a]}}function sd(a){return function(b){return Tc(b,a)}}function td(a,b,c,d){var e=d?s:r,f=-1,g=b.length,h=a;for(a===b&&(b=be(b)),c&&(h=k(a,z(c)));++f<g;)for(var i=0,j=b[f],l=c?c(j):j;(i=e(h,l,i,d))>-1;)h!==a&&Rj.call(h,i,1),Rj.call(a,i,1);return a}function ud(a,b){for(var c=a?b.length:0,d=c-1;c--;){var e=b[c];if(c==d||e!==f){var f=e;if(Xe(e))Rj.call(a,e,1);else if(Ze(e,a))delete a[jf(e)];else{var g=Pd(e),h=gf(a,g);null!=h&&delete h[jf(Ef(g))]}}}return a}function vd(a,b){return a+Uj(ak()*(b-a+1))}function wd(a,b,c,d){for(var e=-1,f=Zj(Tj((b-a)/(c||1)),0),g=Array(f);f--;)g[d?f:++e]=a,a+=c;return g}function xd(a,b){var c="";if(!a||1>b||b>ta)return c;do b%2&&(c+=a),b=Uj(b/2),b&&(a+=a);while(b);return c}function yd(a,b,c,d){b=Ze(b,a)?[b]:Pd(b);for(var e=-1,f=b.length,g=f-1,h=a;null!=h&&++e<f;){var i=jf(b[e]);if(qh(h)){var j=c;if(e!=g){var k=h[i];j=d?d(k,i,h):V,j===V&&(j=null==k?Xe(b[e+1])?[]:{}:k)}mc(h,i,j)}h=h[i]}return a}function zd(a,b,c){var d=-1,e=a.length;0>b&&(b=-b>e?0:e+b),c=c>e?e:c,0>c&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0;for(var f=Array(e);++d<e;)f[d]=a[d+b];return f}function Ad(a,b){var c;return vk(a,function(a,d,e){return c=b(a,d,e),!c}),!!c}function Bd(a,b,c){var d=0,e=a?a.length:d;if("number"==typeof b&&b===b&&ya>=e){for(;e>d;){var f=d+e>>>1,g=a[f];null!==g&&!Fh(g)&&(c?b>=g:b>g)?d=f+1:e=f}return e}return Cd(a,b,Ti,c)}function Cd(a,b,c,d){b=c(b);for(var e=0,f=a?a.length:0,g=b!==b,h=null===b,i=Fh(b),j=b===V;f>e;){var k=Uj((e+f)/2),l=c(a[k]),m=l!==V,n=null===l,o=l===l,p=Fh(l);if(g)var q=d||o;else q=j?o&&(d||m):h?o&&m&&(d||!n):i?o&&m&&!n&&(d||!p):n||p?!1:d?b>=l:b>l;q?e=k+1:f=k}return $j(f,xa)}function Dd(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c],h=b?b(g):g;if(!c||!ah(h,i)){var i=h;f[e++]=0===g?0:g}}return f}function Ed(a){return"number"==typeof a?a:Fh(a)?va:+a}function Fd(a){if("string"==typeof a)return a;if(Fh(a))return uk?uk.call(a):"";var b=a+"";return"0"==b&&1/a==-sa?"-0":b}function Gd(a,b,c){var d=-1,e=i,f=a.length,g=!0,h=[],k=h;if(c)g=!1,e=j;else if(f>=X){var l=b?null:Ak(a);if(l)return P(l);g=!1,e=B,k=new bc}else k=b?[]:h;a:for(;++d<f;){var m=a[d],n=b?b(m):m;if(m=c||0!==m?m:0,g&&n===n){for(var o=k.length;o--;)if(k[o]===n)continue a;b&&k.push(n),h.push(m)}else e(k,n,c)||(k!==h&&k.push(n),h.push(m))}return h}function Hd(a,b){b=Ze(b,a)?[b]:Pd(b),a=gf(a,b);var c=jf(Ef(b));return!(null!=a&&Wc(a,c))||delete a[c]}function Id(a,b,c,d){return yd(a,b,c(Tc(a,b)),d)}function Jd(a,b,c,d){for(var e=a.length,f=d?e:-1;(d?f--:++f<e)&&b(a[f],f,a););return c?zd(a,d?0:f,d?f+1:e):zd(a,d?f+1:0,d?e:f)}function Kd(a,b){var c=a;return c instanceof Hb&&(c=c.value()),m(b,function(a,b){return b.func.apply(b.thisArg,l([a],b.args))},c)}function Ld(a,b,c){for(var d=-1,e=a.length;++d<e;)var f=f?l(Ic(f,a[d],b,c),Ic(a[d],f,b,c)):a[d];return f&&f.length?Gd(f,b,c):[]}function Md(a,b,c){for(var d=-1,e=a.length,f=b.length,g={};++d<e;){var h=f>d?b[d]:V;c(g,a[d],h)}return g}function Nd(a){return eh(a)?a:[]}function Od(a){return"function"==typeof a?a:Ti}function Pd(a){return pl(a)?a:Gk(a)}function Qd(a,b,c){var d=a.length;return c=c===V?d:c,!b&&c>=d?a:zd(a,b,c)}function Rd(a,b){if(b)return a.slice();var c=new a.constructor(a.length);return a.copy(c),c}function Sd(a){var b=new a.constructor(a.byteLength);return new Lj(b).set(new Lj(a)),b}function Td(a,b){var c=b?Sd(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.byteLength)}function Ud(b,c,d){var e=c?d(N(b),!0):N(b);return m(e,a,new b.constructor)}function Vd(a){var b=new a.constructor(a.source,ub.exec(a));return b.lastIndex=a.lastIndex,b}function Wd(a,c,d){var e=c?d(P(a),!0):P(a);return m(e,b,new a.constructor)}function Xd(a){return tk?Object(tk.call(a)):{}}function Yd(a,b){var c=b?Sd(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.length)}function Zd(a,b){if(a!==b){var c=a!==V,d=null===a,e=a===a,f=Fh(a),g=b!==V,h=null===b,i=b===b,j=Fh(b);if(!h&&!j&&!f&&a>b||f&&g&&i&&!h&&!j||d&&g&&i||!c&&i||!e)return 1;if(!d&&!f&&!j&&b>a||j&&c&&e&&!d&&!f||h&&c&&e||!g&&e||!i)return-1}return 0}function $d(a,b,c){for(var d=-1,e=a.criteria,f=b.criteria,g=e.length,h=c.length;++d<g;){var i=Zd(e[d],f[d]);if(i){if(d>=h)return i;var j=c[d];return i*("desc"==j?-1:1)}}return a.index-b.index}function _d(a,b,c,d){for(var e=-1,f=a.length,g=c.length,h=-1,i=b.length,j=Zj(f-g,0),k=Array(i+j),l=!d;++h<i;)k[h]=b[h];for(;++e<g;)(l||f>e)&&(k[c[e]]=a[e]);for(;j--;)k[h++]=a[e++];return k}function ae(a,b,c,d){for(var e=-1,f=a.length,g=-1,h=c.length,i=-1,j=b.length,k=Zj(f-h,0),l=Array(k+j),m=!d;++e<k;)l[e]=a[e];for(var n=e;++i<j;)l[n+i]=b[i];for(;++g<h;)(m||f>e)&&(l[n+c[g]]=a[e++]);return l}function be(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}function ce(a,b,c,d){c||(c={});for(var e=-1,f=b.length;++e<f;){var g=b[e],h=d?d(c[g],a[g],g,c,a):a[g];mc(c,g,h)}return c}function de(a,b){return ce(a,Ne(a),b)}function ee(a,b){return function(c,e){var f=pl(c)?d:xc,g=b?b():{};return f(c,a,Ie(e),g)}}function fe(a){return Sg(function(b,c){var d=-1,e=c.length,f=e>1?c[e-1]:V,g=e>2?c[2]:V;for(f=a.length>3&&"function"==typeof f?(e--,f):V,g&&Ye(c[0],c[1],g)&&(f=3>e?V:f,e=1),b=Object(b);++d<e;){var h=c[d];h&&a(b,h,d,f)}return b})}function ge(a,b){return function(c,d){if(null==c)return c;if(!dh(c))return a(c,d);for(var e=c.length,f=b?e:-1,g=Object(c);(b?f--:++f<e)&&d(g[f],f,g)!==!1;);return c}}function he(a){return function(b,c,d){for(var e=-1,f=Object(b),g=d(b),h=g.length;h--;){var i=g[a?h:++e];if(c(f[i],i,f)===!1)break}return b}}function ie(a,b,c){function d(){var b=this&&this!==Jc&&this instanceof d?f:a;return b.apply(e?c:this,arguments)}var e=b&_,f=le(a);return d}function je(a){return function(b){b=Rh(b);var c=rc.test(b)?S(b):V,d=c?c[0]:b.charAt(0),e=c?Qd(c,1).join(""):b.slice(1);return d[a]()+e}}function ke(a){return function(b){return m(Pi(vi(b).replace(nc,"")),a,"")}}function le(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=Gc(a.prototype),d=a.apply(c,b);return qh(d)?d:c}}function me(a,b,d){function e(){for(var g=arguments.length,h=Array(g),i=g,j=He(e);i--;)h[i]=arguments[i];var k=3>g&&h[0]!==j&&h[g-1]!==j?[]:O(h,j);if(g-=k.length,d>g)return xe(a,b,pe,e.placeholder,V,h,k,V,V,d-g);var l=this&&this!==Jc&&this instanceof e?f:a;return c(l,this,h)}var f=le(a);return e}function ne(a){return function(b,c,d){var e=Object(b);if(c=Ie(c,3),!dh(b))var f=ci(b);var g=a(f||b,function(a,b){return f&&(b=a,a=e[b]),c(a,b,e)},d);return g>-1?b[f?f[g]:g]:V}}function oe(a){return Sg(function(b){b=Pc(b,1);var c=b.length,d=c,e=Gb.prototype.thru;for(a&&b.reverse();d--;){var f=b[d];if("function"!=typeof f)throw new vj(Y);if(e&&!g&&"wrapper"==Ge(f))var g=new Gb([],!0)}for(d=g?d:c;++d<c;){f=b[d];var h=Ge(f),i="wrapper"==h?Bk(f):V;g=i&&_e(i[0])&&i[1]==(ga|ca|ea|ha)&&!i[4].length&&1==i[9]?g[Ge(i[0])].apply(g,i[3]):1==f.length&&_e(f)?g[h]():g.thru(f)}return function(){var a=arguments,d=a[0];if(g&&1==a.length&&pl(d)&&d.length>=X)return g.plant(d).value();for(var e=0,f=c?b[e].apply(this,a):d;++e<c;)f=b[e].call(this,f);return f}})}function pe(a,b,c,d,e,f,g,h,i,j){function k(){for(var r=arguments.length,s=Array(r),t=r;t--;)s[t]=arguments[t];if(o)var u=He(k),v=F(s,u);if(d&&(s=_d(s,d,e,o)),f&&(s=ae(s,f,g,o)),r-=v,o&&j>r){var w=O(s,u);return xe(a,b,pe,k.placeholder,c,s,w,h,i,j-r)}var x=m?c:this,y=n?x[a]:a;return r=s.length,h?s=hf(s,h):p&&r>1&&s.reverse(),l&&r>i&&(s.length=i),this&&this!==Jc&&this instanceof k&&(y=q||le(y)),y.apply(x,s)}var l=b&ga,m=b&_,n=b&aa,o=b&(ca|da),p=b&ia,q=n?V:le(a);return k}function qe(a,b){return function(c,d){return $c(c,a,b(d),{})}}function re(a){return function(b,c){var d;if(b===V&&c===V)return 0;if(b!==V&&(d=b),c!==V){if(d===V)return c;"string"==typeof b||"string"==typeof c?(b=Fd(b),c=Fd(c)):(b=Ed(b),c=Ed(c)),d=a(b,c)}return d}}function se(a){return Sg(function(b){return b=1==b.length&&pl(b[0])?k(b[0],z(Ie())):k(Pc(b,1,We),z(Ie())),Sg(function(d){var e=this;return a(b,function(a){return c(a,e,d)})})})}function te(a,b){b=b===V?" ":Fd(b);var c=b.length;if(2>c)return c?xd(b,a):b;var d=xd(b,Tj(a/R(b)));return rc.test(b)?Qd(S(d),0,a).join(""):d.slice(0,a)}function ue(a,b,d,e){function f(){for(var b=-1,i=arguments.length,j=-1,k=e.length,l=Array(k+i),m=this&&this!==Jc&&this instanceof f?h:a;++j<k;)l[j]=e[j];for(;i--;)l[j++]=arguments[++b];return c(m,g?d:this,l)}var g=b&_,h=le(a);return f}function ve(a){return function(b,c,d){return d&&"number"!=typeof d&&Ye(b,c,d)&&(c=d=V),b=Oh(b),b=b===b?b:0,c===V?(c=b,b=0):c=Oh(c)||0,d=d===V?c>b?1:-1:Oh(d)||0,wd(b,c,d,a)}}function we(a){return function(b,c){return("string"!=typeof b||"string"!=typeof c)&&(b=Oh(b),c=Oh(c)),a(b,c)}}function xe(a,b,c,d,e,f,g,h,i,j){var k=b&ca,l=k?g:V,m=k?V:g,n=k?f:V,o=k?V:f;b|=k?ea:fa,b&=~(k?fa:ea),b&ba||(b&=~(_|aa));var p=[a,b,e,n,l,o,m,h,i,j],q=c.apply(V,p);return _e(a)&&Fk(q,p),q.placeholder=d,q}function ye(a){var b=tj[a];return function(a,c){if(a=Oh(a),c=$j(Mh(c),292)){var d=(Rh(a)+"e").split("e"),e=b(d[0]+"e"+(+d[1]+c));return d=(Rh(e)+"e").split("e"),+(d[0]+"e"+(+d[1]-c))}return b(a)}}function ze(a){return function(b){var c=Oe(b);return c==Ga?N(b):c==La?Q(b):y(b,a(b))}}function Ae(a,b,c,d,e,f,g,h){var i=b&aa;if(!i&&"function"!=typeof a)throw new vj(Y);var j=d?d.length:0;if(j||(b&=~(ea|fa),d=e=V),g=g===V?g:Zj(Mh(g),0),h=h===V?h:Mh(h),j-=e?e.length:0,b&fa){var k=d,l=e;d=e=V}var m=i?V:Bk(a),n=[a,b,c,d,e,k,l,f,g,h];if(m&&ef(n,m),a=n[0],b=n[1],c=n[2],d=n[3],e=n[4],h=n[9]=null==n[9]?i?0:a.length:Zj(n[9]-j,0),!h&&b&(ca|da)&&(b&=~(ca|da)),b&&b!=_)o=b==ca||b==da?me(a,b,h):b!=ea&&b!=(_|ea)||e.length?pe.apply(V,n):ue(a,b,c,d);else var o=ie(a,b,c);var p=m?zk:Fk;return p(o,n)}function Be(a,b,c,d,e,f){var g=e&ka,h=a.length,i=b.length;if(h!=i&&!(g&&i>h))return!1;var j=f.get(a);if(j)return j==b;var k=-1,l=!0,m=e&ja?new bc:V;for(f.set(a,b);++k<h;){var n=a[k],p=b[k];if(d)var q=g?d(p,n,k,b,a,f):d(n,p,k,a,b,f);if(q!==V){if(q)continue;l=!1;break}if(m){if(!o(b,function(a,b){return m.has(b)||n!==a&&!c(n,a,d,e,f)?void 0:m.add(b)})){l=!1;break}}else if(n!==p&&!c(n,p,d,e,f)){l=!1;break}}return f["delete"](a),l}function Ce(a,b,c,d,e,f,g){switch(c){case Ra:if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)return!1;a=a.buffer,b=b.buffer;case Qa:return a.byteLength==b.byteLength&&d(new Lj(a),new Lj(b))?!0:!1;case Ba:case Ca:return+a==+b;case Da:return a.name==b.name&&a.message==b.message;case Ha:return a!=+a?b!=+b:a==+b;case Ka:case Ma:return a==b+"";case Ga:var h=N;case La:var i=f&ka;if(h||(h=P),a.size!=b.size&&!i)return!1;var j=g.get(a);return j?j==b:(f|=ja,g.set(a,b),Be(h(a),h(b),d,e,f,g));case Na:if(tk)return tk.call(a)==tk.call(b)}return!1}function De(a,b,c,d,e,f){var g=e&ka,h=ci(a),i=h.length,j=ci(b),k=j.length;if(i!=k&&!g)return!1;for(var l=i;l--;){var m=h[l];if(!(g?m in b:Wc(b,m)))return!1}var n=f.get(a);if(n)return n==b;var o=!0;f.set(a,b);for(var p=g;++l<i;){m=h[l];var q=a[m],r=b[m];if(d)var s=g?d(r,q,m,b,a,f):d(q,r,m,a,b,f);if(!(s===V?q===r||c(q,r,d,e,f):s)){o=!1;break}p||(p="constructor"==m)}if(o&&!p){var t=a.constructor,u=b.constructor;t!=u&&"constructor"in a&&"constructor"in b&&!("function"==typeof t&&t instanceof t&&"function"==typeof u&&u instanceof u)&&(o=!1)}return f["delete"](a),o}function Ee(a){return Uc(a,ci,Ne)}function Fe(a){return Uc(a,di,Dk)}function Ge(a){for(var b=a.name+"",c=mk[b],d=Cj.call(mk,b)?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function He(a){var b=Cj.call(Eb,"placeholder")?Eb:a;return b.placeholder}function Ie(){var a=Eb.iteratee||Ui;return a=a===Ui?ed:a,arguments.length?a(arguments[0],arguments[1]):a}function Je(a,b){var c=a.__data__;return $e(b)?c["string"==typeof b?"string":"hash"]:c.map}function Ke(a){for(var b=ci(a),c=b.length;c--;){var d=b[c],e=a[d];b[c]=[d,e,cf(e)]}return b}function Le(a,b){var c=J(a,b);return dd(c)?c:V}function Me(a){return Vj(Object(a))}function Ne(a){return Nj(Object(a))}function Oe(a){return Fj.call(a)}function Pe(a,b,c){for(var d=-1,e=c.length;++d<e;){var f=c[d],g=f.size;switch(f.type){case"drop":a+=g;break;case"dropRight":b-=g;break;case"take":b=$j(b,a+g);break;case"takeRight":a=Zj(a,b-g)}}return{start:a,end:b}}function Qe(a,b,c){b=Ze(b,a)?[b]:Pd(b);for(var d,e=-1,f=b.length;++e<f;){var g=jf(b[e]);if(!(d=null!=a&&c(a,g)))break;a=a[g]}if(d)return d;var f=a?a.length:0;return!!f&&ph(f)&&Xe(g,f)&&(pl(a)||Eh(a)||bh(a))}function Re(a){var b=a.length,c=a.constructor(b);return b&&"string"==typeof a[0]&&Cj.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function Se(a){return"function"!=typeof a.constructor||bf(a)?{}:Gc(Me(a))}function Te(a,b,c,d){var e=a.constructor;switch(b){case Qa:return Sd(a);case Ba:case Ca:return new e(+a);case Ra:return Td(a,d);case Sa:case Ta:case Ua:case Va:case Wa:case Xa:case Ya:case Za:case $a:return Yd(a,d);case Ga:return Ud(a,d,c);case Ha:case Ma:return new e(a);case Ka:return Vd(a);case La:return Wd(a,d,c);case Na:return Xd(a)}}function Ue(a){var b=a?a.length:V;return ph(b)&&(pl(a)||Eh(a)||bh(a))?x(b,String):null}function Ve(a){return pl(a)||bh(a)}function We(a){return pl(a)&&!(2==a.length&&!nh(a[0]))}function Xe(a,b){return b=null==b?ta:b,!!b&&("number"==typeof a||Ab.test(a))&&a>-1&&a%1==0&&b>a}function Ye(a,b,c){if(!qh(c))return!1;var d=typeof b;return("number"==d?dh(c)&&Xe(b,c.length):"string"==d&&b in c)?ah(c[b],a):!1}function Ze(a,b){if(pl(a))return!1;var c=typeof a;return"number"==c||"symbol"==c||"boolean"==c||null==a||Fh(a)?!0:kb.test(a)||!jb.test(a)||null!=b&&a in Object(b)}function $e(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a}function _e(a){var b=Ge(a),c=Eb[b];if("function"!=typeof c||!(b in Hb.prototype))return!1;if(a===c)return!0;var d=Bk(c);return!!d&&a===d[0]}function af(a){return!!Aj&&Aj in a}function bf(a){var b=a&&a.constructor,c="function"==typeof b&&b.prototype||xj;return a===c}function cf(a){return a===a&&!qh(a)}function df(a,b){return function(c){return null==c?!1:c[a]===b&&(b!==V||a in Object(c))}}function ef(a,b){var c=a[1],d=b[1],e=c|d,f=(_|aa|ga)>e,g=d==ga&&c==ca||d==ga&&c==ha&&a[7].length<=b[8]||d==(ga|ha)&&b[7].length<=b[8]&&c==ca;if(!f&&!g)return a;d&_&&(a[2]=b[2],e|=c&_?0:ba);var h=b[3];if(h){var i=a[3];a[3]=i?_d(i,h,b[4]):h,a[4]=i?O(a[3],$):b[4]}return h=b[5],h&&(i=a[5],a[5]=i?ae(i,h,b[6]):h,a[6]=i?O(a[5],$):b[6]),h=b[7],h&&(a[7]=h),d&ga&&(a[8]=null==a[8]?b[8]:$j(a[8],b[8])),null==a[9]&&(a[9]=b[9]),a[0]=b[0],a[1]=e,a}function ff(a,b,c,d,e,f){return qh(a)&&qh(b)&&ld(a,b,V,ff,f.set(b,a)),a}function gf(a,b){return 1==b.length?a:Tc(a,zd(b,0,-1))}function hf(a,b){for(var c=a.length,d=$j(b.length,c),e=be(a);d--;){var f=b[d];a[d]=Xe(f,c)?e[f]:V}return a}function jf(a){if("string"==typeof a||Fh(a))return a;var b=a+"";return"0"==b&&1/a==-sa?"-0":b}function kf(a){if(null!=a){try{return Bj.call(a)}catch(b){}try{return a+""}catch(b){}}return""}function lf(a){if(a instanceof Hb)return a.clone();var b=new Gb(a.__wrapped__,a.__chain__);return b.__actions__=be(a.__actions__),b.__index__=a.__index__,b.__values__=a.__values__,b}function mf(a,b,c){b=(c?Ye(a,b,c):b===V)?1:Zj(Mh(b),0);var d=a?a.length:0;if(!d||1>b)return[];for(var e=0,f=0,g=Array(Tj(d/b));d>e;)g[f++]=zd(a,e,e+=b);return g}function nf(a){for(var b=-1,c=a?a.length:0,d=0,e=[];++b<c;){var f=a[b];f&&(e[d++]=f)}return e}function of(){for(var a=arguments.length,b=Array(a?a-1:0),c=arguments[0],d=a;d--;)b[d-1]=arguments[d];return a?l(pl(c)?be(c):[c],Pc(b,1)):[]}function pf(a,b,c){var d=a?a.length:0;return d?(b=c||b===V?1:Mh(b),zd(a,0>b?0:b,d)):[]}function qf(a,b,c){var d=a?a.length:0;return d?(b=c||b===V?1:Mh(b),b=d-b,zd(a,0,0>b?0:b)):[]}function rf(a,b){return a&&a.length?Jd(a,Ie(b,3),!0,!0):[]}function sf(a,b){return a&&a.length?Jd(a,Ie(b,3),!0):[]}function tf(a,b,c,d){var e=a?a.length:0;return e?(c&&"number"!=typeof c&&Ye(a,b,c)&&(c=0,d=e),Nc(a,b,c,d)):[]}function uf(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=null==c?0:Mh(c);return 0>e&&(e=Zj(d+e,0)),q(a,Ie(b,3),e)}function vf(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=d-1;return c!==V&&(e=Mh(c),e=0>c?Zj(d+e,0):$j(e,d-1)),q(a,Ie(b,3),e,!0)}function wf(a){var b=a?a.length:0;return b?Pc(a,1):[]}function xf(a){var b=a?a.length:0;return b?Pc(a,sa):[]}function yf(a,b){var c=a?a.length:0;return c?(b=b===V?1:Mh(b),Pc(a,b)):[]}function zf(a){for(var b=-1,c=a?a.length:0,d={};++b<c;){var e=a[b];d[e[0]]=e[1]}return d}function Af(a){return a&&a.length?a[0]:V}function Bf(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=null==c?0:Mh(c);return 0>e&&(e=Zj(d+e,0)),r(a,b,e)}function Cf(a){return qf(a,1)}function Df(a,b){return a?Xj.call(a,b):""}function Ef(a){var b=a?a.length:0;return b?a[b-1]:V}function Ff(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=d;if(c!==V&&(e=Mh(c),e=(0>e?Zj(d+e,0):$j(e,d-1))+1),b!==b)return K(a,e-1,!0);for(;e--;)if(a[e]===b)return e;return-1}function Gf(a,b){return a&&a.length?nd(a,Mh(b)):V}function Hf(a,b){return a&&a.length&&b&&b.length?td(a,b):a}function If(a,b,c){return a&&a.length&&b&&b.length?td(a,b,Ie(c)):a}function Jf(a,b,c){return a&&a.length&&b&&b.length?td(a,b,V,c):a}function Kf(a,b){var c=[];if(!a||!a.length)return c;var d=-1,e=[],f=a.length;for(b=Ie(b,3);++d<f;){var g=a[d];b(g,d,a)&&(c.push(g),e.push(d))}return ud(a,e),c}function Lf(a){return a?ck.call(a):a}function Mf(a,b,c){var d=a?a.length:0;return d?(c&&"number"!=typeof c&&Ye(a,b,c)?(b=0,c=d):(b=null==b?0:Mh(b),c=c===V?d:Mh(c)),zd(a,b,c)):[]}function Nf(a,b){return Bd(a,b)}function Of(a,b,c){return Cd(a,b,Ie(c))}function Pf(a,b){var c=a?a.length:0;if(c){var d=Bd(a,b);if(c>d&&ah(a[d],b))return d}return-1}function Qf(a,b){return Bd(a,b,!0)}function Rf(a,b,c){return Cd(a,b,Ie(c),!0)}function Sf(a,b){var c=a?a.length:0;if(c){var d=Bd(a,b,!0)-1;if(ah(a[d],b))return d}return-1}function Tf(a){return a&&a.length?Dd(a):[]}function Uf(a,b){return a&&a.length?Dd(a,Ie(b)):[]}function Vf(a){return pf(a,1)}function Wf(a,b,c){return a&&a.length?(b=c||b===V?1:Mh(b),zd(a,0,0>b?0:b)):[];
}function Xf(a,b,c){var d=a?a.length:0;return d?(b=c||b===V?1:Mh(b),b=d-b,zd(a,0>b?0:b,d)):[]}function Yf(a,b){return a&&a.length?Jd(a,Ie(b,3),!1,!0):[]}function Zf(a,b){return a&&a.length?Jd(a,Ie(b,3)):[]}function $f(a){return a&&a.length?Gd(a):[]}function _f(a,b){return a&&a.length?Gd(a,Ie(b)):[]}function ag(a,b){return a&&a.length?Gd(a,V,b):[]}function bg(a){if(!a||!a.length)return[];var b=0;return a=h(a,function(a){return eh(a)?(b=Zj(a.length,b),!0):void 0}),x(b,function(b){return k(a,rd(b))})}function cg(a,b){if(!a||!a.length)return[];var d=bg(a);return null==b?d:k(d,function(a){return c(b,V,a)})}function dg(a,b){return Md(a||[],b||[],mc)}function eg(a,b){return Md(a||[],b||[],yd)}function fg(a){var b=Eb(a);return b.__chain__=!0,b}function gg(a,b){return b(a),a}function hg(a,b){return b(a)}function ig(){return fg(this)}function jg(){return new Gb(this.value(),this.__chain__)}function kg(){this.__values__===V&&(this.__values__=Kh(this.value()));var a=this.__index__>=this.__values__.length,b=a?V:this.__values__[this.__index__++];return{done:a,value:b}}function lg(){return this}function mg(a){for(var b,c=this;c instanceof Fb;){var d=lf(c);d.__index__=0,d.__values__=V,b?e.__wrapped__=d:b=d;var e=d;c=c.__wrapped__}return e.__wrapped__=a,b}function ng(){var a=this.__wrapped__;if(a instanceof Hb){var b=a;return this.__actions__.length&&(b=new Hb(this)),b=b.reverse(),b.__actions__.push({func:hg,args:[Lf],thisArg:V}),new Gb(b,this.__chain__)}return this.thru(Lf)}function og(){return Kd(this.__wrapped__,this.__actions__)}function pg(a,b,c){var d=pl(a)?g:Lc;return c&&Ye(a,b,c)&&(b=V),d(a,Ie(b,3))}function qg(a,b){var c=pl(a)?h:Oc;return c(a,Ie(b,3))}function rg(a,b){return Pc(xg(a,b),1)}function sg(a,b){return Pc(xg(a,b),sa)}function tg(a,b,c){return c=c===V?1:Mh(c),Pc(xg(a,b),c)}function ug(a,b){var c=pl(a)?e:vk;return c(a,Ie(b,3))}function vg(a,b){var c=pl(a)?f:wk;return c(a,Ie(b,3))}function wg(a,b,c,d){a=dh(a)?a:pi(a),c=c&&!d?Mh(c):0;var e=a.length;return 0>c&&(c=Zj(e+c,0)),Eh(a)?e>=c&&a.indexOf(b,c)>-1:!!e&&r(a,b,c)>-1}function xg(a,b){var c=pl(a)?k:id;return c(a,Ie(b,3))}function yg(a,b,c,d){return null==a?[]:(pl(b)||(b=null==b?[]:[b]),c=d?V:c,pl(c)||(c=null==c?[]:[c]),od(a,b,c))}function zg(a,b,c){var d=pl(a)?m:u,e=arguments.length<3;return d(a,Ie(b,4),c,e,vk)}function Ag(a,b,c){var d=pl(a)?n:u,e=arguments.length<3;return d(a,Ie(b,4),c,e,wk)}function Bg(a,b){var c=pl(a)?h:Oc;return b=Ie(b,3),c(a,function(a,c,d){return!b(a,c,d)})}function Cg(a){var b=dh(a)?a:pi(a),c=b.length;return c>0?b[vd(0,c-1)]:V}function Dg(a,b,c){var d=-1,e=Kh(a),f=e.length,g=f-1;for(b=(c?Ye(a,b,c):b===V)?1:Ac(Mh(b),0,f);++d<b;){var h=vd(d,g),i=e[h];e[h]=e[d],e[d]=i}return e.length=b,e}function Eg(a){return Dg(a,wa)}function Fg(a){if(null==a)return 0;if(dh(a)){var b=a.length;return b&&Eh(a)?R(a):b}if(rh(a)){var c=Oe(a);if(c==Ga||c==La)return a.size}return ci(a).length}function Gg(a,b,c){var d=pl(a)?o:Ad;return c&&Ye(a,b,c)&&(b=V),d(a,Ie(b,3))}function Hg(){return rj.now()}function Ig(a,b){if("function"!=typeof b)throw new vj(Y);return a=Mh(a),function(){return--a<1?b.apply(this,arguments):void 0}}function Jg(a,b,c){return b=c?V:b,b=a&&null==b?a.length:b,Ae(a,ga,V,V,V,V,b)}function Kg(a,b){var c;if("function"!=typeof b)throw new vj(Y);return a=Mh(a),function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=V),c}}function Lg(a,b,c){b=c?V:b;var d=Ae(a,ca,V,V,V,V,V,b);return d.placeholder=Lg.placeholder,d}function Mg(a,b,c){b=c?V:b;var d=Ae(a,da,V,V,V,V,V,b);return d.placeholder=Mg.placeholder,d}function Ng(a,b,c){function d(b){var c=m,d=n;return m=n=V,s=b,p=a.apply(d,c)}function e(a){return s=a,q=Sj(h,b),t?d(a):p}function f(a){var c=a-r,d=a-s,e=b-c;return u?$j(e,o-d):e}function g(a){var c=a-r,d=a-s;return r===V||c>=b||0>c||u&&d>=o}function h(){var a=Hg();return g(a)?i(a):void(q=Sj(h,f(a)))}function i(a){return q=V,v&&m?d(a):(m=n=V,p)}function j(){s=0,m=r=n=q=V}function k(){return q===V?p:i(Hg())}function l(){var a=Hg(),c=g(a);if(m=arguments,n=this,r=a,c){if(q===V)return e(r);if(u)return q=Sj(h,b),d(r)}return q===V&&(q=Sj(h,b)),p}var m,n,o,p,q,r,s=0,t=!1,u=!1,v=!0;if("function"!=typeof a)throw new vj(Y);return b=Oh(b)||0,qh(c)&&(t=!!c.leading,u="maxWait"in c,o=u?Zj(Oh(c.maxWait)||0,b):o,v="trailing"in c?!!c.trailing:v),l.cancel=j,l.flush=k,l}function Og(a){return Ae(a,ia)}function Pg(a,b){if("function"!=typeof a||b&&"function"!=typeof b)throw new vj(Y);var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);var g=a.apply(this,d);return c.cache=f.set(e,g),g};return c.cache=new(Pg.Cache||Xb),c}function Qg(a){if("function"!=typeof a)throw new vj(Y);return function(){return!a.apply(this,arguments)}}function Rg(a){return Kg(2,a)}function Sg(a,b){if("function"!=typeof a)throw new vj(Y);return b=Zj(b===V?a.length-1:Mh(b),0),function(){for(var d=arguments,e=-1,f=Zj(d.length-b,0),g=Array(f);++e<f;)g[e]=d[b+e];switch(b){case 0:return a.call(this,g);case 1:return a.call(this,d[0],g);case 2:return a.call(this,d[0],d[1],g)}var h=Array(b+1);for(e=-1;++e<b;)h[e]=d[e];return h[b]=g,c(a,this,h)}}function Tg(a,b){if("function"!=typeof a)throw new vj(Y);return b=b===V?0:Zj(Mh(b),0),Sg(function(d){var e=d[b],f=Qd(d,0,b);return e&&l(f,e),c(a,this,f)})}function Ug(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new vj(Y);return qh(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),Ng(a,b,{leading:d,maxWait:b,trailing:e})}function Vg(a){return Jg(a,1)}function Wg(a,b){return b=null==b?Ti:b,kl(b,a)}function Xg(){if(!arguments.length)return[];var a=arguments[0];return pl(a)?a:[a]}function Yg(a){return Dc(a,!1,!0)}function Zg(a,b){return Dc(a,!1,!0,b)}function $g(a){return Dc(a,!0,!0)}function _g(a,b){return Dc(a,!0,!0,b)}function ah(a,b){return a===b||a!==a&&b!==b}function bh(a){return eh(a)&&Cj.call(a,"callee")&&(!Qj.call(a,"callee")||Fj.call(a)==za)}function ch(a){return rh(a)&&Fj.call(a)==Qa}function dh(a){return null!=a&&ph(Ck(a))&&!nh(a)}function eh(a){return rh(a)&&dh(a)}function fh(a){return a===!0||a===!1||rh(a)&&Fj.call(a)==Ba}function gh(a){return rh(a)&&Fj.call(a)==Ca}function hh(a){return!!a&&1===a.nodeType&&rh(a)&&!Ah(a)}function ih(a){if(dh(a)&&(pl(a)||Eh(a)||nh(a.splice)||bh(a)||ql(a)))return!a.length;if(rh(a)){var b=Oe(a);if(b==Ga||b==La)return!a.size}for(var c in a)if(Cj.call(a,c))return!1;return!(lk&&ci(a).length)}function jh(a,b){return ad(a,b)}function kh(a,b,c){c="function"==typeof c?c:V;var d=c?c(a,b):V;return d===V?ad(a,b,c):!!d}function lh(a){return rh(a)?Fj.call(a)==Da||"string"==typeof a.message&&"string"==typeof a.name:!1}function mh(a){return"number"==typeof a&&Wj(a)}function nh(a){var b=qh(a)?Fj.call(a):"";return b==Ea||b==Fa}function oh(a){return"number"==typeof a&&a==Mh(a)}function ph(a){return"number"==typeof a&&a>-1&&a%1==0&&ta>=a}function qh(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function rh(a){return!!a&&"object"==typeof a}function sh(a){return rh(a)&&Oe(a)==Ga}function th(a,b){return a===b||cd(a,b,Ke(b))}function uh(a,b,c){return c="function"==typeof c?c:V,cd(a,b,Ke(b),c)}function vh(a){return zh(a)&&a!=+a}function wh(a){if(Ek(a))throw new sj("This method is not supported with `core-js`. Try https://github.com/es-shims.");return dd(a)}function xh(a){return null===a}function yh(a){return null==a}function zh(a){return"number"==typeof a||rh(a)&&Fj.call(a)==Ha}function Ah(a){if(!rh(a)||Fj.call(a)!=Ia||L(a))return!1;var b=Me(a);if(null===b)return!0;var c=Cj.call(b,"constructor")&&b.constructor;return"function"==typeof c&&c instanceof c&&Bj.call(c)==Ej}function Bh(a){return qh(a)&&Fj.call(a)==Ka}function Ch(a){return oh(a)&&a>=-ta&&ta>=a}function Dh(a){return rh(a)&&Oe(a)==La}function Eh(a){return"string"==typeof a||!pl(a)&&rh(a)&&Fj.call(a)==Ma}function Fh(a){return"symbol"==typeof a||rh(a)&&Fj.call(a)==Na}function Gh(a){return rh(a)&&ph(a.length)&&!!vc[Fj.call(a)]}function Hh(a){return a===V}function Ih(a){return rh(a)&&Oe(a)==Oa}function Jh(a){return rh(a)&&Fj.call(a)==Pa}function Kh(a){if(!a)return[];if(dh(a))return Eh(a)?S(a):be(a);if(Oj&&a[Oj])return M(a[Oj]());var b=Oe(a),c=b==Ga?N:b==La?P:pi;return c(a)}function Lh(a){if(!a)return 0===a?a:0;if(a=Oh(a),a===sa||a===-sa){var b=0>a?-1:1;return b*ua}return a===a?a:0}function Mh(a){var b=Lh(a),c=b%1;return b===b?c?b-c:b:0}function Nh(a){return a?Ac(Mh(a),0,wa):0}function Oh(a){if("number"==typeof a)return a;if(Fh(a))return va;if(qh(a)){var b=nh(a.valueOf)?a.valueOf():a;a=qh(b)?b+"":b}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(ob,"");var c=xb.test(a);return c||zb.test(a)?Cc(a.slice(2),c?2:8):wb.test(a)?va:+a}function Ph(a){return ce(a,di(a))}function Qh(a){return Ac(Mh(a),-ta,ta)}function Rh(a){return null==a?"":Fd(a)}function Sh(a,b){var c=Gc(a);return b?yc(c,b):c}function Th(a,b){return p(a,Ie(b,3),Qc)}function Uh(a,b){return p(a,Ie(b,3),Rc)}function Vh(a,b){return null==a?a:xk(a,Ie(b,3),di)}function Wh(a,b){return null==a?a:yk(a,Ie(b,3),di)}function Xh(a,b){return a&&Qc(a,Ie(b,3))}function Yh(a,b){return a&&Rc(a,Ie(b,3))}function Zh(a){return null==a?[]:Sc(a,ci(a))}function $h(a){return null==a?[]:Sc(a,di(a))}function _h(a,b,c){var d=null==a?V:Tc(a,b);return d===V?c:d}function ai(a,b){return null!=a&&Qe(a,b,Wc)}function bi(a,b){return null!=a&&Qe(a,b,Xc)}function ci(a){var b=bf(a);if(!b&&!dh(a))return fd(a);var c=Ue(a),d=!!c,e=c||[],f=e.length;for(var g in a)!Wc(a,g)||d&&("length"==g||Xe(g,f))||b&&"constructor"==g||e.push(g);return e}function di(a){for(var b=-1,c=bf(a),d=gd(a),e=d.length,f=Ue(a),g=!!f,h=f||[],i=h.length;++b<e;){var j=d[b];g&&("length"==j||Xe(j,i))||"constructor"==j&&(c||!Cj.call(a,j))||h.push(j)}return h}function ei(a,b){var c={};return b=Ie(b,3),Qc(a,function(a,d,e){c[b(a,d,e)]=a}),c}function fi(a,b){var c={};return b=Ie(b,3),Qc(a,function(a,d,e){c[d]=b(a,d,e)}),c}function gi(a,b){return b=Ie(b),qd(a,function(a,c){return!b(a,c)})}function hi(a,b){return null==a?{}:qd(a,Ie(b))}function ii(a,b,c){b=Ze(b,a)?[b]:Pd(b);var d=-1,e=b.length;for(e||(a=V,e=1);++d<e;){var f=null==a?V:a[jf(b[d])];f===V&&(d=e,f=c),a=nh(f)?f.call(a):f}return a}function ji(a,b,c){return null==a?a:yd(a,b,c)}function ki(a,b,c,d){return d="function"==typeof d?d:V,null==a?a:yd(a,b,c,d)}function li(a,b,c){var d=pl(a)||Gh(a);if(b=Ie(b,4),null==c)if(d||qh(a)){var f=a.constructor;c=d?pl(a)?new f:[]:nh(f)?Gc(Me(a)):{}}else c={};return(d?e:Qc)(a,function(a,d,e){return b(c,a,d,e)}),c}function mi(a,b){return null==a?!0:Hd(a,b)}function ni(a,b,c){return null==a?a:Id(a,b,Od(c))}function oi(a,b,c,d){return d="function"==typeof d?d:V,null==a?a:Id(a,b,Od(c),d)}function pi(a){return a?A(a,ci(a)):[]}function qi(a){return null==a?[]:A(a,di(a))}function ri(a,b,c){return c===V&&(c=b,b=V),c!==V&&(c=Oh(c),c=c===c?c:0),b!==V&&(b=Oh(b),b=b===b?b:0),Ac(Oh(a),b,c)}function si(a,b,c){return b=Oh(b)||0,c===V?(c=b,b=0):c=Oh(c)||0,a=Oh(a),Yc(a,b,c)}function ti(a,b,c){if(c&&"boolean"!=typeof c&&Ye(a,b,c)&&(b=c=V),c===V&&("boolean"==typeof b?(c=b,b=V):"boolean"==typeof a&&(c=a,a=V)),a===V&&b===V?(a=0,b=1):(a=Oh(a)||0,b===V?(b=a,a=0):b=Oh(b)||0),a>b){var d=a;a=b,b=d}if(c||a%1||b%1){var e=ak();return $j(a+e*(b-a+Bc("1e-"+((e+"").length-1))),b)}return vd(a,b)}function ui(a){return Ql(Rh(a).toLowerCase())}function vi(a){return a=Rh(a),a&&a.replace(Bb,G).replace(oc,"")}function wi(a,b,c){a=Rh(a),b=Fd(b);var d=a.length;return c=c===V?d:Ac(Mh(c),0,d),c-=b.length,c>=0&&a.indexOf(b,c)==c}function xi(a){return a=Rh(a),a&&fb.test(a)?a.replace(db,H):a}function yi(a){return a=Rh(a),a&&nb.test(a)?a.replace(mb,"\\$&"):a}function zi(a,b,c){a=Rh(a),b=Mh(b);var d=b?R(a):0;if(!b||d>=b)return a;var e=(b-d)/2;return te(Uj(e),c)+a+te(Tj(e),c)}function Ai(a,b,c){a=Rh(a),b=Mh(b);var d=b?R(a):0;return b&&b>d?a+te(b-d,c):a}function Bi(a,b,c){a=Rh(a),b=Mh(b);var d=b?R(a):0;return b&&b>d?te(b-d,c)+a:a}function Ci(a,b,c){return c||null==b?b=0:b&&(b=+b),a=Rh(a).replace(ob,""),_j(a,b||(vb.test(a)?16:10))}function Di(a,b,c){return b=(c?Ye(a,b,c):b===V)?1:Mh(b),xd(Rh(a),b)}function Ei(){var a=arguments,b=Rh(a[0]);return a.length<3?b:bk.call(b,a[1],a[2])}function Fi(a,b,c){return c&&"number"!=typeof c&&Ye(a,b,c)&&(b=c=V),(c=c===V?wa:c>>>0)?(a=Rh(a),a&&("string"==typeof b||null!=b&&!Bh(b))&&(b=Fd(b),""==b&&rc.test(a))?Qd(S(a),0,c):dk.call(a,b,c)):[]}function Gi(a,b,c){return a=Rh(a),c=Ac(Mh(c),0,a.length),a.lastIndexOf(Fd(b),c)==c}function Hi(a,b,c){var d=Eb.templateSettings;c&&Ye(a,b,c)&&(b=V),a=Rh(a),b=vl({},b,d,kc);var e,f,g=vl({},b.imports,d.imports,kc),h=ci(g),i=A(g,h),j=0,k=b.interpolate||Cb,l="__p += '",m=uj((b.escape||Cb).source+"|"+k.source+"|"+(k===ib?tb:Cb).source+"|"+(b.evaluate||Cb).source+"|$","g"),n="//# sourceURL="+("sourceURL"in b?b.sourceURL:"lodash.templateSources["+ ++uc+"]")+"\n";a.replace(m,function(b,c,d,g,h,i){return d||(d=g),l+=a.slice(j,i).replace(Db,I),c&&(e=!0,l+="' +\n__e("+c+") +\n'"),h&&(f=!0,l+="';\n"+h+";\n__p += '"),d&&(l+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),j=i+b.length,b}),l+="';\n";var o=b.variable;o||(l="with (obj) {\n"+l+"\n}\n"),l=(f?l.replace(_a,""):l).replace(ab,"$1").replace(bb,"$1;"),l="function("+(o||"obj")+") {\n"+(o?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(e?", __e = _.escape":"")+(f?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+l+"return __p\n}";var p=Rl(function(){return Function(h,n+"return "+l).apply(V,i)});if(p.source=l,lh(p))throw p;return p}function Ii(a){return Rh(a).toLowerCase()}function Ji(a){return Rh(a).toUpperCase()}function Ki(a,b,c){if(a=Rh(a),a&&(c||b===V))return a.replace(ob,"");if(!a||!(b=Fd(b)))return a;var d=S(a),e=S(b),f=C(d,e),g=D(d,e)+1;return Qd(d,f,g).join("")}function Li(a,b,c){if(a=Rh(a),a&&(c||b===V))return a.replace(qb,"");if(!a||!(b=Fd(b)))return a;var d=S(a),e=D(d,S(b))+1;return Qd(d,0,e).join("")}function Mi(a,b,c){if(a=Rh(a),a&&(c||b===V))return a.replace(pb,"");if(!a||!(b=Fd(b)))return a;var d=S(a),e=C(d,S(b));return Qd(d,e).join("")}function Ni(a,b){var c=la,d=ma;if(qh(b)){var e="separator"in b?b.separator:e;c="length"in b?Mh(b.length):c,d="omission"in b?Fd(b.omission):d}a=Rh(a);var f=a.length;if(rc.test(a)){var g=S(a);f=g.length}if(c>=f)return a;var h=c-R(d);if(1>h)return d;var i=g?Qd(g,0,h).join(""):a.slice(0,h);if(e===V)return i+d;if(g&&(h+=i.length-h),Bh(e)){if(a.slice(h).search(e)){var j,k=i;for(e.global||(e=uj(e.source,Rh(ub.exec(e))+"g")),e.lastIndex=0;j=e.exec(k);)var l=j.index;i=i.slice(0,l===V?h:l)}}else if(a.indexOf(Fd(e),h)!=h){var m=i.lastIndexOf(e);m>-1&&(i=i.slice(0,m))}return i+d}function Oi(a){return a=Rh(a),a&&eb.test(a)?a.replace(cb,T):a}function Pi(a,b,c){return a=Rh(a),b=c?V:b,b===V&&(b=sc.test(a)?qc:rb),a.match(b)||[]}function Qi(a){var b=a?a.length:0,d=Ie();return a=b?k(a,function(a){if("function"!=typeof a[1])throw new vj(Y);return[d(a[0]),a[1]]}):[],Sg(function(d){for(var e=-1;++e<b;){var f=a[e];if(c(f[0],this,d))return c(f[1],this,d)}})}function Ri(a){return Ec(Dc(a,!0))}function Si(a){return function(){return a}}function Ti(a){return a}function Ui(a){return ed("function"==typeof a?a:Dc(a,!0))}function Vi(a){return jd(Dc(a,!0))}function Wi(a,b){return kd(a,Dc(b,!0))}function Xi(a,b,c){var d=ci(b),f=Sc(b,d);null!=c||qh(b)&&(f.length||!d.length)||(c=b,b=a,a=this,f=Sc(b,ci(b)));var g=!(qh(c)&&"chain"in c&&!c.chain),h=nh(a);return e(f,function(c){var d=b[c];a[c]=d,h&&(a.prototype[c]=function(){var b=this.__chain__;if(g||b){var c=a(this.__wrapped__),e=c.__actions__=be(this.__actions__);return e.push({func:d,args:arguments,thisArg:a}),c.__chain__=b,c}return d.apply(a,l([this.value()],arguments))})}),a}function Yi(){return Jc._===this&&(Jc._=Gj),this}function Zi(){}function $i(a){return a=Mh(a),Sg(function(b){return nd(b,a)})}function _i(a){return Ze(a)?rd(jf(a)):sd(a)}function aj(a){return function(b){return null==a?V:Tc(a,b)}}function bj(){return[]}function cj(){return!1}function dj(){return{}}function ej(){return""}function fj(){return!0}function gj(a,b){if(a=Mh(a),1>a||a>ta)return[];var c=wa,d=$j(a,wa);b=Ie(b),a-=wa;for(var e=x(d,b);++c<a;)b(c);return e}function hj(a){return pl(a)?k(a,jf):Fh(a)?[a]:be(Gk(a))}function ij(a){var b=++Dj;return Rh(a)+b}function jj(a){return a&&a.length?Mc(a,Ti,Vc):V}function kj(a,b){return a&&a.length?Mc(a,Ie(b),Vc):V}function lj(a){return t(a,Ti)}function mj(a,b){return t(a,Ie(b))}function nj(a){return a&&a.length?Mc(a,Ti,hd):V}function oj(a,b){return a&&a.length?Mc(a,Ie(b),hd):V}function pj(a){return a&&a.length?w(a,Ti):0}function qj(a,b){return a&&a.length?w(a,Ie(b)):0}E=E?Kc.defaults({},E,Kc.pick(Jc,tc)):Jc;var rj=E.Date,sj=E.Error,tj=E.Math,uj=E.RegExp,vj=E.TypeError,wj=E.Array.prototype,xj=E.Object.prototype,yj=E.String.prototype,zj=E["__core-js_shared__"],Aj=function(){var a=/[^.]+$/.exec(zj&&zj.keys&&zj.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Bj=E.Function.prototype.toString,Cj=xj.hasOwnProperty,Dj=0,Ej=Bj.call(Object),Fj=xj.toString,Gj=Jc._,Hj=uj("^"+Bj.call(Cj).replace(mb,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ij=Fc?E.Buffer:V,Jj=E.Reflect,Kj=E.Symbol,Lj=E.Uint8Array,Mj=Jj?Jj.enumerate:V,Nj=Object.getOwnPropertySymbols,Oj="symbol"==typeof(Oj=Kj&&Kj.iterator)?Oj:V,Pj=Object.create,Qj=xj.propertyIsEnumerable,Rj=wj.splice,Sj=function(a,b){return E.setTimeout.call(Jc,a,b)},Tj=tj.ceil,Uj=tj.floor,Vj=Object.getPrototypeOf,Wj=E.isFinite,Xj=wj.join,Yj=Object.keys,Zj=tj.max,$j=tj.min,_j=E.parseInt,ak=tj.random,bk=yj.replace,ck=wj.reverse,dk=yj.split,ek=Le(E,"DataView"),fk=Le(E,"Map"),gk=Le(E,"Promise"),hk=Le(E,"Set"),ik=Le(E,"WeakMap"),jk=Le(Object,"create"),kk=ik&&new ik,lk=!Qj.call({valueOf:1},"valueOf"),mk={},nk=kf(ek),ok=kf(fk),pk=kf(gk),qk=kf(hk),rk=kf(ik),sk=Kj?Kj.prototype:V,tk=sk?sk.valueOf:V,uk=sk?sk.toString:V;Eb.templateSettings={escape:gb,evaluate:hb,interpolate:ib,variable:"",imports:{_:Eb}},Eb.prototype=Fb.prototype,Eb.prototype.constructor=Eb,Gb.prototype=Gc(Fb.prototype),Gb.prototype.constructor=Gb,Hb.prototype=Gc(Fb.prototype),Hb.prototype.constructor=Hb,Lb.prototype.clear=Mb,Lb.prototype["delete"]=Nb,Lb.prototype.get=Ob,Lb.prototype.has=Pb,Lb.prototype.set=Qb,Rb.prototype.clear=Sb,Rb.prototype["delete"]=Tb,Rb.prototype.get=Ub,Rb.prototype.has=Vb,Rb.prototype.set=Wb,Xb.prototype.clear=Yb,Xb.prototype["delete"]=Zb,Xb.prototype.get=$b,Xb.prototype.has=_b,Xb.prototype.set=ac,bc.prototype.add=bc.prototype.push=cc,bc.prototype.has=dc,ec.prototype.clear=fc,ec.prototype["delete"]=gc,ec.prototype.get=hc,ec.prototype.has=ic,ec.prototype.set=jc;var vk=ge(Qc),wk=ge(Rc,!0),xk=he(),yk=he(!0);Mj&&!Qj.call({valueOf:1},"valueOf")&&(gd=function(a){return M(Mj(a))});var zk=kk?function(a,b){return kk.set(a,b),a}:Ti,Ak=hk&&1/P(new hk([,-0]))[1]==sa?function(a){return new hk(a)}:Zi,Bk=kk?function(a){return kk.get(a)}:Zi,Ck=rd("length");Nj||(Ne=bj);var Dk=Nj?function(a){for(var b=[];a;)l(b,Ne(a)),a=Me(a);return b}:Ne;(ek&&Oe(new ek(new ArrayBuffer(1)))!=Ra||fk&&Oe(new fk)!=Ga||gk&&Oe(gk.resolve())!=Ja||hk&&Oe(new hk)!=La||ik&&Oe(new ik)!=Oa)&&(Oe=function(a){var b=Fj.call(a),c=b==Ia?a.constructor:V,d=c?kf(c):V;if(d)switch(d){case nk:return Ra;case ok:return Ga;case pk:return Ja;case qk:return La;case rk:return Oa}return b});var Ek=zj?nh:cj,Fk=function(){var a=0,b=0;return function(c,d){var e=Hg(),f=oa-(e-b);if(b=e,f>0){if(++a>=na)return c}else a=0;return zk(c,d)}}(),Gk=Pg(function(a){var b=[];return Rh(a).replace(lb,function(a,c,d,e){b.push(d?e.replace(sb,"$1"):c||a)}),b}),Hk=Sg(function(a,b){return eh(a)?Ic(a,Pc(b,1,eh,!0)):[]}),Ik=Sg(function(a,b){var c=Ef(b);return eh(c)&&(c=V),eh(a)?Ic(a,Pc(b,1,eh,!0),Ie(c)):[]}),Jk=Sg(function(a,b){var c=Ef(b);return eh(c)&&(c=V),eh(a)?Ic(a,Pc(b,1,eh,!0),V,c):[]}),Kk=Sg(function(a){var b=k(a,Nd);return b.length&&b[0]===a[0]?Zc(b):[]}),Lk=Sg(function(a){var b=Ef(a),c=k(a,Nd);return b===Ef(c)?b=V:c.pop(),c.length&&c[0]===a[0]?Zc(c,Ie(b)):[]}),Mk=Sg(function(a){var b=Ef(a),c=k(a,Nd);return b===Ef(c)?b=V:c.pop(),c.length&&c[0]===a[0]?Zc(c,V,b):[]}),Nk=Sg(Hf),Ok=Sg(function(a,b){b=Pc(b,1);var c=a?a.length:0,d=zc(a,b);return ud(a,k(b,function(a){return Xe(a,c)?+a:a}).sort(Zd)),d}),Pk=Sg(function(a){return Gd(Pc(a,1,eh,!0))}),Qk=Sg(function(a){var b=Ef(a);return eh(b)&&(b=V),Gd(Pc(a,1,eh,!0),Ie(b))}),Rk=Sg(function(a){var b=Ef(a);return eh(b)&&(b=V),Gd(Pc(a,1,eh,!0),V,b)}),Sk=Sg(function(a,b){return eh(a)?Ic(a,b):[]}),Tk=Sg(function(a){return Ld(h(a,eh))}),Uk=Sg(function(a){var b=Ef(a);return eh(b)&&(b=V),Ld(h(a,eh),Ie(b))}),Vk=Sg(function(a){var b=Ef(a);return eh(b)&&(b=V),Ld(h(a,eh),V,b)}),Wk=Sg(bg),Xk=Sg(function(a){var b=a.length,c=b>1?a[b-1]:V;return c="function"==typeof c?(a.pop(),c):V,cg(a,c)}),Yk=Sg(function(a){a=Pc(a,1);var b=a.length,c=b?a[0]:0,d=this.__wrapped__,e=function(b){return zc(b,a)};return!(b>1||this.__actions__.length)&&d instanceof Hb&&Xe(c)?(d=d.slice(c,+c+(b?1:0)),d.__actions__.push({func:hg,args:[e],thisArg:V}),new Gb(d,this.__chain__).thru(function(a){return b&&!a.length&&a.push(V),a})):this.thru(e)}),Zk=ee(function(a,b,c){Cj.call(a,c)?++a[c]:a[c]=1}),$k=ne(uf),_k=ne(vf),al=ee(function(a,b,c){Cj.call(a,c)?a[c].push(b):a[c]=[b]}),bl=Sg(function(a,b,d){var e=-1,f="function"==typeof b,g=Ze(b),h=dh(a)?Array(a.length):[];return vk(a,function(a){var i=f?b:g&&null!=a?a[b]:V;h[++e]=i?c(i,a,d):_c(a,b,d)}),h}),cl=ee(function(a,b,c){a[c]=b}),dl=ee(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),el=Sg(function(a,b){if(null==a)return[];var c=b.length;return c>1&&Ye(a,b[0],b[1])?b=[]:c>2&&Ye(b[0],b[1],b[2])&&(b=[b[0]]),b=1==b.length&&pl(b[0])?b[0]:Pc(b,1,We),od(a,b,[])}),fl=Sg(function(a,b,c){var d=_;if(c.length){var e=O(c,He(fl));d|=ea}return Ae(a,d,b,c,e)}),gl=Sg(function(a,b,c){var d=_|aa;if(c.length){var e=O(c,He(gl));d|=ea}return Ae(b,d,a,c,e)}),hl=Sg(function(a,b){return Hc(a,1,b)}),il=Sg(function(a,b,c){return Hc(a,Oh(b)||0,c)});Pg.Cache=Xb;var jl=Sg(function(a,b){b=1==b.length&&pl(b[0])?k(b[0],z(Ie())):k(Pc(b,1,We),z(Ie()));var d=b.length;return Sg(function(e){for(var f=-1,g=$j(e.length,d);++f<g;)e[f]=b[f].call(this,e[f]);return c(a,this,e)})}),kl=Sg(function(a,b){var c=O(b,He(kl));return Ae(a,ea,V,b,c)}),ll=Sg(function(a,b){var c=O(b,He(ll));return Ae(a,fa,V,b,c)}),ml=Sg(function(a,b){return Ae(a,ha,V,V,V,Pc(b,1))}),nl=we(Vc),ol=we(function(a,b){return a>=b}),pl=Array.isArray,ql=Ij?function(a){return a instanceof Ij}:cj,rl=we(hd),sl=we(function(a,b){return b>=a}),tl=fe(function(a,b){if(lk||bf(b)||dh(b))return void ce(b,ci(b),a);for(var c in b)Cj.call(b,c)&&mc(a,c,b[c])}),ul=fe(function(a,b){if(lk||bf(b)||dh(b))return void ce(b,di(b),a);for(var c in b)mc(a,c,b[c])}),vl=fe(function(a,b,c,d){ce(b,di(b),a,d)}),wl=fe(function(a,b,c,d){ce(b,ci(b),a,d)}),xl=Sg(function(a,b){return zc(a,Pc(b,1))}),yl=Sg(function(a){return a.push(V,kc),c(vl,V,a)}),zl=Sg(function(a){return a.push(V,ff),c(El,V,a)}),Al=qe(function(a,b,c){a[b]=c},Si(Ti)),Bl=qe(function(a,b,c){Cj.call(a,b)?a[b].push(c):a[b]=[c]},Ie),Cl=Sg(_c),Dl=fe(function(a,b,c){ld(a,b,c)}),El=fe(function(a,b,c,d){ld(a,b,c,d)}),Fl=Sg(function(a,b){return null==a?{}:(b=k(Pc(b,1),jf),pd(a,Ic(Fe(a),b)))}),Gl=Sg(function(a,b){return null==a?{}:pd(a,k(Pc(b,1),jf))}),Hl=ze(ci),Il=ze(di),Jl=ke(function(a,b,c){return b=b.toLowerCase(),a+(c?ui(b):b)}),Kl=ke(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),Ll=ke(function(a,b,c){return a+(c?" ":"")+b.toLowerCase()}),Ml=je("toLowerCase"),Nl=ke(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),Ol=ke(function(a,b,c){return a+(c?" ":"")+Ql(b)}),Pl=ke(function(a,b,c){return a+(c?" ":"")+b.toUpperCase()}),Ql=je("toUpperCase"),Rl=Sg(function(a,b){try{return c(a,V,b)}catch(d){return lh(d)?d:new sj(d)}}),Sl=Sg(function(a,b){return e(Pc(b,1),function(b){b=jf(b),a[b]=fl(a[b],a)}),a}),Tl=oe(),Ul=oe(!0),Vl=Sg(function(a,b){return function(c){return _c(c,a,b)}}),Wl=Sg(function(a,b){return function(c){return _c(a,c,b)}}),Xl=se(k),Yl=se(g),Zl=se(o),$l=ve(),_l=ve(!0),am=re(function(a,b){return a+b}),bm=ye("ceil"),cm=re(function(a,b){return a/b}),dm=ye("floor"),em=re(function(a,b){return a*b}),fm=ye("round"),gm=re(function(a,b){return a-b});return Eb.after=Ig,Eb.ary=Jg,Eb.assign=tl,Eb.assignIn=ul,Eb.assignInWith=vl,Eb.assignWith=wl,Eb.at=xl,Eb.before=Kg,Eb.bind=fl,Eb.bindAll=Sl,Eb.bindKey=gl,Eb.castArray=Xg,Eb.chain=fg,Eb.chunk=mf,Eb.compact=nf,Eb.concat=of,Eb.cond=Qi,Eb.conforms=Ri,Eb.constant=Si,Eb.countBy=Zk,Eb.create=Sh,Eb.curry=Lg,Eb.curryRight=Mg,Eb.debounce=Ng,Eb.defaults=yl,Eb.defaultsDeep=zl,Eb.defer=hl,Eb.delay=il,Eb.difference=Hk,Eb.differenceBy=Ik,Eb.differenceWith=Jk,Eb.drop=pf,Eb.dropRight=qf,Eb.dropRightWhile=rf,Eb.dropWhile=sf,Eb.fill=tf,Eb.filter=qg,Eb.flatMap=rg,Eb.flatMapDeep=sg,Eb.flatMapDepth=tg,Eb.flatten=wf,Eb.flattenDeep=xf,Eb.flattenDepth=yf,Eb.flip=Og,Eb.flow=Tl,Eb.flowRight=Ul,Eb.fromPairs=zf,Eb.functions=Zh,Eb.functionsIn=$h,Eb.groupBy=al,Eb.initial=Cf,Eb.intersection=Kk,Eb.intersectionBy=Lk,Eb.intersectionWith=Mk,Eb.invert=Al,Eb.invertBy=Bl,Eb.invokeMap=bl,Eb.iteratee=Ui,Eb.keyBy=cl,Eb.keys=ci,Eb.keysIn=di,Eb.map=xg,Eb.mapKeys=ei,Eb.mapValues=fi,Eb.matches=Vi,Eb.matchesProperty=Wi,Eb.memoize=Pg,Eb.merge=Dl,Eb.mergeWith=El,Eb.method=Vl,Eb.methodOf=Wl,Eb.mixin=Xi,Eb.negate=Qg,Eb.nthArg=$i,Eb.omit=Fl,Eb.omitBy=gi,Eb.once=Rg,Eb.orderBy=yg,Eb.over=Xl,Eb.overArgs=jl,Eb.overEvery=Yl,Eb.overSome=Zl,Eb.partial=kl,Eb.partialRight=ll,Eb.partition=dl,Eb.pick=Gl,Eb.pickBy=hi,Eb.property=_i,Eb.propertyOf=aj,Eb.pull=Nk,Eb.pullAll=Hf,Eb.pullAllBy=If,Eb.pullAllWith=Jf,Eb.pullAt=Ok,Eb.range=$l,Eb.rangeRight=_l,Eb.rearg=ml,Eb.reject=Bg,Eb.remove=Kf,Eb.rest=Sg,Eb.reverse=Lf,Eb.sampleSize=Dg,Eb.set=ji,Eb.setWith=ki,Eb.shuffle=Eg,Eb.slice=Mf,Eb.sortBy=el,Eb.sortedUniq=Tf,Eb.sortedUniqBy=Uf,Eb.split=Fi,Eb.spread=Tg,Eb.tail=Vf,Eb.take=Wf,Eb.takeRight=Xf,Eb.takeRightWhile=Yf,Eb.takeWhile=Zf,Eb.tap=gg,Eb.throttle=Ug,Eb.thru=hg,Eb.toArray=Kh,Eb.toPairs=Hl,Eb.toPairsIn=Il,Eb.toPath=hj,Eb.toPlainObject=Ph,Eb.transform=li,Eb.unary=Vg,Eb.union=Pk,Eb.unionBy=Qk,Eb.unionWith=Rk,Eb.uniq=$f,Eb.uniqBy=_f,Eb.uniqWith=ag,Eb.unset=mi,Eb.unzip=bg,Eb.unzipWith=cg,Eb.update=ni,Eb.updateWith=oi,Eb.values=pi,Eb.valuesIn=qi,Eb.without=Sk,Eb.words=Pi,Eb.wrap=Wg,Eb.xor=Tk,Eb.xorBy=Uk,Eb.xorWith=Vk,Eb.zip=Wk,Eb.zipObject=dg,Eb.zipObjectDeep=eg,Eb.zipWith=Xk,Eb.entries=Hl,Eb.entriesIn=Il,Eb.extend=ul,Eb.extendWith=vl,Xi(Eb,Eb),Eb.add=am,Eb.attempt=Rl,Eb.camelCase=Jl,Eb.capitalize=ui,Eb.ceil=bm,Eb.clamp=ri,Eb.clone=Yg,Eb.cloneDeep=$g,Eb.cloneDeepWith=_g,Eb.cloneWith=Zg,Eb.deburr=vi,Eb.divide=cm,Eb.endsWith=wi,Eb.eq=ah,Eb.escape=xi,Eb.escapeRegExp=yi,Eb.every=pg,Eb.find=$k,Eb.findIndex=uf,Eb.findKey=Th,Eb.findLast=_k,Eb.findLastIndex=vf,Eb.findLastKey=Uh,Eb.floor=dm,Eb.forEach=ug,Eb.forEachRight=vg,Eb.forIn=Vh,Eb.forInRight=Wh,Eb.forOwn=Xh,Eb.forOwnRight=Yh,Eb.get=_h,Eb.gt=nl,Eb.gte=ol,Eb.has=ai,Eb.hasIn=bi,Eb.head=Af,Eb.identity=Ti,Eb.includes=wg,Eb.indexOf=Bf,Eb.inRange=si,Eb.invoke=Cl,Eb.isArguments=bh,Eb.isArray=pl,Eb.isArrayBuffer=ch,Eb.isArrayLike=dh,Eb.isArrayLikeObject=eh,Eb.isBoolean=fh,Eb.isBuffer=ql,Eb.isDate=gh,Eb.isElement=hh,Eb.isEmpty=ih,Eb.isEqual=jh,Eb.isEqualWith=kh,Eb.isError=lh,Eb.isFinite=mh,Eb.isFunction=nh,Eb.isInteger=oh,Eb.isLength=ph,Eb.isMap=sh,Eb.isMatch=th,Eb.isMatchWith=uh,Eb.isNaN=vh,Eb.isNative=wh,Eb.isNil=yh,Eb.isNull=xh,Eb.isNumber=zh,Eb.isObject=qh,Eb.isObjectLike=rh,Eb.isPlainObject=Ah,Eb.isRegExp=Bh,Eb.isSafeInteger=Ch,Eb.isSet=Dh,Eb.isString=Eh,Eb.isSymbol=Fh,Eb.isTypedArray=Gh,Eb.isUndefined=Hh,Eb.isWeakMap=Ih,Eb.isWeakSet=Jh,Eb.join=Df,Eb.kebabCase=Kl,Eb.last=Ef,Eb.lastIndexOf=Ff,Eb.lowerCase=Ll,Eb.lowerFirst=Ml,Eb.lt=rl,Eb.lte=sl,Eb.max=jj,Eb.maxBy=kj,Eb.mean=lj,Eb.meanBy=mj,Eb.min=nj,Eb.minBy=oj,Eb.stubArray=bj,Eb.stubFalse=cj,Eb.stubObject=dj,Eb.stubString=ej,Eb.stubTrue=fj,Eb.multiply=em,Eb.nth=Gf,Eb.noConflict=Yi,Eb.noop=Zi,Eb.now=Hg,Eb.pad=zi,Eb.padEnd=Ai,Eb.padStart=Bi,Eb.parseInt=Ci,Eb.random=ti,Eb.reduce=zg,Eb.reduceRight=Ag,Eb.repeat=Di,Eb.replace=Ei,Eb.result=ii,Eb.round=fm,Eb.runInContext=U,Eb.sample=Cg,Eb.size=Fg,Eb.snakeCase=Nl,Eb.some=Gg,Eb.sortedIndex=Nf,Eb.sortedIndexBy=Of,Eb.sortedIndexOf=Pf,Eb.sortedLastIndex=Qf,Eb.sortedLastIndexBy=Rf,Eb.sortedLastIndexOf=Sf,Eb.startCase=Ol,Eb.startsWith=Gi,Eb.subtract=gm,Eb.sum=pj,Eb.sumBy=qj,Eb.template=Hi,Eb.times=gj,Eb.toFinite=Lh,Eb.toInteger=Mh,Eb.toLength=Nh,Eb.toLower=Ii,Eb.toNumber=Oh,Eb.toSafeInteger=Qh,Eb.toString=Rh,Eb.toUpper=Ji,Eb.trim=Ki,Eb.trimEnd=Li,Eb.trimStart=Mi,Eb.truncate=Ni,Eb.unescape=Oi,Eb.uniqueId=ij,Eb.upperCase=Pl,Eb.upperFirst=Ql,Eb.each=ug,Eb.eachRight=vg,Eb.first=Af,Xi(Eb,function(){var a={};return Qc(Eb,function(b,c){Cj.call(Eb.prototype,c)||(a[c]=b)}),a}(),{chain:!1}),Eb.VERSION=W,e(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){Eb[a].placeholder=Eb}),e(["drop","take"],function(a,b){Hb.prototype[a]=function(c){var d=this.__filtered__;if(d&&!b)return new Hb(this);c=c===V?1:Zj(Mh(c),0);var e=this.clone();return d?e.__takeCount__=$j(c,e.__takeCount__):e.__views__.push({size:$j(c,wa),type:a+(e.__dir__<0?"Right":"")}),e},Hb.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}}),e(["filter","map","takeWhile"],function(a,b){var c=b+1,d=c==pa||c==ra;Hb.prototype[a]=function(a){var b=this.clone();return b.__iteratees__.push({iteratee:Ie(a,3),type:c}),b.__filtered__=b.__filtered__||d,b}}),e(["head","last"],function(a,b){var c="take"+(b?"Right":"");Hb.prototype[a]=function(){return this[c](1).value()[0]}}),e(["initial","tail"],function(a,b){var c="drop"+(b?"":"Right");Hb.prototype[a]=function(){return this.__filtered__?new Hb(this):this[c](1)}}),Hb.prototype.compact=function(){return this.filter(Ti)},Hb.prototype.find=function(a){return this.filter(a).head()},Hb.prototype.findLast=function(a){return this.reverse().find(a)},Hb.prototype.invokeMap=Sg(function(a,b){return"function"==typeof a?new Hb(this):this.map(function(c){return _c(c,a,b)})}),Hb.prototype.reject=function(a){return a=Ie(a,3),this.filter(function(b){return!a(b)})},Hb.prototype.slice=function(a,b){a=Mh(a);var c=this;return c.__filtered__&&(a>0||0>b)?new Hb(c):(0>a?c=c.takeRight(-a):a&&(c=c.drop(a)),b!==V&&(b=Mh(b),c=0>b?c.dropRight(-b):c.take(b-a)),c)},Hb.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Hb.prototype.toArray=function(){return this.take(wa)},Qc(Hb.prototype,function(a,b){var c=/^(?:filter|find|map|reject)|While$/.test(b),d=/^(?:head|last)$/.test(b),e=Eb[d?"take"+("last"==b?"Right":""):b],f=d||/^find/.test(b);e&&(Eb.prototype[b]=function(){var b=this.__wrapped__,g=d?[1]:arguments,h=b instanceof Hb,i=g[0],j=h||pl(b),k=function(a){var b=e.apply(Eb,l([a],g));return d&&m?b[0]:b};j&&c&&"function"==typeof i&&1!=i.length&&(h=j=!1);var m=this.__chain__,n=!!this.__actions__.length,o=f&&!m,p=h&&!n;if(!f&&j){b=p?b:new Hb(this);var q=a.apply(b,g);return q.__actions__.push({func:hg,args:[k],thisArg:V}),new Gb(q,m)}return o&&p?a.apply(this,g):(q=this.thru(k),o?d?q.value()[0]:q.value():q)})}),e(["pop","push","shift","sort","splice","unshift"],function(a){var b=wj[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",d=/^(?:pop|shift)$/.test(a);Eb.prototype[a]=function(){var a=arguments;if(d&&!this.__chain__){var e=this.value();return b.apply(pl(e)?e:[],a)}return this[c](function(c){return b.apply(pl(c)?c:[],a)})}}),Qc(Hb.prototype,function(a,b){var c=Eb[b];if(c){var d=c.name+"",e=mk[d]||(mk[d]=[]);e.push({name:b,func:c})}}),mk[pe(V,aa).name]=[{name:"wrapper",func:V}],Hb.prototype.clone=Ib,Hb.prototype.reverse=Jb,Hb.prototype.value=Kb,Eb.prototype.at=Yk,Eb.prototype.chain=ig,Eb.prototype.commit=jg,Eb.prototype.next=kg,Eb.prototype.plant=mg,Eb.prototype.reverse=ng,Eb.prototype.toJSON=Eb.prototype.valueOf=Eb.prototype.value=og,Oj&&(Eb.prototype[Oj]=lg),Eb}var V,W="4.13.1",X=200,Y="Expected a function",Z="__lodash_hash_undefined__",$="__lodash_placeholder__",_=1,aa=2,ba=4,ca=8,da=16,ea=32,fa=64,ga=128,ha=256,ia=512,ja=1,ka=2,la=30,ma="...",na=150,oa=16,pa=1,qa=2,ra=3,sa=1/0,ta=9007199254740991,ua=1.7976931348623157e308,va=NaN,wa=4294967295,xa=wa-1,ya=wa>>>1,za="[object Arguments]",Aa="[object Array]",Ba="[object Boolean]",Ca="[object Date]",Da="[object Error]",Ea="[object Function]",Fa="[object GeneratorFunction]",Ga="[object Map]",Ha="[object Number]",Ia="[object Object]",Ja="[object Promise]",Ka="[object RegExp]",La="[object Set]",Ma="[object String]",Na="[object Symbol]",Oa="[object WeakMap]",Pa="[object WeakSet]",Qa="[object ArrayBuffer]",Ra="[object DataView]",Sa="[object Float32Array]",Ta="[object Float64Array]",Ua="[object Int8Array]",Va="[object Int16Array]",Wa="[object Int32Array]",Xa="[object Uint8Array]",Ya="[object Uint8ClampedArray]",Za="[object Uint16Array]",$a="[object Uint32Array]",_a=/\b__p \+= '';/g,ab=/\b(__p \+=) '' \+/g,bb=/(__e\(.*?\)|\b__t\)) \+\n'';/g,cb=/&(?:amp|lt|gt|quot|#39|#96);/g,db=/[&<>"'`]/g,eb=RegExp(cb.source),fb=RegExp(db.source),gb=/<%-([\s\S]+?)%>/g,hb=/<%([\s\S]+?)%>/g,ib=/<%=([\s\S]+?)%>/g,jb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kb=/^\w*$/,lb=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(\.|\[\])(?:\4|$))/g,mb=/[\\^$.*+?()[\]{}|]/g,nb=RegExp(mb.source),ob=/^\s+|\s+$/g,pb=/^\s+/,qb=/\s+$/,rb=/[a-zA-Z0-9]+/g,sb=/\\(\\)?/g,tb=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ub=/\w*$/,vb=/^0x/i,wb=/^[-+]0x[0-9a-f]+$/i,xb=/^0b[01]+$/i,yb=/^\[object .+?Constructor\]$/,zb=/^0o[0-7]+$/i,Ab=/^(?:0|[1-9]\d*)$/,Bb=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Cb=/($^)/,Db=/['\n\r\u2028\u2029\\]/g,Eb="\\ud800-\\udfff",Fb="\\u0300-\\u036f\\ufe20-\\ufe23",Gb="\\u20d0-\\u20f0",Hb="\\u2700-\\u27bf",Ib="a-z\\xdf-\\xf6\\xf8-\\xff",Jb="\\xac\\xb1\\xd7\\xf7",Kb="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Lb="\\u2000-\\u206f",Mb=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Nb="A-Z\\xc0-\\xd6\\xd8-\\xde",Ob="\\ufe0e\\ufe0f",Pb=Jb+Kb+Lb+Mb,Qb="['’]",Rb="["+Eb+"]",Sb="["+Pb+"]",Tb="["+Fb+Gb+"]",Ub="\\d+",Vb="["+Hb+"]",Wb="["+Ib+"]",Xb="[^"+Eb+Pb+Ub+Hb+Ib+Nb+"]",Yb="\\ud83c[\\udffb-\\udfff]",Zb="(?:"+Tb+"|"+Yb+")",$b="[^"+Eb+"]",_b="(?:\\ud83c[\\udde6-\\uddff]){2}",ac="[\\ud800-\\udbff][\\udc00-\\udfff]",bc="["+Nb+"]",cc="\\u200d",dc="(?:"+Wb+"|"+Xb+")",ec="(?:"+bc+"|"+Xb+")",fc="(?:"+Qb+"(?:d|ll|m|re|s|t|ve))?",gc="(?:"+Qb+"(?:D|LL|M|RE|S|T|VE))?",hc=Zb+"?",ic="["+Ob+"]?",jc="(?:"+cc+"(?:"+[$b,_b,ac].join("|")+")"+ic+hc+")*",kc=ic+hc+jc,lc="(?:"+[Vb,_b,ac].join("|")+")"+kc,mc="(?:"+[$b+Tb+"?",Tb,_b,ac,Rb].join("|")+")",nc=RegExp(Qb,"g"),oc=RegExp(Tb,"g"),pc=RegExp(Yb+"(?="+Yb+")|"+mc+kc,"g"),qc=RegExp([bc+"?"+Wb+"+"+fc+"(?="+[Sb,bc,"$"].join("|")+")",ec+"+"+gc+"(?="+[Sb,bc+dc,"$"].join("|")+")",bc+"?"+dc+"+"+fc,bc+"+"+gc,Ub,lc].join("|"),"g"),rc=RegExp("["+cc+Eb+Fb+Gb+Ob+"]"),sc=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","Reflect","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","isFinite","parseInt","setTimeout"],uc=-1,vc={};
vc[Sa]=vc[Ta]=vc[Ua]=vc[Va]=vc[Wa]=vc[Xa]=vc[Ya]=vc[Za]=vc[$a]=!0,vc[za]=vc[Aa]=vc[Qa]=vc[Ba]=vc[Ra]=vc[Ca]=vc[Da]=vc[Ea]=vc[Ga]=vc[Ha]=vc[Ia]=vc[Ka]=vc[La]=vc[Ma]=vc[Oa]=!1;var wc={};wc[za]=wc[Aa]=wc[Qa]=wc[Ra]=wc[Ba]=wc[Ca]=wc[Sa]=wc[Ta]=wc[Ua]=wc[Va]=wc[Wa]=wc[Ga]=wc[Ha]=wc[Ia]=wc[Ka]=wc[La]=wc[Ma]=wc[Na]=wc[Xa]=wc[Ya]=wc[Za]=wc[$a]=!0,wc[Da]=wc[Ea]=wc[Oa]=!1;var xc={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},yc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},zc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ac={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Bc=parseFloat,Cc=parseInt,Dc="object"==typeof exports&&exports,Ec=Dc&&"object"==typeof module&&module,Fc=Ec&&Ec.exports===Dc,Gc=E("object"==typeof global&&global),Hc=E("object"==typeof self&&self),Ic=E("object"==typeof this&&this),Jc=Gc||Hc||Ic||Function("return this")(),Kc=U();(Hc||{})._=Kc,"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("lodash/lodash",[],function(){return Kc}):Ec?((Ec.exports=Kc)._=Kc,Dc._=Kc):Jc._=Kc}.call(this),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define("bluebird/js/browser/bluebird",[],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Promise=a()}}(function(){var a,b,c;return function d(a,b,c){function e(g,h){if(!b[g]){if(!a[g]){var i="function"==typeof _dereq_&&_dereq_;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=b[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,d,a,b,c)}return b[g].exports}for(var f="function"==typeof _dereq_&&_dereq_,g=0;g<c.length;g++)e(c[g]);return e}({1:[function(a,b,c){"use strict";b.exports=function(a){function b(a){var b=new c(a),d=b.promise();return b.setHowMany(1),b.setUnwrap(),b.init(),d}var c=a._SomePromiseArray;a.any=function(a){return b(a)},a.prototype.any=function(){return b(this)}}},{}],2:[function(a,b,c){"use strict";function d(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new k(16),this._normalQueue=new k(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var a=this;this.drainQueues=function(){a._drainQueues()},this._schedule=j}function e(a,b,c){this._lateQueue.push(a,b,c),this._queueTick()}function f(a,b,c){this._normalQueue.push(a,b,c),this._queueTick()}function g(a){this._normalQueue._pushOne(a),this._queueTick()}var h;try{throw new Error}catch(i){h=i}var j=a("./schedule"),k=a("./queue"),l=a("./util");d.prototype.setScheduler=function(a){var b=this._schedule;return this._schedule=a,this._customScheduler=!0,b},d.prototype.hasCustomScheduler=function(){return this._customScheduler},d.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},d.prototype.disableTrampolineIfNecessary=function(){l.hasDevTools&&(this._trampolineEnabled=!1)},d.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},d.prototype.fatalError=function(a,b){b?(process.stderr.write("Fatal "+(a instanceof Error?a.stack:a)+"\n"),process.exit(2)):this.throwLater(a)},d.prototype.throwLater=function(a,b){if(1===arguments.length&&(b=a,a=function(){throw b}),"undefined"!=typeof setTimeout)setTimeout(function(){a(b)},0);else try{this._schedule(function(){a(b)})}catch(c){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},l.hasDevTools?(d.prototype.invokeLater=function(a,b,c){this._trampolineEnabled?e.call(this,a,b,c):this._schedule(function(){setTimeout(function(){a.call(b,c)},100)})},d.prototype.invoke=function(a,b,c){this._trampolineEnabled?f.call(this,a,b,c):this._schedule(function(){a.call(b,c)})},d.prototype.settlePromises=function(a){this._trampolineEnabled?g.call(this,a):this._schedule(function(){a._settlePromises()})}):(d.prototype.invokeLater=e,d.prototype.invoke=f,d.prototype.settlePromises=g),d.prototype._drainQueue=function(a){for(;a.length()>0;){var b=a.shift();if("function"==typeof b){var c=a.shift(),d=a.shift();b.call(c,d)}else b._settlePromises()}},d.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},d.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},d.prototype._reset=function(){this._isTickUsed=!1},b.exports=d,b.exports.firstLineError=h},{"./queue":26,"./schedule":29,"./util":36}],3:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){var e=!1,f=function(a,b){this._reject(b)},g=function(a,b){b.promiseRejectionQueued=!0,b.bindingPromise._then(f,f,null,this,a)},h=function(a,b){0===(50397184&this._bitField)&&this._resolveCallback(b.target)},i=function(a,b){b.promiseRejectionQueued||this._reject(a)};a.prototype.bind=function(f){e||(e=!0,a.prototype._propagateFrom=d.propagateFromFunction(),a.prototype._boundValue=d.boundValueFunction());var j=c(f),k=new a(b);k._propagateFrom(this,1);var l=this._target();if(k._setBoundTo(j),j instanceof a){var m={promiseRejectionQueued:!1,promise:k,target:l,bindingPromise:j};l._then(b,g,void 0,k,m),j._then(h,i,void 0,k,m),k._setOnCancel(j)}else k._resolveCallback(l);return k},a.prototype._setBoundTo=function(a){void 0!==a?(this._bitField=2097152|this._bitField,this._boundTo=a):this._bitField=-2097153&this._bitField},a.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},a.bind=function(b,c){return a.resolve(c).bind(b)}}},{}],4:[function(a,b,c){"use strict";function d(){try{Promise===f&&(Promise=e)}catch(a){}return f}var e;"undefined"!=typeof Promise&&(e=Promise);var f=a("./promise")();f.noConflict=d,b.exports=f},{"./promise":22}],5:[function(a,b,c){"use strict";var d=Object.create;if(d){var e=d(null),f=d(null);e[" size"]=f[" size"]=0}b.exports=function(b){function c(a,c){var d;if(null!=a&&(d=a[c]),"function"!=typeof d){var e="Object "+h.classString(a)+" has no method '"+h.toString(c)+"'";throw new b.TypeError(e)}return d}function d(a){var b=this.pop(),d=c(a,b);return d.apply(a,this)}function e(a){return a[this]}function f(a){var b=+this;return 0>b&&(b=Math.max(0,b+a.length)),a[b]}var g,h=a("./util"),i=h.canEvaluate;h.isIdentifier;b.prototype.call=function(a){var b=[].slice.call(arguments,1);return b.push(a),this._then(d,void 0,void 0,b,void 0)},b.prototype.get=function(a){var b,c="number"==typeof a;if(c)b=f;else if(i){var d=g(a);b=null!==d?d:e}else b=e;return this._then(b,void 0,void 0,a,void 0)}}},{"./util":36}],6:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){var f=a("./util"),g=f.tryCatch,h=f.errorObj,i=b._async;b.prototype["break"]=b.prototype.cancel=function(){if(!e.cancellation())return this._warn("cancellation is disabled");for(var a=this,b=a;a._isCancellable();){if(!a._cancelBy(b)){b._isFollowing()?b._followee().cancel():b._cancelBranched();break}var c=a._cancellationParent;if(null==c||!c._isCancellable()){a._isFollowing()?a._followee().cancel():a._cancelBranched();break}a._isFollowing()&&a._followee().cancel(),a._setWillBeCancelled(),b=a,a=c}},b.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},b.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},b.prototype._cancelBy=function(a){return a===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},b.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},b.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),i.invoke(this._cancelPromises,this,void 0))},b.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},b.prototype._unsetOnCancel=function(){this._onCancelField=void 0},b.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},b.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},b.prototype._doInvokeOnCancel=function(a,b){if(f.isArray(a))for(var c=0;c<a.length;++c)this._doInvokeOnCancel(a[c],b);else if(void 0!==a)if("function"==typeof a){if(!b){var d=g(a).call(this._boundValue());d===h&&(this._attachExtraTrace(d.e),i.throwLater(d.e))}}else a._resultCancelled(this)},b.prototype._invokeOnCancel=function(){var a=this._onCancel();this._unsetOnCancel(),i.invoke(this._doInvokeOnCancel,this,a)},b.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},b.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(a,b,c){"use strict";b.exports=function(b){function c(a,c,h){return function(i){var j=h._boundValue();a:for(var k=0;k<a.length;++k){var l=a[k];if(l===Error||null!=l&&l.prototype instanceof Error){if(i instanceof l)return f(c).call(j,i)}else if("function"==typeof l){var m=f(l).call(j,i);if(m===g)return m;if(m)return f(c).call(j,i)}else if(d.isObject(i)){for(var n=e(l),o=0;o<n.length;++o){var p=n[o];if(l[p]!=i[p])continue a}return f(c).call(j,i)}}return b}}var d=a("./util"),e=a("./es5").keys,f=d.tryCatch,g=d.errorObj;return c}},{"./es5":13,"./util":36}],8:[function(a,b,c){"use strict";b.exports=function(a){function b(){this._trace=new b.CapturedTrace(d())}function c(){return e?new b:void 0}function d(){var a=f.length-1;return a>=0?f[a]:void 0}var e=!1,f=[];return a.prototype._promiseCreated=function(){},a.prototype._pushContext=function(){},a.prototype._popContext=function(){return null},a._peekContext=a.prototype._peekContext=function(){},b.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,f.push(this._trace))},b.prototype._popContext=function(){if(void 0!==this._trace){var a=f.pop(),b=a._promiseCreated;return a._promiseCreated=null,b}return null},b.CapturedTrace=null,b.create=c,b.deactivateLongStackTraces=function(){},b.activateLongStackTraces=function(){var c=a.prototype._pushContext,f=a.prototype._popContext,g=a._peekContext,h=a.prototype._peekContext,i=a.prototype._promiseCreated;b.deactivateLongStackTraces=function(){a.prototype._pushContext=c,a.prototype._popContext=f,a._peekContext=g,a.prototype._peekContext=h,a.prototype._promiseCreated=i,e=!1},e=!0,a.prototype._pushContext=b.prototype._pushContext,a.prototype._popContext=b.prototype._popContext,a._peekContext=a.prototype._peekContext=d,a.prototype._promiseCreated=function(){var a=this._peekContext();a&&null==a._promiseCreated&&(a._promiseCreated=this)}},b}},{}],9:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a,b){return{promise:b}}function e(){return!1}function f(a,b,c){var d=this;try{a(b,c,function(a){if("function"!=typeof a)throw new TypeError("onCancel must be a function, got: "+M.toString(a));d._attachCancellationCallback(a)})}catch(e){return e}}function g(a){if(!this._isCancellable())return this;var b=this._onCancel();void 0!==b?M.isArray(b)?b.push(a):this._setOnCancel([b,a]):this._setOnCancel(a)}function h(){return this._onCancelField}function i(a){this._onCancelField=a}function j(){this._cancellationParent=void 0,this._onCancelField=void 0}function k(a,b){if(0!==(1&b)){this._cancellationParent=a;var c=a._branchesRemainingToCancel;void 0===c&&(c=0),a._branchesRemainingToCancel=c+1}0!==(2&b)&&a._isBound()&&this._setBoundTo(a._boundTo)}function l(a,b){0!==(2&b)&&a._isBound()&&this._setBoundTo(a._boundTo)}function m(){var a=this._boundTo;return void 0!==a&&a instanceof b?a.isFulfilled()?a.value():void 0:a}function n(){this._trace=new F(this._peekContext())}function o(a,b){if(N(a)){var c=this._trace;if(void 0!==c&&b&&(c=c._parent),void 0!==c)c.attachExtraTrace(a);else if(!a.__stackCleaned__){var d=x(a);M.notEnumerableProp(a,"stack",d.message+"\n"+d.stack.join("\n")),M.notEnumerableProp(a,"__stackCleaned__",!0)}}}function p(a,b,c,d,e){if(void 0===a&&null!==b&&X){if(void 0!==e&&e._returnedNonUndefined())return;if(0===(65535&d._bitField))return;c&&(c+=" ");var f="",g="";if(b._trace){for(var h=b._trace.stack.split("\n"),i=v(h),j=i.length-1;j>=0;--j){var k=i[j];if(!P.test(k)){var l=k.match(Q);l&&(f="at "+l[1]+":"+l[2]+":"+l[3]+" ");break}}if(i.length>0)for(var m=i[0],j=0;j<h.length;++j)if(h[j]===m){j>0&&(g="\n"+h[j-1]);break}}var n="a promise was created in a "+c+"handler "+f+"but was not returned from it, see http://goo.gl/rRqMUw"+g;d._warn(n,!0,b)}}function q(a,b){var c=a+" is deprecated and will be removed in a future version.";return b&&(c+=" Use "+b+" instead."),r(c)}function r(a,c,d){if(fa.warnings){var e,f=new L(a);if(c)d._attachExtraTrace(f);else if(fa.longStackTraces&&(e=b._peekContext()))e.attachExtraTrace(f);else{var g=x(f);f.stack=g.message+"\n"+g.stack.join("\n")}aa("warning",f)||y(f,"",!0)}}function s(a,b){for(var c=0;c<b.length-1;++c)b[c].push("From previous event:"),b[c]=b[c].join("\n");return c<b.length&&(b[c]=b[c].join("\n")),a+"\n"+b.join("\n")}function t(a){for(var b=0;b<a.length;++b)(0===a[b].length||b+1<a.length&&a[b][0]===a[b+1][0])&&(a.splice(b,1),b--)}function u(a){for(var b=a[0],c=1;c<a.length;++c){for(var d=a[c],e=b.length-1,f=b[e],g=-1,h=d.length-1;h>=0;--h)if(d[h]===f){g=h;break}for(var h=g;h>=0;--h){var i=d[h];if(b[e]!==i)break;b.pop(),e--}b=d}}function v(a){for(var b=[],c=0;c<a.length;++c){var d=a[c],e="    (No stack trace)"===d||R.test(d),f=e&&ca(d);e&&!f&&(T&&" "!==d.charAt(0)&&(d="    "+d),b.push(d))}return b}function w(a){for(var b=a.stack.replace(/\s+$/g,"").split("\n"),c=0;c<b.length;++c){var d=b[c];if("    (No stack trace)"===d||R.test(d))break}return c>0&&"SyntaxError"!=a.name&&(b=b.slice(c)),b}function x(a){var b=a.stack,c=a.toString();return b="string"==typeof b&&b.length>0?w(a):["    (No stack trace)"],{message:c,stack:"SyntaxError"==a.name?b:v(b)}}function y(a,b,c){if("undefined"!=typeof console){var d;if(M.isObject(a)){var e=a.stack;d=b+S(e,a)}else d=b+String(a);"function"==typeof I?I(d,c):("function"==typeof console.log||"object"==typeof console.log)&&console.log(d)}}function z(a,b,c,d){var e=!1;try{"function"==typeof b&&(e=!0,"rejectionHandled"===a?b(d):b(c,d))}catch(f){K.throwLater(f)}"unhandledRejection"===a?aa(a,c,d)||e||y(c,"Unhandled rejection "):aa(a,d)}function A(a){var b;if("function"==typeof a)b="[function "+(a.name||"anonymous")+"]";else{b=a&&"function"==typeof a.toString?a.toString():M.toString(a);var c=/\[object [a-zA-Z0-9$_]+\]/;if(c.test(b))try{var d=JSON.stringify(a);b=d}catch(e){}0===b.length&&(b="(empty array)")}return"(<"+B(b)+">, no stack trace)"}function B(a){var b=41;return a.length<b?a:a.substr(0,b-3)+"..."}function C(){return"function"==typeof ea}function D(a){var b=a.match(da);return b?{fileName:b[1],line:parseInt(b[2],10)}:void 0}function E(a,b){if(C()){for(var c,d,e=a.stack.split("\n"),f=b.stack.split("\n"),g=-1,h=-1,i=0;i<e.length;++i){var j=D(e[i]);if(j){c=j.fileName,g=j.line;break}}for(var i=0;i<f.length;++i){var j=D(f[i]);if(j){d=j.fileName,h=j.line;break}}0>g||0>h||!c||!d||c!==d||g>=h||(ca=function(a){if(O.test(a))return!0;var b=D(a);return b&&b.fileName===c&&g<=b.line&&b.line<=h?!0:!1})}}function F(a){this._parent=a,this._promisesCreated=0;var b=this._length=1+(void 0===a?0:a._length);ea(this,F),b>32&&this.uncycle()}var G,H,I,J=b._getDomain,K=b._async,L=a("./errors").Warning,M=a("./util"),N=M.canAttachTrace,O=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,P=/\((?:timers\.js):\d+:\d+\)/,Q=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,R=null,S=null,T=!1,U=!(0==M.env("BLUEBIRD_DEBUG")),V=!(0==M.env("BLUEBIRD_WARNINGS")||!U&&!M.env("BLUEBIRD_WARNINGS")),W=!(0==M.env("BLUEBIRD_LONG_STACK_TRACES")||!U&&!M.env("BLUEBIRD_LONG_STACK_TRACES")),X=0!=M.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(V||!!M.env("BLUEBIRD_W_FORGOTTEN_RETURN"));b.prototype.suppressUnhandledRejections=function(){var a=this._target();a._bitField=-1048577&a._bitField|524288},b.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),K.invokeLater(this._notifyUnhandledRejection,this,void 0))},b.prototype._notifyUnhandledRejectionIsHandled=function(){z("rejectionHandled",G,void 0,this)},b.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},b.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},b.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var a=this._settledValue();this._setUnhandledRejectionIsNotified(),z("unhandledRejection",H,a,this)}},b.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},b.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},b.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},b.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},b.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},b.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},b.prototype._warn=function(a,b,c){return r(a,b,c||this)},b.onPossiblyUnhandledRejection=function(a){var b=J();H="function"==typeof a?null===b?a:M.domainBind(b,a):void 0},b.onUnhandledRejectionHandled=function(a){var b=J();G="function"==typeof a?null===b?a:M.domainBind(b,a):void 0};var Y=function(){};b.longStackTraces=function(){if(K.haveItemsQueued()&&!fa.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!fa.longStackTraces&&C()){var a=b.prototype._captureStackTrace,d=b.prototype._attachExtraTrace;fa.longStackTraces=!0,Y=function(){if(K.haveItemsQueued()&&!fa.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");b.prototype._captureStackTrace=a,b.prototype._attachExtraTrace=d,c.deactivateLongStackTraces(),K.enableTrampoline(),fa.longStackTraces=!1},b.prototype._captureStackTrace=n,b.prototype._attachExtraTrace=o,c.activateLongStackTraces(),K.disableTrampolineIfNecessary()}},b.hasLongStackTraces=function(){return fa.longStackTraces&&C()};var Z=function(){try{if("function"==typeof CustomEvent){var a=new CustomEvent("CustomEvent");return M.global.dispatchEvent(a),function(a,b){var c=new CustomEvent(a.toLowerCase(),{detail:b,cancelable:!0});return!M.global.dispatchEvent(c)}}if("function"==typeof Event){var a=new Event("CustomEvent");return M.global.dispatchEvent(a),function(a,b){var c=new Event(a.toLowerCase(),{cancelable:!0});return c.detail=b,!M.global.dispatchEvent(c)}}var a=document.createEvent("CustomEvent");return a.initCustomEvent("testingtheevent",!1,!0,{}),M.global.dispatchEvent(a),function(a,b){var c=document.createEvent("CustomEvent");return c.initCustomEvent(a.toLowerCase(),!1,!0,b),!M.global.dispatchEvent(c)}}catch(b){}return function(){return!1}}(),$=function(){return M.isNode?function(){return process.emit.apply(process,arguments)}:M.global?function(a){var b="on"+a.toLowerCase(),c=M.global[b];return c?(c.apply(M.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}(),_={promiseCreated:d,promiseFulfilled:d,promiseRejected:d,promiseResolved:d,promiseCancelled:d,promiseChained:function(a,b,c){return{promise:b,child:c}},warning:function(a,b){return{warning:b}},unhandledRejection:function(a,b,c){return{reason:b,promise:c}},rejectionHandled:d},aa=function(a){var b=!1;try{b=$.apply(null,arguments)}catch(c){K.throwLater(c),b=!0}var d=!1;try{d=Z(a,_[a].apply(null,arguments))}catch(c){K.throwLater(c),d=!0}return d||b};b.config=function(a){if(a=Object(a),"longStackTraces"in a&&(a.longStackTraces?b.longStackTraces():!a.longStackTraces&&b.hasLongStackTraces()&&Y()),"warnings"in a){var c=a.warnings;fa.warnings=!!c,X=fa.warnings,M.isObject(c)&&"wForgottenReturn"in c&&(X=!!c.wForgottenReturn)}if("cancellation"in a&&a.cancellation&&!fa.cancellation){if(K.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");b.prototype._clearCancellationData=j,b.prototype._propagateFrom=k,b.prototype._onCancel=h,b.prototype._setOnCancel=i,b.prototype._attachCancellationCallback=g,b.prototype._execute=f,ba=k,fa.cancellation=!0}return"monitoring"in a&&(a.monitoring&&!fa.monitoring?(fa.monitoring=!0,b.prototype._fireEvent=aa):!a.monitoring&&fa.monitoring&&(fa.monitoring=!1,b.prototype._fireEvent=e)),b},b.prototype._fireEvent=e,b.prototype._execute=function(a,b,c){try{a(b,c)}catch(d){return d}},b.prototype._onCancel=function(){},b.prototype._setOnCancel=function(a){},b.prototype._attachCancellationCallback=function(a){},b.prototype._captureStackTrace=function(){},b.prototype._attachExtraTrace=function(){},b.prototype._clearCancellationData=function(){},b.prototype._propagateFrom=function(a,b){};var ba=l,ca=function(){return!1},da=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;M.inherits(F,Error),c.CapturedTrace=F,F.prototype.uncycle=function(){var a=this._length;if(!(2>a)){for(var b=[],c={},d=0,e=this;void 0!==e;++d)b.push(e),e=e._parent;a=this._length=d;for(var d=a-1;d>=0;--d){var f=b[d].stack;void 0===c[f]&&(c[f]=d)}for(var d=0;a>d;++d){var g=b[d].stack,h=c[g];if(void 0!==h&&h!==d){h>0&&(b[h-1]._parent=void 0,b[h-1]._length=1),b[d]._parent=void 0,b[d]._length=1;var i=d>0?b[d-1]:this;a-1>h?(i._parent=b[h+1],i._parent.uncycle(),i._length=i._parent._length+1):(i._parent=void 0,i._length=1);for(var j=i._length+1,k=d-2;k>=0;--k)b[k]._length=j,j++;return}}}},F.prototype.attachExtraTrace=function(a){if(!a.__stackCleaned__){this.uncycle();for(var b=x(a),c=b.message,d=[b.stack],e=this;void 0!==e;)d.push(v(e.stack.split("\n"))),e=e._parent;u(d),t(d),M.notEnumerableProp(a,"stack",s(c,d)),M.notEnumerableProp(a,"__stackCleaned__",!0)}};var ea=function(){var a=/^\s*at\s*/,b=function(a,b){return"string"==typeof a?a:void 0!==b.name&&void 0!==b.message?b.toString():A(b)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,R=a,S=b;var c=Error.captureStackTrace;return ca=function(a){return O.test(a)},function(a,b){Error.stackTraceLimit+=6,c(a,b),Error.stackTraceLimit-=6}}var d=new Error;if("string"==typeof d.stack&&d.stack.split("\n")[0].indexOf("stackDetection@")>=0)return R=/@/,S=b,T=!0,function(a){a.stack=(new Error).stack};var e;try{throw new Error}catch(f){e="stack"in f}return"stack"in d||!e||"number"!=typeof Error.stackTraceLimit?(S=function(a,b){return"string"==typeof a?a:"object"!=typeof b&&"function"!=typeof b||void 0===b.name||void 0===b.message?A(b):b.toString()},null):(R=a,S=b,function(a){Error.stackTraceLimit+=6;try{throw new Error}catch(b){a.stack=b.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(I=function(a){console.warn(a)},M.isNode&&process.stderr.isTTY?I=function(a,b){var c=b?"[33m":"[31m";console.warn(c+a+"[0m\n")}:M.isNode||"string"!=typeof(new Error).stack||(I=function(a,b){console.warn("%c"+a,b?"color: darkorange":"color: red")}));var fa={warnings:V,longStackTraces:!1,cancellation:!1,monitoring:!1};return W&&b.longStackTraces(),{longStackTraces:function(){return fa.longStackTraces},warnings:function(){return fa.warnings},cancellation:function(){return fa.cancellation},monitoring:function(){return fa.monitoring},propagateFromFunction:function(){return ba},boundValueFunction:function(){return m},checkForgottenReturns:p,setBounds:E,warn:r,deprecated:q,CapturedTrace:F,fireDomEvent:Z,fireGlobalEvent:$}}},{"./errors":12,"./util":36}],10:[function(a,b,c){"use strict";b.exports=function(a){function b(){return this.value}function c(){throw this.reason}a.prototype["return"]=a.prototype.thenReturn=function(c){return c instanceof a&&c.suppressUnhandledRejections(),this._then(b,void 0,void 0,{value:c},void 0)},a.prototype["throw"]=a.prototype.thenThrow=function(a){return this._then(c,void 0,void 0,{reason:a},void 0)},a.prototype.catchThrow=function(a){if(arguments.length<=1)return this._then(void 0,c,void 0,{reason:a},void 0);var b=arguments[1],d=function(){throw b};return this.caught(a,d)},a.prototype.catchReturn=function(c){if(arguments.length<=1)return c instanceof a&&c.suppressUnhandledRejections(),this._then(void 0,b,void 0,{value:c},void 0);var d=arguments[1];d instanceof a&&d.suppressUnhandledRejections();var e=function(){return d};return this.caught(c,e)}}},{}],11:[function(a,b,c){"use strict";b.exports=function(a,b){function c(){return f(this)}function d(a,c){return e(a,c,b,b)}var e=a.reduce,f=a.all;a.prototype.each=function(a){return e(this,a,b,0)._then(c,void 0,void 0,this,void 0)},a.prototype.mapSeries=function(a){return e(this,a,b,b)},a.each=function(a,d){return e(a,d,b,0)._then(c,void 0,void 0,a,void 0)},a.mapSeries=d}},{}],12:[function(a,b,c){"use strict";function d(a,b){function c(d){return this instanceof c?(l(this,"message","string"==typeof d?d:b),l(this,"name",a),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new c(d)}return k(c,Error),c}function e(a){return this instanceof e?(l(this,"name","OperationalError"),l(this,"message",a),this.cause=a,this.isOperational=!0,void(a instanceof Error?(l(this,"message",a.message),l(this,"stack",a.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new e(a)}var f,g,h=a("./es5"),i=h.freeze,j=a("./util"),k=j.inherits,l=j.notEnumerableProp,m=d("Warning","warning"),n=d("CancellationError","cancellation error"),o=d("TimeoutError","timeout error"),p=d("AggregateError","aggregate error");try{f=TypeError,g=RangeError}catch(q){f=d("TypeError","type error"),g=d("RangeError","range error")}for(var r="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),s=0;s<r.length;++s)"function"==typeof Array.prototype[r[s]]&&(p.prototype[r[s]]=Array.prototype[r[s]]);h.defineProperty(p.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),p.prototype.isOperational=!0;var t=0;p.prototype.toString=function(){var a=Array(4*t+1).join(" "),b="\n"+a+"AggregateError of:\n";t++,a=Array(4*t+1).join(" ");for(var c=0;c<this.length;++c){for(var d=this[c]===this?"[Circular AggregateError]":this[c]+"",e=d.split("\n"),f=0;f<e.length;++f)e[f]=a+e[f];d=e.join("\n"),b+=d+"\n"}return t--,b},k(e,Error);var u=Error.__BluebirdErrorTypes__;u||(u=i({CancellationError:n,TimeoutError:o,OperationalError:e,RejectionError:e,AggregateError:p}),h.defineProperty(Error,"__BluebirdErrorTypes__",{value:u,writable:!1,enumerable:!1,configurable:!1})),b.exports={Error:Error,TypeError:f,RangeError:g,CancellationError:u.CancellationError,OperationalError:u.OperationalError,TimeoutError:u.TimeoutError,AggregateError:u.AggregateError,Warning:m}},{"./es5":13,"./util":36}],13:[function(a,b,c){var d=function(){"use strict";return void 0===this}();if(d)b.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:d,propertyIsWritable:function(a,b){var c=Object.getOwnPropertyDescriptor(a,b);return!(c&&!c.writable&&!c.set)}};else{var e={}.hasOwnProperty,f={}.toString,g={}.constructor.prototype,h=function(a){var b=[];for(var c in a)e.call(a,c)&&b.push(c);return b},i=function(a,b){return{value:a[b]}},j=function(a,b,c){return a[b]=c.value,a},k=function(a){return a},l=function(a){try{return Object(a).constructor.prototype}catch(b){return g}},m=function(a){try{return"[object Array]"===f.call(a)}catch(b){return!1}};b.exports={isArray:m,keys:h,names:h,defineProperty:j,getDescriptor:i,freeze:k,getPrototypeOf:l,isES5:d,propertyIsWritable:function(){return!0}}}},{}],14:[function(a,b,c){"use strict";b.exports=function(a,b){var c=a.map;a.prototype.filter=function(a,d){return c(this,a,d,b)},a.filter=function(a,d,e){return c(a,d,e,b)}}},{}],15:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a,b,c){this.promise=a,this.type=b,this.handler=c,this.called=!1,this.cancelPromise=null}function f(a){this.finallyHandler=a}function g(a,b){return null!=a.cancelPromise?(arguments.length>1?a.cancelPromise._reject(b):a.cancelPromise._cancel(),a.cancelPromise=null,!0):!1}function h(){return j.call(this,this.promise._target()._settledValue())}function i(a){return g(this,a)?void 0:(m.e=a,m)}function j(a){var e=this.promise,j=this.handler;if(!this.called){this.called=!0;var k=this.isFinallyHandler()?j.call(e._boundValue()):j.call(e._boundValue(),a);if(k===d)return k;if(void 0!==k){e._setReturnedNonUndefined();var n=c(k,e);if(n instanceof b){if(null!=this.cancelPromise){if(n._isCancelled()){var o=new l("late cancellation observer");return e._attachExtraTrace(o),m.e=o,m}n.isPending()&&n._attachCancellationCallback(new f(this))}return n._then(h,i,void 0,this,void 0)}}}return e.isRejected()?(g(this),m.e=a,m):(g(this),a)}var k=a("./util"),l=b.CancellationError,m=k.errorObj,n=a("./catch_filter")(d);return e.prototype.isFinallyHandler=function(){return 0===this.type},f.prototype._resultCancelled=function(){g(this.finallyHandler)},b.prototype._passThrough=function(a,b,c,d){return"function"!=typeof a?this.then():this._then(c,d,void 0,new e(this,b,a),void 0)},b.prototype.lastly=b.prototype["finally"]=function(a){return this._passThrough(a,0,j,j)},b.prototype.tap=function(a){return this._passThrough(a,1,j)},b.prototype.tapCatch=function(a){var c=arguments.length;if(1===c)return this._passThrough(a,1,void 0,j);var d,e=new Array(c-1),f=0;for(d=0;c-1>d;++d){var g=arguments[d];if(!k.isObject(g))return b.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+k.classString(g)));e[f++]=g}e.length=f;var h=arguments[d];return this._passThrough(n(e,h,this),1,void 0,j)},e}},{"./catch_filter":7,"./util":36}],16:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a,c,d){for(var f=0;f<c.length;++f){d._pushContext();var g=n(c[f])(a);if(d._popContext(),g===m){d._pushContext();var h=b.reject(m.e);return d._popContext(),h}var i=e(g,d);if(i instanceof b)return i}return null}function i(a,c,e,f){if(g.cancellation()){var h=new b(d),i=this._finallyPromise=new b(d);this._promise=h.lastly(function(){return i}),h._captureStackTrace(),h._setOnCancel(this)}else{var j=this._promise=new b(d);j._captureStackTrace()}this._stack=f,this._generatorFunction=a,this._receiver=c,this._generator=void 0,this._yieldHandlers="function"==typeof e?[e].concat(o):o,this._yieldedPromise=null,this._cancellationPhase=!1}var j=a("./errors"),k=j.TypeError,l=a("./util"),m=l.errorObj,n=l.tryCatch,o=[];l.inherits(i,f),i.prototype._isResolved=function(){return null===this._promise},i.prototype._cleanup=function(){this._promise=this._generator=null,g.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},i.prototype._promiseCancelled=function(){if(!this._isResolved()){var a,c="undefined"!=typeof this._generator["return"];if(c)this._promise._pushContext(),a=n(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();else{var d=new b.CancellationError("generator .return() sentinel");b.coroutine.returnSentinel=d,this._promise._attachExtraTrace(d),this._promise._pushContext(),a=n(this._generator["throw"]).call(this._generator,d),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,
this._continue(a)}},i.prototype._promiseFulfilled=function(a){this._yieldedPromise=null,this._promise._pushContext();var b=n(this._generator.next).call(this._generator,a);this._promise._popContext(),this._continue(b)},i.prototype._promiseRejected=function(a){this._yieldedPromise=null,this._promise._attachExtraTrace(a),this._promise._pushContext();var b=n(this._generator["throw"]).call(this._generator,a);this._promise._popContext(),this._continue(b)},i.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof b){var a=this._yieldedPromise;this._yieldedPromise=null,a.cancel()}},i.prototype.promise=function(){return this._promise},i.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},i.prototype._continue=function(a){var c=this._promise;if(a===m)return this._cleanup(),this._cancellationPhase?c.cancel():c._rejectCallback(a.e,!1);var d=a.value;if(a.done===!0)return this._cleanup(),this._cancellationPhase?c.cancel():c._resolveCallback(d);var f=e(d,this._promise);if(!(f instanceof b)&&(f=h(f,this._yieldHandlers,this._promise),null===f))return void this._promiseRejected(new k("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(d))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));f=f._target();var g=f._bitField;0===(50397184&g)?(this._yieldedPromise=f,f._proxy(this,null)):0!==(33554432&g)?b._async.invoke(this._promiseFulfilled,this,f._value()):0!==(16777216&g)?b._async.invoke(this._promiseRejected,this,f._reason()):this._promiseCancelled()},b.coroutine=function(a,b){if("function"!=typeof a)throw new k("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var c=Object(b).yieldHandler,d=i,e=(new Error).stack;return function(){var b=a.apply(this,arguments),f=new d(void 0,void 0,c,e),g=f.promise();return f._generator=b,f._promiseFulfilled(void 0),g}},b.coroutine.addYieldHandler=function(a){if("function"!=typeof a)throw new k("expecting a function but got "+l.classString(a));o.push(a)},b.spawn=function(a){if(g.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof a)return c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var d=new i(a,this),e=d.promise();return d._run(b.spawn),e}}},{"./errors":12,"./util":36}],17:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){var h=a("./util");h.canEvaluate,h.tryCatch,h.errorObj;b.join=function(){var a,b=arguments.length-1;if(b>0&&"function"==typeof arguments[b]){a=arguments[b];var d}var e=[].slice.call(arguments);a&&e.pop();var d=new c(e).promise();return void 0!==a?d.spread(a):d}}},{"./util":36}],18:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a,b,c,d){this.constructor$(a),this._promise._captureStackTrace();var e=j();this._callback=null===e?b:k.domainBind(e,b),this._preservedValues=d===f?new Array(this.length()):null,this._limit=c,this._inFlight=0,this._queue=[],n.invoke(this._asyncInit,this,void 0)}function i(a,c,e,f){if("function"!=typeof c)return d("expecting a function but got "+k.classString(c));var g=0;if(void 0!==e){if("object"!=typeof e||null===e)return b.reject(new TypeError("options argument must be an object but it is "+k.classString(e)));if("number"!=typeof e.concurrency)return b.reject(new TypeError("'concurrency' must be a number but it is "+k.classString(e.concurrency)));g=e.concurrency}return g="number"==typeof g&&isFinite(g)&&g>=1?g:0,new h(a,c,g,f).promise()}var j=b._getDomain,k=a("./util"),l=k.tryCatch,m=k.errorObj,n=b._async;k.inherits(h,c),h.prototype._asyncInit=function(){this._init$(void 0,-2)},h.prototype._init=function(){},h.prototype._promiseFulfilled=function(a,c){var d=this._values,f=this.length(),h=this._preservedValues,i=this._limit;if(0>c){if(c=-1*c-1,d[c]=a,i>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(i>=1&&this._inFlight>=i)return d[c]=a,this._queue.push(c),!1;null!==h&&(h[c]=a);var j=this._promise,k=this._callback,n=j._boundValue();j._pushContext();var o=l(k).call(n,a,c,f),p=j._popContext();if(g.checkForgottenReturns(o,p,null!==h?"Promise.filter":"Promise.map",j),o===m)return this._reject(o.e),!0;var q=e(o,this._promise);if(q instanceof b){q=q._target();var r=q._bitField;if(0===(50397184&r))return i>=1&&this._inFlight++,d[c]=q,q._proxy(this,-1*(c+1)),!1;if(0===(33554432&r))return 0!==(16777216&r)?(this._reject(q._reason()),!0):(this._cancel(),!0);o=q._value()}d[c]=o}var s=++this._totalResolved;return s>=f?(null!==h?this._filter(d,h):this._resolve(d),!0):!1},h.prototype._drainQueue=function(){for(var a=this._queue,b=this._limit,c=this._values;a.length>0&&this._inFlight<b;){if(this._isResolved())return;var d=a.pop();this._promiseFulfilled(c[d],d)}},h.prototype._filter=function(a,b){for(var c=b.length,d=new Array(c),e=0,f=0;c>f;++f)a[f]&&(d[e++]=b[f]);d.length=e,this._resolve(d)},h.prototype.preservedValues=function(){return this._preservedValues},b.prototype.map=function(a,b){return i(this,a,b,null)},b.map=function(a,b,c,d){return i(a,b,c,d)}}},{"./util":36}],19:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f){var g=a("./util"),h=g.tryCatch;b.method=function(a){if("function"!=typeof a)throw new b.TypeError("expecting a function but got "+g.classString(a));return function(){var d=new b(c);d._captureStackTrace(),d._pushContext();var e=h(a).apply(this,arguments),g=d._popContext();return f.checkForgottenReturns(e,g,"Promise.method",d),d._resolveFromSyncValue(e),d}},b.attempt=b["try"]=function(a){if("function"!=typeof a)return e("expecting a function but got "+g.classString(a));var d=new b(c);d._captureStackTrace(),d._pushContext();var i;if(arguments.length>1){f.deprecated("calling Promise.try with more than 1 argument");var j=arguments[1],k=arguments[2];i=g.isArray(j)?h(a).apply(k,j):h(a).call(k,j)}else i=h(a)();var l=d._popContext();return f.checkForgottenReturns(i,l,"Promise.try",d),d._resolveFromSyncValue(i),d},b.prototype._resolveFromSyncValue=function(a){a===g.errorObj?this._rejectCallback(a.e,!1):this._resolveCallback(a,!0)}}},{"./util":36}],20:[function(a,b,c){"use strict";function d(a){return a instanceof Error&&k.getPrototypeOf(a)===Error.prototype}function e(a){var b;if(d(a)){b=new j(a),b.name=a.name,b.message=a.message,b.stack=a.stack;for(var c=k.keys(a),e=0;e<c.length;++e){var f=c[e];l.test(f)||(b[f]=a[f])}return b}return g.markAsOriginatingFromRejection(a),a}function f(a,b){return function(c,d){if(null!==a){if(c){var f=e(h(c));a._attachExtraTrace(f),a._reject(f)}else if(b){var g=[].slice.call(arguments,1);a._fulfill(g)}else a._fulfill(d);a=null}}}var g=a("./util"),h=g.maybeWrapAsError,i=a("./errors"),j=i.OperationalError,k=a("./es5"),l=/^(?:name|message|stack|cause)$/;b.exports=f},{"./errors":12,"./es5":13,"./util":36}],21:[function(a,b,c){"use strict";b.exports=function(b){function c(a,b){var c=this;if(!f.isArray(a))return d.call(c,a,b);var e=h(b).apply(c._boundValue(),[null].concat(a));e===i&&g.throwLater(e.e)}function d(a,b){var c=this,d=c._boundValue(),e=void 0===a?h(b).call(d,null):h(b).call(d,null,a);e===i&&g.throwLater(e.e)}function e(a,b){var c=this;if(!a){var d=new Error(a+"");d.cause=a,a=d}var e=h(b).call(c._boundValue(),a);e===i&&g.throwLater(e.e)}var f=a("./util"),g=b._async,h=f.tryCatch,i=f.errorObj;b.prototype.asCallback=b.prototype.nodeify=function(a,b){if("function"==typeof a){var f=d;void 0!==b&&Object(b).spread&&(f=c),this._then(f,e,void 0,this,a)}return this}}},{"./util":36}],22:[function(a,b,c){"use strict";b.exports=function(){function c(){}function d(a,b){if(null==a||a.constructor!==e)throw new s("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof b)throw new s("expecting a function but got "+n.classString(b))}function e(a){a!==u&&d(this,a),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(a),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function f(a){this.promise._resolveCallback(a)}function g(a){this.promise._rejectCallback(a,!1)}function h(a){var b=new e(u);b._fulfillmentHandler0=a,b._rejectionHandler0=a,b._promise0=a,b._receiver0=a}var i,j=function(){return new s("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},k=function(){return new e.PromiseInspection(this._target())},l=function(a){return e.reject(new s(a))},m={},n=a("./util");i=n.isNode?function(){var a=process.domain;return void 0===a&&(a=null),a}:function(){return null},n.notEnumerableProp(e,"_getDomain",i);var o=a("./es5"),p=a("./async"),q=new p;o.defineProperty(e,"_async",{value:q});var r=a("./errors"),s=e.TypeError=r.TypeError;e.RangeError=r.RangeError;var t=e.CancellationError=r.CancellationError;e.TimeoutError=r.TimeoutError,e.OperationalError=r.OperationalError,e.RejectionError=r.OperationalError,e.AggregateError=r.AggregateError;var u=function(){},v={},w={},x=a("./thenables")(e,u),y=a("./promise_array")(e,u,x,l,c),z=a("./context")(e),A=z.create,B=a("./debuggability")(e,z),C=(B.CapturedTrace,a("./finally")(e,x,w)),D=a("./catch_filter")(w),E=a("./nodeback"),F=n.errorObj,G=n.tryCatch;return e.prototype.toString=function(){return"[object Promise]"},e.prototype.caught=e.prototype["catch"]=function(a){var b=arguments.length;if(b>1){var c,d=new Array(b-1),e=0;for(c=0;b-1>c;++c){var f=arguments[c];if(!n.isObject(f))return l("Catch statement predicate: expecting an object but got "+n.classString(f));d[e++]=f}return d.length=e,a=arguments[c],this.then(void 0,D(d,a,this))}return this.then(void 0,a)},e.prototype.reflect=function(){return this._then(k,k,void 0,this,void 0)},e.prototype.then=function(a,b){if(B.warnings()&&arguments.length>0&&"function"!=typeof a&&"function"!=typeof b){var c=".then() only accepts functions but was passed: "+n.classString(a);arguments.length>1&&(c+=", "+n.classString(b)),this._warn(c)}return this._then(a,b,void 0,void 0,void 0)},e.prototype.done=function(a,b){var c=this._then(a,b,void 0,void 0,void 0);c._setIsFinal()},e.prototype.spread=function(a){return"function"!=typeof a?l("expecting a function but got "+n.classString(a)):this.all()._then(a,void 0,void 0,v,void 0)},e.prototype.toJSON=function(){var a={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(a.fulfillmentValue=this.value(),a.isFulfilled=!0):this.isRejected()&&(a.rejectionReason=this.reason(),a.isRejected=!0),a},e.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new y(this).promise()},e.prototype.error=function(a){return this.caught(n.originatesFromRejection,a)},e.getNewLibraryCopy=b.exports,e.is=function(a){return a instanceof e},e.fromNode=e.fromCallback=function(a){var b=new e(u);b._captureStackTrace();var c=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,d=G(a)(E(b,c));return d===F&&b._rejectCallback(d.e,!0),b._isFateSealed()||b._setAsyncGuaranteed(),b},e.all=function(a){return new y(a).promise()},e.cast=function(a){var b=x(a);return b instanceof e||(b=new e(u),b._captureStackTrace(),b._setFulfilled(),b._rejectionHandler0=a),b},e.resolve=e.fulfilled=e.cast,e.reject=e.rejected=function(a){var b=new e(u);return b._captureStackTrace(),b._rejectCallback(a,!0),b},e.setScheduler=function(a){if("function"!=typeof a)throw new s("expecting a function but got "+n.classString(a));return q.setScheduler(a)},e.prototype._then=function(a,b,c,d,f){var g=void 0!==f,h=g?f:new e(u),j=this._target(),k=j._bitField;g||(h._propagateFrom(this,3),h._captureStackTrace(),void 0===d&&0!==(2097152&this._bitField)&&(d=0!==(50397184&k)?this._boundValue():j===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,h));var l=i();if(0!==(50397184&k)){var m,o,p=j._settlePromiseCtx;0!==(33554432&k)?(o=j._rejectionHandler0,m=a):0!==(16777216&k)?(o=j._fulfillmentHandler0,m=b,j._unsetRejectionIsUnhandled()):(p=j._settlePromiseLateCancellationObserver,o=new t("late cancellation observer"),j._attachExtraTrace(o),m=b),q.invoke(p,j,{handler:null===l?m:"function"==typeof m&&n.domainBind(l,m),promise:h,receiver:d,value:o})}else j._addCallbacks(a,b,h,d,l);return h},e.prototype._length=function(){return 65535&this._bitField},e.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},e.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},e.prototype._setLength=function(a){this._bitField=-65536&this._bitField|65535&a},e.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},e.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},e.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},e.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},e.prototype._isFinal=function(){return(4194304&this._bitField)>0},e.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},e.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},e.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},e.prototype._setAsyncGuaranteed=function(){q.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},e.prototype._receiverAt=function(a){var b=0===a?this._receiver0:this[4*a-4+3];return b===m?void 0:void 0===b&&this._isBound()?this._boundValue():b},e.prototype._promiseAt=function(a){return this[4*a-4+2]},e.prototype._fulfillmentHandlerAt=function(a){return this[4*a-4+0]},e.prototype._rejectionHandlerAt=function(a){return this[4*a-4+1]},e.prototype._boundValue=function(){},e.prototype._migrateCallback0=function(a){var b=(a._bitField,a._fulfillmentHandler0),c=a._rejectionHandler0,d=a._promise0,e=a._receiverAt(0);void 0===e&&(e=m),this._addCallbacks(b,c,d,e,null)},e.prototype._migrateCallbackAt=function(a,b){var c=a._fulfillmentHandlerAt(b),d=a._rejectionHandlerAt(b),e=a._promiseAt(b),f=a._receiverAt(b);void 0===f&&(f=m),this._addCallbacks(c,d,e,f,null)},e.prototype._addCallbacks=function(a,b,c,d,e){var f=this._length();if(f>=65531&&(f=0,this._setLength(0)),0===f)this._promise0=c,this._receiver0=d,"function"==typeof a&&(this._fulfillmentHandler0=null===e?a:n.domainBind(e,a)),"function"==typeof b&&(this._rejectionHandler0=null===e?b:n.domainBind(e,b));else{var g=4*f-4;this[g+2]=c,this[g+3]=d,"function"==typeof a&&(this[g+0]=null===e?a:n.domainBind(e,a)),"function"==typeof b&&(this[g+1]=null===e?b:n.domainBind(e,b))}return this._setLength(f+1),f},e.prototype._proxy=function(a,b){this._addCallbacks(void 0,void 0,b,a,null)},e.prototype._resolveCallback=function(a,b){if(0===(117506048&this._bitField)){if(a===this)return this._rejectCallback(j(),!1);var c=x(a,this);if(!(c instanceof e))return this._fulfill(a);b&&this._propagateFrom(c,2);var d=c._target();if(d===this)return void this._reject(j());var f=d._bitField;if(0===(50397184&f)){var g=this._length();g>0&&d._migrateCallback0(this);for(var h=1;g>h;++h)d._migrateCallbackAt(this,h);this._setFollowing(),this._setLength(0),this._setFollowee(d)}else if(0!==(33554432&f))this._fulfill(d._value());else if(0!==(16777216&f))this._reject(d._reason());else{var i=new t("late cancellation observer");d._attachExtraTrace(i),this._reject(i)}}},e.prototype._rejectCallback=function(a,b,c){var d=n.ensureErrorObject(a),e=d===a;if(!e&&!c&&B.warnings()){var f="a promise was rejected with a non-error: "+n.classString(a);this._warn(f,!0)}this._attachExtraTrace(d,b?e:!1),this._reject(a)},e.prototype._resolveFromExecutor=function(a){if(a!==u){var b=this;this._captureStackTrace(),this._pushContext();var c=!0,d=this._execute(a,function(a){b._resolveCallback(a)},function(a){b._rejectCallback(a,c)});c=!1,this._popContext(),void 0!==d&&b._rejectCallback(d,!0)}},e.prototype._settlePromiseFromHandler=function(a,b,c,d){var e=d._bitField;if(0===(65536&e)){d._pushContext();var f;b===v?c&&"number"==typeof c.length?f=G(a).apply(this._boundValue(),c):(f=F,f.e=new s("cannot .spread() a non-array: "+n.classString(c))):f=G(a).call(b,c);var g=d._popContext();e=d._bitField,0===(65536&e)&&(f===w?d._reject(c):f===F?d._rejectCallback(f.e,!1):(B.checkForgottenReturns(f,g,"",d,this),d._resolveCallback(f)))}},e.prototype._target=function(){for(var a=this;a._isFollowing();)a=a._followee();return a},e.prototype._followee=function(){return this._rejectionHandler0},e.prototype._setFollowee=function(a){this._rejectionHandler0=a},e.prototype._settlePromise=function(a,b,d,f){var g=a instanceof e,h=this._bitField,i=0!==(134217728&h);0!==(65536&h)?(g&&a._invokeInternalOnCancel(),d instanceof C&&d.isFinallyHandler()?(d.cancelPromise=a,G(b).call(d,f)===F&&a._reject(F.e)):b===k?a._fulfill(k.call(d)):d instanceof c?d._promiseCancelled(a):g||a instanceof y?a._cancel():d.cancel()):"function"==typeof b?g?(i&&a._setAsyncGuaranteed(),this._settlePromiseFromHandler(b,d,f,a)):b.call(d,f,a):d instanceof c?d._isResolved()||(0!==(33554432&h)?d._promiseFulfilled(f,a):d._promiseRejected(f,a)):g&&(i&&a._setAsyncGuaranteed(),0!==(33554432&h)?a._fulfill(f):a._reject(f))},e.prototype._settlePromiseLateCancellationObserver=function(a){var b=a.handler,c=a.promise,d=a.receiver,f=a.value;"function"==typeof b?c instanceof e?this._settlePromiseFromHandler(b,d,f,c):b.call(d,f,c):c instanceof e&&c._reject(f)},e.prototype._settlePromiseCtx=function(a){this._settlePromise(a.promise,a.handler,a.receiver,a.value)},e.prototype._settlePromise0=function(a,b,c){var d=this._promise0,e=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(d,a,e,b)},e.prototype._clearCallbackDataAtIndex=function(a){var b=4*a-4;this[b+2]=this[b+3]=this[b+0]=this[b+1]=void 0},e.prototype._fulfill=function(a){var b=this._bitField;if(!((117506048&b)>>>16)){if(a===this){var c=j();return this._attachExtraTrace(c),this._reject(c)}this._setFulfilled(),this._rejectionHandler0=a,(65535&b)>0&&(0!==(134217728&b)?this._settlePromises():q.settlePromises(this))}},e.prototype._reject=function(a){var b=this._bitField;if(!((117506048&b)>>>16))return this._setRejected(),this._fulfillmentHandler0=a,this._isFinal()?q.fatalError(a,n.isNode):void((65535&b)>0?q.settlePromises(this):this._ensurePossibleRejectionHandled())},e.prototype._fulfillPromises=function(a,b){for(var c=1;a>c;c++){var d=this._fulfillmentHandlerAt(c),e=this._promiseAt(c),f=this._receiverAt(c);this._clearCallbackDataAtIndex(c),this._settlePromise(e,d,f,b)}},e.prototype._rejectPromises=function(a,b){for(var c=1;a>c;c++){var d=this._rejectionHandlerAt(c),e=this._promiseAt(c),f=this._receiverAt(c);this._clearCallbackDataAtIndex(c),this._settlePromise(e,d,f,b)}},e.prototype._settlePromises=function(){var a=this._bitField,b=65535&a;if(b>0){if(0!==(16842752&a)){var c=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,c,a),this._rejectPromises(b,c)}else{var d=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,d,a),this._fulfillPromises(b,d)}this._setLength(0)}this._clearCancellationData()},e.prototype._settledValue=function(){var a=this._bitField;return 0!==(33554432&a)?this._rejectionHandler0:0!==(16777216&a)?this._fulfillmentHandler0:void 0},e.defer=e.pending=function(){B.deprecated("Promise.defer","new Promise");var a=new e(u);return{promise:a,resolve:f,reject:g}},n.notEnumerableProp(e,"_makeSelfResolutionError",j),a("./method")(e,u,x,l,B),a("./bind")(e,u,x,B),a("./cancel")(e,y,l,B),a("./direct_resolve")(e),a("./synchronous_inspection")(e),a("./join")(e,y,x,u,q,i),e.Promise=e,e.version="3.5.0",a("./map.js")(e,y,l,x,u,B),a("./call_get.js")(e),a("./using.js")(e,l,x,A,u,B),a("./timers.js")(e,u,B),a("./generators.js")(e,l,u,x,c,B),a("./nodeify.js")(e),a("./promisify.js")(e,u),a("./props.js")(e,y,x,l),a("./race.js")(e,u,x,l),a("./reduce.js")(e,y,l,x,u,B),a("./settle.js")(e,y,B),a("./some.js")(e,y,l),a("./filter.js")(e,u),a("./each.js")(e,u),a("./any.js")(e),n.toFastProperties(e),n.toFastProperties(e.prototype),h({a:1}),h({b:2}),h({c:3}),h(1),h(function(){}),h(void 0),h(!1),h(new e(u)),B.setBounds(p.firstLineError,n.lastLineError),e}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f){function g(a){switch(a){case-2:return[];case-3:return{};case-6:return new Map}}function h(a){var d=this._promise=new b(c);a instanceof b&&d._propagateFrom(a,3),d._setOnCancel(this),this._values=a,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var i=a("./util");i.isArray;return i.inherits(h,f),h.prototype.length=function(){return this._length},h.prototype.promise=function(){return this._promise},h.prototype._init=function j(a,c){var f=d(this._values,this._promise);if(f instanceof b){f=f._target();var h=f._bitField;if(this._values=f,0===(50397184&h))return this._promise._setAsyncGuaranteed(),f._then(j,this._reject,void 0,this,c);if(0===(33554432&h))return 0!==(16777216&h)?this._reject(f._reason()):this._cancel();f=f._value()}if(f=i.asArray(f),null===f){var k=e("expecting an array or an iterable object but got "+i.classString(f)).reason();return void this._promise._rejectCallback(k,!1)}return 0===f.length?void(-5===c?this._resolveEmptyArray():this._resolve(g(c))):void this._iterate(f)},h.prototype._iterate=function(a){var c=this.getActualLength(a.length);this._length=c,this._values=this.shouldCopyValues()?new Array(c):this._values;for(var e=this._promise,f=!1,g=null,h=0;c>h;++h){var i=d(a[h],e);i instanceof b?(i=i._target(),g=i._bitField):g=null,f?null!==g&&i.suppressUnhandledRejections():null!==g?0===(50397184&g)?(i._proxy(this,h),this._values[h]=i):f=0!==(33554432&g)?this._promiseFulfilled(i._value(),h):0!==(16777216&g)?this._promiseRejected(i._reason(),h):this._promiseCancelled(h):f=this._promiseFulfilled(i,h)}f||e._setAsyncGuaranteed()},h.prototype._isResolved=function(){return null===this._values},h.prototype._resolve=function(a){this._values=null,this._promise._fulfill(a)},h.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},h.prototype._reject=function(a){this._values=null,this._promise._rejectCallback(a,!1)},h.prototype._promiseFulfilled=function(a,b){this._values[b]=a;var c=++this._totalResolved;return c>=this._length?(this._resolve(this._values),!0):!1},h.prototype._promiseCancelled=function(){return this._cancel(),!0},h.prototype._promiseRejected=function(a){return this._totalResolved++,this._reject(a),!0},h.prototype._resultCancelled=function(){if(!this._isResolved()){var a=this._values;if(this._cancel(),a instanceof b)a.cancel();else for(var c=0;c<a.length;++c)a[c]instanceof b&&a[c].cancel()}},h.prototype.shouldCopyValues=function(){return!0},h.prototype.getActualLength=function(a){return a},h}},{"./util":36}],24:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a){return!w.test(a)}function e(a){try{return a.__isPromisified__===!0}catch(b){return!1}}function f(a,b,c){var d=n.getDataPropertyOrDefault(a,b+c,u);return d?e(d):!1}function g(a,b,c){for(var d=0;d<a.length;d+=2){var e=a[d];if(c.test(e))for(var f=e.replace(c,""),g=0;g<a.length;g+=2)if(a[g]===f)throw new s("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",b))}}function h(a,b,c,d){for(var h=n.inheritedDataKeys(a),i=[],j=0;j<h.length;++j){var k=h[j],l=a[k],m=d===x?!0:x(k,l,a);"function"!=typeof l||e(l)||f(a,k,b)||!d(k,l,a,m)||i.push(k,l)}return g(i,b,c),i}function i(a,d,e,f,g,h){function i(){var e=d;d===m&&(e=this);var f=new b(c);f._captureStackTrace();var g="string"==typeof k&&this!==j?this[k]:a,i=o(f,h);try{g.apply(e,p(arguments,i))}catch(l){f._rejectCallback(q(l),!0,!0)}return f._isFateSealed()||f._setAsyncGuaranteed(),f}var j=function(){return this}(),k=a;return"string"==typeof k&&(a=f),n.notEnumerableProp(i,"__isPromisified__",!0),i}function j(a,b,c,d,e){for(var f=new RegExp(y(b)+"$"),g=h(a,b,f,c),i=0,j=g.length;j>i;i+=2){var k=g[i],l=g[i+1],o=k+b;if(d===z)a[o]=z(k,m,k,l,b,e);else{var p=d(l,function(){return z(k,m,k,l,b,e)});n.notEnumerableProp(p,"__isPromisified__",!0),a[o]=p}}return n.toFastProperties(a),a}function k(a,b,c){return z(a,b,void 0,a,null,c)}var l,m={},n=a("./util"),o=a("./nodeback"),p=n.withAppended,q=n.maybeWrapAsError,r=n.canEvaluate,s=a("./errors").TypeError,t="Async",u={__isPromisified__:!0},v=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],w=new RegExp("^(?:"+v.join("|")+")$"),x=function(a){return n.isIdentifier(a)&&"_"!==a.charAt(0)&&"constructor"!==a},y=function(a){return a.replace(/([$])/,"\\$")},z=r?l:i;b.promisify=function(a,b){if("function"!=typeof a)throw new s("expecting a function but got "+n.classString(a));if(e(a))return a;b=Object(b);var c=void 0===b.context?m:b.context,f=!!b.multiArgs,g=k(a,c,f);return n.copyDescriptors(a,g,d),g},b.promisifyAll=function(a,b){if("function"!=typeof a&&"object"!=typeof a)throw new s("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");b=Object(b);var c=!!b.multiArgs,d=b.suffix;"string"!=typeof d&&(d=t);var e=b.filter;"function"!=typeof e&&(e=x);var f=b.promisifier;if("function"!=typeof f&&(f=z),!n.isIdentifier(d))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var g=n.inheritedDataKeys(a),h=0;h<g.length;++h){var i=a[g[h]];"constructor"!==g[h]&&n.isClass(i)&&(j(i.prototype,d,e,f,c),j(i,d,e,f,c))}return j(a,d,e,f,c)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){function f(a){var b,c=!1;if(void 0!==h&&a instanceof h)b=l(a),c=!0;else{var d=k.keys(a),e=d.length;b=new Array(2*e);for(var f=0;e>f;++f){var g=d[f];b[f]=a[g],b[f+e]=g}}this.constructor$(b),this._isMap=c,this._init$(void 0,c?-6:-3)}function g(a){var c,g=d(a);return j(g)?(c=g instanceof b?g._then(b.props,void 0,void 0,void 0,void 0):new f(g).promise(),g instanceof b&&c._propagateFrom(g,2),c):e("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var h,i=a("./util"),j=i.isObject,k=a("./es5");"function"==typeof Map&&(h=Map);var l=function(){function a(a,d){this[b]=a,this[b+c]=d,b++}var b=0,c=0;return function(d){c=d.size,b=0;var e=new Array(2*d.size);return d.forEach(a,e),e}}(),m=function(a){for(var b=new h,c=a.length/2|0,d=0;c>d;++d){var e=a[c+d],f=a[d];b.set(e,f)}return b};i.inherits(f,c),f.prototype._init=function(){},f.prototype._promiseFulfilled=function(a,b){this._values[b]=a;var c=++this._totalResolved;if(c>=this._length){var d;if(this._isMap)d=m(this._values);else{d={};for(var e=this.length(),f=0,g=this.length();g>f;++f)d[this._values[f+e]]=this._values[f]}return this._resolve(d),!0}return!1},f.prototype.shouldCopyValues=function(){return!1},f.prototype.getActualLength=function(a){return a>>1},b.prototype.props=function(){return g(this)},b.props=function(a){return g(a)}}},{"./es5":13,"./util":36}],26:[function(a,b,c){"use strict";function d(a,b,c,d,e){for(var f=0;e>f;++f)c[f+d]=a[f+b],a[f+b]=void 0}function e(a){this._capacity=a,this._length=0,this._front=0}e.prototype._willBeOverCapacity=function(a){return this._capacity<a},e.prototype._pushOne=function(a){var b=this.length();this._checkCapacity(b+1);var c=this._front+b&this._capacity-1;this[c]=a,this._length=b+1},e.prototype.push=function(a,b,c){var d=this.length()+3;if(this._willBeOverCapacity(d))return this._pushOne(a),this._pushOne(b),void this._pushOne(c);var e=this._front+d-3;this._checkCapacity(d);var f=this._capacity-1;this[e+0&f]=a,this[e+1&f]=b,this[e+2&f]=c,this._length=d},e.prototype.shift=function(){var a=this._front,b=this[a];return this[a]=void 0,this._front=a+1&this._capacity-1,this._length--,b},e.prototype.length=function(){return this._length},e.prototype._checkCapacity=function(a){this._capacity<a&&this._resizeTo(this._capacity<<1)},e.prototype._resizeTo=function(a){var b=this._capacity;this._capacity=a;var c=this._front,e=this._length,f=c+e&b-1;d(this,0,this,b,f)},b.exports=e},{}],27:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){function f(a,f){var i=d(a);if(i instanceof b)return h(i);if(a=g.asArray(a),null===a)return e("expecting an array or an iterable object but got "+g.classString(a));var j=new b(c);void 0!==f&&j._propagateFrom(f,3);for(var k=j._fulfill,l=j._reject,m=0,n=a.length;n>m;++m){var o=a[m];(void 0!==o||m in a)&&b.cast(o)._then(k,l,void 0,j,null)}return j}var g=a("./util"),h=function(a){return a.then(function(b){return f(b,a)})};b.race=function(a){return f(a,void 0)},b.prototype.race=function(){return f(this,void 0)}}},{"./util":36}],28:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a,c,d,e){this.constructor$(a);var g=m();this._fn=null===g?c:n.domainBind(g,c),void 0!==d&&(d=b.resolve(d),d._attachCancellationCallback(this)),this._initialValue=d,this._currentCancellable=null,e===f?this._eachValues=Array(this._length):0===e?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function i(a,b){this.isFulfilled()?b._resolve(a):b._reject(a)}function j(a,b,c,e){if("function"!=typeof b)return d("expecting a function but got "+n.classString(b));var f=new h(a,b,c,e);return f.promise()}function k(a){this.accum=a,this.array._gotAccum(a);var c=e(this.value,this.array._promise);return c instanceof b?(this.array._currentCancellable=c,c._then(l,void 0,void 0,this,void 0)):l.call(this,c)}function l(a){var c=this.array,d=c._promise,e=o(c._fn);d._pushContext();var f;f=void 0!==c._eachValues?e.call(d._boundValue(),a,this.index,this.length):e.call(d._boundValue(),this.accum,a,this.index,this.length),f instanceof b&&(c._currentCancellable=f);var h=d._popContext();return g.checkForgottenReturns(f,h,void 0!==c._eachValues?"Promise.each":"Promise.reduce",d),f}var m=b._getDomain,n=a("./util"),o=n.tryCatch;n.inherits(h,c),h.prototype._gotAccum=function(a){void 0!==this._eachValues&&null!==this._eachValues&&a!==f&&this._eachValues.push(a)},h.prototype._eachComplete=function(a){return null!==this._eachValues&&this._eachValues.push(a),this._eachValues},h.prototype._init=function(){},h.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},h.prototype.shouldCopyValues=function(){return!1},h.prototype._resolve=function(a){this._promise._resolveCallback(a),this._values=null},h.prototype._resultCancelled=function(a){return a===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof b&&this._currentCancellable.cancel(),this._initialValue instanceof b&&this._initialValue.cancel()))},h.prototype._iterate=function(a){this._values=a;var c,d,e=a.length;if(void 0!==this._initialValue?(c=this._initialValue,d=0):(c=b.resolve(a[0]),d=1),this._currentCancellable=c,!c.isRejected())for(;e>d;++d){var f={accum:null,value:a[d],index:d,length:e,array:this};c=c._then(k,void 0,void 0,f,void 0)}void 0!==this._eachValues&&(c=c._then(this._eachComplete,void 0,void 0,this,void 0)),c._then(i,i,void 0,c,this)},b.prototype.reduce=function(a,b){return j(this,a,b,null)},b.reduce=function(a,b,c,d){return j(a,b,c,d)}}},{"./util":36}],29:[function(a,b,c){"use strict";var d,e=a("./util"),f=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},g=e.getNativePromise();if(e.isNode&&"undefined"==typeof MutationObserver){
var h=global.setImmediate,i=process.nextTick;d=e.isRecentNode?function(a){h.call(global,a)}:function(a){i.call(process,a)}}else if("function"==typeof g&&"function"==typeof g.resolve){var j=g.resolve();d=function(a){j.then(a)}}else d="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(a){setImmediate(a)}:"undefined"!=typeof setTimeout?function(a){setTimeout(a,0)}:f:function(){var a=document.createElement("div"),b={attributes:!0},c=!1,d=document.createElement("div"),e=new MutationObserver(function(){a.classList.toggle("foo"),c=!1});e.observe(d,b);var f=function(){c||(c=!0,d.classList.toggle("foo"))};return function(c){var d=new MutationObserver(function(){d.disconnect(),c()});d.observe(a,b),f()}}();b.exports=d},{"./util":36}],30:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a){this.constructor$(a)}var f=b.PromiseInspection,g=a("./util");g.inherits(e,c),e.prototype._promiseResolved=function(a,b){this._values[a]=b;var c=++this._totalResolved;return c>=this._length?(this._resolve(this._values),!0):!1},e.prototype._promiseFulfilled=function(a,b){var c=new f;return c._bitField=33554432,c._settledValueField=a,this._promiseResolved(b,c)},e.prototype._promiseRejected=function(a,b){var c=new f;return c._bitField=16777216,c._settledValueField=a,this._promiseResolved(b,c)},b.settle=function(a){return d.deprecated(".settle()",".reflect()"),new e(a).promise()},b.prototype.settle=function(){return b.settle(this)}}},{"./util":36}],31:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a){this.constructor$(a),this._howMany=0,this._unwrap=!1,this._initialized=!1}function f(a,b){if((0|b)!==b||0>b)return d("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var c=new e(a),f=c.promise();return c.setHowMany(b),c.init(),f}var g=a("./util"),h=a("./errors").RangeError,i=a("./errors").AggregateError,j=g.isArray,k={};g.inherits(e,c),e.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var a=j(this._values);!this._isResolved()&&a&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},e.prototype.init=function(){this._initialized=!0,this._init()},e.prototype.setUnwrap=function(){this._unwrap=!0},e.prototype.howMany=function(){return this._howMany},e.prototype.setHowMany=function(a){this._howMany=a},e.prototype._promiseFulfilled=function(a){return this._addFulfilled(a),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},e.prototype._promiseRejected=function(a){return this._addRejected(a),this._checkOutcome()},e.prototype._promiseCancelled=function(){return this._values instanceof b||null==this._values?this._cancel():(this._addRejected(k),this._checkOutcome())},e.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var a=new i,b=this.length();b<this._values.length;++b)this._values[b]!==k&&a.push(this._values[b]);return a.length>0?this._reject(a):this._cancel(),!0}return!1},e.prototype._fulfilled=function(){return this._totalResolved},e.prototype._rejected=function(){return this._values.length-this.length()},e.prototype._addRejected=function(a){this._values.push(a)},e.prototype._addFulfilled=function(a){this._values[this._totalResolved++]=a},e.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},e.prototype._getRangeError=function(a){var b="Input array must contain at least "+this._howMany+" items but contains only "+a+" items";return new h(b)},e.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},b.some=function(a,b){return f(a,b)},b.prototype.some=function(a){return f(this,a)},b._SomePromiseArray=e}},{"./errors":12,"./util":36}],32:[function(a,b,c){"use strict";b.exports=function(a){function b(a){void 0!==a?(a=a._target(),this._bitField=a._bitField,this._settledValueField=a._isFateSealed()?a._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}b.prototype._settledValue=function(){return this._settledValueField};var c=b.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},d=b.prototype.error=b.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},e=b.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},f=b.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},g=b.prototype.isPending=function(){return 0===(50397184&this._bitField)},h=b.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};b.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},a.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},a.prototype._isCancelled=function(){return this._target().__isCancelled()},a.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},a.prototype.isPending=function(){return g.call(this._target())},a.prototype.isRejected=function(){return f.call(this._target())},a.prototype.isFulfilled=function(){return e.call(this._target())},a.prototype.isResolved=function(){return h.call(this._target())},a.prototype.value=function(){return c.call(this._target())},a.prototype.reason=function(){var a=this._target();return a._unsetRejectionIsUnhandled(),d.call(a)},a.prototype._value=function(){return this._settledValue()},a.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},a.PromiseInspection=b}},{}],33:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a,d){if(k(a)){if(a instanceof b)return a;var e=f(a);if(e===j){d&&d._pushContext();var i=b.reject(e.e);return d&&d._popContext(),i}if("function"==typeof e){if(g(a)){var i=new b(c);return a._then(i._fulfill,i._reject,void 0,i,null),i}return h(a,e,d)}}return a}function e(a){return a.then}function f(a){try{return e(a)}catch(b){return j.e=b,j}}function g(a){try{return l.call(a,"_promise0")}catch(b){return!1}}function h(a,d,e){function f(a){h&&(h._resolveCallback(a),h=null)}function g(a){h&&(h._rejectCallback(a,l,!0),h=null)}var h=new b(c),k=h;e&&e._pushContext(),h._captureStackTrace(),e&&e._popContext();var l=!0,m=i.tryCatch(d).call(a,f,g);return l=!1,h&&m===j&&(h._rejectCallback(m.e,!0,!0),h=null),k}var i=a("./util"),j=i.errorObj,k=i.isObject,l={}.hasOwnProperty;return d}},{"./util":36}],34:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a){this.handle=a}function f(a){return clearTimeout(this.handle),a}function g(a){throw clearTimeout(this.handle),a}var h=a("./util"),i=b.TimeoutError;e.prototype._resultCancelled=function(){clearTimeout(this.handle)};var j=function(a){return k(+this).thenReturn(a)},k=b.delay=function(a,f){var g,h;return void 0!==f?(g=b.resolve(f)._then(j,null,null,a,void 0),d.cancellation()&&f instanceof b&&g._setOnCancel(f)):(g=new b(c),h=setTimeout(function(){g._fulfill()},+a),d.cancellation()&&g._setOnCancel(new e(h)),g._captureStackTrace()),g._setAsyncGuaranteed(),g};b.prototype.delay=function(a){return k(a,this)};var l=function(a,b,c){var d;d="string"!=typeof b?b instanceof Error?b:new i("operation timed out"):new i(b),h.markAsOriginatingFromRejection(d),a._attachExtraTrace(d),a._reject(d),null!=c&&c.cancel()};b.prototype.timeout=function(a,b){a=+a;var c,h,i=new e(setTimeout(function(){c.isPending()&&l(c,b,h)},a));return d.cancellation()?(h=this.then(),c=h._then(f,g,void 0,i,void 0),c._setOnCancel(i)):c=this._then(f,g,void 0,i,void 0),c}}},{"./util":36}],35:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a){setTimeout(function(){throw a},0)}function i(a){var b=d(a);return b!==a&&"function"==typeof a._isDisposable&&"function"==typeof a._getDisposer&&a._isDisposable()&&b._setDisposable(a._getDisposer()),b}function j(a,c){function e(){if(g>=j)return k._fulfill();var f=i(a[g++]);if(f instanceof b&&f._isDisposable()){try{f=d(f._getDisposer().tryDispose(c),a.promise)}catch(l){return h(l)}if(f instanceof b)return f._then(e,h,null,null,null)}e()}var g=0,j=a.length,k=new b(f);return e(),k}function k(a,b,c){this._data=a,this._promise=b,this._context=c}function l(a,b,c){this.constructor$(a,b,c)}function m(a){return k.isDisposer(a)?(this.resources[this.index]._setDisposable(a),a.promise()):a}function n(a){this.length=a,this.promise=null,this[a-1]=null}var o=a("./util"),p=a("./errors").TypeError,q=a("./util").inherits,r=o.errorObj,s=o.tryCatch,t={};k.prototype.data=function(){return this._data},k.prototype.promise=function(){return this._promise},k.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():t},k.prototype.tryDispose=function(a){var b=this.resource(),c=this._context;void 0!==c&&c._pushContext();var d=b!==t?this.doDispose(b,a):null;return void 0!==c&&c._popContext(),this._promise._unsetDisposable(),this._data=null,d},k.isDisposer=function(a){return null!=a&&"function"==typeof a.resource&&"function"==typeof a.tryDispose},q(l,k),l.prototype.doDispose=function(a,b){var c=this.data();return c.call(a,a,b)},n.prototype._resultCancelled=function(){for(var a=this.length,c=0;a>c;++c){var d=this[c];d instanceof b&&d.cancel()}},b.using=function(){var a=arguments.length;if(2>a)return c("you must pass at least 2 arguments to Promise.using");var e=arguments[a-1];if("function"!=typeof e)return c("expecting a function but got "+o.classString(e));var f,h=!0;2===a&&Array.isArray(arguments[0])?(f=arguments[0],a=f.length,h=!1):(f=arguments,a--);for(var i=new n(a),l=0;a>l;++l){var p=f[l];if(k.isDisposer(p)){var q=p;p=p.promise(),p._setDisposable(q)}else{var t=d(p);t instanceof b&&(p=t._then(m,null,null,{resources:i,index:l},void 0))}i[l]=p}for(var u=new Array(i.length),l=0;l<u.length;++l)u[l]=b.resolve(i[l]).reflect();var v=b.all(u).then(function(a){for(var b=0;b<a.length;++b){var c=a[b];if(c.isRejected())return r.e=c.error(),r;if(!c.isFulfilled())return void v.cancel();a[b]=c.value()}w._pushContext(),e=s(e);var d=h?e.apply(void 0,a):e(a),f=w._popContext();return g.checkForgottenReturns(d,f,"Promise.using",w),d}),w=v.lastly(function(){var a=new b.PromiseInspection(v);return j(i,a)});return i.promise=w,w._setOnCancel(i),w},b.prototype._setDisposable=function(a){this._bitField=131072|this._bitField,this._disposer=a},b.prototype._isDisposable=function(){return(131072&this._bitField)>0},b.prototype._getDisposer=function(){return this._disposer},b.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},b.prototype.disposer=function(a){if("function"==typeof a)return new l(a,this,e());throw new p}}},{"./errors":12,"./util":36}],36:[function(a,b,c){"use strict";function d(){try{var a=D;return D=null,a.apply(this,arguments)}catch(b){return C.e=b,C}}function e(a){return D=a,d}function f(a){return null==a||a===!0||a===!1||"string"==typeof a||"number"==typeof a}function g(a){return"function"==typeof a||"object"==typeof a&&null!==a}function h(a){return f(a)?new Error(q(a)):a}function i(a,b){var c,d=a.length,e=new Array(d+1);for(c=0;d>c;++c)e[c]=a[c];return e[c]=b,e}function j(a,b,c){if(!A.isES5)return{}.hasOwnProperty.call(a,b)?a[b]:void 0;var d=Object.getOwnPropertyDescriptor(a,b);return null!=d?null==d.get&&null==d.set?d.value:c:void 0}function k(a,b,c){if(f(a))return a;var d={value:c,configurable:!0,enumerable:!1,writable:!0};return A.defineProperty(a,b,d),a}function l(a){throw a}function m(a){try{if("function"==typeof a){var b=A.names(a.prototype),c=A.isES5&&b.length>1,d=b.length>0&&!(1===b.length&&"constructor"===b[0]),e=H.test(a+"")&&A.names(a).length>0;if(c||d||e)return!0}return!1}catch(f){return!1}}function n(a){function b(){}b.prototype=a;for(var c=8;c--;)new b;return a}function o(a){return I.test(a)}function p(a,b,c){for(var d=new Array(a),e=0;a>e;++e)d[e]=b+e+c;return d}function q(a){try{return a+""}catch(b){return"[no string representation]"}}function r(a){return null!==a&&"object"==typeof a&&"string"==typeof a.message&&"string"==typeof a.name}function s(a){try{k(a,"isOperational",!0)}catch(b){}}function t(a){return null==a?!1:a instanceof Error.__BluebirdErrorTypes__.OperationalError||a.isOperational===!0}function u(a){return r(a)&&A.propertyIsWritable(a,"stack")}function v(a){return{}.toString.call(a)}function w(a,b,c){for(var d=A.names(a),e=0;e<d.length;++e){var f=d[e];if(c(f))try{A.defineProperty(b,f,A.getDescriptor(a,f))}catch(g){}}}function x(a){return N?process.env[a]:void 0}function y(){if("function"==typeof Promise)try{var a=new Promise(function(){});if("[object Promise]"==={}.toString.call(a))return Promise}catch(b){}}function z(a,b){return a.bind(b)}var A=a("./es5"),B="undefined"==typeof navigator,C={e:{}},D,E="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,F=function(a,b){function c(){this.constructor=a,this.constructor$=b;for(var c in b.prototype)d.call(b.prototype,c)&&"$"!==c.charAt(c.length-1)&&(this[c+"$"]=b.prototype[c])}var d={}.hasOwnProperty;return c.prototype=b.prototype,a.prototype=new c,a.prototype},G=function(){var a=[Array.prototype,Object.prototype,Function.prototype],b=function(b){for(var c=0;c<a.length;++c)if(a[c]===b)return!0;return!1};if(A.isES5){var c=Object.getOwnPropertyNames;return function(a){for(var d=[],e=Object.create(null);null!=a&&!b(a);){var f;try{f=c(a)}catch(g){return d}for(var h=0;h<f.length;++h){var i=f[h];if(!e[i]){e[i]=!0;var j=Object.getOwnPropertyDescriptor(a,i);null!=j&&null==j.get&&null==j.set&&d.push(i)}}a=A.getPrototypeOf(a)}return d}}var d={}.hasOwnProperty;return function(c){if(b(c))return[];var e=[];a:for(var f in c)if(d.call(c,f))e.push(f);else{for(var g=0;g<a.length;++g)if(d.call(a[g],f))continue a;e.push(f)}return e}}(),H=/this\s*\.\s*\S+\s*=/,I=/^[a-z$_][a-z$_0-9]*$/i,J=function(){return"stack"in new Error?function(a){return u(a)?a:new Error(q(a))}:function(a){if(u(a))return a;try{throw new Error(q(a))}catch(b){return b}}}(),K=function(a){return A.isArray(a)?a:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var L="function"==typeof Array.from?function(a){return Array.from(a)}:function(a){for(var b,c=[],d=a[Symbol.iterator]();!(b=d.next()).done;)c.push(b.value);return c};K=function(a){return A.isArray(a)?a:null!=a&&"function"==typeof a[Symbol.iterator]?L(a):null}}var M="undefined"!=typeof process&&"[object process]"===v(process).toLowerCase(),N="undefined"!=typeof process&&"undefined"!=typeof process.env,O={isClass:m,isIdentifier:o,inheritedDataKeys:G,getDataPropertyOrDefault:j,thrower:l,isArray:A.isArray,asArray:K,notEnumerableProp:k,isPrimitive:f,isObject:g,isError:r,canEvaluate:B,errorObj:C,tryCatch:e,inherits:F,withAppended:i,maybeWrapAsError:h,toFastProperties:n,filledRange:p,toString:q,canAttachTrace:u,ensureErrorObject:J,originatesFromRejection:t,markAsOriginatingFromRejection:s,classString:v,copyDescriptors:w,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:M,hasEnvVariables:N,env:x,global:E,getNativePromise:y,domainBind:z};O.isRecentNode=O.isNode&&function(){var a=process.versions.node.split(".").map(Number);return 0===a[0]&&a[1]>10||a[0]>0}(),O.isNode&&O.toFastProperties(process);try{throw new Error}catch(P){O.lastLineError=P}b.exports=O},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise),function(a,b){"function"==typeof define&&define.amd?define("message-service/message-service",[],function(){return b()}):"object"==typeof module&&module.exports?module.exports=b():a.MessageService=b()}(this,function(){function a(a){this.name=a.name,this.consumers={},this.consumerCount=0,this.owner=a.owner,this.target=a.target}var b="div",c="Events",d=!0,e=!1,f={bubbles:e,cancelable:e},g=document,h="function"==typeof Event?function(a){return new Event(a,f)}:function(a){var b=g.createEvent(c);return b.initEvent(a,f.bubbles,f.cancelable),b};a.prototype.publish=function(a){var b=h(this.name);return b.data=a,this.target.dispatchEvent(b)},a.prototype.addConsumer=function(a,b,c,f){var g,h=(f||b)+"",i=this,j=this.consumers[h]||[];this.removeConsumer(b,a,h),j.push(g=function(d){return c&&i.owner.off.call(a||i.owner,i.name,b,h),b.call(a,d.data,d)}),g.scope=a,g.originalConsumer=b,this.consumerCount++,this.consumers[h]=j,this.target.addEventListener(this.name,g,e,d)},a.prototype.removeConsumer=function(a,b,c){var f,g=(c||a)+"",h=this.consumers[g],i=this.name;if(h)for(var j=h.length,k=0;j>k;k++)if(f=h[k],f.originalConsumer===a&&(!b||f.scope===b)){this.target.removeEventListener(i,f,e,d),h.splice(k,1),h.length||delete this.consumers[g],this.consumerCount--;break}},a.prototype.removeAllConsumers=function(){var a,b,c,f,g=this.consumers,h=this.target,i=this.name;for(a in g){for(b=g[a],c=0,f=b.length;f>c;c++)h.removeEventListener(i,b[c],e,d);this.consumerCount=0,delete g[a]}};var i=function(c){var e={},f=g.createElement(b);return c.publish=function(a,b){var c=e[a];return c?c.publish(b):void 0},c.on=c.addListener=function(b,d,g){var h=e[b]||(e[b]=new a({name:b,target:f,owner:c}));if(!d)throw new Error("message-service : no listener specified for topic : "+b);h.addConsumer(this,d,g)},c.off=c.removeListener=function(a,b){var c=e[a];c&&b&&(c.removeConsumer(b,this),c.consumerCount<=0&&delete e[a])},c.one=c.once=function(a,b){c.on.call(this,a,b,d)},c.removeAllListeners=function(a){var b;if(a)return b=e[a],b&&b.removeAllConsumers(),void delete e[a];for(b in e)e[b].removeAllConsumers(),delete e[a]},c.getTopics=function(a){return e},c.hasListeners=function(a){var b=e[a];return a&&b?!!b.consumerCount:!1},c};return i({bind:function(a){if(!a)throw new Error("Binding object not specified");return i(a)},create:function(){return i({})}})}),function(a,b){"function"==typeof define&&define.amd?define("bandwagon/bandwagon",["jquery","message-service/message-service"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("message-service/message-service")):a.Bandwagon=b(a.jQuery,null)}(this,function(a,b){"use strict";function c(){g()}var d,e={global:{}},f={},g=function(){};return c.prototype={registerEvents:function(b,c){b?e[b]?a.extend(!0,e[b],c):e[b]=c:a.extend(!0,e.global,c)},deleteEventsByKey:function(a){a&&e[a]?delete e[a]:console.log("bandwagon: specified namespace does not exist in events cache to delete",a)},getRegisteredEvents:function(){return e},getRegisteredEventsByKey:function(a){var b;return a&&e[a]?b=e[a]:console.log("please provide valid event key you want to retrieve from the events cache",a),b},getInstanceByKey:function(a){var c={};return c=a&&!f[a]?f[a]=b.create():f[a]},getInstancesAvailable:function(){return f},deleteInstanceByKey:function(a){a&&f[a]?delete f[a]:console.log("bandwagon: specified key does not exist in cache to delete",a)}},d=d||new c}),function(a,b){"function"==typeof define&&define.amd?define("intent-registry/RegistryDefaults",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.RegistryDefaults=b(a.lodash)}(this,function(a){"use strict";function b(a){console.log("[RegistryDefaults].setupDefaultIntents")}return{apply:b}}),function(a,b){"function"==typeof define&&define.amd?define("intent-registry/IntentRegistry",["lodash/lodash","bluebird/js/browser/bluebird","bandwagon/bandwagon","intent-registry/RegistryDefaults"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bluebird/js/brower/bluebird"),require("bandwagon/bandwagon"),require("intent-registry/RegistryDefaults")):a.IntentRegistry=b(a.lodash,a.bluebird,a.Bandwagon,a.RegistryDefaults)}(this,function(a,b,c,d){"use strict";function e(){this.debugID="IntentRegistry"+Date.now(),this.registeredIntents={},this.defaultIntents={},this.dispatcher=c.getInstanceByKey(q),o("create",this)}function f(){return p||(o("getInstance"),p=new e,p.addListeners(r.enums),n()),p}function g(b,c){var d=c.type,e=a.endsWith(d,"_default");e&&(d=a.replace(d,"_default","")),h(d,b,e)}function h(a,b,c){f().setIntent(a,b,c)}function i(b){return a.isNull(b)?b:a.isArray(b)?b:[b]}function j(a,c){return new b(function(b,d){try{c=i(c);var e=f().executeIntent(a,c);return b(e)}catch(g){var h=new Error;return h.message=g.message,h.stack=g.stack,d(h)}})}function k(a,b){b=i(b);var c=f().executeIntent(a,b);return c}function l(){o("clearAll");var a=f();a&&a.removeListeners(r.enums),a.registeredIntents={},a.defaultIntents={},a.addListeners(r.enums)}function m(){o("clearIntents"),f().registeredIntents={}}function n(){console.log("applyDefaultIntents"),d.apply(r)}function o(){console.log("[IntentRegistry]",Array.prototype.slice.call(arguments).join(" "))}var p,q="PROPERTY_INTENTIONS";e.prototype={addListeners:function(b){c.registerEvents(q,b),a.each(b,function(a){this.dispatcher.on(a,g)}.bind(this))},removeListeners:function(b){a.each(b,function(a){this.dispatcher.off(a,g)}.bind(this))},setIntent:function(b,c,d){o("setIntent",b,d);var e=d?this.defaultIntents:this.registeredIntents;a.set(e,b,c)},executeIntent:function(a,b){o("executeIntent",a,this);var c=this.getIntent(a),d=this.getIntent(a,!0),e=null;try{e=c.apply(null,b)}catch(f){o("switching to default intent("+a+"). Error processing intent:",f.message);var g=this.getRegistryError(a,f);if(g)throw g;e=d.apply(null,b)}return e},getRegistryError:function(a,b){var c=this.getIntent(a),d=this.getIntent(a,!0);return d?null:c?b:new Error('There is no registered intent named "'+a+'"')},getIntent:function(b,c){var d=a.get(this.registeredIntents,b);return(!d||c)&&(d=a.get(this.defaultIntents,b)),d},toString:function(){return"IntentRegistry."+this.debugID}};var r={set:{intent:{property:a.partialRight(h,!1),"default":a.partialRight(h,!0)}},get:{intent:{async:j,sync:k}},enums:{freewheel:"freewheelIntention",freewheel_default:"freewheelIntention_default",xhrCallback:"xhrCallbackIntention",xhrCallback_default:"xhrCallbackIntention_default"},bandwagonKey:q,clear:{all:l,intents:m},applyDefaults:n},p=f();return r}),define("media-app/property/dependencies",["intent-registry/IntentRegistry"],function(a){function b(){}return{inject:b}}),function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=t(d,f,4);var g=!A(c)&&s.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function b(a){return function(b,c,d){c=u(c,d);for(var e=z(b),f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function c(a,b,c){return function(d,e,f){var g=0,h=z(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(k.call(d,g,h),s.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&h>f;f+=a)if(d[f]===e)return f;return-1}}function d(a,b){var c=F.length,d=a.constructor,e=s.isFunction(d)&&d.prototype||h,f="constructor";for(s.has(a,f)&&!s.contains(b,f)&&b.push(f);c--;)f=F[c],f in a&&a[f]!==e[f]&&!s.contains(b,f)&&b.push(f)}var e=this,f=e._,g=Array.prototype,h=Object.prototype,i=Function.prototype,j=g.push,k=g.slice,l=h.toString,m=h.hasOwnProperty,n=Array.isArray,o=Object.keys,p=i.bind,q=Object.create,r=function(){},s=function(a){return a instanceof s?a:this instanceof s?void(this._wrapped=a):new s(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports._=s):e._=s,s.VERSION="1.8.3";var t=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},u=function(a,b,c){return null==a?s.identity:s.isFunction(a)?t(a,b,c):s.isObject(a)?s.matcher(a):s.property(a)};s.iteratee=function(a,b){return u(a,b,1/0)};var v=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},w=function(a){if(!s.isObject(a))return{};if(q)return q(a);r.prototype=a;var b=new r;return r.prototype=null,b},x=function(a){return function(b){return null==b?void 0:b[a]}},y=Math.pow(2,53)-1,z=x("length"),A=function(a){var b=z(a);return"number"==typeof b&&b>=0&&y>=b};s.each=s.forEach=function(a,b,c){b=t(b,c);var d,e;if(A(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=s.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},s.map=s.collect=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},s.reduce=s.foldl=s.inject=a(1),s.reduceRight=s.foldr=a(-1),s.find=s.detect=function(a,b,c){var d;return d=A(a)?s.findIndex(a,b,c):s.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},s.filter=s.select=function(a,b,c){var d=[];return b=u(b,c),s.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},s.reject=function(a,b,c){return s.filter(a,s.negate(u(b)),c)},s.every=s.all=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},s.some=s.any=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},s.contains=s.includes=s.include=function(a,b,c,d){return A(a)||(a=s.values(a)),("number"!=typeof c||d)&&(c=0),s.indexOf(a,b,c)>=0},s.invoke=function(a,b){var c=k.call(arguments,2),d=s.isFunction(b);return s.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},s.pluck=function(a,b){return s.map(a,s.property(b))},s.where=function(a,b){return s.filter(a,s.matcher(b))},s.findWhere=function(a,b){return s.find(a,s.matcher(b))},s.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},s.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(g>e||e===1/0&&f===1/0)&&(f=a,g=e)});return f},s.shuffle=function(a){for(var b,c=A(a)?a:s.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=s.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},s.sample=function(a,b,c){return null==b||c?(A(a)||(a=s.values(a)),a[s.random(a.length-1)]):s.shuffle(a).slice(0,Math.max(0,b))},s.sortBy=function(a,b,c){return b=u(b,c),s.pluck(s.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var B=function(a){return function(b,c,d){var e={};return c=u(c,d),s.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};s.groupBy=B(function(a,b,c){s.has(a,c)?a[c].push(b):a[c]=[b]}),s.indexBy=B(function(a,b,c){a[c]=b}),s.countBy=B(function(a,b,c){s.has(a,c)?a[c]++:a[c]=1}),s.toArray=function(a){return a?s.isArray(a)?k.call(a):A(a)?s.map(a,s.identity):s.values(a):[]},s.size=function(a){return null==a?0:A(a)?a.length:s.keys(a).length},s.partition=function(a,b,c){b=u(b,c);var d=[],e=[];return s.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},s.first=s.head=s.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:s.initial(a,a.length-b)},s.initial=function(a,b,c){return k.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},s.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:s.rest(a,Math.max(0,a.length-b))},s.rest=s.tail=s.drop=function(a,b,c){return k.call(a,null==b||c?1:b)},s.compact=function(a){return s.filter(a,s.identity)};var C=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=z(a);h>g;g++){var i=a[g];if(A(i)&&(s.isArray(i)||s.isArguments(i))){b||(i=C(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};s.flatten=function(a,b){return C(a,b,!1)},s.without=function(a){return s.difference(a,k.call(arguments,1))},s.uniq=s.unique=function(a,b,c,d){s.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=u(c,d));for(var e=[],f=[],g=0,h=z(a);h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?s.contains(f,j)||(f.push(j),e.push(i)):s.contains(e,i)||e.push(i)}return e},s.union=function(){return s.uniq(C(arguments,!0,!0))},s.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=z(a);e>d;d++){var f=a[d];if(!s.contains(b,f)){for(var g=1;c>g&&s.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},s.difference=function(a){var b=C(arguments,!0,!0,1);return s.filter(a,function(a){return!s.contains(b,a)})},s.zip=function(){return s.unzip(arguments)},s.unzip=function(a){for(var b=a&&s.max(a,z).length||0,c=Array(b),d=0;b>d;d++)c[d]=s.pluck(a,d);return c},s.object=function(a,b){for(var c={},d=0,e=z(a);e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},s.findIndex=b(1),s.findLastIndex=b(-1),s.sortedIndex=function(a,b,c,d){c=u(c,d,1);for(var e=c(b),f=0,g=z(a);g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},s.indexOf=c(1,s.findIndex,s.sortedIndex),s.lastIndexOf=c(-1,s.findLastIndex),s.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var D=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=w(a.prototype),g=a.apply(f,e);return s.isObject(g)?g:f};s.bind=function(a,b){if(p&&a.bind===p)return p.apply(a,k.call(arguments,1));if(!s.isFunction(a))throw new TypeError("Bind must be called on a function");var c=k.call(arguments,2),d=function(){return D(a,d,b,this,c.concat(k.call(arguments)))};return d},s.partial=function(a){var b=k.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===s?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return D(a,c,this,this,f)};return c},s.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=s.bind(a[c],a);return a},s.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return s.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},s.delay=function(a,b){var c=k.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},s.defer=s.partial(s.delay,s,1),s.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:s.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=s.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},s.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=s.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=s.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},s.wrap=function(a,b){return s.partial(b,a)},s.negate=function(a){return function(){return!a.apply(this,arguments)}},s.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},s.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},s.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},s.once=s.partial(s.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];s.keys=function(a){if(!s.isObject(a))return[];if(o)return o(a);var b=[];
for(var c in a)s.has(a,c)&&b.push(c);return E&&d(a,b),b},s.allKeys=function(a){if(!s.isObject(a))return[];var b=[];for(var c in a)b.push(c);return E&&d(a,b),b},s.values=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},s.mapObject=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},s.pairs=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},s.invert=function(a){for(var b={},c=s.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},s.functions=s.methods=function(a){var b=[];for(var c in a)s.isFunction(a[c])&&b.push(c);return b.sort()},s.extend=v(s.allKeys),s.extendOwn=s.assign=v(s.keys),s.findKey=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},s.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;s.isFunction(b)?(e=s.allKeys(g),d=t(b,c)):(e=C(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;i>h;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},s.omit=function(a,b,c){if(s.isFunction(b))b=s.negate(b);else{var d=s.map(C(arguments,!1,!1,1),String);b=function(a,b){return!s.contains(d,b)}}return s.pick(a,b,c)},s.defaults=v(s.allKeys,!0),s.create=function(a,b){var c=w(a);return b&&s.extendOwn(c,b),c},s.clone=function(a){return s.isObject(a)?s.isArray(a)?a.slice():s.extend({},a):a},s.tap=function(a,b){return b(a),a},s.isMatch=function(a,b){var c=s.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var G=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof s&&(a=a._wrapped),b instanceof s&&(b=b._wrapped);var e=l.call(a);if(e!==l.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(s.isFunction(g)&&g instanceof g&&s.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!G(a[i],b[i],c,d))return!1}else{var j,k=s.keys(a);if(i=k.length,s.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!s.has(b,j)||!G(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};s.isEqual=function(a,b){return G(a,b)},s.isEmpty=function(a){return null==a?!0:A(a)&&(s.isArray(a)||s.isString(a)||s.isArguments(a))?0===a.length:0===s.keys(a).length},s.isElement=function(a){return!(!a||1!==a.nodeType)},s.isArray=n||function(a){return"[object Array]"===l.call(a)},s.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},s.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){s["is"+a]=function(b){return l.call(b)==="[object "+a+"]"}}),s.isArguments(arguments)||(s.isArguments=function(a){return s.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(s.isFunction=function(a){return"function"==typeof a||!1}),s.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},s.isNaN=function(a){return s.isNumber(a)&&a!==+a},s.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===l.call(a)},s.isNull=function(a){return null===a},s.isUndefined=function(a){return void 0===a},s.has=function(a,b){return null!=a&&m.call(a,b)},s.noConflict=function(){return e._=f,this},s.identity=function(a){return a},s.constant=function(a){return function(){return a}},s.noop=function(){},s.property=x,s.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},s.matcher=s.matches=function(a){return a=s.extendOwn({},a),function(b){return s.isMatch(b,a)}},s.times=function(a,b,c){var d=Array(Math.max(0,a));b=t(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},s.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},s.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=s.invert(H),J=function(a){var b=function(b){return a[b]},c="(?:"+s.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};s.escape=J(H),s.unescape=J(I),s.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),s.isFunction(d)?d.call(a):d};var K=0;s.uniqueId=function(a){var b=++K+"";return a?a+b:b},s.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\u2028|\u2029/g,O=function(a){return"\\"+M[a]};s.template=function(a,b,c){!b&&c&&(b=c),b=s.defaults({},b,s.templateSettings);var d=RegExp([(b.escape||L).source,(b.interpolate||L).source,(b.evaluate||L).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(N,O),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,s)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},s.chain=function(a){var b=s(a);return b._chain=!0,b};var P=function(a,b){return a._chain?s(b).chain():b};s.mixin=function(a){s.each(s.functions(a),function(b){var c=s[b]=a[b];s.prototype[b]=function(){var a=[this._wrapped];return j.apply(a,arguments),P(this,c.apply(s,a))}})},s.mixin(s),s.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=g[a];s.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],P(this,c)}}),s.each(["concat","join","slice"],function(a){var b=g[a];s.prototype[a]=function(){return P(this,b.apply(this._wrapped,arguments))}}),s.prototype.value=function(){return this._wrapped},s.prototype.valueOf=s.prototype.toJSON=s.prototype.value,s.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return s})}.call(this),function(a){var b="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(c,d,e){b.Backbone=a(b,e,c,d)});else if("undefined"!=typeof exports){var c,d=require("underscore");try{c=require("jquery")}catch(e){}a(b,exports,d,c)}else b.Backbone=a(b,{},b._,b.jQuery||b.Zepto||b.ender||b.$)}(function(a,b,c,d){var e=a.Backbone,f=Array.prototype.slice;b.VERSION="1.3.3",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var g=function(a,b,d){switch(a){case 1:return function(){return c[b](this[d])};case 2:return function(a){return c[b](this[d],a)};case 3:return function(a,e){return c[b](this[d],i(a,this),e)};case 4:return function(a,e,f){return c[b](this[d],i(a,this),e,f)};default:return function(){var a=f.call(arguments);return a.unshift(this[d]),c[b].apply(c,a)}}},h=function(a,b,d){c.each(b,function(b,e){c[e]&&(a.prototype[e]=g(b,e,d))})},i=function(a,b){return c.isFunction(a)?a:c.isObject(a)&&!b._isModel(a)?j(a):c.isString(a)?function(b){return b.get(a)}:a},j=function(a){var b=c.matches(a);return function(a){return b(a.attributes)}},k=b.Events={},l=/\s+/,m=function(a,b,d,e,f){var g,h=0;if(d&&"object"==typeof d){void 0!==e&&"context"in f&&void 0===f.context&&(f.context=e);for(g=c.keys(d);h<g.length;h++)b=m(a,b,g[h],d[g[h]],f)}else if(d&&l.test(d))for(g=d.split(l);h<g.length;h++)b=a(b,g[h],e,f);else b=a(b,d,e,f);return b};k.on=function(a,b,c){return n(this,a,b,c)};var n=function(a,b,c,d,e){if(a._events=m(o,a._events||{},b,c,{context:d,ctx:a,listening:e}),e){var f=a._listeners||(a._listeners={});f[e.id]=e}return a};k.listenTo=function(a,b,d){if(!a)return this;var e=a._listenId||(a._listenId=c.uniqueId("l")),f=this._listeningTo||(this._listeningTo={}),g=f[e];if(!g){var h=this._listenId||(this._listenId=c.uniqueId("l"));g=f[e]={obj:a,objId:e,id:h,listeningTo:f,count:0}}return n(a,b,d,this,g),this};var o=function(a,b,c,d){if(c){var e=a[b]||(a[b]=[]),f=d.context,g=d.ctx,h=d.listening;h&&h.count++,e.push({callback:c,context:f,ctx:f||g,listening:h})}return a};k.off=function(a,b,c){return this._events?(this._events=m(p,this._events,a,b,{context:c,listeners:this._listeners}),this):this},k.stopListening=function(a,b,d){var e=this._listeningTo;if(!e)return this;for(var f=a?[a._listenId]:c.keys(e),g=0;g<f.length;g++){var h=e[f[g]];if(!h)break;h.obj.off(b,d,this)}return this};var p=function(a,b,d,e){if(a){var f,g=0,h=e.context,i=e.listeners;if(b||d||h){for(var j=b?[b]:c.keys(a);g<j.length;g++){b=j[g];var k=a[b];if(!k)break;for(var l=[],m=0;m<k.length;m++){var n=k[m];d&&d!==n.callback&&d!==n.callback._callback||h&&h!==n.context?l.push(n):(f=n.listening,f&&0===--f.count&&(delete i[f.id],delete f.listeningTo[f.objId]))}l.length?a[b]=l:delete a[b]}return a}for(var o=c.keys(i);g<o.length;g++)f=i[o[g]],delete i[f.id],delete f.listeningTo[f.objId]}};k.once=function(a,b,d){var e=m(q,{},a,b,c.bind(this.off,this));return"string"==typeof a&&null==d&&(b=void 0),this.on(e,b,d)},k.listenToOnce=function(a,b,d){var e=m(q,{},b,d,c.bind(this.stopListening,this,a));return this.listenTo(a,e)};var q=function(a,b,d,e){if(d){var f=a[b]=c.once(function(){e(b,f),d.apply(this,arguments)});f._callback=d}return a};k.trigger=function(a){if(!this._events)return this;for(var b=Math.max(0,arguments.length-1),c=Array(b),d=0;b>d;d++)c[d]=arguments[d+1];return m(r,this._events,a,void 0,c),this};var r=function(a,b,c,d){if(a){var e=a[b],f=a.all;e&&f&&(f=f.slice()),e&&s(e,d),f&&s(f,[b].concat(d))}return a},s=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}};k.bind=k.on,k.unbind=k.off,c.extend(b,k);var t=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId(this.cidPrefix),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{});var e=c.result(this,"defaults");d=c.defaults(c.extend({},e,d),e),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(t.prototype,k,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},matches:function(a){return!!c.iteratee(a,this)(this.attributes)},set:function(a,b,d){if(null==a)return this;var e;if("object"==typeof a?(e=a,d=b):(e={})[a]=b,d||(d={}),!this._validate(e,d))return!1;var f=d.unset,g=d.silent,h=[],i=this._changing;this._changing=!0,i||(this._previousAttributes=c.clone(this.attributes),this.changed={});var j=this.attributes,k=this.changed,l=this._previousAttributes;for(var m in e)b=e[m],c.isEqual(j[m],b)||h.push(m),c.isEqual(l[m],b)?delete k[m]:k[m]=b,f?delete j[m]:j[m]=b;if(this.idAttribute in e&&(this.id=this.get(this.idAttribute)),!g){h.length&&(this._pending=d);for(var n=0;n<h.length;n++)this.trigger("change:"+h[n],this,j[h[n]],d)}if(i)return this;if(!g)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b=this._changing?this._previousAttributes:this.attributes,d={};for(var e in a){var f=a[e];c.isEqual(b[e],f)||(d[e]=f)}return c.size(d)?d:!1},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=c.extend({parse:!0},a);var b=this,d=a.success;return a.success=function(c){var e=a.parse?b.parse(c,a):c;return b.set(e,a)?(d&&d.call(a.context,b,c,a),void b.trigger("sync",b,c,a)):!1},P(this,a),this.sync("read",this,a)},save:function(a,b,d){var e;null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0,parse:!0},d);var f=d.wait;if(e&&!f){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;var g=this,h=d.success,i=this.attributes;d.success=function(a){g.attributes=i;var b=d.parse?g.parse(a,d):a;return f&&(b=c.extend({},e,b)),b&&!g.set(b,d)?!1:(h&&h.call(d.context,g,a,d),void g.trigger("sync",g,a,d))},P(this,d),e&&f&&(this.attributes=c.extend({},i,e));var j=this.isNew()?"create":d.patch?"patch":"update";"patch"!==j||d.attrs||(d.attrs=e);var k=this.sync(j,this,d);return this.attributes=i,k},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=a.wait,f=function(){b.stopListening(),b.trigger("destroy",b,b.collection,a)};a.success=function(c){e&&f(),d&&d.call(a.context,b,c,a),b.isNew()||b.trigger("sync",b,c,a)};var g=!1;return this.isNew()?c.defer(a.success):(P(this,a),g=this.sync("delete",this,a)),e||f(),g},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||O();if(this.isNew())return a;var b=this.get(this.idAttribute);return a.replace(/[^\/]$/,"$&/")+encodeURIComponent(b)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend({},a,{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var u={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};h(t,u,"attributes");var v=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},w={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},y=function(a,b,c){c=Math.min(Math.max(c,0),a.length);var d,e=Array(a.length-c),f=b.length;for(d=0;d<e.length;d++)e[d]=a[d+c];for(d=0;f>d;d++)a[d+c]=b[d];for(d=0;d<e.length;d++)a[d+f+c]=e[d]};c.extend(v.prototype,k,{model:t,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,x))},remove:function(a,b){b=c.extend({},b);var d=!c.isArray(a);a=d?[a]:a.slice();var e=this._removeModels(a,b);return!b.silent&&e.length&&(b.changes={added:[],merged:[],removed:e},this.trigger("update",this,b)),d?e[0]:e},set:function(a,b){if(null!=a){b=c.extend({},w,b),b.parse&&!this._isModel(a)&&(a=this.parse(a,b)||[]);var d=!c.isArray(a);a=d?[a]:a.slice();var e=b.at;null!=e&&(e=+e),e>this.length&&(e=this.length),0>e&&(e+=this.length+1);var f,g,h=[],i=[],j=[],k=[],l={},m=b.add,n=b.merge,o=b.remove,p=!1,q=this.comparator&&null==e&&b.sort!==!1,r=c.isString(this.comparator)?this.comparator:null;for(g=0;g<a.length;g++){f=a[g];var s=this.get(f);if(s){if(n&&f!==s){var t=this._isModel(f)?f.attributes:f;b.parse&&(t=s.parse(t,b)),s.set(t,b),j.push(s),q&&!p&&(p=s.hasChanged(r))}l[s.cid]||(l[s.cid]=!0,h.push(s)),a[g]=s}else m&&(f=a[g]=this._prepareModel(f,b),f&&(i.push(f),this._addReference(f,b),l[f.cid]=!0,h.push(f)))}if(o){for(g=0;g<this.length;g++)f=this.models[g],l[f.cid]||k.push(f);k.length&&this._removeModels(k,b)}var u=!1,v=!q&&m&&o;if(h.length&&v?(u=this.length!==h.length||c.some(this.models,function(a,b){return a!==h[b]}),this.models.length=0,y(this.models,h,0),this.length=this.models.length):i.length&&(q&&(p=!0),y(this.models,i,null==e?this.length:e),this.length=this.models.length),p&&this.sort({silent:!0}),!b.silent){for(g=0;g<i.length;g++)null!=e&&(b.index=e+g),f=i[g],f.trigger("add",f,this,b);(p||u)&&this.trigger("sort",this,b),(i.length||k.length||j.length)&&(b.changes={added:i,removed:k,merged:j},this.trigger("update",this,b))}return d?a[0]:a}},reset:function(a,b){b=b?c.clone(b):{};for(var d=0;d<this.models.length;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a)},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a)},slice:function(){return f.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||this._byId[this.modelId(a.attributes||a)]||a.cid&&this._byId[a.cid]},has:function(a){return null!=this.get(a)},at:function(a){return 0>a&&(a+=this.length),this.models[a]},where:function(a,b){return this[b?"find":"filter"](a)},findWhere:function(a){return this.where(a,!0)},sort:function(a){var b=this.comparator;if(!b)throw new Error("Cannot sort a set without a comparator");a||(a={});var d=b.length;return c.isFunction(b)&&(b=c.bind(b,this)),1===d||c.isString(b)?this.models=this.sortBy(b):this.models.sort(b),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return this.map(a+"")},fetch:function(a){a=c.extend({parse:!0},a);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b.call(a.context,d,c,a),d.trigger("sync",d,c,a)},P(this,a),this.sync("read",this,a)},create:function(a,b){b=b?c.clone(b):{};var d=b.wait;if(a=this._prepareModel(a,b),!a)return!1;d||this.add(a,b);var e=this,f=b.success;return b.success=function(a,b,c){d&&e.add(a,c),f&&f.call(c.context,a,b,c)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(a){return a[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(this._isModel(a))return a.collection||(a.collection=this),a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_removeModels:function(a,b){for(var c=[],d=0;d<a.length;d++){var e=this.get(a[d]);if(e){var f=this.indexOf(e);this.models.splice(f,1),this.length--,delete this._byId[e.cid];var g=this.modelId(e.attributes);null!=g&&delete this._byId[g],b.silent||(b.index=f,e.trigger("remove",e,this,b)),c.push(e),this._removeReference(e,b)}}return c},_isModel:function(a){return a instanceof t},_addReference:function(a,b){this._byId[a.cid]=a;var c=this.modelId(a.attributes);null!=c&&(this._byId[c]=a),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){delete this._byId[a.cid];var c=this.modelId(a.attributes);null!=c&&delete this._byId[c],this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if(b){if(("add"===a||"remove"===a)&&c!==this)return;if("destroy"===a&&this.remove(b,d),"change"===a){var e=this.modelId(b.previousAttributes()),f=this.modelId(b.attributes);e!==f&&(null!=e&&delete this._byId[e],null!=f&&(this._byId[f]=b))}}this.trigger.apply(this,arguments)}});var z={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};h(v,z,"models");var A=b.View=function(a){this.cid=c.uniqueId("view"),c.extend(this,c.pick(a,C)),this._ensureElement(),this.initialize.apply(this,arguments)},B=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];c.extend(A.prototype,k,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(a){return this.undelegateEvents(),this._setElement(a),this.delegateEvents(),this},_setElement:function(a){this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0]},delegateEvents:function(a){if(a||(a=c.result(this,"events")),!a)return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[d]),d){var e=b.match(B);this.delegate(e[1],e[2],c.bind(d,this))}}return this},delegate:function(a,b,c){return this.$el.on(a+".delegateEvents"+this.cid,b,c),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(a,b,c){return this.$el.off(a+".delegateEvents"+this.cid,b,c),this},_createElement:function(a){return document.createElement(a)},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"));else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className")),this.setElement(this._createElement(c.result(this,"tagName"))),this._setAttributes(a)}},_setAttributes:function(a){this.$el.attr(a)}}),b.sync=function(a,d,e){var f=D[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||O()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1);var i=e.error;e.error=function(a,b,c){e.textStatus=b,e.errorThrown=c,i&&i.call(e.context,a,b,c)};var j=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,j,e),j};var D={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var E=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},F=/\((.*?)\)/g,G=/(\(\?)?:\w+/g,H=/\*\w+/g,I=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(E.prototype,k,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g,d)!==!1&&(f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g))}),this},execute:function(a,b,c){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(I,"\\$&").replace(F,"(?:$1)?").replace(G,function(a,b){return b?a:"([^/?]+)"}).replace(H,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var J=b.History=function(){this.handlers=[],this.checkUrl=c.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},K=/^[#\/]|\s+$/g,L=/^\/+|\/+$/g,M=/#.*$/;J.started=!1,c.extend(J.prototype,k,{interval:50,atRoot:function(){var a=this.location.pathname.replace(/[^\/]$/,"$&/");return a===this.root&&!this.getSearch()},matchRoot:function(){var a=this.decodeFragment(this.location.pathname),b=a.slice(0,this.root.length-1)+"/";return b===this.root},decodeFragment:function(a){return decodeURI(a.replace(/%25/g,"%2525"))},getSearch:function(){var a=this.location.href.replace(/#.*/,"").match(/\?.+/);return a?a[0]:""},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getPath:function(){var a=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===a.charAt(0)?a.slice(1):a},getFragment:function(a){return null==a&&(a=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),a.replace(K,"")},start:function(a){if(J.started)throw new Error("Backbone.history has already been started");if(J.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(L,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var b=this.root.slice(0,-1)||"/";return this.location.replace(b+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var d=document.body,e=d.insertBefore(this.iframe,d.firstChild).contentWindow;e.document.open(),e.document.close(),e.location.hash="#"+this.fragment}var f=window.addEventListener||function(a,b){return attachEvent("on"+a,b)};return this._usePushState?f("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?f("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var a=window.removeEventListener||function(a,b){return detachEvent("on"+a,b)};this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&a("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),J.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getHash(this.iframe.contentWindow)),b===this.fragment?!1:(this.iframe&&this.navigate(b),void this.loadUrl())},loadUrl:function(a){return this.matchRoot()?(a=this.fragment=this.getFragment(a),c.some(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0})):!1},navigate:function(a,b){if(!J.started)return!1;b&&b!==!0||(b={trigger:!!b}),a=this.getFragment(a||"");var c=this.root;(""===a||"?"===a.charAt(0))&&(c=c.slice(0,-1)||"/");var d=c+a;if(a=this.decodeFragment(a.replace(M,"")),this.fragment!==a){if(this.fragment=a,this._usePushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,d);else{if(!this._wantsHashChange)return this.location.assign(d);if(this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getHash(this.iframe.contentWindow)){var e=this.iframe.contentWindow;b.replace||(e.document.open(),e.document.close()),this._updateHash(e.location,a,b.replace)}}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new J;var N=function(a,b){var d,e=this;return d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b),d.prototype=c.create(e.prototype,a),d.prototype.constructor=d,d.__super__=e.prototype,d};t.extend=v.extend=E.extend=A.extend=J.extend=N;var O=function(){throw new Error('A "url" property or function must be specified')},P=function(a,b){var c=b.error;b.error=function(d){c&&c.call(b.context,a,d,b),a.trigger("error",a,d,b)}};return b}),define("bam.url/url",[],function(){function a(a){for(var b=["constructor","hash","host","hostname","href","origin","pathname","port","protocol","search"],c={},d=0,e=b.length;e>d;d++)c[b[d]]=a?a[b[d]]:window.location[b[d]];return c.toString=function(){return this.href},c}function b(a){var b;return typeof a===e&&(b=isNaN(a)?a in g?g[a]:a:parseFloat(a)),b}var c={},d=new RegExp("([^&\\?]+?)=([^&]*)","ig"),e="string",f=decodeURIComponent,g={"true":!0,"false":!1,"null":null};return c.Location=function(b){b=a(b);var d=b.search||"",e=c.parseQueryParameters(d);return b.getParam=function(a){return a+""in e?e[a]:null},b.getParams=function(a){return c.parseQueryParameters(d,a)},b.isSecure=function(){return/^https/i.test(b.protocol)},b.getDomain=function(){var a=b.hostname.split(".");return a[a.length-2]},b},c.parseQueryParameters=function(a,c){a=a||window.location.search,c=void 0===c?!1:c;var g,h,i={};return typeof a===e&&f(a).replace(d,function(){g=arguments[1],h=c?b(f(arguments[2])):f(arguments[2]),g in i?Array.isArray(i[g])?i[g].push(h):i[g]=[i[g],h]:i[g]=h}),i},c.parseEncodedQueryParameters=function(a,c){a=a||window.location.search,c=void 0===c?!1:c;var g,h,i={};return typeof a===e&&a.replace(d,function(){g=arguments[1],h=c?b(f(arguments[2])):f(arguments[2]),g in i?Array.isArray(i[g])?i[g].push(h):i[g]=[i[g],h]:i[g]=h}),i},c.parseFragmentIdentifiers=function(a,b){a=a||window.location.hash;var d=a.substring(a.indexOf("#")+1);return c.parseQueryParameters(d,b)},c}),define("media-app-core/utils/parameters",["bam.url/url"],function(a){function b(b){var c=a.Location();return c.getParam(b)}return{get:b}}),function(a,b){"function"==typeof define&&define.amd?define("pageMeta/pageMeta",[],b):"object"==typeof exports?module.exports=b():a.bamPageMeta=b()}(this,function(){"use strict";var a=document.querySelectorAll("meta"),b=Array.prototype.slice.call(a),c={};return b.forEach(function(a,b){var d=a.getAttribute("name")||a.getAttribute("property");if(d){var e="bam-override-"+d+"=",f=window.location.href.indexOf(e);if(-1!==f){var g=window.location.href.substr(f+e.length),h=g.indexOf("&");-1!==h&&(g=g.substr(0,h)),c[d]=g}else c[d]=a.getAttribute("content");switch(a.getAttribute("data-type")){case"json":c[d]=JSON.parse(c[d])}}}),c}),function(a,b){"function"!=typeof define||!define.amd||"undefined"!=typeof bam&&"function"==typeof bam.define?a.deviceBootstrap=b():define("device/device",[],b)}(this,function(){function a(a,b){return a&&b?a[b]:a}function b(a){var b=a.split(w).slice(0,3);return a&&b.length<2&&b.push(0),b.join(".")}function c(a){return a=a||navigator.userAgent,D[a]?D[a]:this instanceof c?(D[a]=this,this.userAgent=a,this.is={},this.platform=this.getPlatform(),this.platformVersion=this.getPlatformVersion(),this.browser=this.getBrowser(),this.browserVersion=this.getBrowserVersion(),void(this.formFactor=this.getFormFactor())):new c(a)}var d="(",e=")",f="i",g="|",h="desktop",i="version",j="",k=function(a,b){
return new RegExp(a,b||f)},l="iP(?:hone|ad|od)",m="(?:BlackBerry|BB10| RIM )",n="Android",o="Windows",p="WPDesktop",q=o+" Phone",r="Trident(?:.*?Touch(?:.*?Mobile))",s="Linux(?!.*Android)",t="Macintosh",u="CrOS",v=d+"?:"+[t,o,s,u].join(g)+e,w=/[\._]/,x={windowsphone:k(r+g+q+g+p),windows:k(o),ios:k(l),blackberry:k(m),android:k(n),linux:k(s),macintosh:k(t),chromebook:k(u)},y={desktop:/(?:Windows NT(?!.*WPDesktop)(?!.*Xbox))/i,tablet:k(d+["Tablet|iPad","\\sNT.*?"+r,n+"(?!.*Mobi)","silk",m+".*?Tablet","xbox"].join(g)+e),phone:k(d+["Mobi|Mobile","WPDesktop",l,r,m].join(g)+e)},z={tablet:k(d+["Tablet|iPad","\\sNT.*?"+r,n+"(?!.*Mobi)","silk",m+".*?Tablet"].join(g)+e),phone:k(d+["Mobi|Mobile",l,r,m].join(g)+e),desktop:k(v)},A={msie:/msie|iemobile|trident/i,edge:/edge/i,android:/android(?!.+(?:chrome|silk))/i,chrome:/chrome|crios/i,firefox:/firefox/i,opera:/opera(?!.*?mini)\//i,operamini:/opera mini/i,silk:/silk/i,safari:/safari/i},B={webkit:/AppleWebKit/i,gecko:/gecko\//i,trident:/trident/i,edge:/Edge/i},C={desktop:"desktop",other:h,phone:"phone",tablet:"tablet"},D={};return c.prototype={getPlatform:function(){return this.test(x)||h},getPlatformVersion:function(){return b(this.match(k("(?:"+(this.is.blackberry?i:this.platform)+"|"+q+"|OS)[^\\d]+([\\d\\.\\_]+)","ig"),1))},getBrowser:function(){return this.test(B),this.test(A)||h},getFormFactor:function(){var a="";return a=this.is.msie?y:z,C[this.test(a)]||C.other},getBrowserVersion:function(){var a=this.browser,c="[\\/\\s]";return this.is.chrome&&this.is.ios?a="crios":this.is.opera?a=i:this.is.msie&&(a=a+g+"IEMobile"+g+"rv",c="[\\/\\:\\s]"),b(this.match(k("(?:"+a+g+i+")"+c+"([\\d\\.]+)","i"),1))},match:function(b,c){return a(b.exec(this.userAgent),c)||j},test:function(a){var b,c,d,e=this.userAgent;for(b in a)c=a[b].test(e),this.is[b]=this.is[b]||c&&!d,c&&!d&&(d=b);return d}},c}),define("media-app-core/models/applicationState",["underscore","backbone","media-app-core/utils/parameters","pageMeta/pageMeta","device/device"],function(a,b,c,d,e){var f=b.Model.extend({defaults:{env:null,property:null,mediaConfig:null,eventManager:null,device:null,view:null,entitled:!1,loggedIn:!1,mediaItem:null,mediaLayout:null,playerResolutionCssModifier:"16x9"},initialize:function(){this.setEnv(),this.set("device",new e)},setEnv:function(){var a=c.get("env");a||(a=d.env),this.set("env",a)}});return f.prototype=a.extend(f.prototype,{CHANGE_MEDIA_LAYOUT:"change:mediaLayout"}),new f}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define("moment/moment",b):a.moment=b()}(this,function(){"use strict";function a(){return Uc.apply(null,arguments)}function b(a){Uc=a}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function h(a,b,c,d){return Da(a,b,c,d,!0).utc()}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function j(a){return null==a._pf&&(a._pf=i()),a._pf}function k(a){if(null==a._isValid){var b=j(a);a._isValid=!(isNaN(a._d.getTime())||!(b.overflow<0)||b.empty||b.invalidMonth||b.invalidWeekday||b.nullInput||b.invalidFormat||b.userInvalidated),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function l(a){var b=h(NaN);return null!=a?g(j(b),a):j(b).userInvalidated=!0,b}function m(a){return void 0===a}function n(a,b){var c,d,e;if(m(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),m(b._i)||(a._i=b._i),m(b._f)||(a._f=b._f),m(b._l)||(a._l=b._l),m(b._strict)||(a._strict=b._strict),m(b._tzm)||(a._tzm=b._tzm),m(b._isUTC)||(a._isUTC=b._isUTC),m(b._offset)||(a._offset=b._offset),m(b._pf)||(a._pf=j(b)),m(b._locale)||(a._locale=b._locale),Wc.length>0)for(c in Wc)d=Wc[c],e=b[d],m(e)||(a[d]=e);return a}function o(b){n(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),Xc===!1&&(Xc=!0,a.updateOffset(this),Xc=!1)}function p(a){return a instanceof o||null!=a&&null!=a._isAMomentObject}function q(a){return 0>a?Math.ceil(a):Math.floor(a)}function r(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=q(b)),c}function s(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&r(a[d])!==r(b[d]))&&g++;return g+f}function t(){}function u(a){return a?a.toLowerCase().replace("_","-"):a}function v(a){for(var b,c,d,e,f=0;f<a.length;){for(e=u(a[f]).split("-"),b=e.length,c=u(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=w(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&s(e,c,!0)>=b-1)break;b--}f++}return null}function w(a){var b=null;if(!Yc[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=Vc._abbr,require("./locale/"+a),x(b)}catch(c){}return Yc[a]}function x(a,b){var c;return a&&(c=m(b)?z(a):y(a,b),c&&(Vc=c)),Vc._abbr}function y(a,b){return null!==b?(b.abbr=a,Yc[a]=Yc[a]||new t,Yc[a].set(b),x(a),Yc[a]):(delete Yc[a],null)}function z(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Vc;if(!c(a)){if(b=w(a))return b;a=[a]}return v(a)}function A(a,b){var c=a.toLowerCase();Zc[c]=Zc[c+"s"]=Zc[b]=a}function B(a){return"string"==typeof a?Zc[a]||Zc[a.toLowerCase()]:void 0}function C(a){var b,c,d={};for(c in a)f(a,c)&&(b=B(c),b&&(d[b]=a[c]));return d}function D(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function E(b,c){return function(d){return null!=d?(G(this,b,d),a.updateOffset(this,c),this):F(this,b)}}function F(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function G(a,b,c){a.isValid()&&a._d["set"+(a._isUTC?"UTC":"")+b](c)}function H(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=B(a),D(this[a]))return this[a](b);return this}function I(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function J(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(bd[a]=e),b&&(bd[b[0]]=function(){return I(e.apply(this,arguments),b[1],b[2])}),c&&(bd[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function K(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function L(a){var b,c,d=a.match($c);for(b=0,c=d.length;c>b;b++)bd[d[b]]?d[b]=bd[d[b]]:d[b]=K(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function M(a,b){return a.isValid()?(b=N(b,a.localeData()),ad[b]=ad[b]||L(b),ad[b](a)):a.localeData().invalidDate()}function N(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(_c.lastIndex=0;d>=0&&_c.test(a);)a=a.replace(_c,c),_c.lastIndex=0,d-=1;return a}function O(a,b,c){td[a]=D(b)?b:function(a,d){return a&&c?c:b}}function P(a,b){return f(td,a)?td[a](b._strict,b._locale):new RegExp(Q(a))}function Q(a){return R(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function R(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function S(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=r(a)}),c=0;c<a.length;c++)ud[a[c]]=d}function T(a,b){S(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function U(a,b,c){null!=b&&f(ud,a)&&ud[a](b,c._a,c,a)}function V(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function W(a,b){return c(this._months)?this._months[a.month()]:this._months[Ed.test(b)?"format":"standalone"][a.month()]}function X(a,b){return c(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[Ed.test(b)?"format":"standalone"][a.month()]}function Y(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=h([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function Z(a,b){var c;return a.isValid()?"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),V(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a):a}function $(b){return null!=b?(Z(this,b),a.updateOffset(this,!0),this):F(this,"Month")}function _(){return V(this.year(),this.month())}function aa(a){return this._monthsParseExact?(f(this,"_monthsRegex")||ca.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex}function ba(a){return this._monthsParseExact?(f(this,"_monthsRegex")||ca.call(this),a?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex}function ca(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;12>b;b++)c=h([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(d.sort(a),e.sort(a),f.sort(a),b=0;12>b;b++)d[b]=R(d[b]),e[b]=R(e[b]),f[b]=R(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")$","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")$","i")}function da(a){var b,c=a._a;return c&&-2===j(a).overflow&&(b=c[wd]<0||c[wd]>11?wd:c[xd]<1||c[xd]>V(c[vd],c[wd])?xd:c[yd]<0||c[yd]>24||24===c[yd]&&(0!==c[zd]||0!==c[Ad]||0!==c[Bd])?yd:c[zd]<0||c[zd]>59?zd:c[Ad]<0||c[Ad]>59?Ad:c[Bd]<0||c[Bd]>999?Bd:-1,j(a)._overflowDayOfYear&&(vd>b||b>xd)&&(b=xd),j(a)._overflowWeeks&&-1===b&&(b=Cd),j(a)._overflowWeekday&&-1===b&&(b=Dd),j(a).overflow=b),a}function ea(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function fa(a,b){var c=!0;return g(function(){return c&&(ea(a+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),c=!1),b.apply(this,arguments)},b)}function ga(a,b){Jd[a]||(ea(b),Jd[a]=!0)}function ha(a){var b,c,d,e,f,g,h=a._i,i=Kd.exec(h)||Ld.exec(h);if(i){for(j(a).iso=!0,b=0,c=Nd.length;c>b;b++)if(Nd[b][1].exec(i[1])){e=Nd[b][0],d=Nd[b][2]!==!1;break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=Od.length;c>b;b++)if(Od[b][1].exec(i[3])){f=(i[2]||" ")+Od[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!Md.exec(i[4]))return void(a._isValid=!1);g="Z"}a._f=e+(f||"")+(g||""),wa(a)}else a._isValid=!1}function ia(b){var c=Pd.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(ha(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function ja(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 100>a&&a>=0&&isFinite(h.getFullYear())&&h.setFullYear(a),h}function ka(a){var b=new Date(Date.UTC.apply(null,arguments));return 100>a&&a>=0&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}function la(a){return ma(a)?366:365}function ma(a){return a%4===0&&a%100!==0||a%400===0}function na(){return ma(this.year())}function oa(a,b,c){var d=7+b-c,e=(7+ka(a,0,d).getUTCDay()-b)%7;return-e+d-1}function pa(a,b,c,d,e){var f,g,h=(7+c-d)%7,i=oa(a,d,e),j=1+7*(b-1)+h+i;return 0>=j?(f=a-1,g=la(f)+j):j>la(a)?(f=a+1,g=j-la(a)):(f=a,g=j),{year:f,dayOfYear:g}}function qa(a,b,c){var d,e,f=oa(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;return 1>g?(e=a.year()-1,d=g+ra(e,b,c)):g>ra(a.year(),b,c)?(d=g-ra(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function ra(a,b,c){var d=oa(a,b,c),e=oa(a+1,b,c);return(la(a)-d+e)/7}function sa(a,b,c){return null!=a?a:null!=b?b:c}function ta(b){var c=new Date(a.now());return b._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}function ua(a){var b,c,d,e,f=[];if(!a._d){for(d=ta(a),a._w&&null==a._a[xd]&&null==a._a[wd]&&va(a),a._dayOfYear&&(e=sa(a._a[vd],d[vd]),a._dayOfYear>la(e)&&(j(a)._overflowDayOfYear=!0),c=ka(e,0,a._dayOfYear),a._a[wd]=c.getUTCMonth(),a._a[xd]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[yd]&&0===a._a[zd]&&0===a._a[Ad]&&0===a._a[Bd]&&(a._nextDay=!0,a._a[yd]=0),a._d=(a._useUTC?ka:ja).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[yd]=24)}}function va(a){var b,c,d,e,f,g,h,i;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=sa(b.GG,a._a[vd],qa(Ea(),1,4).year),d=sa(b.W,1),e=sa(b.E,1),(1>e||e>7)&&(i=!0)):(f=a._locale._week.dow,g=a._locale._week.doy,c=sa(b.gg,a._a[vd],qa(Ea(),f,g).year),d=sa(b.w,1),null!=b.d?(e=b.d,(0>e||e>6)&&(i=!0)):null!=b.e?(e=b.e+f,(b.e<0||b.e>6)&&(i=!0)):e=f),1>d||d>ra(c,f,g)?j(a)._overflowWeeks=!0:null!=i?j(a)._overflowWeekday=!0:(h=pa(c,d,e,f,g),a._a[vd]=h.year,a._dayOfYear=h.dayOfYear)}function wa(b){if(b._f===a.ISO_8601)return void ha(b);b._a=[],j(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=N(b._f,b._locale).match($c)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(P(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&j(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),bd[f]?(d?j(b).empty=!1:j(b).unusedTokens.push(f),U(f,d,b)):b._strict&&!d&&j(b).unusedTokens.push(f);j(b).charsLeftOver=i-k,h.length>0&&j(b).unusedInput.push(h),j(b).bigHour===!0&&b._a[yd]<=12&&b._a[yd]>0&&(j(b).bigHour=void 0),b._a[yd]=xa(b._locale,b._a[yd],b._meridiem),ua(b),da(b)}function xa(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function ya(a){var b,c,d,e,f;if(0===a._f.length)return j(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=n({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],wa(b),k(b)&&(f+=j(b).charsLeftOver,f+=10*j(b).unusedTokens.length,j(b).score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function za(a){if(!a._d){var b=C(a._i);a._a=e([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),ua(a)}}function Aa(a){var b=new o(da(Ba(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function Ba(a){var b=a._i,e=a._f;return a._locale=a._locale||z(a._l),null===b||void 0===e&&""===b?l({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),p(b)?new o(da(b)):(c(e)?ya(a):e?wa(a):d(b)?a._d=b:Ca(a),k(a)||(a._d=null),a))}function Ca(b){var f=b._i;void 0===f?b._d=new Date(a.now()):d(f)?b._d=new Date(+f):"string"==typeof f?ia(b):c(f)?(b._a=e(f.slice(0),function(a){return parseInt(a,10)}),ua(b)):"object"==typeof f?za(b):"number"==typeof f?b._d=new Date(f):a.createFromInputFallback(b)}function Da(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,Aa(f)}function Ea(a,b,c,d){return Da(a,b,c,d,!1)}function Fa(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return Ea();for(d=b[0],e=1;e<b.length;++e)(!b[e].isValid()||b[e][a](d))&&(d=b[e]);return d}function Ga(){var a=[].slice.call(arguments,0);return Fa("isBefore",a)}function Ha(){var a=[].slice.call(arguments,0);return Fa("isAfter",a)}function Ia(a){var b=C(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=z(),this._bubble()}function Ja(a){return a instanceof Ia}function Ka(a,b){J(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+I(~~(a/60),2)+b+I(~~a%60,2)})}function La(a,b){var c=(b||"").match(a)||[],d=c[c.length-1]||[],e=(d+"").match(Ud)||["-",0,0],f=+(60*e[1])+r(e[2]);return"+"===e[0]?f:-f}function Ma(b,c){var e,f;return c._isUTC?(e=c.clone(),f=(p(b)||d(b)?+b:+Ea(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):Ea(b).local()}function Na(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Oa(b,c){var d,e=this._offset||0;return this.isValid()?null!=b?("string"==typeof b?b=La(qd,b):Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Na(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?cb(this,Za(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Na(this):null!=b?this:NaN}function Pa(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Qa(a){return this.utcOffset(0,a)}function Ra(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Na(this),"m")),this}function Sa(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(La(pd,this._i)),this}function Ta(a){return this.isValid()?(a=a?Ea(a).utcOffset():0,(this.utcOffset()-a)%60===0):!1}function Ua(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Va(){if(!m(this._isDSTShifted))return this._isDSTShifted;var a={};if(n(a,this),a=Ba(a),a._a){var b=a._isUTC?h(a._a):Ea(a._a);this._isDSTShifted=this.isValid()&&s(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Wa(){return this.isValid()?!this._isUTC:!1}function Xa(){return this.isValid()?this._isUTC:!1}function Ya(){return this.isValid()?this._isUTC&&0===this._offset:!1}function Za(a,b){var c,d,e,g=a,h=null;return Ja(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=Vd.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:r(h[xd])*c,h:r(h[yd])*c,m:r(h[zd])*c,s:r(h[Ad])*c,ms:r(h[Bd])*c}):(h=Wd.exec(a))?(c="-"===h[1]?-1:1,g={y:$a(h[2],c),M:$a(h[3],c),d:$a(h[4],c),h:$a(h[5],c),m:$a(h[6],c),s:$a(h[7],c),w:$a(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=ab(Ea(g.from),Ea(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new Ia(g),Ja(a)&&f(a,"_locale")&&(d._locale=a._locale),d}function $a(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function _a(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function ab(a,b){var c;return a.isValid()&&b.isValid()?(b=Ma(b,a),a.isBefore(b)?c=_a(a,b):(c=_a(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}function bb(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(ga(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Za(c,d),cb(this,e,a),this}}function cb(b,c,d,e){var f=c._milliseconds,g=c._days,h=c._months;b.isValid()&&(e=null==e?!0:e,f&&b._d.setTime(+b._d+f*d),g&&G(b,"Date",F(b,"Date")+g*d),h&&Z(b,F(b,"Month")+h*d),e&&a.updateOffset(b,g||h))}function db(a,b){var c=a||Ea(),d=Ma(c,this).startOf("day"),e=this.diff(d,"days",!0),f=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse",g=b&&(D(b[f])?b[f]():b[f]);return this.format(g||this.localeData().calendar(f,this,Ea(c)))}function eb(){return new o(this)}function fb(a,b){var c=p(a)?a:Ea(a);return this.isValid()&&c.isValid()?(b=B(m(b)?"millisecond":b),"millisecond"===b?+this>+c:+c<+this.clone().startOf(b)):!1}function gb(a,b){var c=p(a)?a:Ea(a);return this.isValid()&&c.isValid()?(b=B(m(b)?"millisecond":b),"millisecond"===b?+c>+this:+this.clone().endOf(b)<+c):!1}function hb(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function ib(a,b){var c,d=p(a)?a:Ea(a);return this.isValid()&&d.isValid()?(b=B(b||"millisecond"),"millisecond"===b?+this===+d:(c=+d,+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))):!1}function jb(a,b){return this.isSame(a,b)||this.isAfter(a,b)}function kb(a,b){return this.isSame(a,b)||this.isBefore(a,b)}function lb(a,b,c){var d,e,f,g;return this.isValid()?(d=Ma(a,this),d.isValid()?(e=6e4*(d.utcOffset()-this.utcOffset()),b=B(b),"year"===b||"month"===b||"quarter"===b?(g=mb(this,d),"quarter"===b?g/=3:"year"===b&&(g/=12)):(f=this-d,g="second"===b?f/1e3:"minute"===b?f/6e4:"hour"===b?f/36e5:"day"===b?(f-e)/864e5:"week"===b?(f-e)/6048e5:f),c?g:q(g)):NaN):NaN}function mb(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function nb(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ob(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?D(Date.prototype.toISOString)?this.toDate().toISOString():M(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):M(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function pb(b){var c=M(this,b||a.defaultFormat);return this.localeData().postformat(c)}function qb(a,b){return this.isValid()&&(p(a)&&a.isValid()||Ea(a).isValid())?Za({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function rb(a){return this.from(Ea(),a)}function sb(a,b){return this.isValid()&&(p(a)&&a.isValid()||Ea(a).isValid())?Za({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function tb(a){return this.to(Ea(),a)}function ub(a){var b;return void 0===a?this._locale._abbr:(b=z(a),null!=b&&(this._locale=b),this)}function vb(){return this._locale}function wb(a){switch(a=B(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function xb(a){return a=B(a),void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")}function yb(){return+this._d-6e4*(this._offset||0)}function zb(){return Math.floor(+this/1e3)}function Ab(){return this._offset?new Date(+this):this._d}function Bb(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function Cb(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function Db(){return this.isValid()?this.toISOString():"null"}function Eb(){return k(this)}function Fb(){return g({},j(this))}function Gb(){return j(this).overflow}function Hb(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ib(a,b){J(0,[a,a.length],0,b)}function Jb(a){return Nb.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Kb(a){return Nb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)}function Lb(){return ra(this.year(),1,4)}function Mb(){var a=this.localeData()._week;return ra(this.year(),a.dow,a.doy)}function Nb(a,b,c,d,e){var f;return null==a?qa(this,d,e).year:(f=ra(a,d,e),b>f&&(b=f),Ob.call(this,a,b,c,d,e))}function Ob(a,b,c,d,e){var f=pa(a,b,c,d,e),g=ka(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}function Pb(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Qb(a){return qa(a,this._week.dow,this._week.doy).week}function Rb(){return this._week.dow}function Sb(){return this._week.doy}function Tb(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function Ub(a){var b=qa(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function Vb(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Wb(a,b){return c(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]}function Xb(a){return this._weekdaysShort[a.day()]}function Yb(a){return this._weekdaysMin[a.day()]}function Zb(a,b,c){var d,e,f;for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;7>d;d++){if(e=Ea([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a))return d;if(!c&&this._weekdaysParse[d].test(a))return d}}function $b(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Vb(a,this.localeData()),this.add(a-b,"d")):b}function _b(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function ac(a){return this.isValid()?null==a?this.day()||7:this.day(this.day()%7?a:a-7):null!=a?this:NaN}function bc(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function cc(){return this.hours()%12||12}function dc(a,b){J(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function ec(a,b){return b._meridiemParse}function fc(a){return"p"===(a+"").toLowerCase().charAt(0)}function gc(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function hc(a,b){b[Bd]=r(1e3*("0."+a))}function ic(){return this._isUTC?"UTC":""}function jc(){return this._isUTC?"Coordinated Universal Time":""}function kc(a){return Ea(1e3*a)}function lc(){return Ea.apply(null,arguments).parseZone()}function mc(a,b,c){var d=this._calendar[a];return D(d)?d.call(b,c):d}function nc(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function oc(){return this._invalidDate}function pc(a){return this._ordinal.replace("%d",a)}function qc(a){return a}function rc(a,b,c,d){var e=this._relativeTime[c];return D(e)?e(a,b,c,d):e.replace(/%d/i,a)}function sc(a,b){var c=this._relativeTime[a>0?"future":"past"];return D(c)?c(b):c.replace(/%s/i,b)}function tc(a){var b,c;for(c in a)b=a[c],D(b)?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function uc(a,b,c,d){var e=z(),f=h().set(d,b);return e[c](f,a)}function vc(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return uc(a,b,c,e);var f,g=[];for(f=0;d>f;f++)g[f]=uc(a,f,c,e);return g}function wc(a,b){return vc(a,b,"months",12,"month")}function xc(a,b){return vc(a,b,"monthsShort",12,"month")}function yc(a,b){return vc(a,b,"weekdays",7,"day")}function zc(a,b){return vc(a,b,"weekdaysShort",7,"day")}function Ac(a,b){return vc(a,b,"weekdaysMin",7,"day")}function Bc(){var a=this._data;return this._milliseconds=se(this._milliseconds),this._days=se(this._days),this._months=se(this._months),a.milliseconds=se(a.milliseconds),a.seconds=se(a.seconds),a.minutes=se(a.minutes),a.hours=se(a.hours),a.months=se(a.months),a.years=se(a.years),this}function Cc(a,b,c,d){var e=Za(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function Dc(a,b){return Cc(this,a,b,1)}function Ec(a,b){return Cc(this,a,b,-1)}function Fc(a){return 0>a?Math.floor(a):Math.ceil(a)}function Gc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*Fc(Ic(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=q(f/1e3),i.seconds=a%60,b=q(a/60),i.minutes=b%60,c=q(b/60),i.hours=c%24,g+=q(c/24),e=q(Hc(g)),h+=e,g-=Fc(Ic(e)),d=q(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function Hc(a){return 4800*a/146097}function Ic(a){return 146097*a/4800}function Jc(a){var b,c,d=this._milliseconds;if(a=B(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+Hc(b),"month"===a?c:c/12;switch(b=this._days+Math.round(Ic(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function Kc(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*r(this._months/12)}function Lc(a){return function(){return this.as(a)}}function Mc(a){return a=B(a),this[a+"s"]()}function Nc(a){return function(){return this._data[a]}}function Oc(){return q(this.days()/7)}function Pc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Qc(a,b,c){var d=Za(a).abs(),e=Ie(d.as("s")),f=Ie(d.as("m")),g=Ie(d.as("h")),h=Ie(d.as("d")),i=Ie(d.as("M")),j=Ie(d.as("y")),k=e<Je.s&&["s",e]||1>=f&&["m"]||f<Je.m&&["mm",f]||1>=g&&["h"]||g<Je.h&&["hh",g]||1>=h&&["d"]||h<Je.d&&["dd",h]||1>=i&&["M"]||i<Je.M&&["MM",i]||1>=j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,Pc.apply(null,k)}function Rc(a,b){return void 0===Je[a]?!1:void 0===b?Je[a]:(Je[a]=b,!0)}function Sc(a){var b=this.localeData(),c=Qc(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function Tc(){var a,b,c,d=Ke(this._milliseconds)/1e3,e=Ke(this._days),f=Ke(this._months);a=q(d/60),b=q(a/60),d%=60,a%=60,c=q(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var Uc,Vc,Wc=a.momentProperties=[],Xc=!1,Yc={},Zc={},$c=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,_c=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ad={},bd={},cd=/\d/,dd=/\d\d/,ed=/\d{3}/,fd=/\d{4}/,gd=/[+-]?\d{6}/,hd=/\d\d?/,id=/\d\d\d\d?/,jd=/\d\d\d\d\d\d?/,kd=/\d{1,3}/,ld=/\d{1,4}/,md=/[+-]?\d{1,6}/,nd=/\d+/,od=/[+-]?\d+/,pd=/Z|[+-]\d\d:?\d\d/gi,qd=/Z|[+-]\d\d(?::?\d\d)?/gi,rd=/[+-]?\d+(\.\d{1,3})?/,sd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,td={},ud={},vd=0,wd=1,xd=2,yd=3,zd=4,Ad=5,Bd=6,Cd=7,Dd=8;J("M",["MM",2],"Mo",function(){return this.month()+1}),J("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),J("MMMM",0,0,function(a){return this.localeData().months(this,a)}),A("month","M"),O("M",hd),O("MM",hd,dd),O("MMM",function(a,b){return b.monthsShortRegex(a)}),O("MMMM",function(a,b){return b.monthsRegex(a)}),S(["M","MM"],function(a,b){b[wd]=r(a)-1}),S(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[wd]=e:j(c).invalidMonth=a});var Ed=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Fd="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Gd="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Hd=sd,Id=sd,Jd={};a.suppressDeprecationWarnings=!1;var Kd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Ld=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Md=/Z|[+-]\d\d(?::?\d\d)?/,Nd=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Od=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Pd=/^\/?Date\((\-?\d+)/i;
a.createFromInputFallback=fa("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),J("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a}),J(0,["YY",2],0,function(){return this.year()%100}),J(0,["YYYY",4],0,"year"),J(0,["YYYYY",5],0,"year"),J(0,["YYYYYY",6,!0],0,"year"),A("year","y"),O("Y",od),O("YY",hd,dd),O("YYYY",ld,fd),O("YYYYY",md,gd),O("YYYYYY",md,gd),S(["YYYYY","YYYYYY"],vd),S("YYYY",function(b,c){c[vd]=2===b.length?a.parseTwoDigitYear(b):r(b)}),S("YY",function(b,c){c[vd]=a.parseTwoDigitYear(b)}),S("Y",function(a,b){b[vd]=parseInt(a,10)}),a.parseTwoDigitYear=function(a){return r(a)+(r(a)>68?1900:2e3)};var Qd=E("FullYear",!1);a.ISO_8601=function(){};var Rd=fa("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Ea.apply(null,arguments);return this.isValid()&&a.isValid()?this>a?this:a:l()}),Sd=fa("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Ea.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:l()}),Td=function(){return Date.now?Date.now():+new Date};Ka("Z",":"),Ka("ZZ",""),O("Z",qd),O("ZZ",qd),S(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=La(qd,a)});var Ud=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var Vd=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,Wd=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Za.fn=Ia.prototype;var Xd=bb(1,"add"),Yd=bb(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Zd=fa("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});J(0,["gg",2],0,function(){return this.weekYear()%100}),J(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ib("gggg","weekYear"),Ib("ggggg","weekYear"),Ib("GGGG","isoWeekYear"),Ib("GGGGG","isoWeekYear"),A("weekYear","gg"),A("isoWeekYear","GG"),O("G",od),O("g",od),O("GG",hd,dd),O("gg",hd,dd),O("GGGG",ld,fd),O("gggg",ld,fd),O("GGGGG",md,gd),O("ggggg",md,gd),T(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=r(a)}),T(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),J("Q",0,"Qo","quarter"),A("quarter","Q"),O("Q",cd),S("Q",function(a,b){b[wd]=3*(r(a)-1)}),J("w",["ww",2],"wo","week"),J("W",["WW",2],"Wo","isoWeek"),A("week","w"),A("isoWeek","W"),O("w",hd),O("ww",hd,dd),O("W",hd),O("WW",hd,dd),T(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=r(a)});var $d={dow:0,doy:6};J("D",["DD",2],"Do","date"),A("date","D"),O("D",hd),O("DD",hd,dd),O("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),S(["D","DD"],xd),S("Do",function(a,b){b[xd]=r(a.match(hd)[0],10)});var _d=E("Date",!0);J("d",0,"do","day"),J("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),J("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),J("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),J("e",0,0,"weekday"),J("E",0,0,"isoWeekday"),A("day","d"),A("weekday","e"),A("isoWeekday","E"),O("d",hd),O("e",hd),O("E",hd),O("dd",sd),O("ddd",sd),O("dddd",sd),T(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);null!=e?b.d=e:j(c).invalidWeekday=a}),T(["d","e","E"],function(a,b,c,d){b[d]=r(a)});var ae="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),be="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),ce="Su_Mo_Tu_We_Th_Fr_Sa".split("_");J("DDD",["DDDD",3],"DDDo","dayOfYear"),A("dayOfYear","DDD"),O("DDD",kd),O("DDDD",ed),S(["DDD","DDDD"],function(a,b,c){c._dayOfYear=r(a)}),J("H",["HH",2],0,"hour"),J("h",["hh",2],0,cc),J("hmm",0,0,function(){return""+cc.apply(this)+I(this.minutes(),2)}),J("hmmss",0,0,function(){return""+cc.apply(this)+I(this.minutes(),2)+I(this.seconds(),2)}),J("Hmm",0,0,function(){return""+this.hours()+I(this.minutes(),2)}),J("Hmmss",0,0,function(){return""+this.hours()+I(this.minutes(),2)+I(this.seconds(),2)}),dc("a",!0),dc("A",!1),A("hour","h"),O("a",ec),O("A",ec),O("H",hd),O("h",hd),O("HH",hd,dd),O("hh",hd,dd),O("hmm",id),O("hmmss",jd),O("Hmm",id),O("Hmmss",jd),S(["H","HH"],yd),S(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),S(["h","hh"],function(a,b,c){b[yd]=r(a),j(c).bigHour=!0}),S("hmm",function(a,b,c){var d=a.length-2;b[yd]=r(a.substr(0,d)),b[zd]=r(a.substr(d)),j(c).bigHour=!0}),S("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[yd]=r(a.substr(0,d)),b[zd]=r(a.substr(d,2)),b[Ad]=r(a.substr(e)),j(c).bigHour=!0}),S("Hmm",function(a,b,c){var d=a.length-2;b[yd]=r(a.substr(0,d)),b[zd]=r(a.substr(d))}),S("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[yd]=r(a.substr(0,d)),b[zd]=r(a.substr(d,2)),b[Ad]=r(a.substr(e))});var de=/[ap]\.?m?\.?/i,ee=E("Hours",!0);J("m",["mm",2],0,"minute"),A("minute","m"),O("m",hd),O("mm",hd,dd),S(["m","mm"],zd);var fe=E("Minutes",!1);J("s",["ss",2],0,"second"),A("second","s"),O("s",hd),O("ss",hd,dd),S(["s","ss"],Ad);var ge=E("Seconds",!1);J("S",0,0,function(){return~~(this.millisecond()/100)}),J(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),J(0,["SSS",3],0,"millisecond"),J(0,["SSSS",4],0,function(){return 10*this.millisecond()}),J(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),J(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),J(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),J(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),J(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),A("millisecond","ms"),O("S",kd,cd),O("SS",kd,dd),O("SSS",kd,ed);var he;for(he="SSSS";he.length<=9;he+="S")O(he,nd);for(he="S";he.length<=9;he+="S")S(he,hc);var ie=E("Milliseconds",!1);J("z",0,0,"zoneAbbr"),J("zz",0,0,"zoneName");var je=o.prototype;je.add=Xd,je.calendar=db,je.clone=eb,je.diff=lb,je.endOf=xb,je.format=pb,je.from=qb,je.fromNow=rb,je.to=sb,je.toNow=tb,je.get=H,je.invalidAt=Gb,je.isAfter=fb,je.isBefore=gb,je.isBetween=hb,je.isSame=ib,je.isSameOrAfter=jb,je.isSameOrBefore=kb,je.isValid=Eb,je.lang=Zd,je.locale=ub,je.localeData=vb,je.max=Sd,je.min=Rd,je.parsingFlags=Fb,je.set=H,je.startOf=wb,je.subtract=Yd,je.toArray=Bb,je.toObject=Cb,je.toDate=Ab,je.toISOString=ob,je.toJSON=Db,je.toString=nb,je.unix=zb,je.valueOf=yb,je.creationData=Hb,je.year=Qd,je.isLeapYear=na,je.weekYear=Jb,je.isoWeekYear=Kb,je.quarter=je.quarters=Pb,je.month=$,je.daysInMonth=_,je.week=je.weeks=Tb,je.isoWeek=je.isoWeeks=Ub,je.weeksInYear=Mb,je.isoWeeksInYear=Lb,je.date=_d,je.day=je.days=$b,je.weekday=_b,je.isoWeekday=ac,je.dayOfYear=bc,je.hour=je.hours=ee,je.minute=je.minutes=fe,je.second=je.seconds=ge,je.millisecond=je.milliseconds=ie,je.utcOffset=Oa,je.utc=Qa,je.local=Ra,je.parseZone=Sa,je.hasAlignedHourOffset=Ta,je.isDST=Ua,je.isDSTShifted=Va,je.isLocal=Wa,je.isUtcOffset=Xa,je.isUtc=Ya,je.isUTC=Ya,je.zoneAbbr=ic,je.zoneName=jc,je.dates=fa("dates accessor is deprecated. Use date instead.",_d),je.months=fa("months accessor is deprecated. Use month instead",$),je.years=fa("years accessor is deprecated. Use year instead",Qd),je.zone=fa("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Pa);var ke=je,le={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},me={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},ne="Invalid date",oe="%d",pe=/\d{1,2}/,qe={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},re=t.prototype;re._calendar=le,re.calendar=mc,re._longDateFormat=me,re.longDateFormat=nc,re._invalidDate=ne,re.invalidDate=oc,re._ordinal=oe,re.ordinal=pc,re._ordinalParse=pe,re.preparse=qc,re.postformat=qc,re._relativeTime=qe,re.relativeTime=rc,re.pastFuture=sc,re.set=tc,re.months=W,re._months=Fd,re.monthsShort=X,re._monthsShort=Gd,re.monthsParse=Y,re._monthsRegex=Id,re.monthsRegex=ba,re._monthsShortRegex=Hd,re.monthsShortRegex=aa,re.week=Qb,re._week=$d,re.firstDayOfYear=Sb,re.firstDayOfWeek=Rb,re.weekdays=Wb,re._weekdays=ae,re.weekdaysMin=Yb,re._weekdaysMin=ce,re.weekdaysShort=Xb,re._weekdaysShort=be,re.weekdaysParse=Zb,re.isPM=fc,re._meridiemParse=de,re.meridiem=gc,x("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===r(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=fa("moment.lang is deprecated. Use moment.locale instead.",x),a.langData=fa("moment.langData is deprecated. Use moment.localeData instead.",z);var se=Math.abs,te=Lc("ms"),ue=Lc("s"),ve=Lc("m"),we=Lc("h"),xe=Lc("d"),ye=Lc("w"),ze=Lc("M"),Ae=Lc("y"),Be=Nc("milliseconds"),Ce=Nc("seconds"),De=Nc("minutes"),Ee=Nc("hours"),Fe=Nc("days"),Ge=Nc("months"),He=Nc("years"),Ie=Math.round,Je={s:45,m:45,h:22,d:26,M:11},Ke=Math.abs,Le=Ia.prototype;Le.abs=Bc,Le.add=Dc,Le.subtract=Ec,Le.as=Jc,Le.asMilliseconds=te,Le.asSeconds=ue,Le.asMinutes=ve,Le.asHours=we,Le.asDays=xe,Le.asWeeks=ye,Le.asMonths=ze,Le.asYears=Ae,Le.valueOf=Kc,Le._bubble=Gc,Le.get=Mc,Le.milliseconds=Be,Le.seconds=Ce,Le.minutes=De,Le.hours=Ee,Le.days=Fe,Le.weeks=Oc,Le.months=Ge,Le.years=He,Le.humanize=Sc,Le.toISOString=Tc,Le.toString=Tc,Le.toJSON=Tc,Le.locale=ub,Le.localeData=vb,Le.toIsoString=fa("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Tc),Le.lang=Zd,J("X",0,0,"unix"),J("x",0,0,"valueOf"),O("x",od),O("X",rd),S("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),S("x",function(a,b,c){c._d=new Date(r(a))}),a.version="2.11.2",b(Ea),a.fn=ke,a.min=Ga,a.max=Ha,a.now=Td,a.utc=h,a.unix=kc,a.months=wc,a.isDate=d,a.locale=x,a.invalid=l,a.duration=Za,a.isMoment=p,a.weekdays=yc,a.parseZone=lc,a.localeData=z,a.isDuration=Ja,a.monthsShort=xc,a.weekdaysMin=Ac,a.defineLocale=y,a.weekdaysShort=zc,a.normalizeUnits=B,a.relativeTimeThreshold=Rc,a.prototype=ke;var Me=a;return Me}),define("moment",["moment/moment"],function(a){return a}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("moment-timezone/moment-timezone",["moment"],b):"object"==typeof module&&module.exports?module.exports=b(require("moment")):b(a.moment)}(this,function(a){"use strict";function b(a){return a>96?a-87:a>64?a-29:a-48}function c(a){var c,d=0,e=a.split("."),f=e[0],g=e[1]||"",h=1,i=0,j=1;for(45===a.charCodeAt(0)&&(d=1,j=-1),d;d<f.length;d++)c=b(f.charCodeAt(d)),i=60*i+c;for(d=0;d<g.length;d++)h/=60,c=b(g.charCodeAt(d)),i+=c*h;return i*j}function d(a){for(var b=0;b<a.length;b++)a[b]=c(a[b])}function e(a,b){for(var c=0;b>c;c++)a[c]=Math.round((a[c-1]||0)+6e4*a[c]);a[b-1]=1/0}function f(a,b){var c,d=[];for(c=0;c<b.length;c++)d[c]=a[b[c]];return d}function g(a){var b=a.split("|"),c=b[2].split(" "),g=b[3].split(""),h=b[4].split(" ");return d(c),d(g),d(h),e(h,g.length),{name:b[0],abbrs:f(b[1].split(" "),g),offsets:f(c,g),untils:h,population:0|b[5]}}function h(a){a&&this._set(g(a))}function i(a){var b=a.toTimeString(),c=b.match(/\([a-z ]+\)/i);c&&c[0]?(c=c[0].match(/[A-Z]/g),c=c?c.join(""):void 0):(c=b.match(/[A-Z]{3,5}/g),c=c?c[0]:void 0),"GMT"===c&&(c=void 0),this.at=+a,this.abbr=c,this.offset=a.getTimezoneOffset()}function j(a){this.zone=a,this.offsetScore=0,this.abbrScore=0}function k(a,b){for(var c,d;d=6e4*((b.at-a.at)/12e4|0);)c=new i(new Date(a.at+d)),c.offset===a.offset?a=c:b=c;return a}function l(){var a,b,c,d=(new Date).getFullYear()-2,e=new i(new Date(d,0,1)),f=[e];for(c=1;48>c;c++)b=new i(new Date(d,c,1)),b.offset!==e.offset&&(a=k(e,b),f.push(a),f.push(new i(new Date(a.at+6e4)))),e=b;for(c=0;4>c;c++)f.push(new i(new Date(d+c,0,1))),f.push(new i(new Date(d+c,6,1)));return f}function m(a,b){return a.offsetScore!==b.offsetScore?a.offsetScore-b.offsetScore:a.abbrScore!==b.abbrScore?a.abbrScore-b.abbrScore:b.zone.population-a.zone.population}function n(a,b){var c,e;for(d(b),c=0;c<b.length;c++)e=b[c],I[e]=I[e]||{},I[e][a]=!0}function o(a){var b,c,d,e=a.length,f={},g=[];for(b=0;e>b;b++){d=I[a[b].offset]||{};for(c in d)d.hasOwnProperty(c)&&(f[c]=!0)}for(b in f)f.hasOwnProperty(b)&&g.push(H[b]);return g}function p(){try{var a=Intl.DateTimeFormat().resolvedOptions().timeZone;if(a){var b=H[r(a)];if(b)return b;z("Moment Timezone found "+a+" from the Intl api, but did not have that data loaded.")}}catch(c){}var d,e,f,g=l(),h=g.length,i=o(g),k=[];for(e=0;e<i.length;e++){for(d=new j(t(i[e]),h),f=0;h>f;f++)d.scoreOffsetAt(g[f]);k.push(d)}return k.sort(m),k.length>0?k[0].zone.name:void 0}function q(a){return(!D||a)&&(D=p()),D}function r(a){return(a||"").toLowerCase().replace(/\//g,"_")}function s(a){var b,c,d,e;for("string"==typeof a&&(a=[a]),b=0;b<a.length;b++)d=a[b].split("|"),c=d[0],e=r(c),F[e]=a[b],H[e]=c,d[5]&&n(e,d[2].split(" "))}function t(a,b){a=r(a);var c,d=F[a];return d instanceof h?d:"string"==typeof d?(d=new h(d),F[a]=d,d):G[a]&&b!==t&&(c=t(G[a],t))?(d=F[a]=new h,d._set(c),d.name=H[a],d):null}function u(){var a,b=[];for(a in H)H.hasOwnProperty(a)&&(F[a]||F[G[a]])&&H[a]&&b.push(H[a]);return b.sort()}function v(a){var b,c,d,e;for("string"==typeof a&&(a=[a]),b=0;b<a.length;b++)c=a[b].split("|"),d=r(c[0]),e=r(c[1]),G[d]=e,H[d]=c[0],G[e]=d,H[e]=c[1]}function w(a){s(a.zones),v(a.links),A.dataVersion=a.version}function x(a){return x.didShowError||(x.didShowError=!0,z("moment.tz.zoneExists('"+a+"') has been deprecated in favor of !moment.tz.zone('"+a+"')")),!!t(a)}function y(a){return!(!a._a||void 0!==a._tzm)}function z(a){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(a)}function A(b){var c=Array.prototype.slice.call(arguments,0,-1),d=arguments[arguments.length-1],e=t(d),f=a.utc.apply(null,c);return e&&!a.isMoment(b)&&y(f)&&f.add(e.parse(f),"minutes"),f.tz(d),f}function B(a){return function(){return this._z?this._z.abbr(this):a.call(this)}}function C(a){return function(){return this._z=null,a.apply(this,arguments)}}var D,E="0.5.13",F={},G={},H={},I={},J=a.version.split("."),K=+J[0],L=+J[1];(2>K||2===K&&6>L)&&z("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+a.version+". See momentjs.com"),h.prototype={_set:function(a){this.name=a.name,this.abbrs=a.abbrs,this.untils=a.untils,this.offsets=a.offsets,this.population=a.population},_index:function(a){var b,c=+a,d=this.untils;for(b=0;b<d.length;b++)if(c<d[b])return b},parse:function(a){var b,c,d,e,f=+a,g=this.offsets,h=this.untils,i=h.length-1;for(e=0;i>e;e++)if(b=g[e],c=g[e+1],d=g[e?e-1:e],c>b&&A.moveAmbiguousForward?b=c:b>d&&A.moveInvalidForward&&(b=d),f<h[e]-6e4*b)return g[e];return g[i]},abbr:function(a){return this.abbrs[this._index(a)]},offset:function(a){return this.offsets[this._index(a)]}},j.prototype.scoreOffsetAt=function(a){this.offsetScore+=Math.abs(this.zone.offset(a.at)-a.offset),this.zone.abbr(a.at).replace(/[^A-Z]/g,"")!==a.abbr&&this.abbrScore++},A.version=E,A.dataVersion="",A._zones=F,A._links=G,A._names=H,A.add=s,A.link=v,A.load=w,A.zone=t,A.zoneExists=x,A.guess=q,A.names=u,A.Zone=h,A.unpack=g,A.unpackBase60=c,A.needsOffset=y,A.moveInvalidForward=!0,A.moveAmbiguousForward=!1;var M=a.fn;a.tz=A,a.defaultZone=null,a.updateOffset=function(b,c){var d,e=a.defaultZone;void 0===b._z&&(e&&y(b)&&!b._isUTC&&(b._d=a.utc(b._a)._d,b.utc().add(e.parse(b),"minutes")),b._z=e),b._z&&(d=b._z.offset(b),Math.abs(d)<16&&(d/=60),void 0!==b.utcOffset?b.utcOffset(-d,c):b.zone(d,c))},M.tz=function(b){return b?(this._z=t(b),this._z?a.updateOffset(this):z("Moment Timezone has no data for "+b+". See http://momentjs.com/timezone/docs/#/data-loading/."),this):this._z?this._z.name:void 0},M.zoneName=B(M.zoneName),M.zoneAbbr=B(M.zoneAbbr),M.utc=C(M.utc),a.tz.setDefault=function(b){return(2>K||2===K&&9>L)&&z("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+a.version+"."),a.defaultZone=b?t(b):null,a};var N=a.momentProperties;return"[object Array]"===Object.prototype.toString.call(N)?(N.push("_z"),N.push("_a")):N&&(N._z=null),a}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?b(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/cs",["moment"],b):b(a.moment)}(this,function(a){"use strict";function b(a){return a>1&&5>a&&1!==~~(a/10)}function c(a,c,d,e){var f=a+" ";switch(d){case"s":return c||e?"pár sekund":"pár sekundami";case"m":return c?"minuta":e?"minutu":"minutou";case"mm":return c||e?f+(b(a)?"minuty":"minut"):f+"minutami";case"h":return c?"hodina":e?"hodinu":"hodinou";case"hh":return c||e?f+(b(a)?"hodiny":"hodin"):f+"hodinami";case"d":return c||e?"den":"dnem";case"dd":return c||e?f+(b(a)?"dny":"dní"):f+"dny";case"M":return c||e?"měsíc":"měsícem";case"MM":return c||e?f+(b(a)?"měsíce":"měsíců"):f+"měsíci";case"y":return c||e?"rok":"rokem";case"yy":return c||e?f+(b(a)?"roky":"let"):f+"lety"}}var d="leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),e="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_"),f=a.defineLocale("cs",{months:d,monthsShort:e,monthsParse:function(a,b){var c,d=[];for(c=0;12>c;c++)d[c]=new RegExp("^"+a[c]+"$|^"+b[c]+"$","i");return d}(d,e),shortMonthsParse:function(a){var b,c=[];for(b=0;12>b;b++)c[b]=new RegExp("^"+a[b]+"$","i");return c}(e),longMonthsParse:function(a){var b,c=[];for(b=0;12>b;b++)c[b]=new RegExp("^"+a[b]+"$","i");return c}(d),weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s:c,m:c,mm:c,h:c,hh:c,d:c,dd:c,M:c,MM:c,y:c,yy:c},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return f}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?b(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/de",["moment"],b):b(a.moment)}(this,function(a){"use strict";function b(a,b,c,d){var e={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[a+" Tage",a+" Tagen"],M:["ein Monat","einem Monat"],MM:[a+" Monate",a+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[a+" Jahre",a+" Jahren"]};return b?e[c][0]:e[c][1]}var c=a.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:b,mm:"%d Minuten",h:b,hh:"%d Stunden",d:b,dd:b,M:b,MM:b,y:b,yy:b},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return c}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?b(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/en-au",["moment"],b):b(a.moment)}(this,function(a){"use strict";var b=a.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}});return b}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?b(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/en-ca",["moment"],b):b(a.moment)}(this,function(a){"use strict";var b=a.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"D MMMM, YYYY",LLL:"D MMMM, YYYY h:mm A",LLLL:"dddd, D MMMM, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}});return b}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?b(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/en-gb",["moment"],b):b(a.moment)}(this,function(a){"use strict";var b=a.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}});return b}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?b(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/en-ie",["moment"],b):b(a.moment)}(this,function(a){"use strict";var b=a.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}});return b}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?b(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/en-nz",["moment"],b):b(a.moment)}(this,function(a){"use strict";var b=a.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c},week:{dow:1,doy:4}});return b}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?b(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/es",["moment"],b):b(a.moment)}(this,function(a){"use strict";var b="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),c="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),d=a.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(a,d){return/-MMM-/.test(d)?c[a.month()]:b[a.month()]},weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}});return d}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?b(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/fi",["moment"],b):b(a.moment)}(this,function(a){"use strict";function b(a,b,d,e){var f="";switch(d){case"s":return e?"muutaman sekunnin":"muutama sekunti";case"m":return e?"minuutin":"minuutti";case"mm":f=e?"minuutin":"minuuttia";break;case"h":return e?"tunnin":"tunti";case"hh":f=e?"tunnin":"tuntia";break;case"d":return e?"päivän":"päivä";case"dd":f=e?"päivän":"päivää";break;case"M":return e?"kuukauden":"kuukausi";case"MM":f=e?"kuukauden":"kuukautta";break;case"y":return e?"vuoden":"vuosi";case"yy":f=e?"vuoden":"vuotta"}return f=c(a,e)+" "+f}function c(a,b){return 10>a?b?e[a]:d[a]:a}var d="nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" "),e=["nolla","yhden","kahden","kolmen","neljän","viiden","kuuden",d[7],d[8],d[9]],f=a.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tänään] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s päästä",past:"%s sitten",s:b,m:b,mm:b,h:b,hh:b,d:b,dd:b,M:b,MM:b,y:b,yy:b},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return f}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?b(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/fr",["moment"],b):b(a.moment)}(this,function(a){"use strict";var b=a.defineLocale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(a){return a+(1===a?"er":"")},week:{dow:1,doy:4}});return b}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?b(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/fr-ca",["moment"],b):b(a.moment)}(this,function(a){"use strict";var b=a.defineLocale("fr-ca",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",
LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(a){return a+(1===a?"er":"e")}});return b}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?b(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/fr-ch",["moment"],b):b(a.moment)}(this,function(a){"use strict";var b=a.defineLocale("fr-ch",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(a){return a+(1===a?"er":"e")},week:{dow:1,doy:4}});return b}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?b(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/ru",["moment"],b):b(a.moment)}(this,function(a){"use strict";function b(a,b){var c=a.split("_");return b%10===1&&b%100!==11?c[0]:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?c[1]:c[2]}function c(a,c,d){var e={mm:c?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"};return"m"===d?c?"минута":"минуту":a+" "+b(e[d],+a)}var d=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[й|я]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i],e=a.defineLocale("ru",{months:{format:"Января_Февраля_Марта_Апреля_Мая_Июня_Июля_Августа_Сентября_Октября_Ноября_Декабря".split("_"),standalone:"Январь_Февраль_Март_Апрель_Май_Июнь_Июль_Август_Сентябрь_Октябрь_Ноябрь_Декабрь".split("_")},monthsShort:{format:"янв_фев_мар_апр_мая_июня_июля_авг_сен_окт_ноя_дек".split("_"),standalone:"янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_")},weekdays:{standalone:"Воскресенье_Понедельник_Вторник_Среда_Четверг_Пятница_Суббота".split("_"),format:"Воскресенье_Понедельник_Вторник_Среду_Четверг_Пятницу_Субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?\] ?dddd/},weekdaysShort:"Вс_Пн_Вт_Ср_Чт_Пт_Сб".split("_"),weekdaysMin:"Вс_Пн_Вт_Ср_Чт_Пт_Сб".split("_"),monthsParse:d,longMonthsParse:d,shortMonthsParse:d,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сегодня в] LT",nextDay:"[Завтра в] LT",lastDay:"[Вчера в] LT",nextWeek:function(a){if(a.week()===this.week())return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT";switch(this.day()){case 0:return"[В следующее] dddd [в] LT";case 1:case 2:case 4:return"[В следующий] dddd [в] LT";case 3:case 5:case 6:return"[В следующую] dddd [в] LT"}},lastWeek:function(a){if(a.week()===this.week())return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:c,mm:c,h:"час",hh:c,d:"день",dd:c,M:"месяц",MM:c,y:"год",yy:c},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(a){return/^(дня|вечера)$/.test(a)},meridiem:function(a,b,c){return 4>a?"ночи":12>a?"утра":17>a?"дня":"вечера"},ordinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(a,b){switch(b){case"M":case"d":case"DDD":return a+"-й";case"D":return a+"-го";case"w":case"W":return a+"-я";default:return a}},week:{dow:1,doy:7}});return e}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?b(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/sk",["moment"],b):b(a.moment)}(this,function(a){"use strict";function b(a){return a>1&&5>a}function c(a,c,d,e){var f=a+" ";switch(d){case"s":return c||e?"pár sekúnd":"pár sekundami";case"m":return c?"minúta":e?"minútu":"minútou";case"mm":return c||e?f+(b(a)?"minúty":"minút"):f+"minútami";case"h":return c?"hodina":e?"hodinu":"hodinou";case"hh":return c||e?f+(b(a)?"hodiny":"hodín"):f+"hodinami";case"d":return c||e?"deň":"dňom";case"dd":return c||e?f+(b(a)?"dni":"dní"):f+"dňami";case"M":return c||e?"mesiac":"mesiacom";case"MM":return c||e?f+(b(a)?"mesiace":"mesiacov"):f+"mesiacmi";case"y":return c||e?"rok":"rokom";case"yy":return c||e?f+(b(a)?"roky":"rokov"):f+"rokmi"}}var d="január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_"),e="jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_"),f=a.defineLocale("sk",{months:d,monthsShort:e,weekdays:"nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_št_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_št_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeľu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo štvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[včera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulú nedeľu o] LT";case 1:case 2:return"[minulý] dddd [o] LT";case 3:return"[minulú stredu o] LT";case 4:case 5:return"[minulý] dddd [o] LT";case 6:return"[minulú sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:c,m:c,mm:c,h:c,hh:c,d:c,dd:c,M:c,MM:c,y:c,yy:c},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return f}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?b(require("../moment")):"function"==typeof define&&define.amd?define("moment/locale/sv",["moment"],b):b(a.moment)}(this,function(a){"use strict";var b=a.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"[På] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},ordinalParse:/\d{1,2}(e|a)/,ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"e":1===b?"a":2===b?"a":"e";return a+c},week:{dow:1,doy:4}});return b}),function(a,b){"function"==typeof define&&define.amd?(require&&require.config&&require.config({paths:{},packages:[{name:"moment",location:"../bower_components/moment",main:"moment"}]}),define("bam-moment-i18n/index",["require","exports","module","moment-timezone/moment-timezone","moment/locale/cs","moment/locale/de","moment/locale/en-au","moment/locale/en-ca","moment/locale/en-gb","moment/locale/en-ie","moment/locale/en-nz","moment/locale/es","moment/locale/fi","moment/locale/fr","moment/locale/fr-ca","moment/locale/fr-ch","moment/locale/ru","moment/locale/sk","moment/locale/sv"],function(a,c,d){d.exports=b(a("moment-timezone/moment-timezone"),a("moment/locale/cs"),a("moment/locale/de"),a("moment/locale/en-au"),a("moment/locale/en-ca"),a("moment/locale/en-gb"),a("moment/locale/en-ie"),a("moment/locale/en-nz"),a("moment/locale/es"),a("moment/locale/fi"),a("moment/locale/fr"),a("moment/locale/fr-ca"),a("moment/locale/fr-ch"),a("moment/locale/ru"),a("moment/locale/sk"),a("moment/locale/sv"))})):"object"==typeof exports?module.exports=b(require("moment-timezone/moment-timezone"),require("moment/locale/cs"),require("moment/locale/de"),require("moment/locale/en-au"),require("moment/locale/en-ca"),require("moment/locale/en-gb"),require("moment/locale/en-ie"),require("moment/locale/en-nz"),require("moment/locale/es"),require("moment/locale/fi"),require("moment/locale/fr"),require("moment/locale/fr-ca"),require("moment/locale/fr-ch"),require("moment/locale/ru"),require("moment/locale/sk"),require("moment/locale/sv")):a.BamMoment=b(a.moment)}(this,function(a){"use strict";function b(b){b=b||"en",a.locale(b),this.addFormats=c.addFormats[b]||c.addFormats.WORLD,this.timeZone=c.timeZone[b]||c.timeZone.en}var c={supportedLocales:["cs","de","en","en_au","en_ca","en_gb","en_ie","en_nz","es","fi","fr","fr_ca","fr_ch","ru","sk","sv"],addFormats:{en:{shortMonthDay:"MMM D",dayShortMonthDay:"dddd MMM D",shortDayShortMonthDay:"ddd[.] MMM D"},WORLD:{shortMonthDay:"D MMM",dayShortMonthDay:"dddd D MMM",shortDayShortMonthDay:"ddd D MMM"}},timeZone:{en:"America/New_York"}},d=["America/Chicago|CST CDT EST CWT CPT|60 50 50 50 50|01010101010101010101010101010101010102010101010103401010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261s0 1nX0 11B0 1nX0 1wp0 TX0 WN0 1qL0 1cN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 11B0 1Hz0 14p0 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 RB0 8x30 iw0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|92e5","America/Denver|MST MDT MWT MPT|70 60 60 60|01010101023010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261r0 1nX0 11B0 1nX0 11B0 1qL0 WN0 mn0 Ord0 8x20 ix0 LCN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|26e5","America/Halifax|LMT AST ADT AWT APT|4e.o 40 30 30 30|0121212121212121212121212121212121212121212121212134121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-2IsHJ.A xzzJ.A 1db0 3I30 1in0 3HX0 IL0 1E10 ML0 1yN0 Pb0 1Bd0 Mn0 1Bd0 Rz0 1w10 Xb0 1w10 LX0 1w10 Xb0 1w10 Lz0 1C10 Jz0 1E10 OL0 1yN0 Un0 1qp0 Xb0 1qp0 11X0 1w10 Lz0 1HB0 LX0 1C10 FX0 1w10 Xb0 1qp0 Xb0 1BB0 LX0 1td0 Xb0 1qp0 Xb0 Rf0 8x50 iu0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 3Qp0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 3Qp0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 6i10 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|39e4","America/Los_Angeles|PST PDT PWT PPT|80 70 70 70|010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261q0 1nX0 11B0 1nX0 SgN0 8x10 iy0 5Wp0 1Vb0 3dB0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|15e6","America/New_York|EST EDT EWT EPT|50 40 40 40|01010101010101010101010101010101010101010101010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261t0 1nX0 11B0 1nX0 11B0 1qL0 1a10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 RB0 8x40 iv0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|21e6","America/St_Johns|NST NDT NST NDT NWT NPT NDDT|3u.Q 2u.Q 3u 2u 2u 2u 1u|01010101010101010101010101010101010102323232323232324523232323232323232323232323232323232323232323232323232323232323232323232323232323232326232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232|-28oit.8 14L0 1nB0 1in0 1gm0 Dz0 1JB0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1cN0 1cL0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 19X0 1fB0 1cL0 1fB0 19X0 1fB0 19X0 10O0 eKX.8 19X0 1iq0 WL0 1qN0 WL0 1qN0 WL0 1tB0 TX0 1tB0 WL0 1qN0 WL0 1qN0 7UHu itu 1tB0 WL0 1qN0 WL0 1qN0 WL0 1qN0 WL0 1tB0 WL0 1ld0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14n1 1lb0 14p0 1nW0 11C0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|11e4"];a.tz.add(d),a.tz.link(["America/Chicago|US/Central","America/Denver|US/Mountain","America/Halifax|Canada/Atlantic","America/Los_Angeles|US/Pacific","America/New_York|US/Eastern","America/St_Johns|Canada/Newfoundland"]),a.locale("en");var e=c.addFormats.en,f=c.timeZone.en;return{moment:a,setLocale:b,timeZone:f,addFormats:e,defaultConfig:c}}),function(a,b){"function"==typeof define&&define.amd?define("bam-handlebars-helpers/index",["bam-moment-i18n/index","pageMeta/pageMeta"],b):"object"==typeof exports?module.exports=b(require("bam-moment-i18n/index"),null,require("i18n-2"),require("lodash")):a.BamHbsHelpers=b(a.bamMoment,null,null)}(this,function(a,b,c,d){"use strict";function e(){b&&b.locale&&(-1!==a.defaultConfig.supportedLocales.indexOf(b.locale)&&(g.locale=b.locale),a.setLocale(g.locale))}var f,g={locale:"en",helpers:{encodedjson:function(a){return null===a||"undefined"==typeof a||"function"==typeof a||"boolean"==typeof a?encodeURIComponent(JSON.stringify({})):encodeURIComponent(JSON.stringify(a))},safejson:function(a){function b(a){return a.replace(/[<>]/g,function(a){return"&#"+a.charCodeAt(0)+";"})}return a?b(JSON.stringify(a)):"{}"},json:function(a){return null===a||"undefined"==typeof a||"function"==typeof a||"boolean"==typeof a?JSON.stringify({}):JSON.stringify(a)},equals:function(a,b,c){return a===b?c.fn(this):c.inverse(this)},join:function(a,b){return d.isArray(a)&&d.isString(b)?a.join(b):""},ismore:function(a,b,c){return a&&a.length>b?c.fn(this):c.inverse(this)},math:function(a,b,c){return a=parseFloat(a),c=parseFloat(c),{"+":a+c,"-":a-c,"*":a*c,"/":a/c,"%":a%c}[b]},ifin:function(a,b,c){return b&&b.indexOf(a)>-1?c.fn(this):c.inverse(this)},formatDate:function(b,c){var d="";return"boolean"!=typeof b&&null!==b&&(b=new Date(b)),"[object Date]"!==Object.prototype.toString.call(b)||isNaN(b.getTime())||(b=new Date(b.toUTCString()).toISOString(),d=a.moment(b).tz("America/New_York").format(c)),d},dateFromNow:function(b,c){return c="object"==typeof c?!1:c,a.moment(b).fromNow(c)},dateToNow:function(b,c){return c="object"==typeof c?!1:c,a.moment(b).toNow(c)},formatDuration:function(a){for(a=a||"00:00";0===a.indexOf("00:")&&a.length>5;)a=a.substr(3);return a},and:function(a,b,c){return a&&b?c.fn(this):c.inverse(this)},build:function(a,b,c,d){return"undefined"!=typeof c?c?d.fn(this):d.inverse(this):a&&b?d.fn(this):d.inverse(this)},limit:function(a,b){return a.slice(0,b)},toLowerCase:function(a){return a?a.toLowerCase():""},toUpperCase:function(a){return a?a.toUpperCase():""},escapeSingleQuotes:function(a){return a&&d.isString(a)?a.replace(/'/g,"\\'"):a},i18n:function(a,b){return f.__(a,b)},serverTime:function(){return a.moment().tz("America/New_York").format()},timeZoneOffset:function(){return a.moment().tz("America/New_York").format("Z")},safeNull:function(a,b){return null===a||""===a?b:a},setDomain:function(a,b){return 0!==a.indexOf("http")&&0!==a.indexOf("www")||"string"!=typeof b||(a=a.substr(a.indexOf(".com")+4),"/"!==a.charAt(0)&&(a="/"+a),"relative"!==b&&(a=b+a)),a},quoteescapedjson:function(a){function b(a){return a.replace(/"/g,"&quot;")}return a?b(JSON.stringify(a)):"{}"}},setup_i18n:function(a){f=a&&a.i18n?a.i18n:new c({locales:a.locales,directory:a.directory||"./templates/i18n",extension:a.extension||".json"})},setup_i18n_external_data:function(a){a&&a.locals.i18nDictionary&&(f=a.locals.i18nDictionary)},setup_i18n_clientside:function(a){var b=function(a){this.dictionary=a};b.prototype={__:function(a,b){return this.dictionary[a]?this.dictionary[a]:b||""}},f=new b(a)},get_i18n:function(){return f}};return e(),g}),function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define("handlebars/handlebars",b):"object"==typeof exports?exports.Handlebars=b():a.Handlebars=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(){var a=r();return a.compile=function(b,c){return k.compile(b,c,a)},a.precompile=function(b,c){return k.precompile(b,c,a)},a.AST=i["default"],a.Compiler=k.Compiler,a.JavaScriptCompiler=m["default"],a.Parser=j.parser,a.parse=j.parse,a}var e=c(8)["default"];b.__esModule=!0;var f=c(1),g=e(f),h=c(2),i=e(h),j=c(3),k=c(4),l=c(5),m=e(l),n=c(6),o=e(n),p=c(7),q=e(p),r=g["default"].create,s=d();s.create=d,q["default"](s),s.Visitor=o["default"],s["default"]=s,b["default"]=s,a.exports=b["default"]},function(a,b,c){"use strict";function d(){var a=new g.HandlebarsEnvironment;return m.extend(a,g),a.SafeString=i["default"],a.Exception=k["default"],a.Utils=m,a.escapeExpression=m.escapeExpression,a.VM=o,a.template=function(b){return o.template(b,a)},a}var e=c(8)["default"];b.__esModule=!0;var f=c(9),g=e(f),h=c(10),i=e(h),j=c(11),k=e(j),l=c(12),m=e(l),n=c(13),o=e(n),p=c(7),q=e(p),r=d();r.create=d,q["default"](r),r["default"]=r,b["default"]=r,a.exports=b["default"]},function(a,b,c){"use strict";b.__esModule=!0;var d={Program:function(a,b,c,d){this.loc=d,this.type="Program",this.body=a,this.blockParams=b,this.strip=c},MustacheStatement:function(a,b,c,d,e,f){this.loc=f,this.type="MustacheStatement",this.path=a,this.params=b||[],this.hash=c,this.escaped=d,this.strip=e},BlockStatement:function(a,b,c,d,e,f,g,h,i){this.loc=i,this.type="BlockStatement",this.path=a,this.params=b||[],this.hash=c,this.program=d,this.inverse=e,this.openStrip=f,this.inverseStrip=g,this.closeStrip=h},PartialStatement:function(a,b,c,d,e){this.loc=e,this.type="PartialStatement",this.name=a,this.params=b||[],this.hash=c,this.indent="",this.strip=d},ContentStatement:function(a,b){this.loc=b,this.type="ContentStatement",this.original=this.value=a},CommentStatement:function(a,b,c){this.loc=c,this.type="CommentStatement",this.value=a,this.strip=b},SubExpression:function(a,b,c,d){this.loc=d,this.type="SubExpression",this.path=a,this.params=b||[],this.hash=c},PathExpression:function(a,b,c,d,e){this.loc=e,this.type="PathExpression",this.data=a,this.original=d,this.parts=c,this.depth=b},StringLiteral:function(a,b){this.loc=b,this.type="StringLiteral",this.original=this.value=a},NumberLiteral:function(a,b){this.loc=b,this.type="NumberLiteral",this.original=this.value=Number(a)},BooleanLiteral:function(a,b){this.loc=b,this.type="BooleanLiteral",this.original=this.value="true"===a},UndefinedLiteral:function(a){this.loc=a,this.type="UndefinedLiteral",this.original=this.value=void 0},NullLiteral:function(a){this.loc=a,this.type="NullLiteral",this.original=this.value=null},Hash:function(a,b){this.loc=b,this.type="Hash",this.pairs=a},HashPair:function(a,b,c){this.loc=c,this.type="HashPair",this.key=a,this.value=b},helpers:{helperExpression:function(a){return!("SubExpression"!==a.type&&!a.params.length&&!a.hash)},scopedId:function(a){return/^\.|this\b/.test(a.original)},simpleId:function(a){return 1===a.parts.length&&!d.helpers.scopedId(a)&&!a.depth}}};b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){if("Program"===a.type)return a;g["default"].yy=o,o.locInfo=function(a){return new o.SourceLocation(b&&b.srcName,a)};var c=new k["default"];return c.accept(g["default"].parse(a))}var e=c(8)["default"];b.__esModule=!0,b.parse=d;var f=c(14),g=e(f),h=c(2),i=e(h),j=c(15),k=e(j),l=c(16),m=e(l),n=c(12);b.parser=g["default"];var o={};n.extend(o,m,i["default"])},function(a,b,c){"use strict";function d(){}function e(a,b,c){if(null==a||"string"!=typeof a&&"Program"!==a.type)throw new k["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);b=b||{},"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var d=c.parse(a,b),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)}function f(a,b,c){function d(){var b=c.parse(a,f),d=(new c.Compiler).compile(b,f),e=(new c.JavaScriptCompiler).compile(d,f,void 0,!0);return c.template(e)}function e(a,b){return g||(g=d()),g.call(this,a,b)}var f=void 0===arguments[1]?{}:arguments[1];if(null==a||"string"!=typeof a&&"Program"!==a.type)throw new k["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);"data"in f||(f.data=!0),f.compat&&(f.useDepths=!0);var g=void 0;return e._setup=function(a){return g||(g=d()),g._setup(a)},e._child=function(a,b,c,e){return g||(g=d()),g._child(a,b,c,e)},e}function g(a,b){if(a===b)return!0;if(l.isArray(a)&&l.isArray(b)&&a.length===b.length){for(var c=0;c<a.length;c++)if(!g(a[c],b[c]))return!1;return!0}}function h(a){if(!a.path.parts){var b=a.path;a.path=new n["default"].PathExpression(!1,0,[b.original+""],b.original+"",b.loc)}}var i=c(8)["default"];b.__esModule=!0,b.Compiler=d,b.precompile=e,b.compile=f;var j=c(11),k=i(j),l=c(12),m=c(2),n=i(m),o=[].slice;d.prototype={compiler:d,equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;b>c;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||!g(d.args,e.args))return!1}b=this.children.length;for(var c=0;b>c;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=b,this.stringParams=b.stringParams,this.trackIds=b.trackIds,b.blockParams=b.blockParams||[];var c=b.knownHelpers;if(b.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},c)for(var d in c)d in c&&(b.knownHelpers[d]=c[d]);return this.accept(a)},compileProgram:function(a){var b=new this.compiler,c=b.compile(a,this.options),d=this.guid++;return this.usePartial=this.usePartial||c.usePartial,this.children[d]=c,this.useDepths=this.useDepths||c.useDepths,d},accept:function(a){this.sourceNode.unshift(a);var b=this[a.type](a);return this.sourceNode.shift(),b},Program:function(a){this.options.blockParams.unshift(a.blockParams);for(var b=a.body,c=b.length,d=0;c>d;d++)this.accept(b[d]);return this.options.blockParams.shift(),this.isSimple=1===c,this.blockParams=a.blockParams?a.blockParams.length:0,this},BlockStatement:function(a){h(a);var b=a.program,c=a.inverse;b=b&&this.compileProgram(b),c=c&&this.compileProgram(c);var d=this.classifySexpr(a);"helper"===d?this.helperSexpr(a,b,c):"simple"===d?(this.simpleSexpr(a),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("blockValue",a.path.original)):(this.ambiguousSexpr(a,b,c),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},PartialStatement:function(a){this.usePartial=!0;var b=a.params;if(b.length>1)throw new k["default"]("Unsupported number of partial arguments: "+b.length,a);b.length||b.push({type:"PathExpression",parts:[],depth:0});var c=a.name.original,d="SubExpression"===a.name.type;d&&this.accept(a.name),this.setupFullMustacheParams(a,void 0,void 0,!0);var e=a.indent||"";this.options.preventIndent&&e&&(this.opcode("appendContent",e),e=""),this.opcode("invokePartial",d,c,e),this.opcode("append")},MustacheStatement:function(a){this.SubExpression(a),a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ContentStatement:function(a){a.value&&this.opcode("appendContent",a.value)},CommentStatement:function(){},SubExpression:function(a){h(a);var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ambiguousSexpr:function(a,b,c){var d=a.path,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.accept(d),this.opcode("invokeAmbiguous",e,f)},simpleSexpr:function(a){this.accept(a.path),this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.path,f=e.parts[0];if(this.options.knownHelpers[f])this.opcode("invokeKnownHelper",d.length,f);else{if(this.options.knownHelpersOnly)throw new k["default"]("You specified knownHelpersOnly, but used the unknown helper "+f,a);e.falsy=!0,this.accept(e),this.opcode("invokeHelper",d.length,e.original,n["default"].helpers.simpleId(e))}},PathExpression:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0],c=n["default"].helpers.scopedId(a),d=!a.depth&&!c&&this.blockParamIndex(b);d?this.opcode("lookupBlockParam",d,a.parts):b?a.data?(this.options.data=!0,this.opcode("lookupData",a.depth,a.parts)):this.opcode("lookupOnContext",a.parts,a.falsy,c):this.opcode("pushContext")},StringLiteral:function(a){this.opcode("pushString",a.value)},NumberLiteral:function(a){this.opcode("pushLiteral",a.value)},BooleanLiteral:function(a){this.opcode("pushLiteral",a.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(a){var b=a.pairs,c=0,d=b.length;for(this.opcode("pushHash");d>c;c++)this.pushParam(b[c].value);for(;c--;)this.opcode("assignToHash",b[c].key);this.opcode("popHash")},opcode:function(a){this.opcodes.push({opcode:a,args:o.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(a){a&&(this.useDepths=!0)},classifySexpr:function(a){var b=n["default"].helpers.simpleId(a.path),c=b&&!!this.blockParamIndex(a.path.parts[0]),d=!c&&n["default"].helpers.helperExpression(a),e=!c&&(d||b);if(e&&!d){var f=a.path.parts[0],g=this.options;g.knownHelpers[f]?d=!0:g.knownHelpersOnly&&(e=!1)}return d?"helper":e?"ambiguous":"simple"},pushParams:function(a){for(var b=0,c=a.length;c>b;b++)this.pushParam(a[b])},pushParam:function(a){var b=null!=a.value?a.value:a.original||"";if(this.stringParams)b.replace&&(b=b.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),a.depth&&this.addDepth(a.depth),this.opcode("getContext",a.depth||0),this.opcode("pushStringParam",b,a.type),"SubExpression"===a.type&&this.accept(a);else{if(this.trackIds){var c=void 0;if(!a.parts||n["default"].helpers.scopedId(a)||a.depth||(c=this.blockParamIndex(a.parts[0])),c){var d=a.parts.slice(1).join(".");this.opcode("pushId","BlockParam",c,d)}else b=a.original||b,b.replace&&(b=b.replace(/^\.\//g,"").replace(/^\.$/g,"")),this.opcode("pushId",a.type,b)}this.accept(a)}},setupFullMustacheParams:function(a,b,c,d){var e=a.params;return this.pushParams(e),
this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.accept(a.hash):this.opcode("emptyHash",d),e},blockParamIndex:function(a){for(var b=0,c=this.options.blockParams.length;c>b;b++){var d=this.options.blockParams[b],e=d&&l.indexOf(d,a);if(d&&e>=0)return[b,e]}}}},function(a,b,c){"use strict";function d(a){this.value=a}function e(){}function f(a,b,c,d){var e=b.popStack(),f=0,g=c.length;for(a&&g--;g>f;f++)e=b.nameLookup(e,c[f],d);return a?[b.aliasable("this.strict"),"(",e,", ",b.quotedString(c[f]),")"]:e}var g=c(8)["default"];b.__esModule=!0;var h=c(9),i=c(11),j=g(i),k=c(12),l=c(17),m=g(l);e.prototype={nameLookup:function(a,b){return e.isValidJavaScriptVariableName(b)?[a,".",b]:[a,"['",b,"']"]},depthedLookup:function(a){return[this.aliasable("this.lookup"),'(depths, "',a,'")']},compilerInfo:function(){var a=h.COMPILER_REVISION,b=h.REVISION_CHANGES[a];return[a,b]},appendToBuffer:function(a,b,c){return k.isArray(a)||(a=[a]),a=this.source.wrap(a,b),this.environment.isSimple?["return ",a,";"]:c?["buffer += ",a,";"]:(a.appendToBuffer=!0,a)},initializeBuffer:function(){return this.quotedString("")},compile:function(a,b,c,d){this.environment=a,this.options=b,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!d,this.name=this.environment.name,this.isChild=!!c,this.context=c||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(a,b),this.useDepths=this.useDepths||a.useDepths||this.options.compat,this.useBlockParams=this.useBlockParams||a.useBlockParams;var e=a.opcodes,f=void 0,g=void 0,h=void 0,i=void 0;for(h=0,i=e.length;i>h;h++)f=e[h],this.source.currentLocation=f.loc,g=g||f.loc,this[f.opcode].apply(this,f.args);if(this.source.currentLocation=g,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new j["default"]("Compile completed with content left on stack");var k=this.createFunctionContext(d);if(this.isChild)return k;var l={compiler:this.compilerInfo(),main:k},m=this.context.programs;for(h=0,i=m.length;i>h;h++)m[h]&&(l[h]=m[h]);return this.environment.usePartial&&(l.usePartial=!0),this.options.data&&(l.useData=!0),this.useDepths&&(l.useDepths=!0),this.useBlockParams&&(l.useBlockParams=!0),this.options.compat&&(l.compat=!0),d?l.compilerOptions=this.options:(l.compiler=JSON.stringify(l.compiler),this.source.currentLocation={start:{line:1,column:0}},l=this.objectLiteral(l),b.srcName?(l=l.toStringWithSourceMap({file:b.destName}),l.map=l.map&&l.map.toString()):l=l.toString()),l},preamble:function(){this.lastContext=0,this.source=new m["default"](this.options.srcName)},createFunctionContext:function(a){var b="",c=this.stackVars.concat(this.registers.list);c.length>0&&(b+=", "+c.join(", "));var d=0;for(var e in this.aliases){var f=this.aliases[e];this.aliases.hasOwnProperty(e)&&f.children&&f.referenceCount>1&&(b+=", alias"+ ++d+"="+e,f.children[0]="alias"+d)}var g=["depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&g.push("blockParams"),this.useDepths&&g.push("depths");var h=this.mergeSource(b);return a?(g.push(h),Function.apply(this,g)):this.source.wrap(["function(",g.join(","),") {\n  ",h,"}"])},mergeSource:function(a){var b=this.environment.isSimple,c=!this.forceBuffer,d=void 0,e=void 0,f=void 0,g=void 0;return this.source.each(function(a){a.appendToBuffer?(f?a.prepend("  + "):f=a,g=a):(f&&(e?f.prepend("buffer += "):d=!0,g.add(";"),f=g=void 0),e=!0,b||(c=!1))}),c?f?(f.prepend("return "),g.add(";")):e||this.source.push('return "";'):(a+=", buffer = "+(d?"":this.initializeBuffer()),f?(f.prepend("return buffer + "),g.add(";")):this.source.push("return buffer;")),a&&this.source.prepend("var "+a.substring(2)+(d?"":";\n")),this.source.merge()},blockValue:function(a){var b=this.aliasable("helpers.blockHelperMissing"),c=[this.contextName(0)];this.setupHelperArgs(a,0,c);var d=this.popStack();c.splice(1,0,d),this.push(this.source.functionCall(b,"call",c))},ambiguousBlockValue:function(){var a=this.aliasable("helpers.blockHelperMissing"),b=[this.contextName(0)];this.setupHelperArgs("",0,b,!0),this.flushInline();var c=this.topStack();b.splice(1,0,c),this.pushSource(["if (!",this.lastHelper,") { ",c," = ",this.source.functionCall(a,"call",b),"}"])},appendContent:function(a){this.pendingContent?a=this.pendingContent+a:this.pendingLocation=this.source.currentLocation,this.pendingContent=a},append:function(){if(this.isInline())this.replaceStack(function(a){return[" != null ? ",a,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var a=this.popStack();this.pushSource(["if (",a," != null) { ",this.appendToBuffer(a,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("this.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(a){this.lastContext=a},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(a,b,c){var d=0;c||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(a[d++])),this.resolvePath("context",a,d,b)},lookupBlockParam:function(a,b){this.useBlockParams=!0,this.push(["blockParams[",a[0],"][",a[1],"]"]),this.resolvePath("context",b,1)},lookupData:function(a,b){a?this.pushStackLiteral("this.data(data, "+a+")"):this.pushStackLiteral("data"),this.resolvePath("data",b,0,!0)},resolvePath:function(a,b,c,d){var e=this;if(this.options.strict||this.options.assumeObjects)return void this.push(f(this.options.strict,this,b,a));for(var g=b.length;g>c;c++)this.replaceStack(function(f){var g=e.nameLookup(f,b[c],a);return d?[" && ",g]:[" != null ? ",g," : ",f]})},resolvePossibleLambda:function(){this.push([this.aliasable("this.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(a,b){this.pushContext(),this.pushString(b),"SubExpression"!==b&&("string"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(a){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(a?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(a.ids)),this.stringParams&&(this.push(this.objectLiteral(a.contexts)),this.push(this.objectLiteral(a.types))),this.push(this.objectLiteral(a.values))},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},invokeHelper:function(a,b,c){var d=this.popStack(),e=this.setupHelper(a,b),f=c?[e.name," || "]:"",g=["("].concat(f,d);this.options.strict||g.push(" || ",this.aliasable("helpers.helperMissing")),g.push(")"),this.push(this.source.functionCall(g,"call",e.callParams))},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(this.source.functionCall(c.name,"call",c.callParams))},invokeAmbiguous:function(a,b){this.useRegister("helper");var c=this.popStack();this.emptyHash();var d=this.setupHelper(0,a,b),e=this.lastHelper=this.nameLookup("helpers",a,"helper"),f=["(","(helper = ",e," || ",c,")"];this.options.strict||(f[0]="(helper = ",f.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",f,d.paramsInit?["),(",d.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",d.callParams)," : helper))"])},invokePartial:function(a,b,c){var d=[],e=this.setupParams(b,1,d,!1);a&&(b=this.popStack(),delete e.name),c&&(e.indent=JSON.stringify(c)),e.helpers="helpers",e.partials="partials",a?d.unshift(b):d.unshift(this.nameLookup("partials",b,"partial")),this.options.compat&&(e.depths="depths"),e=this.objectLiteral(e),d.push(e),this.push(this.source.functionCall("this.invokePartial","",d))},assignToHash:function(a){var b=this.popStack(),c=void 0,d=void 0,e=void 0;this.trackIds&&(e=this.popStack()),this.stringParams&&(d=this.popStack(),c=this.popStack());var f=this.hash;c&&(f.contexts[a]=c),d&&(f.types[a]=d),e&&(f.ids[a]=e),f.values[a]=b},pushId:function(a,b,c){"BlockParam"===a?this.pushStackLiteral("blockParams["+b[0]+"].path["+b[1]+"]"+(c?" + "+JSON.stringify("."+c):"")):"PathExpression"===a?this.pushString(b):"SubExpression"===a?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:e,compileChildren:function(a,b){for(var c=a.children,d=void 0,e=void 0,f=0,g=c.length;g>f;f++){d=c[f],e=new this.compiler;var h=this.matchExistingProgram(d);null==h?(this.context.programs.push(""),h=this.context.programs.length,d.index=h,d.name="program"+h,this.context.programs[h]=e.compile(d,b,this.context,!this.precompile),this.context.environments[h]=d,this.useDepths=this.useDepths||e.useDepths,this.useBlockParams=this.useBlockParams||e.useBlockParams):(d.index=h,d.name="program"+h,this.useDepths=this.useDepths||d.useDepths,this.useBlockParams=this.useBlockParams||d.useBlockParams)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;c>b;b++){var d=this.context.environments[b];if(d&&d.equals(a))return b}},programExpression:function(a){var b=this.environment.children[a],c=[b.index,"data",b.blockParams];return(this.useBlockParams||this.useDepths)&&c.push("blockParams"),this.useDepths&&c.push("depths"),"this.program("+c.join(", ")+")"},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},push:function(a){return a instanceof d||(a=this.source.wrap(a)),this.inlineStack.push(a),a},pushStackLiteral:function(a){this.push(new d(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),a&&this.source.push(a)},replaceStack:function(a){var b=["("],c=void 0,e=void 0,f=void 0;if(!this.isInline())throw new j["default"]("replaceStack on non-inline");var g=this.popStack(!0);if(g instanceof d)c=[g.value],b=["(",c],f=!0;else{e=!0;var h=this.incrStack();b=["((",this.push(h)," = ",g,")"],c=this.topStack()}var i=a.call(this,c);f||this.popStack(),e&&this.stackSlot--,this.push(b.concat(i,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;this.inlineStack=[];for(var b=0,c=a.length;c>b;b++){var e=a[b];if(e instanceof d)this.compileStack.push(e);else{var f=this.incrStack();this.pushSource([f," = ",e,";"]),this.compileStack.push(f)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),c=(b?this.inlineStack:this.compileStack).pop();if(!a&&c instanceof d)return c.value;if(!b){if(!this.stackSlot)throw new j["default"]("Invalid stack pop");this.stackSlot--}return c},topStack:function(){var a=this.isInline()?this.inlineStack:this.compileStack,b=a[a.length-1];return b instanceof d?b.value:b},contextName:function(a){return this.useDepths&&a?"depths["+a+"]":"depth"+a},quotedString:function(a){return this.source.quotedString(a)},objectLiteral:function(a){return this.source.objectLiteral(a)},aliasable:function(a){var b=this.aliases[a];return b?(b.referenceCount++,b):(b=this.aliases[a]=this.source.wrap(a),b.aliasable=!0,b.referenceCount=1,b)},setupHelper:function(a,b,c){var d=[],e=this.setupHelperArgs(b,a,d,c),f=this.nameLookup("helpers",b,"helper");return{params:d,paramsInit:e,name:f,callParams:[this.contextName(0)].concat(d)}},setupParams:function(a,b,c){var d={},e=[],f=[],g=[],h=void 0;d.name=this.quotedString(a),d.hash=this.popStack(),this.trackIds&&(d.hashIds=this.popStack()),this.stringParams&&(d.hashTypes=this.popStack(),d.hashContexts=this.popStack());var i=this.popStack(),j=this.popStack();(j||i)&&(d.fn=j||"this.noop",d.inverse=i||"this.noop");for(var k=b;k--;)h=this.popStack(),c[k]=h,this.trackIds&&(g[k]=this.popStack()),this.stringParams&&(f[k]=this.popStack(),e[k]=this.popStack());return this.trackIds&&(d.ids=this.source.generateArray(g)),this.stringParams&&(d.types=this.source.generateArray(f),d.contexts=this.source.generateArray(e)),this.options.data&&(d.data="data"),this.useBlockParams&&(d.blockParams="blockParams"),d},setupHelperArgs:function(a,b,c,d){var e=this.setupParams(a,b,c,!0);return e=this.objectLiteral(e),d?(this.useRegister("options"),c.push("options"),["options=",e]):(c.push(e),"")}},function(){for(var a="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),b=e.RESERVED_WORDS={},c=0,d=a.length;d>c;c++)b[a[c]]=!0}(),e.isValidJavaScriptVariableName=function(a){return!e.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)},b["default"]=e,a.exports=b["default"]},function(a,b,c){"use strict";function d(){this.parents=[]}var e=c(8)["default"];b.__esModule=!0;var f=c(11),g=e(f),h=c(2),i=e(h);d.prototype={constructor:d,mutating:!1,acceptKey:function(a,b){var c=this.accept(a[b]);if(this.mutating){if(c&&(!c.type||!i["default"][c.type]))throw new g["default"]('Unexpected node type "'+c.type+'" found when accepting '+b+" on "+a.type);a[b]=c}},acceptRequired:function(a,b){if(this.acceptKey(a,b),!a[b])throw new g["default"](a.type+" requires "+b)},acceptArray:function(a){for(var b=0,c=a.length;c>b;b++)this.acceptKey(a,b),a[b]||(a.splice(b,1),b--,c--)},accept:function(a){if(a){this.current&&this.parents.unshift(this.current),this.current=a;var b=this[a.type](a);return this.current=this.parents.shift(),!this.mutating||b?b:b!==!1?a:void 0}},Program:function(a){this.acceptArray(a.body)},MustacheStatement:function(a){this.acceptRequired(a,"path"),this.acceptArray(a.params),this.acceptKey(a,"hash")},BlockStatement:function(a){this.acceptRequired(a,"path"),this.acceptArray(a.params),this.acceptKey(a,"hash"),this.acceptKey(a,"program"),this.acceptKey(a,"inverse")},PartialStatement:function(a){this.acceptRequired(a,"name"),this.acceptArray(a.params),this.acceptKey(a,"hash")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:function(a){this.acceptRequired(a,"path"),this.acceptArray(a.params),this.acceptKey(a,"hash")},PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(a){this.acceptArray(a.pairs)},HashPair:function(a){this.acceptRequired(a,"value")}},b["default"]=d,a.exports=b["default"]},function(a,b,c){(function(c){"use strict";b.__esModule=!0,b["default"]=function(a){var b="undefined"!=typeof c?c:window,d=b.Handlebars;a.noConflict=function(){b.Handlebars===a&&(b.Handlebars=d)}},a.exports=b["default"]}).call(b,function(){return this}())},function(a,b,c){"use strict";b["default"]=function(a){return a&&a.__esModule?a:{"default":a}},b.__esModule=!0},function(a,b,c){"use strict";function d(a,b){this.helpers=a||{},this.partials=b||{},e(this)}function e(a){a.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new k["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse,e=c.fn;if(b===!0)return e(this);if(b===!1||null==b)return d(this);if(o(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):d(this);if(c.data&&c.ids){var g=f(c.data);g.contextPath=i.appendContextPath(c.data.contextPath,c.name),c={data:g}}return e(b,c)}),a.registerHelper("each",function(a,b){function c(b,c,e){j&&(j.key=b,j.index=c,j.first=0===c,j.last=!!e,l&&(j.contextPath=l+b)),h+=d(a[b],{data:j,blockParams:i.blockParams([a[b],b],[l+b,null])})}if(!b)throw new k["default"]("Must pass iterator to #each");var d=b.fn,e=b.inverse,g=0,h="",j=void 0,l=void 0;if(b.data&&b.ids&&(l=i.appendContextPath(b.data.contextPath,b.ids[0])+"."),p(a)&&(a=a.call(this)),b.data&&(j=f(b.data)),a&&"object"==typeof a)if(o(a))for(var m=a.length;m>g;g++)c(g,g,g===a.length-1);else{var n=void 0;for(var q in a)a.hasOwnProperty(q)&&(n&&c(n,g-1),n=q,g++);n&&c(n,g-1,!0)}return 0===g&&(h=e(this)),h}),a.registerHelper("if",function(a,b){return p(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||i.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){p(a)&&(a=a.call(this));var c=b.fn;if(i.isEmpty(a))return b.inverse(this);if(b.data&&b.ids){var d=f(b.data);d.contextPath=i.appendContextPath(b.data.contextPath,b.ids[0]),b={data:d}}return c(a,b)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)}),a.registerHelper("lookup",function(a,b){return a&&a[b]})}function f(a){var b=i.extend({},a);return b._parent=a,b}var g=c(8)["default"];b.__esModule=!0,b.HandlebarsEnvironment=d,b.createFrame=f;var h=c(12),i=g(h),j=c(11),k=g(j),l="3.0.1";b.VERSION=l;var m=6;b.COMPILER_REVISION=m;var n={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};b.REVISION_CHANGES=n;var o=i.isArray,p=i.isFunction,q=i.toString,r="[object Object]";d.prototype={constructor:d,logger:s,log:t,registerHelper:function(a,b){if(q.call(a)===r){if(b)throw new k["default"]("Arg not supported with multiple helpers");i.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){if(q.call(a)===r)i.extend(this.partials,a);else{if("undefined"==typeof b)throw new k["default"]("Attempting to register a partial as undefined");this.partials[a]=b}},unregisterPartial:function(a){delete this.partials[a]}};var s={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(a,b){if("undefined"!=typeof console&&s.level<=a){var c=s.methodMap[a];(console[c]||console.log).call(console,b)}}};b.logger=s;var t=s.log;b.log=t},function(a,b,c){"use strict";function d(a){this.string=a}b.__esModule=!0,d.prototype.toString=d.prototype.toHTML=function(){return""+this.string},b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){var c=b&&b.loc,f=void 0,g=void 0;c&&(f=c.start.line,g=c.start.column,a+=" - "+f+":"+g);for(var h=Error.prototype.constructor.call(this,a),i=0;i<e.length;i++)this[e[i]]=h[e[i]];Error.captureStackTrace&&Error.captureStackTrace(this,d),c&&(this.lineNumber=f,this.column=g)}b.__esModule=!0;var e=["description","fileName","lineNumber","message","name","number","stack"];d.prototype=new Error,b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(a){return k[a]}function e(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function f(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}function g(a){if("string"!=typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+"";a=""+a}return m.test(a)?a.replace(l,d):a}function h(a){return a||0===a?p(a)&&0===a.length?!0:!1:!0}function i(a,b){return a.path=b,a}function j(a,b){return(a?a+".":"")+b}b.__esModule=!0,b.extend=e,b.indexOf=f,b.escapeExpression=g,b.isEmpty=h,b.blockParams=i,b.appendContextPath=j;var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,m=/[&<>"'`]/,n=Object.prototype.toString;b.toString=n;var o=function(a){return"function"==typeof a};o(/x/)&&(b.isFunction=o=function(a){return"function"==typeof a&&"[object Function]"===n.call(a)});var o;b.isFunction=o;var p=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===n.call(a):!1};b.isArray=p},function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=p.COMPILER_REVISION;if(b!==c){if(c>b){var d=p.REVISION_CHANGES[c],e=p.REVISION_CHANGES[b];throw new o["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new o["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){function c(c,d,e){e.hash&&(d=m.extend({},d,e.hash)),c=b.VM.resolvePartial.call(this,c,d,e);var f=b.VM.invokePartial.call(this,c,d,e);if(null==f&&b.compile&&(e.partials[e.name]=b.compile(c,a.compilerOptions,b),f=e.partials[e.name](d,e)),null!=f){if(e.indent){for(var g=f.split("\n"),h=0,i=g.length;i>h&&(g[h]||h+1!==i);h++)g[h]=e.indent+g[h];f=g.join("\n")}return f}throw new o["default"]("The partial "+e.name+" could not be compiled when running in runtime-only mode")}function d(b){var c=void 0===arguments[1]?{}:arguments[1],f=c.data;d._setup(c),!c.partial&&a.useData&&(f=j(b,f));var g=void 0,h=a.useBlockParams?[]:void 0;return a.useDepths&&(g=c.depths?[b].concat(c.depths):[b]),a.main.call(e,b,e.helpers,e.partials,f,h,g)}if(!b)throw new o["default"]("No environment passed to template");if(!a||!a.main)throw new o["default"]("Unknown template object: "+typeof a);b.VM.checkRevision(a.compiler);var e={strict:function(a,b){if(!(b in a))throw new o["default"]('"'+b+'" not defined in '+a);return a[b]},lookup:function(a,b){for(var c=a.length,d=0;c>d;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:m.escapeExpression,invokePartial:c,fn:function(b){return a[b]},programs:[],program:function(a,b,c,d,e){var g=this.programs[a],h=this.fn(a);return b||e||d||c?g=f(this,a,h,b,c,d,e):g||(g=this.programs[a]=f(this,a,h)),g},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=m.extend({},b,a)),c},noop:b.VM.noop,compilerInfo:a.compiler};return d.isTop=!0,d._setup=function(c){c.partial?(e.helpers=c.helpers,e.partials=c.partials):(e.helpers=e.merge(c.helpers,b.helpers),a.usePartial&&(e.partials=e.merge(c.partials,b.partials)))},d._child=function(b,c,d,g){if(a.useBlockParams&&!d)throw new o["default"]("must pass block params");if(a.useDepths&&!g)throw new o["default"]("must pass parent depths");return f(e,b,a[b],c,0,d,g)},d}function f(a,b,c,d,e,f,g){function h(b){var e=void 0===arguments[1]?{}:arguments[1];return c.call(a,b,a.helpers,a.partials,e.data||d,f&&[e.blockParams].concat(f),g&&[b].concat(g))}return h.program=b,h.depth=g?g.length:0,h.blockParams=e||0,h}function g(a,b,c){return a?a.call||c.name||(c.name=a,a=c.partials[a]):a=c.partials[c.name],a}function h(a,b,c){if(c.partial=!0,void 0===a)throw new o["default"]("The partial "+c.name+" could not be found");return a instanceof Function?a(b,c):void 0}function i(){return""}function j(a,b){return b&&"root"in b||(b=b?p.createFrame(b):{},b.root=a),b}var k=c(8)["default"];b.__esModule=!0,b.checkRevision=d,b.template=e,b.wrapProgram=f,b.resolvePartial=g,b.invokePartial=h,b.noop=i;var l=c(12),m=k(l),n=c(11),o=k(n),p=c(9)},function(a,b,c){"use strict";b.__esModule=!0;var d=function(){function a(){this.yy={}}var b={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,content:12,COMMENT:13,CONTENT:14,openRawBlock:15,END_RAW_BLOCK:16,OPEN_RAW_BLOCK:17,helperName:18,openRawBlock_repetition0:19,openRawBlock_option0:20,CLOSE_RAW_BLOCK:21,openBlock:22,block_option0:23,closeBlock:24,openInverse:25,block_option1:26,OPEN_BLOCK:27,openBlock_repetition0:28,openBlock_option0:29,openBlock_option1:30,CLOSE:31,OPEN_INVERSE:32,openInverse_repetition0:33,openInverse_option0:34,openInverse_option1:35,openInverseChain:36,OPEN_INVERSE_CHAIN:37,openInverseChain_repetition0:38,openInverseChain_option0:39,openInverseChain_option1:40,inverseAndProgram:41,INVERSE:42,inverseChain:43,inverseChain_option0:44,OPEN_ENDBLOCK:45,OPEN:46,mustache_repetition0:47,mustache_option0:48,OPEN_UNESCAPED:49,mustache_repetition1:50,mustache_option1:51,CLOSE_UNESCAPED:52,OPEN_PARTIAL:53,partialName:54,partial_repetition0:55,partial_option0:56,param:57,sexpr:58,OPEN_SEXPR:59,sexpr_repetition0:60,sexpr_option0:61,CLOSE_SEXPR:62,hash:63,hash_repetition_plus0:64,hashSegment:65,ID:66,EQUALS:67,blockParams:68,OPEN_BLOCK_PARAMS:69,blockParams_repetition_plus0:70,CLOSE_BLOCK_PARAMS:71,path:72,dataName:73,STRING:74,NUMBER:75,BOOLEAN:76,UNDEFINED:77,NULL:78,DATA:79,pathSegments:80,SEP:81,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",13:"COMMENT",14:"CONTENT",16:"END_RAW_BLOCK",17:"OPEN_RAW_BLOCK",21:"CLOSE_RAW_BLOCK",27:"OPEN_BLOCK",31:"CLOSE",32:"OPEN_INVERSE",37:"OPEN_INVERSE_CHAIN",42:"INVERSE",45:"OPEN_ENDBLOCK",46:"OPEN",49:"OPEN_UNESCAPED",52:"CLOSE_UNESCAPED",53:"OPEN_PARTIAL",59:"OPEN_SEXPR",62:"CLOSE_SEXPR",66:"ID",67:"EQUALS",69:"OPEN_BLOCK_PARAMS",71:"CLOSE_BLOCK_PARAMS",74:"STRING",75:"NUMBER",76:"BOOLEAN",77:"UNDEFINED",78:"NULL",79:"DATA",81:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[12,1],[10,3],[15,5],[9,4],[9,4],[22,6],[25,6],[36,6],[41,2],[43,3],[43,1],[24,3],[8,5],[8,5],[11,5],[57,1],[57,1],[58,5],[63,1],[65,3],[68,3],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[54,1],[54,1],[73,2],[72,1],[80,3],[80,1],[6,0],[6,2],[19,0],[19,2],[20,0],[20,1],[23,0],[23,1],[26,0],[26,1],[28,0],[28,2],[29,0],[29,1],[30,0],[30,1],[33,0],[33,2],[34,0],[34,1],[35,0],[35,1],[38,0],[38,2],[39,0],[39,1],[40,0],[40,1],[44,0],[44,1],[47,0],[47,2],[48,0],[48,1],[50,0],[50,2],[51,0],[51,1],[55,0],[55,2],[56,0],[56,1],[60,0],[60,2],[61,0],[61,1],[64,1],[64,2],[70,1],[70,2]],performAction:function(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:return f[h-1];case 2:this.$=new d.Program(f[h],null,{},d.locInfo(this._$));break;case 3:this.$=f[h];break;case 4:this.$=f[h];break;case 5:this.$=f[h];break;case 6:this.$=f[h];break;case 7:this.$=f[h];break;case 8:this.$=new d.CommentStatement(d.stripComment(f[h]),d.stripFlags(f[h],f[h]),d.locInfo(this._$));break;case 9:this.$=new d.ContentStatement(f[h],d.locInfo(this._$));break;case 10:this.$=d.prepareRawBlock(f[h-2],f[h-1],f[h],this._$);break;case 11:this.$={path:f[h-3],params:f[h-2],hash:f[h-1]};break;case 12:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!1,this._$);break;case 13:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!0,this._$);break;case 14:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 15:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 16:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 17:this.$={strip:d.stripFlags(f[h-1],f[h-1]),program:f[h]};break;case 18:var i=d.prepareBlock(f[h-2],f[h-1],f[h],f[h],!1,this._$),j=new d.Program([i],null,{},d.locInfo(this._$));j.chained=!0,this.$={strip:f[h-2].strip,program:j,chain:!0};break;case 19:this.$=f[h];break;case 20:this.$={path:f[h-1],strip:d.stripFlags(f[h-2],f[h])};break;case 21:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);break;case 22:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);break;case 23:this.$=new d.PartialStatement(f[h-3],f[h-2],f[h-1],d.stripFlags(f[h-4],f[h]),d.locInfo(this._$));break;case 24:this.$=f[h];break;case 25:this.$=f[h];break;case 26:this.$=new d.SubExpression(f[h-3],f[h-2],f[h-1],d.locInfo(this._$));break;case 27:this.$=new d.Hash(f[h],d.locInfo(this._$));break;case 28:this.$=new d.HashPair(d.id(f[h-2]),f[h],d.locInfo(this._$));break;case 29:this.$=d.id(f[h-1]);break;case 30:this.$=f[h];break;case 31:this.$=f[h];break;case 32:this.$=new d.StringLiteral(f[h],d.locInfo(this._$));break;case 33:this.$=new d.NumberLiteral(f[h],d.locInfo(this._$));break;case 34:this.$=new d.BooleanLiteral(f[h],d.locInfo(this._$));break;case 35:this.$=new d.UndefinedLiteral(d.locInfo(this._$));break;case 36:this.$=new d.NullLiteral(d.locInfo(this._$));break;case 37:this.$=f[h];break;case 38:this.$=f[h];break;case 39:this.$=d.preparePath(!0,f[h],this._$);break;case 40:this.$=d.preparePath(!1,f[h],this._$);break;case 41:f[h-2].push({part:d.id(f[h]),original:f[h],separator:f[h-1]}),this.$=f[h-2];break;case 42:this.$=[{part:d.id(f[h]),original:f[h]}];break;case 43:this.$=[];break;case 44:f[h-1].push(f[h]);break;case 45:this.$=[];break;case 46:f[h-1].push(f[h]);break;case 53:this.$=[];break;case 54:f[h-1].push(f[h]);break;case 59:this.$=[];break;case 60:f[h-1].push(f[h]);break;case 65:this.$=[];break;case 66:f[h-1].push(f[h]);break;case 73:this.$=[];break;case 74:f[h-1].push(f[h]);break;case 77:this.$=[];break;case 78:f[h-1].push(f[h]);break;case 81:this.$=[];break;case 82:f[h-1].push(f[h]);break;case 85:this.$=[];break;case 86:f[h-1].push(f[h]);break;case 89:this.$=[f[h]];break;case 90:f[h-1].push(f[h]);break;case 91:this.$=[f[h]];break;case 92:f[h-1].push(f[h])}},table:[{3:1,4:2,5:[2,43],6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],46:[2,43],49:[2,43],53:[2,43]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:[1,11],14:[1,18],15:16,17:[1,21],22:14,25:15,27:[1,19],32:[1,20],37:[2,2],42:[2,2],45:[2,2],46:[1,12],49:[1,13],53:[1,17]},{1:[2,1]},{5:[2,44],13:[2,44],14:[2,44],17:[2,44],27:[2,44],32:[2,44],37:[2,44],42:[2,44],45:[2,44],46:[2,44],49:[2,44],53:[2,44]},{5:[2,3],13:[2,3],14:[2,3],17:[2,3],27:[2,3],32:[2,3],37:[2,3],42:[2,3],45:[2,3],46:[2,3],49:[2,3],53:[2,3]},{5:[2,4],13:[2,4],14:[2,4],17:[2,4],27:[2,4],32:[2,4],37:[2,4],42:[2,4],45:[2,4],46:[2,4],49:[2,4],53:[2,4]},{5:[2,5],13:[2,5],14:[2,5],17:[2,5],27:[2,5],32:[2,5],37:[2,5],42:[2,5],45:[2,5],46:[2,5],49:[2,5],53:[2,5]},{5:[2,6],13:[2,6],14:[2,6],17:[2,6],27:[2,6],32:[2,6],37:[2,6],42:[2,6],45:[2,6],46:[2,6],49:[2,6],53:[2,6]},{5:[2,7],13:[2,7],14:[2,7],17:[2,7],27:[2,7],32:[2,7],37:[2,7],42:[2,7],45:[2,7],46:[2,7],49:[2,7],53:[2,7]},{5:[2,8],13:[2,8],14:[2,8],17:[2,8],27:[2,8],32:[2,8],37:[2,8],42:[2,8],45:[2,8],46:[2,8],49:[2,8],53:[2,8]},{18:22,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:33,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:34,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{4:35,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{12:36,14:[1,18]},{18:38,54:37,58:39,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,9],13:[2,9],14:[2,9],16:[2,9],17:[2,9],27:[2,9],32:[2,9],37:[2,9],42:[2,9],45:[2,9],46:[2,9],49:[2,9],53:[2,9]},{18:41,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:42,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:43,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[2,73],47:44,59:[2,73],66:[2,73],74:[2,73],75:[2,73],76:[2,73],77:[2,73],78:[2,73],79:[2,73]},{21:[2,30],31:[2,30],52:[2,30],59:[2,30],62:[2,30],66:[2,30],69:[2,30],74:[2,30],75:[2,30],76:[2,30],77:[2,30],78:[2,30],79:[2,30]},{21:[2,31],31:[2,31],52:[2,31],59:[2,31],62:[2,31],66:[2,31],69:[2,31],74:[2,31],75:[2,31],76:[2,31],77:[2,31],78:[2,31],79:[2,31]},{21:[2,32],31:[2,32],52:[2,32],59:[2,32],62:[2,32],66:[2,32],69:[2,32],74:[2,32],75:[2,32],76:[2,32],
77:[2,32],78:[2,32],79:[2,32]},{21:[2,33],31:[2,33],52:[2,33],59:[2,33],62:[2,33],66:[2,33],69:[2,33],74:[2,33],75:[2,33],76:[2,33],77:[2,33],78:[2,33],79:[2,33]},{21:[2,34],31:[2,34],52:[2,34],59:[2,34],62:[2,34],66:[2,34],69:[2,34],74:[2,34],75:[2,34],76:[2,34],77:[2,34],78:[2,34],79:[2,34]},{21:[2,35],31:[2,35],52:[2,35],59:[2,35],62:[2,35],66:[2,35],69:[2,35],74:[2,35],75:[2,35],76:[2,35],77:[2,35],78:[2,35],79:[2,35]},{21:[2,36],31:[2,36],52:[2,36],59:[2,36],62:[2,36],66:[2,36],69:[2,36],74:[2,36],75:[2,36],76:[2,36],77:[2,36],78:[2,36],79:[2,36]},{21:[2,40],31:[2,40],52:[2,40],59:[2,40],62:[2,40],66:[2,40],69:[2,40],74:[2,40],75:[2,40],76:[2,40],77:[2,40],78:[2,40],79:[2,40],81:[1,45]},{66:[1,32],80:46},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{50:47,52:[2,77],59:[2,77],66:[2,77],74:[2,77],75:[2,77],76:[2,77],77:[2,77],78:[2,77],79:[2,77]},{23:48,36:50,37:[1,52],41:51,42:[1,53],43:49,45:[2,49]},{26:54,41:55,42:[1,53],45:[2,51]},{16:[1,56]},{31:[2,81],55:57,59:[2,81],66:[2,81],74:[2,81],75:[2,81],76:[2,81],77:[2,81],78:[2,81],79:[2,81]},{31:[2,37],59:[2,37],66:[2,37],74:[2,37],75:[2,37],76:[2,37],77:[2,37],78:[2,37],79:[2,37]},{31:[2,38],59:[2,38],66:[2,38],74:[2,38],75:[2,38],76:[2,38],77:[2,38],78:[2,38],79:[2,38]},{18:58,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{28:59,31:[2,53],59:[2,53],66:[2,53],69:[2,53],74:[2,53],75:[2,53],76:[2,53],77:[2,53],78:[2,53],79:[2,53]},{31:[2,59],33:60,59:[2,59],66:[2,59],69:[2,59],74:[2,59],75:[2,59],76:[2,59],77:[2,59],78:[2,59],79:[2,59]},{19:61,21:[2,45],59:[2,45],66:[2,45],74:[2,45],75:[2,45],76:[2,45],77:[2,45],78:[2,45],79:[2,45]},{18:65,31:[2,75],48:62,57:63,58:66,59:[1,40],63:64,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{66:[1,70]},{21:[2,39],31:[2,39],52:[2,39],59:[2,39],62:[2,39],66:[2,39],69:[2,39],74:[2,39],75:[2,39],76:[2,39],77:[2,39],78:[2,39],79:[2,39],81:[1,45]},{18:65,51:71,52:[2,79],57:72,58:66,59:[1,40],63:73,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{24:74,45:[1,75]},{45:[2,50]},{4:76,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{45:[2,19]},{18:77,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:78,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{24:79,45:[1,75]},{45:[2,52]},{5:[2,10],13:[2,10],14:[2,10],17:[2,10],27:[2,10],32:[2,10],37:[2,10],42:[2,10],45:[2,10],46:[2,10],49:[2,10],53:[2,10]},{18:65,31:[2,83],56:80,57:81,58:66,59:[1,40],63:82,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{59:[2,85],60:83,62:[2,85],66:[2,85],74:[2,85],75:[2,85],76:[2,85],77:[2,85],78:[2,85],79:[2,85]},{18:65,29:84,31:[2,55],57:85,58:66,59:[1,40],63:86,64:67,65:68,66:[1,69],69:[2,55],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,31:[2,61],34:87,57:88,58:66,59:[1,40],63:89,64:67,65:68,66:[1,69],69:[2,61],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,20:90,21:[2,47],57:91,58:66,59:[1,40],63:92,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[1,93]},{31:[2,74],59:[2,74],66:[2,74],74:[2,74],75:[2,74],76:[2,74],77:[2,74],78:[2,74],79:[2,74]},{31:[2,76]},{21:[2,24],31:[2,24],52:[2,24],59:[2,24],62:[2,24],66:[2,24],69:[2,24],74:[2,24],75:[2,24],76:[2,24],77:[2,24],78:[2,24],79:[2,24]},{21:[2,25],31:[2,25],52:[2,25],59:[2,25],62:[2,25],66:[2,25],69:[2,25],74:[2,25],75:[2,25],76:[2,25],77:[2,25],78:[2,25],79:[2,25]},{21:[2,27],31:[2,27],52:[2,27],62:[2,27],65:94,66:[1,95],69:[2,27]},{21:[2,89],31:[2,89],52:[2,89],62:[2,89],66:[2,89],69:[2,89]},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],67:[1,96],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{21:[2,41],31:[2,41],52:[2,41],59:[2,41],62:[2,41],66:[2,41],69:[2,41],74:[2,41],75:[2,41],76:[2,41],77:[2,41],78:[2,41],79:[2,41],81:[2,41]},{52:[1,97]},{52:[2,78],59:[2,78],66:[2,78],74:[2,78],75:[2,78],76:[2,78],77:[2,78],78:[2,78],79:[2,78]},{52:[2,80]},{5:[2,12],13:[2,12],14:[2,12],17:[2,12],27:[2,12],32:[2,12],37:[2,12],42:[2,12],45:[2,12],46:[2,12],49:[2,12],53:[2,12]},{18:98,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{36:50,37:[1,52],41:51,42:[1,53],43:100,44:99,45:[2,71]},{31:[2,65],38:101,59:[2,65],66:[2,65],69:[2,65],74:[2,65],75:[2,65],76:[2,65],77:[2,65],78:[2,65],79:[2,65]},{45:[2,17]},{5:[2,13],13:[2,13],14:[2,13],17:[2,13],27:[2,13],32:[2,13],37:[2,13],42:[2,13],45:[2,13],46:[2,13],49:[2,13],53:[2,13]},{31:[1,102]},{31:[2,82],59:[2,82],66:[2,82],74:[2,82],75:[2,82],76:[2,82],77:[2,82],78:[2,82],79:[2,82]},{31:[2,84]},{18:65,57:104,58:66,59:[1,40],61:103,62:[2,87],63:105,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{30:106,31:[2,57],68:107,69:[1,108]},{31:[2,54],59:[2,54],66:[2,54],69:[2,54],74:[2,54],75:[2,54],76:[2,54],77:[2,54],78:[2,54],79:[2,54]},{31:[2,56],69:[2,56]},{31:[2,63],35:109,68:110,69:[1,108]},{31:[2,60],59:[2,60],66:[2,60],69:[2,60],74:[2,60],75:[2,60],76:[2,60],77:[2,60],78:[2,60],79:[2,60]},{31:[2,62],69:[2,62]},{21:[1,111]},{21:[2,46],59:[2,46],66:[2,46],74:[2,46],75:[2,46],76:[2,46],77:[2,46],78:[2,46],79:[2,46]},{21:[2,48]},{5:[2,21],13:[2,21],14:[2,21],17:[2,21],27:[2,21],32:[2,21],37:[2,21],42:[2,21],45:[2,21],46:[2,21],49:[2,21],53:[2,21]},{21:[2,90],31:[2,90],52:[2,90],62:[2,90],66:[2,90],69:[2,90]},{67:[1,96]},{18:65,57:112,58:66,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,22],13:[2,22],14:[2,22],17:[2,22],27:[2,22],32:[2,22],37:[2,22],42:[2,22],45:[2,22],46:[2,22],49:[2,22],53:[2,22]},{31:[1,113]},{45:[2,18]},{45:[2,72]},{18:65,31:[2,67],39:114,57:115,58:66,59:[1,40],63:116,64:67,65:68,66:[1,69],69:[2,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,23],13:[2,23],14:[2,23],17:[2,23],27:[2,23],32:[2,23],37:[2,23],42:[2,23],45:[2,23],46:[2,23],49:[2,23],53:[2,23]},{62:[1,117]},{59:[2,86],62:[2,86],66:[2,86],74:[2,86],75:[2,86],76:[2,86],77:[2,86],78:[2,86],79:[2,86]},{62:[2,88]},{31:[1,118]},{31:[2,58]},{66:[1,120],70:119},{31:[1,121]},{31:[2,64]},{14:[2,11]},{21:[2,28],31:[2,28],52:[2,28],62:[2,28],66:[2,28],69:[2,28]},{5:[2,20],13:[2,20],14:[2,20],17:[2,20],27:[2,20],32:[2,20],37:[2,20],42:[2,20],45:[2,20],46:[2,20],49:[2,20],53:[2,20]},{31:[2,69],40:122,68:123,69:[1,108]},{31:[2,66],59:[2,66],66:[2,66],69:[2,66],74:[2,66],75:[2,66],76:[2,66],77:[2,66],78:[2,66],79:[2,66]},{31:[2,68],69:[2,68]},{21:[2,26],31:[2,26],52:[2,26],59:[2,26],62:[2,26],66:[2,26],69:[2,26],74:[2,26],75:[2,26],76:[2,26],77:[2,26],78:[2,26],79:[2,26]},{13:[2,14],14:[2,14],17:[2,14],27:[2,14],32:[2,14],37:[2,14],42:[2,14],45:[2,14],46:[2,14],49:[2,14],53:[2,14]},{66:[1,125],71:[1,124]},{66:[2,91],71:[2,91]},{13:[2,15],14:[2,15],17:[2,15],27:[2,15],32:[2,15],42:[2,15],45:[2,15],46:[2,15],49:[2,15],53:[2,15]},{31:[1,126]},{31:[2,70]},{31:[2,29]},{66:[2,92],71:[2,92]},{13:[2,16],14:[2,16],17:[2,16],27:[2,16],32:[2,16],37:[2,16],42:[2,16],45:[2,16],46:[2,16],49:[2,16],53:[2,16]}],defaultActions:{4:[2,1],49:[2,50],51:[2,19],55:[2,52],64:[2,76],73:[2,80],78:[2,17],82:[2,84],92:[2,48],99:[2,18],100:[2,72],105:[2,88],107:[2,58],110:[2,64],111:[2,11],123:[2,70],124:[2,29]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:((null===n||"undefined"==typeof n)&&(n=b()),q=g[p]&&g[p][n]),"undefined"==typeof q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),"undefined"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},c=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if("\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return b.yytext=b.yytext.substr(5,b.yyleng-9),this.popState(),16;case 4:return 14;case 5:return this.popState(),13;case 6:return 59;case 7:return 62;case 8:return 17;case 9:return this.popState(),this.begin("raw"),21;case 10:return 53;case 11:return 27;case 12:return 45;case 13:return this.popState(),42;case 14:return this.popState(),42;case 15:return 32;case 16:return 37;case 17:return 49;case 18:return 46;case 19:this.unput(b.yytext),this.popState(),this.begin("com");break;case 20:return this.popState(),13;case 21:return 46;case 22:return 67;case 23:return 66;case 24:return 66;case 25:return 81;case 26:break;case 27:return this.popState(),52;case 28:return this.popState(),31;case 29:return b.yytext=e(1,2).replace(/\\"/g,'"'),74;case 30:return b.yytext=e(1,2).replace(/\\'/g,"'"),74;case 31:return 79;case 32:return 76;case 33:return 76;case 34:return 77;case 35:return 78;case 36:return 75;case 37:return 69;case 38:return 71;case 39:return 66;case 40:return 66;case 41:return"INVALID";case 42:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,42],inclusive:!0}},a}();return b.lexer=c,a.prototype=b,b.Parser=a,new a}();b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(){}function e(a,b,c){void 0===b&&(b=a.length);var d=a[b-1],e=a[b-2];return d?"ContentStatement"===d.type?(e||!c?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(d.original):void 0:c}function f(a,b,c){void 0===b&&(b=-1);var d=a[b+1],e=a[b+2];return d?"ContentStatement"===d.type?(e||!c?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(d.original):void 0:c}function g(a,b,c){var d=a[null==b?0:b+1];if(d&&"ContentStatement"===d.type&&(c||!d.rightStripped)){var e=d.value;d.value=d.value.replace(c?/^\s+/:/^[ \t]*\r?\n?/,""),d.rightStripped=d.value!==e}}function h(a,b,c){var d=a[null==b?a.length-1:b-1];if(d&&"ContentStatement"===d.type&&(c||!d.leftStripped)){var e=d.value;return d.value=d.value.replace(c?/\s+$/:/[ \t]+$/,""),d.leftStripped=d.value!==e,d.leftStripped}}var i=c(8)["default"];b.__esModule=!0;var j=c(6),k=i(j);d.prototype=new k["default"],d.prototype.Program=function(a){var b=!this.isRootSeen;this.isRootSeen=!0;for(var c=a.body,d=0,i=c.length;i>d;d++){var j=c[d],k=this.accept(j);if(k){var l=e(c,d,b),m=f(c,d,b),n=k.openStandalone&&l,o=k.closeStandalone&&m,p=k.inlineStandalone&&l&&m;k.close&&g(c,d,!0),k.open&&h(c,d,!0),p&&(g(c,d),h(c,d)&&"PartialStatement"===j.type&&(j.indent=/([ \t]+$)/.exec(c[d-1].original)[1])),n&&(g((j.program||j.inverse).body),h(c,d)),o&&(g(c,d),h((j.inverse||j.program).body))}}return a},d.prototype.BlockStatement=function(a){this.accept(a.program),this.accept(a.inverse);var b=a.program||a.inverse,c=a.program&&a.inverse,d=c,i=c;if(c&&c.chained)for(d=c.body[0].program;i.chained;)i=i.body[i.body.length-1].program;var j={open:a.openStrip.open,close:a.closeStrip.close,openStandalone:f(b.body),closeStandalone:e((d||b).body)};if(a.openStrip.close&&g(b.body,null,!0),c){var k=a.inverseStrip;k.open&&h(b.body,null,!0),k.close&&g(d.body,null,!0),a.closeStrip.open&&h(i.body,null,!0),e(b.body)&&f(d.body)&&(h(b.body),g(d.body))}else a.closeStrip.open&&h(b.body,null,!0);return j},d.prototype.MustacheStatement=function(a){return a.strip},d.prototype.PartialStatement=d.prototype.CommentStatement=function(a){var b=a.strip||{};return{inlineStandalone:!0,open:b.open,close:b.close}},b["default"]=d,a.exports=b["default"]},function(a,b,c){"use strict";function d(a,b){this.source=a,this.start={line:b.first_line,column:b.first_column},this.end={line:b.last_line,column:b.last_column}}function e(a){return/^\[.*\]$/.test(a)?a.substr(1,a.length-2):a}function f(a,b){return{open:"~"===a.charAt(2),close:"~"===b.charAt(b.length-3)}}function g(a){return a.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function h(a,b,c){c=this.locInfo(c);for(var d=a?"@":"",e=[],f=0,g="",h=0,i=b.length;i>h;h++){var j=b[h].part,k=b[h].original!==j;if(d+=(b[h].separator||"")+j,k||".."!==j&&"."!==j&&"this"!==j)e.push(j);else{if(e.length>0)throw new n["default"]("Invalid path: "+d,{loc:c});".."===j&&(f++,g+="../")}}return new this.PathExpression(a,f,e,d,c)}function i(a,b,c,d,e,f){var g=d.charAt(3)||d.charAt(2),h="{"!==g&&"&"!==g;return new this.MustacheStatement(a,b,c,h,e,this.locInfo(f))}function j(a,b,c,d){if(a.path.original!==c){var e={loc:a.path.loc};throw new n["default"](a.path.original+" doesn't match "+c,e)}d=this.locInfo(d);var f=new this.Program([b],null,{},d);return new this.BlockStatement(a.path,a.params,a.hash,f,void 0,{},{},{},d)}function k(a,b,c,d,e,f){if(d&&d.path&&a.path.original!==d.path.original){var g={loc:a.path.loc};throw new n["default"](a.path.original+" doesn't match "+d.path.original,g)}b.blockParams=a.blockParams;var h=void 0,i=void 0;return c&&(c.chain&&(c.program.body[0].closeStrip=d.strip),i=c.strip,h=c.program),e&&(e=h,h=b,b=e),new this.BlockStatement(a.path,a.params,a.hash,b,h,a.strip,i,d&&d.strip,this.locInfo(f))}var l=c(8)["default"];b.__esModule=!0,b.SourceLocation=d,b.id=e,b.stripFlags=f,b.stripComment=g,b.preparePath=h,b.prepareMustache=i,b.prepareRawBlock=j,b.prepareBlock=k;var m=c(11),n=l(m)},function(a,b,c){"use strict";function d(a,b,c){if(f.isArray(a)){for(var d=[],e=0,g=a.length;g>e;e++)d.push(b.wrap(a[e],c));return d}return"boolean"==typeof a||"number"==typeof a?a+"":a}function e(a){this.srcFile=a,this.source=[]}b.__esModule=!0;var f=c(12),g=void 0;try{}catch(h){}g||(g=function(a,b,c,d){this.src="",d&&this.add(d)},g.prototype={add:function(a){f.isArray(a)&&(a=a.join("")),this.src+=a},prepend:function(a){f.isArray(a)&&(a=a.join("")),this.src=a+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),e.prototype={prepend:function(a,b){this.source.unshift(this.wrap(a,b))},push:function(a,b){this.source.push(this.wrap(a,b))},merge:function(){var a=this.empty();return this.each(function(b){a.add(["  ",b,"\n"])}),a},each:function(a){for(var b=0,c=this.source.length;c>b;b++)a(this.source[b])},empty:function(){var a=void 0===arguments[0]?this.currentLocation||{start:{}}:arguments[0];return new g(a.start.line,a.start.column,this.srcFile)},wrap:function(a){var b=void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return a instanceof g?a:(a=d(a,this,b),new g(b.start.line,b.start.column,this.srcFile,a))},functionCall:function(a,b,c){return c=this.generateList(c),this.wrap([a,b?"."+b+"(":"(",c,")"])},quotedString:function(a){return'"'+(a+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(a){var b=[];for(var c in a)if(a.hasOwnProperty(c)){var e=d(a[c],this);"undefined"!==e&&b.push([this.quotedString(c),":",e])}var f=this.generateList(b);return f.prepend("{"),f.add("}"),f},generateList:function(a,b){for(var c=this.empty(b),e=0,f=a.length;f>e;e++)e&&c.add(","),c.add(d(a[e],this,b));return c},generateArray:function(a,b){var c=this.generateList(a,b);return c.prepend("["),c.add("]"),c}},b["default"]=e,a.exports=b["default"]}])}),function(a,b){"function"==typeof define&&define.amd?define("bam-handlebars-helpers/utils/client",["handlebars/handlebars"],b):"object"==typeof exports?module.exports=b(require("handlebars/handlebars")):a.CustomHelpers=b(a.Handlebars)}(this,function(a){var b={registerHelpers:function(b){for(var c in b)a.registerHelper(c,b[c])}};return b}),define("media-app-core/views/application",["backbone","media-app-core/models/applicationState","bam-handlebars-helpers/index","bam-handlebars-helpers/utils/client"],function(a,b,c,d){var e=a.View.extend({viewName:"Application",containerId:null,initialize:function(){var a=b.get("mediaConfig"),e=a.get("videocore.property",null),f=a.get("videocore.property_state.container");b.set("property",e),window.dataBootstrap.pageConfig&&b.set("isSponsored",window.dataBootstrap.pageConfig.sponsored?window.dataBootstrap.pageConfig.sponsored:!1),0===f.indexOf("#")&&(f=f.substring(1,f.length)),this.containerId=f,d.registerHelpers(c.helpers)},updateUrl:function(a){if(history&&history.replaceState){var b=a.get("title")||document.title,c=a.get("path"),d=a.get("data");d={metadata:"pass through is disabled. see updateUrl() in core application view"};var e="";if(c&&window.isDefaultTopic){var f=c.split("?");e=f[0]}else e=c;history.replaceState(d,b,e)}}});return e}),define("text",["module"],function(a){"use strict";var b,c,d,e,f,g=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],h=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,i=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,j="undefined"!=typeof location&&location.href,k=j&&location.protocol&&location.protocol.replace(/\:/,""),l=j&&location.hostname,m=j&&(location.port||void 0),n={},o=a.config&&a.config()||{};return b={version:"2.0.10",strip:function(a){if(a){a=a.replace(h,"");var b=a.match(i);b&&(a=b[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:o.createXhr||function(){var a,b,c;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(b=0;3>b;b+=1){c=g[b];try{a=new ActiveXObject(c)}catch(d){}if(a){g=[c];break}}return a},parseName:function(a){var b,c,d,e=!1,f=a.indexOf("."),g=0===a.indexOf("./")||0===a.indexOf("../");return-1!==f&&(!g||f>1)?(b=a.substring(0,f),c=a.substring(f+1,a.length)):b=a,d=c||b,f=d.indexOf("!"),-1!==f&&(e="strip"===d.substring(f+1),d=d.substring(0,f),c?c=d:b=d),{moduleName:b,ext:c,strip:e}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,c,d,e){var f,g,h,i=b.xdRegExp.exec(a);return i?(f=i[2],g=i[3],g=g.split(":"),h=g[1],g=g[0],!(f&&f!==c||g&&g.toLowerCase()!==d.toLowerCase()||(h||g)&&h!==e)):!0},finishLoad:function(a,c,d,e){d=c?b.strip(d):d,o.isBuild&&(n[a]=d),e(d)},load:function(a,c,d,e){if(e.isBuild&&!e.inlineText)return void d();o.isBuild=e.isBuild;var f=b.parseName(a),g=f.moduleName+(f.ext?"."+f.ext:""),h=c.toUrl(g),i=o.useXhr||b.useXhr;return 0===h.indexOf("empty:")?void d():void(!j||i(h,k,l,m)?b.get(h,function(c){b.finishLoad(a,f.strip,c,d)},function(a){d.error&&d.error(a)}):c([g],function(a){b.finishLoad(f.moduleName+"."+f.ext,f.strip,a,d)}))},write:function(a,c,d,e){if(n.hasOwnProperty(c)){var f=b.jsEscape(n[c]);d.asModule(a+"!"+c,"define(function () { return '"+f+"';});\n")}},writeFile:function(a,c,d,e,f){var g=b.parseName(c),h=g.ext?"."+g.ext:"",i=g.moduleName+h,j=d.toUrl(g.moduleName+h)+".js";b.load(i,d,function(c){var d=function(a){return e(j,a)};d.asModule=function(a,b){return e.asModule(a,j,b)},b.write(a,i,d,f)},f)}},"node"===o.env||!o.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(c=require.nodeRequire("fs"),b.get=function(a,b,d){try{var e=c.readFileSync(a,"utf8");0===e.indexOf("\ufeff")&&(e=e.substring(1)),b(e)}catch(f){d(f)}}):"xhr"===o.env||!o.env&&b.createXhr()?b.get=function(a,c,d,e){var f,g=b.createXhr();if(g.open("GET",a,!0),e)for(f in e)e.hasOwnProperty(f)&&g.setRequestHeader(f.toLowerCase(),e[f]);o.onXhr&&o.onXhr(g,a),g.onreadystatechange=function(b){var e,f;4===g.readyState&&(e=g.status,e>399&&600>e?(f=new Error(a+" HTTP status: "+e),f.xhr=g,d(f)):c(g.responseText),o.onXhrComplete&&o.onXhrComplete(g,a))},g.send(null)}:"rhino"===o.env||!o.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?b.get=function(a,b){var c,d,e="utf-8",f=new java.io.File(a),g=java.lang.System.getProperty("line.separator"),h=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(f),e)),i="";try{for(c=new java.lang.StringBuffer,d=h.readLine(),d&&d.length()&&65279===d.charAt(0)&&(d=d.substring(1)),null!==d&&c.append(d);null!==(d=h.readLine());)c.append(g),c.append(d);i=String(c.toString())}finally{h.close()}b(i)}:("xpconnect"===o.env||!o.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(d=Components.classes,e=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),f="@mozilla.org/windows-registry-key;1"in d,b.get=function(a,b){var c,g,h,i={};f&&(a=a.replace(/\//g,"\\")),h=new FileUtils.File(a);try{c=d["@mozilla.org/network/file-input-stream;1"].createInstance(e.nsIFileInputStream),c.init(h,1,0,!1),g=d["@mozilla.org/intl/converter-input-stream;1"].createInstance(e.nsIConverterInputStream),g.init(c,"utf-8",c.available(),e.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),g.readString(c.available(),i),g.close(),c.close(),b(i.value)}catch(j){throw new Error((h&&h.path||"")+": "+j)}}),b}),define("text!media-app-core/templates/applicationView.html",[],function(){return'<section id="media-view" class="media-container">\n    <div id="{{{id}}}"></div>\n</section>\n'}),define("text!media-app/templates/applicationView.html",[],function(){return'<section class="media-app-view">\n    {{> application/mediaContainer }}\n    <section id="metadata" class="metadata">\n        <div id="metadata-container" class="metadata__wrapper"></div>\n        <div id="companion-ad-slot" class="metadata__ad-slot"></div>\n    </section>\n    <section id="playlists-view" class="playlists js-playlists"></section>\n    <section id="message-center"></section>\n</section>\n'}),define("text!media-app/templates/carousel-list-item.html",[],function(){return'<div class="video-preview">\n    {{#if item.useLinks}}\n    <a href="{{item.url}}">\n        {{/if}}\n        <div class="video-preview__image-link">\n            {{#if item.image}}\n            <img src="{{item.image.src}}" alt="{{item.title}}" />\n            {{else}}\n            <img src="{{item.thumbnailNotFound}}" alt="{{item.title}}" />\n            {{/if}}\n            <div class="video-preview__gradient"></div>\n        </div>\n        <div class="video-preview__meta">\n            <div class="video-preview__play-button">\n                <a href="#" class="video-preview__play-button-link"></a>\n            </div>\n            <div class="video-preview__meta-info">\n                {{#if tag}}\n                    <div class="video-meta__title-tag-container">\n                        <span class="video-meta__title-tag video-meta__title-tag--{{tag.type}}">\n                        {{tag.label}}\n                            {{#equals tag.type "statcast"}}\n                                <sup class="video-meta__title-tag-tm">TM</sup>\n                            {{/equals}}\n                        </span>\n                    </div>\n                {{/if}}\n                <h4 class="video-preview__blurb">{{{item.blurb}}}</h4>\n                <ul class="video-preview__time-share">\n                    <li class="video-preview__timestamp">{{{item.display_date}}} | {{{formatDuration item.duration}}}</li>\n                </ul>\n            </div><!-- /video-preview__meta-info -->\n        </div><!-- /video-preview__meta -->\n        {{#if item.useLinks}}\n    </a>\n    {{/if}}\n</div><!-- /video-preview -->\n<!-- TODO Make display_date/duration separator configurable? -->\n'}),define("text!media-app/templates/metadata.html",[],function(){return'<div class="video-meta">\n    {{#if tag}}\n    <div class="video-meta__title-tag-container">\n        <span class="video-meta__title-tag video-meta__title-tag--{{tag.type}}">\n            {{tag.label}}\n            {{#equals tag.type "statcast"}}\n            <sup class="video-meta__title-tag-tm">TM</sup>\n            {{/equals}}\n        </span>\n    </div>\n    {{/if}}\n\n    <h5 class="video-meta__title">\n        <span class="video-meta__title-text">{{{title}}}</span>\n        {{#equals appView "web"}}\n            <div class="video-meta__share video-meta__share--xl">{{> pattern/share social}}</div>\n        {{/equals}}\n    </h5>\n    <ul class="video-meta__list video-meta__date-duration">\n        <li class="video-meta__li video-meta__date">{{{formatDate date "MM/DD/YY" }}}</li>\n        <li class="video-meta__li video-meta__list-sep">|</li>\n        <li class="video-meta__li video-meta__duration">{{{formatDuration duration}}}</li>\n    </ul>\n    <div class="video-meta-accordion">\n        <svg class="p-icon p-icon--accordion-contract p-accordion__icon p-accordion__icon--contract">\n            <use xlink:href="#icon-accordion-contract"></use>\n        </svg>\n        <svg class="p-icon p-icon--accordion-expand p-accordion__icon p-accordion__icon--expand">\n            <use xlink:href="#icon-accordion-expand"></use>\n        </svg>\n        <span class="more-info-text p-accordion__icon--expand">{{{i18n "video_more_information" "More Information"}}}</span>\n        <span class="more-info-text p-accordion__icon--contract">{{{i18n "video_less_information" "Less Information"}}}</span>\n    </div>\n    <div class="video-meta__information video-meta__information_hide">\n        <p class="video-meta__description">{{{description}}}</p>\n        <!-- {{#if keywordsDisplay}} <!-- TODO should this use a new equivalent of displayTagsEnabled -->\n        {{#if keywordTags}}\n        <ul class="video-meta__list video-meta__tags">\n            <li class="video-meta__li video-meta__tags__label">\n                {{#if tagsLabel}}\n                {{{tagsLabel}}}\n                {{else}}\n                Tags\n                {{/if}}:\n                </li>\n            {{#each keywordTags}}\n                <li class="video-meta__li video-meta__tag"><a href="{{{this.link}}}" class="video-meta__link">{{{this.displayName}}}</a></li>\n            {{/each}}\n        {{/if}}\n        </ul>\n        <!-- {{/if}} TODO see corresponding #if above -->\n        <div class="video-meta__share video-meta__share--sm">{{> pattern/share social}}</div>\n    </div>\n    <div class="video-meta__ad-slot"></div>\n</div>\n';
}),define("text!media-app/templates/videoPreview.html",[],function(){return'<div id="video-preview-mask">\n    VIDEO PREVIEW\n</div>\n'}),define("text!media-app/templates/patterns/share/share.html",[],function(){return'<div class="p-share p-share--{{contentId}}{{#if className}} {{className}}{{/if}}" data-cid="{{contentId}}"{{#if headline}} data-headline="{{{headline}}}"{{/if}}{{#if blurb}}data-blurb="{{{blurb}}}"{{/if}} data-link="{{url}}"{{#if embed}} data-embed="{{embed}}"{{/if}}{{#if twitterHandle}} data-twitter-handle="{{twitterHandle}}"{{/if}}{{#if trackingPrefix}} data-tracking-prefix="{{trackingPrefix}}"{{/if}}{{#if printUrl}} data-print="{{printUrl}}"{{/if}}>\n    <div class="p-share__buttons-container">\n        <ul class="p-share__list">\n            {{#networks}}\n            <li class="p-share__item" tabindex="{{math @index \'+\' \'1\'}}">\n                <button class="p-share__link p-share__link--{{platform}}"><div class="sr-only">{{alt-text}}</div>{{> pattern/icon name=icon className="p-share__icon"}}</button>\n            </li>\n            {{/networks}}\n        </ul>\n    </div>\n    <div class="p-share__copy-container">\n        <input class="p-share__copy" type="text" readonly value="{{url}}">\n        {{> pattern/icon name="close" className="p-share__close"}}\n    </div>\n</div>'}),define("text!media-app/templates/patterns/icon/icon.html",[],function(){return'<svg class="p-icon p-icon--{{name}}{{#if size}} p-icon--{{size}}{{/if}}{{#if className}} {{className}}{{/if}}">\n    <use xlink:href="#icon-{{name}}"></use>\n</svg>\n'}),define("text!media-app/templates/leave-behind/list.html",[],function(){return'<div class="leave-behind-list--responsive">\n    <div class="leave-behind-list__meta section-subheader">\n      <h5 class="leave-behind-list__title">Just Watched: {{videoMeta.title}}</h5>\n      <div class="meta-actions">\n        <span class="replay-video" data-id="{{videoMeta.content_id}}"> REPLAY <i class="media-icon media-icon--recap"></i></span>\n        | <span class="sharing__wrapper"></span>\n      </div>\n   </div>\n\n  <div class="leave-behind-list__topic">\n\n  {{#each list}}\n    {{#equals ../videoMeta.id this.id}}\n        <div id="current-item--active" class="leave-behind-list__topic-item" data-id="{{this.id}}">\n    {{else}}\n        <div class="leave-behind-list__topic-item" data-id="{{this.id}}">\n    {{/equals}}\n            <div class="topic-item topic-item__image">\n               <div class="image-sketch">\n               {{#if this.image}}\n                   <img src="{{this.image.src}}" alt="{{this.title}}" />\n                {{else}}\n                   <img src="{{../../viewData.thumbnailNotFound}}" alt="{{this.title}}" />\n                {{/if}}\n                </div>\n            </div>\n\n            <div class="topic-item topic-item__meta">\n                <div class="topic-item__meta-title replay-video" data-id="{{this.id}}">\n                    {{#if this.tag}}\n                    <div class="video-meta__title-tag-container">\n                        <span class="video-meta__title-tag video-meta__title-tag--{{tag.type}}">\n                            {{this.tag.label}}\n                            {{#equals this.tag.type "statcast"}}\n                            <sup class="video-meta__title-tag-tm">TM</sup>\n                            {{/equals}}\n                        </span>\n                    </div>\n                    {{/if}}\n                    {{this.title}}\n                </div>\n                <div class="topic-item__meta-duration-date"> {{this.display_date}} | {{this.duration}}</div>\n            </div>\n            <div class="topic-item topic-item__actions">\n            {{#if this.played}}\n                <div class="topic-item__actions-recap replay-video" data-id="{{this.id}}">\n                    <i class="media-icon media-icon--recap"></i>\n                </div>\n            {{else}}\n                <div class="topic-item__actions-play replay-video" data-id="{{this.id}}">\n                    {{#equals ../../viewData.nextVideo @index}}\n                    <div class="countdown" data-id="{{this.id}}">\n                        Next in: <span class="timer" data-id="{{this.id}}" >{{../../viewData.countdown}}</span>\n                    </div>\n                    {{/equals}}\n                    <i class="media-icon media-icon--play"></i>\n                </div>\n            {{/if}}\n            </div>\n        </div>\n{{/each}}\n</div>\n</div>\n'}),define("text!media-app/templates/leave-behind/replay.html",[],function(){return'<div class="leave-behind-replay--responsive">\n    <div class="leave-behind-replay__meta section-subheader">\n        <h5 class="leave-behind-replay__title">Just Watched: {{videoMeta.title}}</h5>\n        <div class="meta-actions">\n            <span class="replay-video" data-id="{{videoMeta.id}}"> REPLAY <i class="media-icon media-icon--recap"></i></span>\n            | <span class="sharing__wrapper"></span>\n        </div>\n    </div>\n    <div class="leave-behind-replay__overlay">\n    </div>\n    <div class="replay__actions-recap replay-video" data-id="{{videoMeta.id}}">\n        <i class="media-icon media-icon--recap"></i>\n    </div>\n</div>\n'}),define("text!media-app/templates/share.html",[],function(){return'<div class="share-responsive" >\n    {{#if metaData.displayImage}}\n    <img class="share-wrapper__image" src="{{metaData.displayImage}}" alt="{{metaData.title}}">\n    {{else}}\n    {{#each metaData.image.cuts}}\n    {{#equals this.width 1280}}\n    {{#if this.at3x}}\n    <img class="share-wrapper__image" src="{{this.at3x}}" alt="{{title}}">\n    {{else}}\n    <img class="share-wrapper__image" src="{{this.src3x}}" alt="{{title}}">\n    {{/if}}\n    {{/equals}}\n    {{/each}}\n    {{/if}}\n    <div class="share-wrapper">\n        <div class="share-wrapper__button-wrapper">\n            <i class="media-icon media-icon--play-overlay share-wrapper__play-button"></i>\n        </div>\n        <div class="share-wrapper__meta-info">\n            <h4 class="share-wrapper__headline">{{metaData.title}}</h4>\n            <h4 class="share-wrapper__blurb">{{metaData.blurb}}</h4>\n            <p class="share-wrapper__subheader">{{metaData.subheader}}</p>\n\n            <ul class="share-wrapper__time-share">\n                <li class="share-wrapper__timestamp">{{formatDate metaData.date "ll" }} &bull; {{formatDuration metaData.duration}}</li>\n            </ul>\n        </div>\n    </div>\n</div>\n'}),define("text!media-app/templates/block.html",[],function(){return'<div class="block-message-responsive" >\n    {{#if metaData.displayImage}}\n    <img class="video-preview__image" src="{{metaData.displayImage}}" alt="{{metaData.title}}">\n    {{else}}\n    {{#each metaData.image.cuts}}\n    {{#equals this.width 1280}}\n    {{#if this.at3x}}\n    <img class="video-preview__image" src="{{this.at3x}}" alt="{{title}}">\n    {{else}}\n    <img class="video-preview__image" src="{{this.src3x}}" alt="{{title}}">\n    {{/if}}\n    {{/equals}}\n    {{/each}}\n    {{/if}}\n    <div class="block-message-wrapper" >\n        <span class="block-message">\n        {{ message }}\n        </span>\n    </div>\n</div>\n'}),define("media-app/templates/applicationTemplates",["handlebars/handlebars","bam-handlebars-helpers/index","text!media-app-core/templates/applicationView.html","text!media-app/templates/applicationView.html","text!media-app/templates/carousel-list-item.html","text!media-app/templates/metadata.html","text!media-app/templates/videoPreview.html","text!media-app/templates/patterns/share/share.html","text!media-app/templates/patterns/icon/icon.html","text!media-app/templates/leave-behind/list.html","text!media-app/templates/leave-behind/replay.html","text!media-app/templates/share.html","text!media-app/templates/block.html"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){window&&window.i18n_dictionary&&b.setup_i18n_clientside(window.i18n_dictionary);var n=a.compile(c),o=a.compile(d),p=a.compile(e),q=a.compile(f),r=a.compile(g),s=a.compile(h),t=a.compile(i),u=a.compile(l),m=a.compile(m);return a.registerPartial("application/mediaContainer",n),a.registerPartial("carousel-list-item",p),a.registerPartial("metadata",q),a.registerPartial("pattern/share",s),a.registerPartial("pattern/icon",t),{applicationViewTemplate:o,carouselListItemTemplate:p,metaDataTemplate:q,videoPreviewTemplate:r,patternShareTemplate:s,patternIconTemplate:t,shareTemplate:u,leavebehindListHtml:a.compile(j),leavebehindReplayHtml:a.compile(k),blockTemplate:m}}),define("media-app-core/models/url",["backbone"],function(a){var b=a.Model.extend({defaults:{title:null,path:null}});return b}),define("media-app/models/metaData",["backbone"],function(a){var b=a.Model.extend({metaDataChange:function(){console.log("VPM Media App ::: MetaDataModel ::: metaDataChange")},initialize:function(){this.bind("change",this.metaDataChange)}});return new b}),function(a,b){"function"==typeof define&&define.amd?define("mlb-video-launcher/index",["pageMeta/pageMeta"],b):"object"==typeof exports?module.exports=b(null):a.VideoLauncher=b(a.pageMeta)}(this,function(a){"use strict";function b(){for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]=arguments[a][b]);return arguments[0]}function c(a){this.options=b({},h,a),this.tvRoute=null,this.vppRoute=null,this.legacyVppRoute=null,this.init()}var d="/tv",e="/video",f="MLB_TV",g="MLB_VPP",h={root:"",urlPrefix:""};return c.prototype={getLegacyUrlPrefix:function(){var b=a?a.fileCode:!1,c=this.options.root;return b&&(c+="/"+b),c},getUrlPrefix:function(){var b=this.options.root,c="",d=a?a["context-url-prefix"]:!1;return this.options.contextUrlPrefix?("/"!==this.options.contextUrlPrefix.charAt(0).toLowerCase()&&(this.options.contextUrlPrefix="/"+this.options.contextUrlPrefix.trim()),c=this.options.contextUrlPrefix):null!==a&&d&&(c=d),b+=c},init:function(){var a=this.getUrlPrefix(),b=this.getLegacyUrlPrefix();this.tvRoute=a+d,this.vppRoute=a+e,this.legacyVppRoute=b+e},launchMedia:function(a){var b="";a.calendar_event_id?(b=this.getTVLink(a),a.dest=b,this.trackMediaLaunch(f,a)):(b=this.getVPPLink(a),a.dest=b,this.trackMediaLaunch(g,a)),this.redirectTo(b)},launchTV:function(a){var b=this.getTVLink(a);a.dest=b,this.trackMediaLaunch(f,a),this.redirectTo(b)},launchVPP:function(a){var b=this.getVPPLink(a);a.dest=b,this.trackMediaLaunch(g,a),this.redirectTo(b)},getTVLink:function(a){var b=this.tvRoute;if(a.calendar_event_id){var c="e"===a.calendar_event_id.charAt(0).toLowerCase()?"/":"/e";b+=c+a.calendar_event_id}if(a.content_id){var d="v"===a.content_id.charAt(0).toLowerCase()?"/":"/v";b+=d+a.content_id}return a.params&&(a.params===!0&&window.location&&window.location.search?b+=window.location.search:"string"==typeof a.params&&("?"!==a.params.charAt(0)&&(b+="?"),b+=a.params)),b},getSiteDomain:function(a,b){if(a){if(b&&"en"!==b){var c=this.legacyVppRoute.split(".");return c.splice(1,0,b),console.log(c.join(".")),c.join(".")}return this.legacyVppRoute}return this.vppRoute},getVPPLink:function(a){var b=!1,c=this.getSiteDomain(a.v2,a.lang);return a.v2?(a.topic_id&&(c+="/topic/"+a.topic_id),a.content_id&&(c+="/v"+a.content_id),a.content_slug&&(c+="/"+a.content_slug)):a.content_id?(a.content_slug&&(c+="/"+a.content_slug),a.content_id.includes("c-")&&(a.content_id=a.content_id.split("c-")[1]),c+="/c-"+a.content_id,a.topic_id&&(a.topic_id.includes("t-")?a.topic_id=a.topic_id.split("t-")[1]:a.topic_id.includes("tid=")&&(a.topic_id=a.topic_id.split("tid=")[1]),c+="?tid="+a.topic_id,b=!0)):a.topic_id&&(a.topic_id.includes("t-")?a.topic_id=a.topic_id.split("t-")[1]:a.topic_id.includes("tid=")&&(a.topic_id=a.topic_id.split("tid=")[1]),a.topic_slug&&(c+="/"+a.topic_slug),c+="/t-"+a.topic_id,b=!0),a.params&&(a.params===!0&&window.location&&window.location.search?c+=window.location.search:"string"==typeof a.params&&(b?"?"==a.params.charAt(0)?(a.params=a.params.slice(1),c+="&"):"&"!==a.params.charAt(0)&&(c+="&"):"?"!==a.params.charAt(0)&&(c+="?"),c+=a.params)),c},trackMediaLaunch:function(a,b){console.log("Track This Link: "+a,b)},redirectTo:function(a){console.log("sending to...",a),window.location.assign(a)}},c}),define("media-app/views/application",["bluebird/js/browser/bluebird","media-app-core/models/applicationState","media-app-core/views/application","media-app/templates/applicationTemplates","media-app-core/models/url","media-app/models/metaData","mlb-video-launcher/index"],function(a,b,c,d,e,f,g){var h=c.extend({showMetadata:!1,events:{"click .video-meta-accordion":"toggleMetadataInformation"},initialize:function(){c.prototype.initialize.call(this),this.eventManager=b.get("eventManager"),this.dispatcher=this.eventManager.getDispatcher(),this.applicationEvents=this.eventManager.Events.Application,window.dataBootstrap.tokens&&b.set("topicTokens",window.dataBootstrap.tokens),window.dataBootstrap.topicSkin&&b.set("topicSkin",window.dataBootstrap.topicSkin),this.initListeners(),this.wireHeaderLink()},initListeners:function(){this.launcher=new g({root:""}),this.listenTo(f,"change",this.onMediaItemChange)},toggleMetadataInformation:function(){this.showMetadata?($(".p-accordion__icon--contract").css("display","none"),$(".p-accordion__icon--expand").css("display","inline-block"),$(".video-meta__information").addClass("video-meta__information_hide")):($(".p-accordion__icon--contract").css("display","inline-block"),$(".p-accordion__icon--expand").css("display","none"),$(".video-meta__information").removeClass("video-meta__information_hide")),this.showMetadata=!this.showMetadata},wireHeaderLink:function(){var a=this;$(".section-banner__heading",document).on("click",function(){a.launcher.launchVPP({v2:!1})})},render:function(){var b=this;return new a(function(a){return b.$el.html(d.applicationViewTemplate({id:b.containerId})),a()})},onMediaItemChange:function(){var a=this,c=f.get("metadata");if(c.content_id){var d=c.content_id,g=new e,h=window.dataBootstrap,i={topic_id:h.id,topic_slug:h.slug,content_id:d,content_slug:c.slug},j=a.launcher.getVPPLink(i),k=document.title,l=k.substring(k.indexOf(" |"));g.set({data:c,path:j,title:k}),"app"===b.get("appType")?this.updateUrl(g):console.warn("Application rewrite disabled for "+b.get("appType"));var m=c.title?c.title:c.blurb;document.title=m+l}}});return h}),define("text!media-app-core/messages/messages.json",[],function(){return'{\n  "general": {\n    "temporarily_unavailable": {\n      "body": "Service is temporarily unavailable. Please try again later.",\n      "type": "error"\n    }\n  },\n  "authorization": {\n    "not_authorized": {\n      "body": "This user is not authorized for the selected content.",\n      "type": "error"\n    },\n    "invalid_authorization": {\n      "body": "Authorization Invalid. This user must re-enter log in credentials.",\n      "type": "error"\n    },\n    "expired_authorization": {\n      "body": "Authorization expired. This user must re-enter log in credentials.",\n      "type": "error"\n    }\n  },\n  "catalog": {\n    "invalid_request": {\n      "body": "Catalog request invalid because of a syntax error.",\n      "type": "error"\n    }\n  },\n  "media": {\n    "media_not_playable": {\n      "body": "Media found but it is unavailable for playback. Please make another selection.",\n      "type": "error"\n    },\n    "invalid_media": {\n      "body": "Media invalid and unavailable for playback. Please make another selection.",\n      "type": "error"\n    },\n    "not_entitled": {\n      "body": "Media invalid and unavailable for playback. Please make another selection.",\n      "type": "error"\n    },\n    "blackout": {\n      "body": "This user is not allowed access to the requested media due to blackout restrictions. Please make another selection.",\n      "type": "error"\n    },\n    "parental_control": {\n      "body": "This user is not allowed access to the requested media due to parental control settings. Please make another selection.",\n      "type": "error"\n    },\n    "playback_error": {\n      "body": "Media unavailable for playback at this time. Please make another selection or try again later.",\n      "isModal": true,\n      "modalType": "player",\n      "type": "error",\n      "disableClose": true\n    }\n  },\n  "leavebehind_replay": {\n    "body": "Leave Behind Replay",\n    "isModal": true,\n    "modalType": "player",\n    "type": "leavebehind",\n    "disableClose": false\n  },\n  "leavebehind_list": {\n    "body": "Leave Behind list",\n    "isModal": true,\n    "modalType": "player",\n    "type": "leavebehind",\n    "disableClose": false\n  },\n  "video_preview": {\n    "body": "Video Preview",\n    "isModal": true,\n    "modalType": "player",\n    "type": "leavebehind",\n    "disableClose": false\n  }\n}\n'}),define("text!media-app-core/templates/infoMessage.html",[],function(){return'<div class="media-app-message js-media-app-message--info">\n    <div class="media-app-message__body media-app-message__body--info">\n        {{{body}}}\n        {{#unless disableClose }}<i class="media-icon media-icon--close"></i>{{/unless}}\n    </div>\n</div>\n'}),define("text!media-app-core/templates/warningMessage.html",[],function(){return'<div class="media-app-message js-media-app-message--warning">\n    <div class="media-app-message__body media-app-message__body--warning">\n        {{{body}}}\n        {{#unless disableClose }}<i class="media-icon media-icon--close"></i>{{/unless}}\n    </div>\n</div>\n'}),define("text!media-app-core/templates/errorMessage.html",[],function(){return'<div class="media-app-message js-media-app-message--error">\n    <div class="media-app-message__body media-app-message__body--error">\n        {{{body}}}\n        {{#unless disableClose }}<i class="media-icon media-icon--close"></i>{{/unless}}\n    </div>\n</div>\n'}),define("text!media-app-core/templates/customMessage.html",[],function(){return'<div class="media-app-message js-media-app-message--custom">{{{body}}}</div>\n'}),define("media-app-core/templates/applicationTemplates",["handlebars/handlebars","text!media-app-core/templates/infoMessage.html","text!media-app-core/templates/warningMessage.html","text!media-app-core/templates/errorMessage.html","text!media-app-core/templates/customMessage.html","intent-registry/IntentRegistry"],function(a,b,c,d,e,f){var g=a.compile(b),h=a.compile(c),i=a.compile(d),j=a.compile(e);return f.set.intent["default"]("__media_app_message_info",function(){return g}),f.set.intent["default"]("__media_app_message_warning",function(){return h}),f.set.intent["default"]("__media_app_message_error",function(){return i}),{get:function(){return{infoMessageTemplate:f.get.intent.sync("__media_app_message_info"),warningMessageTemplate:f.get.intent.sync("__media_app_message_warning"),errorMessageTemplate:f.get.intent.sync("__media_app_message_error"),customMessageTemplate:j}}}}),define("media-app-core/messages/messageManager",["jquery","bluebird/js/browser/bluebird","lodash/lodash","media-app-core/models/applicationState","text!media-app-core/messages/messages.json","media-app-core/templates/applicationTemplates"],function(a,b,c,d,e,f){function g(a){var b=a.tokens;Object.keys(b).forEach(function(c){var d=b[c],e=new RegExp("\\$\\{"+c+"\\}","gmi");Object.keys(a).forEach(function(b){"string"==typeof a[b]&&(a[b]=a[b].replace(e,d))})})}return{messages:JSON.parse(e),type:{COMMERCE:"commerce",ERROR:"error",FATAL:"fatal",HELP:"help",INFO:"info",MARKETING:"marketing",MESSAGE:"message",WARNING:"warning",CUSTOM:"custom",VIDEO_PREVIEW:"video_preview",LEAVE_BEHIND_LIST:"leavebehind_list",LEAVE_BEHIND_REPLAY:"leavebehind_replay"},modalType:{FULLPAGE:"fullPage",PLAYER:"player"},loadMessages:function(e){var f=this,g=d.get("mediaConfig"),h=d.get("eventManager");return new b(function(b){var d=g.get("app.messageServiceUrl"),i=c.isObject(e)?e:{},j=function(a){var d=c.isObject(a)?a:{};return f.messages=c.merge(f.messages,d,i),h.getDispatcher().on(h.Events.Application.SHOW_MESSAGE,f.onShowMessage.bind(f)),b()};return d?void a.ajax({url:d,success:j,error:function(){j()}}):j()})},getMessage:function(a){var b=c.get(this.messages,a);return c.isObject(b)||(b={body:b}),c.extend({},b)},onShowMessage:function(a){var b=a.key,c=a.tokens||{},d=a.container||null,e=this.getMessage(b);e.key=b,e.tokens=c,e.container=d,g(e),this.showMessage(e)},showMessage:function(b){var e,g,h=this,i=d.get("mediaConfig"),j=d.get("eventManager"),k=j.Events.Application,l=b;switch(c.isObject(l)||(l={body:b,type:this.type.INFO}),l.type){case this.type.COMMERCE:case this.type.HELP:case this.type.INFO:case this.type.MARKETING:case this.type.MESSAGE:case this.type.LEAVE_BEHIND_LIST:case this.type.LEAVE_BEHIND_REPLAY:case this.type.VIDEO_PREVIEW:default:g=".js-media-app-message--info",e=f.get().infoMessageTemplate;break;case this.type.WARNING:g=".js-media-app-message--warning",e=f.get().warningMessageTemplate;break;case this.type.ERROR:case this.type.FATAL:g=".js-media-app-message--error",e=f.get().errorMessageTemplate;break;case this.type.CUSTOM:g=".js-media-app-message--custom",e=f.get().customMessageTemplate}var m=e(b),n=b.container||i.get("videocore.property_state.container"),o=a(m).insertBefore(n),p=l.isModal&&(!l.modalType||l.modalType===this.modalType.FULLPAGE),q=l.isModal&&l.modalType===this.modalType.PLAYER;if(p&&a("body").addClass("media-app-message--modal"),q){var r=d.get("playerResolutionCssModifier")||"16x9";o.addClass("media-app-message--player-modal-"+r),a(n).hide()}o.on("click",".media-icon--close",function(){a(this).closest(g).remove(),p&&(a("body").removeClass("media-app-message--modal"),h.clearPageMessages(o)),q&&(a(n).show(),h.clearPlayerMessages(o)),q||p||h.clearAllMessages(a(n)),j.getDispatcher().publish(k.MESSAGE_CLOSED,b)}).show(),j.getDispatcher().publish(k.MESSAGE_SHOWING,b)},clearAllMessages:function(a){a.parent().find('[class*="js-media-app-message"]').remove()},clearPlayerMessages:function(a){a.siblings('[class*="js-media-app-message"]').remove()},clearPageMessages:function(a){}}}),define("media-app-core/events/applicationEvents",[],function(){return{PRE_REQUEST_MEDIA:"__media_app_pre_request_media",REQUEST_MEDIA:"__media_app_request_media",POST_REQUEST_MEDIA:"__media_app_post_request_media",CHANGE_MEDIA_LAYOUT:"__media_app_change_media_layout",SHOW_MESSAGE:"__media_app_show_message",MESSAGE_SHOWING:"__media_app_message_showing",MESSAGE_CLOSED:"__media_app_message_closed",FLASHBLOCK_DETECTED:"__media_app_flashblock_detected",FLASH_REQUIRED:"__media_app_flash_required"}}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/events/PlayerEvents",["bandwagon/bandwagon"],b):"object"==typeof exports?module.exports=b(require("bandwagon/bandwagon")):a.PlayerEvents=b(a.Bandwagon)}(this,function(a){var b={BITRATE_PROFILES_CHANGED:"bitrateProfilesChanged",CUE_POINT:"cuePoint",CLOSED_CAPTIONS_OFF:"closedCaptionsOff",CLOSED_CAPTIONS_ON:"closedCaptionsOn",CLOSED_CAPTIONS_AVAILABLE:"closedCaptionsAvailable",CLOSED_CAPTIONS_TRACKS_CHANGED:"closedCaptionsTracksChanged",ERROR_MESSAGE:"errorMessage",FULLSCREEN_START:"fullscreenStart",FULLSCREEN_END:"fullscreenEnd",FULLSCREEN_CHANGE:"fullscreenChange",GENERIC_FLASH_EVENT:"genericFlashEvent",ISLIVE_CHANGED:"isLiveStreamChanged",IS_SLIDING_WINDOW_CHANGED:"isSlidingWindowChanged",LIVETIME_CHANGED:"liveTimeChanged",MEDIA_ATTACHED:"mediaAttached",MEDIA_SET:"mediaSet",MEDIA_ERROR:"mediaError",MEDIA_START:"mediaStart",MEDIA_PLAYING:"mediaPlaying",MEDIA_COMPLETE:"mediaComplete",MEDIA_PAUSED:"mediaPaused",MEDIA_RESUME:"mediaResume",MEDIA_PROGRESS:"mediaProgress",MEDIA_TIME_UPDATE:"mediaTimeUpdate",MEDIA_SEEK:"mediaSeek",MEDIA_RESIZE:"mediaResize",MEDIA_VOLUME_CHANGED:"mediaVolumeChanged",META_DATA_LOADED:"metadataLoaded",META_DATA_PARSED:"metadataParsed",MINI_MODE_START:"miniModeStart",MINI_MODE_END:"miniModeEnd",PLAY_CONTENT_CALLED:"playContentCalled",PLAYER_INITIALIZING:"playerInitializing",PLAYER_LOADED:"playerLoaded",PLAYLIST_COMPLETE:"playlistComplete",PLAYLIST_START:"playlistStart",PLAYLIST_LOADED:"playlistLoaded",CONTROLS_VISIBILITY_CHANGED:"controlsVisibilityChanged",SHOW_POSTER:"player:showPoster",STREAM_METRICS_UPDATED:"streamMetricsUpdated",OVERLAY_LOADING_SHOW:"player:showLoading",OVERLAY_LOADING_HIDE:"player:hideLoading",QUICK_REWIND:"quickRewind",QUICK_FORWARD:"quickForward",STREAM_MEDIA_ERROR:"streamMediaError",SCREEN_SMALL:"screenSmall",SCREEN_LARGE:"screenLarge",TIME_CODE:"timeCode",VIEW_HIGHLIGHT:"viewPlayerHighlight",PLAYBACK_STARTED:"playbackStarted",SEEK_COMPLETE:"seekComplete",CLOSE_HIGHLIGHT:"playerCloseHighlight",ENTER_MINI_MODE_BUTTON_CLICK:"enterMiniModeButtonClick",EXIT_MINI_MODE_BUTTON_CLICK:"exitMiniModeButtonClick",ENABLE_CLOSED_CAPTIONS:"enableClosedCaptionsEvent",DISABLE_CLOSED_CAPTIONS:"disableClosedCaptionsEvent",TRACKING_EVENT:"trackingEvent",FREEWHEEL_AD_STARTED:"freewheelAdStarted",FREEWHEEL_AD_ENDED:"freewheelAdEnded",MUTE_BUTTON:"muteButton",CHANGE_VOLUME:"changeVolume",SELECTED_MEDIA_SLOT_CHANGED:"selectedMediaSlotChanged",VIDEO_AREA_LAYOUT_STATE_CHANGED:"videoAreaLayoutStateChanged",AD_BLOCK_FOUND:"adBlockFound",SELECTED_FEED_UPDATED:"selectedFeedUpdated",STREAM_SELECTION_OPTIONS_UPDATED:"streamSelectionOptionsUpdated",DEVELOPER_ERROR:"developerError"};return a.registerEvents("PLAYER_EVENTS",b),b}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-advertising/events/AdEvents",["bandwagon/bandwagon"],b):"object"==typeof exports?module.exports=b(require("bandwagon/bandwagon")):a.AdEvents=b(a.Bandwagon)}(this,function(a){var b={AD_PLUGIN_LOADED:"adPluginLoaded",AD_PLUGIN_ERROR:"adPluginError",AD_ERROR:"adError",AD_START:"adStart",AD_COMPLETE:"adComplete",AD_PREROLL_START:"adPreRollStart",AD_PREROLL_COMPLETE:"adPreRollComplete",AD_DEFAULT_COMPANION:"adDefaultCompanion",AD_COMPANION:"adCompanion",AD_TIME_UPDATE:"adTimeUpdate",AD_BLOCK_DETECTED:"adBlockDetected",AD_PREROLL_BLOCKED:"adPrerollBlocked"};return a.registerEvents("AD_EVENTS",b),b}),function(a){"use strict";var b="undefined",c=typeof window!==b?window:typeof global!==b?global:this;a("app-console/lib/console",["require","exports","module"],function(a,b,d){var e,f="log,dir,dirxml,info,warn,debug,error,assert,trace,time,timeEnd".split(","),g=function(){},h="undefined";return typeof c!==h&&(c.console||(c.console={isNative:!1}),f.forEach(function(a){c.console[a]=c.console[a]||c.console.log||g})),e=console||c&&c.console||{},e.trueConsole=!!e.group&&!!e.log.apply&&!e.msIsIndependentlyComposed,e})}("object"==typeof module&&module.exports&&"function"!=typeof define?function(a){module.exports=a(require,exports,module)}:define),function(a){"use strict";a("app-console/lib/group",["require","exports","module","./console"],function(a,b,c){var d=a("./console"),e=function(){},f={start:d.trueConsole&&function(a){null!=a&&f.current!==a&&(f.end(),f.current=a,d.group(a))}||e,end:d.trueConsole&&function(a){""!==f.current&&(f.current="",d.groupEnd(a))}||e,current:""};return f})}("object"==typeof module&&module.exports&&"function"!=typeof define?function(a){module.exports=a(require,exports,module)}:define),function(a){"use strict";a("app-console/lib/Trace",["require","exports","module"],function(a,b,c){function d(a,b){this.stack=(b.stack||"").split("\n"),this.message=b.message||a+"Error",this.file=(this.stack[1]||"").replace(e,"$1")}var e=/.*?(\w+:\/\/.*?\d+:\d+).*/;return d.prototype=Object.create(Error.prototype),d})}("object"==typeof module&&module.exports&&"function"!=typeof define?function(a){module.exports=a(require,exports,module)}:define),function(a){"use strict";a("app-console/lib/levels",{none:1e4,global:1e4,error:40,exception:40,warn:30,info:20,dir:10,dirxml:10,debug:10,log:10})}("object"==typeof module&&module.exports&&"function"!=typeof define?function(a){module.exports=a}:define),function(a){"use strict";a("app-console/lib/LogMessage",["require","exports","module","./group","./Trace","./levels","./console"],function(a,b,c){function d(a){this.ctx=a}var e=a("./group"),f=a("./Trace"),g=a("./levels"),h=a("./console"),i=String.fromCharCode(9790),j=String.fromCharCode(9789),k="%o, ",l="%s ",m=l+":: ",n=i+"trace"+j,o="error",p="global",q=Array.prototype.slice,r=Function.prototype.apply;return d.prototype={fmt:"%o",ns:null,format:function(a,b){var c,d=this.fmt;return b=q.call(b),h.trueConsole?(c=b.length>1&&!this.ctx.ns?b.shift():this.ctx.ns||null,this.ctx.useAlert?void(c&&b.unshift(c+":: ")):(d=new Array(b.length).join("\n"+k)+d,a===o&&(this.formatStack(c,b),d=k+d,a="error",b.unshift(n)),this.ctx.grouping?e.start(c):null!=c&&(e.end(c),d=d&&"string"==typeof c?m+d:null,b.unshift(c)),d&&b.unshift(d),b)):b},formatStack:function(a,b){for(var c=0,d=b.length;d>c;c++)b[c]instanceof Error&&(b[c]=new f(a,b[c]))},log:function(a,b){this.checkTypeAndLevel(a)&&r.call(h[a]||h.log,h,this.format(a,b))},time:function(a,b){this.checkTypeAndLevel(a)&&h.time(b)},timeEnd:function(a,b){this.checkTypeAndLevel(a)&&h.timeEnd(b)},trace:function(a){this.checkTypeAndLevel(a)&&h.trace()},checkTypeAndLevel:function(a){var b=this.ctx,c=g[b.level]?b.level:p;return c===p&&(c=b.globalConsole&&b.globalConsole.level||"none"),g[a]>=g[c]}},d})}("object"==typeof module&&module.exports&&"function"!=typeof define?function(a){module.exports=a(require,exports,module)}:define),function(a){"use strict";a("app-console/config",["require","exports","module"],function(a,b,c){var d=c&&c.config&&"function"==typeof c.config,e="string";return function(){var a=d&&c.config()||"",b={};return"object"==typeof a&&(b=a),b.level=b.level||typeof a===e&&a||a.level||"none",b}})}("object"==typeof module&&module.exports&&"function"!=typeof define?function(a){module.exports=a(require,exports,module)}:define),function(a){"use strict";a("app-console/app-console",["require","exports","module","./lib/console","./lib/LogMessage","./lib/group","./lib/levels","./config"],function(a,b,c){function d(a,b,c){var d;c=c===!0;for(d in b)(b.hasOwnProperty(d)||c)&&(a[d]=b[d]);return a}function e(a){return function(){this.logMessage.log(a,arguments)}}function f(a){this.config(a),this.logMessage=new h(this),this.globalConsole=o||this}var g=a("./lib/console"),h=a("./lib/LogMessage"),i=a("./lib/group"),j=a("./lib/levels"),k=a("./config"),l="error",m=!0,n=k();f.prototype={ns:null,level:"global",grouping:!1,assert:function(a,b){"string"!=typeof a&&(arguments[1]=b=a,arguments[0]=a=void 0),b!=m&&(arguments[1]="Assertion failed",this.error.apply(this,arguments))},debug:e("debug"),dir:e("dir"),dirxml:e(g.dirxml?"dirxml":"dir"),error:e(l),info:e("info"),log:e("log"),time:function(a){this.logMessage.time("debug",a)},timeEnd:function(a){this.logMessage.timeEnd("debug",a)},trace:function(){this.logMessage.trace()},warn:e("warn"),isDebugEnabled:function(){return j.debug>=this.level},getLevel:function(){return this.level},setLevel:function(a){this.level=j[a]?a:"none"},config:function(a){d(this,a),(!this.grouping&&i.current||"none"===this.level)&&i.end(i.current)}};var o=d(function(a){return new f(a)},new f(n),!0);return o.logMessage.ctx=o,o})}("object"==typeof module&&module.exports&&"function"!=typeof define?function(a){module.exports=a(require,exports,module)}:define),define("jqueryui-amd/jqueryui/core",["jquery"],function(a){!function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.10.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),
a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;d<e.length;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}}))}(a)}),define("jqueryui-amd/jqueryui/widget",["jquery"],function(a){!function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(a.isPlainObject(f)?c[e]=a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):c[e]=f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;g<e.length-1;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),d===b)return f[c]===b?null:f[c];f[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(a)}),define("jqueryui-amd/jqueryui/tabs",["jquery","./core","./widget"],function(a){!function(a,b){function c(){return++e}function d(a){return a.hash.length>1&&decodeURIComponent(a.href.replace(f,""))===decodeURIComponent(location.href.replace(f,""))}var e=0,f=/#.*$/;a.widget("ui.tabs",{version:"1.10.0",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var b=this,c=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",c.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),c.active=this._initialActive(),a.isArray(c.disabled)&&(c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(c.active):this.active=a(),this._refresh(),this.active.length&&this.load(c.active)},_initialActive:function(){var b=this.options.active,c=this.options.collapsible,d=location.hash.substring(1);return null===b&&(d&&this.tabs.each(function(c,e){return a(e).attr("aria-controls")===d?(b=c,!1):void 0}),null===b&&(b=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===b||-1===b)&&(b=this.tabs.length?0:!1)),b!==!1&&(b=this.tabs.index(this.tabs.eq(b)),-1===b&&(b=c?!1:0)),!c&&b===!1&&this.anchors.length&&(b=0),b},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(b){var c=a(this.document[0].activeElement).closest("li"),d=this.tabs.index(c),e=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:d++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=!1,d--;break;case a.ui.keyCode.END:d=this.anchors.length-1;break;case a.ui.keyCode.HOME:d=0;break;case a.ui.keyCode.SPACE:return b.preventDefault(),clearTimeout(this.activating),void this._activate(d);case a.ui.keyCode.ENTER:return b.preventDefault(),clearTimeout(this.activating),void this._activate(d===this.options.active?!1:d);default:return}b.preventDefault(),clearTimeout(this.activating),d=this._focusNextTab(d,e),b.ctrlKey||(c.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(b){this._handlePageNav(b)||b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.focus())},_handlePageNav:function(b){return b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(b,c){function d(){return b>e&&(b=0),0>b&&(b=e),b}for(var e=this.tabs.length-1;-1!==a.inArray(d(),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){return a=this._findNextTab(a,b),this.tabs.eq(a).focus(),a},_setOption:function(a,b){return"active"===a?void this._activate(b):"disabled"===a?void this._setupDisabled(b):(this._super(a,b),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",b),b||this.options.active!==!1||this._activate(0)),"event"===a&&this._setupEvents(b),void("heightStyle"===a&&this._setupHeightStyle(b)))},_tabId:function(a){return a.attr("aria-controls")||"ui-tabs-"+c()},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)}),this._processTabs(),b.active!==!1&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=a(),this.anchors.each(function(c,e){var f,g,h,i=a(e).uniqueId().attr("id"),j=a(e).closest("li"),k=j.attr("aria-controls");d(e)?(f=e.hash,g=b.element.find(b._sanitizeSelector(f))):(h=b._tabId(j),f="#"+h,g=b.element.find(f),g.length||(g=b._createPanel(h),g.insertAfter(b.panels[c-1]||b.tablist)),g.attr("aria-live","polite")),g.length&&(b.panels=b.panels.add(g)),k&&j.data("ui-tabs-aria-controls",k),j.attr({"aria-controls":f.substring(1),"aria-labelledby":i}),g.attr("aria-labelledby",i)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var c,d=0;c=this.tabs[d];d++)b===!0||-1!==a.inArray(d,b)?a(c).addClass("ui-state-disabled").attr("aria-disabled","true"):a(c).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=b},_setupEvents:function(b){var c={click:function(a){a.preventDefault()}};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,c),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,d=this.element.parent();"fill"===b?(c=d.height(),c-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e.closest("li"),g=f[0]===d[0],h=g&&c.collapsible,i=h?a():this._getPanelForTab(f),j=d.length?this._getPanelForTab(d):a(),k={oldTab:d,oldPanel:j,newTab:h?a():f,newPanel:i};b.preventDefault(),f.hasClass("ui-state-disabled")||f.hasClass("ui-tabs-loading")||this.running||g&&!c.collapsible||this._trigger("beforeActivate",b,k)===!1||(c.active=h?!1:this.tabs.index(f),this.active=g?a():f,this.xhr&&this.xhr.abort(),j.length||i.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),i.length&&this.load(this.tabs.index(f),b),this._toggle(b,k))},_toggle:function(b,c){function d(){f.running=!1,f._trigger("activate",b,c)}function e(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),g.length&&f.options.show?f._show(g,f.options.show,d):(g.show(),d())}var f=this,g=c.newPanel,h=c.oldPanel;this.running=!0,h.length&&this.options.hide?this._hide(h,this.options.hide,function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),e()}):(c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),h.hide(),e()),h.attr({"aria-expanded":"false","aria-hidden":"true"}),c.oldTab.attr("aria-selected","false"),g.length&&h.length?c.oldTab.attr("tabIndex",-1):g.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),g.attr({"aria-expanded":"true","aria-hidden":"false"}),c.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(b){var c,d=this._findActive(b);d[0]!==this.active[0]&&(d.length||(d=this.active),c=d.find(".ui-tabs-anchor")[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return b===!1?a():this.tabs.eq(b)},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var b=a(this),c=b.data("ui-tabs-aria-controls");c?b.attr("aria-controls",c).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(c){var d=this.options.disabled;d!==!1&&(c===b?d=!1:(c=this._getIndex(c),d=a.isArray(d)?a.map(d,function(a){return a!==c?a:null}):a.map(this.tabs,function(a,b){return b!==c?b:null})),this._setupDisabled(d))},disable:function(c){var d=this.options.disabled;if(d!==!0){if(c===b)d=!0;else{if(c=this._getIndex(c),-1!==a.inArray(c,d))return;d=a.isArray(d)?a.merge([c],d).sort():[c]}this._setupDisabled(d)}},load:function(b,c){b=this._getIndex(b);var e=this,f=this.tabs.eq(b),g=f.find(".ui-tabs-anchor"),h=this._getPanelForTab(f),i={tab:f,panel:h};d(g[0])||(this.xhr=a.ajax(this._ajaxSettings(g,c,i)),this.xhr&&"canceled"!==this.xhr.statusText&&(f.addClass("ui-tabs-loading"),h.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){h.html(a),e._trigger("load",c,i)},1)}).complete(function(a,b){setTimeout(function(){"abort"===b&&e.panels.stop(!1,!0),f.removeClass("ui-tabs-loading"),h.removeAttr("aria-busy"),a===e.xhr&&delete e.xhr},1)})))},_ajaxSettings:function(b,c,d){var e=this;return{url:b.attr("href"),beforeSend:function(b,f){return e._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:f},d))}}},_getPanelForTab:function(b){var c=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+c))}})}(a)}),define("normalize",[],function(){function a(a,d,h){if(a.match(g)||a.match(f))return a;a=e(a);var i=h.match(f),j=d.match(f);return!j||i&&i[1]==j[1]&&i[2]==j[2]?c(b(a,d),h):b(a,d)}function b(a,b){if("./"==a.substr(0,2)&&(a=a.substr(2)),a.match(g)||a.match(f))return a;var c=b.split("/"),d=a.split("/");for(c.pop();curPart=d.shift();)".."==curPart?c.pop():c.push(curPart);return c.join("/")}function c(a,b){var c=b.split("/");for(c.pop(),b=c.join("/")+"/",i=0;b.substr(i,1)==a.substr(i,1);)i++;for(;"/"!=b.substr(i,1);)i--;b=b.substr(i+1),a=a.substr(i+1),c=b.split("/");var d=a.split("/");for(out="";c.shift();)out+="../";for(;curPart=d.shift();)out+=curPart+"/";return out.substr(0,out.length-1)}var d=/([^:])\/+/g,e=function(a){return a.replace(d,"$1/")},f=/[^\:\/]*:\/\/([^\/])*/,g=/^(\/|data:)/,h=function(b,c,d){c=e(c),d=e(d);for(var f,g,b,h=/@import\s*("([^"]*)"|'([^']*)')|url\s*\((?!#)\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/gi;f=h.exec(b);){g=f[3]||f[2]||f[5]||f[6]||f[4];var i;i=a(g,c,d);var j=f[5]||f[6]?1:0;b=b.substr(0,h.lastIndex-g.length-j-1)+i+b.substr(h.lastIndex-j-1),h.lastIndex=h.lastIndex+(i.length-g.length)}return b};return h.convertURIBase=a,h.absoluteURI=b,h.relativeURI=c,h}),define("css",[],function(){if("undefined"==typeof window)return{load:function(a,b,c){c()}};var a=document.getElementsByTagName("head")[0],b=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)|AndroidWebKit\/([^ ;]*)/)||0,c=!1,d=!0;b[1]||b[7]?c=parseInt(b[1])<6||parseInt(b[7])<=9:b[2]||b[8]||"WebkitAppearance"in document.documentElement.style?d=!1:b[4]&&(c=parseInt(b[4])<18);var e={};e.pluginBuilder="./css-builder";var f,g,h,i=function(){f=document.createElement("style"),a.appendChild(f),g=f.styleSheet||f.sheet},j=0,k=[],l=function(a){g.addImport(a),f.onload=function(){m()},j++,31==j&&(i(),j=0)},m=function(){h();var a=k.shift();return a?(h=a[1],void l(a[0])):void(h=null)},n=function(a,b){if(g&&g.addImport||i(),g&&g.addImport)h?k.push([a,b]):(l(a),h=b);else{f.textContent='@import "'+a+'";';var c=setInterval(function(){try{f.sheet.cssRules,clearInterval(c),b()}catch(a){}},10)}},o=function(b,c){var e=document.createElement("link");if(e.type="text/css",e.rel="stylesheet",d)e.onload=function(){e.onload=function(){},setTimeout(c,7)};else var f=setInterval(function(){for(var a=0;a<document.styleSheets.length;a++){var b=document.styleSheets[a];if(b.href==e.href)return clearInterval(f),c()}},10);e.href=b,a.appendChild(e)};return e.normalize=function(a,b){return".css"==a.substr(a.length-4,4)&&(a=a.substr(0,a.length-4)),b(a)},e.load=function(a,b,d,e){(c?n:o)(b.toUrl(a+".css"),d)},e}),define("css!jqueryui-amd/themes/base/jquery-ui",[],function(){}),function(a,b){require&&require.config&&require.config({paths:{css:"require-css/css"}}),"function"==typeof define&&define.amd?define("logger/logger",["jquery","bandwagon/bandwagon","app-console/app-console","jqueryui-amd/jqueryui/tabs","css!jqueryui-amd/themes/base/jquery-ui.css"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("bandwagon/bandwagon"),require("app-console/app-console"),require("jqueryui-amd/jqueryui/tabs"),require("css!jqueryui-amd/themes/base/jquery-ui.css")):a.logger=b(a.jQuery,a.Bandwagon,null,null,null)}(this,function(a,b,c,d){var e="Uncategorized",f='<section class="clearfix"><h3><a data-toggle="collapse" class="collapsed" href="#app-debug-ctr">App Debug Log</a></h3><div class="collapse" id="app-debug-ctr"><div class="well"><div id="app-debug-tabs"><ul class="tab-list"></ul></div></div></div></section>',g={init:!1,outputEnabled:!1,setup:function(b){if(this.init||(a(".debug-box").append(f),a("#app-debug-tabs").tabs({selected:0}),c.config({level:"log"}),this.init=!0),this.outputEnabled=a("#app-debug-tabs").length>=1,b=b?b:e,this.outputEnabled&&a("#app-debug-tabs").find("#"+b+"-debug-container").length<1){var d='<li><a href="#'+b+'-debug-container">'+b+"</li>",g='<div id="'+b+'-debug-container"><textarea class="debug-text" style="width:100%" rows="40"></textarea>';a("#app-debug-tabs ul.tab-list").append(d),a("#app-debug-tabs").append(g),a("#app-debug-tabs").tabs("refresh")}},output:function(b,c){this.setup(b),this.outputEnabled&&("string"!=typeof c&&(c=JSON.stringify(c)),b&&b!==e?(a("#"+b+"-debug-container textarea.debug-text").append(c),a("#"+b+"-debug-container textarea.debug-text").append("\n"),a("#Uncategorized-debug-container textarea.debug-text").append(b+" : "+c),a("#Uncategorized-debug-container textarea.debug-text").append("\n")):(a("#Uncategorized-debug-container textarea.debug-text").append(c),a("#Uncategorized-debug-container textarea.debug-text").append("\n")))},console:function(){c&&c.log.apply(c,arguments)},getConsole:function(){return c},_getCategoryAndArgs:function(a){var b=Array.prototype.slice.call(a),c=e;return b.length>1&&(c=b.shift()),{category:c,args:b}},log:function(){var a=this._getCategoryAndArgs(arguments);this.output(a.category,a.args),c.log(a.category,a.args)},error:function(a,b){var d=this._getCategoryAndArgs(arguments);this.output(d.category,d.args),c.error(d.category,d.args)},debug:function(a,b){var d=this._getCategoryAndArgs(arguments);this.output(d.category,d.args),c.debug(d.category,d.args)}};return g}),function(a,b){"function"==typeof define&&define.amd?define("logger/ClassLogger",["logger/logger"],b):"object"==typeof exports?module.exports=b(require("logger/logger")):a.ClassLogger=b(a.logger)}(this,function(a){"use strict";function b(b){var c=b;this.log=function(){var b=Array.prototype.slice.call(arguments);b.unshift(c),a.log.apply(a,b)},this.warn=function(){var b=Array.prototype.slice.call(arguments);b.unshift(c),a.warn.apply(a,b)},this.error=function(){var b=Array.prototype.slice.call(arguments);b.unshift(c),a.debug.apply(a,b)}}return b.prototype=$.extend(b.prototype,{}),b}),define("bindable/jquery.bindable",["require","exports","module","jquery"],function(a,b,c){var d,e=d=a("jquery"),f=/\s+/;return d.unwhite=function(a){return a=a&&d.trim(a),a.length?a.split(f):[]},d.eventProxy=function(a,b){var c=d.proxy.apply(null,arguments);return function(){return c.apply(null,Array.prototype.slice.call(arguments,1))}},d.bindable=function(a,b){return a instanceof Object||(b=a,a={}),a=d.isFunction(a)?a.prototype:a,d.each(["bind","one","unbind","on","off"],function(b,c){a[c]=function(a,b,e){return d(this)[c](a,b,e),this}}),a.trigger=function(a,b){var c=new d.Event(a),e=new d.Event(c);return c.preventDefault(),e.type="*",c.type!==e.type&&d.event.trigger(c,b,this),d.event.trigger(e,b,this),this},"string"==typeof b&&d.each(d.unwhite(b),function(b,c){a[c]=function(a,b){return arguments.length?this.bind(c,a,b):this.trigger(c)}}),a},e.bindable.bind(e)}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/events/VPMEvents",["bandwagon/bandwagon"],b):"object"==typeof exports?module.exports=b(require("bandwagon/bandwagon")):a.VPMEvents=b(a.Bandwagon)}(this,function(a){var b={STREAM_SELECTION_OPTIONS_UPDATED:"STREAM_SELECTION_OPTIONS_UPDATED",SELECTED_FEED_UPDATED:"SELECTED_FEED_UPDATED",CHANGE_FEED:"CHANGE_FEED",MEDIA_CATALOG_RESPONSE:"MEDIA_CATALOG_RESPONSE",MEDIA_PLAYABLE:"MEDIA_PLAYABLE",MEDIA_CATALOG_SUCCESS:"MEDIA_CATALOG_SUCCESS",USER_AUTHORIZED:"USER_AUTHORIZED",USER_UNAUTHORIZED:"USER_UNAUTHORIZED",UPDATE_USER_PROFILE:"UPDATE_USER_PROFILE",LOGIN_CHALLENGE:"LOGIN_CHALLENGE",GAME_DATA_LOADED:"GAME_DATA_LOADED",META_DATA_LOADED:"META_DATA_LOADED",PLAYER_LOADED:"PLAYER_LOADED",PLAY_CONTENT_CALLED:"PLAY_CONTENT_CALLED",SELECTED_MEDIA_SLOT_CHANGED:"SELECTED_MEDIA_SLOT_CHANGED",VIDEO_AREA_LAYOUT_STATE_CHANGED:"VIDEO_AREA_LAYOUT_STATE_CHANGED",ENABLE_CLOSED_CAPTIONS:"ENABLE_CLOSED_CAPTIONS",DISABLE_CLOSED_CAPTIONS:"DISABLE_CLOSED_CAPTIONS",ENTER_MINI_MODE:"ENTER_MINI_MODE",EXIT_MINI_MODE:"EXIT_MINI_MODE",CLOSE_HIGHLIGHT:"CLOSE_HIGHLIGHT",PLAYBACK_STARTED:"PLAYBACK_STARTED",TIMECODE_UPDATE:"TIMECODE_UPDATE",SEEK_COMPLETE:"SEEK_COMPLETE",ERROR_MESSAGE:"ERROR_MESSAGE",ERROR_MEDIAITEM:"ERROR_MEDIA_ITEM",FREEWHEEL_AD_STARTED:"FREEWHEEL_AD_STARTED",FREEWHEEL_AD_ENDED:"FREEWHEEL_AD_ENDED",PLAYER_LAUNCH_LOGGED_IN:"PLAYER_LAUNCH_LOGGED_IN",PLAYER_LAUNCH_UPGRADE_OFFER:"PLAYER_LAUNCH_UPGRADE_OFFER"};return a.registerEvents("VPM_EVENTS",b),b}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaitem/mediacliploader/MediaItemClipLoaderEventEnum",[],b):"object"==typeof exports?module.exports=b():a.MediaItemClipLoaderEventEnum=b()}(this,function(){"use strict";function a(){}return a.prototype=$.extend(a.prototype,{}),a.MEDIA_ITEM_CLIP_SET="MEDIA_ITEM_CLIP_SET",a.MEDIA_FRAMEWORK_REQUIRED="MEDIA_FRAMEWORK_REQUIRED",a.MEDIA_ITEM_ERROR="MEDIA_ITEM_ERROR",a.MEDIA_ITEM_LOGIN_CHALLENGE="MEDIA_ITEM_LOGIN_CHALLENGE",a.MEDIA_CATALOG_UNAUTHORIZED="MEDIA_CATALOG_UNAUTHORIZED",a.MEDIA_CATALOG_AUTHORIZED="MEDIA_CATALOG_AUTHORIZED",a.MEDIA_ITEM_UNAUTHORIZED="MEDIA_ITEM_UNAUTHORIZED",a}),define("video-playback-manager/vpm/models/AudioOnlyDisplayVO",["require","exports","module"],function(a,b,c){function d(a,b,c){this.backgroundImageUrl=a,this.headline=b,this.description=c}return d}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaitem/data/MediaItem",["video-playback-manager/vpm/models/AudioOnlyDisplayVO"],b):"object"==typeof exports?module.exports=b(require("video-playback-manager/vpm/models/AudioOnlyDisplayVO")):a.MediaItem=b(a.AudioOnlyDisplayVO)}(this,function(a){"use strict";function b(b,c){this.playMediaRequestObject=b,this.currentPlaylistItem=b,this.isHighlight=b.isHighlight,this.startTimeOffset=b.startTimeOffset,this._considerHlsPlaybackInitialValue=c,this.resetErrorCounters(),b.audioOnlyDisplayVO?this.audioOnlyDisplayVO=b.audioOnlyDisplayVO:this.audioOnlyDisplayVO=new a("","","")}return b.prototype=$.extend(b.prototype,{playMediaRequestObject:null,isHighlight:void 0,type:null,isMediaCatalogPath:!1,mediaCatalog:null,currentPlaylistItem:null,clip:null,_availablePlaybackScenarios:null,currentPlaybackScenarioPreferenceList:null,considerHlsPlayback:!1,currentPlaybackScenario:null,hlsErrorHasOccurred:!1,fmsCloudFailed:!1,totalFailures:0,hlsFailureCount:0,fmsCloudFailureCount:0,getAvailablePlaybackScenarios:function(){return this._availablePlaybackScenarios},setAvailablePlaybackScenarios:function(a){this._availablePlaybackScenarios=a},setClipState:function(a){this.clip&&(this.clip.state=a)},resetErrorCounters:function(){this.currentPlaybackScenarioPreferenceList=null,this.considerHlsPlayback=this._considerHlsPlaybackInitialValue,this.hlsErrorHasOccurred=!1,this.fmsCloudFailed=!1,this.totalFailures=0,
this.hlsFailureCount=0,this.fmsCloudFailureCount=0},incrementTotalFailures:function(){this.totalFailures+=1},removePlaybackScenarioAsOption:function(a){this.currentPlaybackScenarioPreferenceList&&this.currentPlaybackScenarioPreferenceList.splice($.inArray(a,this.currentPlaybackScenarioPreferenceList),1)},haveExhaustedAllPlaybackScenarios:function(){return this.currentPlaybackScenarioPreferenceList&&0==this.currentPlaybackScenarioPreferenceList.length?!0:!1},hasStreamingVideoFailedCompletely:function(){return this.currentPlaybackScenarioPreferenceList&&0==this.currentPlaybackScenarioPreferenceList.length||(!this.considerHlsPlayback||this.hlsErrorHasOccurred)&&this.fmsCloudFailed?!0:!1}}),b}),define("flashobject/flashobject",["jquery"],function(a){function b(){__flash_savedUnloadHandler=null}if("undefined"==typeof c)var c=new Object;"undefined"==typeof c.util&&(c.util=new Object),"undefined"==typeof c.SWFObjectUtil&&(c.SWFObjectUtil=new Object),c.SWFObject=function(a,b,d,e,f,g,h,i,j,k){if(document.getElementById){this.DETECT_KEY=k?k:"detectflash",this.skipDetect=c.util.getRequestParameter(this.DETECT_KEY),this.params=new Object,this.variables=new Object,this.attributes=new Array,a&&this.setAttribute("swf",a),b&&this.setAttribute("id",b),d&&this.setAttribute("width",d),e&&this.setAttribute("height",e),f&&this.setAttribute("version",new c.PlayerVersion(f.toString().split("."))),this.installedVer=c.SWFObjectUtil.getPlayerVersion(),!window.opera&&document.all&&this.installedVer.major>7&&(c.SWFObject.doPrepUnload=!0),g&&this.addParam("bgcolor",g);var l=h?h:"high";this.addParam("quality",l),this.setAttribute("useExpressInstall",!1),this.setAttribute("doExpressInstall",!1);var m=i?i:window.location;this.setAttribute("xiRedirectUrl",m),this.setAttribute("redirectUrl",""),j&&this.setAttribute("redirectUrl",j)}},c.SWFObject.prototype={useExpressInstall:function(a){this.xiSWFPath=a?a:"expressinstall.swf",this.setAttribute("useExpressInstall",!0)},setAttribute:function(a,b){this.attributes[a]=b},getAttribute:function(a){return this.attributes[a]},addParam:function(a,b){this.params[a]=b},getParams:function(){return this.params},addVariable:function(a,b){this.variables[a]=b},getVariable:function(a){return this.variables[a]},getVariables:function(){return this.variables},getVariablePairs:function(){var a,b=new Array,c=this.getVariables();for(a in c)b[b.length]=a+"="+c[a];return b},getSWFHTML:function(){var a="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){this.getAttribute("doExpressInstall")&&(this.addVariable("MMplayerType","PlugIn"),this.setAttribute("swf",this.xiSWFPath)),a='<embed type="application/x-shockwave-flash" src="'+this.getAttribute("swf")+'" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'"',a+=' id="'+this.getAttribute("id")+'" name="'+this.getAttribute("id")+'" ';var b=this.getParams();for(var c in b)a+=[c]+'="'+b[c]+'" ';var d=this.getVariablePairs().join("&");d.length>0&&(a+='flashvars="'+d+'"'),a+="/>"}else{this.getAttribute("doExpressInstall")&&(this.addVariable("MMplayerType","ActiveX"),this.setAttribute("swf",this.xiSWFPath)),a='<object id="'+this.getAttribute("id")+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" style="'+this.getAttribute("style")+'">',a+='<param name="movie" value="'+this.getAttribute("swf")+'" />';var e=this.getParams();for(var c in e)a+='<param name="'+c+'" value="'+e[c]+'" />';var f=this.getVariablePairs().join("&");f.length>0&&(a+='<param name="flashvars" value="'+f+'" />'),a+="</object>"}return a},write:function(a){if(this.getAttribute("useExpressInstall")){var b=new c.PlayerVersion([6,0,65]);this.installedVer.versionIsValid(b)&&!this.installedVer.versionIsValid(this.getAttribute("version"))&&(this.setAttribute("doExpressInstall",!0),this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl"))),document.title=document.title.slice(0,47)+" - Flash Player Installation",this.addVariable("MMdoctitle",document.title))}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var d="string"==typeof a?document.getElementById(a):a;return d.innerHTML=this.getSWFHTML(),!0}return""!=this.getAttribute("redirectUrl")&&document.location.replace(this.getAttribute("redirectUrl")),!1}},c.SWFObjectUtil.getPlayerVersion=function(){var a=new c.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var b=navigator.plugins["Shockwave Flash"];b&&b.description&&(a=new c.PlayerVersion(b.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".")))}else if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0)for(var d=1,e=3;d;)try{e++,d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+e),a=new c.PlayerVersion([e,0,0])}catch(f){d=null}else{try{var d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(f){try{var d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");a=new c.PlayerVersion([6,0,21]),d.AllowScriptAccess="always"}catch(f){if(6==a.major)return a}try{d=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(f){}}null!=d&&(a=new c.PlayerVersion(d.GetVariable("$version").split(" ")[1].split(",")))}return a},c.PlayerVersion=function(a){this.major=null!=a[0]?parseInt(a[0]):0,this.minor=null!=a[1]?parseInt(a[1]):0,this.rev=null!=a[2]?parseInt(a[2]):0},c.PlayerVersion.prototype.versionIsValid=function(a){return this.major<a.major?!1:this.major>a.major?!0:this.minor<a.minor?!1:this.minor>a.minor?!0:this.rev<a.rev?!1:!0},c.util={getRequestParameter:function(a){var b=document.location.search||document.location.hash;if(null==a)return b;if(b)for(var c=b.substring(1).split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return c[d].substring(c[d].indexOf("=")+1);return""}},c.SWFObjectUtil.cleanupSWFs=function(){for(var a=document.getElementsByTagName("OBJECT"),b=a.length-1;b>=0;b--){a[b].style.display="none";for(var c in a[b])"function"==typeof a[b][c]&&(a[b][c]=function(){})}},c.SWFObject.doPrepUnload&&(c.unloadSet||(c.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){},__flash_savedUnloadHandler=function(){},window.attachEvent("onunload",c.SWFObjectUtil.cleanupSWFs)},window.attachEvent("onbeforeunload",c.SWFObjectUtil.prepUnload),c.unloadSet=!0)),!document.getElementById&&document.all&&(document.getElementById=function(a){return document.all[a]});c.util.getRequestParameter,c.SWFObject,c.SWFObject;window.onbeforeunload=b;var d=function(){function a(){if(!S){try{var a=L.getElementsByTagName("body")[0].appendChild(r("span"));a.parentNode.removeChild(a)}catch(b){return}S=!0;for(var c=O.length,d=0;c>d;d++)O[d]()}}function b(a){S?a():O[O.length]=a}function c(a){if(typeof K.addEventListener!=D)K.addEventListener("load",a,!1);else if(typeof L.addEventListener!=D)L.addEventListener("load",a,!1);else if(typeof K.attachEvent!=D)s(K,"onload",a);else if("function"==typeof K.onload){var b=K.onload;K.onload=function(){b(),a()}}else K.onload=a}function e(){N?f():g()}function f(){var a=L.getElementsByTagName("body")[0],b=r(E);b.setAttribute("type",H);var c=a.appendChild(b);if(c){var d=0;!function(){if(typeof c.GetVariable!=D){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),V.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d)return d++,void setTimeout(arguments.callee,10);a.removeChild(b),c=null,g()}()}else g()}function g(){var a=P.length;if(a>0)for(var b=0;a>b;b++){var c=P[b].id,d=P[b].callbackFn,e={success:!1,id:c};if(V.pv[0]>0){var f=q(c);if(f)if(!t(P[b].swfVersion)||V.wk&&V.wk<312)if(P[b].expressInstall&&i()){var g={};g.data=P[b].expressInstall,g.width=f.getAttribute("width")||"0",g.height=f.getAttribute("height")||"0",f.getAttribute("class")&&(g.styleclass=f.getAttribute("class")),f.getAttribute("align")&&(g.align=f.getAttribute("align"));for(var l={},m=f.getElementsByTagName("param"),n=m.length,o=0;n>o;o++)"movie"!=m[o].getAttribute("name").toLowerCase()&&(l[m[o].getAttribute("name")]=m[o].getAttribute("value"));j(g,l,c,d)}else k(f),d&&d(e);else v(c,!0),d&&(e.success=!0,e.ref=h(c),d(e))}else if(v(c,!0),d){var p=h(c);p&&typeof p.SetVariable!=D&&(e.success=!0,e.ref=p),d(e)}}}function h(a){var b=null,c=q(a);if(c&&"OBJECT"==c.nodeName)if(typeof c.SetVariable!=D)b=c;else{var d=c.getElementsByTagName(E)[0];d&&(b=d)}return b}function i(){return!T&&t("6.0.65")&&(V.win||V.mac)&&!(V.wk&&V.wk<312)}function j(a,b,c,d){T=!0,z=d||null,A={success:!1,id:c};var e=q(c);if(e){"OBJECT"==e.nodeName?(x=l(e),y=null):(x=e,y=c),a.id=I,(typeof a.width==D||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==D||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),L.title=L.title.slice(0,47)+" - Flash Player Installation";var f=V.ie&&V.win?"ActiveX":"PlugIn",g="MMredirectURL="+K.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+L.title;if(typeof b.flashvars!=D?b.flashvars+="&"+g:b.flashvars=g,V.ie&&V.win&&4!=e.readyState){var h=r("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}m(a,b,c)}}function k(a){if(V.ie&&V.win&&4!=a.readyState){var b=r("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(l(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(l(a),a)}function l(a){var b=r("div");if(V.win&&V.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(E)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function m(a,b,c){var d,e=q(c);if(V.wk&&V.wk<312)return d;if(e)if(typeof a.id==D&&(a.id=c),V.ie&&V.win){var f="";for(var g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));var h="";for(var i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",Q[Q.length]=a.id,d=q(a.id)}else{var j=r(E);j.setAttribute("type",H);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?j.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&j.setAttribute(k,a[k]));for(var l in b)b[l]!=Object.prototype[l]&&"movie"!=l.toLowerCase()&&n(j,l,b[l]);e.parentNode.replaceChild(j,e),d=j}return d}function n(a,b,c){var d=r("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function o(a){var b=q(a);b&&"OBJECT"==b.nodeName&&(V.ie&&V.win?(b.style.display="none",function(){4==b.readyState?p(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function p(a){var b=q(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function q(a){var b=null;try{b=L.getElementById(a)}catch(c){}return b}function r(a){return L.createElement(a)}function s(a,b,c){a.attachEvent(b,c),R[R.length]=[a,b,c]}function t(a){var b=V.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function u(a,b,c,d){if(!V.ie||!V.mac){var e=L.getElementsByTagName("head")[0];if(e){var f=c&&"string"==typeof c?c:"screen";if(d&&(B=null,C=null),!B||C!=f){var g=r("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),B=e.appendChild(g),V.ie&&V.win&&typeof L.styleSheets!=D&&L.styleSheets.length>0&&(B=L.styleSheets[L.styleSheets.length-1]),C=f}V.ie&&V.win?B&&typeof B.addRule==E&&B.addRule(a,b):B&&typeof L.createTextNode!=D&&B.appendChild(L.createTextNode(a+" {"+b+"}"))}}}function v(a,b){if(U){var c=b?"visible":"hidden";S&&q(a)?q(a).style.visibility=c:u("#"+a,"visibility:"+c)}}function w(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c&&typeof encodeURIComponent!=D?encodeURIComponent(a):a}var x,y,z,A,B,C,D="undefined",E="object",F="Shockwave Flash",G="ShockwaveFlash.ShockwaveFlash",H="application/x-shockwave-flash",I="SWFObjectExprInst",J="onreadystatechange",K=window,L=document,M=navigator,N=!1,O=[e],P=[],Q=[],R=[],S=!1,T=!1,U=!0,V=function(){var a=typeof L.getElementById!=D&&typeof L.getElementsByTagName!=D&&typeof L.createElement!=D,b=M.userAgent.toLowerCase(),c=M.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),e=c?/mac/.test(c):/mac/.test(b),f=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!1,h=[0,0,0],i=null;if(typeof M.plugins!=D&&typeof M.plugins[F]==E)i=M.plugins[F].description,!i||typeof M.mimeTypes!=D&&M.mimeTypes[H]&&!M.mimeTypes[H].enabledPlugin||(N=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),h[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof K.ActiveXObject!=D)try{var j=new ActiveXObject(G);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();(function(){V.w3&&((typeof L.readyState!=D&&"complete"==L.readyState||typeof L.readyState==D&&(L.getElementsByTagName("body")[0]||L.body))&&a(),S||(typeof L.addEventListener!=D&&L.addEventListener("DOMContentLoaded",a,!1),V.ie&&V.win&&(L.attachEvent(J,function(){"complete"==L.readyState&&(L.detachEvent(J,arguments.callee),a())}),K==top&&!function(){if(!S){try{L.documentElement.doScroll("left")}catch(b){return void setTimeout(arguments.callee,0)}a()}}()),V.wk&&!function(){return S?void 0:/loaded|complete/.test(L.readyState)?void a():void setTimeout(arguments.callee,0)}(),c(a)))})(),function(){V.ie&&V.win&&window.attachEvent("onunload",function(){for(var a=R.length,b=0;a>b;b++)R[b][0].detachEvent(R[b][1],R[b][2]);for(var c=Q.length,e=0;c>e;e++)o(Q[e]);for(var f in V)V[f]=null;V=null;for(var g in d)d[g]=null;d=null})}();return{registerObject:function(a,b,c,d){if(V.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,P[P.length]=e,v(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return V.w3?h(a):void 0},embedSWF:function(a,c,d,e,f,g,h,k,l,n){var o={success:!1,id:c};V.w3&&!(V.wk&&V.wk<312)&&a&&c&&d&&e&&f?(v(c,!1),b(function(){d+="",e+="";var b={};if(l&&typeof l===E)for(var p in l)b[p]=l[p];b.data=a,b.width=d,b.height=e;var q={};if(k&&typeof k===E)for(var r in k)q[r]=k[r];if(h&&typeof h===E)for(var s in h)typeof q.flashvars!=D?q.flashvars+="&"+s+"="+h[s]:q.flashvars=s+"="+h[s];if(t(f)){var u=m(b,q,c);b.id==c&&v(c,!0),o.success=!0,o.ref=u}else{if(g&&i())return b.data=g,void j(b,q,c,n);v(c,!0)}n&&n(o)})):n&&n(o)},switchOffAutoHideShow:function(){U=!1},ua:V,getFlashPlayerVersion:function(){return{major:V.pv[0],minor:V.pv[1],release:V.pv[2]}},hasFlashPlayerVersion:t,createSWF:function(a,b,c){return V.w3?m(a,b,c):void 0},showExpressInstall:function(a,b,c,d){V.w3&&i()&&j(a,b,c,d)},removeSWF:function(a){V.w3&&o(a)},createCSS:function(a,b,c,d){V.w3&&u(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=L.location.search||L.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return w(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return w(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(T){var a=q(I);a&&x&&(a.parentNode.replaceChild(x,a),y&&(v(y,!0),V.ie&&V.win&&(x.style.display="block")),z&&z(A)),T=!1}}}}();return d}),function(a,b){"function"==typeof define&&define.amd?define("flashobject/utils/FlashUtils",["jquery","flashobject/flashobject"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("flashobject/flashobject")):a.FlashUtils=b(a.jQuery,null)}(this,function(a,b){"use strict";function c(){}return c.prototype=a.extend(c.prototype,{getVersionSkin:function(a){var b="/flash/video/y2009/skins/",c={"/flash/video/y2008/skins/ads_countdown_skin.swf":b+"ad_countdown.swf","/flash/video/y2008/skins/mlb_hpSkin.swf":b+"mlb_homepage.swf","/flash/video/y2008/skins/mlb_mediaLandingSkin.swf":b+"mlb_media_landing.swf","/flash/video/y2008/skins/mlb_team_lookin.swf":b+"mlb_live_lookin.swf","/flash/video/y2008/skins/mlb_teamHPmini.swf":b+"mlb_team_homepage.swf","/flash/video/v2/skins/mlb_hpSkin.swf":b+"mlb_homepage.swf","/flash/video/v2/skins/mlb_mediaLandingSkin.swf":b+"mlb_media_landing.swf","/flash/video/v2/skins/mlb_teamHPmini.swf":b+"mlb_team_homepage.swf"},d=c[a]||a;return d},hasFlashPlayerVersion:function(a){return b.hasFlashPlayerVersion(a)},isFlashPlaybackSupported:function(){var a="12.0.0.69";return b.hasFlashPlayerVersion(a)},doesFlashPlayerVersionSupportHls:function(){var a="12.0.0.69";return b.hasFlashPlayerVersion(a)},doesFlashPlayerVersionSupportHlsAltAudio:function(){var a="14.0.0.139";return b.hasFlashPlayerVersion(a)}}),new c}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/models/PlaybackModel",["logger/ClassLogger","lodash/lodash","flashobject/utils/FlashUtils"],b):"object"==typeof exports?module.exports=b(require("logger/ClassLogger"),require("lodash/lodash"),require("flashobject/utils/FlashUtils")):a.PlaybackModel=b(a.ClassLogger,a._,a.FlashUtils)}(this,function(a,b,c){"use strict";function d(){}var e=new a("PlaybackModel");return d.prototype=$.extend(d.prototype,{userProfile:null,loadMetadataFileForContentId:!1,useMediaFramework:!0,publicFunction:function(){},flashPlayerVersionSupportsHls:!1,flashPlayerVersionSupportsAltAudio:!1,considerHlsPlayback:!0,updateModelUsingConfig:function(a){var b=function(a,b){return!(null===a[b]||"undefined"==typeof a[b])};b(a,"loadMetadataFileForContentId")&&(this.loadMetadataFileForContentId=a.loadMetadataFileForContentId),this.updateHlsEvalProperties(a)},updateHlsEvalProperties:function(a){var d=!1,e=!1,f=!1,g=function(a,b){return!(null===a[b]||"undefined"==typeof a[b])};g(a,"considerHlsPlayback")&&(d=a.considerHlsPlayback,d===!0&&(e=c.doesFlashPlayerVersionSupportHls(),e&&(f=c.doesFlashPlayerVersionSupportHlsAltAudio()))),this.considerHlsPlayback=d,this.desktopHtml5HlsPlaybackEnabled=b.get(a,"videoPlayers.desktop.html5HlsPlaybackEnabled",!1),this.phoneHtml5HlsPlaybackEnabled=b.get(a,"videoPlayers.phone.html5HlsPlaybackEnabled",!1),this.tabletHtml5HlsPlaybackEnabled=b.get(a,"videoPlayers.tablet.html5HlsPlaybackEnabled",!1),this.flashPlayerVersionSupportsHls=e,this.flashPlayerVersionSupportsAltAudio=f},mediaInstances:{},addMediaItem:function(a,b){e.log("addMediaItem: uniqueKey = ",a),this.mediaInstances[a]=b},getMediaItemByUniqueKey:function(a){return e.log("getMediaItemFromCalendarEventId: uniqueKey = ",a),this.mediaInstances[a]},getMediaItemFromCalendarEventId:function(a){return e.log("getMediaItemFromCalendarEventId: calendarEventId = ",a),this.mediaInstances[a]},getMediaItemFromContentId:function(a){e.log("getMediaItemFromContentId: contentId = ",a);var c;return b.each(this.mediaInstances,function(b,d){(b.clip&&b.clip.content_id===a||b.currentPlaylistItem&&b.currentPlaylistItem.content_id===a)&&(c=b)},c),c}}),new d}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/config/VpmConfigHelper",["bam.url/url"],b):"object"==typeof exports?module.exports=b(require("bam.url/url")):a.VpmConfigHelper=b(null)}(this,function(a){"use strict";function b(b){var c=b;this.propExistsOnConfig=function(a){return!(null===c[a]||"undefined"==typeof c[a])},this.config=function(){return c};var d=function(b){var c=a.Location(),d=c.getParam("considerHlsPlayback");if(null===d&&(d=c.getParam("hls")),null!==d){var e=!0;"false"===d&&(e=!1),b.considerHlsPlayback=e}};this.applyUrlOverridesToConfig=function(){d(c)},this.addRandomValuesToConfig=function(){if(this.propExistsOnConfig("considerHlsPlayback"))try{c.flash.hls.hlsPlaybackEnabled=c.considerHlsPlayback}catch(a){}}}return b.prototype=$.extend(b.prototype,{}),b}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioEnum",[],b):"object"==typeof exports?module.exports=b():a.PlaybackScenarioEnum=b()}(this,function(){"use strict";function a(a){}return a.prototype=$.extend(a.prototype,{}),a.HLS_SCENARIO="HTTP_CLOUD_WIRED_WEB",a.HLS_SCENARIO_ONLY_AVAILABLE_BUT_USER_DOES_NOT_HAVE_SUPPORT="HLS_SCENARIO_ONLY_AVAILABLE_BUT_USER_DOES_NOT_HAVE_SUPPORT",a.FMS_DYNAMIC_STREAMING_SCENARIO="FMS_CLOUD",a.AUDIO_SCENARIO_FMS_2009="MLB_FMS_AUDIO_32K_STREAM",a.AUDIO_SCENARIO_FMS="AUDIO_FMS_32K",a.AUDIO_SCENARIO_HLS="HTTP_CLOUD_AUDIO",a.AUDIO_SCENARIO_HLS_TS="HTTP_CLOUD_AUDIO_TS",a}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/utils/PlaybackScenarioHelper",["video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioEnum"],b):"object"==typeof exports?module.exports=b(require("video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioEnum")):a.PlaybackScenarioHelper=b(a.PlaybackScenarioEnum)}(this,function(a){"use strict";function b(){}return b.prototype=$.extend(b.prototype,{publicFunction:function(){}}),b.isPlaybackScenarioHls=function(a){return a&&a.indexOf("HTTP_CLOUD")>=0&&-1==a.indexOf("HTTP_CLOUD_AUDIO")},b.isPlaybackScenarioFmsCloud=function(a){return"FMS_CLOUD"===a},b.isHlsAudioScenario=function(a){return a&&a.indexOf("HTTP_CLOUD_AUDIO")>=0?!0:!1},b.containsHlsScenario=function(a){if("undefined"!=typeof a&&a instanceof Array){var c,d,e=a.length;for(c=0;e>c;c++)if(d=b.isHlsScenario(a[c]))return!0}return!1},b.isHlsScenario=function(b){return"undefined"!=typeof b&&null!==b&&b.indexOf("HTTP_CLOUD")>=0&&-1==b.indexOf("HTTP_CLOUD_AUDIO")?(a.HLS_SCENARIO=b,!0):!1},b.containsFmsDynamicScenario=function(a){if("undefined"!=typeof a&&a instanceof Array){var c,d,e=a.length;for(c=0;e>c;c++)if(d=b.isFMSDynamicStreamingScenario(a[c]))return!0}return!1},b.isFMSDynamicStreamingScenario=function(b){return"undefined"!=typeof b&&null!==b&&b.indexOf("FMS_CLOUD")>=0?(a.FMS_DYNAMIC_STREAMING_SCENARIO=b,!0):!1},b}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaitem/data/MediaItemType",[],b):"object"==typeof exports?module.exports=b():a.MediaItemType=b()}(this,function(){"use strict";function a(){}return a.prototype=$.extend(a.prototype,{}),a.SIMPLE_URL="SIMPLE_URL",a.METADATA_FILE="METADATA_FILE",a.METADATA_FILE_AUTH_REQUIRED="METADATA_FILE_AUTH_REQUIRED",a.MEDIA_FRAMEWORK_CONTENT="MEDIA_FRAMEWORK_CONTENT",a.MEDIA_FRAMEWORK_EVENT_CONTENT="MEDIA_FRAMEWORK_EVENT_CONTENT",a}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/VideoMessage",["bandwagon/bandwagon"],b):"object"==typeof exports?module.exports=b(require("bandwagon/bandwagon")):a.MediaItemManager=b(null)}(this,function(a){"use strict";function b(){}return b.prototype=$.extend(b.prototype,{error:function(b,c){var d="#video-player",e=a.getInstanceByKey(d),f=a.getRegisteredEventsByKey("MESSAGE_WIDGET_EVENTS");if(f){var g=b;e.publish(f.SHOW_MESSAGE,{key:g,error:b,errorMsg:c})}},showBlackout:function(b){var c="#video-player",d=a.getInstanceByKey(c),e=a.getRegisteredEventsByKey("MESSAGE_WIDGET_EVENTS");e&&d.publish(e.MESSAGE_BLACKOUT_CMD,b)}}),new b}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/error/ErrorManager",["logger/ClassLogger","video-playback-manager/vpm/models/PlaybackModel","video-playback-manager/vpm/utils/PlaybackScenarioHelper","video-playback-manager/vpm/mediaitem/data/MediaItemType","video-playback-manager/vpm/VideoMessage"],b):"object"==typeof exports?module.exports=b(require("logger/ClassLogger"),require("video-playback-manager/vpm/models/PlaybackModel"),require("video-playback-manager/vpm/utils/PlaybackScenarioHelper"),require("video-playback-manager/vpm/mediaitem/data/MediaItemType"),require("video-playback-manager/vpm/VideoMessage")):a.ErrorManager=b(a.ClassLogger,a.PlaybackModel,a.PlaybackScenarioHelper,a.MediaItemType,null)}(this,function(a,b,c,d,e){"use strict";function f(a){this._mediaItemManager=a}var g=new a("ErrorManager");return f.prototype=$.extend(f.prototype,{_mediaItemManager:null,HLS_MAX_CONNECT_ATTEMPTS:3,FMS_MAX_CONNECT_ATTEMPTS:2,propExistsOnConfig:function(a,b){return!(null===a[b]||"undefined"==typeof a[b])},setupErrorHandlingConstants:function(a){this.propExistsOnConfig(a,"hlsMaxConnectAttempts")&&(this.HLS_MAX_CONNECT_ATTEMPTS=a.hlsMaxConnectAttempts),this.propExistsOnConfig(a,"fmsCloudMaxConnectAttempts")&&(this.FMS_MAX_CONNECT_ATTEMPTS=a.fmsCloudMaxConnectAttempts)},errorEventHandler:function(a){if(g.log("errorEventHandler: data="+a),null!==a.errorType&&"undefined"!=typeof a.errorType){var b=a.errorType;g.log("errorEventHandler: errorType="+b),this.showMediaError("error",b)}},mediaErrorEventHandler:function(a){if(g.log("mediaErrorEventHandler: data=",a),null!==a.errorType&&"undefined"!=typeof a.errorType){var c=a.errorType;g.log("mediaErrorEventHandler: errorType="+c)}var d;if(null!==a.uniqueId&&"undefined"!=typeof a.uniqueId)d=b.getMediaItemFromContentId(a.uniqueId);else if(null!==a.clip&&"undefined"!=typeof a.clip){var e=a.clip;g.log("mediaErrorEventHandler: clip=",e),d=b.getMediaItemFromContentId(a.clip.uniqueId)}d&&this.handleErrorAndRetry(d)},handleErrorAndRetry:function(a){g.log("handleErrorAndRetry - failedMediaItem = ",a);var b=!1;a.incrementTotalFailures();var e=a.currentPlaybackScenario;if(g.log("handleErrorAndRetry: failedPlaybackScenario="+e),!e)return g.log("handleErrorAndRetry: failedPlaybackScenario="+e+" so get out of here!"),b;var f=!0;return c.isPlaybackScenarioHls(e)&&(a.hlsFailureCount++,a.hlsFailureCount>=this.HLS_MAX_CONNECT_ATTEMPTS?(g.log("handleErrorAndRetry: failedMediaItem.hlsFailureCount === "+this.HLS_MAX_CONNECT_ATTEMPTS+", so set hlsErrorHasOccurred = true"),a.hlsErrorHasOccurred=!0):(g.log("handleErrorAndRetry: failedPlaybackScenario="+e+" and hlsFailureCount="+a.hlsFailureCount+" so try this playbackScenario one more time"),f=!1)),c.isPlaybackScenarioFmsCloud(e)&&(a.fmsCloudFailureCount++,a.fmsCloudFailureCount>=this.FMS_MAX_CONNECT_ATTEMPTS?(g.log("handleErrorAndRetry: failedMediaItem.fmsCloudFailureCount === "+this.FMS_MAX_CONNECT_ATTEMPTS+", so set fmsCloudFailed = true"),a.fmsCloudFailed=!0):(g.log("handleErrorAndRetry: failedPlaybackScenario="+e+" and fmsCloudFailureCount="+a.fmsCloudFailureCount+" so try this playbackScenario one more time"),f=!1)),f&&(g.log("handleErrorAndRetry: failedPlaybackScenario="+e+", so remove this playbackScenario as an option"),a.removePlaybackScenarioAsOption(e)),a.setClipState("error"),a.haveExhaustedAllPlaybackScenarios()||a.type===d.MEDIA_FRAMEWORK_EVENT_CONTENT&&a.hasStreamingVideoFailedCompletely()?(g.error("handleErrorAndRetry: could not find a valid playbackScenario to use so abort"),this.showMediaError("mfInvalidMediaState","could not find a valid playbackScenario for this content")):this._mediaItemManager.playMediaItem(a),b=!0},showMediaError:function(a,b,c){e.error(a,b,c)}}),f}),function(a,b){"function"==typeof define&&define.amd?define("jsoop/oop/Inheritance",[],b):"object"==typeof exports?module.exports=b():a.Inheritance=b()}(this,function(){"use strict";function a(){}return a.prototype=$.extend(a.prototype,{inherit:function(a,b,c){function d(){}if("function"!=typeof b||"function"!=typeof a)throw new Error("inherit failed, please check that all dependencies are included. child = "+a+" parent="+b);var e;if(d.prototype=b.prototype,a.prototype=new d,a.prototype.constructor=a,a.prototype["super"]=b.prototype,a.superclass=b.prototype,b.prototype.constructor===Object.prototype.constructor&&(b.prototype.constructor=b),c)for(e in c)c.hasOwnProperty(e)&&(a.prototype[e]=c[e])}}),new a}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaitem/mediacliploader/AbstractMediaClipLoader",["logger/ClassLogger","video-playback-manager/vpm/VideoMessage","video-playback-manager/vpm/models/PlaybackModel","video-playback-manager/vpm/utils/PlaybackScenarioHelper"],b):"object"==typeof exports?module.exports=b(require("logger/ClassLogger"),require("video-playback-manager/vpm/VideoMessage"),require("video-playback-manager/vpm/models/PlaybackModel"),require("video-playback-manager/vpm/utils/PlaybackScenarioHelper")):a.AbstractMediaClipLoader=b(a.ClassLogger,null,a.PlaybackModel,a.PlaybackScenarioHelper)}(this,function(a,b,c,d){"use strict";function e(a){this.config=a,this.player=null}var f=new a("AbstractMediaClipLoader");return e.prototype=$.extend(e.prototype,{config:{},getMediaClip:function(a){f.log("getMediaClip:")},_getNextPlaybackScenario:function(a){f.log("_getNextPlaybackScenario:");var b=!1;try{this.player.device=this.player.utils.getDevice()}catch(d){console.log("loading device object from AbstractPlayer")}this.player.supportsHls&&(this.player.device.is.desktop?b=this.player.isFlash?c.flashPlayerVersionSupportsHls:c.desktopHtml5HlsPlaybackEnabled:this.player.device.is.phone?b=c.phoneHtml5HlsPlaybackEnabled:this.player.device.is.tablet&&(b=c.tabletHtml5HlsPlaybackEnabled));var e=this.selectPlaybackScenario(a.currentPlaybackScenarioPreferenceList,a.getAvailablePlaybackScenarios(),b,a.considerHlsPlayback,a.hlsErrorHasOccurred);return e},selectPlaybackScenario:function(a,b,c,e,g){f.log("selectPlaybackScenario:");var h;if(b&&b.length>0){var i=!1;e===!0&&c===!0&&(i=!g);for(var j=0,k=a.length;k>j;j++){var l=a[j];if(i||!d.isPlaybackScenarioHls(l)){var m=$.inArray(l,b);if(-1!==m){h=l;break}}}}return f.log("selectPlaybackScenario: use playbackScenario="+h),h},showMediaError:function(a,c,d){b.error(a,c,d)}}),e}),function(a,b){"function"==typeof define&&define.amd?define("MetaDataLoader/models/Meta",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.Meta=b(a._)}(this,function(a){function b(b,c){var d=b;this.getKeyWordValue=function(b){var c,d;return d=this.data().keywordsAll?a.filter(this.data().keywordsAll,{type:b}):this.data().keywords&&this.data().keywords.keyword?a.filter(this.data().keywords.keyword,{type:b}):a.filter(this.data().keywords,{type:b}),d.length>0&&(c=d[0].value),c},this.data=function(){return d.media?d.media:d},this.getDuration=function(){var a=this.data().duration||this.data().runtime;return a||(a=""),a},this.formatPlaybacks=function(){var b=this.data().playbacks||this.data().url,c=[];return a.each(b,function(a){var b={playback_scenario:a.name||a.playback_scenario,height:a.height||"",width:a.width||"",value:a.url||a.value};c.push(b)}),c},this.authflow_required=this.data().authFlow,this.mediaPlaybackId=this.data().mediaPlaybackId?this.data().mediaPlaybackId:c,this.twitterInline=this.getKeyWordValue("twitter_inline"),this.shareable=this.getKeyWordValue("shareable"),this.notEmbeddable=this.getKeyWordValue("not_embeddable"),this.notShareable=this.getKeyWordValue("not_shareable"),this.embeddable=this.getKeyWordValue("embeddable"),this.content_id=c,this.date=this.data().date,this.duration=this.getDuration(),this.headline=this.data().headline,this.title=this.data().title,this.seoTitle=this.data().seoTitle,this.slug=this.data().slug,this.kicker=this.data().kicker,this.blurb=this.data().blurb,this.mediaState=this.data().mediaState,this.bigBlurb=this.data()["big-blurb"],this.description=this.data().description,this.data().thumbnailScenarios?(this.imagesByType=a.object(a.map(this.data().thumbnailScenarios.thumbnailScenario,function(a){return[a.type,a.value]})),this.thumb=this.imagesByType[7]||""):(this.image=this.data().image,this.thumb="");try{this.keywords=this.data().keywordsAll?this.data().keywordsAll:this.data().keywords.keyword?this.data().keywords.keyword:this.data().keywords}catch(e){console.info("Error parsing keywords",e)}this.keywordsDisplay=this.data().keywordsDisplay,this.playbacks=this.formatPlaybacks(),
this.urls=this.formatPlaybacks(),this.combined_media_state=this.getKeyWordValue("combined_media_state"),this.advisory_rating="undefined"!=typeof this.getKeyWordValue("advisory_rating")?this.getKeyWordValue("advisory_rating"):"",this.tv_rating=this.getKeyWordValue("tv_rating"),this.closed_captioned="Y"==this.getKeyWordValue("closed_captioned")||this.getKeyWordValue("closed_captioned")===!0,this.closed_captions_location_vtt=this.getKeyWordValue("closed_captions_location_vtt"),this.hasVttFile=!("undefined"==typeof this.closed_captions_location_vtt||""===this.closed_captions_location_vtt||"undefined"===this.closed_captions_location_vtt),this.closed_captions_location_ttml=this.getKeyWordValue("closed_captions_location_ttml"),this.start_time=this.getKeyWordValue("start_time"),this.calendar_event_id=this.getKeyWordValue("calendar_event_id"),this.coverage_association=this.getKeyWordValue("coverage_association"),this.coverage_type=this.getKeyWordValue("coverage_type"),this.default_dam_view_key=this.getKeyWordValue("default_dam_view_key"),this.event_date=this.getKeyWordValue("event_date"),this.away_team_id=this.getKeyWordValue("away_team_id"),this.home_team_id=this.getKeyWordValue("home_team_id"),this.call_letters=this.getKeyWordValue("call_letters"),this.game_id=this.getKeyWordValue("game_id"),this.game_pk=this.getKeyWordValue("game_pk"),this.inning_index_location_xml=this.getKeyWordValue("inning_index_location_xml"),this.milestones_xml=this.getKeyWordValue("milestones_xml");var f=window.mediaConfig&&window.mediaConfig.app&&window.mediaConfig.app.vttProxyConfig?window.mediaConfig.app.vttProxyConfig:{};if(this.hasVttFile&&f.ieEnabled){var g=window.deviceBootstrap();if("msie"===g.browser&&"11.0"===g.browserVersion){var h=window.server_path.server,i=this.closed_captions_location_vtt;this.closed_captions_location_vtt=i.replace(f.vttServerPath,h+f.basesiteRoutePrepend)}}}return b}),function(a,b){"function"==typeof define&&define.amd?define("MetaDataLoader/models/XMLMeta",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.Meta=b(a._)}(this,function(a){function b(b,c){var d=b,e=this,f=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b},g=function(b){return a.map(b,function(a,b){return{type:a.getAttribute("type"),value:a.getAttribute("value"),displayName:a.getAttribute("displayName"),getAttribute:function(a){return this[a]}}})};this.getKeyWordValue=function(b){var c,d=a.filter(this.keywords,{type:b});return d.length>0&&(c=d[0].value),c},this.getTagValue=function(a){return i(a)&&i(a).firstChild?i(a).firstChild.nodeValue:""};var h=function(b){var c=[];return a.each(b,function(b,d){var e={value:b.textContent};a.each(b.attributes,function(a,b){e[a.nodeName]="undefined"!=typeof a.text?a.text:"undefined"!=typeof a.textContent?a.textContent:!1}),c.push(e)}),c},i=function(a){return b.getElementsByTagName(a)[0]};e.data=function(){return d.media},e.keywords=g(f(b.getElementsByTagName("keyword"))),e.urls=h(f(b.getElementsByTagName("url"))),e.playbacks=h(f(b.getElementsByTagName("url"))),e.content_id=c,this.authflow_required="undefined"!=typeof this.getKeyWordValue("authflow")?"true"===this.getKeyWordValue("authflow")||this.getKeyWordValue("authflow")===!0:!1,this.twitterInline=this.getKeyWordValue("twitter_inline"),this.shareable=this.getKeyWordValue("shareable"),this.notEmbeddable=this.getKeyWordValue("not_embeddable"),this.notShareable=this.getKeyWordValue("not_shareable"),this.embeddable=this.getKeyWordValue("embeddable"),this.combined_media_state=this.getKeyWordValue("combined_media_state"),this.advisory_rating="undefined"!=typeof this.getKeyWordValue("advisory_rating")?this.getKeyWordValue("advisory_rating"):"",this.tv_rating=this.getKeyWordValue("tv_rating"),this.closed_captioned="Y"==this.getKeyWordValue("closed_captioned"),this.closed_captions_location_ttml=this.getKeyWordValue("closed_captions_location_ttml"),this.start_time=this.getKeyWordValue("start_time"),this.calendar_event_id=this.getKeyWordValue("calendar_event_id"),this.coverage_association=this.getKeyWordValue("coverage_association"),this.coverage_type=this.getKeyWordValue("coverage_type"),this.default_dam_view_key=this.getKeyWordValue("default_dam_view_key"),this.event_date=this.getKeyWordValue("event_date"),this.away_team_id=this.getKeyWordValue("away_team_id"),this.home_team_id=this.getKeyWordValue("home_team_id"),this.call_letters=this.getKeyWordValue("call_letters"),this.game_id=this.getKeyWordValue("game_id"),this.game_pk=this.getKeyWordValue("game_pk"),this.inning_index_location_xml=this.getKeyWordValue("inning_index_location_xml"),this.milestones_xml=this.getKeyWordValue("milestones_xml"),e.date=i("media")?b.getElementsByTagName("media")[0].getAttribute("date"):"",e.duration=this.getTagValue("duration"),e.headline=this.getTagValue("headline"),e.kicker=this.getTagValue("kicker"),e.blurb=this.getTagValue("blurb"),e.bigBlurb=this.getTagValue("big-blurb"),e.deliveryType=this.getTagValue("deliveryType"),e.imagesByType=[],a.each(b.getElementsByTagName("thumbnailScenario"),function(a,b){e.imagesByType[a.getAttribute("type")]=a.firstChild&&a.firstChild.nodeValue?a.firstChild.nodeValue:""}),e.thumb=e.imagesByType[7]||""}return b}),function(){"use strict";function a(a){return"function"==typeof a||"object"==typeof a&&null!==a}function b(a){return"function"==typeof a}function c(a){return"object"==typeof a&&null!==a}function d(){}function e(){return function(){process.nextTick(i)}}function f(){var a=0,b=new L(i),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function g(){var a=new MessageChannel;return a.port1.onmessage=i,function(){a.port2.postMessage(0)}}function h(){return function(){setTimeout(i,1)}}function i(){for(var a=0;I>a;a+=2){var b=N[a],c=N[a+1];b(c),N[a]=void 0,N[a+1]=void 0}I=0}function j(){}function k(){return new TypeError("You cannot resolve a promise with itself")}function l(){return new TypeError("A promises callback cannot return that same promise.")}function m(a){try{return a.then}catch(b){return R.error=b,R}}function n(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function o(a,b,c){J(function(a){var d=!1,e=n(c,b,function(c){d||(d=!0,b!==c?r(a,c):t(a,c))},function(b){d||(d=!0,u(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,u(a,e))},a)}function p(a,b){b._state===P?t(a,b._result):a._state===Q?u(a,b._result):v(b,void 0,function(b){r(a,b)},function(b){u(a,b)})}function q(a,c){if(c.constructor===a.constructor)p(a,c);else{var d=m(c);d===R?u(a,R.error):void 0===d?t(a,c):b(d)?o(a,c,d):t(a,c)}}function r(b,c){b===c?u(b,k()):a(c)?q(b,c):t(b,c)}function s(a){a._onerror&&a._onerror(a._result),w(a)}function t(a,b){a._state===O&&(a._result=b,a._state=P,0===a._subscribers.length||J(w,a))}function u(a,b){a._state===O&&(a._state=Q,a._result=b,J(s,a))}function v(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+P]=c,e[f+Q]=d,0===f&&a._state&&J(w,a)}function w(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?z(c,d,e,f):e(f);a._subscribers.length=0}}function x(){this.error=null}function y(a,b){try{return a(b)}catch(c){return S.error=c,S}}function z(a,c,d,e){var f,g,h,i,j=b(d);if(j){if(f=y(d,e),f===S?(i=!0,g=f.error,f=null):h=!0,c===f)return void u(c,l())}else f=e,h=!0;c._state!==O||(j&&h?r(c,f):i?u(c,g):a===P?t(c,f):a===Q&&u(c,f))}function A(a,b){try{b(function(b){r(a,b)},function(b){u(a,b)})}catch(c){u(a,c)}}function B(a,b,c,d){this._instanceConstructor=a,this.promise=new a(j,d),this._abortOnReject=c,this._validateInput(b)?(this._input=b,this.length=b.length,this._remaining=b.length,this._init(),0===this.length?t(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&t(this.promise,this._result))):u(this.promise,this._validationError())}function C(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function D(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function E(a){this._id=Y++,this._state=void 0,this._result=void 0,this._subscribers=[],j!==a&&(b(a)||C(),this instanceof E||D(),A(this,a))}var F;F=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var G,H=F,I=(Date.now||function(){return(new Date).getTime()},Object.create||function(a){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof a)throw new TypeError("Argument must be an object");return d.prototype=a,new d},0),J=function(a,b){N[I]=a,N[I+1]=b,I+=2,2===I&&G()},K="undefined"!=typeof window?window:{},L=K.MutationObserver||K.WebKitMutationObserver,M="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,N=new Array(1e3);G="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?e():L?f():M?g():h();var O=void 0,P=1,Q=2,R=new x,S=new x;B.prototype._validateInput=function(a){return H(a)},B.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},B.prototype._init=function(){this._result=new Array(this.length)};var T=B;B.prototype._enumerate=function(){for(var a=this.length,b=this.promise,c=this._input,d=0;b._state===O&&a>d;d++)this._eachEntry(c[d],d)},B.prototype._eachEntry=function(a,b){var d=this._instanceConstructor;c(a)?a.constructor===d&&a._state!==O?(a._onerror=null,this._settledAt(a._state,b,a._result)):this._willSettleAt(d.resolve(a),b):(this._remaining--,this._result[b]=this._makeResult(P,b,a))},B.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===O&&(this._remaining--,this._abortOnReject&&a===Q?u(d,c):this._result[b]=this._makeResult(a,b,c)),0===this._remaining&&t(d,this._result)},B.prototype._makeResult=function(a,b,c){return c},B.prototype._willSettleAt=function(a,b){var c=this;v(a,void 0,function(a){c._settledAt(P,b,a)},function(a){c._settledAt(Q,b,a)})};var U=function(a,b){return new T(this,a,!0,b).promise},V=function(a,b){function c(a){r(f,a)}function d(a){u(f,a)}var e=this,f=new e(j,b);if(!H(a))return u(f,new TypeError("You must pass an array to race.")),f;for(var g=a.length,h=0;f._state===O&&g>h;h++)v(e.resolve(a[h]),void 0,c,d);return f},W=function(a,b){var c=this;if(a&&"object"==typeof a&&a.constructor===c)return a;var d=new c(j,b);return r(d,a),d},X=function(a,b){var c=this,d=new c(j,b);return u(d,a),d},Y=0,Z=E;E.all=U,E.race=V,E.resolve=W,E.reject=X,E.prototype={constructor:E,then:function(a,b){var c=this,d=c._state;if(d===P&&!a||d===Q&&!b)return this;var e=new this.constructor(j),f=c._result;if(d){var g=arguments[d-1];J(function(){z(d,e,g,f)})}else v(c,e,a,b);return e},"catch":function(a){return this.then(null,a)}};var $=function(){var a;a="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self;var c="Promise"in a&&"resolve"in a.Promise&&"reject"in a.Promise&&"all"in a.Promise&&"race"in a.Promise&&function(){var c;return new a.Promise(function(a){c=a}),b(c)}();c||(a.Promise=Z)},_={Promise:Z,polyfill:$};"function"==typeof define&&define.amd?define("es6-promise/promise",[],function(){return _}):"undefined"!=typeof module&&module.exports?module.exports=_:"undefined"!=typeof this&&(this.ES6Promise=_)}.call(this),function(a,b){"function"==typeof define&&define.amd?define("MetaDataLoader/MetaDataLoader",["MetaDataLoader/models/Meta","MetaDataLoader/models/XMLMeta","es6-promise/promise","jquery"],b):"object"==typeof exports?module.exports=b(require("MetaDataLoader/models/Meta"),require("MetaDataLoader/models/XMLMeta"),require("es6-promise/promise"),require("jquery")):a.MetaDataLoader=b(a.Meta,a.XMLMeta,null,null)}(this,function(a,b,c,d){"use strict";function e(c){var e=c;this.load=function(c){return new Promise(function(e,h){d.ajax({type:"GET",url:g(c),dataType:f(g(c)),success:function(d,h,i){var j;switch(f(g(c))){case"xml":j=new b(d,c);break;default:j=new a(d,c)}e(j)},error:function(a,b,c){h(a.responseText)}})})};var f=function(a){return a.slice(a.lastIndexOf(".")+1,a.length)},g=function(a){var b=e.root+a.replace(e.regex,e.pattern);return b};return this}return c.polyfill(),e}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/loader/MetadataFileLoader",["bindable/jquery.bindable","MetaDataLoader/MetaDataLoader"],b):"object"==typeof exports?module.exports=b(require("bindable/jquery.bindable"),require("MetaDataLoader/MetaDataLoader")):a.MetadataFileLoader=b(null,a.MetaDataLoader)}(this,function(a,b){"use strict";function c(b){this._config=b,a(this)}var d;return c.prototype={_config:{},load:function(a){console.log("MetadataFileLoader load: content_id="+a);var e=this;if("undefined"==typeof a)return!1;if(d&&d[a]){var f=d[a];$(this).trigger(c.EVENT_METADATA_FILE_LOAD_SUCCESS,f)}else{var g=new b(this._config.metaUtil);try{g.load(a).then(function(b){console.log(b),d=d||{},d[a]=b,$(e).trigger(c.EVENT_METADATA_FILE_LOAD_SUCCESS,b)},function(a){console.log("ERROR"),$(e).trigger(c.EVENT_METADATA_FILE_LOAD_ERROR)})}catch(h){console.log("ERROR"),$(e).trigger(c.EVENT_METADATA_FILE_LOAD_ERROR)}}}},c.EVENT_METADATA_FILE_LOAD_SUCCESS="METADATA_FILE_LOAD_SUCCESS",c.EVENT_AUTHFLOW_REQUIRED="AUTHFLOW_REQUIRED",c.EVENT_METADATA_FILE_LOAD_ERROR="METADATA_FILE_LOAD_ERROR",c}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/utils/MetadataUtils",[],b):"object"==typeof exports?module.exports=b():a.MetadataUtils=b()}(this,function(){"use strict";function a(){}return a.prototype=$.extend(a.prototype,{config:{},getPlaybackByType:function(a,b){console.log("MetadataUtils getPlaybackByType: playbackScenaro to find = "+b);var c,d;return $.each(a.urls,function(e,f){d=f.playback_scenario,d==b&&(c=f.value,a.currentPlaybackScenario=f.playback_scenario)}),c},getPlaybackURL:function(a,b){var c=b[0];console.log("MetadataUtils getPlaybackURL: playbackScenaro to find = "+c);var d=_.findWhere(a.urls,{playback_scenario:c});return"undefined"==typeof d&&(b.shift(),d=VC.utils.getPlaybackURL(a,b)),d.value},getClosestPlaybackBySize:function(a,b,c){console.log("MetadataUtils getClosestPlaybackBySize: playbackScenaro pattern to find = "+c);var d,e,f,g,h,i,j,k=1e3,l=this.config.minimumVideoWidth||0,m=null,n=!1,o=!1;if($.each(b.urls,function(b,p){if(h=p.playback_scenario.split("_"),d=p.playback_scenario.split("_")[0],!(p.playback_scenario.indexOf(c)<0))if(e="SD"==h[h.length-1]||"HD"==h[h.length-1]?h[h.length-2].split("X"):h[h.length-1].split("X"),f=parseInt(e[0]),g=parseInt(e[1]),isNaN(f)&&isNaN(g))i=p.value,m=p.playback_scenario,j="640X360";else{var q=Math.abs(f-a);k>q&&f>=l&&(i=p.value,m=p.playback_scenario,j="SD"==h[h.length-1]||"HD"==h[h.length-1]?h[h.length-2]:h[h.length-1],k=q,n="Y"==p.login,o="Y"==p.authorization)}}),b.login=n,b.authorization=o,b.size=j,!i){var p="HTTP_CLOUD_WIRED";$.each(b.urls,function(a,b){d=b.playback_scenario,d==p&&(i=b.value,m=b.playback_scenario)})}return i&&(b.currentPlaybackScenario=m),console.log("MetadataUtils getClosestPlaybackBySize: playbackScenarioUsed = "+m+", return path = "+i),i},getDurationInSeconds:function(a){for(var b=a.toString().split(":").reverse(),c=0,d=0;b[c];)d+=0===c?parseInt(b[c],10):parseInt(b[c],10)*Math.pow(60,c),c++;return d},filterUrlByDevice:function(a,b){for(var c=[],d=0,e=b.length;e>d;d++)a[b[d]]&&c.push(a[b[d]]);return c}}),new a}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/clip/MediaClip",[],b):"object"==typeof exports?module.exports=b():a.MediaClip=b()}(this,function(){"use strict";function a(){}return a.prototype=$.extend(a.prototype,{type:"video",path:null,content_id:null,metaData:null,duration:null,topic_id:null,isHighlight:void 0,startTimeOffset:void 0,totalFailures:0,calendarEventId:null,publicFunction:function(){}}),a}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaitem/mediacliploader/MetadataClipLoader",["lodash/lodash","logger/ClassLogger","bindable/jquery.bindable","jsoop/oop/Inheritance","bandwagon/bandwagon","video-playback-manager/vpm/mediaitem/mediacliploader/AbstractMediaClipLoader","video-playback-manager/vpm/mediaitem/mediacliploader/MediaItemClipLoaderEventEnum","video-playback-manager/vpm/models/PlaybackModel","video-playback-manager/vpm/events/VPMEvents","video-playback-manager/vpm/loader/MetadataFileLoader","video-playback-manager/vpm/utils/MetadataUtils","video-playback-manager/vpm/clip/MediaClip"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("logger/ClassLogger"),require("bindable/jquery.bindable"),require("jsoop/oop/Inheritance"),require("bandwagon/bandwagon"),require("video-playback-manager/vpm/mediaitem/mediacliploader/AbstractMediaClipLoader"),require("video-playback-manager/vpm/mediaitem/mediacliploader/MediaItemClipLoaderEventEnum"),require("video-playback-manager/vpm/models/PlaybackModel"),require("video-playback-manager/vpm/events/VPMEvents"),require("video-playback-manager/vpm/loader/MetadataFileLoader"),require("video-playback-manager/vpm/utils/MetadataUtils"),require("video-playback-manager/vpm/clip/MediaClip")):a.MetadataClipLoader=b(a._,a.ClassLogger,null,a.Inheritance,a.Bandwagon,a.AbstractMediaClipLoader,a.MediaItemClipLoaderEventEnum,a.PlaybackModel,null,a.MetadataFileLoader,a.MetadataUtils,a.MediaClip)}(this,function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a){c(this);var b=this.config.container||"#video-player";this.dispatcher=e.getInstanceByKey(b),m.prototype["super"].constructor.call(this,a)}var n=new b("MetadataClipLoader");return d.inherit(m,f,{currentMediaItem:null,getMediaClip:function(a){n.log("getMediaClip:"),this.currentMediaItem=a,a.metaData&&a.getAvailablePlaybackScenarios()&&a.getAvailablePlaybackScenarios().length>0?this.playContentWithNextPlaybackScenario(a):this.playContentFirstTime(a)},applyMetaDataToClip:function(b,c,d){try{b.content_id=c.content_id,b.metaData=c,b.duration=k.getDurationInSeconds(c.duration),b.topic_id=b.topic_id?b.topic_id:this.config.topic_id;var e=960;b.path||"DASH_CLOUD_WIRED_WEB"!==d||"BamHTMLPlayer"!==this.player.toString()||(b.path=k.getPlaybackByType(c,"DASH_CLOUD_WIRED_WEB")),"FlashPlayer"===this.player.toString()&&(!b.path&&d.indexOf("HTTP_CLOUD")>-1&&(b.path=k.getPlaybackByType(c,"HTTP_CLOUD_WIRED_WEB")||k.getPlaybackByType(c,"HTTP_CLOUD_TABLET")||k.getPlaybackByType(c,"HTTP_CLOUD_MOBILE")),b.isLive=!0);var f="MEDIA_ON"==a.get(c,"mediaState","");this.player.supportsHls&&f&&(h.tabletHtml5HlsPlaybackEnabled&&this.player.device.is.tablet?b.path=k.getPlaybackByType(c,"HTTP_CLOUD_TABLET")||k.getPlaybackByType(c,"HTTP_CLOUD_WIRED"):h.phoneHtml5HlsPlaybackEnabled&&this.player.device.is.phone&&(b.path=k.getPlaybackByType(c,"HTTP_CLOUD_MOBILE")||k.getPlaybackByType(c,"HTTP_CLOUD_TABLET")||k.getPlaybackByType(c,"HTTP_CLOUD_WIRED"))),b.path=b.path||k.getClosestPlaybackBySize(e,c,"FLASH"),"DashPlayer"===this.player.toString()&&(b.path=k.getPlaybackByType(c,"DASH_CLOUD_WIRED_WEB")),b.isLive=b.isLive||"live"==a.get(c,"deliveryType","")}catch(g){console.error(g.toString(),"Video")}},playContentFirstTime:function(a){n.log("playContentFirstTime:"),a.resetErrorCounters(),a.currentPlaybackScenarioPreferenceList=this.config.preferredPlaybackScenarios;var b=a.playMediaRequestObject.content_id,c=new j(this.config);this.addEventListeners(c),c.load(b)},playContentWithNextPlaybackScenario:function(a){n.log("playContentWithNextPlaybackScenario:");var b=this._getNextPlaybackScenario(a);return a.currentPlaybackScenario=b,null===b||"undefined"==typeof b?(n.log("playContentWithNextPlaybackScenario: could not find a valid playbackScenario to use so abort"),void this.showMediaError("error","could not find a valid playbackScenario for this content")):(a.clip=this._getMediaClipForPlaybackScenario(a.metaData,b),a.clip.isHighlight=a.isHighlight,a.clip.duration=a.duration,a.clip.startTimeOffset=a.startTimeOffset,void $(this).trigger(g.MEDIA_ITEM_CLIP_SET,a))},_getMediaClipForPlaybackScenario:function(a,b){var c=new l;return this.applyMetaDataToClip(c,a,b),c},_getMetadataPlaybackScenarios:function(a){var b=new Array,c=a.playbacks?a.playbacks:a.urls;if(c&&c.length>0)for(var d,e,f=0,g=c.length;g>f;f++)d=c[f],e=$(d).attr("playback_scenario"),b.push(e);return b},addEventListeners:function(a){var b=this;a.bind(j.EVENT_METADATA_FILE_LOAD_SUCCESS,function(a,c){b.onMetadataFileLoadSuccess(a,c)}),a.bind(j.EVENT_AUTHFLOW_REQUIRED,function(a,c){b.onAuthFlowRequired(a,c)}),a.bind(j.EVENT_METADATA_FILE_LOAD_ERROR,function(a,c){b.onMetadataFileLoadError(a,c)})},onMetadataFileLoadSuccess:function(a,b){n.log("onMetadataFileLoadSuccess:"),this.currentMediaItem.metaData=b,this.dispatcher.publish(i.META_DATA_LOADED,this.currentMediaItem.metaData);var c=this._getMetadataPlaybackScenarios(b);this.currentMediaItem.setAvailablePlaybackScenarios(c);var d=!1;"undefined"!=typeof b&&(n.log("onMetadataFileLoadSuccess: metaData.authflow_required="+b.authflow_required),"undefined"!=typeof b.authflow_required&&b.authflow_required===!0&&(d=!0)),d?(n.log("onMetadataFileLoadSuccess: authflow_required==true, so dispatch MEDIA_FRAMEWORK_REQUIRED event"),$(this).trigger(g.MEDIA_FRAMEWORK_REQUIRED,this.currentMediaItem)):(n.log("onMetadataFileLoadSuccess: authflow_required==false or undefined, so try to load the video"),this.playContentWithNextPlaybackScenario(this.currentMediaItem))},onAuthFlowRequired:function(a,b){n.log("onAuthFlowRequired: metadata says auth flow required, which means we need to hit MF for this content"),this.currentMediaItem.metaData=b,$(this).trigger(g.MEDIA_FRAMEWORK_REQUIRED,this.currentMediaItem)},onMetadataFileLoadError:function(a,b){n.log("onMetadataFileLoadError:"),$(this).trigger(g.MEDIA_ITEM_ERROR,this.currentMediaItem)}}),m}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/config/Config",[],b):"object"==typeof exports?module.exports=b():a.Config=b()}(this,function(){"use strict";function a(){}return a.VPM_SHOULD_VALIDATE_CALENDAR_EVENT=!1,a.MEDIA_FRAMEWORK_PARAMS={platform:"WEB_MEDIAPLAYER_5"},a.MEDIA_SELECTION_DISABLE_BLACKOUT_LOGIC=!1,a.MEDIA_SELECTION_IS_BASEBALL_UX=!1,a.MEDIA_SELECTION_IS_HOCKEY=!0,a.SECURE_DOMAIN_DEFAULT=".pgatourlive.com",a.SECURE_SUB_DOMAIN_QA="qasecure",a.SECURE_SUB_DOMAIN_BETA="secure",a.SECURE_SUB_DOMAIN_PROD="secure",a.MEDIA_FRAMEWORK_DOMAIN_DEFAULT=".pgatourlive.com",a.MEDIA_FRAMEWORK_SUB_DOMAIN_QA="mf.qa",a.MEDIA_FRAMEWORK_SUB_DOMAIN_PROD="mf",a}),define("auth-media-gateway/subclasses/AuthenticatedMediaParams",["require","exports","module"],function(a,b,c){function d(){return{serviceDomain:null,loginFormPath:null,purchaseViewPath:null,loginViewTemplate:null,bypassLogin:!1}}return d}),define("bam.cookies/cookies",[],function(){var a=new RegExp("[A-Za-z0-9_-]+"),b=";",c="string",d="date",e="boolean",f="object",g="value",h=["name","expires","path","domain","secure"],i=new RegExp("number|string|boolean"),j=new RegExp("([A-Za-z0-9_-|@\\.]+)=([^;]*)","ig"),k=encodeURIComponent,l=decodeURIComponent,m={};return m.set=function(){var j,l=[],m=$.makeArray(arguments),n=2===m.length&&$.type(m[0])===c?{name:m[0],value:m[1]}:m[0];$.type(n)===f&&$.each(h,function(b,f){if(j=f in n?n[f]:null,f!==h[2]||j||(j="/"),null!==j)switch(f){case h[0]:if($.type(j)!==c||!a.test(j)||!i.test($.type(n[g]||null)))return!1;l.push(j+"="+k(n[g]));break;case h[1]:$.type(j)===d&&l.push(f+"="+j.toGMTString());break;case h[2]:$.type(j)===c&&l.push(f+"="+(j||"/"));break;case h[4]:$.type(j)===e&&j&&l.push(f);break;default:$.type(j)===c&&j&&l.push(f+"="+j)}}),l.length&&(document.cookie=l.join(b))},m.setBulk=function(){var a=$.makeArray(arguments),b=a.length&&$.isArray(a[0])?a[0]:a,c=b.length;if(c)for(;c--;)this.set(b[c])},m.get=function(a){return this.getAll()[a]||null},m.getAll=function(){var a={};return l(document.cookie).replace(j,function(){a[arguments[1]]=arguments[2]}),a},m.remove=function(){var a=$.makeArray(arguments),b={expires:new Date,value:-1};if(b.expires.setTime(b.expires-1),a.length){switch($.type(a[0])){case c:b.name=a[0];break;case f:b=$.extend(a[0],b);break;default:return!1}this.set(b)}},m.removeBulk=function(){var a=$.makeArray(arguments),b=a.length&&$.isArray(a[0])?a[0]:a,c=b.length;if(c)for(;c--;)this.remove(b[c])},m}),define("auth-media-gateway/subclasses/Session",["require","exports","module","bam.cookies/cookies","bindable/jquery.bindable"],function(a,b,c){function d(a){var b="sh_"+(new Date).valueOf();i[b]=a}function e(a,b,c){var d,e,f;for(d in i)if(i.hasOwnProperty(d)){if(f=i[d],e=b&&f===b,"undefined"!=typeof c){var g=_.object(_.map(c.profile,function(a){return[a.name,1==a.value.length?a.value[0]:a.value]}));a.profile=g}f.trigger(l.isLoggedIn,[a,e])}}function f(a,b){return this.accessToken?this.accessToken?(j=!1,e({isLoggedIn:!0},this),!0):void 0:(j=!1,e({isLoggedIn:!1},this),!1)}function g(){return this instanceof g?(this.accessToken=null,void d(this)):new g}var h=(a("bam.cookies/cookies"),a("bindable/jquery.bindable")),i={},j=!1,k="isLoggedIn",l={isLoggedIn:k};return g.prototype={events:l,isLoggedIn:function(a,b){return f.call(this,a,b)}},h(g.prototype),g}),define("media-framework-service/subclasses/MediaXML",["require","exports","module"],function(a,b,c){var d=function(){var a=null,b=null,c={complex:0,lite:1},d=function(a){function b(){}return a&&"object"==typeof a?(b.prototype=a,new b):void 0},e=function(a){var b="";a&&"string"==typeof a&&(b=a);var c=/^((-)?([0-9]*)((\.{0,1})([0-9]+))?$)/;return c.test(b)},f=function(a){var b=/-/g,c=String(a).replace(b,"_");return c},g=function(){var a={activate:function(){var a=[];return a&&b.outputType===c.complex&&(a.getNodesByAttribute=function(b,c){if(a&&a.length>0){var d,e=[],f=a.length-1;if(f>=0)do d=a[f],d&&d[b]===c&&e.push(d);while(f--);return e.reverse(),e}},a.getNodeByAttribute=function(b,c){if(a&&a.length>0){var d=null,e=null,f=a.length-1;if(f>=0)do if(d=a[f],d&&d[b]===c){e=d;break}while(f--);return e}},a.getNodesByValue=function(b){if(a&&a.length>0){var c,d=[],e=a.length-1;if(e>=0)do c=a[e],c&&c.Text&&c.Text===b&&d.push(c);while(e--);return d.reverse(),d}},a.contains=function(b,c){if(a&&a.length>0){var d=!1,e=a.length-1;if(e>=0)do if(a[e][b]===c){d=!0;break}while(e--);return d}},a.indexOf=function(b,c){var d=-1;if(a&&a.length>0){var e=a.length-1;if(e>=0)do if(a[e][b]===c){d=e;break}while(e--);return d}},a.SortByAttribute=function(b,c){a&&a.length>0&&a.sort(function(a,d){var f=a[b],g=d[b];f=e(f)?parseFloat(f):f,g=e(g)?parseFloat(g):g;var h=g>f?-1:f>g?1:0;return h=c&&"DESC"===c.toUpperCase()?0-h:h})},a.SortByValue=function(b){a&&a.length>0&&a.sort(function(a,c){var d=a.Text,f=c.Text;d=e(d)?parseFloat(d):d,f=e(f)?parseFloat(f):f;var g=f>d?-1:d>f?1:0;return g=b&&"DESC"===b.toUpperCase()?0-g:g})},a.SortByNode=function(b,c){a&&a.length>0&&a.sort(function(a,d){var f=a[b][0].Text,g=d[b][0].Text;f=e(f)?parseFloat(f):f,g=e(g)?parseFloat(g):g;var h=g>f?-1:f>g?1:0;return h=c&&"DESC"===c.toUpperCase()?0-h:h})}),a}};return a}(),h=function(){var a=d(g);return a.activate()},i=function(d){var e={Text:"",_processChildren:!0,_processAttributes:!0},g=null;if("function"==typeof a)try{g=a(d)}catch(h){}if(g&&-1===g)e=null;else if(g)e=g,e._processChildren="undefined"==typeof e._processChildren?!0:e._processChildren,e._processAttributes="undefined"==typeof e._processAttributes?!0:e._processAttributes,e.Text||(e.Text=""),e._namespace||d.prefix&&b.outputType===c.complex&&(e._namespace=d.prefix);else{var i=d.localName?d.localName:d.baseName;i=f(i),e._nodeName=i,d.prefix&&(e._namespace=d.prefix)}return e},j=function(a,d){if(d.attributes.length>0){b.outputType===c.complex&&(a._attributes=[]);var e=d.attributes.length-1,g=null,h=null;do g=String(f(d.attributes[e].name)),h=a._parent||!1,h&&h[a._nodeName][0][g]&&"object"==typeof h[a._nodeName][0][g]&&(g="attr_"+g),b.outputType===c.complex&&a._attributes.push(g),a[g]=$.trim(d.attributes[e].value);while(e--)}},k={JSONOutputType:c,xmlToJSON:function(d,e){function f(a,d){var e,g,k="";if(!d)return null;if(d.hasChildNodes()){var l=d.childNodes.length-1,m=0;do switch(e=d.childNodes[m],e.nodeType){case 1:b.outputType===c.complex&&(a._children=a._children?a._children:[]),g=i(e),g&&(b.outputType===c.complex&&(g._parent=a,k!==g._nodeName&&a._children.push(g._nodeName)),a[g._nodeName]||(a[g._nodeName]=h()),a[g._nodeName].push(g),g._processChildren&&e.hasChildNodes()&&f(g,e),delete g._processChildren,g._processAttributes&&j(g,e),delete g._processAttributes,k=g._nodeName,b.outputType===c.lite&&delete g._nodeName);break;case 3:a.Text+=$.trim(e.nodeValue);break;case 4:a.Text+=e.text?$.trim(e.text):$.trim(e.nodeValue)}while(m++<l)}}b=e||{outputType:k.JSONOutputType.complex},a=b&&b.nodeHandler;var g=null;if(g="string"==typeof d?k.textToXML(d):"object"==typeof d&&d.nodeType?d:null,!g)return null;var l=9===g.nodeType?g.documentElement:g,m=i(l);return m.typeOf="JSXBObject",m.RootName=m._nodeName,3===g.nodeType||4===g.nodeType?g.nodeValue:(j(m,l),f(m,l),b.outputType===c.lite&&delete m._nodeName,delete m._processChildren,delete m._processAttributes,g=null,l=null,m)},textToXML:function(a){var b=null;try{b=$.browser.msie?new ActiveXObject("Microsoft.XMLDOM"):new DOMParser,b.async=!1}catch(c){throw new Error("XML Parser could not be instantiated")}var d=null,e=!0;if($.browser.msie?(e=b.loadXML(a),d=e?b:!1):(d=b.parseFromString(a,"text/xml"),e="parsererror"!==d.documentElement.tagName),!e)throw new Error("Error parsing XML string");return d}};return k}();return d}),function(a,b){"function"==typeof define&&define.amd?define("media-framework-service/events/MediaEvents",["bandwagon/bandwagon"],b):"object"==typeof exports?module.exports=b(require("bandwagon/bandwagon")):a.MediaEvents=b(a.Bandwagon)}(this,function(a){var b={MEDIA_REQUEST_SUCCESS:"mediaRequestSuccess",MEDIA_REQUEST_ERROR:"mediaRequestError"};return a.registerEvents("MEDIA_EVENTS",b),b}),define("jpath/jpath",["require","exports","module"],function(require,exports,module){function JPath(a){return this instanceof JPath?(this.data=a||null,void(this.selection=[])):new JPath(a)}var TRUE=!0,FALSE=!1,STRING="string",PERIOD=".",undef,rxTokens=new RegExp("([A-Za-z0-9_\\*@\\$\\-]+(?:\\[.+?\\])?)","g"),rxIndex=new RegExp("(\\S+)\\[(\\d+)\\]"),rxPairs=new RegExp("([\\w@\\.]+)\\s*([><=]=?|[~\\^\\$\\!\\*]=|\\?|!\\*)\\s*([@\\w\\s_\\'$\\.\\+-\\/\\:]+)(\\s*|$)","g"),rxCondition=new RegExp("(\\S+)\\[(.+)\\]"),app=Array.prototype.push,apc=Array.prototype.concat,hidden={toArray:function(a){return a instanceof Array?a:a===undef||null===a?[]:[a]},traverse:function(pattern,cfn,obj){var out,data=obj||this.data,temp,tokens,token,idxToken,index,expToken,condition,tail,self=arguments.callee,found,i,j,l;if(data&&typeof pattern===STRING){if(tokens=pattern.match(rxTokens),token=tokens[0],tail=tokens.slice(1).join(PERIOD),data instanceof Array){for(temp=[],i=0,l=data.length;l>i;i++)j=data[i],found=self.apply(this,[token,cfn,j]),(found instanceof Array&&found.length||found!==undef)&&app.apply(temp,[found]);return temp.length?tail?self.apply(this,[tail,cfn,temp]):temp:void 0}if("*"===token)return tail?self.apply(this,[tail,cfn,data]):data;if(data[token]!==undef)return tail?self.apply(this,[tail,cfn,data[token]]):data[token];if(rxIndex.test(token))return idxToken=token.match(rxIndex),token=idxToken[1],index=+idxToken[2],tail?self.apply(this,[tail,cfn,data[token][index]]):data[token][index];if(rxCondition.test(token)){expToken=token.match(rxCondition),token=expToken[1],condition=expToken[2];var evalStr,isMatch,subset="*"===token?data:data[token],elem;if($.isArray(subset)){for(temp=[],i=0,l=subset.length;l>i;i++)elem=subset[i],evalStr=condition.replace(rxPairs,function(a,b,c,d){return hidden.testPairs.apply(elem,[b,d,c,cfn])}),isMatch=eval(evalStr),isMatch&&app.apply(temp,[elem]);return temp.length?tail?self.apply(this,[tail,cfn,temp]):temp:void 0}if(elem=subset,evalStr=condition.replace(rxPairs,function(a,b,c,d){return hidden.testPairs.apply(elem,[b,d,c,cfn])}),isMatch=eval(evalStr))return tail?self.apply(this,[tail,cfn,elem]):elem;
}}return out},matchTypes:function(a,b){var c,d;switch(typeof a){case"string":d=b+"";break;case"boolean":d="true"===b?TRUE:FALSE;break;case"number":d=+b;break;case"date":d=new Date(b).valueOf(),c=a.valueOf();break;default:d=b}return"null"===b&&(d=null),"undefined"===b&&(d=undef),{left:c||a,right:d}},testPairs:function(){var a={"=":function(a,b){return a===b},"==":function(a,b){return a===b},"!=":function(a,b){return a!==b},"^=":function(a,b){return!(a+"").indexOf(b)},"<":function(a,b){return b>a},"<=":function(a,b){return b>=a},">":function(a,b){return a>b},">=":function(a,b){return a>=b},"~=":function(a,b){return(a+"").toLowerCase()===(b+"").toLowerCase()},"$=":function(a,b){return new RegExp(b+"$","i").test(a)},"*=":function(a,b){return(a+"").indexOf(b)>=0},"!*":function(a,b){return(a+"").indexOf(b)<0}};return function(b,c,d,e){if("?"!==d&&!(d in a))throw new Error("Unsupported operation ("+d+")");var f=FALSE,g=-1!==b.indexOf(PERIOD)?hidden.traverse(b,null,this):this[b],h=hidden.matchTypes(g,$.trim(c));return"?"===d?$.isFunction(e)&&(f=e.call(this,h.left,c)):f=a[d](h.left,h.right),f}}(),merge:function(a){var b=[],c=hidden.toArray(a?hidden.traverse.apply(this,arguments):this.selection);return b=apc.apply([],c)}};JPath.prototype={from:function(a){return this.data=a,this},first:function(){return this.selection.length?this.selection[0]:null},last:function(){return this.selection.length?this.selection.slice(-1)[0]:null},eq:function(a){return this.selection.length?this.selection[a]:null},select:function(a,b,c){return this.selection=hidden.merge.apply(this,arguments),this},and:function(a){return this.selection=this.selection.concat(hidden.merge.apply(this,arguments)),this},val:function(){return this.selection}},exports.select=function(a,b,c){return new JPath(a).select(b,c,null)},exports.JPath=JPath,exports.filter=function(a,b,c){return new JPath(a).select(b,c,null).val()}}),define("class/class",["require","exports","module"],function(a,b,c){var d=!1,e=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;return this.Class=function(){},this.Class.extend=function(a){function b(){!d&&this.init&&this.init.apply(this,arguments)}var c=this.prototype;d=!0;var f=new this;d=!1;for(var g in a)f[g]="function"==typeof a[g]&&"function"==typeof c[g]&&e.test(a[g])?function(a,b){return function(){var d=this._super;this._super=c[a];var e=b.apply(this,arguments);return this._super=d,e}}(g,a[g]):a[g];return b.prototype=f,b.constructor=b,b.extend=arguments.callee,b},this.Class}),define("xml/xml",["require","exports","module","jpath/jpath","class/class"],function(a,b,c){function d(){var a=[];return $.extend(a,w),a}var e,f,g,h=a("jpath/jpath"),i=a("class/class"),j=null,k=!1,l=!0,m="object",n="string",o="function",p="array",q=/^@[\w-:]+$/,r=/^@xmlns$/,s=/_super|ns|nodeName|typeOf|hasCDATA|$comments/,t={isIE:function(){return!1},isXNode:function(a){return typeof a===m&&"undefined"!=typeof a.nodeName},isNodeSet:function(a){return $.isArray(a)}},u={newDocument:function(a,b){if(a||(a=""),b||(b=""),document.implementation&&document.implementation.createDocument)return document.implementation.createDocument(b,a,j);var c=new ActiveXObject("MSXML2.DOMDocument");if(a){var d="",e=a,f=a.indexOf(":");-1!==f&&(d=a.substring(0,f),e=a.substring(f+1)),b?d||(d="a0"):d="";var g="<"+(d?d+":":"")+e+(b?" xmlns:"+d+'="'+b+'"':"")+"/>";c.loadXML(g)}return c},xmlToString:function(a){var b;if("XMLSerializer"in window){var c=new XMLSerializer;b=c.serializeToString(a)}else b=a.xml;return b=b.replace(/xmlns=\"\"/g,"")},textToXML:function(a){var b=j;try{b="DOMParser"in window?new DOMParser:new ActiveXObject("MSXML2.DOMDocument"),b.async=k}catch(c){throw new Error("XML Parser could not be instantiated")}var d=j,e=l;if(t.isIE()?(e=b.loadXML(a),d=e?b:k):(d=b.parseFromString(a,"text/xml"),e="parsererror"!==d.documentElement.tagName),!e)throw new Error("Error parsing XML string");return d}},v=function(){function a(a,b){var d,e=b&&"@xmlns"in b?b["@xmlns"]:null;return e?"createElementNS"in c?d=c.createElementNS(e,a):(d=c.createElement(a),d.setAttribute("xmlns",e)):d=c.createElement(a),d}function b(d,e){if(d&&e){var f;if($.type(e)===m)$.each(e,function(h,i){switch($.type(i)){case m:"parent"===h&&i instanceof g||(f=d.appendChild(a(h,i)),b(f,i));break;case p:if("*"===h)b(d,i);else for(var j,k=0,l=i.length;l>k;k++)j=i[k],f=d.appendChild(a(h)),b(f,j);break;case n:if(r.test(h))break;q.test(h)?d.setAttribute(String(h.slice(1)),i):"CDATA"===h?d.appendChild(c.createCDATASection(i)):"TEXT"===h||"Text"===h?d.appendChild(c.createTextNode(i)):e instanceof g&&s.test(h)||(f=d.appendChild(c.createElement(h)),b(f,{Text:i}));break;case o:break;default:q.test(h)?d.setAttribute(String(h.slice(1)),i):e instanceof g&&s.test(h)||(f=d.appendChild(c.createElement(h)),b(f,{Text:i+""}))}});else if($.type(e)===p)for(var h,i=0,j=e.length;j>i;i++)h=e[i],b(d,h);else"window"!==$.type(e)&&$.type(e)!==o&&d.appendChild(c.createTextNode(e))}}var c;return{serializeToString:function(){var a=this.serializeToXML.apply(this,arguments);return u.xmlToString(a.documentElement)},serializeToXML:function(){if(arguments.length>0){var a=0,d=arguments[a++],e=arguments.length>=3?arguments[a++]:"",f=arguments[a++],g=u.newDocument(d,e);return c=g,b(g.documentElement,f),g}}}}();e=i.extend({init:function(a){this.parent=a}}),g=e.extend({init:function(){var a=j,b=j,c=j;switch(arguments.length){case 1:b=arguments[0];break;case 2:a=arguments[0],b=arguments[1];break;case 3:a=arguments[0],b=arguments[1],c=arguments[2];break;default:b="noname"}this.nodeName=b,this.Text=c||"",this._super(a)},attr:function(){var a,b,c;if(arguments.length)switch(arguments.length){case 1:b=$.trim(arguments[0]),c=this["@"+b]||this[b],"undefined"==typeof c||$.isArray(c)||(a=c);break;case 2:b=$.trim(arguments[0]),c=arguments[1],$.type(b)===n&&(this[q.test(b)?b:"@"+b]=c,a=this)}return a},find:function(a,b){var c=j;return c=h.filter(this,a,b)},addComment:function(a){return $.type(a)===n&&("undefined"==typeof this.$comments&&(this.$comments=[]),this.$comments.push(a)),this},val:function(a){var b=this;return"undefined"!=typeof a?this.Text=a:b=this.Text,b},toXML:function(){var a=v.serializeToXML(this.nodeName,this.ns,this);return a},toXMLString:function(){var a=this.toXML(),b=u.xmlToString(a);return b},appendChild:function(a){"undefined"!=typeof a&&a instanceof g&&(a.parent=this,"undefined"==typeof this[a.nodeName]&&(this[a.nodeName]=x.makeNodeSet()),this[a.nodeName].push(a))},toString:function(){return this.Text}}),f=g.extend({init:function(a){this._super(a),this.ns="",this.typeOf="xmlObjectifier",delete this.parent}});var w={find:function(a){return h.filter(this,a)},getNodesByAttribute:function(a,b){var c=[],d=this.length;return d&&$.type(a)===n&&"undefined"!=typeof b&&(c=h.filter(this,"*["+a+"="+b+"]")),c.length?c:j},getNodesByValue:function(a){var b=[],c=this.length;return c&&"undefined"!=typeof a&&(b=h.filter(this,"*[Text="+a+"]")),b.length?b:j},contains:function(a,b){var c,d,e=k,f=this.length;if(f&&$.type(a)===n&&"undefined"!=typeof b)for(;f--;)if(c=this[f],d=c[a],"undefined"!=typeof d&&d===b){e=l;break}return e},indexOf:function(){var a,b,c,d,e=-1,f=this.length;if(f)switch(arguments.length){case 1:for(b=arguments[0];f--;)if(c=this[f],d=c.val(),"undefined"!=typeof d&&d===b){e=f;break}break;case 2:for(a=arguments[0],b=arguments[1];f--;)if(c=this[f],d=c[a],"undefined"!=typeof d&&d===b){e=f;break}}return e},sortByAttribute:function(a,b){this.length&&$.type(a)===n&&this.sort(function(c,d){var e=c.attr(a),f=d.attr(a);e=isNaN(e)?e:parseFloat(e),f=isNaN(f)?f:parseFloat(f);var g=f>e?-1:e>f?1:0;return g="undefined"!=typeof b&&"desc"===b.toLowerCase()?0-g:g})},sortByValue:function(a){this.length&&this.sort(function(b,c){var d=b.Text,e=c.Text;d=isNaN(d)?d:parseFloat(d),e=isNaN(e)?e:parseFloat(e);var f=e>d?-1:d>e?1:0;return f="undefined"!=typeof a&&"desc"===a.toLowerCase()?0-f:f})},sortByChildNode:function(a,b){this.length&&$.type(a)===n&&this.sort(function(c,d){var e=c[a],f=d[a];e="undefined"!=typeof e&&e.length?e[0].Text:j,f="undefined"!=typeof f&&f.length?f[0].Text:j,e=isNaN(e)?e:parseFloat(e),f=isNaN(f)?f:parseFloat(f);var g=f>e?-1:e>f?1:0;return g="undefined"!=typeof b&&"desc"===b.toLowerCase()?0-g:g})},first:function(){var a=j;return this.length&&(a=this[0]),a},last:function(){var a=j;return this.length&&(a=this.slice(-1)),a}},x={makeNodeSet:function(){return d()},makeNode:function(a,b){var c=$.trim(b.localName||b.baseName),d=new g(a,c);return d.ns=b.prefix||"",this.setAttributes(d,b),d},setAttributes:function(a,b){if("undefined"!=typeof b&&b.attributes.length)for(var c=b.attributes.length,d=j,e=j;c--;)d=b.attributes[c],e="@"+d.name,a[e]=d.value},run:function(a,b){var c,d;if("undefined"!=typeof a&&"undefined"!=typeof b&&b.hasChildNodes()){var e=b.childNodes.length-1,f=0;do switch(c=b.childNodes[f],c.nodeType){case 1:if(d=x.makeNode(a,c),$.isFunction(this.decorator)){var g=this.decorator.apply(d,[d]);if(g===k)continue}d&&(a.appendChild(d),c.hasChildNodes()&&x.run.apply(this,[d,c]));break;case 3:a.Text?a.Text+=$.trim(c.nodeValue):a.val($.trim(c.nodeValue));break;case 4:a.hasCDATA=l,a.val("undefined"!=typeof c.text?$.trim(c.text):$.trim(c.nodeValue));break;case 8:"undefined"!=typeof this.noComments&&this.noComments||("undefined"==typeof a.$comments&&(a.$comments=[]),a.$comments.push($.trim(c.nodeValue)))}while(f++<e)}},init:function(a,b){var c={noComments:l};if($.extend(c,b),a=$.type(a)===n?u.textToXML(a):t.isXNode(a)?a:j,!a)return j;var d=9===a.nodeType?a.documentElement:11===a.nodeType?a.firstChild:a,e=new f(d.nodeName);return $.isFunction(c.decorator)&&c.decorator.apply(e,[e]),3===a.nodeType||4===a.nodeType?a.nodeValue:(this.run.apply(c,[e,d]),this.setAttributes(e,d),e)}};b.xmlToJSON=function(a,b){return x.init(a,b)},b.jsonToXML=function(){return v.serializeToString.apply(v,arguments)},b.textToXML=u.textToXML,b.xmlObjectifier={RootClass:f,NodeClass:g,NodeSetClass:w}}),define("bam.xdomainrequest/bam.xdomainrequest",["require","exports","module"],function(a,b,c){return function(a){if(!a.support.cors&&a.ajaxTransport&&window.XDomainRequest){var b=/^https?:\/\//i,c=/^get|post$/i,d=new RegExp("^"+location.protocol,"i"),e=/text\/html/i,f=/\/json/i,g=/\/xml/i;a.ajaxTransport("* text html xml json",function(h,i,j){if(h.crossDomain&&h.async&&c.test(h.type)&&b.test(h.url)&&d.test(h.url)){var k=null,l=(i.dataType||"").toLowerCase();return{send:function(b,c){k=new XDomainRequest,/^\d+$/.test(i.timeout)&&(k.timeout=i.timeout),k.ontimeout=function(){c(500,"timeout")},k.onload=function(){var b="Content-Length: "+k.responseText.length+"\r\nContent-Type: "+k.contentType,d={code:200,message:"success"},h={text:k.responseText};try{if("html"===l||e.test(k.contentType))h.html=k.responseText;else if("json"===l||"text"!==l&&f.test(k.contentType))try{h.json=a.parseJSON(k.responseText)}catch(i){d.code=500,d.message="parseerror"}else if("xml"===l||"text"!==l&&g.test(k.contentType)){var j=new ActiveXObject("Microsoft.XMLDOM");j.async=!1;try{j.loadXML(k.responseText)}catch(i){j=void 0}if(!j||!j.documentElement||j.getElementsByTagName("parsererror").length)throw d.code=500,d.message="parseerror","Invalid XML: "+k.responseText;h.xml=j}}catch(m){throw m}finally{c(d.code,d.message,h,b)}},k.onprogress=function(){},k.onerror=function(){c(500,"error",{text:k.responseText})};var d="";i.data&&(d="string"===a.type(i.data)?i.data:a.param(i.data)),k.open(h.type,h.url),k.send(d)},abort:function(){k&&k.abort()}}}})}}(jQuery),{}}),define("soap/soap",["require","exports","module","xml/xml","bindable/jquery.bindable","bam.xdomainrequest/bam.xdomainrequest"],function(a,b,c){"use strict";var d=a("xml/xml"),e=a("bindable/jquery.bindable"),f=(a("bam.xdomainrequest/bam.xdomainrequest"),function(a,b){this.settings={proxy:null,ws:null,contentType:"text/xml",charSet:"utf-8",type:"post"},this.events={onSOAPResponse:"onSOAPResponse",onSOAPError:"onSOAPError"},this.request=b||null,a&&$.extend(this.settings,a)}),g=function(a,b){var c=this;this.settings={action:"",ns:{}},this.envelope={"soapenv:Body":{}},a&&$.extend(this.settings,a),"string"==typeof this.settings.ns?this.envelope["@xmlns"]=this.settings.ns:$.each(this.settings.ns,function(a,b){c.envelope["@xmlns:"+a]=b}),b&&this.addToBody(b)};f.prototype={sendRequest:function(a){if(this.request=a||this.request,this.request){var b,c=this,e=this.settings,f=this.request,g=f.toString(),h=new $.Deferred;return $.ajax({type:e.type,url:e.proxy||e.ws,dataType:"xml",contentType:e.contentType+'; charset="'+e.charSet+'"',processData:!1,crossDomain:!0,data:g,xhrFields:{withCredentials:!0},beforeSend:function(a){a.setRequestHeader("SOAPAction",f.settings.action)},complete:function(a,e){b=d.xmlToJSON(a.responseXML||a.responseText),"success"==e?(h.resolve(b),c.trigger(c.events.onSOAPResponse,b)):(h.reject(b),c.trigger(c.events.onSOAPError,arguments))}}),h.promise()}}},e(f),g.prototype={addHeader:function(a){return this.envelope["soapenv:Header"]||(this.envelope["soapenv:Header"]={}),a&&$.extend(this.envelope["soapenv:Header"],a),this},addToBody:function(a){return a&&$.extend(this.envelope["soapenv:Body"],a),this},toString:function(){return d.jsonToXML("soapenv:Envelope","http://schemas.xmlsoap.org/soap/envelope/",this.envelope)}},b.SOAPClient=f,b.SOAPRequest=g}),define("media-framework-service/subclasses/SoapObject",["require","exports","module"],function(a,b,c){function d(a){this.typeOf="SOAPObject",this.ns=null,this.name=a,this.attributes=[],this.children=[],this.value=null,this.attr=function(a,b){return this.attributes.push({name:a,value:b}),this},this.appendChild=function(a){return this.children.push(a),a},this.hasChildren=function(){return this.children.length>0?!0:!1},this.val=function(a){return a?(this.value=a,this):this.value},this.ToXML=function(a){var b="",c=!1;try{if(a&&"object"==typeof a&&"SOAPObject"===a.typeOf){if(a.ns?"object"==typeof a.ns?(c=!0,b+="<"+a.ns.name+":"+a.name,b+=" xmlns:"+a.ns.name+'="'+a.ns.uri+'"'):(b+="<"+a.name,b+=' xmlns="'+a.ns+'"'):b+="<"+a.name,a.attributes.length>0){var d,e=a.attributes.length-1;do d=a.attributes[e],b+=c?" "+a.ns.name+":"+d.name+'="'+d.value+'"':" "+d.name+'="'+d.value+'"';while(e--)}if(b+=">",a.hasChildren()){var f,g;for(f in a.children)(!a.children.hasOwnProperty||a.children.hasOwnProperty(f))&&(g=a.children[f],"object"==typeof g&&(b+=_self.SOAPClient.ToXML(g)))}return a.value&&(b+=a.value),b+=c?"</"+a.ns.name+":"+a.name+">":"</"+a.name+">"}}catch(h){throw new Error("Unable to process SOAPObject! Object must be an instance of SOAPObject")}}}return d}),function(a,b){"function"==typeof define&&define.amd?define("media-framework-service/MediaFrameworkService",["jquery","media-framework-service/subclasses/MediaXML","media-framework-service/events/MediaEvents","bam.cookies/cookies","soap/soap","media-framework-service/subclasses/SoapObject","bandwagon/bandwagon"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("media-framework-service/subclasses/MediaXML"),require("media-framework-service/events/MediaEvents"),require("bam.cookies/cookies"),require("soap/soap"),require("media-framework-service/subclasses/SoapObject"),require("bandwagon/bandwagon")):a.MediaFrameworkService=b(a.jQuery,null,a.MediaEvents,null,null,null,a.Bandwagon)}(this,function(a,b,c,d,e,f,g){function h(e){function h(a,b){if(z>0)if("undefined"!=typeof t.console)console[a](b);else if("string"==typeof b)throw new Error(b)}function i(a){var b={code:a.status_code[0].Text};switch(b.code){case"-1000":b.msg="Requested media not found";break;case"-2000":b.msg="Invalid App Account Information";break;case"-3000":b.msg="Invalid user credentials";break;case"-3500":b.msg="Sign-on restriction status";break;case"-4000":b.msg="System Error";break;default:b.msg="Unknown Error"}return b}function j(a){var b=new f(a);return b.ns="http://services.bamnetworks.com/media/types/2.0",b}function k(){var a=d.get("ipid"),b=unescape(d.get("fprt")),c=null;return a||h("log","MediaService2_0: missing identity point id"),b||h("log","MediaService2_0: missing fingerprint"),a&&b&&(c=new f("fingerprint-identity-point"),c.appendChild(new f("identity-point-id").val(a.toString())),c.appendChild(new f("fingerprint").val(b.toString()))),c}function l(a,b){var c,d,e;if("object"!=typeof b)throw new Error("MediaService2_0: invalid mediaParams object");d=b.isVerifiedUserRequest,delete b.isVerifiedUserRequest,e=b.session_key,delete b.session_key;for(var g in b)b[g]&&(c=b[g].toString(),a.appendChild(new f(g.replace("_","-")).val(c)));if(d){var h=k();h&&a.appendChild(h)}e&&a.appendChild(new f("session-key").val(e.toString()))}function m(a){try{var b=a.session_key[0].Text;return b}catch(c){}return!1}function n(a){return a.status_code&&1!=a.status_code[0].Text}function o(a){var b=null;if("object"==typeof a)if(a._children){var c,d,e=0;b={};do c=a._children[e],d=a[c],b[c]=o(d.length>1?d:d[0]),e++;while(e<a._children.length)}else if(a.length>1){var f=0;b=[];do a[f]._children||a[f]._attributes?a[f]._attributes&&a[f].name?a[f].value?b.push({name:a[f].name,value:a[f].value}):b.push({name:a[f].name,value:a[f].Text}):b.push(o(a[f])):a[f].Text&&b.push(a[f].Text),f++;while(f<a.length)}else a._attributes&&a.name?b=a.value?{name:a.name,value:a.value}:{name:a.name,value:a.Text}:a.Text&&(b=a.Text);return b}function p(a){var b,c,d,e=null;if("object"!=typeof a)throw new Error("MediaService2_0: invalid mediaParams object");e={},c=a.isVerifiedUserRequest,a.success&&delete a.success,a.error&&delete a.error,delete a.isVerifiedUserRequest,delete a.requestType;for(var f in a)if(a[f]){if(b=a[f].toString(),-1!==f.indexOf("_")){d=f.split("_");for(var g=1;g<d.length;g++)d[g]=d[g].charAt(0).toUpperCase()+d[g].substring(1);f=d.join("")}e[f]=b}return e.platform="undefined"==typeof a.platform?"WEB_MEDIAPLAYER":a.platform,e.frameworkEndPoint&&delete e.frameworkEndPoint,e.frameworkURL&&delete e.frameworkURL,e}function q(b){var c=a.extend(s,b),d=b.success&&"function"==typeof b.success?b.success:null,e=b.error&&"function"==typeof b.error?b.error:null;h("group","MEDIA SERVICE 2.0: Request Media"),soap.SOAPClient.Proxy=v,soap.SOAPClient.SOAPServer=w;var f=j("user-verified-media-request"),g=(l(f,c),new soap.SOAPRequest("find",f));soap.SOAPClient.SendRequest(g,function(a){if(a&&a.Body&&a.Body[0].user_verified_media_response){var b=a.Body[0].user_verified_media_response[0];if(n(b))if("function"==typeof e){var c=i(b);c.operation="MediaFrameworkService.requestMedia",e(c)}else h("error","MediaService2_0.requestMedia: errorCallback is not a function");else if(d){var f=o(b);h("dir",f),d(f)}else h("error","MediaService2_0.requestMedia: success handler is not a function")}else e?e({operation:"MediaService2_0.requestMedia",code:-1e5,message:"bad data"}):h("error","MediaService2_0.requestMedia: errorCallback is not a function")}),h("groupEnd","END MEDIA SERVICE 2.0: Request Media")}function r(e){var f=e.success&&"function"==typeof e.success?e.success:null,g=e.error&&"function"==typeof e.error?e.error:null,j=a.extend({},s,e),k=p(j),l=d.get("Authorization"),q={Accept:"application/xml"};"json"===k.format&&(q.Accept="application/json"),l&&(q.Authorization=l);var r=k;a.ajax({url:e.use_proxy?"/media/msp.jsp":y,data:r,headers:q,cache:e.cache?!0:!1,success:function(a){var j,l,p,q=d.get("NSC_BPIP");q&&!A?(A=!0,setTimeout(function(){u.requestMedia(e),d.remove({name:"NSC_BPIP",path:"/"})},1e3)):(A=!1,d.remove({name:"NSC_BPIP",path:"/"}),"json"===k.format?(C.publish(c.MEDIA_REQUEST_SUCCESS,a),"function"==typeof f?f(a):h("error","MediaService2_0.requestMedia: success handler is not a function")):(j=b.xmlToJSON(a),"user_verified_media_response"===j.RootName?n(j)?(p=i(j),p.session_key=m(j),p.operation="MediaFrameworkService.requestMedia"):(l=o(j),h("dir",l),C.publish(c.MEDIA_REQUEST_SUCCESS,l),"function"==typeof f?f(l):h("error","MediaService2_0.requestMedia: success handler is not a function")):p={operation:"MediaService2_0.requestMedia",code:-1e5,message:"Bad Data in Response"},p&&(C.publish(c.MEDIA_REQUEST_ERROR,p),"function"==typeof g?g(p):h("error","MediaService2_0.requestMedia: errorCallback is not a function"))),A=!1)},error:function(){var a={operation:"MediaService2_0.requestMedia",code:-1e5,message:"Bad Data in Response"};C.publish(c.MEDIA_REQUEST_ERROR,a),"function"==typeof g?g(a):h("error","MediaService2_0.requestMedia: errorCallback is not a function")}})}var s,t=this,u={},v="/pubajaxws/services/MediaService2_3",w="http://dev-a.services.bamnetworks.com:8888/ws/services/MediaService2_3",x="/ws/media/mf/op-findUserVerifiedEvent/v-2.3",y="/ws/media/mf/op-findUserVerifiedEvent/v-2.3",z=0,A=!1,B=e.container||"AMG",C=g.getInstanceByKey(B);s={isVerifiedUserRequest:!0,event_id:null,content_id:null,playback_scenario:null,session_key:null,auth:null,format:"xml"},this.setLogLevel=function(a){z=a},this.requestMedia=function(a){var b=a.frameworkEndPoint?a.frameworkEndPoint:x;y=a.frameworkURL+b,a.requestType&&"soap"===String.prototype.toLowerCase(a.requestType)?q(a):r(a)}}return h}),function(a,b){"function"==typeof define&&define.amd?define("ensureArray/ensureArray",[],b):"object"==typeof exports?module.exports=b():a.bamEnsureArray=b()}(this,function(){"use strict";var a="undefined";return function(b){return Array.isArray(b)?b:typeof b===a?[]:[b]}}),function(a,b){"function"==typeof define&&define.amd?define("media-framework-service/enums/MFAuthStatus",[],b):"object"==typeof exports?module.exports=b():a.MFAuthStatus=b()}(this,function(){"use strict";function a(a){}return a.prototype=$.extend(a.prototype,{}),a.isType=function(a,b){return a&&a.toLowerCase()===b.toLowerCase()},a.SUCCESS_STATUS="SuccessStatus",a.NOT_AUTHORIZED_STATUS="NotAuhorizedStatus",a.LOGIN_REQUIRED_STATUS="LoginRequiredStatus",a}),function(a,b){"function"==typeof define&&define.amd?define("media-framework-service/enums/MFBlackoutStatus",[],b):"object"==typeof exports?module.exports=b():a.MFBlackoutStatus=b()}(this,function(){"use strict";function a(a){}return a.prototype=$.extend(a.prototype,{}),a.isType=function(a,b){return a&&a.toLowerCase()===b.toLowerCase()},a.SUCCESS_STATUS="SuccessStatus",a.BLACKED_OUT_STATUS="BlackedOutStatus",a.LOCATION_CANNOT_BE_DETERMINED_STATUS="LocationCannotBeDeterminedStatus",a}),define("media-framework-service/enums/FeaturesEnum",["require","exports","module"],function(a,b,c){function d(){}return d.FREE_GAME="mp4.freeGame",d.FREE_EVENT="mp4.freeEvent",d}),function(a,b){"function"==typeof define&&define.amd?define("media-framework-service/subclasses/FeaturesHelper",["media-framework-service/enums/FeaturesEnum"],b):"object"==typeof exports?module.exports=b(require("media-framework-service/enums/FeaturesEnum")):a.FeaturesHelper=b(a.FeaturesEnum)}(this,function(a){"use strict";function b(a){}return b.prototype=$.extend(b.prototype,{}),b.isOneFeatureFound=function(a,b){if(a&&a.length>0&&b&&b.length>0){for(var c,d={},e=0;e<b.length;e++)c=b[e],c&&(d[c]=!0);for(var f=0;f<a.length;f++){var g=a[f];if(d[g])return!0}}return!1},b.isFreeGame=function(c){return b.isOneFeatureFound(c,[a.FREE_GAME])},b.isFreeEvent=function(c){return b.isOneFeatureFound(c,[a.FREE_EVENT])},b.isFree=function(c){return b.isOneFeatureFound(c,[a.FREE_EVENT,a.FREE_GAME])},b}),define("media-framework-service/subclasses/MediaFrameworkResponseHelper",["require","exports","module","ensureArray/ensureArray","media-framework-service/enums/MFAuthStatus","media-framework-service/enums/MFBlackoutStatus","media-framework-service/subclasses/FeaturesHelper"],function(a,b,c){function d(a){this.mediaResponse=a,this.features=[];var b=e(this.mediaResponse.user_verified_event)[0],c=e(b.user_verified_content)[0];try{var d=c.features;"undefined"!=typeof d&&null!=d&&"undefined"!=typeof d.feature&&null!=d.feature&&(this.features=e(d.feature))}catch(l){console.log("MediaFrameworkResponseHelper constructor: error analyzing features")}this.isFree=function(a){("undefined"==typeof a||null===a||""===a)&&(a="video");var b=!1,c=e(this.mediaResponse.user_verified_event)[0],d=e(c.user_verified_content);if(d&&d.length>0){var f,g;for(j in d)if(f=d[j],f&&f.type===a){var i=f.features;if("undefined"!=typeof i&&null!=i&&"undefined"!=typeof i.feature&&null!=i.feature&&(g=e(i.feature),h.isFree(g))){b=!0;break}}}return b},this.isAuthorized=function(a){("undefined"==typeof a||null===a||""===a)&&(a="video");var b,c=!1,d=e(this.mediaResponse.user_verified_event)[0],g=e(d.user_verified_content);if(g&&g.length>0){var h,i,k,l;for(j in g)if(h=g[j],h&&(l=e(h.user_verified_media_item),l.length>0))for(k in l)if(i=l[k],"object"==typeof i.auth_status){for(b in i.auth_status)if(f.isType(b,f.SUCCESS_STATUS)){c=!0;break}}else if(f.isType(i.auth_status,f.SUCCESS_STATUS)){c=!0;break}}return c},this.isLoginRequired=function(a){("undefined"==typeof a||null===a||""===a)&&(a="video");var b,c=!0,d=e(this.mediaResponse.user_verified_event)[0],g=e(d.user_verified_content);if(g&&g.length>0){var h,i;for(j in g)if(h=g[j])if(i=$.isArray(h.user_verified_media_item)?h.user_verified_media_item[0]:h.user_verified_media_item,"object"==typeof i.auth_status){for(b in i.auth_status)if(!f.isType(b,f.LOGIN_REQUIRED_STATUS)){c=!1;break}}else if(!f.isType(i.auth_status,f.LOGIN_REQUIRED_STATUS)){c=!1;break}}return c},this.isVideoBlackedOut=function(a){return a!==i&&a!==k},this.isLocationUndetermined=function(a){return g.isType(a,g.LOCATION_CANNOT_BE_DETERMINED_STATUS)},this.getBlackoutStatus=function(a,b){a!==!0&&(a=!1),("undefined"==typeof b||null===b)&&(b=null);var c=null,d=null,f=e(this.mediaResponse.user_verified_event)[0],h=e(f.user_verified_content);if(h&&h.length>0){var l,m;for(j in h)if(l=h[j]){if("audio"===l.type&&a===!1)continue;if(m=e(l.user_verified_media_item)[0],"array"==typeof m.blackout_status)for(c in m.blackout_status){if(c===i||g.isType(c,g.SUCCESS_STATUS))return console.log("MediaFrameworkResponseHelper getBlackoutStatus: contentItem["+j+"].blackoutStatus = "+c+" so return 'none'"),i;if(g.isType(c,g.BLACKED_OUT_STATUS)){console.log("MediaFrameworkResponseHelper getBlackoutStatus: contentItem["+j+"].blackoutStatus = "+c+" so get the actual blackoutStatus from the child node");var n=e(m.blackout_status[c])[0];d=n.blackout}}else{if(c=m.blackout_status.status||m.blackout_status,c===i||g.isType(c,g.SUCCESS_STATUS))return console.log("MediaFrameworkResponseHelper getBlackoutStatus: contentItem["+j+"].blackoutStatus = "+c+" so return 'none'"),i;g.isType(c,g.BLACKED_OUT_STATUS)&&(console.log("MediaFrameworkResponseHelper getBlackoutStatus: contentItem["+j+"].blackoutStatus = "+c+" so get the actual blackoutStatus from the child node"),d=e(m.blackout_status.keywords)[0])}}}return console.log("MediaFrameworkResponseHelper getBlackoutStatus: blackoutStatus = "+c+", blackedOutStatusValue = "+d),null!==d&&(c=d),null===c&&(c=b?b:k),console.log("MediaFrameworkResponseHelper getBlackoutStatus: return blackoutStatus = "+c),c}}var e=a("ensureArray/ensureArray"),f=a("media-framework-service/enums/MFAuthStatus"),g=a("media-framework-service/enums/MFBlackoutStatus"),h=a("media-framework-service/subclasses/FeaturesHelper"),i="none",k="unknown";return d.prototype={mediaResponse:null},d.getDomainAttributesObject=function(a){var b={};try{var c=[],d=a.domain_specific_attributes;if($.isArray(d)?c=d:"undefined"!=typeof d&&null!=d&&"undefined"!=typeof d.domain_attribute&&null!=d.domain_attribute&&(c=e(d.domain_attribute)),c&&c.length>0){var f,g,h;for(f in c)if(g=c[f].name,h=c[f].value,"undefined"==typeof b[g]||null===b[g])b[g]=h;else if(b[g]instanceof Array)b[g].push(h);else{var i=b[g];b[g]=[i,h]}}}catch(j){console.log("MediaFrameworkResponseHelper getDomainAttributesObject: error analyzing domain_specific_attributes")}return b},d}),define("media-framework-service/vo/MediaCatalogResponseVO",["require","exports","module","media-framework-service/subclasses/MediaFrameworkResponseHelper","ensureArray/ensureArray"],function(a,b,c){function d(a,b){var c,d,g,h,i,j,k,l=f(a.user_verified_event)[0],m=l.event_id,n=new e(a);c=n.isAuthorized(),d=n.isLoginRequired(),h=n.getBlackoutStatus(),g=n.isVideoBlackedOut(h),j=n.getBlackoutStatus(!0),i=n.isVideoBlackedOut(j);var o=f(l.user_verified_content);if(o&&o.length>0){var p;for(k in o)p=o[k],p&&(p.domainAttributes=e.getDomainAttributesObject(p))}this.calendarEventId=m,this.isAuthorized=c,this.isLoginRequired=d,this.isNotBlackedOut=!g,this.videoBlackoutStatus=h,this.isAllContentNotBlackedOut=!i,this.allContentBlackoutStatus=h,this.mediaServiceVO=a,this.profile=b}var e=a("media-framework-service/subclasses/MediaFrameworkResponseHelper"),f=a("ensureArray/ensureArray");return d}),function(a,b){"function"==typeof define&&define.amd?define("media-framework-service/subclasses/MlbtvFreeWheelPropsHelper",[],b):"object"==typeof exports?module.exports=b():a.MlbtvFreeWheelPropsHelper=b()}(this,function(){"use strict";function a(a){}return a.prototype=$.extend(a.prototype,{}),a.getFreeWheelDynamicParams=function(a,b){var c={};c.customId=a.content_id,c.contentId=a.content_id;var d=a.domainAttributes;"undefined"!=typeof d&&null!==d&&(c.gamePk=d.game_pk,c.gameId=d.game_id,c.awayTeamId=d.away_team_id,c.homeTeamId=d.home_team_id,c.calendarEventId=d.calendar_event_id);try{var e=$.isArray(a.user_verified_media_item)?a.user_verified_media_item[0]:a.user_verified_media_item;c.authRequired="true"===e.media_item.auth_required}catch(f){console.log("MlbtvFreeWheelPropsHelper getFreeWheelDynamicParams: error analyzing user_verified_media_item.media_item.auth_required")}return c.userType=b,c},a}),define("media-framework-service/enums/UserTypeEnum",["require","exports","module"],function(a,b,c){function d(){}return d.USER_TYPE_OTHER="OTHER",d.USER_TYPE_FREE="FREE",d.USER_TYPE_PAID="PAID",d.USER_TYPE_EMC="EMC",d.USER_TYPE_PROMO_FREE_TRIAL="PROMOFREETRIAL",d}),define("media-framework-service/enums/MlbtvFeaturesEnum",["require","exports","module"],function(a,b,c){function d(){}return d.NEW_MESSAGE="mp4.newMessage",d.GD_MESSAGE="mp4.gdMessage",d.BASIC_MESSAGE="mp4.basicMessage",d.BASIC_AR_MESSAGE="mp4.basicARMessage",d.PREMIUM_MESSAGE="mp4.premiumMessage",d.YOY_MESSAGE="mp4.yoyMessage",d.PADRES_TV_MESSAGE="mp4.padrestvMessage",d.EXEC_MESSAGE="mp4.execMessage",d.EMC_MESSAGE="mp4.emcMessage",d.PROMO_FREE_TRIAL_MESSAGE="mp4.promoFreeTrialMessage",d}),function(a,b){"function"==typeof define&&define.amd?define("media-framework-service/subclasses/MlbtvUserTypeHelper",["media-framework-service/subclasses/FeaturesHelper","media-framework-service/enums/UserTypeEnum","media-framework-service/enums/MlbtvFeaturesEnum"],b):"object"==typeof exports?module.exports=b(require("media-framework-service/subclasses/FeaturesHelper"),require("media-framework-service/enums/UserTypeEnum"),require("media-framework-service/enums/MlbtvFeaturesEnum")):a.MlbtvUserTypeHelper=b(a.FeaturesHelper,a.UserTypeEnum,a.MlbtvFeaturesEnum)}(this,function(a,b,c){"use strict";function d(a){}return d.prototype=$.extend(d.prototype,{}),d.isEmcUser=function(b){return a.isOneFeatureFound(b,[c.EMC_MESSAGE])},d.isSponsoredPromoFreeTrialUser=function(b){return a.isOneFeatureFound(b,[c.PROMO_FREE_TRIAL_MESSAGE])},d.isPayingUser=function(b){var d=[c.PREMIUM_MESSAGE,c.BASIC_MESSAGE,c.BASIC_AR_MESSAGE,c.EXEC_MESSAGE];return a.isOneFeatureFound(b,d)},d.determineUserType=function(c){var e=b.USER_TYPE_OTHER;if(c&&c.length>0){var f=!1;if(f=d.isPayingUser(c))e=b.USER_TYPE_PAID;else if(d.isEmcUser(c))e=b.USER_TYPE_EMC;else if(d.isSponsoredPromoFreeTrialUser(c))e=b.USER_TYPE_PROMO_FREE_TRIAL;else{var g=!f;if(g){var h=a.isFree(c);h&&(e=b.USER_TYPE_FREE)}}}return console.log("MlbtvUserTypeHelper determineUserType: userType="+e),e},d}),define("media-framework-service/vo/MediaItemResponseVO",["require","exports","module","bam.cookies/cookies","ensureArray/ensureArray","media-framework-service/subclasses/MediaFrameworkResponseHelper","media-framework-service/subclasses/MlbtvFreeWheelPropsHelper","media-framework-service/subclasses/MlbtvUserTypeHelper"],function(a,b,c){function d(a){var b=new g(a),c=b.isAuthorized(),d=b.isLoginRequired(),j=b.getBlackoutStatus(),k=!b.isVideoBlackedOut(j),l=b.isLocationUndetermined(j)&&c&&!k,m=f(a.user_verified_event)[0],n=f(m.user_verified_content)[0],o=f(n.user_verified_media_item)[0];
n.domainAttributes=g.getDomainAttributesObject(n);var p=b.features,q=i.determineUserType(p);n.freewheelProps=h.getFreeWheelDynamicParams(n,q);var r=o.url,s=[];try{var t=a.session_info.session_attributes;if("undefined"!=typeof t&&null!=t)"undefined"!=typeof t.session_attribute&&null!=t.session_attribute&&(s=f(t.session_attribute));else if(t=a.session_info.sessionAttributes,"undefined"!=typeof t&&null!=t){s=t;for(var u in s)s[u].name=s[u].attributeName,s[u].value=s[u].attributeValue}if("undefined"!=typeof t&&null!=t){var v=e.get("Authorization");null!==v&&s.push({name:"Authorization",value:v})}}catch(w){console.log("MediaItemResponseVO constructor: error grabbing cookie values from the response")}this.url=r,this.isAuthorized=c,this.isLoginRequired=d,this.isNotBlackedOut=k,this.isAVSRequired=l,this.videoBlackoutStatus=j,this.mediaItem=o.media_item,this.mediaServiceVO=a,this.features=p,this.mfCookies=s,this.userType=q}var e=a("bam.cookies/cookies"),f=a("ensureArray/ensureArray"),g=a("media-framework-service/subclasses/MediaFrameworkResponseHelper"),h=a("media-framework-service/subclasses/MlbtvFreeWheelPropsHelper"),i=a("media-framework-service/subclasses/MlbtvUserTypeHelper");return d}),function(a,b){"function"==typeof define&&define.amd?define("auth-media-gateway/events/AuthMediaEvents",["bandwagon/bandwagon"],b):"object"==typeof exports?module.exports=b(require("bandwagon/bandwagon")):a.AuthMediaEvents=b(a.Bandwagon)}(this,function(a){var b={LOGIN_CHALLENGE:"loginChallenge",LOGIN_SUCCESS:"loginSuccess",LOGIN_ERROR:"loginError",MEDIA_CATALOG_SUCCESS:"mediaCatalogSuccess",MEDIA_CATALOG_ERROR:"mediaCatalogError",MEDIA_CATALOG_NOT_AUTHORIZED:"mediaCatalogNotAuthorized",MEDIA_ITEM_PLAYABLE:"mediaItemPlayable",MEDIA_ITEM_ERROR:"mediaItemError",MEDIA_ITEM_BLACKOUT:"mediaItemBlackout",MEDIA_ITEM_NOT_AUTHORIZED:"mediaItemNotAuthorized",MEDIA_AVS_REQUIRED:"mediaAvsRequired"};return a.registerEvents("AUTH_MEDIA_EVENTS",b),b}),define("client/client",[],function(){function a(){var a=window.screen.width;return d.isAndroid&&(a/=d.devicePixelRatio),a}function b(){var a=window.screen.height;return d.isAndroid&&(a/=d.devicePixelRatio),a}function c(){var c=a(),d=b();return Math.max(c,d)}var d={};"undefined"==typeof window&&(window={navigator:{userAgent:"node"},devicePixelRatio:1,screen:{width:1,height:1}});var e=window.navigator.userAgent;return d.isIPhone=!!e.match(/iPhone|iPod/),d.isIPad=!!e.match(/iPad/),d.isIOS=d.isIPhone||d.isIPad,d.isAndroid=!!e.match(/Android/),d.isWindowsPhone=!!e.match(/IEMobile/),d.isKindle=!!e.match(/Silk/),d.isBlackberry=!!e.match(/BB\d\d/),d.isOldBlackberry=!!e.match(/BlackBerry/),d.isPlaybook=!!e.match(/PlayBook/),d.isVizio=!!e.match(/Vizio/),d.isGoogleTV=!!e.match(/GoogleTV/),d.isAppleTV=!!e.match(/AppleTV/),d.isTV=d.isVizio||d.isAppleTV||d.isGoogleTV,d.isMacOS=!!e.match(/Mac OS X/),d.isWindows=!!e.match(/Windows NT/),d.isWindowsRT=!!e.match(/Windows NT[^;]+; ARM;/),d.isWebKit=!!e.match(/WebKit/),d.isGecko=!!e.match(/Gecko/),d.isTrident=d.isIE=!!e.match(/Trident/),d.isChrome=!!e.match(/Chrome/),d.devicePixelRatio=window.devicePixelRatio||1,d.isTouch="ontouchmove"in window,d.isRetina=d.devicePixelRatio>=1.5,d.isMobile=c()<1024,d.isTablet=!d.isMobile&&d.isTouch,d.isDesktop=!d.isMobile&&!d.isTablet,d.isMobile?d.typeString="mobile":d.isTablet?d.typeString="tablet":d.typeString="desktop",d.screen={width:a(),height:b()},"onorientationchange"in window&&window.addEventListener("onorientationchange",function(){d.screen.width=a(),d.screen.height=b()}),d}),function(a,b){"function"==typeof define&&define.amd?define("auth-media-gateway/AuthenticatedMediaGateway",["auth-media-gateway/subclasses/Session","media-framework-service/MediaFrameworkService","bam.cookies/cookies","media-framework-service/vo/MediaCatalogResponseVO","media-framework-service/vo/MediaItemResponseVO","media-framework-service/events/MediaEvents","auth-media-gateway/events/AuthMediaEvents","client/client","bandwagon/bandwagon"],b):"object"==typeof exports?module.exports=b(require("auth-media-gateway/subclasses/Session"),require("media-framework-service/MediaFrameworkService"),require("bam.cookies/cookies"),require("media-framework-service/vo/MediaCatalogResponseVO"),require("media-framework-service/vo/MediaItemResponseVO"),require("media-framework-service/events/MediaEvents"),require("auth-media-gateway/events/AuthMediaEvents"),require("client/client"),require("bandwagon/bandwagon")):a.AuthenticatedMediaGateway=b(null,a.MediaFrameworkService,null,null,null,a.MediaEvents,a.AuthMediaEvents,null,null)}(this,function(a,b,c,d,e,f,g,h,i){"use strict";function j(){function h(){y=new a(C),B=y.isLoggedIn();var b=j();console.log(A+" beginLoginAuthFlow: isLoggedIn = "+B+", isLoginRequired = "+b),x.partner_token||!b?o():b&&!B?G.publish(g.LOGIN_ERROR):l()}function j(){console.log(A+" loginRequired:");var a=!0;return C.bypassLogin?a=!1:"undefined"!=typeof x.authorization?a=x.authorization:"undefined"!=typeof x.login&&(a=x.login),console.log(A+" loginRequired: return isRequired = "+a),a}function l(){console.log(A+" verifyLoginStatusInBackground:"),y.isLoggedIn(m,!0)}function m(a){var b=a.isLoggedIn;"undefined"!=typeof a.profile&&(E=a.profile),console.log(A+" handleVerifyLoginStatusResult: isLoggedIn = "+b),b?o():n()}function n(){console.log(A+" presentLoginScreen:"),G.publish(g.LOGIN_CHALLENGE)}function o(){console.log(A+" callMediaService:"),p(),J&&(x.session_key=unescape(J)),H.requestMedia(x)}function p(){G.on(f.MEDIA_REQUEST_SUCCESS,r),G.on(f.MEDIA_REQUEST_ERROR,w)}function q(){G.off(f.MEDIA_REQUEST_SUCCESS,r),G.off(f.MEDIA_REQUEST_ERROR,w)}function r(a){console.log(A+" handleMediaRequestSuccess:"),q(),D?s(a):t(a)}function s(a){console.log(A+" handleCatalogRequestSuccess:");var b;try{b=new d(a,E)}catch(c){return console.log(A+" handleCatalogRequestSuccess: there was an error parsing the response, so trigger an error event and return"),void G.publish(g.MEDIA_CATALOG_ERROR,a)}u(a),b.isLoginRequired?n():b.isAuthorized?G.publish(g.MEDIA_CATALOG_SUCCESS,b):G.publish(g.MEDIA_CATALOG_NOT_AUTHORIZED,b)}function t(a){console.log(A+" handlePlaybackUrlRequestSuccess:");var b;try{b=new e(a)}catch(c){return void G.publish(g.MEDIA_ITEM_ERROR,a)}v(b),u(a),b.mediaItem.logged_in=B,b.isLoginRequired?n():b.isAuthorized&&b.isNotBlackedOut?b.url?G.publish(g.MEDIA_ITEM_PLAYABLE,b):G.publish(g.MEDIA_ITEM_ERROR,b):b.isAuthorized?b.isNotBlackedOut?G.publish(g.MEDIA_ITEM_ERROR,b):G.publish(g.MEDIA_ITEM_BLACKOUT,b):G.publish(g.MEDIA_ITEM_NOT_AUTHORIZED,b)}function u(a){a.session_key&&(J=a.session_key,c.set({name:I,value:J,path:"/",expires:new Date((new Date).getTime()+36e5)}))}function v(a){var b=!0;if(b===!0)try{var d=a.mfCookies;if(d&&d.length>0){var e,f=window.location.hostname.split("."),g="."+f[f.length-2]+"."+f[f.length-1];for(var h in d)e=d[h],e&&c.set({name:e.name,value:e.value,domain:g,path:"/"})}}catch(i){console.log(A+" setMediaFrameworkSessionCookies: error grabbing cookie values from the mediaItemResponseVO")}}function w(a,b){return console.log(A+" handleMediaRequestError:"),q(),"-3000"===b.code?void n():(b.session_key!==!1?u(b):(J=null,c.remove({name:I,path:"/"})),void G.publish(g.MEDIA_ITEM_ERROR,b))}var x,y,z=++k,A="AuthenticatedMediaGateway_"+z,B=!1,C={},D=!1,E=null,F="#video-player",G=i.getInstanceByKey(F),H=new b({container:"#video-player"}),I="mssk",J=c.get(I);J&&(J=unescape(J)),this.requestMedia=function(a){D=!1,x=a,x.frameworkURL=C.frameworkURL,x.frameworkEndPoint=C.frameworkEndPoint,x.format=C.format,h()},this.requestMediaCatalog=function(a){D=!0,x=a,x.frameworkURL=C.frameworkURL,x.frameworkEndPoint=C.frameworkEndPoint,x.format=C.format,h()},this.configure=function(a){C=a}}var k=0;return j.LOGIN_CHALLENGE="AuthenticatedMediaGateway.LOGIN_DISPLAY",j.LOGIN_SUCCESS="AuthenticatedMediaGateway.LOGIN_SUCCESS",j.LOGIN_ERROR="AuthenticatedMediaGateway.LOGIN_ERROR",j.MEDIA_CATALOG_SUCCESS="AuthenticatedMediaGateway.MEDIA_CATALOG_SUCCESS",j.MEDIA_CATALOG_ERROR="AuthenticatedMediaGateway.MEDIA_CATALOG_ERROR",j.MEDIA_CATALOG_NOT_AUTHORIZED="AuthenticatedMediaGateway.MEDIA_CATALOG_NOT_AUTHORIZED",j.MEDIA_CATALOG_AVS_REQUIRED="AuthenticatedMediaGateway.MEDIA_CATALOG_AVS_REQUIRED",j.MEDIA_ITEM_PLAYABLE="AuthenticatedMediaGateway.MEDIA_ITEM_PLAYABLE",j.MEDIA_ITEM_ERROR="AuthenticatedMediaGateway.MEDIA_ITEM_ERROR",j.MEDIA_ITEM_BLACKOUT="AuthenticatedMediaGateway.MEDIA_ITEM_BLACKOUT",j.MEDIA_ITEM_NOT_AUTHORIZED="AuthenticatedMediaGateway.MEDIA_ITEM_NOT_AUTHORIZED",j.MEDIA_ITEM_AVS_REQUIRED="AuthenticatedMediaGateway.MEDIA_ITEM_AVS_REQUIRED",j}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/clip/MediaFrameworkMeta",["ensureArray/ensureArray"],b):"object"==typeof exports?module.exports=b(require("ensureArray/ensureArray")):a.MediaFrameworkMeta=b(null)}(this,function(a){"use strict";function b(b,c){var d=b,e=a(b.mediaServiceVO.user_verified_event)[0],f=a(e.user_verified_content)[0];c=c||f.content_id;var g=f.domainAttributes,h=a(f.user_verified_media_item)[0],i=b.mediaItem;this.getKeyWordValue=function(a){return g[a]},this.data=function(){return d.media},this.keywords=g,this.urls=[h.url],this.content_id=c,this.authflow_required=i.auth_required,this.twitterInline=!1,this.shareable=!1,this.notEmbeddable=!0,this.notShareable=!0,this.embeddable=!1,this.combined_media_state=i.state,this.advisory_rating="",this.tv_rating="",this.closed_captioned="",this.closed_captions_location_ttml=this.getKeyWordValue("closed_captions_location_ttml"),this.start_time=null,this.calendar_event_id=this.getKeyWordValue("calendar_event_id"),this.coverage_association=this.getKeyWordValue("coverage_association"),this.coverage_type=this.getKeyWordValue("coverage_type"),this.default_dam_view_key=this.getKeyWordValue("default_dam_view_key"),this.event_date=null,this.away_team_id=this.getKeyWordValue("away_team_id"),this.home_team_id=this.getKeyWordValue("home_team_id"),this.call_letters=this.getKeyWordValue("call_letters"),this.game_id=this.getKeyWordValue("game_id"),this.game_pk=this.getKeyWordValue("game_pk"),this.inning_index_location_xml=this.getKeyWordValue("inning_index_location_xml"),this.milestones_xml="",this.date=null,this.duration="undefined"==typeof i.duration||null===i.duration?"":i.duration,this.headline=null,this.kicker=null,this.blurb=null,this.bigBlurb=null,this.imagesByType=null,this.thumb=null}return b}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/clip/AuthenticatedClip",["lodash/lodash","ensureArray/ensureArray","video-playback-manager/vpm/clip/MediaFrameworkMeta"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("ensureArray/ensureArray"),require("video-playback-manager/vpm/clip/MediaFrameworkMeta")):a.AuthenticatedClip=b(null,null,null)}(this,function(a,b,c){"use strict";function d(d){this.type="video";var f=b(d.mediaServiceVO.user_verified_event)[0],g=b(f.user_verified_content)[0],h="video";try{h=g.type}catch(i){console.log("AuthenticatedClip: error grabbing content type so use default value")}this.isAudioOnly="audio"===h,this.authRequired="undefined"!=typeof d.mediaItem.auth_required?"true"===d.mediaItem.auth_required:!1,this.calendarEventId=f.event_id,this.content_id=g.content_id.toString(),this.uniqueId=this.content_id||this.calendarEventId,this.duration=void 0,this.startTimeOffset=void 0,this.mfResponse=d,d.url&&(this.path=d.url);try{this.mfCookies=d.mfCookies}catch(i){console.log("AuthenticatedClip: error grabbing mfCookies array")}var j=!1;try{j="MEDIA_ON"==d.mediaItem.state||"MEDIA_STAGING"==d.mediaItem.state}catch(i){console.log("AuthenticatedClip: error determining if clip is live")}this.isLive=j;var k=!1,l=!1;try{var m=[],n=g.domain_specific_attributes;$.isArray(n)?m=n:"undefined"!=typeof n&&null!=n&&"undefined"!=typeof n.domain_attribute&&null!=n.domain_attribute&&(m=n.domain_attribute);var o,p=m.length;for(o=0;p>o;o++)"subject"==m[o].name&&m[o].value.indexOf("LINEAR")>=0&&(k=!0),"content"==m[o].name&&m[o].value.indexOf("highlight")>=0&&(l=!0)}catch(i){console.log("AuthenticatedClip: error determining if clip is linear")}this.isLinear=k,this.isHighlight=l;try{var q=g.tracking;if($.isArray(q)){var o,r,p=q.length;for(o=0;p>o;o++)if(r=q[o],"conviva"===r.name){var s=a.map(r.trackingAttributes,"name"),t=a.map(r.trackingAttributes,"value");this.convivaTrackingProps=a.object(s,t)}}else if("undefined"!=typeof q.conviva){var s=a.map(g.tracking.conviva.tracking_attributes.conviva_attribute,"name"),t=a.map(g.tracking.conviva.tracking_attributes.conviva_attribute,"value");this.convivaTrackingProps=a.object(s,t)}}catch(i){console.log("AuthenticatedClip: error grabbing tracking object")}try{this.freewheelProps=e(d)}catch(i){console.log("AuthenticatedClip: error grabbing Freewheel Dynamic Content-level Properties")}try{this.metaData=new c(d)}catch(i){console.log("AuthenticatedClip: error setting metaData")}}var e=function(a){var c={};try{var d=b(a.mediaServiceVO.user_verified_event)[0],e=b(d.user_verified_content)[0];e.freewheelProps&&(c=e.freewheelProps)}catch(f){console.log("AuthenticatedClip getFreeWheelDynamicParams: error grabbing freewheelProps off the user_verified_content")}if(c||(c={}),!c.userType){var g="FREE";a&&a.mediaItem&&a.mediaItem.logged_in&&(g="PAID"),c.userType=g}return c};return d}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaframework/VideoAuthenticator",["logger/ClassLogger","bindable/jquery.bindable","auth-media-gateway/AuthenticatedMediaGateway","video-playback-manager/config/Config","video-playback-manager/vpm/utils/PlaybackScenarioHelper","video-playback-manager/vpm/VideoMessage","video-playback-manager/vpm/clip/AuthenticatedClip","bandwagon/bandwagon"],b):"object"==typeof exports?module.exports=b(require("logger/ClassLogger"),require("bindable/jquery.bindable"),require("auth-media-gateway/AuthenticatedMediaGateway"),require("video-playback-manager/config/Config"),require("video-playback-manager/vpm/utils/PlaybackScenarioHelper"),require("video-playback-manager/vpm/VideoMessage"),require("video-playback-manager/vpm/clip/AuthenticatedClip"),require("bandwagon/bandwagon")):a.VideoAuthenticator=b(a.ClassLogger,null,a.AuthenticatedMediaGateway,a.Config,a.PlaybackScenarioHelper,a.VideoMessage,a.AuthenticatedClip,null)}(this,function(a,b,c,d,e,f,g,h){"use strict";function i(e){this._instanceNumber=++j,this._logger=new a("VideoAuthenticator_"+this._instanceNumber),this._logger.log("constructor: instanceNumber="+this._instanceNumber);var f=e.env,g=e.mediaFramework,i=e.amg;window.location.search.indexOf("qa")>=0?f="qaweb1":window.location.search.indexOf("beta")>=0?f="betaweb1":window.location.search.indexOf("prod")>=0&&(f="prodweb1");var k,l=!1;k&&"IE"==k.browserName&&k.browserVersion<10&&(l=!0);var m="prodweb1"===f?d.SECURE_SUB_DOMAIN_PROD:"betaweb1"===f?d.SECURE_SUB_DOMAIN_BETA:d.SECURE_SUB_DOMAIN_QA,n=m+d.SECURE_DOMAIN_DEFAULT,o="qaweb1"===f?d.MEDIA_FRAMEWORK_SUB_DOMAIN_QA:d.MEDIA_FRAMEWORK_SUB_DOMAIN_PROD,p=o+d.MEDIA_FRAMEWORK_DOMAIN_DEFAULT,q={secureHost:"undefined"!=typeof g.secureDomain?g.secureDomain:n,frameworkURL:"undefined"!=typeof g.mediaFrameworkDomain?g.mediaFrameworkDomain:p,frameworkEndPoint:"undefined"!=typeof g.mediaFrameworkEndPoint?g.mediaFrameworkEndPoint:null,bypassLogin:"undefined"!=typeof i.bypassLogin?i.bypassLogin:l,format:"undefined"!=typeof g.format?g.format:null};this._amg=new c,this._amg.configure(q);var r,s,t=[],u="#video-player";r=h.getInstanceByKey(u),s=h.getRegisteredEventsByKey("AUTH_MEDIA_EVENTS"),this.addEventListeners=function(){var a=this;t.push({dispatcher:r,event:s.LOGIN_CHALLENGE,"function":$.proxy(a.handleLoginChallenge,a)}),t.push({dispatcher:r,event:s.LOGIN_SUCCESS,"function":$.proxy(a.handleLoginSuccess,a)}),t.push({dispatcher:r,event:s.LOGIN_ERROR,"function":$.proxy(a.handleLoginError,a)}),t.push({dispatcher:r,event:s.MEDIA_ITEM_PLAYABLE,"function":$.proxy(a.handleMediaItemPlayable,a)}),t.push({dispatcher:r,event:s.MEDIA_ITEM_ERROR,"function":$.proxy(a.handleMediaItemError,a)}),t.push({dispatcher:r,event:s.MEDIA_ITEM_BLACKOUT,"function":$.proxy(a.handleMediaItemBlackout,a)}),t.push({dispatcher:r,event:s.MEDIA_ITEM_NOT_AUTHORIZED,"function":$.proxy(a.handleMediaItemNotAuthorized,a)}),t.push({dispatcher:r,event:s.MEDIA_AVS_REQUIRED,"function":$.proxy(a.handleMediaItemAVSRequired,a)});var b,c,d=t.length;for(b=0;d>b;b++)c=t[b],c.dispatcher.on(c.event,c["function"])},this.removeEventListeners=function(){var a,b,c=t.length;for(a=0;c>a;a++)b=t[a],b.dispatcher.off(b.event,b["function"])},this.addEventListeners(),b(this)}var j=0;return i.prototype={_instanceNumber:0,_logger:null,_amg:null,requestMedia:function(a){this._logger.log("requestMedia:"),this._amg.requestMedia(a)},handleMediaItemPlayable:function(a){this._logger.log("handleMediaItemPlayable: create new AuthenticatedClip for Media URL = "+a.url),this.removeEventListeners();var b=new g(a);this.trigger(i.EVENT_MEDIA_PLAYABLE,b)},handleMediaItemError:function(a){this._logger.log("handleMediaItemError:"),this.removeEventListeners();var b=a.code||a.status_code,c=a.msg||a.status_message;a.code=b,a.msg=c,this.trigger(i.EVENT_MEDIA_ERROR,a)},handleMediaItemBlackout:function(a){this._logger.log("handleMediaItemBlackout:"),this.removeEventListeners(),this.showMediaError("blackout","handleMediaItemBlackout args : "+a)},handleMediaItemAVSRequired:function(a){this._logger.log("handleMediaItemAVSRequired:"),this.removeEventListeners(),this.trigger(i.EVENT_MEDIA_AVS_REQUIRED)},handleMediaItemNotAuthorized:function(a){this._logger.log("handleMediaItemNotAuthorized:"),this.removeEventListeners(),this.trigger(i.EVENT_MEDIA_NOT_AUTHORIZED),this.showMediaError("authorization","handleMediaItemNotAuthorized args : "+a)},handleLoginChallenge:function(a){this._logger.log("handleLoginChallenge:"),this.removeEventListeners(),this.trigger(i.EVENT_LOGIN_CHALLENGE)},handleLoginSuccess:function(a){this._logger.log("handleLoginSuccess:"),this.removeEventListeners()},handleLoginError:function(a){this._logger.log("handleLoginError: loginError should be handled in property application",a),this.removeEventListeners()},showMediaError:function(a,b){this._logger.log("showMediaError:");var c="";f.error(a,b,c)}},i.EVENT_MEDIA_PLAYABLE="MEDIA_PLAYABLE",i.EVENT_MEDIA_ERROR="EVENT_MEDIA_ERROR",i.EVENT_MEDIA_NOT_AUTHORIZED="EVENT_MEDIA_NOT_AUTHORIZED",i.EVENT_MEDIA_AVS_REQUIRED="MEDIA_AVS_REQUIRED",i.EVENT_LOGIN_CHALLENGE="EVENT_LOGIN_CHALLENGE",i}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/models/TimecodeModel",[],b):"object"==typeof exports?module.exports=b():a.TimecodeModel=b()}(this,function(){"use strict";function a(){var a={};this.setCurrentTimecode=function(b,c){a[b]=c},this.getLastTimecode=function(b){var c=null;try{c=a[b]}catch(d){}return c}}return a.prototype=$.extend(a.prototype,{publicFunction:function(){}}),new a}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/loader/MediaFrameworkContentItemLoader",["logger/ClassLogger","bindable/jquery.bindable","video-playback-manager/config/Config","auth-media-gateway/subclasses/AuthenticatedMediaParams","video-playback-manager/vpm/mediaframework/VideoAuthenticator","video-playback-manager/vpm/utils/PlaybackScenarioHelper","video-playback-manager/vpm/models/TimecodeModel"],b):"object"==typeof exports?module.exports=b(require("logger/ClassLogger"),require("bindable/jquery.bindable"),require("video-playback-manager/config/Config"),require("auth-media-gateway/subclasses/AuthenticatedMediaParams"),require("video-playback-manager/vpm/mediaframework/VideoAuthenticator"),require("video-playback-manager/vpm/utils/PlaybackScenarioHelper"),require("video-playback-manager/vpm/models/TimecodeModel")):a.MediaFrameworkContentItemLoader=b(a.ClassLogger,a.bindable,a.Config,a.AuthenticatedMediaParams,a.VideoAuthenticator,a.PlaybackScenarioHelper,a.TimecodeModel)}(this,function(a,b,c,d,e,f,g){"use strict";function h(a){function c(a,b){i.log("onMediaPlayable: the Media Framework returned a authenticatedClip with a valid playback URL so try to play it"),l.currentClip&&(l.currentClip.milestones&&"undefined"!=typeof l.currentClip.milestones&&(b.milestones=l.currentClip.milestones),"undefined"!=typeof l.currentClip.duration&&(b.duration=l.currentClip.duration),"undefined"!=typeof l.currentClip.startTimeOffset&&(b.startTimeOffset=l.currentClip.startTimeOffset)),l.audioOnlyDisplayVO&&(b.audioOnlyDisplayVO=l.audioOnlyDisplayVO);var c=g.getLastTimecode(b.calendarEventId);c&&(b.startTime=c),$(l).trigger(h.EVENT_MEDIA_FRAMEWORK_CONTENT_PLAYABLE,b)}function d(a){i.log("onLoginChallenge:"),$(l).trigger(h.EVENT_MEDIA_FRAMEWORK_CONTENT_LOGIN_CHALLENGE)}function f(){l.authorized=!1,$(l).trigger(h.EVENT_MEDIA_FRAMEWORK_NOT_AUTHORIZED)}function j(){l.showMediaError("avsCheck"),$(l).trigger(h.EVENT_MEDIA_FRAMEWORK_AVS_REQUIRED)}function k(a,b){i.log("onMediaError:");b.code,b.msg;$(l).trigger(h.EVENT_MEDIA_FRAMEWORK_CONTENT_ERROR,b)}var l=this;this._config=a,b(this),this.setupVideoAuthenticator=function(){null===l.authenticator&&(l.authenticator=new e(this._config),l.authenticator.bind(e.EVENT_MEDIA_PLAYABLE,c),l.authenticator.bind(e.EVENT_MEDIA_NOT_AUTHORIZED,f),l.authenticator.bind(e.EVENT_LOGIN_CHALLENGE,d),l.authenticator.bind(e.EVENT_MEDIA_AVS_REQUIRED,j),l.authenticator.bind(e.EVENT_MEDIA_ERROR,k))}}var i=new a("MediaFrameworkContentItemLoader");return h.prototype={_config:{},authenticator:null,getTokenizedUrlFromMediaFramework:function(a,b){this.setupVideoAuthenticator(),i.log("getTokenizedUrlFromMediaFramework: attempt to play contentId="+a+", playbackScenario="+b);var e=new d;e.content_id=a,e.playback_scenario=b;var g=this._config.mediaFramework,h=g&&"undefined"!=typeof g.mediaFrameworkParams&&"undefined"!=typeof g.mediaFrameworkParams.contentPlay?g.mediaFrameworkParams.contentPlay:c.MEDIA_FRAMEWORK_PARAMS;this.addParamsFromObject(h,e),(f.isPlaybackScenarioHls(b)||f.isHlsAudioScenario(b))&&(e.auth="response"),this.authenticator.requestMedia(e)},addParamsFromObject:function(a,b){if(a&&b)for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])}},h.EVENT_MEDIA_FRAMEWORK_CONTENT_PLAYABLE="EVENT_MEDIA_FRAMEWORK_CONTENT_PLAYABLE",h.EVENT_MEDIA_FRAMEWORK_CONTENT_LOGIN_CHALLENGE="EVENT_MEDIA_FRAMEWORK_CONTENT_LOGIN_CHALLENGE",h.EVENT_MEDIA_FRAMEWORK_NOT_AUTHORIZED="EVENT_MEDIA_FRAMEWORK_NOT_AUTHORIZED",h.EVENT_MEDIA_FRAMEWORK_AVS_REQUIRED="EVENT_MEDIA_FRAMEWORK_AVS_REQUIRED",h.EVENT_MEDIA_FRAMEWORK_CONTENT_ERROR="EVENT_MEDIA_FRAMEWORK_CONTENT_ERROR",h}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaitem/mediacliploader/MFContentClipLoader",["logger/ClassLogger","bindable/jquery.bindable","jsoop/oop/Inheritance","video-playback-manager/vpm/mediaitem/mediacliploader/AbstractMediaClipLoader","video-playback-manager/vpm/models/PlaybackModel","video-playback-manager/vpm/mediaitem/mediacliploader/MediaItemClipLoaderEventEnum","video-playback-manager/vpm/loader/MediaFrameworkContentItemLoader"],b):"object"==typeof exports?module.exports=b(require("logger/ClassLogger"),require("bindable/jquery.bindable"),require("jsoop/oop/Inheritance"),require("video-playback-manager/vpm/mediaitem/mediacliploader/AbstractMediaClipLoader"),require("video-playback-manager/vpm/models/PlaybackModel"),require("video-playback-manager/vpm/mediaitem/mediacliploader/MediaItemClipLoaderEventEnum"),require("video-playback-manager/vpm/loader/MediaFrameworkContentItemLoader")):a.MFContentClipLoader=b(a.ClassLogger,null,a.Inheritance,a.AbstractMediaClipLoader,a.PlaybackModel,a.MediaItemClipLoaderEventEnum,a.MediaFrameworkContentItemLoader)}(this,function(a,b,c,d,e,f,g){"use strict";function h(a){b(this),h.prototype["super"].constructor.call(this,a)}var i=new a("MFContentClipLoader");return c.inherit(h,d,{currentMediaItem:null,getMediaClip:function(a){i.log("getMediaClip:"),this.currentMediaItem=a,0==a.totalFailures?this.playContentFirstTime(a):this.playContentWithNextPlaybackScenario(a)},currentPlaybackScenarioPreferenceList:null,playContentFirstTime:function(a){i.log("playContentFirstTime:"),a.resetErrorCounters();var b=this.config.preferredPlaybackScenarios;this.config.considerPremiumPlaybackScenarios&&(a.considerHlsPlayback=!0,b=this.config.premiumContentPlaybackScenarios,this.config.premiumContentPlaybackScenarios||i.log("premiumContentPlaybackScenarios could not be found. Maybe you could add them to the property config?")),a.currentPlaybackScenarioPreferenceList=b,a.setAvailablePlaybackScenarios(b),this.playContentWithNextPlaybackScenario(a)},playContentWithNextPlaybackScenario:function(a){i.log("playContentWithNextPlaybackScenario:");var b,c,d=a.playMediaRequestObject;a.mediaPlaybackId||a.content_id?c=a.mediaPlaybackId||a.content_id:(a.metaData.mediaPlaybackId||a.metaData.content_id)&&(c=a.metaData.mediaPlaybackId||a.metaData.content_id),0==a.totalFailures&&a.currentPlaybackScenario?(b=a.currentPlaybackScenario,d.content_id=c):b=this._getNextPlaybackScenario(a);var f=e.getMediaItemFromContentId(d.content_id);if(f.currentPlaybackScenario=b,null===b||"undefined"==typeof b)return i.log("playContentWithNextPlaybackScenario: could not find a valid playbackScenario to use so abort"),void this.showMediaError("error","could not find a valid playbackScenario for this content");var h=new g(this.config);this.addEventListeners(h),h.getTokenizedUrlFromMediaFramework(d.content_id,b)},addEventListeners:function(a){var b=this;a&&(a.bind(g.EVENT_MEDIA_FRAMEWORK_CONTENT_PLAYABLE,function(a,c){b.onContentPlayable(a,c)}),a.bind(g.EVENT_MEDIA_FRAMEWORK_CONTENT_LOGIN_CHALLENGE,function(a,c){b.onLoginChallenge(a,c)}),a.bind(g.EVENT_MEDIA_FRAMEWORK_NOT_AUTHORIZED,function(a,c){b.onAuthRequired(a,c)}),a.bind(g.EVENT_MEDIA_FRAMEWORK_CONTENT_ERROR,function(a,c){b.onMediaFrameworkContentError(a,c)}))},onContentPlayable:function(a,b){i.log("onContentPlayable:"),this.currentMediaItem.metaData&&(b.metaData=this.currentMediaItem.metaData),b.duration=this.currentMediaItem.playMediaRequestObject.duration,b.startTimeOffset=this.currentMediaItem.playMediaRequestObject.startTimeOffset,this.currentMediaItem.clip=b,$(this).trigger(f.MEDIA_ITEM_CLIP_SET,this.currentMediaItem)},onLoginChallenge:function(a,b){i.log("onLoginChallenge:"),$(this).trigger(f.MEDIA_ITEM_LOGIN_CHALLENGE,this.currentMediaItem)},onAuthRequired:function(a,b){i.log("onAuthRequired:"),$(this).trigger(f.MEDIA_ITEM_UNAUTHORIZED)},onMediaFrameworkContentError:function(a,b){i.log("onMediaFrameworkContentError:"),$(this).trigger(f.MEDIA_ITEM_ERROR,this.currentMediaItem)}}),h}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaselection/vo/StreamSelectionState",[],b):"object"==typeof exports?module.exports=b():a.StreamSelectionState=b()}(this,function(){"use strict";function a(a){}return a.prototype=$.extend(a.prototype,{isTYBYBlackedOut:!1,isNotAuthorized:!1,isNotAvailable:!1,isOnlyHlsAvailableForVideoButRequiredFlashVersionNotInstalled:!1,isHlsAvailable:!1,isDynamicFmsAvailable:!1,isStandardFmsAvailable:!1,isHlsPlaybackEnabled:!1,isNativeHlsSupported:!1,mediaDoneItemsCount:0,reset:function(){this.isTYBYBlackedOut=!1,this.isNotAuthorized=!1,this.isNotAvailable=!1,this.isOnlyHlsAvailableForVideoButRequiredFlashVersionNotInstalled=!1,this.isHlsAvailable=!1,this.isDynamicFmsAvailable=!1,this.isStandardFmsAvailable=!1,this.isHlsPlaybackEnabled=!1,this.isNativeHlsSupported=!1,this.mediaDoneItemsCount=0}}),a}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaselection/vo/MediaSelectionResponse",[],b):"object"==typeof exports?module.exports=b():a.MediaSelectionResponse=b()}(this,function(){"use strict";function a(){return{mediaItem:null,contentId:null,features:null,message:null,messageBlackoutStatus:null,mediaType:null,isHlsAvailable:!1,isDynamicFmsAvailable:!1,isStandardFmsAvailable:!1,isInMarket:!1,networkBlackoutOverride:null}}return a}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaselection/MediaSelectionMessageEnum",[],b):"object"==typeof exports?module.exports=b():a.MediaSelectionMessageEnum=b()}(this,function(){"use strict";function a(){}return a.IN_MARKET="IN_MARKET",a.OUT_OF_MARKET="OUT_OF_MARKET",a.BLACKED_OUT="BLACKED_OUT",a.BLACKED_OUT_UPSELL="BLACKEDOUT_UPSELL",a.BLACKED_OUT_NO_AUDIO="BLACKED OUT - NO AUDIO",a.TBYB="TBYB",a.SELECTION_SUCCESS="SUCCESS",a.UPSELL_VIDEO="UPSELL_VIDEO",a.CONTENT_ID_INVALID="CONTENT_ID_INVALID",a.TBYB_BLACKED_OUT="TBYB_BLACKED_OUT",a.NOT_AUTHORIZED="NOT_AUTHORIZED",a.NO_CONTENT_AVAILABLE="NO_CONTENT_AVAILABLE",a.AUDIO_ONLY_EVENT="AUDIO_ONLY_EVENT",a.DROPPED_AUDIO_USER="DROPPED_AUDIO_USER",a.DROPPED_FMS_UNAVAILABLE="DROPPED_FMS_UNAVAILABLE",a.DROPPED_VIDEO_UNAVAILABLE="DROPPED_VIDEO_UNAVAILABLE",a.HLS_ONLY_AVAILABLE="NEXDEF_ONLY_AVAILABLE",a.HLS_ONLY_AVAILABLE_NO_AUDIO_FALLBACK="NEXDEF_ONLY_AVAILABLE_NO_AUDIO_FALLBACK",a.LIVE_CONTENT_JUST_ENDED="LIVE_CONTENT_JUST_ENDED",a}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaselection/BlackoutStatus",["ensureArray/ensureArray","media-framework-service/enums/MFBlackoutStatus"],b):"object"==typeof exports?module.exports=b(require("ensureArray/ensureArray"),require("media-framework-service/enums/MFBlackoutStatus")):a.BlackoutStatus=b(null,a.MFBlackoutStatus)}(this,function(a,b){"use strict";function c(a){var d=c.NONE,e=[];this.status=function(){return d},this.blackedOutStatus=function(){return e};var f=function(a){d=c.NONE,e=[];var f,g;if("object"==typeof a){for(f in a)g=f;"status"===g&&(g=a[g])}else g=a;if(b.isType(g,b.SUCCESS_STATUS))d=c.SUCCESS;else if(b.isType(g,b.LOCATION_CANNOT_BE_DETERMINED_STATUS))d=c.LOCATION_CAN_NOT_BE_DETERMINED;else if(b.isType(g,b.BLACKED_OUT_STATUS)){var h,i=a[g],j=i.length;for(f=0;j>f;f++)h=i[f],h&&e.push(h);e.length>0?(h=e[0],d=h===c.KEYWORD_MLB_NATIONAL_BLACKOUT||h===c.NATIONAL?c.NATIONAL:h===c.KEYWORD_MLB_AWAY_TEAM_BLACKOUT||h===c.KEYWORD_MLB_HOME_TEAM_BLACKOUT||h===c.LOCAL?c.LOCAL:h===c.KEYWORD_TOPRANK_NON_NORTH_AMERICA_BLACKOUT||h===c.NON_NORTH_AMERICA?c.NON_NORTH_AMERICA:c.UNKNOWN):d=c.UNKNOWN}};f(a)}return c.prototype={},c.KEYWORD_MLB_AWAY_TEAM_BLACKOUT="MLB_AWAY_TEAM_BLACKOUT",c.KEYWORD_MLB_HOME_TEAM_BLACKOUT="MLB_HOME_TEAM_BLACKOUT",c.KEYWORD_MLB_NATIONAL_BLACKOUT="MLB_NATIONAL_BLACKOUT",c.KEYWORD_MLB_APSN_BLACKOUT="MLB_APSN_BLACKOUT",c.KEYWORD_TOPRANK_NON_NORTH_AMERICA_BLACKOUT="TOPRANK_NON_NORTH_AMERICA_BLACKOUT",c.UNKNOWN="unknown",c.NONE="none",c.LOCAL="local",c.NATIONAL="national",c.INTERNATIONAL="international",c.NON_NORTH_AMERICA="nonNorthAmerica",c.LOCATION_CAN_NOT_BE_DETERMINED="locationCanNotBeDetermined",c.SUCCESS="success",c}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaselection/MediaItemSelectionManagerConstants",[],b):"object"==typeof exports?module.exports=b():a.MediaItemSelectionManagerConstants=b()}(this,function(){"use strict";function a(a){}return a.prototype=$.extend(a.prototype,{}),a.SPANISH_LANG="SP",a.ENGLISH_LANG="EN",a.NATIONAL_BLACKOUT="NATIONAL_BLACKOUT",a.LOCAL_BLACKOUT="LOCAL_BLACKOUT",a.GLOBAL_BLACKOUT="GLOBAL_BLACKOUT",a.VIDEO_TYPE="video",a.AUDIO_TYPE="audio",a.IN_MARKET="in-market",a.OUT_OF_MARKET="out-of-market",a.NATIONAL="national",a.MULTI_ANGLE_SUBJECT="MULTIANGLE_COVERAGE",a.MEDIA_PLATFORM_WEB="WEB_MEDIAPLAYER",a.AUTH_STATUS_LOGIN_REQUIRED="loginRequired",a.AUTH_STATUS_NOT_AUTHORIZED="notAuthorized",a.AUTH_STATUS_SUCCESS="success",a.COVERAGE_ASSOCIATION_HOME="home_team_id",a.COVERAGE_ASSOCIATION_AWAY="away_team_id",a.COVERAGE_ASSOCIATION_NATIONAL="0",a}),function(a,b){"function"==typeof define&&define.amd?define("media-framework-service/enums/MediaStateEnum",[],b):"object"==typeof exports?module.exports=b():a.MediaStateEnum=b()}(this,function(){"use strict";function a(a){}return a.prototype=$.extend(a.prototype,{}),a.isType=function(a,b){return a&&a.toLowerCase()===b.toLowerCase()},a.MEDIA_STAGING="MEDIA_STAGING",a.MEDIA_ON="MEDIA_ON",
a.MEDIA_ARCHIVE="MEDIA_ARCHIVE",a.MEDIA_SOON="MEDIA_SOON",a.MEDIA_DONE="MEDIA_DONE",a.MEDIA_OFF="MEDIA_OFF",a.MEDIA_DEAD="MEDIA_DEAD",a}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioBitrateSet",["video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioEnum","video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioChooser","video-playback-manager/vpm/utils/PlaybackScenarioHelper"],b):"object"==typeof exports?module.exports=b(require("video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioEnum"),require("video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioChooser"),require("video-playback-manager/vpm/utils/PlaybackScenarioHelper")):a.PlaybackScenarioBitrateSet=b(a.PlaybackScenarioEnum,a.PlaybackScenarioChooser,a.PlaybackScenarioHelper)}(this,function(a,b,c){"use strict";function d(b,d){function e(b){return b===a.AUDIO_SCENARIO_FMS||b===a.AUDIO_SCENARIO_FMS_2009||c.isHlsAudioScenario(b)?!0:!1}function f(a){return k[a]}function g(a){var b=a.lastIndexOf("_");b-=1;var c=a.slice(0,b),d=c.lastIndexOf("_"),e=c.substring(d+1),f=parseInt(e);return f}function h(a){var b,d,f=[],h=a.length;for(b=0;h>b;b++)if(d=a[b],!e(d))if(c.isHlsScenario(d))i=!0;else if(c.isFMSDynamicStreamingScenario(d))j=!0;else{var l=g(d),m={scenario:d,bitrateKbps:l};f.push(m)}k=f.sort(function(a,b){return parseFloat(a.bitrateKbps)-parseFloat(b.bitrateKbps)})}var i=!1,j=!1,k=[];this.getAllPlaybackScenarios=function(){var b=this.getStandardFmsPlaybackScenarios();return i&&b.push(a.HLS_SCENARIO),j&&b.push(a.FMS_DYNAMIC_STREAMING_SCENARIO),b},this.getStandardFmsPlaybackScenarios=function(){for(var a=new Array(k.length),b=0;b<k.length;b++)a[b]=f(b).playbackScenario;return a},this.getNonHlsBitratesKbps=function(){for(var a=new Array(k.length),b=0;b<k.length;b++)a[b]=f(b).bitrateKbps;return a},this.getBitrateKbpsFromPlaybackScenario=function(a){for(var b=0;b<k.length;b++){var c=f(b);if(a==c.playbackScenario)return c.bitrateKbps}return 0},this.isHlsAvaiable=function(){return i},this.isFmsDynamicStreamingAvailable=function(){return j},h(b)}return d.prototype={},d}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioChooser",["video-playback-manager/vpm/mediaselection/vo/MediaSelectionResponse","video-playback-manager/vpm/mediaselection/MediaSelectionMessageEnum","video-playback-manager/vpm/mediaselection/BlackoutStatus","video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioEnum","video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioBitrateSet"],b):"object"==typeof exports?module.exports=b(require("video-playback-manager/vpm/mediaselection/vo/MediaSelectionResponse"),require("video-playback-manager/vpm/mediaselection/MediaSelectionMessageEnum"),require("video-playback-manager/vpm/mediaselection/BlackoutStatus"),require("video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioEnum"),require("video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioBitrateSet")):a.PlaybackScenarioChooser=b(a.MediaSelectionResponse,a.MediaSelectionMessageEnum,a.BlackoutStatus,a.PlaybackScenarioEnum,a.PlaybackScenarioBitrateSet)}(this,function(a,b,c,d,e){"use strict";function f(){}return f.prototype={},f.choosePlaybackScenario=function(a,b,c,e,g,h){("undefined"==typeof b||null===b)&&(b=!1),("undefined"==typeof c||null===c)&&(c=!1),("undefined"==typeof e||null===e)&&(e=!1),("undefined"==typeof g||null===g)&&(g=!1),("undefined"==typeof h||null===h)&&(h=!1),console.log("PlaybackScenarioChooser choosePlaybackScenario: isHlsAuthorized = "+b+", isDynamicFmsAuthorized = "+c+", isHlsPreferred = "+e);try{if("undefined"==typeof a||null===a)return null;var i=a.getAllPlaybackScenarios();if(!i||0==i.length)return console.log("PlaybackScenarioChooser choosePlaybackScenario: there are no playback options so return null"),null;var j=!1,k=a.isHlsAvaiable();if(console.log("PlaybackScenarioChooser choosePlaybackScenario: isHlsPlaybackEnabled = "+g+", isNativeHlsSupported = "+h),g===!1||h===!1)console.log("PlaybackScenarioChooser choosePlaybackScenario: HLS Playback is disabled so don't consider HLS an option"),e=!1;else if(console.log("PlaybackScenarioChooser choosePlaybackScenario: isHlsContentAvailable = "+k+", isHlsAuthorized = "+b+", isHlsPreferred = "+e),j=k&&b&&g&&h,console.log("PlaybackScenarioChooser choosePlaybackScenario: isHlsContentAvailable = "+k+", isNativeHlsAnOption = "+j+" (based on isHlsAuthorized = "+b+", isNativeHlsSupported = "+h+", isHlsPreferred = "+e+")"),e&&j)return console.log("PlaybackScenarioChooser choosePlaybackScenario: Chose HLS ("+f.HLS_SCENARIO+") because isHlsPreferred==true and isNativeHlsAnOption==true"),d.HLS_SCENARIO;var l=a.isFmsDynamicStreamingAvailable()&&c;if(console.log("PlaybackScenarioChooser choosePlaybackScenario: isFmsDynamicStreamingAnOption = "+l+" (based on isDynamicFmsAuthorized = "+c+" and if FMS_DYNAMIC_STREAMING_SCENARIO present)"),l)return console.log("PlaybackScenarioChooser choosePlaybackScenario: Chose FMS MBR ("+f.FMS_DYNAMIC_STREAMING_SCENARIO+") because isFmsDynamicStreamingAnOption==true"),d.FMS_DYNAMIC_STREAMING_SCENARIO;i=a.getStandardFmsPlaybackScenarios();var m=i.slice(0);if(0==m.length)return k?j?(console.log("PlaybackScenarioChooser choosePlaybackScenario: NexDef wasn't preferred but returning it because no FMS options are available"),d.HLS_SCENARIO):d.HLS_SCENARIO_ONLY_AVAILABLE_BUT_USER_DOES_NOT_HAVE_SUPPORT:(console.log("PlaybackScenarioChooser choosePlaybackScenario: No FMS options available"),null);console.log("PlaybackScenarioChooser choosePlaybackScenario: Choose an FMS playbackScenario because we fell past all other options");var n=f.chooseFmsPlaybackScenario(a,m);return console.log("PlaybackScenarioChooser choosePlaybackScenario: Chose FMS (playbackScenario="+n+") because we fell past all other options"),null===n&&k?d.HLS_SCENARIO_ONLY_AVAILABLE_BUT_USER_DOES_NOT_HAVE_SUPPORT:n}catch(o){return console.log("choosePlaybackScenario: An error occurred when trying to choose a playback scenario!"),console.log("choosePlaybackScenario: "+o),null}return console.log("choosePlaybackScenario: Application error in playback selection code!"),null},f.chooseFmsPlaybackScenario=function(a,b){return"undefined"!=typeof b&&null!==b&&b instanceof Array&&0!=b.length?b[b.length]:null},f}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaselection/UserVerifiedContentHelper",["ensureArray/ensureArray","media-framework-service/enums/MediaStateEnum","video-playback-manager/vpm/models/PlaybackModel","video-playback-manager/vpm/mediaselection/BlackoutStatus","video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioChooser","video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioBitrateSet","video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioEnum","video-playback-manager/vpm/utils/PlaybackScenarioHelper","video-playback-manager/vpm/mediaselection/MediaItemSelectionManagerConstants"],b):"object"==typeof exports?module.exports=b(require("ensureArray/ensureArray"),require("media-framework-service/enums/MediaStateEnum"),require("video-playback-manager/vpm/models/PlaybackModel"),require("video-playback-manager/vpm/mediaselection/BlackoutStatus"),require("video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioChooser"),require("video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioBitrateSet"),require("video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioEnum"),require("video-playback-manager/vpm/utils/PlaybackScenarioHelper"),require("video-playback-manager/vpm/mediaselection/MediaItemSelectionManagerConstants")):a.UserVerifiedContentHelper=b(null,a.MediaStateEnum,a.PlaybackModel,a.BlackoutStatus,a.PlaybackScenarioChooser,a.PlaybackScenarioBitrateSet,a.PlaybackScenarioEnum,a.PlaybackScenarioHelper,a.MediaItemSelectionManagerConstants)}(this,function(a,b,c,d,e,f,g,h,i){"use strict";function j(a){}var k=!1;return j.prototype=$.extend(j.prototype,{}),j.selectContentById=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(b&&d.content_id.toString()===b.toString())return d}return null},j.getFirstAuthVideoContentItem=function(a,b){(null===b||"undefined"==typeof b)&&(b=!0);for(var c=null,d=0;d<a.length;d++){var e=a[d];if(e.type===i.VIDEO_TYPE){if(!b)return e;if(j.checkContentAuth(e))return e}}return c},j.hasNonBlackedOutVideo=function(b){for(var c=!1,e=0;e<b.length;e++){var f=b[e],g=a(f.user_verified_media_item);if(f.type===i.VIDEO_TYPE)for(var h=0;h<g.length;h++){var j=g[h];if(j.blackoutStatus.status()===d.SUCCESS)return!0}}return c},j.checkContentAuth=function(b,c){(null===c||"undefined"==typeof c)&&(c=!1);for(var e=!1,f=a(b.user_verified_media_item),g=0;g<f.length;g++){var h=f[g];if(h.authStatus===i.AUTH_STATUS_SUCCESS){var l=j.isMediaItemPlayable(h.media_item,k);if(l&&(!c||h.blackoutStatus.status()===d.SUCCESS))return!0}}return e},j.filterMultiAngle=function(b,c){if(console.log("UserVerifiedContentHelper filterMultiAngle: contentId="+c),b=a(b),c){var d=j.getContentItemByIdAndSubject(b,c,i.MULTI_ANGLE_SUBJECT);if(d&&d.length>0)return console.log("UserVerifiedContentHelper filterMultiAngle: content for contentId="+c+" contains subject="+i.MULTI_ANGLE_SUBJECT+" so look at the entire response"),b}console.log("UserVerifiedContentHelper filterMultiAngle: content for contentId="+c+" does not contain subject="+i.MULTI_ANGLE_SUBJECT+" so remove all content that contains a multiangle subject from the response");var e=j.getContentItemsWithoutSubject(b,i.MULTI_ANGLE_SUBJECT);return 0===e.length?b:e},j.getContentItemByIdAndSubject=function(b,c,d){var e=new Array;if(c&&d&&b){b=a(b);for(var f,g,h=0;h<b.length;h++)f=b[h],f.content_id===c&&(g=j.containsSubject(f,d),g&&e.push(f))}return e},j.getContentItemsWithoutSubject=function(b,c){var d=new Array;if(b){b=a(b);for(var e,f,g=0;g<b.length;g++)e=b[g],f=j.containsSubject(e,c),f||d.push(e)}return d},j.containsSubject=function(b,c){var d=-1;if(c&&b&&b.domainAttributes&&b.domainAttributes.subject){var e=a(b.domainAttributes.subject);d=$.inArray(c,e)}else d=-1;return-1!==d},j.isMediaItemPlayable=function(a,c){return null!==a&&"undefined"!=typeof c&&((null===c||"undefined"==typeof c)&&(c=!1),null!==a.state&&"undefined"!=typeof a.state&&(a.state===b.MEDIA_ON||a.state===b.MEDIA_ARCHIVE||c&&a.state===b.MEDIA_STAGING))?!0:!1},j.getMediaItemFromContentItem=function(l,m,n){if((null===n||"undefined"==typeof n)&&(n=!0),null==m)return console.log("UserVerifiedContentHelper getMediaItemFromContentItem: content==null so get out of here"),null;console.log("UserVerifiedContentHelper getMediaItemFromContentItem: Get MediaItem for contentId="+m.content_id+", checkBlackOut="+n);var o,p=new Array,q=0,r=0,s=0,t=0;if("undefined"!=typeof m.user_verified_media_item&&null!==m.user_verified_media_item){var u,v=a(m.user_verified_media_item),w=v.length,x=!1;console.log("UserVerifiedContentHelper getMediaItemFromContentItem: Loop over "+w+" UserVerifiedMediaItems and determine potential MediaItems to play");for(var y=0;w>y;y++)if(u=v[y],x=j.isMediaItemPlayable(u.media_item,k),n){var z=u.blackoutStatus.status()===d.SUCCESS;z&&u.authStatus===i.AUTH_STATUS_SUCCESS?(console.log("UserVerifiedContentHelper getMediaItemFromContentItem: MediaItem["+y+"] not blacked out and user is authorized"),x?h.isHlsScenario(u.media_item.playback_scenario)?(console.log("UserVerifiedContentHelper getMediaItemFromContentItem: MediaItem["+y+"] playbackScenario="+u.media_item.playback_scenario+" so isHlsScenario"),l.isHlsAvailable=!0,p.push(u.media_item.playback_scenario)):h.isFMSDynamicStreamingScenario(u.media_item.playback_scenario)?(console.log("UserVerifiedContentHelper getMediaItemFromContentItem: MediaItem["+y+"] playbackScenario="+u.media_item.playback_scenario+" so isFMSDynamicStreamingScenario"),l.isDynamicFmsAvailable=!0,p.push(u.media_item.playback_scenario)):(console.log("UserVerifiedContentHelper getMediaItemFromContentItem: MediaItem["+y+"] playbackScenario="+u.media_item.playback_scenario),l.isStandardFmsAvailable=!0,p.push(u.media_item.playback_scenario)):(console.log("UserVerifiedContentHelper getMediaItemFromContentItem: MediaItem["+y+"] not in a playable state, state="+u.media_item.state),b.MEDIA_DONE===u.media_item.state&&l.mediaDoneItemsCount++,s++)):console.log("UserVerifiedContentHelper getMediaItemFromContentItem: MediaItem["+y+"] is blacked out or user is unauthorized"),t++,u.authStatus!==i.AUTH_STATUS_SUCCESS&&r++}else if(console.log("UserVerifiedContentHelper getMediaItemFromContentItem: MediaItem["+y+"] This is the case when checkBlackOut=false"),m.type===i.VIDEO_TYPE){t++;var z=u.blackoutStatus.status()===d.SUCCESS;z||q++}}if(console.log("UserVerifiedContentHelper getMediaItemFromContentItem: videoCount="+t+", unAuthCount="+r+", unavailableCount="+s+", blackOutCount="+q+", checkBlackOut="+n),q!==t||n||(l.isTYBYBlackedOut=!0),r===t&&n&&(l.isNotAuthorized=!0),s===t&&n&&(l.isNotAvailable=!0),0!==r&&0!==s&&r+s===t&&n&&(l.isNotAvailable=!0),console.log("UserVerifiedContentHelper getMediaItemFromContentItem: There are "+p.length+" Available Playable MediaItems"),0===p.length&&n)return console.log("UserVerifiedContentHelper getMediaItemFromContentItem: everything is blacked out so return null"),null;var A=new f(p,!0),B=!1;h.containsHlsScenario(p)&&(console.log("UserVerifiedContentHelper getMediaItemFromContentItem: set isHlsAuthorized = true"),B=!0);var C=!1;h.containsFmsDynamicScenario(p)&&(console.log("UserVerifiedContentHelper getMediaItemFromContentItem: set isDynamicFmsAuthorized = true"),C=!0);var D=!0,E=c.userProfile?c.userProfile.preferStandardVideo:!1;E===!0&&(console.log("UserVerifiedContentHelper getMediaItemFromContentItem: set isHlsPreferred = false"),D=!1),console.log("UserVerifiedContentHelper getMediaItemFromContentItem: call PlaybackScenarioChooser.choosePlaybackScenario() streamSelectionState.isHlsPlaybackEnabled="+l.isHlsPlaybackEnabled+", streamSelectionState.isNativeHlsSupported="+l.isNativeHlsSupported);var F=e.choosePlaybackScenario(A,B,C,D,l.isHlsPlaybackEnabled,l.isNativeHlsSupported);console.log("UserVerifiedContentHelper getMediaItemFromContentItem: preferredPlayBack="+F),null===F?l.isNotAvailable=!0:F===g.HLS_SCENARIO_ONLY_AVAILABLE_BUT_USER_DOES_NOT_HAVE_SUPPORT&&(l.isNotAvailable=!1,l.isOnlyHlsAvailableForVideoButRequiredFlashVersionNotInstalled=!0,F=null),h.isHlsScenario(F);for(var G=0;G<v.length;G++){var H=v[G];H.media_item.playback_scenario===F&&(o=H,console.log("UserVerifiedContentHelper getMediaItemFromContentItem: Return MediaItem with playbackScenario="+F))}return o},j}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaselection/MediaSelectionMessageHelper",["video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioEnum","video-playback-manager/vpm/mediaselection/BlackoutStatus","video-playback-manager/vpm/mediaselection/MediaSelectionMessageEnum","video-playback-manager/vpm/mediaselection/MediaItemSelectionManagerConstants","video-playback-manager/vpm/utils/PlaybackScenarioHelper","video-playback-manager/vpm/mediaselection/UserVerifiedContentHelper","video-playback-manager/config/Config","ensureArray/ensureArray"],b):"object"==typeof exports?module.exports=b(require("video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioEnum"),require("video-playback-manager/vpm/mediaselection/BlackoutStatus"),require("video-playback-manager/vpm/mediaselection/MediaSelectionMessageEnum"),require("video-playback-manager/vpm/mediaselection/MediaItemSelectionManagerConstants"),require("video-playback-manager/vpm/utils/PlaybackScenarioHelper"),require("video-playback-manager/vpm/mediaselection/UserVerifiedContentHelper"),require("video-playback-manager/config/Config"),require("ensureArray/ensureArray")):a.MediaSelectionMessageHelper=b(a.PlaybackScenarioEnum,a.BlackoutStatus,a.MediaSelectionMessageEnum,a.MediaItemSelectionManagerConstants,a.PlaybackScenarioHelper,a.UserVerifiedContentHelper,a.Config,null)}(this,function(a,b,c,d,e,f,g,h){"use strict";function i(a){}var j=g.MEDIA_SELECTION_IS_BASEBALL_UX,k=g.MEDIA_SELECTION_IS_HOCKEY;return i.prototype=$.extend(i.prototype,{}),i.getFailOverReason=function(g,i){for(var l,m,n,o=!1,p=!1,q=!0,r=!1,s=!0,t=!0,u=!0,v=0;v<g.length;v++)for(var w=g[v],x=h(w.user_verified_media_item),y=0;y<x.length;y++){var z=x[y];if(w.type===d.VIDEO_TYPE){o=!0,z.authStatus===d.AUTH_STATUS_SUCCESS&&(q=!1);var A=z.blackoutStatus.status()===b.SUCCESS;z.authStatus===d.AUTH_STATUS_SUCCESS&&A&&f.isMediaItemPlayable(z.media_item,!0)?(e.isHlsScenario(z.media_item.playback_scenario)&&(l=!0),e.isFMSDynamicStreamingScenario(z.media_item.playback_scenario)&&(m=!0)):(t=!1,e.isHlsScenario(z.media_item.playback_scenario)||(u=!1)),j&&A&&(w.domainAttributes.coverage_type===d.OUT_OF_MARKET||w.domainAttributes.coverage_type===d.NATIONAL)&&(s=!1),k&&A&&(s=!1)}else w.type!==d.AUDIO_TYPE||z.media_item.playback_scenario!==a.AUDIO_SCENARIO_FMS_2009&&z.media_item.playback_scenario!==a.AUDIO_SCENARIO_FMS||(p=!0,z.authStatus===d.AUTH_STATUS_SUCCESS&&(r=!0))}return n=r&&!o?c.AUDIO_ONLY_EVENT:r&&q?c.DROPPED_AUDIO_USER:!l||m||u||s?t||!r||s?!q||r||s?c.BLACKED_OUT:c.NOT_AUTHORIZED:c.DROPPED_VIDEO_UNAVAILABLE:c.DROPPED_FMS_UNAVAILABLE},i.updateSelectionResponseMessage=function(a,b){null===a.message||"undefined"==typeof a.message?(console.log("MediaSelectionMessageHelper updateSelectionResponseMessage: SELECTION_SUCCESS because selectMediaResponse() returned selectionResponse.message==null"),a.message=c.SELECTION_SUCCESS):!b.isNotAuthorized||null!==a.mediaItem&&"undefined"!=typeof a.mediaItem?!b.isNotAvailable||null!==a.mediaItem&&"undefined"!=typeof a.mediaItem||(b.mediaDoneItemsCount>0?(console.log("MediaSelectionMessageHelper updateSelectionResponseMessage: LIVE_CONTENT_JUST_ENDED because isNotAvailable and selectionResponse.mediaItem==null and mediaDoneItemsCount>0"),a.message=c.LIVE_CONTENT_JUST_ENDED):(console.log("MediaSelectionMessageHelper updateSelectionResponseMessage: NO_CONTENT_AVAILABLE because isNotAvailable and selectionResponse.mediaItem==null and mediaDoneItemsCount<=0"),a.message=c.NO_CONTENT_AVAILABLE)):(console.log("MediaSelectionMessageHelper updateSelectionResponseMessage: NOT_AUTHORIZED because isNotAuthorized or selectionResponse.mediaItem==null"),a.message=c.NOT_AUTHORIZED)},i}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaselection/VpmMediaFrameworkResponseHelper",["ensureArray/ensureArray","video-playback-manager/vpm/mediaselection/BlackoutStatus","media-framework-service/enums/MFAuthStatus","video-playback-manager/vpm/mediaselection/MediaItemSelectionManagerConstants"],b):"object"==typeof exports?module.exports=b(require("ensureArray/ensureArray"),require("video-playback-manager/vpm/mediaselection/BlackoutStatus"),require("media-framework-service/enums/MFAuthStatus"),require("video-playback-manager/vpm/mediaselection/MediaItemSelectionManagerConstants")):a.VpmMediaFrameworkResponseHelper=b(null,a.BlackoutStatus,a.MFAuthStatus,a.MediaItemSelectionManagerConstants)}(this,function(a,b,c,d){"use strict";function e(a){}return e.prototype=$.extend(e.prototype,{}),e.updateBlackoutStatusAndAuthStatus=function(e){var f,g,h,i,j,k=e.length;for(f=0;k>f;f++){g=e[f],i=a(g.user_verified_media_item);for(h in i){j=i[h],j.blackoutStatus=new b(j.blackout_status);var l;if("object"==typeof j.auth_status)for(var m in j.auth_status)l=m;else l=j.auth_status;var n="UNKNOWN";c.isType(l,c.LOGIN_REQUIRED_STATUS)?n=d.AUTH_STATUS_LOGIN_REQUIRED:c.isType(l,c.SUCCESS_STATUS)?n=d.AUTH_STATUS_SUCCESS:c.isType(l,c.NOT_AUTHORIZED_STATUS)&&(n=d.AUTH_STATUS_NOT_AUTHORIZED),j.authStatus=n}}},e}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaselection/contentselector/AudioOnlyContentHelper",["video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioEnum","video-playback-manager/vpm/utils/PlaybackScenarioHelper","video-playback-manager/vpm/mediaselection/MediaItemSelectionManagerConstants","video-playback-manager/vpm/mediaselection/UserVerifiedContentHelper","ensureArray/ensureArray"],b):"object"==typeof exports?module.exports=b(require("video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioEnum"),require("video-playback-manager/vpm/utils/PlaybackScenarioHelper"),require("video-playback-manager/vpm/mediaselection/MediaItemSelectionManagerConstants"),require("video-playback-manager/vpm/mediaselection/UserVerifiedContentHelper"),require("ensureArray/ensureArray")):a.AudioOnlyContentHelper=b(a.PlaybackScenarioEnum,a.PlaybackScenarioHelper,a.MediaItemSelectionManagerConstants,a.UserVerifiedContentHelper,null)}(this,function(a,b,c,d,e){"use strict";function f(a){}var g=!1;return f.prototype=$.extend(f.prototype,{}),f.getAllAudioOnlyContentItems=function(a){for(var b=new Array,d=0;d<a.length;d++){var e=a[d];e.type===c.AUDIO_TYPE&&b.push(e)}return b},f.getAudioOnlyPlayableMediaItem=function(f){for(var h,i=e(f),j=0;j<i.length;j++){h=i[j];var k=h.media_item.playback_scenario;if((a.AUDIO_SCENARIO_FMS===k||a.AUDIO_SCENARIO_FMS_2009===k||b.isHlsAudioScenario(k))&&h.authStatus===c.AUTH_STATUS_SUCCESS){var l=d.isMediaItemPlayable(h.media_item,g);if(l)return h}}return null},f}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaselection/contentselector/MlbtvContentSelector",["ensureArray/ensureArray","video-playback-manager/vpm/mediaselection/UserVerifiedContentHelper","video-playback-manager/vpm/mediaselection/MediaItemSelectionManagerConstants","video-playback-manager/vpm/mediaselection/contentselector/AudioOnlyContentHelper","video-playback-manager/vpm/models/PlaybackModel"],b):"object"==typeof exports?module.exports=b(require("ensureArray/ensureArray"),require("video-playback-manager/vpm/mediaselection/UserVerifiedContentHelper"),require("video-playback-manager/vpm/mediaselection/MediaItemSelectionManagerConstants"),require("video-playback-manager/vpm/mediaselection/contentselector/AudioOnlyContentHelper"),require("video-playback-manager/vpm/models/PlaybackModel")):a.MlbtvContentSelector=b(null,a.UserVerifiedContentHelper,a.MediaItemSelectionManagerConstants,a.AudioOnlyContentHelper,a.PlaybackModel)}(this,function(a,b,c,d,e){"use strict";function f(f){function g(a){console.log("MlbtvContentSelector selectContentByBaseballCoverageAssociation: isBaseballUX so try to find a valid ContentItem using keywords");var b,d=a[0],e=d.domainAttributes.home_team_id,f=d.domainAttributes.away_team_id;console.log("MlbtvContentSelector selectContentByBaseballCoverageAssociation: homeTeam="+e+" and awayTeam="+f);var g=i(),l=k(g,f),m=k(g,e),n=[];m&&l?(console.log("MlbtvContentSelector selectContentByBaseballCoverageAssociation: homeTeam="+e+" and awayTeam="+f+" are in the user's favorite teams so prefer those teams' streams first"),n=[e,f,c.COVERAGE_ASSOCIATION_NATIONAL]):l?(console.log("MlbtvContentSelector selectContentByBaseballCoverageAssociation: awayTeam="+f+" is one of the user's favorite teams so prefer that team's stream first"),n=[f,c.COVERAGE_ASSOCIATION_NATIONAL,e]):m?(console.log("MlbtvContentSelector selectContentByBaseballCoverageAssociation: homeTeam="+e+" is one of the user's favorite teams so prefer that team's stream first"),n=[e,c.COVERAGE_ASSOCIATION_NATIONAL,f]):(console.log("MlbtvContentSelector selectContentByBaseballCoverageAssociation: home and away teams are not in the user's favorite teams so prefer the NATIONAL broadcast stream first"),n=[c.COVERAGE_ASSOCIATION_NATIONAL,e,f]);var o=0;return j(o)&&(console.log("MlbtvContentSelector selectContentByBaseballCoverageAssociation: a launchTeam="+o+" was provided so prefer that team's stream first"),n.unshift(o.toString())),b=h(a,n,!0)}function h(a,d,e){(null===e||"undefined"==typeof e)&&(e=!1),console.log("MlbtvContentSelector selectVideoContentByKeywordsCoverageAssociation: Try to find content by keywords="+d.toString());for(var f=0;f<d.length;f++)for(var g=0;g<a.length;g++){var h=a[g];if(("undefined"==typeof h.domainAttributes.coverage_association||null===h.domainAttributes.coverage_association||isNaN(parseInt(h.domainAttributes.coverage_association))||""===h.domainAttributes.coverage_association)&&(h.domainAttributes.coverage_association="0"),h.domainAttributes.coverage_association===d[f]&&h.type!==c.AUDIO_TYPE){if(!e)return h;if(b.checkContentAuth(h))return h}}return null}function i(){return e.userProfile&&e.userProfile.favoriteTeams?a(e.userProfile.favoriteTeams):new Array}function j(a){return"undefined"!=typeof a&&null!==a&&!isNaN(a)&&a>0}function k(a,b){if(a&&a.length>0)for(var c=0;c<a.length;c++)if(a[c].toString()===b)return console.log("MlbtvContentSelector isTeamInFavoriteTeams: teamId="+b+" is one of the user's favorite teams"),!0;return console.log("MlbtvContentSelector isTeamInFavoriteTeams: teamId="+b+" is not one of the user's favorite teams"),!1}function l(a){var b=[],c=i();if(null!==c&&0!==c.length){for(var d=0;d<c.length;d++){var e=o(a,c[d]);null!==e&&b.push(e)}(0===b.length||2===b.length)&&(b=n(a))}else{var f=0;j(f)?(b=m(a,f.toString()),0===b.length&&(b=n(a))):b=n(a)}return b}function m(a,b){for(var d=[],e=0;e<a.length;e++){var f=a[e];f.type===c.AUDIO_TYPE&&f.domainAttributes.coverage_association===b&&d.push(f)}return d}function n(a){for(var b=new Array,d=new Array,e=0;e<a.length;e++){var f=a[e];f.type===c.AUDIO_TYPE&&f.domainAttributes.coverage_association===f.domainAttributes.home_team_id?b.push(f):f.type===c.AUDIO_TYPE&&d.push(f)}return 0===b.length&&(b=d),b}function o(a,b){for(var d=null,e=0;e<a.length;e++){var f=a[e];f.type!==c.AUDIO_TYPE||f.domainAttributes.away_team_id!==b.toString()&&f.domainAttributes.home_team_id!==b.toString()||(d=f)}return d}this.selectContent=function(a){return g(a)},this.getAudioOnlyContentItems=function(a){return l(a)},this.getHomeAudioMediaItem=function(a){console.log("MlbtvContentSelector getHomeAudioMediaItem: Try to find audio content");for(var b,e={selectedContentItem:null,mediaItem:null},f=null,g=null,h=null,i=0;i<a.length;i++)if(b=a[i],console.log("MlbtvContentSelector getHomeAudioMediaItemInternal: contentItem["+i+"] type = "+b.type),b.type===c.AUDIO_TYPE){if(b.domainAttributes.coverage_association===b.domainAttributes.home_team_id&&b.domainAttributes.language===c.ENGLISH_LANG)return console.log("MlbtvContentSelector getHomeAudioMediaItem: contentItem["+i+"] - found audio content for the home team"),f=b,h=d.getAudioOnlyPlayableMediaItem(b.user_verified_media_item),e.selectedContentItem=f,e.mediaItem=h,e;console.log("MlbtvContentSelector getHomeAudioMediaItemInternal:  contentItem["+i+"] - found audio content not for the home team"),(null===f||"undefined"==typeof f)&&(f=b),g=d.getAudioOnlyPlayableMediaItem(b.user_verified_media_item)}return console.log("MlbtvContentSelector getHomeAudioMediaItemInternal: did not find audio content for the home team so return other audio or null"),e.selectedContentItem=f,e.mediaItem=g,e}}return f.prototype=$.extend(f.prototype,{}),f}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaselection/contentselector/nhltv/NhltvStreamSelectionConstants",[],b):"object"==typeof exports?module.exports=b():a.NhltvStreamSelectionConstants=b()}(this,function(){"use strict";function a(a){}return a.prototype=$.extend(a.prototype,{}),a.MEDIA_FEED_TYPE_HOME="HOME",a.MEDIA_FEED_TYPE_AWAY="AWAY",a.MEDIA_FEED_TYPE_NATIONAL="NATIONAL",a.MEDIA_FEED_TYPE_FRENCH="FRENCH",a.MEDIA_FEED_TYPE_ISO="ISO",a.MEDIA_FEED_TYPE_COMPOSITE="COMPOSITE",a.ISO3_LANGUAGE_ENGLISH="eng",a.ISO3_LANGUAGE_FRENCH="fra",a}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaselection/contentselector/nhltv/NhltvContentSelector",["ensureArray/ensureArray","video-playback-manager/vpm/mediaselection/UserVerifiedContentHelper","video-playback-manager/vpm/mediaselection/MediaItemSelectionManagerConstants","video-playback-manager/vpm/mediaselection/contentselector/nhltv/NhltvStreamSelectionConstants","video-playback-manager/vpm/mediaselection/contentselector/AudioOnlyContentHelper","video-playback-manager/vpm/models/PlaybackModel"],b):"object"==typeof exports?module.exports=b(require("ensureArray/ensureArray"),require("video-playback-manager/vpm/mediaselection/UserVerifiedContentHelper"),require("video-playback-manager/vpm/mediaselection/MediaItemSelectionManagerConstants"),require("video-playback-manager/vpm/mediaselection/contentselector/nhltv/NhltvStreamSelectionConstants"),require("video-playback-manager/vpm/mediaselection/contentselector/AudioOnlyContentHelper"),require("video-playback-manager/vpm/models/PlaybackModel")):a.NhltvContentSelector=b(null,a.UserVerifiedContentHelper,a.MediaItemSelectionManagerConstants,a.NhltvStreamSelectionConstants,a.AudioOnlyContentHelper,a.PlaybackModel)}(this,function(a,b,c,d,e,f){"use strict";function g(g){function h(a){console.log("NhltvContentSelector selectContentByHockeyMediaFeedType: isHockey so try to find a valid ContentItem using keywords");var b,c=a[0],d=c.domainAttributes.home_team_id,e=c.domainAttributes.away_team_id;console.log("NhltvContentSelector selectContentByHockeyMediaFeedType: homeTeam="+d+" and awayTeam="+e);var f=k(),g=l(),h=i(f.concat(g),d,e);return b=j(a,h,!0)}function i(a,b,c){var e=a.indexOf(b),f=a.indexOf(c);return 0===a.length||0>e&&0>f?(console.log("NhltvContentSelector selectContentByHockeyMediaFeedType: home and away teams are not in the user's favorite teams so prefer the NATIONAL broadcast stream first"),[d.MEDIA_FEED_TYPE_NATIONAL,d.MEDIA_FEED_TYPE_HOME,d.MEDIA_FEED_TYPE_AWAY]):0>e?(console.log("NhltvContentSelector selectContentByHockeyMediaFeedType: awayTeam="+c+" is one of the user's favorite teams so prefer that team's stream first"),[d.MEDIA_FEED_TYPE_AWAY,d.MEDIA_FEED_TYPE_NATIONAL,d.MEDIA_FEED_TYPE_HOME]):0>f?(console.log("NhltvContentSelector selectContentByHockeyMediaFeedType: awayTeam="+b+" is one of the user's favorite teams so prefer that team's stream first"),[d.MEDIA_FEED_TYPE_HOME,d.MEDIA_FEED_TYPE_NATIONAL,d.MEDIA_FEED_TYPE_HOME]):f>e?(console.log("NhltvContentSelector selectContentByHockeyMediaFeedType: homeTeam="+b+" and awayTeam="+c+" are in the user's favorite teams and home team is higher priority, so play that first"),[d.MEDIA_FEED_TYPE_HOME,d.MEDIA_FEED_TYPE_AWAY,d.MEDIA_FEED_TYPE_NATIONAL]):e>f?(console.log("NhltvContentSelector selectContentByHockeyMediaFeedType: homeTeam="+b+" and awayTeam="+c+" are in the user's favorite teams and away team is higher priority, so play that first"),[d.MEDIA_FEED_TYPE_AWAY,d.MEDIA_FEED_TYPE_HOME,d.MEDIA_FEED_TYPE_NATIONAL]):void 0}function j(a,d,e){(null===e||"undefined"==typeof e)&&(e=!1),console.log("NhltvContentSelector selectVideoContentByKeywordsMediaFeedType: Try to find content by keywords="+d.toString());for(var f=0;f<d.length;f++)for(var g=0;g<a.length;g++){var h=a[g];if(h.domainAttributes.mediaFeedType===d[f]&&h.type!==c.AUDIO_TYPE){if(!e)return h;if(b.checkContentAuth(h))return h}}return null}function k(){return f.userProfile&&f.userProfile.favoriteTeams?a(f.userProfile.favoriteTeams):new Array}function l(){return f.userProfile&&f.userProfile.follow?a(f.userProfile.follow):new Array}function m(a){var b=[],c=k();if(null!==c&&0!==c.length)for(var d=0;d<c.length;d++){var e=o(a,c[d]);null!==e&&b.push(e)}if(b.length>1&&(b=n(a)),1===b.length)return b;var f=l();if(null!==f&&0!==f.length)for(var g=0;d<f.length;g++){var e=o(a,f[g]);null!==e&&b.push(e)}return b.length>1&&(b=n(a)),1===b.length?b:b=n(a)}function n(a){for(var b=new Array,e=new Array,f=0;f<a.length;f++){var g=a[f];g.type===c.AUDIO_TYPE&&g.domainAttributes.mediaFeedType===d.MEDIA_FEED_TYPE_HOME?b.push(g):g.type===c.AUDIO_TYPE&&e.push(g)}return 0===b.length&&(b=e),
b}function o(a,b){for(var d=null,e=0;e<a.length;e++){var f=a[e];f.type===c.AUDIO_TYPE&&(f.domainAttributes.away_team_id&&f.domainAttributes.away_team_id.toString()===b.toString()||f.domainAttributes.home_team_id&&f.domainAttributes.home_team_id.toString()===b.toString())&&(d=f)}return d}this.selectContent=function(a){return h(a)},this.getAudioOnlyContentItems=function(a){return m(a)},this.getHomeAudioMediaItem=function(a){console.log("NhltvContentSelector getHomeAudioMediaItem: Try to find audio content");for(var b,f={selectedContentItem:null,mediaItem:null},g=null,h=null,i=null,j=0;j<a.length;j++)if(b=a[j],console.log("NhltvContentSelector getHomeAudioMediaItemInternal: contentItem["+j+"] type = "+b.type),b.type===c.AUDIO_TYPE){if(b.domainAttributes.mediaFeedType===d.MEDIA_FEED_TYPE_HOME&&b.domainAttributes.iso3Language===d.ISO3_LANGUAGE_ENGLISH)return console.log("NhltvContentSelector getHomeAudioMediaItem: contentItem["+j+"] - found audio content for the home team"),g=b,i=e.getAudioOnlyPlayableMediaItem(b.user_verified_media_item),f.selectedContentItem=g,f.mediaItem=i,f;console.log("NhltvContentSelector getHomeAudioMediaItemInternal:  contentItem["+j+"] - found audio content not for the home team"),(null===g||"undefined"==typeof g)&&(g=b),h=e.getAudioOnlyPlayableMediaItem(b.user_verified_media_item)}return console.log("NhltvContentSelector getHomeAudioMediaItemInternal: did not find audio content for the home team so return other audio or null"),f.selectedContentItem=g,f.mediaItem=h,f}}return g.prototype=$.extend(g.prototype,{}),g.getBlackoutOverrideData=function(a){var b;return a&&a.domainAttributes&&a.domainAttributes.network_blackout_override&&(b={},b.networkBlackoutOverride=a.domainAttributes.network_blackout_override,b.gamePk=a.domainAttributes.game_pk,b.contentId=a.content_id,b.eventId=a.domainAttributes.calendarEventId),b},g}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaselection/contentselector/StreamPriorityContentSelector",["video-playback-manager/vpm/mediaselection/UserVerifiedContentHelper"],b):"object"==typeof exports?module.exports=b(require("video-playback-manager/vpm/mediaselection/UserVerifiedContentHelper")):a.StreamPriorityContentSelector=b(a.UserVerifiedContentHelper)}(this,function(a){"use strict";function b(c){function d(c,d){(null===d||"undefined"==typeof d)&&(d=!1),console.log("StreamPriorityContentSelector selectVideoContentByStreamPriority: Try to find content by StreamPriority");for(var e,f=null,g=null,h=-1,i=0;i<c.length;i++)f=c[i],e=f.stream_priority,isNaN(e)||""===f.stream_priority?console.log("StreamPriorityContentSelector selectVideoContentByStreamPriority: stream_priority is not defined for contentId="+f.content_id):(console.log("StreamPriorityContentSelector selectVideoContentByStreamPriority: currentStreamPriority="+h+", stream_priority="+e+" for this content, contentId="+f.content_id),e>0&&(h>e||0>h)&&f.type!==b.AUDIO_TYPE&&(d?a.checkContentAuth(f,!0)&&(h=e,g=f,console.log("StreamPriorityContentSelector selectVideoContentByStreamPriority: set currentStreamPriority=stream_priority="+e+" and use contentId="+f.content_id)):(h=e,g=f,console.log("StreamPriorityContentSelector selectVideoContentByStreamPriority: set currentStreamPriority=stream_priority="+e+" and use contentId="+f.content_id))));return console.log("StreamPriorityContentSelector selectVideoContentByStreamPriority: return contentItem with streamPriority="+h),g}this.selectContent=function(a){return d(a,!0)}}return b.prototype=$.extend(b.prototype,{}),b}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaselection/contentselector/MultiAngleContentHelper",["video-playback-manager/vpm/mediaselection/MediaItemSelectionManagerConstants","video-playback-manager/vpm/mediaselection/BlackoutStatus"],b):"object"==typeof exports?module.exports=b(require("video-playback-manager/vpm/mediaselection/MediaItemSelectionManagerConstants"),require("video-playback-manager/vpm/mediaselection/BlackoutStatus")):a.MultiAngleContentHelper=b(a.MediaItemSelectionManagerConstants,a.BlackoutStatus)}(this,function(a,b){"use strict";function c(a){}return c.prototype=$.extend(c.prototype,{}),c.isContentMultiangleAndNotBlackedOut=function(c){if(c){var d=-1;c.subject&&(d=c.subject.indexOf(a.MULTI_ANGLE_SUBJECT));var e,f=ensureArray(c.user_verified_media_item),g=f[0],h=g.blackoutStatus.status()===b.SUCCESS;return h||(e=!0),d>=0&&!e?!0:!1}return!1},c}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaselection/MediaItemSelectionManager",["video-playback-manager/vpm/mediaselection/vo/StreamSelectionState","video-playback-manager/vpm/mediaselection/vo/MediaSelectionResponse","video-playback-manager/vpm/mediaselection/MediaSelectionMessageEnum","video-playback-manager/vpm/mediaselection/MediaSelectionMessageHelper","video-playback-manager/vpm/mediaselection/BlackoutStatus","video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioChooser","video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioBitrateSet","video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioEnum","video-playback-manager/vpm/utils/PlaybackScenarioHelper","video-playback-manager/config/Config","media-framework-service/enums/MFAuthStatus","video-playback-manager/vpm/models/PlaybackModel","video-playback-manager/vpm/mediaselection/MediaItemSelectionManagerConstants","video-playback-manager/vpm/mediaselection/VpmMediaFrameworkResponseHelper","video-playback-manager/vpm/mediaselection/UserVerifiedContentHelper","video-playback-manager/vpm/mediaselection/contentselector/MlbtvContentSelector","video-playback-manager/vpm/mediaselection/contentselector/nhltv/NhltvContentSelector","video-playback-manager/vpm/mediaselection/contentselector/StreamPriorityContentSelector","video-playback-manager/vpm/mediaselection/contentselector/AudioOnlyContentHelper","video-playback-manager/vpm/mediaselection/contentselector/MultiAngleContentHelper","ensureArray/ensureArray"],b):"object"==typeof exports?module.exports=b(require("video-playback-manager/vpm/mediaselection/vo/StreamSelectionState"),require("video-playback-manager/vpm/mediaselection/vo/MediaSelectionResponse"),require("video-playback-manager/vpm/mediaselection/MediaSelectionMessageEnum"),require("video-playback-manager/vpm/mediaselection/MediaSelectionMessageHelper"),require("video-playback-manager/vpm/mediaselection/BlackoutStatus"),require("video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioChooser"),require("video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioBitrateSet"),require("video-playback-manager/vpm/mediaselection/playbackscenario/PlaybackScenarioEnum"),require("video-playback-manager/vpm/utils/PlaybackScenarioHelper"),require("video-playback-manager/config/Config"),require("media-framework-service/enums/MFAuthStatus"),require("video-playback-manager/vpm/models/PlaybackModel"),require("video-playback-manager/vpm/mediaselection/MediaItemSelectionManagerConstants"),require("video-playback-manager/vpm/mediaselection/VpmMediaFrameworkResponseHelper"),require("video-playback-manager/vpm/mediaselection/UserVerifiedContentHelper"),require("video-playback-manager/vpm/mediaselection/contentselector/MlbtvContentSelector"),require("video-playback-manager/vpm/mediaselection/contentselector/nhltv/NhltvContentSelector"),require("video-playback-manager/vpm/mediaselection/contentselector/StreamPriorityContentSelector"),require("video-playback-manager/vpm/mediaselection/contentselector/AudioOnlyContentHelper"),require("video-playback-manager/vpm/mediaselection/contentselector/MultiAngleContentHelper"),require("ensureArray/ensureArray")):a.MediaItemSelectionManager=b(a.StreamSelectionState,a.MediaSelectionResponse,a.MediaSelectionMessageEnum,a.MediaSelectionMessageHelper,a.BlackoutStatus,a.PlaybackScenarioChooser,a.PlaybackScenarioBitrateSet,a.PlaybackScenarioEnum,a.PlaybackScenarioHelper,a.Config,a.MFAuthStatus,a.PlaybackModel,a.MediaItemSelectionManagerConstants,a.VpmMediaFrameworkResponseHelper,a.UserVerifiedContentHelper,a.MlbtvContentSelector,a.NhltvContentSelector,a.StreamPriorityContentSelector,a.AudioOnlyContentHelper,a.MultiAngleContentHelper,null)}(this,function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){"use strict";function v(){function f(a,e){console.log("MediaItemSelectionManager selectMediaResponse: Generate MediaSelectionResponse for mediaRequest.calendarEventId="+a.calendarEventId+", mediaRequest.contentId="+a.contentId);var f=new b,n=null,r=null,u=null;if(""!==a.contentId&&null!==a.contentId){console.log("MediaItemSelectionManager selectMediaResponse: A contentId is specified, so try to find the ContentItem for mediaRequest.contentId="+a.contentId);var w=o.selectContentById(e,a.contentId);if(null!==w){if(console.log("MediaItemSelectionManager selectMediaResponse: Found requestedContent for mediaRequest.contentId="+a.contentId+", with requestedContent.domainAttributes.coverage_type="+w.domainAttributes.coverage_type),console.log("MediaItemSelectionManager selectMediaResponse: Populating selectionResponse with ContentId Selected, requestedContent.content_id="+w.content_id),f.contentId=w.content_id,f.features=w.features,x){var A=w.domainAttributes.coverage_type;A===m.IN_MARKET&&(f.isInMarket=!0)}f.mediaType=w.type,w.type===m.VIDEO_TYPE?(console.log("MediaItemSelectionManager selectMediaResponse: Fetch VIDEO MediaItem for contentId="+f.contentId),f.mediaItem=o.getMediaItemFromContentItem(z,w)):(console.log("MediaItemSelectionManager selectMediaResponse: Fetch AUDIO MediaItem for contentId="+f.contentId),f.mediaItem=s.getAudioOnlyPlayableMediaItem(w.user_verified_media_item))}if(null!==f.mediaItem)return console.log("MediaItemSelectionManager selectMediaResponse: We found a valid MediaItem so return selectionResponse"),f;if(y&&(console.log("MediaItemSelectionManager selectMediaResponse: We did not find a valid MediaItem so set message before we try to find another contentItem"),w&&(u=q.getBlackoutOverrideData(w))),x){var B=t.isContentMultiangleAndNotBlackedOut(w);if(B)return console.log("MediaItemSelectionManager selectMediaResponse: Multiangle Content is Available so return selectionResponse"),f}console.log("MediaItemSelectionManager selectMediaResponse: We did not find a valid mediaItem for the contentId so keep trying to find a valid MediaItem (as if contentId wasn't passed in)")}else console.log("MediaItemSelectionManager selectMediaResponse: A contentId is not specified, so try to find the best available content");if(console.log("MediaItemSelectionManager selectMediaResponse: mediaRequest.mediaType="+a.mediaType),(""===a.mediaType||null===a.mediaType||"undefined"==typeof a.mediaType)&&(o.hasNonBlackedOutVideo(e)?a.mediaType=m.VIDEO_TYPE:a.mediaType=m.AUDIO_TYPE,console.log("MediaItemSelectionManager selectMediaResponse: mediaRequest.mediaType was not specified so set it to "+a.mediaType)),a.mediaType===m.AUDIO_TYPE){if(console.log("MediaItemSelectionManager selectMediaResponse: mediaType==audio so try to find a valid Audio-only MediaItem"),a.mediaType!==m.VIDEO_TYPE){console.log("MediaItemSelectionManager selectMediaResponse: mediaType!=video (meaning it's audio) so try to find audioContentItem");var C=[];if(x){var D=new p;C=D.getAudioOnlyContentItems(e)}else if(y){var E=new q;C=E.getAudioOnlyContentItems(e),C&&0!==C.length||(C=s.getAllAudioOnlyContentItems(e))}else C=s.getAllAudioOnlyContentItems(e);var F=null;if(null!==F?(console.log("MediaItemSelectionManager selectMediaResponse: use getAudioResponseByLanguage() to find audioContentItem for language="+m.SPANISH_LANG),f=g(e,C,F)):(console.log("MediaItemSelectionManager selectMediaResponse: use getAudioResponseByLanguage() to find audioContentItem for language="+m.ENGLISH_LANG),f=g(e,C,m.ENGLISH_LANG)),null===f.mediaItem||"undefined"==typeof f.mediaItem)if(console.log("MediaItemSelectionManager selectMediaResponse: If there's no English this will just grab first available audio content if that exists"),C.length>0){var G=C[0];f.contentId=G.content_id,f.features=G.features,x&&G.domainAttributes.coverage_type===m.IN_MARKET&&(f.isInMarket=!0),f.mediaType=G.type,f.mediaItem=G.user_verified_media_item[0],f.mediaItem&&f.mediaItem.authStatus===m.AUTH_STATUS_NOT_AUTHORIZED&&(f.message=c.NOT_AUTHORIZED,f.mediaItem=null)}else f.message=c.NOT_AUTHORIZED;return console.log("MediaItemSelectionManager selectMediaResponse: Audio Select: Selected ContentID"+r.content_id),f.networkBlackoutOverride=u,f}console.log("MediaItemSelectionManager selectMediaResponse: mediaType==video so try to find gdAuthorizedContent --- FIXME XXX WHAT IS THIS IF doing inside the other IF?!?!?!");var H=h(e);if(null!==H&&(console.log("MediaItemSelectionManager selectMediaResponse: Found Audio-only Content, gdAuthorizedContent.content_id="+H.content_id+", with gdAuthorizedContent.domainAttributes.coverage_type="+H.domainAttributes.coverage_type),f.contentId=H.content_id,f.features=H.features,x&&H.domainAttributes.coverage_type===m.IN_MARKET&&(f.isInMarket=!0),f.mediaType=H.type,console.log("MediaItemSelectionManager selectMediaResponse: Fetch MediaItem for contentId="+f.contentId),f.mediaItem=o.getMediaItemFromContentItem(z,H)),null!==f.mediaItem)return f.networkBlackoutOverride=u,f;if(console.log("MediaItemSelectionManager selectMediaResponse: MediaItem not found so use default audio response"),f=i(e,c.SELECTION_SUCCESS),null!==f.mediaItem)return f.networkBlackoutOverride=u,f;f=new b,f.message=c.UPSELL_VIDEO,console.log("MediaItemSelectionManager selectMediaResponse: Video Item with only GD Audio Entitlement - sending to Upsell")}else if(a.mediaType===m.VIDEO_TYPE){console.log("MediaItemSelectionManager selectMediaResponse: mediaType==video so try to find a valid Video ContentItem");var I=k(e);if(I){if(console.log("MediaItemSelectionManager selectMediaResponse: Try to find a valid ContentItem from In-Market pool of content"),n=l(e),null!==n&&(console.log("MediaItemSelectionManager selectMediaResponse: Found In-Market Content, inMarketContent.content_id="+n.content_id+", with inMarketContent.domainAttributes.coverage_type="+n.domainAttributes.coverage_type),console.log("MediaItemSelectionManager selectMediaResponse: Populating selectionResponse with ContentId Selected, inMarketContent.content_id="+n.content_id),f.contentId=n.content_id,f.features=n.features,x&&n.domainAttributes.coverage_type===m.IN_MARKET&&(f.isInMarket=!0),f.mediaType=n.type,console.log("MediaItemSelectionManager selectMediaResponse: Fetch MediaItem for contentId="+f.contentId),f.mediaItem=o.getMediaItemFromContentItem(z,n),null!==f.mediaItem||z.isNotAuthorized||z.isNotAvailable?(console.log("MediaItemSelectionManager selectMediaResponse: MediaItem found so set selectionResponse.isInMarket = true"),f.isInMarket=!0):(console.log("MediaItemSelectionManager selectMediaResponse: MediaItem not found so use default audio response"),f=i(e,c.BLACKED_OUT))),null===n||null===f.mediaItem&&(z.isNotAuthorized||z.isNotAvailable)){console.log("MediaItemSelectionManager selectMediaResponse: Didn't find an In-Market ContentItem, so check for available audio");var J=d.getFailOverReason(e,n);J!==c.NOT_AUTHORIZED?(console.log("MediaItemSelectionManager selectMediaResponse: call defaultAudioResponse("+J+")"),f=i(e,J)):(console.log("MediaItemSelectionManager selectMediaResponse: set selectionResponse.message="+J),f.message=J)}return f.networkBlackoutOverride=u,f}if(console.log("MediaItemSelectionManager selectMediaResponse: Try to find a valid ContentItem from Out Of Market pool of content"),x&&(e=j(e)),r=v(e),null!==r&&"undefined"!=typeof r)console.log("MediaItemSelectionManager selectMediaResponse: Found video content using keywords or just first authenticated video item, selectedContent.content_id="+r.content_id+", with selectedContent.domainAttributes.coverage_type="+r.domainAttributes.coverage_type),console.log("MediaItemSelectionManager selectMediaResponse: Populating selectionResponse with ContentId Selected, selectedContent.content_id="+r.content_id),f.contentId=r.content_id,f.features=r.features,x&&r.domainAttributes.coverage_type===m.IN_MARKET&&(f.isInMarket=!0),f.mediaType=r.type,console.log("MediaItemSelectionManager selectMediaResponse: Fetch MediaItem for contentId="+f.contentId),f.mediaItem=o.getMediaItemFromContentItem(z,r),console.log("MediaItemSelectionManager selectMediaResponse: selectionResponse.mediaItem="+f.mediaItem+", _streamSelectionState.isNotAuthorized="+z.isNotAuthorized+", _streamSelectionState.isNotAvailable="+z.isNotAvailable),null!==f.mediaItem||z.isNotAuthorized||z.isNotAvailable?(console.log("MediaItemSelectionManager selectMediaResponse: MediaItem has been found, the user is not authorized for the stream, or stream is not available"),null===f.mediaItem?(console.log("MediaItemSelectionManager selectMediaResponse: MediaItem was not found"),f.message=d.getFailOverReason(e,r)):(z.isNotAuthorized||z.isNotAvailable)&&console.log("MediaItemSelectionManager selectMediaResponse: the user is not authorized for the stream or stream is not available")):z.isOnlyHlsAvailableForVideoButRequiredFlashVersionNotInstalled?(console.log("MediaItemSelectionManager selectMediaResponse: MediaItem not found so use default audio response -- display HLS_ONLY_AVAILABLE message because _streamSelectionState.isOnlyHlsAvailableForVideoButRequiredFlashVersionNotInstalled=true"),f=i(e,c.HLS_ONLY_AVAILABLE,c.HLS_ONLY_AVAILABLE_NO_AUDIO_FALLBACK)):(console.log("MediaItemSelectionManager selectMediaResponse: MediaItem not found so use default audio response -- display BLACKED_OUT message because _streamSelectionState.isOnlyHlsAvailableForVideoButRequiredFlashVersionNotInstalled=false"),f=i(e,c.BLACKED_OUT));else{console.log("MediaItemSelectionManager selectMediaResponse: Didn't find ContentItem with keywords");var K=d.getFailOverReason(e,r);K!==c.NOT_AUTHORIZED?(console.log("MediaItemSelectionManager selectMediaResponse: MediaItem not found so use default audio response"),f=i(e,K)):(console.log("MediaItemSelectionManager selectMediaResponse: set selectionResponse.message="+K),f.message=K)}return f.networkBlackoutOverride=u,f}return f.networkBlackoutOverride=u,f}function g(a,c){console.log("MediaItemSelectionManager getAudioResponseByLanguage: language="+c);for(var d=new b,e=null,f=0;f<a.length;f++){e=a[f];var g=s.getAudioOnlyPlayableMediaItem(e.user_verified_media_item);if(null!==g&&g.authStatus===m.AUTH_STATUS_SUCCESS){if(c&&e.domainAttributes.language===c){d.contentId=e.content_id,d.features=e.features,x&&e.domainAttributes.coverage_type===m.IN_MARKET&&(d.isInMarket=!0),d.mediaType=e.type,d.mediaItem=g;break}d.contentId=e.content_id,d.features=e.features,x&&e.domainAttributes.coverage_type===m.IN_MARKET&&(d.isInMarket=!0),d.mediaType=e.type,d.mediaItem=g}}return d}function h(a){for(var b=null,c=0;c<a.length;c++){var d=a[c];if(d.type===m.VIDEO_TYPE){if(d.domainAttributes.coverage_type===CoverageTypeEnum.NATIONAL)return b=d;isNaN(Number(d.domainAttributes.coverage_association))&&(d.domainAttributes.coverage_association="0"),d.domainAttributes.coverage_association===d.domainAttributes.home_team_id?b=d:null===b&&(b=d)}}return b}function i(a,d,e){console.log("MediaItemSelectionManager defaultAudioResponse: Try to find audio content, message="+d);var f=null,g=new b;if(x){var h=new p,i=h.getHomeAudioMediaItem(a);g.mediaItem=i.mediaItem,f=i.selectedContentItem}else if(y){var j=new q,i=j.getHomeAudioMediaItem(a);g.mediaItem=i.mediaItem,f=i.selectedContentItem}return null!==g.mediaItem&&"undefined"!=typeof g.mediaItem?(g.contentId=f.content_id,g.features=f.features,f.domainAttributes.coverage_type===m.IN_MARKET&&(g.isInMarket=!0),g.mediaType=f.type,g.message=d):g.message=null===e||"undefined"==typeof e?c.BLACKED_OUT_NO_AUDIO:e,g}function j(a){for(var b=new Array,c=0;c<a.length;c++){var d=a[c];(d.domainAttributes.coverage_type===m.OUT_OF_MARKET||d.domainAttributes.coverage_type===m.NATIONAL||w)&&b.push(d)}return b}function k(a){var b=!0;if(w)return!1;for(var c=0;c<a.length;c++){var d=a[c];if(d.type===m.VIDEO_TYPE&&(!d.domainAttributes.coverage_type||d.domainAttributes.coverage_type===m.OUT_OF_MARKET))for(var f=u(d.user_verified_media_item),g=0;g<f.length;g++){var h=f[g],i=h.blackoutStatus.status()===e.SUCCESS;if(i&&h.authStatus===m.AUTH_STATUS_SUCCESS)return!1}}return b}function l(a){for(var b=null,c=0;c<a.length;c++){var d=a[c];if(d.type===m.VIDEO_TYPE&&d.domainAttributes.coverage_type===m.IN_MARKET)for(var f=u(d.user_verified_media_item),g=0;g<f.length;g++){var h=f[g];if(h.blackoutStatus.status()===e.SUCCESS)return d}}return b}function v(a){var b;if(x){console.log("MediaItemSelectionManager selectContentBySpecialRules: isBaseballUX so try to find a valid Baseball ContentItem");var c=new p;b=c.selectContent(a)}else if(y){console.log("MediaItemSelectionManager selectContentBySpecialRules: isHockey so try to find a valid Hockey ContentItem");var d=new q;b=d.selectContent(a),(null===b||"undefined"==typeof b)&&(console.log("MediaItemSelectionManager selectContentBySpecialRules: no content found by preferred method, try to grab the first available video"),b=o.getFirstAuthVideoContentItem(a))}else{var e=!1;if(e){console.log("MediaItemSelectionManager selectContentBySpecialRules: isBaseballUX==false so try to get the first valid video ContentItem by StreamPriority that is not blacked out");var f=new r;b=f.selectContent(a)}(null===b||"undefined"==typeof b)&&(console.log("MediaItemSelectionManager selectContentBySpecialRules: isBaseballUX==false so try to get the first valid video ContentItem"),b=o.getFirstAuthVideoContentItem(a))}return b}var z=new a;this.selectMediaItem=function(a,b,c,e,g,h){z.isHlsPlaybackEnabled="undefined"!=typeof g&&g===!0,z.isNativeHlsSupported="undefined"!=typeof h&&h===!0;var i={calendarEventId:b,contentId:c,mediaType:e},j=u(a.user_verified_content);x&&(j=o.filterMultiAngle(j,i.contentId)),n.updateBlackoutStatusAndAuthStatus(j),z.isNotAuthorized=!1,z.isNotAvailable=!1,z.isOnlyHlsAvailableForVideoButRequiredFlashVersionNotInstalled=!1,z.isHlsAvailable=!1,z.isDynamicFmsAvailable=!1,z.isStandardFmsAvailable=!1,z.mediaDoneItemsCount=0,console.log("MediaItemSelectionManager selectMediaItem: Select MediaItem for Event from MediaRequest with calendarEventId="+b);var k;return k=f(i,j),null===k||"undefined"==typeof k||"undefined"==typeof k.message?void console.log("MediaItemSelectionManager selectMediaItem: ERROR: selectMediaResponse() returned an undefined selectionResponse for calendarEventId="+b):(console.log("MediaItemSelectionManager selectMediaItem: selectMediaResponse() returned selectionResponse with message="+k.message+" for calendarEventId="+b),d.updateSelectionResponseMessage(k,z),console.log("MediaItemSelectionManager selectMediaItem: selectionResponse.message="+k.message+" for calendarEventId="+b),k.isHlsAvailable=z.isHlsAvailable,k.isDynamicFmsAvailable=z.isDynamicFmsAvailable,k.isStandardFmsAvailable=z.isStandardFmsAvailable,(null===k.mediaItem||"undefined"==typeof k.mediaItem)&&k.mediaType===m.VIDEO_TYPE,k)}}var w=j.MEDIA_SELECTION_DISABLE_BLACKOUT_LOGIC,x=j.MEDIA_SELECTION_IS_BASEBALL_UX,y=j.MEDIA_SELECTION_IS_HOCKEY;return v.prototype=$.extend(v.prototype,{}),v}),define("video-playback-manager/vpm/models/MediaCatalog",["require","exports","module","bindable/jquery.bindable","video-playback-manager/vpm/mediaselection/MediaItemSelectionManager","video-playback-manager/vpm/mediaselection/MediaSelectionMessageEnum","ensureArray/ensureArray"],function(a,b,c){function d(a){function b(){console.log("MediaCatalog logMediaCatalogData: isAuthorized="+c.mediaCatalogResponse.isAuthorized+", isNotBlackedOut="+c.mediaCatalogResponse.isNotBlackedOut)}var c=this;this.mediaCatalogResponse=a,this.mediaServiceVO=this.mediaCatalogResponse.mediaServiceVO,this.profile=this.mediaCatalogResponse.profile,b(),this.calendarEventId=this.mediaCatalogResponse.calendarEventId,this.performMediaSelection=function(a,b,d){console.log("MediaCatalog performMediaSelection:");var g=a.calendar_event_id?a.calendar_event_id:null,h=a.content_id?a.content_id:null,i=a.type?a.type:"video";console.log("MediaCatalog performMediaSelection: calendarEventId="+g+", requestedContentId="+h+", mediaType="+i);var j=new e,k=f(c.mediaCatalogResponse.mediaServiceVO.user_verified_event)[0],l=j.selectMediaItem(k,g,h,i,b,d);return l}}var e=(a("bindable/jquery.bindable"),a("video-playback-manager/vpm/mediaselection/MediaItemSelectionManager")),f=(a("video-playback-manager/vpm/mediaselection/MediaSelectionMessageEnum"),a("ensureArray/ensureArray"));return d.prototype={mediaCatalogResponse:null},d}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaframework/CatalogVideoAuthenticator",["logger/ClassLogger","bindable/jquery.bindable","auth-media-gateway/AuthenticatedMediaGateway","video-playback-manager/config/Config","video-playback-manager/vpm/utils/PlaybackScenarioHelper","video-playback-manager/vpm/VideoMessage","video-playback-manager/vpm/models/MediaCatalog","bandwagon/bandwagon"],b):"object"==typeof exports?module.exports=b(require("logger/ClassLogger"),require("bindable/jquery.bindable"),require("auth-media-gateway/AuthenticatedMediaGateway"),require("video-playback-manager/config/Config"),require("video-playback-manager/vpm/utils/PlaybackScenarioHelper"),require("video-playback-manager/vpm/VideoMessage"),require("video-playback-manager/vpm/models/MediaCatalog"),require("bandwagon/bandwagon")):a.CatalogVideoAuthenticator=b(a.ClassLogger,null,a.AuthenticatedMediaGateway,a.Config,a.PlaybackScenarioHelper,a.VideoMessage,a.MediaCatalog,null)}(this,function(a,b,c,d,e,f,g,h){"use strict";function i(e){this._instanceNumber=++j,this._logger=new a("CatalogVideoAuthenticator_"+this._instanceNumber),this._logger.log("constructor: instanceNumber="+this._instanceNumber);var f=e.env,g=e.mediaFramework,i=e.amg;window.location.search.indexOf("qa")>=0?f="qaweb1":window.location.search.indexOf("beta")>=0?f="betaweb1":window.location.search.indexOf("prod")>=0&&(f="prodweb1");var k,l=!1;k&&"IE"==k.browserName&&k.browserVersion<10&&(l=!0);var m="prodweb1"===f?d.SECURE_SUB_DOMAIN_PROD:"betaweb1"===f?d.SECURE_SUB_DOMAIN_BETA:d.SECURE_SUB_DOMAIN_QA,n=m+d.SECURE_DOMAIN_DEFAULT,o="qaweb1"===f?d.MEDIA_FRAMEWORK_SUB_DOMAIN_QA:d.MEDIA_FRAMEWORK_SUB_DOMAIN_PROD,p=o+d.MEDIA_FRAMEWORK_DOMAIN_DEFAULT,q={secureHost:"undefined"!=typeof g.secureDomain?g.secureDomain:n,frameworkURL:"undefined"!=typeof g.mediaFrameworkDomain?g.mediaFrameworkDomain:p,frameworkEndPoint:"undefined"!=typeof g.mediaFrameworkEndPoint?g.mediaFrameworkEndPoint:null,bypassLogin:"undefined"!=typeof i.bypassLogin?i.bypassLogin:l,format:"undefined"!=typeof g.format?g.format:null};this._amg=new c,this._amg.configure(q);var r,s,t=[],u="#video-player";r=h.getInstanceByKey(u),s=h.getRegisteredEventsByKey("AUTH_MEDIA_EVENTS"),this.addEventListeners=function(){var a=this;t.push({dispatcher:r,event:s.LOGIN_CHALLENGE,"function":$.proxy(a.handleLoginChallenge,a)}),t.push({dispatcher:r,event:s.LOGIN_SUCCESS,"function":$.proxy(a.handleLoginSuccess,a)}),t.push({dispatcher:r,event:s.LOGIN_ERROR,"function":$.proxy(a.handleLoginError,a)}),t.push({dispatcher:r,event:s.MEDIA_CATALOG_SUCCESS,"function":$.proxy(a.handleMediaCatalogSuccess,a)}),t.push({dispatcher:r,event:s.MEDIA_CATALOG_ERROR,"function":$.proxy(a.handleMediaCatalogError,a)}),t.push({dispatcher:r,event:s.MEDIA_CATALOG_NOT_AUTHORIZED,"function":$.proxy(a.handleMediaCatalogNotAuthorized,a)}),t.push({dispatcher:r,event:s.MEDIA_AVS_REQUIRED,"function":$.proxy(a.handleMediaCatalogAVSRequired,a)});var b,c,d=t.length;for(b=0;d>b;b++)c=t[b],c.dispatcher.on(c.event,c["function"])},this.removeEventListeners=function(){var a,b,c=t.length;for(a=0;c>a;a++)b=t[a],b.dispatcher.off(b.event,b["function"])},this.addEventListeners(),b(this)}var j=0;return i.prototype={_instanceNumber:0,_logger:null,_amg:null,requestMediaCatalog:function(a){this._logger.log("requestMediaCatalog:"),this._amg.requestMediaCatalog(a)},handleMediaCatalogSuccess:function(a){this._logger.log("handleMediaCatalogSuccess: create new MediaCatalog from mediaCatalogResponse"),this.removeEventListeners();var b=new g(a);this.trigger(i.EVENT_MEDIA_CATALOG_SUCCESS,b)},handleMediaCatalogError:function(a){this._logger.log("handleMediaCatalogError:"),this.removeEventListeners();var b=a.code,c=a.msg;this.showMediaError("mediaNotAvailable",c+" : "+b)},handleMediaCatalogNotAuthorized:function(a){this._logger.log("handleMediaCatalogNotAuthorized:"),this.removeEventListeners();var b=new g(a);this.trigger(i.EVENT_MEDIA_CATALOG_NOT_AUTHORIZED,b)},handleMediaCatalogAVSRequired:function(a){this._logger.log("handleMediaCatalogAVSRequired:"),this.removeEventListeners(),this.trigger(i.EVENT_MEDIA_CATALOG_AVS_REQUIRED)},handleLoginChallenge:function(a){this._logger.log("handleLoginChallenge:"),this.removeEventListeners(),this.trigger(i.EVENT_LOGIN_CHALLENGE)},handleLoginSuccess:function(a){this._logger.log("handleLoginSuccess:"),this.removeEventListeners()},handleLoginError:function(a){this._logger.log("handleLoginError:"),this.removeEventListeners();window.location;window.location.replace("/enterworkflow.do?flowId=account.login&t="+(new Date).getTime()+"&forwardUrl="+window.location.href)},showMediaError:function(a,b){this._logger.log("showMediaError:"),this.removeEventListeners();var c="";f.error(a,b,c)}},i.EVENT_MEDIA_CATALOG_SUCCESS="MEDIA_CATALOG_SUCCESS",i.EVENT_MEDIA_CATALOG_NOT_AUTHORIZED="EVENT_MEDIA_CATALOG_NOT_AUTHORIZED",i.EVENT_MEDIA_CATALOG_AVS_REQUIRED="EVENT_MEDIA_CATALOG_AVS_REQUIRED",i.EVENT_LOGIN_CHALLENGE="EVENT_LOGIN_CHALLENGE",i}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/loader/MediaCatalogLoader",["logger/ClassLogger","bindable/jquery.bindable","bandwagon/bandwagon","video-playback-manager/config/Config","auth-media-gateway/subclasses/AuthenticatedMediaParams","video-playback-manager/vpm/VideoMessage","video-playback-manager/vpm/events/VPMEvents","video-playback-manager/vpm/models/AudioOnlyDisplayVO","video-playback-manager/vpm/mediaframework/CatalogVideoAuthenticator","video-playback-manager/vpm/models/PlaybackModel"],b):"object"==typeof exports?module.exports=b(require("logger/ClassLogger"),require("bindable/jquery.bindable"),require("bandwagon/bandwagon"),require("video-playback-manager/config/Config"),require("auth-media-gateway/subclasses/AuthenticatedMediaParams"),require("video-playback-manager/vpm/VideoMessage"),require("video-playback-manager/vpm/events/VPMEvents"),require("video-playback-manager/vpm/models/AudioOnlyDisplayVO"),require("video-playback-manager/vpm/mediaframework/CatalogVideoAuthenticator"),require("video-playback-manager/vpm/models/PlaybackModel")):a.MediaCatalogLoader=b(a.ClassLogger,null,null,a.Config,a.AuthenticatedMediaParams,a.VideoMessage,a.VPMEvents,a.AudioOnlyDisplayVO,a.CatalogVideoAuthenticator,a.PlaybackModel)}(this,function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a){function d(a,b){l.log("onMediaCatalogSuccess:");var d=b.calendarEventId;if(!d)return l.error("onMediaCatalogSuccess: returned MediaCatalog is missing calendarEventId, so we cannot proceed"),void m.showMediaError("invalidCalendarEventId");var e=j.getMediaItemFromCalendarEventId(d);e.mediaCatalog=b;var f=m._config.container||"#video-player",h=c.getInstanceByKey(f);h.publish(g.MEDIA_CATALOG_RESPONSE,b),$(m).trigger(k.EVENT_MEDIA_CATALOG_SUCCESS,b)}function e(a){l.log("onLoginChallenge:"),$(m).trigger(k.EVENT_LOGIN_CHALLENGE)}function f(a,b){m.authorized=!1,$(m).trigger(k.EVENT_MEDIA_CATALOG_NOT_AUTHORIZED,b)}function h(){m.showMediaError("avsCheck"),$(m).trigger(k.EVENT_MEDIA_CATALOG_AVS_REQUIRED)}var m=this;this._config=a,b(this),this.setupVideoAuthenticator=function(){null===this.catalogAuthenticator&&(this.catalogAuthenticator=new i(this._config),this.catalogAuthenticator.bind(i.EVENT_MEDIA_CATALOG_SUCCESS,d),this.catalogAuthenticator.bind(i.EVENT_LOGIN_CHALLENGE,e),
this.catalogAuthenticator.bind(i.EVENT_MEDIA_CATALOG_NOT_AUTHORIZED,f),this.catalogAuthenticator.bind(i.EVENT_MEDIA_CATALOG_AVS_REQUIRED,h))}}var l=new a("MediaCatalogLoader");return k.prototype={_config:{},catalogAuthenticator:null,loadMediaCatalog:function(a){l.log("loadMediaCatalog:"),this.currentPlaylistItem=a,this.setupVideoAuthenticator();var b=new e;b.event_id=a.calendar_event_id;var c=this._config.mediaFramework,f=c&&"undefined"!=typeof c.mediaFrameworkParams&&"undefined"!=typeof c.mediaFrameworkParams.eventCatalog?c.mediaFrameworkParams.eventCatalog:d.MEDIA_FRAMEWORK_PARAMS;this.addParamsFromObject(f,b),this.catalogAuthenticator.requestMediaCatalog(b)},addParamsFromObject:function(a,b){if(a&&b)for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])},showMediaError:function(a,b){l.log("showMediaError:");var c="";f.error(a,b,c)}},k.EVENT_MEDIA_CATALOG_SUCCESS="EVENT_MEDIA_CATALOG_SUCCESS",k.EVENT_MEDIA_CATALOG_NOT_AUTHORIZED="EVENT_MEDIA_CATALOG_NOT_AUTHORIZED",k.EVENT_MEDIA_CATALOG_AVS_REQUIRED="EVENT_MEDIA_CATALOG_AVS_REQUIRED",k.EVENT_LOGIN_CHALLENGE="EVENT_LOGIN_CHALLENGE",k}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediacatalog/MediaCatalogContentItemSelector",["logger/ClassLogger","bindable/jquery.bindable","video-playback-manager/vpm/VideoMessage","video-playback-manager/vpm/mediaselection/MediaSelectionMessageEnum","video-playback-manager/vpm/utils/PlaybackScenarioHelper","video-playback-manager/vpm/models/PlaybackModel"],b):"object"==typeof exports?module.exports=b(require("logger/ClassLogger"),require("bindable/jquery.bindable"),require("video-playback-manager/vpm/VideoMessage"),require("video-playback-manager/vpm/mediaselection/MediaSelectionMessageEnum"),require("video-playback-manager/vpm/utils/PlaybackScenarioHelper"),require("video-playback-manager/vpm/models/PlaybackModel")):a.MediaCatalogContentItemSelector=b(a.ClassLogger,null,null,a.MediaSelectionMessageEnum,a.PlaybackScenarioHelper,a.PlaybackModel)}(this,function(a,b,c,d,e,f){"use strict";function g(a){function i(a,b){switch(h.log("displayMessage: mediaSelectionResponseMessage="+a+", networkBlackoutOverrideData=",b),a){case d.DROPPED_AUDIO_USER:j();break;case d.DROPPED_FMS_UNAVAILABLE:case d.DROPPED_VIDEO_UNAVAILABLE:k();break;case d.NOT_AUTHORIZED:j();break;case d.BLACKED_OUT:l(b);break;case d.BLACKED_OUT_NO_AUDIO:m(b)}}function j(){c.error("accountUpgrade")}function k(){c.error("droppedToAudioMessage")}function l(a){n("blackout",a)}function m(a){n("blackoutNoAudio",a)}function n(a,b){if(b&&b.networkBlackoutOverride){var d={key:"rogersBlackoutPassOverride",networkBlackoutOverride:b.networkBlackoutOverride,gamePk:b.gamePk,contentId:b.contentId,eventId:b.eventId};c.showBlackout(d)}else c.error(a)}var o=this;b(this),this.performMediaSelectionAndPlayContentProxy=function(a,b){performMediaSelectionAndPlayContent(a,b)},this.performMediaSelectionAndPlayContent=function(a,b){h.log("performMediaSelectionAndPlayContent:");var c=b.calendar_event_id?b.calendar_event_id:null,j=f.getMediaItemFromCalendarEventId(c),k=null;if(a){var l=j.considerHlsPlayback&&!j.hlsErrorHasOccurred,m=f.flashPlayerVersionSupportsHls;k=a.performMediaSelection(b,l,m)}if(null===k||"undefined"==typeof k)return void h.log("performMediaSelectionAndPlayContent: mediaSelectionResponse==null so we have a major issue here!");if(i(k.message,k.networkBlackoutOverride),null===k.mediaItem||"undefined"==typeof k.mediaItem)return void(k.message==d.NOT_AUTHORIZED?(h.log("performMediaSelectionAndPlayContent: TODO user not authorized to watch stream, so redirect to the Product Chooser"),$(o).trigger(g.EVENT_CONTENT_ITEM_NOT_AUTHORIZED)):h.log("performMediaSelectionAndPlayContent: TODO Error selecting stream, so dispatch an event to display proper messaging"));h.log("performMediaSelectionAndPlayContent: Got a valid mediaSelectionResponse so evaluate it for In-Market properties, mediaSelectionResponse.isInMarket="+k.isInMarket),k.isInMarket;var n=k.mediaItem.media_item.playback_scenario;j.currentPlaybackScenario=n;var p=k.contentId;e.isPlaybackScenarioHls(n)&&f.flashPlayerVersionSupportsAltAudio,b.altAudioOverlay;h.log("performMediaSelectionAndPlayContent: attempt to play calendarEventId="+c+", contentId="+p+", playbackScenario="+n),$(o).trigger(g.EVENT_CONTENT_ITEM_SELECTED,{contentId:k.contentId,playbackScenario:n})}}var h=new a("MediaCatalogContentItemSelector");return g.prototype=$.extend(g.prototype,{}),g.EVENT_CONTENT_ITEM_SELECTED="CONTENT_ITEM_SELECTED",g.EVENT_CONTENT_ITEM_NOT_AUTHORIZED="EVENT_CONTENT_ITEM_NOT_AUTHORIZED",g}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaitem/mediacliploader/MFEventClipLoader",["logger/ClassLogger","bindable/jquery.bindable","jsoop/oop/Inheritance","video-playback-manager/vpm/mediaitem/mediacliploader/AbstractMediaClipLoader","video-playback-manager/vpm/mediaitem/mediacliploader/MediaItemClipLoaderEventEnum","video-playback-manager/vpm/mediaitem/data/MediaItemType","video-playback-manager/vpm/loader/MediaCatalogLoader","video-playback-manager/vpm/mediacatalog/MediaCatalogContentItemSelector"],b):"object"==typeof exports?module.exports=b(require("logger/ClassLogger"),require("bindable/jquery.bindable"),require("jsoop/oop/Inheritance"),require("video-playback-manager/vpm/mediaitem/mediacliploader/AbstractMediaClipLoader"),require("video-playback-manager/vpm/mediaitem/mediacliploader/MediaItemClipLoaderEventEnum"),require("video-playback-manager/vpm/mediaitem/data/MediaItemType"),require("video-playback-manager/vpm/loader/MediaCatalogLoader"),require("video-playback-manager/vpm/mediacatalog/MediaCatalogContentItemSelector")):a.MFEventClipLoader=b(a.ClassLogger,null,a.Inheritance,a.AbstractMediaClipLoader,a.MediaItemClipLoaderEventEnum,a.MediaItemType,a.MediaCatalogLoader,a.MediaCatalogContentItemSelector)}(this,function(a,b,c,d,e,f,g,h){"use strict";function i(a){b(this),i.prototype["super"].constructor.call(this,a)}var j=new a("MFEventClipLoader");return c.inherit(i,d,{currentMediaItem:null,getMediaClip:function(a){j.log("getMediaClip:"),this.currentMediaItem=a;var b=a.playMediaRequestObject;j.log("getMediaClip: mediaRequest.calendar_event_id = "+b.calendar_event_id+" so use MediaCatalogLoader");var c=new g(this.config);this.addCatalogEventListeners(c),c.loadMediaCatalog(b)},selectAndPlayBackContent:function(a){var b=this.currentMediaItem;b.resetErrorCounters(),b.currentPlaybackScenarioPreferenceList=this.config.preferredPlaybackScenarios.slice();var c=b.currentPlaylistItem,d=this,e=new h(this.config);e.bind(h.EVENT_CONTENT_ITEM_SELECTED,function(a,b){d.onContentItemSelected(a,b)}),e.bind(h.EVENT_CONTENT_ITEM_NOT_AUTHORIZED,function(a,b){d.onLoginChallenge(a,b)}),e.performMediaSelectionAndPlayContent(a,c)},addCatalogEventListeners:function(a){var b=this;a&&(a.bind(g.EVENT_MEDIA_CATALOG_SUCCESS,function(a,c){b.onMediaCatalogSuccess(a,c)}),a.bind(g.EVENT_LOGIN_CHALLENGE,function(a,c){b.onLoginChallenge(a,c)}),a.bind(g.EVENT_MEDIA_CATALOG_NOT_AUTHORIZED,function(a,c){b.onMediaCatalogNotAuthorized(a,c)}))},onMediaCatalogSuccess:function(a,b){j.log("onMediaCatalogSuccess:"),$(this).trigger(e.MEDIA_CATALOG_AUTHORIZED),this.selectAndPlayBackContent(b)},onContentItemSelected:function(a,b){j.log("onContentItemSelected:");var c=b.contentId,d=b.playbackScenario;this.currentMediaItem.content_id=c,this.currentMediaItem.currentPlaybackScenario=d,$(this).trigger("playContentFromEventSelection",this.currentMediaItem)},onLoginChallenge:function(a,b){j.log("onLoginChallenge:"),$(this).trigger(e.MEDIA_ITEM_LOGIN_CHALLENGE,this.currentMediaItem)},onMediaCatalogNotAuthorized:function(a,b){j.log("onMediaCatalogNotAuthorized:"),this.selectAndPlayBackContent(b),$(this).trigger(e.MEDIA_CATALOG_UNAUTHORIZED)}}),i}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/clip/UrlMediaClip",[],b):"object"==typeof exports?module.exports=b():a.UrlMediaClip=b()}(this,function(){"use strict";function a(){}return a.prototype=$.extend(a.prototype,{path:null,totalFailures:0,isHighlight:!1,content_id:void 0,startTimeOffset:-1}),a}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaitem/mediacliploader/UrlMediaItemLoader",["logger/ClassLogger","bindable/jquery.bindable","jsoop/oop/Inheritance","video-playback-manager/vpm/mediaitem/mediacliploader/AbstractMediaClipLoader","video-playback-manager/vpm/clip/UrlMediaClip","video-playback-manager/vpm/mediaitem/mediacliploader/MediaItemClipLoaderEventEnum"],b):"object"==typeof exports?module.exports=b(require("logger/ClassLogger"),require("bindable/jquery.bindable"),require("jsoop/oop/Inheritance"),require("video-playback-manager/vpm/mediaitem/mediacliploader/AbstractMediaClipLoader"),require("video-playback-manager/vpm/clip/UrlMediaClip"),require("video-playback-manager/vpm/mediaitem/mediacliploader/MediaItemClipLoaderEventEnum")):a.UrlMediaItemLoader=b(a.ClassLogger,null,a.Inheritance,a.AbstractMediaClipLoader,a.UrlMediaClip,a.MediaItemClipLoaderEventEnum)}(this,function(a,b,c,d,e,f){"use strict";function g(a){b(this),g.prototype["super"].constructor.call(this,a)}var h=new a("UrlMediaItemLoader");return c.inherit(g,d,{getMediaClip:function(a){h.log("getMediaClip:");var b=a.playMediaRequestObject,c=new e;c.path=b.path,c.isHighlight=a.isHighlight,c.duration=a.duration,c.startTimeOffset=a.startTimeOffset,a.currentPlaylistItem&&a.currentPlaylistItem.content_id&&(c.content_id=a.currentPlaylistItem.content_id),a.clip=c,$(this).trigger(f.MEDIA_ITEM_CLIP_SET,a)}}),g}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaitem/mediacliploader/MediaItemClipLoaderFactory",["logger/ClassLogger","video-playback-manager/vpm/mediaitem/data/MediaItem","video-playback-manager/vpm/mediaitem/data/MediaItemType","video-playback-manager/vpm/mediaitem/mediacliploader/MetadataClipLoader","video-playback-manager/vpm/mediaitem/mediacliploader/MFContentClipLoader","video-playback-manager/vpm/mediaitem/mediacliploader/MFEventClipLoader","video-playback-manager/vpm/mediaitem/mediacliploader/UrlMediaItemLoader","video-playback-manager/vpm/models/PlaybackModel"],b):"object"==typeof exports?module.exports=b(require("logger/ClassLogger"),require("video-playback-manager/vpm/mediaitem/data/MediaItem"),require("video-playback-manager/vpm/mediaitem/data/MediaItemType"),require("video-playback-manager/vpm/mediaitem/mediacliploader/MetadataClipLoader"),require("video-playback-manager/vpm/mediaitem/mediacliploader/MFContentClipLoader"),require("video-playback-manager/vpm/mediaitem/mediacliploader/MFEventClipLoader"),require("video-playback-manager/vpm/mediaitem/mediacliploader/UrlMediaItemLoader"),require("video-playback-manager/vpm/models/PlaybackModel")):a.MediaItemClipLoaderFactory=b(a.ClassLogger,a.MediaItem,a.MediaItemType,a.MetadataClipLoader,a.MFContentClipLoader,a.MFEventClipLoader,a.UrlMediaItemLoader,a.PlaybackModel)}(this,function(a,b,c,d,e,f,g,h){"use strict";function i(){}var j=new a("MediaItemClipLoaderFactory");return i.prototype=$.extend(i.prototype,{getMediaClipLoader:function(a,b){var h=a.playMediaRequestObject;if("undefined"==typeof h.content_id&&"undefined"==typeof h.calendar_event_id)return j.log("getMediaClipLoader: TODO Major Error! calendar_event_id and/or content_id not provided"),null;var i=null,k=a.type;switch(j.log("getMediaClipLoader: mediaItemType = "+k),k){case c.SIMPLE_URL:i=new g(b);break;case c.METADATA_FILE:i=new d(b);break;case c.METADATA_FILE_AUTH_REQUIRED:case c.MEDIA_FRAMEWORK_CONTENT:i=new e(b);break;case c.MEDIA_FRAMEWORK_EVENT_CONTENT:i=new f(b)}return i}}),new i}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaitem/MediaItemManager",["logger/ClassLogger","bindable/jquery.bindable","bandwagon/bandwagon","intent-registry/IntentRegistry","video-playback-manager/vpm/events/VPMEvents","video-playback-manager/vpm/mediaitem/mediacliploader/MediaItemClipLoaderFactory","video-playback-manager/vpm/mediaitem/mediacliploader/MediaItemClipLoaderEventEnum","video-playback-manager/vpm/mediaitem/data/MediaItemType","video-playback-manager/vpm/mediaitem/data/MediaItem","video-playback-manager/vpm/models/PlaybackModel"],b):"object"==typeof exports?module.exports=b(require("logger/ClassLogger"),require("bindable/jquery.bindable"),require("bandwagon/bandwagon"),require("intent-registry/IntentRegistry"),require("video-playback-manager/vpm/events/VPMEvents"),require("video-playback-manager/vpm/mediaitem/mediacliploader/MediaItemClipLoaderFactory"),require("video-playback-manager/vpm/mediaitem/mediacliploader/MediaItemClipLoaderEventEnum"),require("video-playback-manager/vpm/mediaitem/data/MediaItemType"),require("video-playback-manager/vpm/mediaitem/data/MediaItem"),require("video-playback-manager/vpm/models/PlaybackModel")):a.MediaItemManager=b(a.ClassLogger,null,null,a.IntentRegistry,a.VPMEvents,a.MediaItemClipLoaderFactory,a.MediaItemClipLoaderEventEnum,a.MediaItemType,a.MediaItem,a.PlaybackModel)}(this,function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a){b(this),this._mediaPlayer=a}var l=new a("MediaItemManager");return k.prototype=$.extend(k.prototype,{_vpmConfig:{},_mediaPlayer:null,_errorManager:null,mediaClipLoader:null,dispatcher:void 0,init:function(a){l.log("init:"),this._vpmConfig=a;var b=this._vpmConfig.container||"#video-player";this.dispatcher=c.getInstanceByKey(b)},setErrorManager:function(a){this._errorManager=a},playMediaItem:function(a){l.log("playMediaItem: mediaItem = ",a),this._addMediaItemToModel(a),this.removeEventListeners(this.mediaClipLoader);var b=f.getMediaClipLoader(a,this._vpmConfig);l.log("playMediaItem: mediaClipLoader = ",b),b&&(this.addEventListeners(b),b.player=this._mediaPlayer.videoPlayer,b.getMediaClip(a)),this.mediaClipLoader=b},_addMediaItemToModel:function(a){l.log("_addMediaItemToModel:");var b=a.playMediaRequestObject,c="undefined"!=typeof b.calendar_event_id?!0:!1,d=c?b.calendar_event_id:b.content_id;j.addMediaItem(d,a)},_getDispatcher:function(){var a=this._vpmConfig.container||"#video-player",b=c.getInstanceByKey(a);return b},addEventListeners:function(a){var b=this;a.bind(g.MEDIA_ITEM_CLIP_SET,function(a,c){b.onMediaItemClipSet(a,c)}),a.bind(g.MEDIA_FRAMEWORK_REQUIRED,function(a,c){b.onMediaFrameworkRequired(a,c)}),a.bind(g.MEDIA_ITEM_ERROR,function(a,c){b.onMediaItemError(a,c)}),a.bind(g.MEDIA_ITEM_LOGIN_CHALLENGE,function(a,c){b.onMediaItemLoginChallenge(a,c)}),a.bind(g.MEDIA_CATALOG_UNAUTHORIZED,function(a,c){b.onMediaCatalogUnauthorized(a,c)}),a.bind(g.MEDIA_CATALOG_AUTHORIZED,function(a,c){b.onMediaCatalogAuthorized(a,c)}),a.bind(g.MEDIA_ITEM_UNAUTHORIZED,function(a,c){b.onMediaCatalogUnauthorized(a,c)}),a.bind("playContentFromEventSelection",function(a,c){b.onPlayContentFromEventSelection(a,c)})},removeEventListeners:function(a){a&&a.unbind()},onMediaItemClipSet:function(a,b){l.log("onMediaItemClipSet:");var c=b.clip;c.totalFailures=b.totalFailures,b.audioOnlyDisplayVO&&(c.audioOnlyDisplayVO=b.audioOnlyDisplayVO),this._mediaPlayer.playMediaClip(c),$(this).trigger(g.MEDIA_ITEM_CLIP_SET,c)},onMediaFrameworkRequired:function(a,b){l.log("onMediaFrameworkRequired: metadata says auth flow required, which means we need to hit MF for this content"),b.type=h.METADATA_FILE_AUTH_REQUIRED,this.playMediaItem(b)},onMediaItemError:function(a,b){l.log("onMediaItemError:");var c=this._errorManager.handleErrorAndRetry(b);c||this._getDispatcher().publish(e.ERROR_MEDIAITEM)},onMediaItemLoginChallenge:function(a,b){l.log("onMediaItemLoginChallenge:"),this.dispatcher.publish(e.LOGIN_CHALLENGE),this.dispatcher.publish(e.USER_UNAUTHORIZED)},onMediaCatalogAuthorized:function(a,b){this.dispatcher.publish(e.USER_AUTHORIZED)},onMediaCatalogUnauthorized:function(a,b){this.dispatcher.publish(e.USER_UNAUTHORIZED,b)},onPlayContentFromEventSelection:function(a,b){l.log("onPlayContentFromEventSelection:"),b.type=h.MEDIA_FRAMEWORK_CONTENT,this.playMediaItem(b)}}),k}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/utils/VideoUtils",["lodash/lodash","device/device","flashobject/flashobject"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("device/device"),require("flashobject/flashobject")):a.VideoUtils=b(a._,a.deviceBootstrap,null)}(this,function(a,b,c){"use strict";function d(){var a={},b=document.createElement("video")||!1;return a.html5=b&&"undefined"!=typeof b.canPlayType,a.mp4=a.html5&&("maybe"===b.canPlayType("video/mp4")||"probably"===b.canPlayType("video/mp4")),a.ogg=a.html5&&("maybe"===b.canPlayType("video/ogg")||"probably"===b.canPlayType("video/ogg")),a.flash=function(a){return c.hasFlashPlayerVersion(a)},a.mse=e(),a}function e(){var a="WebKitMediaSource"in window,b="MediaSource"in window;try{a?new WebKitMediaSource:b&&new MediaSource}catch(c){a=b=!1}return a||b}var f=b(),g={getPlayerTypeByDevice:function(b){var c="",e=d();if(f.is.desktop){var g=!a.get(b,"videoPlayers.desktop.preferHTML5Player",!1)&&e.flash(a.get(b,"flash.flashVersion","5000.0.0.0"));g?(c=a.get(b,"videoPlayers.desktop.playerTypeOverride.flash",""),c||(c=a.get(b,"flash.multiview",!1)?"MultiViewFlashPlayer":"FlashPlayer")):c=a.get(b,"videoPlayers.desktop.playerTypeOverride.html","HTML5Player")}else c=f.is.phone?a.get(b,"videoPlayers.phone.playerTypeOverride.html","HTML5Player"):f.is.tablet?a.get(b,"videoPlayers.tablet.playerTypeOverride.html","HTML5Player"):"HTML5Player";return c},debounce:function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},browserNativelySupportsHls:function(a){a=a||f;var b=!1;if(a.is.desktop)"safari"===a.browser&&(b=!0);else if(a.is.phone||a.is.tablet){if(a.is.ios)return!0;if(a.is.android)return!0}return b},setDeviceMgr:function(a){f=a?a:b()},getVideoSupport:d,is:{desktop:function(){return f.is.desktop}}};return g}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/overlays/BaseOverlay",["lodash/lodash","bam-video-players/events/PlayerEvents"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/events/PlayerEvents")):a.BaseOverlay=b(a.lodash,a.PlayerEvents)}(this,function(a,b){function c(a,b){this.id=this.getId(b.id),this.config=a,this.isVisible=!1,this.isEnabled()?(d.call(this,b),this.log("Using Default")):this.log("Using Custom Loading")}function d(a){this.player=a,this.uiHelper=this.createUIHelper(a.id),e.call(this),this.addBoundFxns(),this.addListeners(this.player.dispatcher),this.modelUpdated()}function e(){this.boundFxns={onPlayerLoaded:f.bind(this)}}function f(a){var b=a.player.$container;this.$overlay=this.uiHelper.getHTMLElement(b),this.log("onPlayerLoaded. Div added",a.player.id)}return c.prototype={constructor:c,addBoundFxns:function(){},isEnabled:function(){return!0},getId:function(a){return"BaseOverlay."+a},createUIHelper:function(a){throw new Error("createUIHelper needs to be overridden")},addListeners:function(a){a.on(b.PLAYER_LOADED,this.boundFxns.onPlayerLoaded)},removeListeners:function(a){a.off(b.PLAYER_LOADED,this.boundFxns.onPlayerLoaded)},modelUpdated:function(){},hide:function(){this.isEnabled()&&(this.log("hide"),this.isVisible=!1,this.modelUpdated.call(this),this.uiHelper&&this.uiHelper.hide())},show:function(){this.isEnabled()&&(this.log("show"),this.isVisible=!0,this.modelUpdated.call(this),this.uiHelper&&this.uiHelper.show())},destroy:function(){this.$overlay&&(this.log("destroy",this.$overlay),this.removeListeners(this.player.dispatcher),this.$overlay.remove())},log:function(){var a="["+this.id+"]";console.log(a,Array.prototype.slice.call(arguments).join(" "))}},c}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/overlays/messages/MessageUIHelper",["jquery","lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash")):a.MessageUIHelper=b(a.jQuery,a._)}(this,function(a,b){"use strict";function c(a){this.playerName=a,this.eventNames={CLOSE_MESSAGE_PANEL:"closeMessagePanel"}}function d(){console.log("[MessageUIHelper]",Array.prototype.slice.call(arguments).join(" "))}function e(){console.warn("[MessageUIHelper]",Array.prototype.slice.call(arguments).join(" "))}return c.prototype.getHTMLElement=function(b){try{var c=this.playerName+"-video-player-messages",d=c+"-wrapper",f="alert-message-text";this.closeButtonID=this.playerName+"-message-close-btn";var g="<button id='"+this.closeButtonID+"' class='alert-close'>";g+='<svg id="x-svg" viewBox="0 0 100 100" class="svg-btn"><path d="M100 78.905L78.735 100 49.608 71.094 21.263 99.217 0 78.123 28.344 50 0 21.877 21.263.78l28.345 28.125L78.735 0 100 21.094 70.862 50z"></path>',g+="</button>";var h="<div class='"+f+"' id='"+c+"'></div>",i="<div class='alert warning' id='"+d+"'>"+g+h+"</div>";b.append(i),this.$messsages=a("#"+c),this.$overlay=a("#"+d);var j=this.$overlay,k=this;return a("#"+this.closeButtonID).on("click",function(){a(k).triggerHandler(k.eventNames.CLOSE_MESSAGE_PANEL)}),this.hide(),j}catch(l){e("Error creating Message div",l)}},c.prototype.addListener=function(b,c){a(this).on(b,c)},c.prototype.hide=function(){this.$overlay&&this.$overlay.hide()},c.prototype.show=function(){this.$overlay&&this.$overlay.show()},c.prototype.showMessageQueue=function(a){try{if(!this.$overlay)return;var c="";b.forEach(a,function(a){c+="<li>"+a+"</li>"}),this.$messsages.html(c),b.size(c)>0?(d("addMessage",c),this.show()):this.hide()}catch(f){e("Error adding Messages",f)}},c}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/overlays/messages/MessageOverlay",["lodash/lodash","bam-video-players/overlays/BaseOverlay","bam-video-players/events/PlayerEvents","bam-video-players/overlays/messages/MessageUIHelper"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/overlays/BaseOverlay"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/overlays/messages/MessageUIHelper")):a.MessageOverlay=b(a.lodash,a.BaseOverlay,a.PlayerEvents,a.MessageUIHelper)}(this,function(a,b,c,d){function e(a,b){this.messageQueue=[],e.prototype["super"].constructor.call(this,a,b),this.isEnabled()&&this.uiHelper&&this.uiHelper.addListener(this.uiHelper.eventNames.CLOSE_MESSAGE_PANEL,h.bind(this))}function f(){this.messageQueue=[],this.modelUpdated()}function g(b){this.log("onShowError",b.message),this.messageQueue.push(a.get(b,"message","unknown error occured")),this.modelUpdated()}function h(){this.hide()}return e.prototype=Object.create(b.prototype),e.prototype.constructor=e,e.prototype["super"]=b.prototype,e.prototype.getId=function(a){return"MessageOverlay."+a},e.prototype.addBoundFxns=function(){this.boundFxns.onShowError=g.bind(this)},e.prototype.isEnabled=function(){return a.get(this.config,"html5.useDefaultMessaging",!0)},e.prototype.createUIHelper=function(a){return new d(a)},e.prototype.addListeners=function(a){e.prototype["super"].addListeners.call(this,a),a.on(c.MEDIA_ERROR,this.boundFxns.onShowError),a.on(c.DEVELOPER_ERROR,this.boundFxns.onShowError)},e.prototype.removeListeners=function(a){this.log("removeListeners",a),e.prototype["super"].removeListeners.call(this,a),a.off(c.MEDIA_ERROR,this.boundFxns.onShowError),a.off(c.DEVELOPER_ERROR,this.boundFxns.onShowError)},e.prototype.modelUpdated=function(){this.isEnabled()&&this.uiHelper&&this.uiHelper.showMessageQueue(this.messageQueue)},e.prototype.hide=function(){f.call(this),e.prototype["super"].hide.call(this)},e}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/overlays/loading/LoadingUIHelper",["jquery","lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash")):a.LoadingUIHelper=b(a.jQuery,a._)}(this,function(a,b){"use strict";function c(a){this.playerName=a}function d(){console.warn("[LoadingUIHelper]",Array.prototype.slice.call(arguments).join(" "))}return c.prototype.getHTMLElement=function(b){try{var c="video-player-loader",e=c+" "+this.playerName+"-"+c;e+=" player-media-spinner player-media-spinner--medium player-media-spinner--dark";var f="<div class='"+e+"' ></div>",g="<div class='player-loader-container player-loader-container--dark player-loader-container-"+this.playerName+"'>"+f+"</div>";return b.append(g),this.$overlay=a(".player-loader-container-"+this.playerName),this.hide(),this.$overlay}catch(h){d("Error creating Loading div",h)}},c.prototype.hide=function(){this.$overlay&&this.$overlay.hide()},c.prototype.show=function(){this.$overlay&&this.$overlay.show()},c}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/overlays/loading/LoadingOverlay",["lodash/lodash","bam-video-players/overlays/BaseOverlay","bam-video-players/events/PlayerEvents","bam-video-players/overlays/loading/LoadingUIHelper"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/overlays/BaseOverlay"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/overlays/loading/LoadingUIHelper")):a.LoadingOverlay=b(a.lodash,a.BaseOverlay,a.PlayerEvents,a.LoadingUIHelper)}(this,function(a,b,c,d){function e(a,b){e.prototype["super"].constructor.call(this,a,b)}return e.prototype=Object.create(b.prototype),e.prototype.constructor=e,e.prototype["super"]=b.prototype,e.prototype.getId=function(a){return"LoadingOverlay."+a},e.prototype.addBoundFxns=function(){this.boundFxns.onShow=this.show.bind(this),this.boundFxns.onHide=this.hide.bind(this)},e.prototype.createUIHelper=function(a){return new d(a)},e.prototype.addListeners=function(a){e.prototype["super"].addListeners.call(this,a),a.on(c.OVERLAY_LOADING_SHOW,this.boundFxns.onShow),a.on(c.OVERLAY_LOADING_HIDE,this.boundFxns.onHide),a.on(c.MEDIA_ERROR,this.boundFxns.onHide)},e.prototype.removeListeners=function(a){e.prototype["super"].removeListeners.call(this,a),a.off(c.OVERLAY_LOADING_SHOW,this.boundFxns.onShow),a.off(c.OVERLAY_LOADING_HIDE,this.boundFxns.onHide),a.off(c.MEDIA_ERROR,this.boundFxns.onHide)},e}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/events/UserEvents",["bandwagon/bandwagon"],b):"object"==typeof exports?module.exports=b(require("bandwagon/bandwagon")):a.UserEvents=b(a.Bandwagon)}(this,function(a){var b={PLAY_REQUESTED:"play_requested",PAUSE_REQUESTED:"pause_requested",ADJUST_VOLUME_REQUESTED:"adjust_volume_requested",ADJUST_BITRATE_THRESHOLD_REQUESTED:"adjust_bitrate_threshold_requested",CLOSED_CAPTIONS_TOGGLE_REQUESTED:"closed_captions_toggle_requested",GOTO_START_REQUESTED:"goto_start_requested",MUTE_REQUESTED:"mute_requested",REWIND_REQUESTED:"rewind_requested",FASTFORWARD_REQUESTED:"fastforward_requested",LIVE_REQUESTED:"live_requested",SEEK_STARTED:"seek_started",SEEK_REQUESTED:"seek_requested",SEEK_ENDED:"seek_ended",TOGGLE_FULL_SCREEN_REQUESTED:"toggle_full_screen_requested",TOGGLE_DEBUG_PANEL:"toggleDebugPanel",UNMUTE_REQUESTED:"unmute_requested",TOUCHEND:"touch_end",WINDOW_RESIZE:"window_resize"};return a.registerEvents("USER_EVENTS",b),b}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/valueObjects/BitrateWindowVO",["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):a.BitrateWindowVO=b(a.jQuery)}(this,function(a){"use strict";function b(a,b,c){this.minBitrateKbps=a||-1,this.maxBitrateKbps=b||-1,this.initialBitrateKbps=c||-1}return b.prototype=a.extend(b.prototype,{isInWindow:function(a){return a>=this.minBitrateKbps&&a<=this.maxBitrateKbps},toString:function(){return"BitrateWindowVO: ["+this.minBitrateKbps+","+this.maxBitrateKbps+"] - initialBitrateKbps="+this.initialBitrateKbps}}),b}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/helpers/MediaMetricsManager",["lodash/lodash","device/device","bam-video-players/events/PlayerEvents","bam-video-players/valueObjects/BitrateWindowVO"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("device/device"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/valueObjects/BitrateWindowVO")):a.MediaMetricsManager=b(a.lodash,a.Device,a.PlayerEvents,a.BitrateWindowVO)}(this,function(a,b,c,d){function e(){var a={};return a.environment=f(),a.build=g(),a.property=h(),a.player=i(),a.clipMetaValues={},a.clipMetaObjects={},a.stream=j(),a.state=k(),a.metrics=l(),a.ads=m(),a}function f(){return{OS:"",browser:"",formFactor:"",lastUpdated:"",pollingInterval:0}}function g(){return{timestamp:"",packageVersion:""}}function h(){return{name:"",conviva:""}}function i(){return{type:"",client:"",version:""}}function j(){return{isLive:"",isSlidingWindow:"",hasCC:""}}function k(){return{buffer:{initTimeInSecs:"",playbackTimeInSecs:""},bitrateWindow:a.assign({},new d),startTimeOffset:"",blackoutKeyword:""}}function l(){return{currentBitrate:"",currentBitrateProfile:"",timeCode:"",seekableRange:""}}function m(){return{inAdBreak:"",isAdPlaying:""}}function n(){return{}}function o(a){p(a.environment)}function p(a){var c=new b,d=" ",e=c.platform+d+c.platformVersion,f=c.browser+d+c.browserVersion,g=c.formFactor;a.OS=e,a.browser=f,a.formFactor=g}function q(b){var c=function(b){a.forEach(b,function(d,e){a.isObject(d)?c(d):b[e]=a.upperFirst(e)})};c(b),b.build.packageVersion="App Version",b.build.timestamp="Build Timestamp"}function r(b,c){var d="---";try{if(b){c.environment.lastUpdated=(new Date).toISOString();var e=b.playerStateHelper;c.ads.isAdPlaying=b.ads.adIsPlaying(),c.ads.inAdBreak=d,c.build.timestamp=d,c.build.packageVersion=d,c.metrics.currentBitrate=b.bitrates.getCurrentKbps(),c.metrics.currentBitrateProfile=b.bitrates.getCurrentProfile(),c.metrics.timeCode=d,c.metrics.seekableRange=b.getSeekableRange();var f=b.getPlayerInfo();c.player.type=f.type,c.player.client=f.videoClientType,c.player.version=f.videoClientVersion,c.property.name=d,c.property.conviva=d,c.state.bitrateWindow=b.bitrates.getBitrateWindow(),c.state.buffer.initTimeInSecs=d,c.state.buffer.playbackTimeInSecs=d,c.state.startTimeOffset=d,c.state.blackoutKeyword=d;var g=e.getState("clip");a.forEach(g,function(b,d){a.isObject(b)?c.clipMetaObjects[d]=b:c.clipMetaValues[d]=b}),c.stream.hasCC=b.captions.hasCaptions(),c.stream.isLive=b.state.isLive(),c.stream.isSlidingWindow=b.state.isSlidingWindow()}}catch(h){if(this._internals.ignoreErrors||console.log("[MediaMetricsManager] ("+this.id+") Error:",h),this._internals.throwErrors)throw h}}var s=function(b,c){this.id=b,this._internals={player:c,dispatcher:a.get(c,"dispatcher")},this.data=e(),this.meta={labels:e(),desc:e()},this.api=n(),o(this.data),q(this.meta.labels)};return s.prototype.toString=function(){return JSON.stringify(this.data,null,4)},s.prototype.update=function(){return r.call(this,this._internals.player,this.data),this._internals.dispatcher.publish(c.STREAM_METRICS_UPDATED,{player:this._internals.player,mediaMetrics:this.data}),this.data},s.prototype.schedule=function(a){this.unschedule(),this._internals.intervalID=setInterval(this.update.bind(this),a),this.data.environment.pollingInterval=a},s.prototype.unschedule=function(){this.data.environment.pollingInterval=0,this._internals.intervalID&&clearInterval(this._internals.intervalID)},s}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/overlays/debug/DebugUIHelper",["jquery","lodash/lodash","bam-video-players/players/helpers/MediaMetricsManager"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("bam-video-players/players/helpers/MediaMetricsManager")):a.DebugUIHelper=b(a.jQuery,a._,a.MediaMetricsManager)}(this,function(a,b,c){"use strict";function d(a,b,c){this.playerName=a,this.stateModel=b,this.filterModel=c,this.eventNames={POLLING_INTERVAL_CHANGED:"pollingIntervalChanged",DISABLE_POLLING:"disablePolling",CLOSE_DEBUG_PANEL:"closeDebugPanel",DISPATCH_MEDIA_ERROR:"dispatchMediaError"},this.settingsOpen=!1}function e(){var b=this;
a("#"+this.closeButtonID).on("click",function(){a(b).triggerHandler(b.eventNames.CLOSE_DEBUG_PANEL)}),a("#"+this.settingsButtonID).on("click",function(){b.settingsOpen?(b.$controls.addClass("hide"),b.settingsOpen=!1):(b.$controls.removeClass("hide"),b.settingsOpen=!0)})}function f(){var b=this.$polling.val();a(this).triggerHandler(this.eventNames.POLLING_INTERVAL_CHANGED,[b])}function g(){console.warn("[DebugUIHelper]",Array.prototype.slice.call(arguments).join(" "))}return d.prototype.getHTMLElement=function(b){try{var c=this.playerName+"-video-player-debugPanel",d=c+"-wrapper",f="debug-message-text";this.controlsName=this.playerName+"-debug-controls",this.closeButtonID=this.playerName+"-debug-close-btn",this.settingsButtonID=this.playerName+"-debug-settings-btn";var h="<div class='debug-controls hide' id='"+this.controlsName+"'></div>",i="<textArea class='"+f+"' id='"+c+"' wrap='off' ></textArea>",j="<button id='"+this.closeButtonID+"' class='debug-btn'>";j+='<svg id="x-svg" viewBox="0 0 100 100" class="svg-btn"><path d="M100 78.905L78.735 100 49.608 71.094 21.263 99.217 0 78.123 28.344 50 0 21.877 21.263.78l28.345 28.125L78.735 0 100 21.094 70.862 50z"></path>',j+="</button>";var k="<button id='"+this.settingsButtonID+"' class='debug-btn'>";k+='<svg id="gear-icon-svg" class="svg-btn" viewBox="0 0 100 100" >',k+='<path d="M87.687 45.077c-.313-2.433-.816-4.807-1.542-7.079l8.145-11.73-5.827-7.515-.094-.123-5.824-7.514-12.955 5.577c-2.041-1.265-4.192-2.362-6.459-3.219L59.42 0H40.586l-3.709 13.474c-2.27.857-4.421 1.955-6.463 3.222l-12.957-5.577-5.825 7.514-.097.124-5.822 7.517 8.146 11.731a39.832 39.832 0 0 0-1.544 7.079L0 52.032l2.08 9.375.033.15 2.08 9.375 14.001.761a39.157 39.157 0 0 0 4.4 5.668l-2.396 14.227 8.416 4.173.138.067L37.169 100l9.309-10.796c1.161.109 2.335.173 3.524.173s2.358-.074 3.52-.184l9.317 10.804 8.415-4.173.141-.066 8.413-4.172-2.396-14.228a39.06 39.06 0 0 0 4.4-5.672l14-.759 2.078-9.375.035-.154L100 52.025l-12.313-6.948zM50.003 34.51c8.435 0 15.272 7.035 15.272 15.719 0 8.679-6.839 15.717-15.272 15.717-8.436 0-15.272-7.038-15.272-15.717 0-8.684 6.838-15.719 15.272-15.719z"></path>',k+="</svg></button>";var l="<div class='debug-buttons-container'>"+k+j+"</div>",m="<div class='debug background' id='"+d+"'>"+i+h+l+"</div>";return b.append(m),this.$messsages=a("#"+c),this.$controls=a("#"+this.controlsName),this.$overlay=a("#"+d),this.addControls(this.filterModel),this.stateModel.isVisible?this.show():this.hide(),e.call(this),this.$overlay}catch(n){g("Error creating Debug div",n)}},d.prototype.addControls=function(d){var e=new c("meta");b.keys(e.data);this.$controls.empty();var g=this,h=this.playerName+"-debug-polling-interval",i="<div id='debug-polling'>Polling Interval <input id='"+h+"' value='1000' /> ms</div>";i+="Filters:",this.$controls.append(i),this.$polling=a("#"+h),this.$polling.on("keyup",function(){f.call(g)});var j=this.playerName+"-filter-debug-ck";b.forEach(d,function(a,b){var c="";c+="<div class='filter-debug'>";var d=b+"-cb";c+="<input id='"+d+"' class='"+j+"' type='checkbox' value='"+b+"'",c+=a?" checked>":">",c+=b,c+="</div>",g.$controls.append(c)}.bind(this)),a("."+j).on("click",function(){var b=a(this),c=b.prop("value"),d=b.prop("checked");g.filterModel[c]=d,g.showDebugData.call(g,g.data)}),this.mediaErrorButtonID=this.playerName+"-media-error-btn";var k="<input id='"+this.mediaErrorButtonID+"' name='"+this.mediaErrorButtonID+"' class='media-error-btn' value='MEDIA_ERROR' type='button'>";this.$controls.append(k),a("#"+this.mediaErrorButtonID).on("click",function(){a(g).triggerHandler(g.eventNames.DISPATCH_MEDIA_ERROR)})},d.prototype.hide=function(){this.$overlay&&(a(this).triggerHandler(this.eventNames.DISABLE_POLLING),this.$overlay.hide())},d.prototype.show=function(){this.$overlay&&(this.$overlay.show(),f.call(this))},d.prototype.showDebugData=function(a){this.data=a;var c=this;try{if(!this.$overlay)return;var d=b.pickBy(a,function(a,d){return b.get(c.filterModel,d)}),e=JSON.stringify(d,null,2);this.$messsages.html(e)}catch(f){g("Error adding debug",f)}},d.prototype.addListener=function(b,c){a(this).on(b,c)},d}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/overlays/debug/DebugOverlay",["lodash/lodash","bam-video-players/overlays/BaseOverlay","bam-video-players/events/PlayerEvents","bam-video-players/events/UserEvents","bam-video-players/overlays/debug/DebugUIHelper","bam-video-players/players/helpers/MediaMetricsManager"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/overlays/BaseOverlay"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/UserEvents"),require("bam-video-players/overlays/debug/DebugUIHelper"),require("bam-video-players/players/helpers/MediaMetricsManager")):a.DebugOverlay=b(a.lodash,a.BaseOverlay,a.PlayerEvents,a.UserEvents,a.DebugUIHelper,a.MediaMetricsManager)}(this,function(a,b,c,d,e,f){function g(b,c){this.model={};var d=new f;this.filterModel=a.assign({},a.mapValues(d.data,function(a){return!0})),this.stateModel={isVisible:!1},g.prototype["super"].constructor.call(this,b,c),this.isEnabled()&&this.uiHelper&&(this.uiHelper.addListener(this.uiHelper.eventNames.POLLING_INTERVAL_CHANGED,a.debounce(k,500,{trailing:!0,leading:!1}).bind(this)),this.uiHelper.addListener(this.uiHelper.eventNames.DISABLE_POLLING,l.bind(this)),this.uiHelper.addListener(this.uiHelper.eventNames.CLOSE_DEBUG_PANEL,i.bind(this)),this.uiHelper.addListener(this.uiHelper.eventNames.DISPATCH_MEDIA_ERROR,j.bind(this))),m.call(this)}function h(a){this.model=a.mediaMetrics,this.modelUpdated()}function i(){this.player.dispatcher.publish(d.TOGGLE_DEBUG_PANEL)}function j(){this.player.dispatcher.publish(c.MEDIA_ERROR,{player:this.player})}function k(a,b){this.log("changePollingInterval",b);try{this.player.metrics.getMediaMetrics(),this.player.metrics.enablePolling(b)}catch(c){log(this.player.id+" does not have metricsGetMediaMetrics()")}}function l(a,b){try{this.player.metrics.disablePolling()}catch(c){console.log("[DebugOverlay]",this.player.id+" does not have metricsDisablePolling()")}}function m(){var a=window.location.search,b=/[\?&]debug=true/.test(a);b&&this.show()}return g.prototype=Object.create(b.prototype),g.prototype.constructor=g,g.prototype["super"]=b.prototype,g.prototype.getId=function(a){return"DebugOverlay."+a},g.prototype.addBoundFxns=function(){this.boundFxns.onShowDebug=h.bind(this)},g.prototype.createUIHelper=function(a){return new e(a,this.stateModel,this.filterModel)},g.prototype.addListeners=function(a){g.prototype["super"].addListeners.call(this,a),a.on(c.STREAM_METRICS_UPDATED,this.boundFxns.onShowDebug)},g.prototype.removeListeners=function(a){g.prototype["super"].removeListeners.call(this,a),a.off(c.STREAM_METRICS_UPDATED,this.boundFxns.onShowDebug)},g.prototype.modelUpdated=function(){this.stateModel.isVisible=this.isVisible,this.isEnabled()&&this.uiHelper&&this.uiHelper.showDebugData(this.model)},g}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-advertising/models/RegisterAdvertisingData",["bandwagon/bandwagon","lodash/lodash","device/device"],b):"object"==typeof exports?module.exports=b(require("bandwagon/bandwagon"),require("lodash/lodash"),require("device/device")):a.RegisterAdvertisingData=b(a.Bandwagon,a.lodash,a.deviceBootstrap)}(this,function(a,b,c){"use strict";function d(c){var d=function(a){var d={},f=b.get(c,"videocore.advertising.freewheel.topicID",void 0),g=b.get(c,"videocore.advertising.freewheel.site","mlb"),h="embed";if("undefined"!=typeof f){g=f.substr(0,f.indexOf("/")),h=f.slice(f.lastIndexOf("/")+1,f.length);var i=f.slice(f.indexOf("/")+1,f.lastIndexOf("/"));b.set(d,"topicID",f),b.set(d,"section",i)}return b.set(d,"player",h),b.set(d,"site",g),b.merge(d,b.get(a,"freewheelProps",{})),b.set(d,"deviceType",e.formFactor),d},f="PROPERTY_INTENTIONS",g=a.getInstanceByKey(f),h=a.getRegisteredEventsByKey(f);console.log("[RegisterAdvertisingData]","registering",h.freewheel_default),g.publish(h.freewheel_default,d)}var e=c();return{registerDefaultData:d}}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/VideoPlayerFactory",["lodash/lodash","bam-video-players/utils/VideoUtils","bam-video-players/overlays/messages/MessageOverlay","bam-video-players/overlays/loading/LoadingOverlay","bam-video-players/overlays/debug/DebugOverlay","bam-video-advertising/models/RegisterAdvertisingData"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bam-video-players/utils/VideoUtils"),require("bam-video-players/overlays/messages/MessageOverlay"),require("bam-video-players/overlays/loading/LoadingOverlay"),require("bam-video-players/overlays/debug/DebugOverlay"),require("bam-video-advertising/models/RegisterAdvertisingData")):a.VideoPlayerFactory=b(a.lodash,a.VideoUtils,a.MessageOverlay,a.LoadingOverlay,a.DebugOverlay,a.RegisterAdvertisingData)}(this,function(a,b,c,d,e,f){"use strict";var g={},h=["HTML5CorePlayer","HLSPlayer"],i={registerPlayer:function(a){var b=a.prototype.toString(),c=a.prototype["super"]?"AbstractPlayer"===a.prototype["super"].toString():!1,d=a.prototype["super"]?g[a.prototype["super"].toString()]:!1;("AbstractPlayer"===b||"AbstractHTMLPlayer"==b||c||d)&&(console.log("VideoPlayerFactory registerPlayer: add "+b+" to available players"),g[b]=a)},getPlayer:function(b,h){h=this.getType(b,h),f.registerDefaultData(b);var i=null,j=a.get(b,"html5.callInitOnCreation"),k=a.isUndefined(j);return g[h]&&(console.log("VideoPlayerFactory getPlayer: get new instance of "+h),k&&a.set(b,"html5.callInitOnCreation",!1),i=new g[h](b,document)),i?(a.set(i,"overlays.messageOverlay",new c(b,i)),a.set(i,"overlays.loadingOverlay",new d(b,i)),a.set(i,"overlays.debugOverlay",new e(b,i)),k&&"FlashPlayer"!==h&&i.init()):console.error("VideoPlayerFactory failed to instantiate player of type:"+h),i},getType:function(c,d){return d||(d=b.getPlayerTypeByDevice(c)),a.includes(h,d)&&(console.log("VideoPlayerFactory.getType() swapping to BamHTMLPlayer"),d="BamHTMLPlayer"),d}};return i}),define("text!bam-video-players/players/ui/templates/Poster.html",[],function(){return'<div class="video-player__poster js-video-player__poster">\n    <i class="media-icon media-icon--play-overlay"></i>\n    <img src="{{posterUrl}}" />\n</div>\n'}),function(a,b){if("function"==typeof define&&define.amd)define("bam-video-players/players/ui/Poster",["jquery","lodash/lodash","handlebars/handlebars","text!bam-video-players/players/ui/templates/Poster.html","bam-video-players/events/PlayerEvents","bam-video-advertising/events/AdEvents"],b);else if("object"==typeof exports)module.exports=b(require("jquery"),require("lodash/lodash"),require("handlebars/handlebars"),require("text!bam-video-players/players/ui/templates/Poster.html"),require("bam-video-players/events/PlayerEvents"),require("bam-video-advertising/events/AdEvents"));else{var c=a.jQuery("#PosterTemplate").html();a.Poster=b(a.jQuery,a._,a.Handlebars,c,a.PlayerEvents,a.AdEvents)}}(this,function(a,b,c,d,e,f){"use strict";function g(a){return this instanceof g?(this.player=a,this.template=c.compile(d),this.$elem=null,void this.player.dispatcher.on(e.PLAYER_LOADED,h.bind(this))):new g(a)}function h(){try{this.player.$container.append(this.template()),this.$elem=this.player.$container.find(".js-video-player__poster"),this.player.dispatcher.on(f.AD_START,this.hide.bind(this)),this.player.dispatcher.on(e.MEDIA_START,this.hide.bind(this)),this.player.dispatcher.on(e.MEDIA_SET,i.bind(this)),this.player.dispatcher.on(e.SHOW_POSTER,k.bind(this))}catch(a){console.log("Poster","possible jquery errors")}}function i(a){var c=a.player,d=b.get(c,"config.poster.imageType","13"),e=b.get(c,"config.poster.posterFallback",null);Array.isArray(d)&&d.length&&(d=d[1]&&c.$player.width()<=d[1].width?d[1]:d[0],d=d.width+"x"+d.height);var f=b.get(c,"config.poster.imagesCollection",null),g=b.get(c,"config.poster.imagesFilter",null);if("string"==typeof f){var h=b.get(c,f,[]);h=b.filter(h,g),e=b.get(h,d,e)}var i=b.get(c,"config.poster.beginPosterPath","clip.metaData.imagesByType['{imageType}']");"string"==typeof d&&(i=i.replace("{imageType}",d));var k=e?e:b.get(c,i,"");this.$elem.one("click",function(a){c.clip&&c.clip.path&&c.play([c.clip])}),j.call(this,k)}function j(a){var b=this.$elem.find("img");b.attr("src")!==a&&b.attr("src",a)}function k(a){a.player&&this.player===a.player&&this.show()}return g.prototype.show=function(a){this.$elem&&(a&&""!==String(a).trim()&&j.call(this,a),this.$elem.removeClass("video-player__poster--hide"))},g.prototype.hide=function(){this.$elem&&this.$elem.addClass("video-player__poster--hide")},g}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/AbstractPlayer",["jquery","lodash/lodash","bam-video-players/players/ui/Poster","bam-video-players/players/VideoPlayerFactory","bam-video-players/events/PlayerEvents","bam-video-advertising/events/AdEvents","bandwagon/bandwagon","device/device"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("bam-video-players/players/ui/Poster"),require("bam-video-players/players/VideoPlayerFactory"),require("bam-video-players/events/PlayerEvents"),require("bam-video-advertising/events/AdEvents"),require("bandwagon/bandwagon"),require("device/device")):a.AbstractPlayer=b(a.jQuery,a.lodash,a.Poster,a.VideoPlayerFactory,a.PlayerEvents,a.AdEvents,a.Bandwagon,a.deviceBootstrap)}(this,function(a,b,c,d,e,f,g,h){"use strict";function i(b,c){this.id="player"+(new Date).getTime(),this.config=b,this.document=c,this.$document=a(c),this.$container=a(this.config.property_state.container),this.player=null,this.$player=null,this.poster=null,this.loaded=!1,this.clip=null,this.isPlaying=!1,this.isPaused=!1,this.isResumed=!1,this.duration=0,this.muted=!1,this.isFullScreen=!1,this.inMiniMode=!1,this.adManager=null,this.adPlaying=!1,this.adEvents=null,this.eventBus=g,this.dispatcher=this.config?g.getInstanceByKey(this.config.property_state.container):null,this.device=h(),this.overlays={},this.isFlash=!1,this.supportsHls=!1,this.dispatcher.publish(e.PLAYER_INITIALIZING,{player:this}),j.call(this),console.log("AbstractPlayer constructor")}function j(){this.$container.addClass("video__player"),b.get(this,"config.loadPoster",!0)&&(this.hidePlayer(),this.poster=new c(this)),k.call(this)}function k(){this.dispatcher.on(e.MEDIA_START,l.bind(this)),this.dispatcher.on(f.AD_START,l.bind(this))}function l(a){console.log("[AbstractPlayer] _onMediaStart"),this.showPlayer()}return i.prototype={constructor:i,Events:e,play:function(){console.log("AbstractPlayer Play")},setClip:function(a){throw new Error("Function setClip has not been implemented.")},pause:function(){this.isPlaying&&console.log("AbstractPlayer Pause")},resume:function(){this.isPlaying||console.log("AbstractPlayer Resume")},mute:function(){console.log("AbsrtactHTMLPlayer ::: mute"),this.muted=!this.muted},unmute:function(){console.log("AbsrtactHTMLPlayer ::: unmute"),this.muted=!this.muted},setVolume:function(a){a>100?a=100:0>a&&(a=0),console.log("AbstractPlayer setVolume")},resize:function(b,c){this.player&&(a(this.config.container).width(b).height(c),this.$player.width(b).height(c),this.dispatcher.publish(e.MEDIA_RESIZE,{player:this,width:b,height:c})),console.log("AbstractPlayer resize")},setBeginPoster:function(a){console.log("AbstractPlayer setBeginPoster")},showPoster:function(a){this.poster&&this.poster.show(a)},enterFullScreen:function(){this.isFullScreen||console.log("AbstractPlayer enterFullScreen")},exitFullScreen:function(){this.isFullScreen&&console.log("AbstractPlayer exitFullScreen")},enterMiniMode:function(a,b){this.inMiniMode||console.log("AbstractPlayer enterMiniMode",a,b)},exitMiniMode:function(a,b){this.inMiniMode&&console.log("AbstractPlayer exitMiniMode",a,b)},showPlayer:function(){this.$container.removeClass("video__player--hide"),this.resize()},hidePlayer:function(){this.$container.addClass("video__player--hide")},getCurrentAdDuration:function(){console.log("BasePlayer getCurrentAdDuration")},toString:function(){return"AbstractPlayer"},destroy:function(){this.dispatcher.removeAllListeners(),this.$player&&this.$player.remove()},showOverlay:function(a){var c=this,d=b.get(this,"overlays",{});b.each(b.keys(d),function(d){(null==a||b.includes(a,d))&&c.overlays[d].show()})},hideOverlay:function(a){var c=this,d=b.get(this,"overlays",{});b.each(b.keys(d),function(d){(null==a||b.includes(a,d))&&c.overlays[d].hide()})}},d.registerPlayer(i),i}),define("text!bam-video-players/players/ui/templates/HTML5PlayerControls.html",[],function(){return'<div id="{{elemId}}" class="video-controls skin-{{skin}} js-video-controls">\n    <div class="video-controls__branding"></div>\n    <div class="video-controls__wrapper">\n        <div class="video-controls__icon video-controls__start js-video-controls__start"></div>\n        <div class="video-controls__icon video-controls__play js-video-controls__play"></div>\n        <div class="video-controls__icon video-controls__pause js-video-controls__pause"></div>\n        <div class="video-controls__icon video-controls__rewind js-video-control__rewind"></div>\n        <div class="video-controls__icon video-controls__forward js-video-control__forward"></div>\n        <div class="video-controls__icon video-controls__smallscreen js-video-controls__smallscreen"></div>\n        <div class="video-controls__icon video-controls__largescreen js-video-controls__largescreen"></div>\n        <div class="video-controls__icon video-controls__fullscreen js-video-controls__fullscreen"></div>\n        <div class="video-controls__icon video-controls__cc js-video-controls__cc"></div>\n        <div class="video-controls__timer js-video-controls__timer">\n            <span class="video-timer__elapsed js-video-timer__elapsed">{{elapsed}}</span>\n            <span class="video-timer__divider"></span>\n            <span class="video-timer__duration">{{duration}}</span>\n        </div>\n        <div class="video-controls__volume js-video-controls__volume">\n            <div class="js-video-volume__icon video-volume__icon-wrapper">\n                <i class="video-controls__icon video-volume__icon">\n                    <span class="video-volume__icon--status js-video-volume__icon--status"></span>\n                </i>\n            </div>\n            <div class="video-volume__slider-wrapper">\n                <div class="video-volume__slider js-video-volume__slider">\n                    <div class="video-volume__slider-range js-video-volume__slider-range"></div>\n                    <div class="video-volume__slider-handle js-video-volume__slider-handle"></div>\n                </div>\n            </div>\n        </div>\n        <div class="video-controls__scrubber js-video-controls__scrubber">\n            <div class="video-scrubber__progress js-video-scrubber__progress"></div>\n            <div class="video-scrubber__buffer js-video-scrubber__buffer"></div>\n            <div class="video-scrubber__handle js-video-scrubber__handle"></div>\n        </div>\n    </div>\n</div>\n'}),function(a,b){"function"==typeof define&&define.amd?define("moment-duration-format/lib/moment-duration-format",["moment/moment"],b):"object"==typeof exports?module.exports=b(require("moment/moment")):b(a.moment)}(this,function(a){function b(a){var b="";if(a=parseInt(a,10),!a||1>a)return b;for(;a;)b+="0",a-=1;return b}function c(a,c,d){return null==a&&(a=""),a=""+a,(d?a:"")+b(c-a.length)+(d?"":a)}function d(a){return"[object Array]"===Object.prototype.toString.call(a)}function e(a){return"[object Object]"===Object.prototype.toString.call(a)}function f(a,b){for(var c=a.length;c-=1;)if(b(a[c]))return a[c]}function g(a,b){var c,d=0,e=a.length;for("function"!=typeof b&&(c=b,b=function(a){return a===c});e>d;){if(b(a[d]))return a[d];d+=1}}function h(a,b){var c=0,d=a.length;if(a&&d)for(;d>c;){if(b(a[c],c)===!1)return;c+=1}}function i(a,b){var c=0,d=a.length,e=[];if(!a||!d)return e;for(;d>c;)e[c]=b(a[c],c),c+=1;return e}function j(a,b){return i(a,function(a){return a[b]})}function k(a){var b=[];return h(a,function(a){a&&b.push(a)}),b}function l(a){var b=[];return h(a,function(a){g(b,a)||b.push(a)}),b}function m(a,b){var c=[];return h(a,function(a){h(b,function(b){a===b&&c.push(a)})}),l(c)}function n(a,b){var c=[];return h(a,function(d,e){return b(d)?void 0:(c=a.slice(e),!1)}),c}function o(a,b){var c=a.slice().reverse();return n(c,b).reverse()}function p(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}if(!a)throw"Moment Duration Format cannot find Moment.js";a.duration.fn.format=function(){var f,q,r,s,t,u,v=[].slice.call(arguments),w=p({},this.format.defaults),x=a.duration(this);return w.duration=this,h(v,function(a){return"string"==typeof a||"function"==typeof a?void(w.template=a):"number"==typeof a?void(w.precision=a):void(e(a)&&p(w,a))}),r=w.types=d(w.types)?w.types:w.types.split(" "),"function"==typeof w.template&&(w.template=w.template.apply(w)),f=new RegExp(i(r,function(a){return w[a].source}).join("|"),"g"),s=function(a){return g(r,function(b){return w[b].test(a)})},q=i(w.template.match(f),function(a,b){var c=s(a),d=a.length;return{index:b,length:d,token:"escape"===c?a.replace(w.escape,"$1"):a,type:"escape"===c||"general"===c?null:c}},this),t=m(r,l(k(j(q,"type")))),t.length?(h(t,function(a,b){var c,d,e,f,g;c=x.as(a),d=c>0?Math.floor(c):Math.ceil(c),e=c-d,f=b+1===t.length,g=!b,h(q,function(b){b.type===a&&(p(b,{value:c,wholeValue:d,decimalValue:e,isLeast:f,isMost:g}),g&&null==w.forceLength&&b.length>1&&(w.forceLength=!0))}),x.subtract(d,a)}),w.trim&&(q=("left"===w.trim?n:o)(q,function(a){return!(a.isLeast||null!=a.type&&a.wholeValue)})),u=!1,"right"===w.trim&&q.reverse(),q=i(q,function(a){var d,e;if(!a.type)return a.token;if(d=a.isLeast&&w.precision<0?(Math.floor(a.wholeValue*Math.pow(10,w.precision))*Math.pow(10,-w.precision)).toString():a.wholeValue.toString(),d=d.replace(/^\-/,""),a.length>1&&(u||a.isMost||w.forceLength)&&(d=c(d,a.length)),a.isLeast&&w.precision>0)switch(e=a.decimalValue.toString().replace(/^\-/,"").split(/\.|e\-/),e.length){case 1:d+="."+c(e[0],w.precision,!0).slice(0,w.precision);break;case 2:d+="."+c(e[1],w.precision,!0).slice(0,w.precision);break;case 3:d+="."+c(b(+e[2]-1)+(e[0]||"0")+e[1],w.precision,!0).slice(0,w.precision);break;default:throw"Moment Duration Format: unable to parse token decimal value."}return a.isMost&&a.value<0&&(d="-"+d),u=!0,d}),"right"===w.trim&&q.reverse(),q.join("")):j(q,"token").join("")},a.duration.fn.format.defaults={escape:/\[(.+?)\]/,years:/[Yy]+/,months:/M+/,weeks:/[Ww]+/,days:/[Dd]+/,hours:/[Hh]+/,minutes:/m+/,seconds:/s+/,milliseconds:/S+/,general:/.+?/,types:"escape years months weeks days hours minutes seconds milliseconds general",trim:"left",precision:0,forceLength:null,template:function(){var a=this.types,b=this.duration,c=f(a,function(a){return b._data[a]});switch(c){case"seconds":return"h:mm:ss";case"minutes":return"d[d] h:mm";case"hours":return"d[d] h[h]";case"days":return"M[m] d[d]";case"weeks":return"y[y] w[w]";case"months":return"y[y] M[m]";case"years":return"y[y]";default:return"y[y] M[m] d[d] h:mm:ss"}}}}),define("jqueryui-amd/jqueryui/mouse",["jquery","./widget"],function(a){!function(a,b){var c=!1;a(document).mouseup(function(){c=!1}),a.widget("ui.mouse",{version:"1.10.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=1===b.which,f="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(a)}),define("jqueryui-amd/jqueryui/draggable",["jquery","./core","./mouse","./widget"],function(a){!function(a,b){a.widget("ui.draggable",a.ui.mouse,{version:"1.10.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c,d=this,e=!1,f=!1;for(a.ui.ddmanager&&!this.options.dropBehaviour&&(f=a.ui.ddmanager.drop(this,b)),this.dropped&&(f=this.dropped,this.dropped=!1),c=this.element[0];c&&(c=c.parentNode);)c===document&&(e=!0);return e||"original"!==this.options.helper?("invalid"===this.options.revert&&!f||"valid"===this.options.revert&&f||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,f)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){d._trigger("stop",b)!==!1&&d._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1):!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;return a(this.options.handle,this.element).find("*").addBack().each(function(){this===b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d[0]===this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,
bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;if("parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=["document"===e.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"===e.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"===e.containment?0:a(window).scrollLeft())+a("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"===e.containment?0:a(window).scrollTop())+(a("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||e.containment.constructor===Array)e.containment.constructor===Array&&(this.containment=e.containment);else{if(c=a(e.containment),d=c[0],!d)return;b="hidden"!==a(d).css("overflow"),this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e,f,g=this.options,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName),j=b.pageX,k=b.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(d=this.relative_container.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,b.pageX-this.offset.click.left<c[0]&&(j=c[0]+this.offset.click.left),b.pageY-this.offset.click.top<c[1]&&(k=c[1]+this.offset.click.top),b.pageX-this.offset.click.left>c[2]&&(j=c[2]+this.offset.click.left),b.pageY-this.offset.click.top>c[3]&&(k=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((k-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,k=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((j-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,j=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f)),{top:k-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:j-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("ui-draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"ui-sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("ui-draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("ui-draggable"),e=this;a.each(d.sortables,function(){var f=!1,g=this;this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&a.ui.contains(g.instance.element[0],this.instance.element[0])&&(f=!1),f})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("ui-draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("ui-draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("ui-draggable");b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("ui-draggable"),d=c.options,e=!1;c.scrollParent[0]!==document&&"HTML"!==c.scrollParent[0].tagName?(d.axis&&"x"===d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"===d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"===d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"===d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("ui-draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!==String?c.snap.items||":data(ui-draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!==b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){var d,e,f,g,h,i,j,k,l,m,n=a(this).data("ui-draggable"),o=n.options,p=o.snapTolerance,q=c.offset.left,r=q+n.helperProportions.width,s=c.offset.top,t=s+n.helperProportions.height;for(l=n.snapElements.length-1;l>=0;l--)h=n.snapElements[l].left,i=h+n.snapElements[l].width,j=n.snapElements[l].top,k=j+n.snapElements[l].height,q>h-p&&i+p>q&&s>j-p&&k+p>s||q>h-p&&i+p>q&&t>j-p&&k+p>t||r>h-p&&i+p>r&&s>j-p&&k+p>s||r>h-p&&i+p>r&&t>j-p&&k+p>t?("inner"!==o.snapMode&&(d=Math.abs(j-t)<=p,e=Math.abs(k-s)<=p,f=Math.abs(h-r)<=p,g=Math.abs(i-q)<=p,d&&(c.position.top=n._convertPositionTo("relative",{top:j-n.helperProportions.height,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i}).left-n.margins.left)),m=d||e||f||g,"outer"!==o.snapMode&&(d=Math.abs(j-s)<=p,e=Math.abs(k-t)<=p,f=Math.abs(h-q)<=p,g=Math.abs(i-r)<=p,d&&(c.position.top=n._convertPositionTo("relative",{top:j,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k-n.helperProportions.height,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i-n.helperProportions.width}).left-n.margins.left)),!n.snapElements[l].snapping&&(d||e||f||g||m)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=d||e||f||g||m):(n.snapElements[l].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=!1)}}),a.ui.plugin.add("draggable","stack",{start:function(){var b,c=a(this).data("ui-draggable").options,d=a.makeArray(a(c.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});d.length&&(b=parseInt(d[0].style.zIndex,10)||0,a(d).each(function(a){this.style.zIndex=b+a}),this[0].style.zIndex=b+d.length)}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(a)}),function(a,b){if("function"==typeof define&&define.amd)define("bam-video-players/players/ui/controls/HTML5PlayerControls",["jquery","handlebars/handlebars","moment/moment","text!bam-video-players/players/ui/templates/HTML5PlayerControls.html","bam-video-players/events/PlayerEvents","moment-duration-format/lib/moment-duration-format","jqueryui-amd/jqueryui/draggable"],b);else if("object"==typeof exports)module.exports=b(require("jquery"),require("handlebars/handlebars"),require("moment/moment"),require("text!bam-video-players/players/ui/templates/HTML5PlayerControls.html"),require("bam-video-players/events/PlayerEvents"),require("moment-duration-format/lib/moment-duration-format"),require("jqueryui-amd/jqueryui/draggable"));else{var c=$("#ControlsTemplate").html();a.HTML5PlayerControls=b(a.jQuery,a.Handlebars,a.moment,c,a.PlayerEvents,null,null)}}(this,function(a,b,c,d,e){"use strict";function f(a){this.player=a,this.$player=a.$player,this.elemId="video-controls__"+this.$player.attr("id"),this.playingCssClass="video-controls--playing",this.closedCaptionCssClass="video-controls--captions",this.timeout=null,this.setBtn=n.bind(this),g.call(this)}function g(){this.timeFormat=this.player.duration>3600?"hh:mm:ss":"mm:ss";var e=b.compile(d),f=c.duration(0,"seconds").format(this.timeFormat,{trim:!1}),g=c.duration(this.player.duration,"seconds").format(this.timeFormat,{trim:!1});1===this.$player.siblings("#"+this.elemId).length?this.$player.siblings("#"+this.elemId).replaceWith(e({elemId:this.elemId,skin:this.player.config.skinProps.skin||null,elapsed:f,duration:g})):this.$player.after(e({elemId:this.elemId,skin:this.player.config.skinProps.skin||null,elapsed:f,duration:g})),this.$controls=a("#"+this.elemId),this.$scrubber=this.$controls.find(".js-video-controls__scrubber"),this.$volume=this.$controls.find(".js-video-controls__volume"),E.call(this,this.$player.prop("volume"),this.$player.prop("muted")),h.call(this),n.call(this),J.call(this)}function h(){this.$controls.find(".js-video-controls__start").on("click",a.proxy(i,this)),this.$controls.find(".js-video-controls__play").on("click",a.proxy(j,this)),this.$controls.find(".js-video-controls__pause").on("click",a.proxy(m,this)),this.$controls.find(".js-video-controls__fullscreen").on("click",a.proxy(r,this)),this.player.device.is.desktop&&this.$player[0].textTracks.addEventListener("change",this.setBtn),this.player.clip.metaData.closed_captioned?this.$controls.find(".js-video-controls__cc").on("click",a.proxy(q,this)):this.$controls.find(".js-video-controls__cc").addClass("video-controls__cc--disabled"),this.$controls.find(".js-video-control__rewind").on("click",a.proxy(t,this)),this.$controls.find(".js-video-control__forward").on("click",a.proxy(u,this)),this.$volume.find(".js-video-volume__icon").on("click",C.call(this)),this.$volume.find(".js-video-volume__slider-handle").draggable({containment:".js-video-volume__slider",axis:"y",drag:a.proxy(A,this)}),this.$volume.find(".js-video-volume__slider").on("click",a.proxy(B,this)),this.$scrubber.find(".js-video-scrubber__handle").draggable({containment:this.$scrubber,axis:"x",drag:a.proxy(w,this),stop:a.proxy(x,this)}),this.$scrubber.on("click",a.proxy(y,this)),N[this.elemId+"::_onTimeUpdate"]=a.proxy(v,this),N[this.elemId+"::_onPlaying"]=a.proxy(k,this),N[this.elemId+"::_clickToUpdateCCMode"]=a.proxy(q,this),N[this.elemId+"::_onPausedEnded"]=a.proxy(l,this),N[this.elemId+"::_onMouseMove"]=a.proxy(F,this),N[this.elemId+"::_onMouseOver"]=a.proxy(G,this),N[this.elemId+"::_onMouseOut"]=a.proxy(H,this),N[this.elemId+"::_onBufferProgress"]=a.proxy(I,this),N[this.elemId+"::_onFullScreenChange"]=a.proxy(s,this),N[this.elemId+"::_onAccessibleControlsVolumeUpdate"]=a.proxy(D,this),this.player.dispatcher.on(e.MEDIA_TIME_UPDATE,N[this.elemId+"::_onTimeUpdate"]),this.player.dispatcher.on(e.MEDIA_PLAYING,N[this.elemId+"::_onPlaying"]),this.player.dispatcher.on(e.CLOSED_CAPTION,N[this.elemId+"::_clickToUpdateCCMode"]),this.player.dispatcher.on(e.MEDIA_PAUSED,N[this.elemId+"::_onPausedEnded"]),this.player.dispatcher.on(e.MEDIA_COMPLETE,N[this.elemId+"::_onPausedEnded"]),this.player.dispatcher.on(e.FULLSCREEN_CHANGE,N[this.elemId+"::_onFullScreenChange"]),this.player.dispatcher.on(e.MEDIA_VOLUME_CHANGED,N[this.elemId+"::_onAccessibleControlsVolumeUpdate"]),this.player.dispatcher.on(e.MUTE_BUTTON,N[this.elemId+"::_onAccessibleControlsVolumeUpdate"]),this.$player.on("mousemove",N[this.elemId+"::_onMouseMove"]),this.$controls.on("mouseover",N[this.elemId+"::_onMouseOver"]),this.$player.on("mouseout",N[this.elemId+"::_onMouseOut"]),this.$controls.on("mouseout",N[this.elemId+"::_onMouseOut"]),this.$player.on("progress",N[this.elemId+"::_onBufferProgress"])}function i(a){this.$player.prop("currentTime",0)}function j(a){this.player.play()}function k(a,b){this.$controls.addClass(this.playingCssClass)}function l(a,b){this.$controls.removeClass(this.playingCssClass)}function m(a){this.player.pause()}function n(){var a=this.$controls.find(".js-video-controls__cc");this.$player[0].textTracks&&this.$player[0].textTracks[0]&&"showing"===this.$player[0].textTracks[0].mode&&!a.hasClass("video-controls__cc--active")?(this.player.showCC=!0,a.addClass("video-controls__cc--active")):(this.player.showCC=!1,a.hasClass("video-controls__cc--active")&&a.removeClass("video-controls__cc--active"))}function o(){var a=(new Date).getTime();window.localStorage.setItem("video_cc_selected","true"),window.localStorage.setItem("video_cc_selected_date",a)}function p(){window.localStorage.getItem("video_cc_selected")&&window.localStorage.removeItem("video_cc_selected"),window.localStorage.getItem("video_cc_selected_date")&&window.localStorage.removeItem("video_cc_selected_date")}function q(a){var b=this.$player[0].textTracks[0].mode;"showing"===b?(this.$player[0].textTracks[0].mode="hidden",p()):(this.$player[0].textTracks[0].mode="showing",o())}function r(a){this.player.isFullScreen?this.player.exitFullScreen():this.player.enterFullScreen()}function s(a,b){var c=this.$controls.find(".js-video-controls__fullscreen");a.isFullScreen?c.addClass("video-controls__exit-fullscreen"):c.removeClass("video-controls__exit-fullscreen")}function t(a){var b=this.$player.prop("currentTime"),c=0>b-10?0:b-10;this.$player.prop("currentTime",c)}function u(a){var b=this.$player.prop("currentTime"),c=b+10>this.player.duration?this.player.duration:b+10;this.$player.prop("currentTime",c)}function v(a,b){var d=c.duration(a.currentTime,"seconds").format(this.timeFormat,{trim:!1}),e=a.currentTime/this.player.duration;this.$controls.find(".js-video-timer__elapsed").text(d),z.call(this,e)}function w(a,b){this.player.isPlaying&&(this.player.pause({silent:!0}),this.$scrubber.data("play-after-scrub",!0));var c=b.position.left/this.$scrubber.width(),d=c*this.player.duration;z.call(this,c),this.$player.prop("currentTime",d)}function x(a,b){this.$scrubber.data("play-after-scrub")&&(this.player.play(),this.$scrubber.data("play-after-scrub",!1))}function y(a){this.player.isPlaying&&(this.player.pause({silent:!0}),this.$scrubber.data("play-after-scrub",!0));var b=(a.pageX-this.$scrubber.offset().left)/this.$scrubber.width(),c=b*this.player.duration;if(z.call(this,b),this.$player.prop("currentTime",c),this.$scrubber.data("play-after-scrub")){var d=this;window.setTimeout(function(){d.player.play()},250),this.$scrubber.data("play-after-scrub",!1)}}function z(a){this.$scrubber.find(".js-video-scrubber__progress").css(M(a)),this.$scrubber.find(".js-video-scrubber__handle").css({left:a*this.$scrubber.width()})}function A(a,b){var c=this.$controls.find(".js-video-volume__slider");if(!c.is(":visible"))return!1;var d=c.height(),e=c.find(".js-video-volume__slider-handle").outerHeight();d-=e;var f=Math.abs(d-b.position.top)/d;E.call(this,f)}function B(a){var b=this.$volume.find(".js-video-volume__slider"),c=Math.abs(b.height()+b.offset().top-a.pageY)/b.height();E.call(this,c)}function C(){var a=this;return function(b){0===a.currentVolume||a.$player.prop("muted")?0===a.currentVolume?E.call(a,.11):a.player.unmute():a.player.mute(),E.call(a,a.currentVolume,a.$player.prop("muted"))}}function D(a){E.call(this,a.volume,a.muted)}function E(a,b){this.currentVolume=a,b&&(a=0);var c=this.$volume.find(".js-video-volume__slider"),d=this.$volume.find(".js-video-volume__slider-handle"),e=c.height()-d.outerHeight()-a*(c.height()-d.outerHeight());0===a?this.$volume.find(".js-video-volume__icon--status").removeClass("video-volume__icon--half").removeClass("video-volume__icon--full").addClass("video-volume__icon--muted"):.5>a?this.$volume.find(".js-video-volume__icon--status").removeClass("video-volume__icon--muted").removeClass("video-volume__icon--full").addClass("video-volume__icon--half"):this.$volume.find(".js-video-volume__icon--status").removeClass("video-volume__icon--muted").removeClass("video-volume__icon--half").addClass("video-volume__icon--full"),c.find(".js-video-volume__slider-range").css(M(a,"Y")),c.find(".js-video-volume__slider-handle").css({top:e}),this.player.setVolume(100*a)}function F(a){L.call(this,!0),J.call(this)}function G(a){L.call(this,!0),K.call(this)}function H(a){L.call(this,!1)}function I(a){var b=a.target.buffered>0?a.target.buffered.end(a.target.buffered.length-1):0,c=this.player.duration;if(c>0){var d=b/c;this.$scrubber.find(".js-video-scrubber__buffer").css(M(d))}}function J(a){var b=this;a=a||8e3,K.call(b),b.timeout=window.setTimeout(function(){L.call(b,!1)},a)}function K(){window.clearTimeout(this.timeout)}function L(a){a?this.$controls.removeClass("video-controls--hide"):this.$controls.addClass("video-controls--hide"),this.player.dispatcher.publish(e.CONTROLS_VISIBILITY_CHANGED,{player:self,visible:a}),z.call(this,this.$player.prop("currentTime")/this.player.duration)}function M(a,b){return b=b&&-1!==["X","Y"].indexOf(b.toUpperCase())?"scale"+b.toUpperCase():"scaleX",{"-webkit-transform":b+"("+a+")","-moz-transform":b+"("+a+")","-ms-transform":b+"("+a+")","-o-transform":b+"("+a+")",transform:b+"("+a+")"}}var N={};return f.prototype={show:function(){this.$player.siblings("#"+this.elemId).show()},hide:function(){this.$player.siblings("#"+this.elemId).hide()},destroy:function(){this.$controls.find(".js-video-controls__play").off(),this.$controls.find(".js-video-controls__pause").off(),this.$controls.find(".js-video-controls__fullscreen").off(),this.$controls.find(".js-video-control__rewind").off(),this.$controls.find(".js-video-control__forward").off(),this.$volume.find(".js-video-volume__icon").off("click",C.call(this)),this.$volume.find(".js-video-volume__slider-handle").draggable("destroy"),this.$volume.find(".js-video-volume__slider").off(),this.$scrubber.find(".js-video-scrubber__handle").draggable("destroy"),this.$scrubber.off(),this.player.dispatcher.off(e.MEDIA_TIME_UPDATE,N[this.elemId+"::_onTimeUpdate"]),this.player.dispatcher.off(e.MEDIA_PLAYING,N[this.elemId+"::_onPlaying"]),this.player.dispatcher.off(e.MEDIA_PAUSED,N[this.elemId+"::_onPausedEnded"]),this.player.dispatcher.off(e.MEDIA_COMPLETE,N[this.elemId+"::_onPausedEnded"]),this.player.dispatcher.off(e.FULLSCREEN_CHANGE,N[this.elemId+"::_onFullScreenChange"]),this.player.dispatcher.off(e.MEDIA_VOLUME_CHANGED,N[this.elemId+"::_onAccessibleControlsVolumeUpdate"]),this.player.dispatcher.off(e.MUTE_BUTTON,N[this.elemId+"::_onAccessibleControlsVolumeUpdate"]),this.player.dispatcher.off(e.CC_CHANGE,N[this.elemId+"::_clickToUpdateCCMode"]),this.$player[0].textTracks.removeEventListener("change",this.setBtn),this.$player.off("mousemove",N[this.elemId+"::_onMouseMove"]),this.$controls.off("mouseover",N[this.elemId+"::_onMouseOver"]),this.$player.off("mouseout",N[this.elemId+"::_onMouseOut"]),this.$controls.off("mouseout",N[this.elemId+"::_onMouseOut"]),this.$player.off("progress",N[this.elemId+"::_onBufferProgress"]),this.$player.siblings("#"+this.elemId).remove()}},f}),define("text!bam-video-players/players/ui/templates/AdControls.html",[],function(){return'<div id="{{elemId}}" class="ad-controls skin-{{skin}} js-ad-controls">\n    <div class="ad-controls__timer js-ad-controls__timer">\n        {{message}}&nbsp;<span class="ad-timer__duration js-ad-timer__duration">{{duration}}</span>&nbsp;seconds\n    </div>\n    <div class="ad-controls__volume js-ad-controls__volume">\n        <i class="ad-controls__icon ad-volume__icon js-ad-volume__icon"></i>\n    </div>\n</div>\n'}),function(a,b){if("function"==typeof define&&define.amd)define("bam-video-players/players/ui/controls/AdControls",["jquery","handlebars/handlebars","moment/moment","text!bam-video-players/players/ui/templates/AdControls.html","bam-video-players/events/PlayerEvents","bam-video-players/events/UserEvents","bam-video-advertising/events/AdEvents","moment-duration-format/lib/moment-duration-format"],b);else if("object"==typeof exports)module.exports=b(require("jquery"),require("handlebars/handlebars"),require("moment/moment"),require("text!bam-video-players/players/ui/templates/AdControls.html"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/UserEvents"),require("bam-video-advertising/events/AdEvents"),require("moment-duration-format/lib/moment-duration-format"));else{var c=a.jQuery("#AdControlsTemplate").html();a.AdControls=b(a.jQuery,a.Handlebars,a.moment,c,a.PlayerEvents,a.UserEvents,a.AdEvents,null)}}(this,function(a,b,c,d,e,f,g){"use strict";function h(a,c,e){this.$video=a,this.dispatcher=c,this.elemId="ad-controls__"+e,this.template=b.compile(d),this.duration=0,this.timeFormat="ss",q[this.elemId]={},i.call(this)}function i(){q[this.elemId].AD_START=k.bind(this),q[this.elemId].AD_COMPLETE=l.bind(this),q[this.elemId].AD_TIME_UPDATE=m.bind(this),q[this.elemId].AD_BLOCK_DETECTED=j.bind(this),this.dispatcher.on(g.AD_START,q[this.elemId].AD_START),this.dispatcher.on(g.AD_COMPLETE,q[this.elemId].AD_COMPLETE),this.dispatcher.on(g.AD_TIME_UPDATE,q[this.elemId].AD_TIME_UPDATE),this.dispatcher.on(g.AD_BLOCK_DETECTED,q[this.elemId].AD_BLOCK_DETECTED)}function j(a){console.log("AdControls ::: onAdBlockDetected"),console.log(a),this.destroy()}function k(b){if(console.trace(),!r){r=!0,this.duration=b.duration;var d=c.duration(this.duration||0,"seconds").format(this.timeFormat,{trim:!1}),e=this.template({elemId:this.elemId,message:"This ad ends in",duration:d});1===this.$video.siblings("#"+this.elemId).length?this.$video.siblings("#"+this.elemId).replaceWith(e):this.$video.after(e);var f=a("#"+this.elemId);f.on("click",".js-ad-volume__icon",n.call(this)),o.call(this)}}function l(){r=!1,s=!1,p=void 0,this.destroy()}function m(b){var d=b.currentTime;!b.currentTime&&p&&(s=!0),s?d+=p:p=d;var e=this.duration-d,e=e>0?e:0,f=c.duration(e,"seconds").format(this.timeFormat,{trim:!1});a("#"+this.elemId).find(".js-ad-timer__duration").text(f)}function n(a){console.log("AdControls ::: _getVolumeClick");var b=this;return function(a){b.$video.prop("muted")||0===b.$video.prop("volume")?b.dispatcher.publish(f.UNMUTE_REQUESTED):b.dispatcher.publish(f.MUTE_REQUESTED),o.call(b)}}function o(){var b=a("#"+this.elemId).find(".js-ad-volume__icon");this.$video.prop("muted")||0===this.$video.prop("volume")?b.addClass("ad-volume__icon--muted"):b.removeClass("ad-volume__icon--muted")}var p,q={},r=!1,s=!1;return h.prototype={destroy:function(){a("#"+this.elemId).off(),this.$video.siblings("#"+this.elemId).remove()}},h}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-advertising/plugins/AdPlugin",["jquery","bandwagon/bandwagon"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("bandwagon/bandwagon")):a.AdPlugin=b(a.jQuery,a.Bandwagon)}(this,function(a,b){"use strict";function c(c,d){this.config=d,this.ready=!1,this.player=c,this.$player=a(c),this.adManager=null,this.adPlaying=!1,this.eventBus=b,this.dispatcher=this.config?b.getInstanceByKey(this.config.container):null}return c.prototype={constructor:c,requestAd:function(){this.adPlaying=!1},destroy:function(){},toString:function(){return"AdPlugin"}},c}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-advertising/plugins/AuditudePlugin",["jquery","bam-video-advertising/plugins/AdPlugin","bam-video-advertising/events/AdEvents","device/device"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("bam-video-advertising/plugins/AdPlugin"),require("bam-video-advertising/events/AdEvents"),require("device/device")):a.AuditudePlugin=b(a.jQuery,a.AdPlugin,a.AdEvents,a.deviceBootstrap)}(this,function(a,b,c,d){"use strict";function e(a,b){e.prototype["super"].constructor.call(this,a,b),this.scriptUrl=this.config.scriptUrl?this.config.scriptUrl:"https://mlb.cdns.auditude.com/player/js/lib/plugin/1.3/auds.html5player.js",f.call(this)}function f(){a.getScript(this.scriptUrl).done(a.proxy(g,this))}function g(b,d){if("success"!==d.toLowerCase())return void this.dispatcher.publish(c.AD_PLUGIN_ERROR);var e={controls:!0,style:{backgroundColor:"#000",width:parseInt(a(this.config.container).width()),height:parseInt(a(this.config.container).height())},handlers:{play:null,pause:null,ended:null}};this.adManager=aud.html5.AdPlayer(this.player,a(this.config.container).get(0),this.config.auditude.auditudeDomain,this.config.auditude.auditudeZoneId,e),this.adManager.subscribe(aud.events.init_complete,a.proxy(i,this)),this.adManager.subscribe(aud.events.init_failed,a.proxy(j,this)),this.adManager.subscribe(aud.events.break_begin,a.proxy(k,this)),this.adManager.subscribe(aud.events.linear_ad_begin,a.proxy(l,this)),this.adManager.subscribe(aud.events.break_end,a.proxy(m,this)),this.ready=!0,this.dispatcher.publish(c.AD_PLUGIN_LOADED)}function h(){var a,b="",a=this.config.auditude,c=a.substr(0,a.indexOf("/")),d=a.slice(a.lastIndexOf("/")+1,a.length),e=a.slice(a.indexOf("/")+1,a.lastIndexOf("/")),f="other"===n.formFactor.toLowerCase()?"desktop":n.formFactor.toLowerCase(),g="preroll";return b="siteSection="+a,b=b.concat(";site="+c),b=b.concat(";section="+e),b=b.concat(";player="+d),b=b.concat(";devicetype="+f),b=b.concat(";adType="+g),"undefined"!=typeof this.config.auditude.league&&(b=b.concat(";league="+this.config.auditude.league)),b}function i(a,b){console.log("AD INIT COMPLETE"),this.adManager.publish(aud.notifications.break_begin)}function j(a,b){console.log("AD INIT ERROR"),this.adManager.publish(aud.notifications.video_playback_started),this.dispatcher.publish(c.AD_ERROR)}function k(a,b){console.log("ON BREAK BEGIN")}function l(a,b,d){console.log("AD BEGIN"),this.adPlaying=!0,this.dispatcher.publish(c.AD_START),this.dispatcher.publish(c.AD_PREROLL_START),this.dispatcher.publish(c.AD_COMPANION,d&&d.banners?d.banners:null)}function m(a,b,d){console.log("AD ENDED"),this.adPlaying=!1,this.adManager.publish(aud.notifications.video_playback_started),this.dispatcher.publish(c.AD_COMPLETE),this.dispatcher.publish(c.AD_PREROLL_COMPLETE),this.dispatcher.publish(c.AD_COMPANION,d&&d.banners?d.banners:null)}var n=d();return e.prototype=Object.create(b.prototype),e.prototype.constructor=e,e.prototype["super"]=b.prototype,e.prototype.requestAd=function(a){if(this.adManager){e.prototype["super"].requestAd.call(this,a);var b=h.call(this),c=this.config.auditude.contentIdPrefix+a;this.adManager.init([c,this.config.auditude.defaultContentId],{userData:b})}},e.prototype.destroy=function(){this.adManager.destroy()},e.prototype.toString=function(){return"AuditudePlugin"},e}),function(a,b){"function"==typeof define&&define.amd?define("video-block-detector/blockDetector",["jquery","lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash")):a.BlockDetector=b(a.$,a._)}(this,function(a,b){function c(){return k}function d(){return l}function e(a){
i=b.assign({},i,a)}function f(a,b,c,d,e){var f=function(){4==this.readyState&&(l=!1,0==this.status?(console.log("AdBlockDetector ::: cors ::: onReady ::: (adBlockEnabled, true)"),k=!0,c&&c(e)):(k=!1,console.log("AdBlockDetector ::: cors ::: onReady ::: (adBlockEnabled, false)"),d&&d(e)))},g=new XMLHttpRequest;if("withCredentials"in g){g.onreadystatechange=f;try{g.open(b,a,!0)}catch(h){return void(k=!0)}}else if("undefined"!=typeof XDomainRequest){g=new XDomainRequest,g.onreadystatechange=f;try{g.open(b,a,!0)}catch(h){return void(k=!0)}}g&&g.send()}function g(){var b=a("#"+j);if(b.length>0)m=!0;else{var c=a("<div></div>");a(c).attr("class","ad-placement ad-unit"),a(c).attr("id",j),a(c).css("width","1px"),a(c).css("height","1px"),a(c).css("position","absolute"),a(c).css("top","0"),a(c).css("left","0"),a("body").append(c)}}function h(b,c,d){i.enabled&&i.testAdUrl?(l=!0,a(document).ready(function(){g();var a=document.getElementById(j);a&&setTimeout(function(){if(0==a.offsetWidth&&0==a.offsetHeight&&!m)return k=!0,l=!1,void(b&&b(d));var e=i.testAdUrl+"?"+parseInt(1e8*Math.random());f(e,"GET",b,c,d)},20)})):(console.warn("AdBlockDetector ::: adblock url not defined"),c&&c(d))}var i={testAdUrl:"",enabled:!0},j="mlb-block-unit",k=!1,l=!1,m=!1;return{detectAdBlock:h,isInProgress:d,isAdBlockEnabled:c,setConfig:e}}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-advertising/utils/ScriptUtils",["jquery","lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash")):a.BlockDetector=b(a.$,a._)}(this,function(a,b){function c(a){e=b.assign({},e,a)}function d(){var a=document.createElement("script");a.src=e.url,a.onload=e.successCallback,a.onerror=e.failureCallback,a.type="text/javascript",document.getElementsByTagName("body")[0].appendChild(a)}var e={url:"",successCallback:null,failureCallback:null};return{loadScript:d,set:c}}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-advertising/plugins/FreewheelPlugin",["jquery","lodash/lodash","bam-video-advertising/plugins/AdPlugin","bam-video-advertising/events/AdEvents","device/device","video-block-detector/blockDetector","bam-video-advertising/utils/ScriptUtils"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("bam-video-advertising/plugins/AdPlugin"),require("bam-video-advertising/events/AdEvents"),require("device/device"),require("video-block-detector/blockDetector"),require("bam-video-advertising/utils/ScriptUtils")):a.FreewheelPlugin=b(a.jQuery,a.lodash,a.AdPlugin,a.AdEvents,a.deviceBootstrap,a.AdBlockDetector,a.ScriptUtils)}(this,function(a,b,c,d,e,f,g){"use strict";function h(){var a=b.get(this.clip,"freewheelProps");b.each(a,function(a,b){a=String(a),this.context.addKeyValue(b,a)}.bind(this))}function i(a,b){i.prototype["super"].constructor.call(this,a,b),this.scriptUrl=this.config.freewheel&&this.config.freewheel.adManager?this.config.freewheel.adManager:"https://mssl.fwmrm.net/p/release/latest-JS/adm/prd/AdManager.js",this.context=null,this.siteSection=this.config.siteSection,this.networkId=this.config.freewheel.siteSectionNetwork,this.fallbackNetwork=this.config.freewheel.fallbackNetwork,this.topicId=this.config.freewheel.topicId,this.prerollSlots=[],this.midrollSlots=[],this.overlaySlots=[],this.postrollSlots=[],this.sourceUrlQueue=[],this.currentPlayingSlotType=null,w[this.player.id]={},l.call(this)}function j(b){if(this.ready&&b){if(!this.adManager)return void k.call(this);var c=500,e=0===this.config.container.indexOf("#")?this.config.container.substring(1,this.config.container.length):this.config.container;if(this.context=this.adManager.newContext(),this.context.registerVideoDisplayBase(e),this.context.setProfile(this.config.freewheel.adProfile),this.context.setSiteSection(this.siteSection,this.networkId,Math.floor(1e4*Math.random()),tv.freewheel.SDK.ID_TYPE_CUSTOM,this.fallbackNetwork),this.context.setVideoAsset(b.content_id,c,this.networkId),this.clip=b,"undefined"!=typeof this.topicId){var f=this.topicId.substr(0,this.topicId.indexOf("/")),g=this.topicId.slice(this.topicId.lastIndexOf("/")+1,this.topicId.length),i=this.topicId.slice(this.topicId.indexOf("/")+1,this.topicId.lastIndexOf("/"));this.context.addKeyValue("topicID",this.topicId),this.context.addKeyValue("player",g),this.context.addKeyValue("site",f),this.context.addKeyValue("section",i)}else this.context.addKeyValue("player","embed"),this.context.addKeyValue("site",this.config.freewheel.site);this.context.addKeyValue("deviceType",v.formFactor.toLowerCase()),h.call(this),this.context.addTemporalSlot("Preroll_1",tv.freewheel.SDK.ADUNIT_PREROLL,0);try{this.context.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,a.proxy(n,this)),this.context.addEventListener(tv.freewheel.SDK.EVENT_AD,a.proxy(p,this)),this.context.submitRequest()}catch(j){this.dispatcher.publish(d.AD_ERROR,j)}}else{if(this.ready)return void this.dispatcher.publish(d.AD_COMPLETE,{player:this.player,data:{}});var l=this;window.setTimeout(function(){l.requestAd(b)},500)}}function k(){console.log("FreewheelPlugin ::: AD_BLOCK_DETECTED"),this.dispatcher.publish(d.AD_BLOCK_DETECTED)}function l(){var a=this;window.tv&&tv.freewheel?m.call(a):(g.set({url:this.scriptUrl,successCallback:function(b,c){m.call(a)},failureCallback:function(){a.ready=!0,a.dispatcher.publish(d.AD_PLUGIN_ERROR)}}),g.loadScript())}function m(){this.adManager=new tv.freewheel.SDK.AdManager,this.adManager.setNetwork(this.config.freewheel.adNetwork),this.adManager.setServer(this.config.freewheel.adServer),w[this.player.id].onContentVideoEnded=s.bind(this),w[this.player.id].onContentVideoTimeUpdated=t.bind(this),w[this.player.id].onTimeUpdated=u.bind(this),this.ready=!0,this.dispatcher.publish(d.AD_PLUGIN_LOADED)}function n(b){if(console.log("FreeWheelPlugin - onRequestComplete",b),!b.success)return void this.dispatcher.publish(d.AD_ERROR,b);this.prerollSlots=[],this.midrollSlots=[],this.overlaySlots=[],this.postrollSlots=[];for(var c=this.context.getTemporalSlots(),e=0;e<c.length;e++){var f=c[e];switch(f.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL:this.prerollSlots.push(f);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:this.midrollSlots.push(f);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:this.overlaySlots.push(f);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL:this.postrollSlots.push(f)}}this.context.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,a.proxy(o,this)),this.context.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,a.proxy(q,this)),this.sourceUrlQueue=[this.clip],r.call(this)}function o(a){}function p(a){if(a.subType==tv.freewheel.SDK.EVENT_AD_IMPRESSION){var b=a.slot.getAdInstances();b.length>0&&("video"===b[0]._creative.getBaseUnit()?(this.$player.on("timeupdate",w[this.player.id].onTimeUpdated),this.dispatcher.publish(d.AD_START,{duration:a.slot.getTotalDuration(),baseUnit:b[0]._creative.getBaseUnit()})):this.dispatcher.publish(d.AD_PREROLL_BLOCKED,{duration:a.slot.getTotalDuration(),baseUnit:b[0]._creative.getBaseUnit()}))}}function q(a){var b=a.slot.getTimePositionClass();switch(console.log("FreeWheelPlugin onSlotEnded slotTimePositionClass: "+b),b){case tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL:if(this.prerollSlots.length)if(this.prerollSlots.shift(),this.prerollSlots.length)this.prerollSlots[0].play();else{try{this.$player.on("ended",w[this.player.id].onContentVideoEnded),this.$player.on("timeupdate",w[this.player.id].onContentVideoTimeUpdated)}catch(c){}this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_PLAYING),this.$player.off("timeupdate",w[this.player.id].onTimeUpdated);var e={duration:a.slot?a.slot.getTotalDuration():null};this.dispatcher.publish(d.AD_COMPLETE,{player:this.player,data:e})}break;case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:this.currentPlayingSlotType=null,this.midrollSlots.shift(),r.call(this);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:this.currentPlayingSlotType=null;break;case tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL:this.postrollSlots.length&&(this.postrollSlots.shift(),this.postrollSlots.length?this.postrollSlots[0].play():(this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_COMPLETED),n.call(this,{success:!0})))}}function r(){this.prerollSlots.length?this.prerollSlots[0].play():(this.$player.off("timeupdate",w[this.player.id].onTimeUpdated),this.dispatcher.publish(d.AD_COMPLETE,{player:this.player,data:{}}))}function s(){return this.currentPlayingSlotType===tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL?void console.log("Received content video ended event dispatched from midroll, ignore"):(this.sourceUrlQueue.shift(),this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED),void(this.midrollSlots.length?(this.currentPlayingSlotType=tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL,this.midrollSlots[0].play()):this.sourceUrlQueue.length?r.call(this):this.postrollSlots&&this.postrollSlots.length?(this.$player.off("ended",w[this.player.id].onContentVideoEnded),this.$player.off("timeupdate",w[this.player.id].onContentVideoTimeUpdated),this.postrollSlots[0].play()):this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_COMPLETED)))}function t(){if(!this.overlaySlots.length)return void this.$player.off("timeupdate",w[this.player.id].onContentVideoTimeUpdated);if(this.currentPlayingSlotType===tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL)return void console.log("Received content video timeUpdate event dispatched when midroll playing, ignore");for(var a=0;a<this.overlaySlots.length;a++){var b=this.overlaySlots[a],c=b.getTimePosition(),d=this.$player.currentTime;if(d-c>=0&&1>=d-c&&!this.currentPlayingSlotType)return this.overlaySlots.splice(a,1),console.log("onContentVideoTimeUpdated timePositionClass: "+b.getTimePositionClass()),void b.play()}}function u(a){this.dispatcher.publish(d.AD_TIME_UPDATE,{currentTime:a.target.currentTime})}var v=e(),w={};return i.prototype=Object.create(c.prototype),i.prototype.constructor=i,i.prototype["super"]=c.prototype,i.prototype.requestAd=function(a){this.config.adBlocker&&f.setConfig({testAdUrl:this.config.adBlocker.adBlockTestLocation,enabled:this.config.adBlocker.enabled}),f.detectAdBlock(k.bind(this),j.bind(this),a)},i.prototype.destroy=function(){},i.prototype.toString=function(){return"FreewheelPlugin"},i}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-advertising/plugins/AdPluginFactory",["bam-video-advertising/plugins/AdPlugin","bam-video-advertising/plugins/AuditudePlugin","bam-video-advertising/plugins/FreewheelPlugin"],b):"object"==typeof exports?module.exports=b(require("bam-video-advertising/plugins/AdPlugin"),require("bam-video-advertising/plugins/AuditudePlugin"),require("bam-video-advertising/plugins/FreewheelPlugin")):a.AdPluginFactory=b(a.AdPlugin,a.AuditudePlugin,a.FreewheelPlugin)}(this,function(a,b,c){"use strict";function d(a){var d="";return a.freewheel&&a.freewheel.isFreeWheelSite?d=c.prototype.toString():a.auditude&&a.auditude.isAuditudeSite&&(d=b.prototype.toString()),d}var e={};e[a.prototype.toString()]=a,e[b.prototype.toString()]=b,e[c.prototype.toString()]=c;var f={getPlugin:function(a,b,c){return c||(c=d(b)),e[c]?new e[c](a,b):null}};return f}),define("bam-video-players/players/helpers/nativeVideoExtension",[],function(){return function(a){if(!(a instanceof HTMLVideoElement))throw new Error("videoElement should be an instance of HTMLVideoElement");var b=Object.assign(a,{_loaded:!1,_src:a.src||null,_playOnLoad:!1});Object.defineProperty(a,"src",{get:function(){return console.log("nativeVideoExtension ::: get src"),this._src},set:function(a){console.log("nativeVideoExtension ::: set src",a),this._loaded=this._src===a,this._src=a},enumerable:!0,configurable:!0}),b.addEventListener("loadeddata",function(){console.log("nativeVideoExtension ::: loadeddata"),b._loaded=!0,b._playOnLoad&&(b._playOnLoad=!1,HTMLVideoElement.prototype.play.call(b))}),b.addEventListener("ended",function(){console.log("nativeVideoExtension ::: ended"),b._loaded=!1}),b.play=function(){console.log("nativeVideoExtension ::: play"),b._loaded?(b._playOnLoad=!1,HTMLVideoElement.prototype.play.call(b)):b._playOnLoad=!0}}}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/HTML5Player",["jquery","lodash/lodash","bam-video-players/players/AbstractPlayer","bam-video-players/players/VideoPlayerFactory","bam-video-players/utils/VideoUtils","bam-video-players/players/ui/controls/HTML5PlayerControls","bam-video-players/players/ui/controls/AdControls","bam-video-players/events/PlayerEvents","bam-video-players/events/UserEvents","bam-video-advertising/plugins/AdPluginFactory","intent-registry/IntentRegistry","./helpers/nativeVideoExtension"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("bam-video-players/players/AbstractPlayer"),require("bam-video-players/players/VideoPlayerFactory"),require("bam-video-players/utils/VideoUtils"),require("bam-video-players/players/ui/controls/HTML5PlayerControls"),require("bam-video-players/players/ui/controls/AdControls"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/UserEvents"),require("bam-video-advertising/plugins/AdPluginFactory"),require("intent-registry/IntentRegistry"),require("./helpers/nativeVideoExtension")):a.HTML5Player=b(a.jQuery,a.lodash,a.AbstractPlayer,a.VideoPlayerFactory,a.VideoUtils,a.HTML5PlayerControls,a.AdControls,a.PlayerEvents,a.UserEvents,a.AdPluginFactory,a.IntentRegistry,a.nativeVideoExtension)}(this,function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a,c){m.prototype["super"].constructor.call(this,a,c),this.supportsHls=e.browserNativelySupportsHls(this.device),b.get(a,"html5.callInitOnCreation",!0)&&this.init.call(this)}function n(a){console.log(this,"setAdvertisingProps:"),a.freewheelProps=k.get.intent.sync(k.enums.freewheel,[a])}function o(){var a=this;a.$player.find('track[kind="captions"]').remove(),a.hasTrackEl=!1}function p(a){var b=this;b.$player.append('<track kind="captions" label="English Captions" src="'+a.trackPath+'" default />'),b.$player[0].textTracks[0].mode=b.showCC?"showing":"hidden",b.hasTrackEl=!0}function q(a){var b=this,c=b.$player[0].textTracks[0].mode;if("hidden"===c||"disabled"===c)b.showCC=!1,window.localStorage.getItem("video_cc_selected")&&window.localStorage.removeItem("video_cc_selected"),window.localStorage.getItem("video_cc_selected_date")&&window.localStorage.removeItem("video_cc_selected_date");else{var d=(new Date).getTime();b.showCC=!0,window.localStorage.setItem("video_cc_selected","true"),window.localStorage.setItem("video_cc_selected_date",d)}}function r(){var a=this;a.clip&&a.$player.attr("src")!==a.clip.path&&(w.call(a),a.$player.off().one("play",function(b){a.dispatcher.publish(h.MEDIA_START,{player:a})}).attr("src",a.clip.path?a.clip.path:"").trigger("load"),t.call(a)),a.$player.one("loadedmetadata",s.bind(a))}function s(){var a=this;a.duration=a.player.duration,a.device.is.desktop?(a.controls&&a.controls.destroy(),a.controls=new f(a)):a.$player.attr("controls",!0)}function t(){var b=this;b.$player.on("play",function(){b.adPlaying||(b.isPaused&&(b.isResumed=!0,b.dispatcher.publish(h.MEDIA_RESUME,{player:b})),b.isPlaying=!0,b.isPaused=!1)}).on("playing",function(a){b.adPlaying||b.dispatcher.publish(h.MEDIA_PLAYING,{player:b})}).on("pause",function(){!b.adPlaying&&b.isPlaying&&(b.isPlaying=!1,b.isPaused=!0,b.isResumed=!1,b.player.ended||b.dispatcher.publish(h.MEDIA_PAUSED,{player:b}))}).on("ended",function(){b.adPlaying||(b.isPlaying=!1,b.dispatcher.publish(h.MEDIA_COMPLETE,{player:b}))}).on("timeupdate",function(a){b.adPlaying||b.dispatcher.publish(h.MEDIA_TIME_UPDATE,{player:b,currentTime:b.$player.prop("currentTime")})}).on("touchend",function(a){b.muted&&b.unmute()}),A[b.id+"::_onFullScreenChange"]=a.proxy(u,this),a(this.document).off("webkitfullscreenchange mozfullscreenchange MSFullscreenChange fullscreenchange webkitbeginfullscreen webkitendfullscreen",A[b.id+"::_onFullScreenChange"]).on("webkitfullscreenchange mozfullscreenchange MSFullscreenChange fullscreenchange webkitbeginfullscreen webkitendfullscreen",A[b.id+"::_onFullScreenChange"])}function u(a){switch(this.isFullScreen=!1,a.type){case"webkitfullscreenchange":case"mozfullscreenchange":case"fullscreenchange":this.isFullScreen=this.document.fullScreen||this.document.mozFullScreen||this.document.webkitIsFullScreen;break;case"MSFullscreenChange":this.isFullScreen=this.document.msFullscreenElement;break;case"webkitbeginfullscreen":this.isFullScreen=!0;break;case"webkitendfullscreen":this.isFullScreen=!1}this.dispatcher.publish(h.FULLSCREEN_CHANGE,{player:this,isFullScreen:this.isFullScreen}),this.isFullScreen?(this.$container.addClass("video-player--fullscreen"),this.dispatcher.publish(h.FULLSCREEN_START,{player:this})):(this.$container.removeClass("video-player--fullscreen"),this.dispatcher.publish(h.FULLSCREEN_END,{player:this}))}function v(){if(window.localStorage)if("true"==window.localStorage.getItem("video_cc_selected")){if(window.localStorage.getItem("video_cc_selected_date")){var a=(new Date).getTime();a-2592e6<parseInt(window.localStorage.getItem("video_cc_selected_date"))?this.showCC=!0:(this.showCC=!1,window.localStorage.removeItem("video_cc_selected_date"))}}else this.showCC=!1,window.localStorage.getItem("video_cc_selected")&&window.localStorage.removeItem("video_cc_selected")}function w(){this.isPlaying=!1,this.isPaused=!1,this.isResumed=!1}function x(){var a=b.get(this.config,"volume",B);0==a?(this.setVolume(B),this.volume=B,this.mute()):(this.setVolume(a),this.volume=a)}function y(a){a.preventDefault(),console.log("_onContextMenu: PlayerType = bam-video-players HTML5Player 2.5.x")}function z(){this.dispatcher.on(i.MUTE_REQUESTED,this.mute.bind(this)),this.dispatcher.on(i.UNMUTE_REQUESTED,this.unmute.bind(this)),this.$container.on("contextmenu",y.bind(this))}var A={},B=70;return m.prototype=Object.create(c.prototype),m.prototype.constructor=m,m.prototype["super"]=c.prototype,m.prototype.play=function(a){var c=this,d=a&&a.length?a[0]:null;d&&c.setClip(d);var e=function(){v.call(c);var a=c.$player.find('track[kind="captions"]');d&&((!d.metaData.closed_captioned&&c.hasTrackEl||d.metaData.closed_captioned&&c.hasTrackEl&&d.trackPath!==a.attr("src"))&&o.call(c),d.metaData.closed_captioned&&!c.hasTrackEl&&p.call(c,d),(!c.isResumed||c.clip&&c.$player.attr("src")!==c.clip.path)&&r.call(c)),c.dispatcher.publish(h.PLAYLIST_START,{player:c,data:d}),c.$player.trigger("play")},f=function(){console.debug("ADBLOCK DETECTED");var a=b.get(c.config,"advertising.adBlocker.continuePlayback",!0);a?e():c.dispatcher.publish(h.AD_BLOCK_FOUND,{player:c,data:d})};c.$player.one("play",function(){!c.adPlaying&&c.clip&&c.$player.attr("src")!==c.clip.path&&c.$player.attr("src",null),c.adManager&&!c.isResumed?(c.adManager.dispatcher.one(c.adEvents.AD_START,function(a,b){c.hasTrackEl&&o.call(c),c.controls?c.controls.hide():c.$player.attr("controls",!1),console.warn("bvp: adPlaying: true"),c.adPlaying=!0}),c.adManager.dispatcher.one(c.adEvents.AD_COMPLETE,function(){console.warn("bvp: adPlaying: false"),c.adPlaying=!1,w.call(c),e()}),c.adManager.dispatcher.one(c.adEvents.AD_ERROR,e),c.adManager.dispatcher.one(c.adEvents.AD_PREROLL_BLOCKED,function(a,b){c.adPlaying||e()}),c.adManager.dispatcher.one(c.adEvents.AD_BLOCK_DETECTED,f),c.adPlaying?console.warn("bvp: adPlaying: bypass adRequest"):(console.warn("bvp: adPlaying: adRequest allowed"),c.adManager.requestAd(d))):e()}).trigger("play")},m.prototype.setClip=function(a){Array.isArray(a)&&a.length&&(a=a[0]),this.clip=a||null,this.clip.trackPath="",this.clip.metaData.closed_captioned?this.clip.metaData.hasVttFile?this.clip.trackPath=this.clip.metaData.closed_captions_location_vtt:this.clip.metaData.closed_captioned=!1:this.clip.metaData.hasVttFile&&(this.clip.trackPath=this.clip.metaData.closed_captions_location_vtt,this.clip.metaData.closed_captioned=!0),w.call(this),n.call(this,a),b.get(this.config,"autoplaySupported",!0)?console.log("BVP: autoplaySupport: true"):(console.log("BVP: autoplaySupport: false"),this.$player.attr("src",null)),this.dispatcher.publish(h.MEDIA_SET,{player:this})},m.prototype.pause=function(){this.isPlaying&&this.player.pause()},m.prototype.resume=function(){m.prototype["super"].resume.call(this),this.isPlaying||this.player.play()},m.prototype.mute=function(){console.log("HTML5Player ::: mute"),this.muted||(m.prototype["super"].mute.call(this),this.volume=100*this.$player.prop("volume"),this.$player.prop("muted",!0))},m.prototype.unmute=function(){console.log("HTML5Player ::: unmute"),this.muted&&(m.prototype["super"].unmute.call(this),0===this.volume&&(this.volume=11),this.setVolume(this.volume),this.$player.prop("muted",!1))},m.prototype.setVolume=function(a){isNaN(a)&&(a=B),a>=100?a=100:0>=a?a=0:this.muted&&this.unmute(),this.volume=a,m.prototype["super"].setVolume.call(this,a),this.$player.prop("volume",a/100)},m.prototype.resize=function(a,b){this.player&&m.prototype["super"].resize.call(this,a,b)},m.prototype.setBeginPoster=function(a){m.prototype["super"].setBeginPoster.call(this,a),this.$player.attr("poster",a)},m.prototype.enterFullScreen=function(){var b=this.$container.get(0);b&&!this.isFullScreen&&(m.prototype["super"].enterFullScreen.call(this),b.requestFullscreen?b.requestFullscreen():b.msRequestFullscreen?b.msRequestFullscreen():b.webkitRequestFullScreen?b.webkitRequestFullScreen():b.webkitEnterFullscreen?b.webkitEnterFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():a(this.player).css({position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%",background:"#000"}))},m.prototype.exitFullScreen=function(){this.isFullScreen&&(m.prototype["super"].exitFullScreen.call(this),this.document.exitFullscreen?this.document.exitFullscreen():this.document.msExitFullscreen?this.document.msExitFullscreen():this.document.mozCancelFullScreen?this.document.mozCancelFullScreen():this.document.webkitExitFullscreen&&this.document.webkitExitFullscreen())},m.prototype.toString=function(){return"HTML5Player"},m.prototype.init=function(b){if(!this.loaded){a(b).is("video")?this.player=b:this.player=this.document.createElement("video"),a(this.player).attr("id",this.id).addClass("video-player__screen").attr("preload",!1).attr("crossorigin","anonymous").attr("playsinline",!0),this.$container.append(this.player).wrap(a("<div>",{"class":"vpp"})),this.$player=a(this.player,this.$container),this.adManager=j.getPlugin(this.player,a.extend({},this.config.property_state,this.config.advertising)),this.adEvents=this.eventBus.getRegisteredEventsByKey("AD_EVENTS"),this.adManager&&this.device.is.desktop&&(this.adControls=new g(this.$player,this.dispatcher,this.id)),this.config.autoPlay&&this.$player.prop("autoplay",!0),this.hasTrackEl=!1;var c=this.config.playlist&&this.config.playlist.length?this.config.playlist[0].path:void 0;"undefined"!=typeof c&&this.setClip(c),x.call(this),z.call(this),this.loaded=!0,!this.device.is.desktop&&this.$player&&this.$player[0]&&this.$player[0].textTracks&&window.localStorage&&this.$player[0].textTracks.addEventListener("change",q.bind(this)),this.dispatcher.publish(h.PLAYER_LOADED,{player:this})}},d.registerPlayer(m),m}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/events/FullScreenEvents",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.FullScreenEvents=b(a.lodash)}(this,function(a){var b={WEBKIT_FS_CHANGE:"webkitfullscreenchange",WEBKIT_FS_BEGIN:"webkitbeginfullscreen",WEBKIT_FS_END:"webkitendfullscreen",MOZ_FS_CHANGE:"mozfullscreenchange",FS_CHANGE:"fullscreenchange",MS_FS_CHANGE:"MSFullscreenChange"};return b.ALL_string=a.values(b).join(" "),b}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/events/VideoClientEvents",["bandwagon/bandwagon"],b):"object"==typeof exports?module.exports=b(require("bandwagon/bandwagon")):a.UserEvents=b(a.Bandwagon)}(this,function(a){var b={VIDEO_NODE_ADDED:"videoNodeAdded",VIDEO_NODE_REMOVED:"videoNodeRemoved",VIDEO_NODE_REUSED:"videoNodeReused"};return b}),define("text!bam-video-players/players/ui/templates/HTML5CorePlayerControls.html",[],function(){return'<div id="{{elemId}}" class="video-controls skin-{{skin}} js-video-controls">\n    <div class="video-controls__branding"></div>\n    <div class="video-controls__wrapper">\n        {{#unless isLive}}<div class="video-controls__icon video-controls__start js-video-controls__start"></div>{{/unless}}\n        {{#if isLive}}<div class="video-controls__icon video-controls__live js-video-controls__live"></div>{{/if}}\n        <div class="video-controls__icon video-controls__play js-video-controls__play"></div>\n        <div class="video-controls__icon video-controls__pause js-video-controls__pause"></div>\n        <div class="video-controls__icon video-controls__rewind js-video-control__rewind"></div>\n        {{#unless isLive}}<div class="video-controls__icon video-controls__forward js-video-control__forward"></div>{{/unless}}\n        <div class="video-controls__icon video-controls__fullscreen js-video-controls__fullscreen"></div>\n        <div class="video-controls__timer js-video-controls__timer">\n            {{#unless isLive}}\n            <span class="video-timer__elapsed js-video-timer__elapsed">{{elapsed}}</span>\n            <span class="video-timer__divider"></span>\n            <span class="video-timer__duration">{{duration}}</span>\n            {{/unless}}\n        </div>\n        <div class="video-controls__volume js-video-controls__volume">\n            <i class="video-controls__icon video-volume__icon js-video-volume__icon">\n                <span class="video-volume__icon--status js-video-volume__icon--status"></span>\n            </i>\n            <div class="video-volume__slider-wrapper">\n                <div class="video-volume__slider js-video-volume__slider">\n                    <div class="video-volume__slider-range js-video-volume__slider-range"></div>\n                    <div class="video-volume__slider-handle js-video-volume__slider-handle"></div>\n                </div>\n            </div>\n        </div>\n        <div class="video-controls__scrubber js-video-controls__scrubber">\n            <div class="video-scrubber__progress js-video-scrubber__progress"></div>\n            <div class="video-scrubber__buffer js-video-scrubber__buffer"></div>\n            <div class="video-scrubber__handle js-video-scrubber__handle"></div>\n        </div>\n    </div>\n</div>\n'}),function(a,b){if("function"==typeof define&&define.amd)define("bam-video-players/players/ui/controls/HTML5CorePlayerControls",["jquery","handlebars/handlebars","moment/moment","text!bam-video-players/players/ui/templates/HTML5CorePlayerControls.html","bam-video-players/events/PlayerEvents","bam-video-players/events/UserEvents","moment-duration-format/lib/moment-duration-format","jqueryui-amd/jqueryui/draggable"],b);else if("object"==typeof exports)module.exports=b(require("jquery"),require("handlebars/handlebars"),require("moment/moment"),require("text!bam-video-players/players/ui/templates/HTML5CorePlayerControls.html"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/UserEvents"),require("moment-duration-format/lib/moment-duration-format"),require("jqueryui-amd/jqueryui/draggable"));else{var c=$("#ControlsTemplate").html();a.HTML5CorePlayerControls=b(a.jQuery,a.Handlebars,a.moment,c,a.PlayerEvents,a.UserEvents,null,null)}}(this,function(a,b,c,d,e,f){"use strict";function g(a,b,c,d,e,f,g){this.$player=a,this.$container=b,this.dispatcher=c,this.getDurationInSecs=d,this.skin=e,this.elemId="video-controls__"+g,this.playingCssClass="video-controls--playing",this.timeout=null,this.controlsConfig=f,h.call(this)}function h(){this.timeFormat=this.getDurationInSecs()>3600?"hh:mm:ss":"mm:ss";var e=b.compile(d),f=c.duration(0,"seconds").format(this.timeFormat,{trim:!1}),g=c.duration(this.getDurationInSecs()||0,"seconds").format(this.timeFormat,{trim:!1});1===this.$player.siblings("#"+this.elemId).length?this.$player.siblings("#"+this.elemId).replaceWith(e({elemId:this.elemId,skin:this.skin,elapsed:f,duration:g,isLive:this.controlsConfig.isLive})):this.$player.after(e({elemId:this.elemId,skin:this.skin,elapsed:f,duration:g,isLive:this.controlsConfig.isLive})),this.$controls=a("#"+this.elemId),this.$scrubber=this.$controls.find(".js-video-controls__scrubber"),this.$volume=this.$controls.find(".js-video-controls__volume"),E.call(this,this.$player.prop("volume"),this.$player.prop("muted")),i.call(this),J.call(this)}function i(){this.$controls.find(".js-video-controls__start").on("click",a.proxy(j,this)),this.$controls.find(".js-video-controls__play").on("click",a.proxy(k,this)),this.$controls.find(".js-video-controls__pause").on("click",a.proxy(n,this)),this.$controls.find(".js-video-controls__fullscreen").on("click",a.proxy(o,this)),this.$controls.find(".js-video-control__rewind").on("click",a.proxy(q,this)),this.$controls.find(".js-video-control__forward").on("click",a.proxy(r,this)),this.$controls.find(".js-video-controls__live").on("click",a.proxy(s,this)),this.$volume.find(".js-video-volume__icon").on("click",B.call(this)),this.$volume.find(".js-video-volume__slider-handle").draggable({containment:".js-video-volume__slider",axis:"y",drag:a.proxy(z,this)}),this.$volume.find(".js-video-volume__slider").on("click",a.proxy(A,this)),this.$scrubber.find(".js-video-scrubber__handle").draggable({containment:this.$scrubber,axis:"x",start:a.proxy(w,this),drag:a.proxy(u,this),stop:a.proxy(v,this)}),this.$scrubber.on("click",a.proxy(x,this)),O[this.elemId+"::_onTimeUpdate"]=a.proxy(t,this),O[this.elemId+"::_onPlaying"]=a.proxy(l,this),O[this.elemId+"::_onPausedEnded"]=a.proxy(m,this),O[this.elemId+"::_onMouseMove"]=a.proxy(F,this),O[this.elemId+"::_onMouseOver"]=a.proxy(G,this),O[this.elemId+"::_onMouseOut"]=a.proxy(H,this),O[this.elemId+"::_onBufferProgress"]=a.proxy(I,this),O[this.elemId+"::_onFullScreenChange"]=a.proxy(p,this),O[this.elemId+"::_onVolumeChange"]=a.proxy(D,this),this.dispatcher.on(e.MEDIA_TIME_UPDATE,O[this.elemId+"::_onTimeUpdate"]),this.dispatcher.on(e.MEDIA_PLAYING,O[this.elemId+"::_onPlaying"]),this.dispatcher.on(e.MEDIA_PAUSED,O[this.elemId+"::_onPausedEnded"]),this.dispatcher.on(e.MEDIA_COMPLETE,O[this.elemId+"::_onPausedEnded"]),this.dispatcher.on(e.FULLSCREEN_CHANGE,O[this.elemId+"::_onFullScreenChange"]),this.dispatcher.on(e.FULLSCREEN_CHANGE,O[this.elemId+"::_onFullScreenChange"]),this.dispatcher.on(e.MEDIA_VOLUME_CHANGED,O[this.elemId+"::_onVolumeChange"]),this.$container.on("mousemove",O[this.elemId+"::_onMouseMove"]),this.$controls.on("mouseover",O[this.elemId+"::_onMouseOver"]),this.$container.on("mouseout",O[this.elemId+"::_onMouseOut"]),this.$controls.on("mouseout",O[this.elemId+"::_onMouseOut"]),this.$player.on("progress",O[this.elemId+"::_onBufferProgress"])}function j(a){this.dispatcher.publish(f.GOTO_START_REQUESTED)}function k(a){this.dispatcher.publish(f.PLAY_REQUESTED)}function l(a,b){this.$controls.addClass(this.playingCssClass)}function m(a,b){this.$controls.removeClass(this.playingCssClass)}function n(a){this.dispatcher.publish(f.PAUSE_REQUESTED)}function o(a){this.dispatcher.publish(f.TOGGLE_FULL_SCREEN_REQUESTED)}function p(a,b){var c=this.$controls.find(".js-video-controls__fullscreen");a.isFullScreen?c.addClass("video-controls__exit-fullscreen"):c.removeClass("video-controls__exit-fullscreen")}function q(a){this.dispatcher.publish(f.REWIND_REQUESTED)}function r(a){this.dispatcher.publish(f.FASTFORWARD_REQUESTED)}function s(a){this.dispatcher.publish(f.LIVE_REQUESTED)}function t(a,b){var d=c.duration(a.currentTime,"seconds").format(this.timeFormat,{trim:!1}),e=c.duration(a.duration,"seconds").format(this.timeFormat,{trim:!1}),f=a.duration>0?a.currentTime/a.duration:0;this.$controls.find(".js-video-timer__elapsed").text(d),this.$controls.find(".video-timer__duration").text(e),
y.call(this,f)}function u(a,b){var c=b.position.left/this.$scrubber.width(),d=c*this.getDurationInSecs();y.call(this,c),this.dispatcher.publish(f.SEEK_REQUESTED,d)}function v(a,b){var c=b.position.left/this.$scrubber.width(),d=c*this.getDurationInSecs();this.dispatcher.publish(f.SEEK_ENDED,d)}function w(a,b){this.dispatcher.publish(f.SEEK_STARTED)}function x(a){this.dispatcher.publish(f.SEEK_STARTED);var b=(a.pageX-this.$scrubber.offset().left)/this.$scrubber.width(),c=b*this.getDurationInSecs();y.call(this,b),this.dispatcher.publish(f.SEEK_REQUESTED,c),this.dispatcher.publish(f.SEEK_ENDED)}function y(a){this.$scrubber.find(".js-video-scrubber__progress").css(M(a)),this.$scrubber.find(".js-video-scrubber__handle").css({left:a*this.$scrubber.width()})}function z(a,b){var c=this.$controls.find(".js-video-volume__slider");if(!c.is(":visible"))return!1;var d=c.height(),e=c.find(".js-video-volume__slider-handle").outerHeight();d-=e;var f=Math.abs(d-b.position.top)/d;C.call(this,f)}function A(a){var b=this.$volume.find(".js-video-volume__slider"),c=Math.abs(b.height()+b.offset().top-a.pageY)/b.height();C.call(this,c)}function B(){var a=this;return function(b){0===a.currentVolume||a.$player.prop("muted")?a.dispatcher.publish(f.UNMUTE_REQUESTED):a.dispatcher.publish(f.MUTE_REQUESTED)}}function C(a){E.call(this,a),this.dispatcher.publish(f.ADJUST_VOLUME_REQUESTED,a)}function D(a){var b=a.volume/100;E.call(this,b)}function E(a,b){this.currentVolume=a,b&&(a=0);var c=this.$volume.find(".js-video-volume__slider"),d=this.$volume.find(".js-video-volume__slider-handle"),e=c.height()-d.outerHeight()-a*(c.height()-d.outerHeight());0===a?this.$volume.find(".js-video-volume__icon--status").removeClass("video-volume__icon--half").removeClass("video-volume__icon--full").addClass("video-volume__icon--muted"):.5>a?this.$volume.find(".js-video-volume__icon--status").removeClass("video-volume__icon--muted").removeClass("video-volume__icon--full").addClass("video-volume__icon--half"):this.$volume.find(".js-video-volume__icon--status").removeClass("video-volume__icon--muted").removeClass("video-volume__icon--half").addClass("video-volume__icon--full"),c.find(".js-video-volume__slider-range").css(M(a,"Y")),c.find(".js-video-volume__slider-handle").css({top:e})}function F(a){L.call(this,!0),J.call(this)}function G(a){L.call(this,!0),K.call(this)}function H(a){L.call(this,!1)}function I(a){try{var b=a.target.buffered.end(a.target.buffered.length-1),c=this.getDurationInSecs();if(c>0){var d=b/c;this.$scrubber.find(".js-video-scrubber__buffer").css(M(d))}}catch(a){N("onBufferProgress ERROR:",a.message)}}function J(a){var b=this;a=a||8e3,K.call(b),b.timeout=window.setTimeout(function(){L.call(b,!1)},a)}function K(){window.clearTimeout(this.timeout)}function L(a){a?this.$controls.removeClass("video-controls--hide"):this.$controls.addClass("video-controls--hide"),this.dispatcher.publish(e.CONTROLS_VISIBILITY_CHANGED,{player:self,visible:a}),y.call(this,this.$player.prop("currentTime")/this.getDurationInSecs())}function M(a,b){return b=b&&-1!==["X","Y"].indexOf(b.toUpperCase())?"scale"+b.toUpperCase():"scaleX",{"-webkit-transform":b+"("+a+")","-moz-transform":b+"("+a+")","-ms-transform":b+"("+a+")","-o-transform":b+"("+a+")",transform:b+"("+a+")"}}function N(){console.log("[HTML5CorePlayerControls]",Array.prototype.slice.call(arguments).join(" "))}var O={};return g.prototype={show:function(){this.$player.siblings("#"+this.elemId).show()},hide:function(){this.$player.siblings("#"+this.elemId).hide()},destroy:function(){this.$controls.find(".js-video-controls__play").off(),this.$controls.find(".js-video-controls__pause").off(),this.$controls.find(".js-video-controls__fullscreen").off(),this.$controls.find(".js-video-control__rewind").off(),this.$controls.find(".js-video-control__forward").off(),this.$controls.find(".js-video-controls__live").off(),this.$volume.find(".js-video-volume__icon").off("click",B.call(this)),this.$volume.find(".js-video-volume__slider-handle").draggable("destroy"),this.$volume.find(".js-video-volume__slider").off(),this.$scrubber.find(".js-video-scrubber__handle").draggable("destroy"),this.$scrubber.off(),this.dispatcher.off(e.MEDIA_TIME_UPDATE,O[this.elemId+"::_onTimeUpdate"]),this.dispatcher.off(e.MEDIA_PLAYING,O[this.elemId+"::_onPlaying"]),this.dispatcher.off(e.MEDIA_PAUSED,O[this.elemId+"::_onPausedEnded"]),this.dispatcher.off(e.MEDIA_COMPLETE,O[this.elemId+"::_onPausedEnded"]),this.dispatcher.off(e.FULLSCREEN_CHANGE,O[this.elemId+"::_onFullScreenChange"]),this.dispatcher.off(e.MEDIA_VOLUME_CHANGED,O[this.elemId+"::_onVolumeChange"]),this.$container.off("mousemove",O[this.elemId+"::_onMouseMove"]),this.$controls.off("mouseover",O[this.elemId+"::_onMouseOver"]),this.$container.off("mouseout",O[this.elemId+"::_onMouseOut"]),this.$controls.off("mouseout",O[this.elemId+"::_onMouseOut"]),this.$player.off("progress",O[this.elemId+"::_onBufferProgress"]),this.$player.siblings("#"+this.elemId).remove()}},g}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/ui/helpers/PlayerUIHelper",["jquery","lodash/lodash","device/device","bam-video-players/players/ui/controls/HTML5CorePlayerControls","bam-video-players/players/ui/controls/AdControls","bam-video-players/events/FullScreenEvents"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("device/device"),require("bam-video-players/players/ui/controls/HTML5CorePlayerControls"),require("bam-video-players/players/ui/controls/AdControls"),require("bam-video-players/events/FullScreenEvents")):a.PlayerUIHelper=b(a.jQuery,a._,a.deviceBootstrap,a.HTML5CorePlayerControls,a.AdControls,a.FullScreenEvents)}(this,function(a,b,c,d,e,f){"use strict";function g(a){this.nodeName=a||"video",this.device=c()}function h(c,e,f,g){if(i(this.device)){c&&(j("Destroying Controls"),c.destroy());var h=function(){var a=e.getDurationInSecs()||e.duration||0;return a},k=b.get(e,"config.skinProps.skin",null),l=a(this.defaultID);return c=new d(f,l,e.dispatcher,h,k,g,e.toString()),j("Adding Controls"),c}var m=a(this.getHTMLElement());m.attr("controls",!0)}function i(a){return a.is.desktop}function j(){console.log("[PlayerUIHelper]",Array.prototype.slice.call(arguments).join(" "))}function k(){console.warn("[PlayerUIHelper]",Array.prototype.slice.call(arguments).join(" "))}return g.prototype.getHTMLElement=function(a){var c=b.get(a||{},"slot"),d=c?document.getElementById(c):null;return d||(d=document.createElement(this.nodeName),j("getHTMLElement view created node=",this.nodeName)),d},g.prototype.getFullScreenDiv=function(a,b){var c="fullScreenDiv",d=b;return d||(j("getFullScreenDiv view created id=",c),d=document.createElement(c),d.id=c),d},g.prototype.addStyleToView=function(b,c){try{a(b).attr("id","html5-player-"+c+(new Date).getTime()).addClass("video-player__screen").attr("controls",!i(this.device))}catch(d){k("error styling the video element",d)}},g.prototype.addVPPContainer=function(b,c){try{return c.addClass("video-player").append(b).wrap(a("<div>",{"class":"vpp"})),a(".vpp")}catch(d){k("error wrapping the video video with the vpp container",d)}},g.prototype.addHTMLControls=function(a,b,c){var d={isLive:!1};h.call(this,a,b,c,d)},g.prototype.addHTMLLiveControls=function(a,b,c){var d={isLive:!0};h.call(this,a,b,c,d)},g.prototype.addAdControls=function(a,b){return!a&&i(this.device)?a=new e(b.$video,b.dispatcher,b.id):void 0},g.prototype.addDOMMutationObserver=function(c,d){var e=a(c)[0],f=new MutationObserver(function(c){c.forEach(function(c){var e=b.get(c,"addedNodes[0]"),f=!1;if(d&&b.isFunction(d)&&(f=d(e)),e&&!f){var g=b.get(e,"id",null);g&&a("#"+g).css("pointer-events","none")}})}),g={attributes:!1,childList:!0,characterData:!1};f.observe(e,g)},g.prototype.enterFullScreen=function(a){a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.webkitRequestFullScreen?a.webkitRequestFullScreen():a.webkitEnterFullscreen?a.webkitEnterFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():k("can't use built in methods to enter full screen")},g.prototype.exitFullScreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():k("can't use built in methods to exit full screen")},g.prototype.isFullScreen=function(a,b){var c=!1;switch(a){case f.WEBKIT_FS_CHANGE:c=document.webkitIsFullScreen;break;case f.MOZ_FS_CHANGE:c=document.mozFullScreen;break;case f.FS_CHANGE:c=document.fullScreen;break;case f.MS_FS_CHANGE:c=document.msFullscreenElement;break;case f.WEBKIT_FS_BEGIN:c=!0;break;case f.WEBKIT_FS_END:c=!1}var d="video-player--fullscreen";return c?b.addClass(d):b.removeClass(d),c},g.prototype.resize=function(a,b,c,d){c.width(a).height(b),d.width(a).height(b)},g.prototype.setBeginPoster=function(a,b){j("setBeginPoster"),a.attr("poster",b)},g.prototype.addAutoPlayProp=function(a,b){a&&a.prop("autoplay",1==b)},g}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/helpers/PlayerStateHelper",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.PlayerStateHelper=b(a.lodash)}(this,function(a){function b(b){var d=a.includes(c,b);return d||this.warn(b+" is NOT listed as a valid key"),!0}var c=["adPlaying","clip","currentUrl","hasControls","isPaused","isPlaying","isResumed","muted","volume"],d=function(a,b){this.playerName=a,this.shouldThrowErrorsOnInvalidKeys=b||!1,this._state={}};return d.prototype.setState=function(c,d){b.call(this,c)&&a.set(this._state,c,d)},d.prototype.getState=function(c){return b.call(this,c)?a.get(this._state,c):void 0},d.prototype.reset=function(){this.setState("adPlaying",!1),this.setState("isPlaying",!1),this.setState("isPaused",!1),this.setState("isResumed",!1)},d.prototype.log=function(){console.log("["+this.playerName+"_StateHelper]",Array.prototype.slice.call(arguments).join(" "))},d.prototype.warn=function(){var a="WARNING: ["+this.playerName+"_StateHelper]";if(a+=Array.prototype.slice.call(arguments).join(" "),console.warn(a),this.shouldThrowErrorsOnInvalidKeys)throw new Error(a)},d}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/AbstractHTMLPlayer",["jquery","lodash/lodash","bam-video-players/players/AbstractPlayer","bam-video-players/players/VideoPlayerFactory","bam-video-players/events/PlayerEvents","bam-video-players/events/UserEvents","bam-video-players/events/FullScreenEvents","bam-video-players/events/VideoClientEvents","bam-video-players/players/ui/helpers/PlayerUIHelper","bam-video-players/players/helpers/PlayerStateHelper","bam-video-advertising/plugins/AdPluginFactory","intent-registry/IntentRegistry"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("bam-video-players/players/AbstractPlayer"),require("bam-video-players/players/VideoPlayerFactory"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/UserEvents"),require("bam-video-players/events/FullScreenEvents"),require("bam-video-players/events/VideoClientEvents"),require("bam-video-players/players/ui/helpers/PlayerUIHelper"),require("bam-video-players/players/helpers/PlayerStateHelper"),require("bam-video-advertising/plugins/AdPluginFactory"),require("intent-registry/IntentRegistry")):a.AbstractHTMLPlayer=b(a.jQuery,a._,a.AbstractPlayer,a.VideoPlayerFactory,a.PlayerEvents,a.UserEvents,a.FullScreenEvents,a.VideoClientEvents,a.PlayerUIHelper,a.PlayerStateHelper,a.AdPluginFactory,a.IntentRegistry)}(this,function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a,c,d,e){m.prototype["super"].constructor.call(this,a,c),this._errorMsg=ga,d&&(ca("constructed videoClient"),this.videoClient=d),e&&(this.dispatcher=e),this.playerStateHelper=new j(this.toString()),b.get(a,"all.callInitOnCreation",!0)&&this.init.call(this)}function n(a){ca("setAdvertisingProps"),a.freewheelProps=l.get.intent.sync(l.enums.freewheel,[a])}function o(c){if(ca("addAdManager"),this.config){var d=b.get(this.config,"property_state"),e=b.get(this.config,"advertising");this.adManager=k.getPlugin(c.get(0),a.extend({},d,e)),this.adEvents=this.eventBus.getRegisteredEventsByKey("AD_EVENTS"),this.adManager&&(this.adControls=this.playerUIHelper.addAdControls(this.adControls,this))}}function p(){return 1==u.call(this,"adPlaying")}function q(a){C(),t.call(this,"adPlaying",!0)}function r(a){ca("_onAdNotPlaying"),t.call(this,"adPlaying",!1),x.call(this)}function s(a){this.adManager.dispatcher.one(this.adEvents.AD_START,q.bind(this)),this.adManager.dispatcher.one(this.adEvents.AD_COMPLETE,r.bind(this)),this.adManager.dispatcher.one(this.adEvents.AD_ERROR,r.bind(this)),this.adManager.requestAd(a)}function t(a,b){this.playerStateHelper.setState(a,b)}function u(a){return this.playerStateHelper.getState(a)}function v(){this.playerStateHelper.reset()}function w(b,c){var d=null,e=null;if(d=b.$video,e=b.video,d||(d=a(c).find("video"),e=d[0]),d&&e){var f=b.getPlayerEventDispatcher();f.dispatchEvent(h.VIDEO_NODE_ADDED,{$videoNode:d,videoNode:e})}}function x(){var a=u.call(this,"clip"),b=!u.call(this,"isResumed"),c=""==u.call(this,"currentUrl");ca("play()"),a&&(b||c)&&B.call(this),F.call(this,e.PLAYLIST_START,{data:u.call(this,"clip")}),y.call(this,"internalPlay")}function y(a){try{this.videoClient.play()}catch(b){fa.call(this,b,a)}t.call(this,"isPlaying",!0),t.call(this,"isPaused",!1)}function z(a){return b.get(a,"isLive",!1)}function A(a){ca("_setClip"),Array.isArray(a)&&a.length&&(a=a[0]),t.call(this,"clip",a||null),v.call(this),t.call(this,"currentUrl",""),t.call(this,"isLive",z(a)),n(a);try{this.videoClient.setClip({path:""})}catch(b){fa.call(this,b,"setClip")}F.call(this,e.MEDIA_SET)}function B(){ca("_loadClip");var a=u.call(this,"currentUrl"),c=u.call(this,"clip");if(!b.has(c,"path"))throw new Error(ga.NO_PATH_DEFINED);var d=b.get(c,"path");if(c&&a!=d){t.call(this,"currentUrl",d);try{this.videoClient.setClip(c)}catch(e){fa.call(this,e,"loadClip/setClip")}}}function C(){da("hideControls not implemented yet")}function D(){var a=this.getVideoElement();if(!a)throw new Error("$video is not avail, fix this");u.call(this,"isLive")?this.controls=this.playerUIHelper.addHTMLLiveControls(this.controls,this,a):this.controls=this.playerUIHelper.addHTMLControls(this.controls,this,a),this.playerUIHelper.addDOMMutationObserver(this.htmlView,G.bind(this)),t.call(this,"hasControls",!0)}function E(){var a=b.get(this.config,"volume",ia);0==a?(t.call(this,"volume",ia),this.setVolume(ia),this.mute()):this.setVolume(a)}function F(a,c){var d=c||{},e={player:this};b.set(e,"player.clip",u.call(this,"clip")),b.merge(d,e),this.dispatcher.publish(a,d)}function G(a){var b=!1;return this.controls&&(b=a===this.controls.$controls.get(0)),b}function H(a){this.dispatcher.removeAllListeners(),this.$container.off(),this.$document.off();try{a.removeAllListeners()}catch(b){ea(this.toString(),b)}}function I(a){a.addEventListener(e.MEDIA_COMPLETE,$.bind(this)),a.addEventListener(e.MEDIA_ERROR,Z.bind(this)),a.addEventListener(e.MEDIA_PAUSED,X.bind(this)),a.addEventListener(e.MEDIA_PLAYING,W.bind(this)),a.addEventListener(e.MEDIA_START,V.bind(this)),a.addEventListener(e.MEDIA_TIME_UPDATE,Y.bind(this)),a.addEventListener(e.META_DATA_LOADED,U.bind(this)),a.addEventListener(h.VIDEO_NODE_ADDED,J.bind(this)),a.addEventListener(h.VIDEO_NODE_REMOVED,K.bind(this)),a.addEventListener(h.VIDEO_NODE_REUSED,L.bind(this)),this.dispatcher.on(f.ADJUST_VOLUME_REQUESTED,this.setVolume.bind(this)),this.dispatcher.on(f.FASTFORWARD_REQUESTED,S.bind(this)),this.dispatcher.on(f.GOTO_START_REQUESTED,N.bind(this)),this.dispatcher.on(f.PAUSE_REQUESTED,this.pause.bind(this)),this.dispatcher.on(f.PLAY_REQUESTED,this.play.bind(this)),this.dispatcher.on(f.REWIND_REQUESTED,R.bind(this)),this.dispatcher.on(f.SEEK_ENDED,Q.bind(this)),this.dispatcher.on(f.SEEK_REQUESTED,this.seek.bind(this)),this.dispatcher.on(f.SEEK_STARTED,O.bind(this)),this.dispatcher.on(f.TOGGLE_FULL_SCREEN_REQUESTED,T.bind(this)),this.dispatcher.on(f.MUTE_REQUESTED,this.mute.bind(this)),this.dispatcher.on(f.UNMUTE_REQUESTED,this.unmute.bind(this)),this.dispatcher.on(f.LIVE_REQUESTED,M.bind(this)),this.dispatcher.on(f.TOUCHEND,ba.bind(this)),this.$document.on(g.ALL_string,_.bind(this)),this.$container.on("contextmenu",aa.bind(this))}function J(a){var c=a.$videoNode;ca("_onVideoClientNodeAdded",b.keys(a)),c&&(this.$video=c,this.$video.prop("autoPlay",b.get(this,"config.autoPlay",!1)===!0),o.call(this,this.$video),E.call(this),this.dispatcher.publish(h.VIDEO_NODE_ADDED,a))}function K(a){ca("_onVideoClientNodeRemoved"),this.dispatcher.publish(h.VIDEO_NODE_REMOVED,{videoClient:a.videoClient})}function L(a){ca("_onVideoNodeReused"),this.dispatcher.publish(h.VIDEO_NODE_REUSED,a)}function M(){ca("seekToLive");try{this.videoClient.seekToLive()}catch(a){fa.call(this,a,"seekToLive")}}function N(){ca("gotoStart",this,this.videoClient),P.call(this,0)}function O(){ca("seekStarted")}function P(a){ca("seek",a);try{this.videoClient.seek(a)}catch(b){fa.call(this,b,"seek")}}function Q(a){ca("seekEnded")}function R(a){var b=a||ha,c=Math.max(0,this.getCurrentTimeInSecs()-b);ca("rewind",c),this.seek(c)}function S(a){var b=a||ha,c=Math.min(this.getDurationInSecs(),this.getCurrentTimeInSecs()+b);ca("fastforward",c),this.seek(c)}function T(){var a=u.call(this,"isFullScreen");a?this.exitFullScreen():this.enterFullScreen()}function U(a){ca("onMetaDataLoaded"),this.duration=this.getDurationInSecs(),F.call(this,e.META_DATA_LOADED)}function V(a){p.call(this)||(ca("onMediaStart"),D.call(this),F.call(this,e.MEDIA_START),t.call(this,"isPlaying",!0),t.call(this,"isPaused",!1))}function W(a){ca("_onMediaPlaying"),p.call(this)||(t.call(this,"isPlaying",!0),t.call(this,"isPaused",!1),F.call(this,e.MEDIA_PLAYING),F.call(this,e.OVERLAY_LOADING_HIDE))}function X(a){p.call(this)||(t.call(this,"isPlaying",!1),t.call(this,"isPaused",!0),F.call(this,e.MEDIA_PAUSED))}function Y(a){if(!p.call(this)){0==this.duration&&(this.duration=this.getDurationInSecs());var c=b.get(a,"timeInSecs",b.get(a,"detail.timeInSecs",0)),d=b.get(a,"duration",b.get(a,"detail.duration",0));F.call(this,e.MEDIA_TIME_UPDATE,{currentTime:c,duration:d})}}function Z(a){var c="unknown media error";b.get(a,"message")?c=b.get(a,"message"):b.get(a,"detail.message")&&(c=b.get(a,"detail.message")),F.call(this,e.MEDIA_ERROR,{message:c})}function $(a){p.call(this)||(t.call(this,"isPlaying",!1),t.call(this,"isPaused",!1),F.call(this,e.MEDIA_COMPLETE),F.call(this,e.PLAYLIST_COMPLETE))}function _(a){ca("_onFullScreenChange",a);var b=this.playerUIHelper.isFullScreen(a.type,this.$fullScreenDiv);t.call(this,"isFullScreen",b),F.call(this,e.FULLSCREEN_CHANGE,{isFullScreen:this.isFullScreen}),b?F.call(this,e.FULLSCREEN_START):F.call(this,e.FULLSCREEN_END)}function aa(a){a.preventDefault(),ca("PlayerType == "+this.getPlayerInfo())}function ba(a){var b=u.call(this,"muted");b&&this.unmute()}function ca(){console.log("[AbstractHTMLPlayer]",Array.prototype.slice.call(arguments).join(" "))}function da(){console.warn("[AbstractHTMLPlayer]",Array.prototype.slice.call(arguments).join(" "))}function ea(){console.error("[AbstractHTMLPlayer]",Array.prototype.slice.call(arguments).join(" "))}function fa(a,c){var d=b.get(this.config,"all.showDeveloperErrors",!1),f="DEV ERROR >> "+c+":"+a.message;if(!d)throw a;ea(f),this.dispatcher.publish(e.DEVELOPER_ERROR,{player:this,message:f})}var ga={NO_PATH_DEFINED:"The clip needs to have a path property"};m.prototype=Object.create(c.prototype),m.prototype.constructor=m,m.prototype["super"]=c.prototype;var ha=10,ia=70;return m.prototype.play=function(a){m.prototype["super"].play.call(this);var b=this,c=a&&a.length?a[0]:null;c&&b.setClip(c);var d=u.call(this,"isPaused");d&&t.call(this,"isResumed",!0);var e=this.adManager&&!u.call(this,"isResumed");e?s.call(b,c):x.call(b)},m.prototype.pause=function(){if(ca("pause()",1==u.call(this,"isPlaying")),1==u.call(this,"isPlaying")){m.prototype["super"].pause.call(this);try{this.videoClient.pause()}catch(a){fa.call(this,a,"pause")}}},m.prototype.resume=function(){p.call(this)||0==u.call(this,"isPlaying")&&(ca("resume()"),t.call(this,"isResumed",!0),F.call(this,e.MEDIA_RESUME),y.call(this,"resume/play"))},m.prototype.setVolume=function(a){isNaN(a)&&(a=ia);var c=a;1>=a&&(c=100*a),c=b.clamp(c,0,100),ca("setVolume("+c+")"),t.call(this,"volume",c);try{this.videoClient.setVolume(c)}catch(d){fa.call(this,d,"setVolume:"+c)}F.call(this,e.MEDIA_VOLUME_CHANGED,{volume:c})},m.prototype.enterFullScreen=function(){var a=this.$fullScreenDiv.get(0);u.call(this,"isFullScreen");ca("enterFullScreen",a),a&&!this.isFullScreen&&(m.prototype["super"].enterFullScreen.call(this),this.playerUIHelper.enterFullScreen(a))},m.prototype.exitFullScreen=function(){ca("exitFullScreen");var a=u.call(this,"isFullScreen");a&&(m.prototype["super"].exitFullScreen.call(this),this.playerUIHelper.exitFullScreen())},m.prototype.mute=function(){ca("mute"),console.log("AbsrtactHTMLPlayer ::: mute"),t.call(this,"muted",!0);try{this.videoClient.mute()}catch(a){fa.call(this,a,"mute")}F.call(this,e.MEDIA_VOLUME_CHANGED,{volume:0})},m.prototype.unmute=function(){ca("unmute"),console.log("AbsrtactHTMLPlayer ::: unmute"),t.call(this,"muted",!1);try{this.videoClient.unmute()}catch(a){fa.call(this,a,"unmute")}var b=u.call(this,"volume");0===b&&(b=.11),this.setVolume(b),F.call(this,e.MEDIA_VOLUME_CHANGED,{volume:b})},m.prototype.resize=function(b,c){this.playerUIHelper.resize(b,c,this.$container,a(this.htmlView)),F.call(this,e.MEDIA_RESIZE)},m.prototype.seek=function(a){ca("seek",a);try{this.videoClient.seek(a)}catch(b){fa.call(this,b,"seek")}},m.prototype.setBeginPoster=function(a){ca("setBeginPoster"),this.playerUIHelper.setBeginPoster(this.getVideoElement(),a)},m.prototype.setClip=function(a){A.call(this,a)},m.prototype.init=function(a){if(this.isInitialized)return void ca("can't initialize twice");this.playerUIHelper=new i(a);var b=this.playerUIHelper.getHTMLElement(this.config);b&&!this.videoClient?(this.playerUIHelper.addStyleToView(b,this.toString()),this.$vpp=this.playerUIHelper.addVPPContainer(b,this.$container),this.$fullScreenDiv=this.playerUIHelper.getFullScreenDiv(this.config,this.$container),this.videoClient=this.createVideoClient(b,this.$fullScreenDiv),this.htmlView=b,ca("init","mediaPlayer created")):this.videoClient&&ca("init","client already exists, just adding listeners"),I.call(this,this.videoClient.getPlayerEventDispatcher()),w.call(this,this.videoClient,b),ca("init PLAYER_LOADED"),F.call(this,e.PLAYER_LOADED),this.isInitialized=!0},m.prototype.getDurationInSecs=function(){return this.videoClient.getDurationInSecs()},m.prototype.getCurrentTimeInSecs=function(){return this.videoClient.getCurrentTimeInSecs()},m.prototype.destroy=function(){ca("destroy"),H.call(this,this.videoClient.getPlayerEventDispatcher()),this.controls&&this.controls.destroy()},m.prototype.getPlayerInfo=function(){return this.toString()},m.prototype.toString=function(){return"AbstractHTMLPlayer"},m.prototype.createVideoClient=function(a,b){return null},m.prototype.getVideoElement=function(){return this.$video},d.registerPlayer(m),m}),function(a,b){"function"==typeof define&&define.amd?define("html5-primetime/primetime/PrimetimeSDKProxy",["lodash/lodash","bluebird/js/browser/bluebird"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bluebird/js/browser/bluebird")):a.PrimetimeSDKProxy=b(a._,a.Promise)}(this,function(a,b){"use strict";function c(){this.AdobePSDK=null,this.sdkIsSetPromiseResolve=null,this.sdkIsSetPromiseReject=null,this.sdkIsSetPromise=new b(function(a,b){this.sdkIsSetPromiseResolve=a,this.sdkIsSetPromiseReject=b}.bind(this))}function d(){console.log("[PrimetimeSDKProxy]",Array.prototype.slice.call(arguments).join(" "))}c.prototype.loadSDK=function(){try{require(["html5-primetime/lib/adobe/AdobePSDK.module"],function(a){d.call(this,"init AdobePSDK"),a?this.setSDK(a):AdobePSDK?this.setSDK(AdobePSDK):this.sdkIsSetPromiseReject("AdobePSDK could not be found in scope")}.bind(this))}catch(a){warn.call(this,"init ERROR",a.message),this.sdkIsSetPromiseReject(a)}},c.prototype.setSDK=function(a){this.AdobePSDK=a,this.sdkIsSetPromiseResolve(a)},c.prototype.getSDKPromise=function(){return this.sdkIsSetPromise},c.prototype.getOperationFailureMessage=function(a){var b=null;return a!==this.AdobePSDK.PSDKErrorCode.SUCCESS&&(b=a===this.AdobePSDK.PSDKErrorCode.ILLEGAL_STATE?"Illegal State":"unknown status: "+a),b},c.prototype.getEvents=function(){return this.AdobePSDK.PSDKEventType},c.prototype.getVersion=function(){return this.AdobePSDK.Version},c.prototype.getLivePoint=function(){return this.AdobePSDK.MediaPlayer.LIVE_POINT},c.prototype.getDefaultVolume=function(){return this.AdobePSDK.MediaPlayer.DEFAULT_VOLUME},c.prototype.getPlayerStatuses=function(){return this.AdobePSDK.MediaPlayerStatus},c.prototype.toString=function(){return"PrimetimeSDKProxy"};var e=new c;return e}),function(a,b){"function"==typeof define&&define.amd?define("html5-primetime/primetime/PrimetimeFactories",["lodash/lodash","html5-primetime/primetime/PrimetimeSDKProxy"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("html5-primetime/primetime/PrimetimeSDKProxy")):a.PrimetimeFactories=b(a.lodash,a.PrimetimeSDKProxy)}(this,function(a,b){function c(){return l||m?!1:(m=!0,b.loadSDK(),!0)}function d(a){if(null==a)throw new Error("AdobePSDK can not be null");k=a,l=!0,j("init")}function e(){if(!l)throw new Error("Please call PrimetimeFactories.init() first")}function f(a){j("PrimetimeFactories.create_mediaResource"),e();var b=new k.MediaResource(a,g(a),new k.Metadata);return b}function g(a){var b,c=function(a,b){return-1!==a.toUpperCase().indexOf(b.toUpperCase(),a.length-b.length)},d=a.split("?")[0];if(d=d.trim(),c(d,".mpd")||c(d,"(format=mpd-time-csf)"))b=k.MediaResourceType.DASH;else if(c(d,".m3u8"))b=k.MediaResourceType.HLS;else{if(!c(d,".mp4")&&!c(d,".mp3"))return j("getResourceType: Resource type not supported. Only types supported are HLS and DASH."),k.PSDKErrorCode.kECInvalidArgument;b=k.MediaResourceType.ISOBMFF}return b}function h(a){console.log("PrimetimeFactories.create_itemConfig"),e();var b=a,c=new k.NetworkConfiguration;if(b){var d=new k.CORSConfig;d.enableEncryptionRequest=b,c.CORSConfig=d}var f=new k.MediaPlayerItemConfig;return f.networkConfiguration=c,f}function i(a){e();var b=new k.MediaPlayer,c=new k.MediaPlayerView(a);return b.view=c,b}function j(){console.log("[PrimetimeFactories]",Array.prototype.slice.call(arguments).join(" "))}var k=null,l=!1,m=!1,n=b.getSDKPromise().then(function(a){d(a)});return{init:d,setup:c,isReady:n,create:{mediaResource:f,itemConfig:h,player:i}}}),function(a,b){"function"==typeof define&&define.amd?define("html5-primetime/primetime/PrimetimePlayerClient",["jquery","lodash/lodash","bandwagon/bandwagon","bluebird/js/browser/bluebird","html5-primetime/primetime/PrimetimeFactories","html5-primetime/primetime/PrimetimeSDKProxy","bam-video-players/events/PlayerEvents"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("bandwagon/bandwagon"),require("bluebird/js/browser/bluebird"),require("html5-primetime/primetime/PrimetimeFactories"),require("html5-primetime/primetime/PrimetimeSDKProxy"),require("bam-video-players/events/PlayerEvents")):a.PrimetimePlayerClient=b(a.jQuery,a._,a.Bandwagon,a.Promise,a.PrimetimeFactories,a.PrimetimeSDKProxy,a.PlayerEvents)}(this,function(a,b,c,d,e,f,g){"use strict";function h(b,c,d){r("constructor"),this.htmlView=b,this.$video=a(b),this.$container=this.$video.parent(),this.container=this.$container[0],this.clipReader=d,this.inited=!1,this.config=c,this.getPlayerEventDispatcher(),this.listenersAdded=!1}function i(a,c){var d=b.get(a,"path");try{r.call(this,"_setClip()"),this.clip=a;if(d&&""!==d){r.call(this,"setClip.mediaResource",d);var f=e.create.mediaResource(d),g=a.includeCookiesOnEncryptedKeyRequests?a.includeCookiesOnEncryptedKeyRequests:!1;r.call(this,"setClip.itemConfig");var h=e.create.itemConfig(g),i=this.player.replaceCurrentResource(f,h);q.call(this,i,"replaceCurrentResource"),m.call(this)}else r.call(this,"_setClip. no url... calling reset"),this.reset()}catch(j){r.call(this,"setClip.error",this.player,">>",j),p.call(this,j,'could not set src to "'+d+'"')}}function j(){r("addListeners");var a=f.getEvents();this.listenersAdded=!0,this.player.addEventListener(a.STATUS_CHANGED,l.bind(this)),this.player.addEventListener(a.TIME_CHANGED,n.bind(this))}function k(){if(this.listenersAdded)throw new Error("Needs to be implemented")}function l(a){var b=this.dispatcher,c=f.getPlayerStatuses();switch(a.status){case c.IDLE:r("_onPlayerStatusChanged","IDLE");break;case c.INITIALIZING:r("_onPlayerStatusChanged","INITIALIZING");break;case c.INITIALIZED:r("_onPlayerStatusChanged","INITIALIZED"),this.initialized=!0;var d=this.player.prepareToPlay(f.getLivePoint());q.call(this,d,"prepareToPlay (from Initialized event)");break;case c.PREPARING:r("_onPlayerStatusChanged","PREPARING");break;case c.PREPARED:r("_onPlayerStatusChanged","PREPARED"),this.isSeeking=!1,b.dispatchEvent(g.META_DATA_LOADED),b.dispatchEvent(g.MEDIA_START),this.playRequested&&!this.playSuccessful&&this.play();break;case c.PLAYING:r("_onPlayerStatusChanged","PLAYING"),this.isSeeking=!1,this.seek(this.lastSeekTime),b.dispatchEvent(g.MEDIA_PLAYING);break;case c.PAUSED:r("_onPlayerStatusChanged","PAUSED"),this.isSeeking=!1,this.seek(this.lastSeekTime),b.dispatchEvent(g.MEDIA_PAUSED);break;case c.SEEKING:r("_onPlayerStatusChanged","SEEKING"),this.isSeeking=!0;break;case c.COMPLETED:r("_onPlayerStatusChanged","COMPLETED"),this.isSeeking=!1,b.dispatchEvent(g.MEDIA_COMPLETE),o.call(this);break;case c.COMPLETE:r("_onPlayerStatusChanged","COMPLETE"),b.dispatchEvent(g.MEDIA_COMPLETE);break;case c.RELEASED:r("_onPlayerStatusChanged","RELEASED");break;case AdobePSDK.MediaPlayerStatus.ERROR:r("_onPlayerStatusChanged","ERROR>>",a.metadata.getValue("DESCRIPTION")),b.dispatchEvent(g.MEDIA_ERROR,{message:a.metadata.getValue("DESCRIPTION")});break;default:r("_onPlayerStatusChanged","OTHER",a)}}function m(a){r.call(this,"_onMediaAttached"),this.dispatcher.dispatchEvent(g.MEDIA_ATTACHED)}function n(a){var b=this.dispatcher,c=a.time/1e3,d=this.getDurationInSecs();this.isLiveRightNow()&&(d=this.player.seekableRange.end/1e3),b.dispatchEvent(g.MEDIA_TIME_UPDATE,{timeInSecs:c,duration:d})}function o(){r("_onComplete",this.player.currentTime)}function p(a,c){var d=this.dispatcher,e=c||b.get(a,"message","e.message not available on event. You might need to debug more");r("onError",a),d.dispatchEvent(g.MEDIA_ERROR,{message:e})}function q(a,b){var c=f.getOperationFailureMessage(a);return c?(s("FAILED OPERATION",c,b),!1):(r("SUCCESSFUL OPERATION",b),!0)}function r(){console.log("[PrimetimePlayerClient]",Array.prototype.slice.call(arguments).join(" "))}function s(){console.warn("[PrimetimePlayerClient]",Array.prototype.slice.call(arguments).join(" "))}return h.prototype.toString=function(){return"PrimetimePlayerClient"},h.prototype.clientLibraryName=function(){return"tvsdk"},h.prototype.clientLibraryVersion=function(){return this.player.getVersion()},h.prototype.create=function(){var a,b;return this.multipleCallsPromise||(this.multipleCallsPromise=new d(function(c,d){a=c,b=d})),e.setup()&&(r.call(this,"creating..."),e.isReady.then(function(){r.call(this,"create.isReady"),this.player=this.createPlayer(),j.call(this),r.call(this,"created"),a()}.bind(this))["catch"](function(a){s.call(this,"failed to create",a),b()}.bind(this))),this.multipleCallsPromise},h.prototype.destroy=function(){this.player&&(r.call(this,"destroy"),k.call(this))},h.prototype.createPlayer=function(){return r.call(this,"createPlayer"),e.create.player(this.container)},h.prototype.getPlayerEventDispatcher=function(){if(!this.dispatcher){
var a=c.getInstanceByKey("PrimetimePlayer"+Date.now());this.dispatcher={addEventListener:function(b,c){a.on(b,c)},removeEventListener:function(b,c){a.off(b,c)},dispatchEvent:function(b,c){a.publish(b,c)},removeAllListeners:function(){a.removeAllListeners()}}}return this.dispatcher},h.prototype.reset=function(){var a=this.player.reset();this.lastSeekTime=null,q(a,"reset")},h.prototype.play=function(){if(r.call(this,"play()"),this.playRequested=!0,this.player)try{var a=this.player.play();this.playSuccessful=q(a,"play")}catch(b){p.call(this,b)}},h.prototype.pause=function(){if(r.call(this,"pause()"),this.player){var a=this.player.pause();q(a,"pause")}},h.prototype.setVolume=function(a){this.player?(r.call(this,"setVolume",a),this.player.volume=a/100):s.call(this,"this.player was not available during setVolume call")},h.prototype.seek=function(a){if(this.isSeeking)this.lastSeekTime=a;else if(this.lastSeekTime=null,null!=a&&this.player){var b=this.player.seekToLocal(1e3*a);q(b,"seek")}},h.prototype.seekToDate=function(a){s.call(this,"seekToDate: seekDate = "+a,"NOT IMPLEMENTED")},h.prototype.seekToLive=function(){this.seek(f.getLivePoint())},h.prototype.mute=function(){this.player&&(this.preMuteVolute=this.player.volume,this.player.volume=0)},h.prototype.unmute=function(){this.player&&(this.player.volume=this.preMuteVolume||f.getDefaultVolume())},h.prototype.getDurationInSecs=function(){var a=this.player.seekableRange,b=a.duration;return b/1e3},h.prototype.getSeekableRange=function(){var a=this.player.seekableRange;if(!a){var b=0,c=this.player.duration/1e3;a={start:b,end:c,duration:c}}return a},h.prototype.getClientMetrics=function(){return{version:f.getVersion().version}},h.prototype.applyConfig=function(){s.call(this,"applyConfig:","NOT IMPLEMENTED")},h.prototype.setClip=function(a,c){var d=this;return this.player?i.call(this,a,c):(r.call(d,"setClip"),d.playRequested=!1,d.playSuccessful=!1,b.get(a,"forceMediaAttachedEvent")&&(r.call(this,"forceMediaAttachedEvent"),m.call(this)),this.create().then(function(){r.call(d,"setClip.create resolved clipPath",a.path),i.call(d,a,c)})["catch"](function(a){r.call(d,a)}))},h.prototype.setAdaptiveBitrateConstraints=function(a){s.call(this,"setAdaptiveBitrateConstraints:","NOT IMPLEMENTED")},h.prototype.getLiveTime=function(){return null},h.prototype.isLiveRightNow=function(){return this.player?this.player.currentItem.isLive:!1},h.prototype.getCurrentTimeInSecs=function(){return this.player?this.player.currentTime/1e3:0},h.prototype.enableClosedCaptions=function(){s.call(this,"enableClosedCaptions:","NOT IMPLEMENTED")},h.prototype.setSelectedAudioTrackByLanguage=function(){s.call(this,"setSelectedAudioTrackByLanguage:","NOT IMPLEMENTED")},h.prototype.setAuthenticationCallback=function(a){s.call(this,"setAuthenticationCallback:","NOT IMPLEMENTED")},h}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/PrimetimePlayer",["jquery","lodash/lodash","bam-video-players/players/AbstractHTMLPlayer","bam-video-players/players/VideoPlayerFactory","bam-video-players/events/PlayerEvents","bam-video-players/events/UserEvents","bam-video-players/events/FullScreenEvents","bam-video-players/players/ui/helpers/PlayerUIHelper","html5-primetime/primetime/PrimetimePlayerClient"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("bam-video-players/players/AbstractHTMLPlayer"),require("bam-video-players/players/VideoPlayerFactory"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/UserEvents"),require("bam-video-players/events/FullScreenEvents"),require("bam-video-players/players/ui/helpers/PlayerUIHelper"),require("html5-primetime/primetime/PrimetimePlayerClient")):a.PrimetimePlayer=b(a.jQuery,a._,a.AbstractHTMLPlayer,a.VideoPlayerFactory,a.PlayerEvents,a.UserEvents,a.FullScreenEvents,a.PlayerUIHelper,a.PrimetimePlayerClient)}(this,function(a,b,c,d,e,f,g,h,i){"use strict";function j(a,b,c){j.prototype["super"].constructor.call(this,a,b,c),this.supportsHls=!0}return j.prototype=Object.create(c.prototype),j.prototype.constructor=j,j.prototype["super"]=c.prototype,j.prototype.toString=function(){return"PrimetimePlayer"},j.prototype.init=function(){j.prototype["super"].init.call(this,"primetimeVideo")},j.prototype.createVideoClient=function(a,b){return new i(a,b)},j.prototype.getVideoElement=function(){return a(this.htmlView).find("video")},d.registerPlayer(j),j}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/events/StreamMediaErrorEventEnums",[],b):"object"==typeof exports?module.exports=b():a.StreamMediaErrorEventEnums=b()}(this,function(){var a={DEFAULT_STREAMING_MEDIA_ERROR:"DEFAULT_STREAMING_MEDIA_ERROR",PLAYBACK_FAILED:"PLAYBACK_FAILED",NETSTREAM_FAILED_AUTH_PARAMS_REJECTED:"NETSTREAM_FAILED_AUTH_PARAMS_REJECTED",STREAM_NOT_FOUND:"STREAM_NOT_FOUND",FMS_DYNAMIC_STREAMING_SMIL_NOT_FOUND:"FMS_DYNAMIC_STREAMING_SMIL_NOT_FOUND",FMS_DYNAMIC_STREAMING_SMIL_PARSE_ERROR:"FMS_DYNAMIC_STREAMING_SMIL_PARSE_ERROR",HLS_NOT_ENABLED:"HLS_NOT_ENABLED",HLS_NOT_SUPPORTED:"HLS_NOT_SUPPORTED",HLS_PLAYBACK_FAILED:"HLS_PLAYBACK_FAILED"};return a}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/interfaces/FlashInterface",["bam-video-players/events/PlayerEvents","bam-video-advertising/events/AdEvents","bam-video-players/events/StreamMediaErrorEventEnums"],b):"object"==typeof exports?module.exports=b(require("bam-video-players/events/PlayerEvents"),require("bam-video-advertising/events/AdEvents"),require("bam-video-players/events/StreamMediaErrorEventEnums")):a.FlashInterface=b(a.PlayerEvents,a.AdEvents,a.StreamMediaErrorEventEnums)}(this,function(a,b,c){"use strict";function d(a){this.flashPlayer=a}return d.prototype={flashEvent:function(b,c){console.log("Generic Flash Event: ",b,c),this.flashPlayer.dispatcher.publish(a.GENERIC_FLASH_EVENT,{player:this.flashPlayer,eventType:b,payload:c})},onPlayerLoaded:function(){console.debug("onPlayerLoaded"),this.flashPlayer.dispatcher.publish(a.PLAYER_LOADED,{player:this.flashPlayer})},playlistParseComplete:function(){this.flashPlayer.dispatcher.publish(a.MEDIA_SET,{player:this.flashPlayer})},closedCaptionsOff:function(b){this.flashPlayer.dispatcher.publish(a.CLOSED_CAPTIONS_OFF,{player:this.flashPlayer})},closedCaptionsOn:function(b){this.flashPlayer.dispatcher.publish(a.CLOSED_CAPTIONS_ON,{player:this.flashPlayer})},enterFullScreen:function(){this.flashPlayer.dispatcher.publish(a.FULLSCREEN_START,{player:this.flashPlayer})},exitFullScreen:function(){this.flashPlayer.dispatcher.publish(a.FULLSCREEN_END,{player:this.flashPlayer})},enterMiniMode:function(){this.flashPlayer.dispatcher.publish(a.MINI_MODE_START,{player:this.flashPlayer})},exitMiniMode:function(){this.flashPlayer.dispatcher.publish(a.MINI_MODE_END,{player:this.flashPlayer})},exitFullpageMode:function(b){$(this).trigger(VideoEvents.SCREEN_SMALL),this.flashPlayer.dispatcher.publish(a.SCREEN_SMALL,{player:this.flashPlayer})},enterFullpageMode:function(b){this.flashPlayer.dispatcher.publish(a.SCREEN_LARGE,{player:this.flashPlayer})},contentStarted:function(b){try{this.flashPlayer.dispatcher.publish(a.MEDIA_START,{player:this.flashPlayer,data:b})}catch(c){console.log("Flash content failed to start.")}},contentComplete:function(b){this.flashPlayer.dispatcher.publish(a.MEDIA_COMPLETE,{player:this.flashPlayer,data:b})},pauseMedia:function(b){this.flashPlayer.dispatcher.publish(a.MEDIA_PAUSED,{player:this.flashPlayer,data:b})},resumeMedia:function(b){this.flashPlayer.dispatcher.publish(a.MEDIA_RESUME,{player:this.flashPlayer,data:b})},quickRewind:function(b){this.flashPlayer.dispatcher.publish(a.QUICK_REWIND,{player:this.flashPlayer,data:b})},quickForward:function(b){this.flashPlayer.dispatcher.publish(a.QUICK_FORWARD,{player:this.flashPlayer,data:b})},onTimecodeReceived:function(b){this.flashPlayer.dispatcher.publish(a.TIME_CODE,{player:this.flashPlayer,data:b})},onCuePointParameter:function(b){"undefined"!=typeof b.blackout_check&&this.flashPlayer.dispatcher.publish(a.CUE_POINT,{player:this.flashPlayer,data:b})},streamMediaError:function(b){var c="",d="";arguments.length>0&&(c=arguments[0],arguments.length>1&&(d=arguments[1])),console.debug("streamMediaError: errorType="+d+", errorMessage="+c);var e={errorType:d,clip:this.flashPlayer.clip};this.flashPlayer.dispatcher.publish(a.STREAM_MEDIA_ERROR,{player:this.flashPlayer,data:e})},auditudeAdPlaybackStart:function(a){this.flashPlayer.dispatcher.publish(b.AD_START)},auditudeAdPlaybackEnd:function(a){this.flashPlayer.dispatcher.publish(b.AD_COMPLETE)},adPlaybackStart:function(a){var c={duration:0};a&&parseFloat(a.adDuration)&&(c.duration=a.adDuration),this.flashPlayer.dispatcher.publish(b.AD_START,{player:this.flashPlayer,data:c})},adPlaybackEnd:function(a){this.flashPlayer.dispatcher.publish(b.AD_COMPLETE)},showDefaultCompanionAd:function(a){this.flashPlayer.dispatcher.publish(b.AD_DEFAULT_COMPANION)},companionAd:function(){if(arguments.length>0){var a=Array.prototype.slice.call(arguments[0]);this.flashPlayer.dispatcher.publish(b.AD_COMPANION,a)}},onPlaylistBegin:function(b){this.flashPlayer.dispatcher.publish(a.PLAYLIST_START,{player:this.flashPlayer,data:b})},onPlaylistComplete:function(b){this.flashPlayer.dispatcher.publish(a.PLAYLIST_COMPLETE,{player:this.flashPlayer})}},d}),function(a,b){"function"==typeof define&&define.amd?define("media-config/utils/MediaConfigUtils",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash")):a.MediaConfigUtils=b(a._)}(this,function(a){function b(c,d){if(c){var e,f;for(e in c)f=c[e],f&&!a.isArray(f)&&"object"==typeof f?b(f,d):d[e]=f}}var c={replaceTokens:function(a,b){var c=/\$\{([a-zA-Z0-9|_]+)\}/g;return a.replace(c,function(){return b[arguments[1]]?b[arguments[1]]:""})},merge:function(b,c,d){var e=d?b:{};return a.mergeWith(e,b,c,function(b,c){return a.isArray(b)?c:void 0}),e},getNodeAndChildrenAsFlatObject:function(a){var c={};return b(a,c),c}};return c}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/utils/FlashConfigHelper",["bam.url/url","media-config/utils/MediaConfigUtils","flashobject/utils/FlashUtils"],b):"object"==typeof exports?module.exports=b(require("bam.url/url"),require("media-config/utils/MediaConfigUtils"),require("flashobject/utils/FlashUtils")):a.FlashConfigHelper=b(null,a.MediaConfigUtils,null)}(this,function(a,b,c){"use strict";function d(){}function e(a){if("string"==typeof a.fvpOverride)return a.fvpOverride;var b=a.flash;if("string"==typeof b.swfPathOverride)return b.swfPathOverride;var c="undefined"!=typeof b&&"undefined"!=typeof b.name?b.name:"fvp",d="undefined"!=typeof b&&"undefined"!=typeof b.propertyFolder?b.propertyFolder:"mlbtv",e="undefined"!=typeof b&&"undefined"!=typeof b.release?b.release:"${fvp_release}",f="undefined"!=typeof b&&"undefined"!=typeof b.swfName?b.swfName:c,g=a.staticUrl;return g+="/video/flash/"+c+"/",g+=d+"/"+e,g+="/"+f+".swf"}function f(a,b){var d=b.flash;if("undefined"!=typeof d.stageVideoEnabled&&d.stageVideoEnabled===!0||"undefined"!=typeof d.hls&&"undefined"!=typeof d.hls.hlsPlaybackEnabled&&d.hls.hlsPlaybackEnabled===!0&&c.doesFlashPlayerVersionSupportHls()){var e="direct";d.flashparams;d.flashparams&&d.flashparams.wmodeForStageVideo&&(e=d.flashparams.wmodeForStageVideo),a.wmode=e}}function g(b){var c=a.Location(),d=c.getParam("debug");if(null!==d){var e=!1;("true"===d||"on"===d)&&(e=!0),b.debug=e}}function h(a,b){function d(a){return!(null===e[a]||"undefined"==typeof e[a])}var e=b;return a.auditudeZoneId=b.auditudeZoneID||50389,d("width")&&(a.matchWidth=b.width),d("height")&&(a.matchHeight=b.height),d("skin")&&(a.skin=c.getVersionSkin(b.skin)),d("adConfig")&&(a.adConfigXML=b.adConfig),a}function i(a,b){var c="VideoPlayerManager.FlashInstances."+a,d="https://ui.qasecure.bamstatic.com/fedapp/video/flash/fvp/mlb/2.1.2/xml/skin_config.xml",e={versionControl:"4.3",instanceName:c,version:"V2",release:"${fvp_release}",skin:"vpp2013fullscreenOnly",skinConfigURL:d,wmode:"direct",debug:!1,matchWidth:768,matchHeight:432,beginPosterPath:"http://media.sny.tv/sny/2015/10/06/images/snyf_519968983_th_13.jpg"};return $.extend(e,b.flash.vars||{}),e}function j(a,b){var c="VideoPlayerManager.FlashInstances."+a,d=k(b),e={versionControl:b.deprecated.versionControl,isFreeWheelSite:b.advertising.freewheel.isFreeWheelSite,instanceName:c,version:"V2",release:"${fvp_release}",skinConfigURL:d};return console.log("flashVars.instanceName="+e.instanceName+" and instanceName="+c),e=l(e,b),console.log("flashVars.instanceName="+e.instanceName+" and instanceName="+c),console.log("flashVars.elemId="+e.elemId+" and elemId="+a),console.log("set flashVars.instanceName=instanceName="+c),e.instanceName=c,e.elemId=a,console.log("flashVars.instanceName="+e.instanceName+" and instanceName="+c),console.log("flashVars.elemId="+e.elemId+" and elemId="+a),f(e,b),g(e),n(e,b),m(e),e}function k(a){var b=a.flash;if("string"==typeof b.skinConfigPathOverride)return b.skinConfigPathOverride;var c="undefined"!=typeof b&&"undefined"!=typeof b.name?b.name:"fvp",d="undefined"!=typeof b&&"undefined"!=typeof b.propertyFolder?b.propertyFolder:"mlbtv",e="undefined"!=typeof b&&"undefined"!=typeof b.release?b.release:"${fvp_release}",f=a.staticUrl;return f+="/video/flash/"+c+"/",f+=d+"/"+e,f+="/xml/skin_config.xml"}function l(a,c){var d=b.getNodeAndChildrenAsFlatObject(c);return a=$.extend(!0,{},a,d||{}),a=h(a,d)}function m(a){if(a){try{delete a.menu}catch(b){}var c,d;for(c in a)if(d=a[c],d&&!$.isArray(d)&&"object"==typeof d)try{delete a[c]}catch(b){}else if("string"==typeof d&&c.indexOf("TODO")>-1)try{delete a[c]}catch(b){}else if(null===d)try{delete a[c]}catch(b){}}}function n(a,b){}function o(a){var b={allowScriptAccess:"always",allowFullScreen:!0,menu:!1,wmode:"direct",scale:"noScale",align:"top",bgcolor:"#000000"};return $.extend(b,a.flash.params||{}),b}function p(a){var b=a.flash.flashparams,c={allowScriptAccess:b.allowScriptAccess,allowFullScreen:b.allowFullScreen,menu:b.menu,wmode:b.wmode,scale:b.scale,align:b.align?b.align:"top",bgcolor:b.bgcolor?b.bgcolor:"#000000"};return $.extend(c,a.flash.params||{}),f(c,a),c}return d.prototype=$.extend(d.prototype,{useTest:!1,getSwfUrlFromConfig:function(a){return this.useTest?"https://ui.qasecure.bamstatic.com/fedapp/video/flash/fvp/mlb/2.1.2/fvp.swf":e(a)},getFlashVarsFromConfig:function(a,b){return this.useTest?i(a,b):j(a,b)},getFlashParamsFromConfig:function(a){return this.useTest?o(a):p(a)}}),new d}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/utils/FlashPlaylistHelper",["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):a.FlashPlaylistHelper=b(a.jQuery)}(this,function(a){"use strict";function b(){}function c(b){function c(a){return!(null===b[a]||"undefined"==typeof b[a])}var d={type:"video",totalFailures:0};return d=a.extend(!0,d,b),c("milestones")&&(d.milestone_id=b.milestones.milestone_id,b.milestones.data&&(d.milestones=b.milestones.data)),d}return b.prototype=a.extend(b.prototype,{useTest:!1,getFlashPlaylist:function(b){var d,e=[];return a.each(b,function(a,b){d=c(b),e.push(d)}),e},normalizePlaylist:function(b){var c=[];return a.each(b,function(a,b){return"undefined"!=typeof b.stream||"undefined"!=typeof b.content_id||b.isHighlight?(c.push(b),!0):("undefined"!=typeof b.prerollPath&&(b.path=b.prerollPath),"undefined"!=typeof b.videoPath&&(b.path=b.videoPath),"undefined"==typeof b.type||"freewheelAd"!==b.type&&"video"!==b.type?(c.push({type:b.type,path:b.path}),!0):(c.push(b),!0))}),c}}),new b}),define("chromecast-utils/chromecast-events",[],function(){"use strict";return{CHROMECAST_CONNECTED:"app:cmd:chromecastConnected",CHROMECAST_DISCONNECTED:"app:cmd:chromecastDisconnected",CHROMECAST_MEDIA_STATUS:"app:cmd:chromecastMediaStatus",CHROMECAST_AVAILABLE:"app:cmd:chromecastAvailable",CHROMECAST_UNAVAILABLE:"app:cmd:chromecastUnavailable"}}),define("chromecast-utils/chromecast",["cast_sender","bandwagon/bandwagon","chromecast-utils/chromecast-events"],function(a,b,c){function d(){var a={PROD:Ga.chromecast.app_ids.PROD,BETA:Ga.chromecast.app_ids.BETA,QA:Ga.chromecast.app_ids.QA,DEV:Ga.chromecast.app_ids.PROD};return document.location.hostname.indexOf("local.")>-1||document.location.hostname.indexOf("dev.")>-1?a.DEV:document.location.hostname.indexOf("qa.")>-1?a.QA:document.location.hostname.indexOf("beta.")>-1?a.BETA:a.PROD}function e(a){a&&(Na=a),"undefined"!=typeof chrome&&chrome.cast&&chrome.cast.isAvailable?f():window.__onGCastApiAvailable=function(a,b){a?f():console.log(b)},window.addEventListener("load",function(){function a(a){navigator.onLine?"online":"offline"}document.getElementById("status");window.addEventListener("online",a),window.addEventListener("offline",a)})}function f(){pa=Ga.chromecast.namespace,Ka=Ga.chromecast.idProp;var a=d();La=b.getInstanceByKey(Na);var c=new chrome.cast.SessionRequest(a),e=new chrome.cast.ApiConfig(c,g,h,chrome.cast.AutoJoinPolicy.TAB_AND_ORIGIN_SCOPED);chrome.cast.initialize(e,i,j)}function g(a){if(console.log("sessionListener"),ua=a,"multi"===Ma){var c=b.getInstanceByKey(window.mp5Config.videocore.property_state.container);c.publish(Oa.SWITCH_LAYOUT_VIEW,"LAYOUT_STATE_STANDARD")}l(a)}function h(a){"available"===a?(console.log("Chromecast : receiverListener : available"),aa()):(console.log("Chromecast : receiverListener : unavailable"),ba())}function i(a){console.log("Chromecast : onInitSuccess")}function j(a){console.log("Chromecast : onInitError"),ka()}function k(){console.log("Chromecast : requestSession"),chrome.cast.requestSession(l,m),$()}function l(a){if(console.log("session success: "+a.sessionId),ra=!0,ua=a,ua.addMessageListener(pa,u),ua.addUpdateListener(x),console.log("Connected to "+ua.receiver.friendlyName+"; "+ua.displayName+"' (app id "+ua.appId+") is running"),x(),0!=ua.media.length){var b=ua.media[0],c=b.media.customData;if(b&&b.media&&b.media.customData&&Fa&&Fa[Ka]){var c=b.media.customData;c[Ka]===Fa[Ka]&&(ta=!1,za=!1,ca(),o(b),Ja=!0,ea())}}else G(Aa.getVolume()),Ha?q(sa,Ha,Ia.toString()):Ba.startTimeOffset?q(sa,Ba.startTimeOffset,Ia.toString()):q(sa,0,Ia.toString())}function m(a){_(),console.dir(a),console.log("requestSession : onRequestSessionError"),ka(),ra=!1}function n(){if(ra&&ua&&0!=ua.media.length){var a=ua.media[0],b=a.media.customData;if(a&&a.media&&a.media.customData&&Fa&&Fa[Ka]){var b=a.media.customData;b[Ka]===Fa[Ka]&&(ta=!1,za=!1,ca(),o(a),Ja=!0,ea())}}}function o(a){console.log("onMediaDiscovered"),Ca=a,Ca.addUpdateListener(z),v(),ua.addMediaListener(y),Ja=!0,ca(),ea()}function p(a,b){console.log("onMediaError : onMediaError"),ka(),console.dir(a)}function q(a,b,c){if($(),sa=a,Ha=parseFloat(b),Ia="true"===c,!ra)return ta=!0,void k();ta=!1,console.log("casting media to "+ua.receiver.friendlyName);var d={streamType:chrome.cast.media.StreamType.BUFFERED,currentTime:Ha,captions:Ia};for(var e in Fa)d[e]=Fa[e];d.isLive="true"===d.isLive,za=!0;var f=new chrome.cast.media.MediaInfo(d[Ka],"video/mp4");f.customData=d,f.streamType=chrome.cast.media.StreamType.BUFFERED;var g=new chrome.cast.media.LoadRequest(f);g.autoplay=!0,console.log("**** chromecast session.loadMedia"),console.trace(),ua.loadMedia(g,o,p),ma()}function r(a,b){var c={command:a,content:b};ua?(console.log("Sending message..."),ua.sendMessage(pa,c,s,t)):console.log("No session available to receive message.")}function s(a){console.log("Message sent successfully")}function t(a){console.log("Error sending message")}function u(a,b){console.log("***** Message from session *****"),console.dir(a),console.dir(b)}function v(){w(),z(),Da=setInterval(z,1e3)}function w(){clearInterval(Da)}function x(){return console.log("handleSessionStatusUpdated : "+ua.status),ua.media&&ua.media[0]&&Ca!=ua.media[0]&&(Ca=ua.media[0],Ca.addUpdateListener(z)),ua.status===chrome.cast.SessionStatus.DISCONNECTED?(w(),ra=!1,Ja=!1,console.log("chromecast is disconnected."),void da()):ua.status===chrome.cast.SessionStatus.CONNECTED?(console.log("chromecast is connected."),ra=!0,void ca()):ua.status===chrome.cast.SessionStatus.STOPPED?(w(),console.log("chromecast has stopped casting."),ra=!1,Ja=!1,K(),na(),fa(),void da()):void 0}function y(a){a&&Ca!=a&&(Ca=a,Ca.addUpdateListener(z))}function z(){ua.media&&ua.media[0]&&Ca!=ua.media[0]&&(Ca=ua.media[0],Ca.addUpdateListener(z));var a=!1,b=!1;Ca.playerState===chrome.cast.media.PlayerState.PLAYING&&(za=!1,la()),Ca.playerState===chrome.cast.media.PlayerState.PAUSED&&(za=!0,ma()),!ua.receiver.volume.muted&&0!==ua.receiver.volume.level||va?!ua.receiver.volume.muted&&va&&(a=!0,va=!1):(a=!0,va=!0),ua.receiver.volume.level!==xa&&(b=!0,xa=ua.receiver.volume.level),a&&!wa&&(va?ga():ha(),a=!1),b&&!ya&&ia(parseFloat(ua.receiver.volume.level)),ya=!0,wa=!0,Ea=Ca.getEstimatedTime();var c;Ca.media.metadata&&Ca.media.metadata.images&&(c=Ca.media.metadata.images),ja(JSON.stringify({state:Ca.playerState,mediaSessionId:Ca.mediaSessionId,position:Ca.getEstimatedTime(),duration:Ca.media.duration,customData:Ca.media.customData,metadata:Ca.media.metadata,images:c}))}function A(){Ia=!0,ra&&r("captions",!0)}function B(){Ia=!1,ra&&r("captions",!1)}function C(){ra&&Ca.play(new chrome.cast.media.PlayRequest)}function D(){ra&&Ca.pause(new chrome.cast.media.PauseRequest)}function E(){ra&&(va=!0,wa=!0,ua.setReceiverMuted(!0))}function F(){ra&&(va=!1,wa=!0,ua.setReceiverMuted(!1))}function G(a){ra&&(qa=a,ya=!0,console.log("set chromecast volume to "+parseFloat(a)),va?ua.setReceiverMuted(!0):ua.setReceiverVolumeLevel(parseFloat(a)))}function H(a){if(ra){var b=new chrome.cast.media.SeekRequest;b.currentTime=parseFloat(a),w(),Ca.seek(b,O,P)}}function I(){return"undefined"!=typeof window.dataBootstrap?window.dataBootstrap.image:null}function J(){return ra?"Casting to "+ua.receiver.friendlyName:""}function K(){ra&&chrome.cast.requestSession(function(){},function(){})}function L(){chrome.cast.requestSession(function(){},function(){})}function M(){ra&&(ra=!1,Ca.stop(),ua.stop(),ua.leave())}function N(){return ra}function O(){v()}function P(a){v()}function Q(a){Aa=a,Ba=a.clip}function R(a){Ba=a}function S(a){for(var b in a)Fa[b]=a[b]}function T(){return Ca.media.customData}function U(){return ua}function V(a){Ga=a}function W(a){Ma=a,"multi"===a?M():e()}function X(a){Ha=a}function Y(){return Ea}function Z(a,b,c){if(b){if(Ca&&Ca.media){var d=Ca.media.customData;Ka&&Fa&&d&&d[Ka]===Fa[Ka]&&null!==Aa&&void 0!==typeof Aa.execute&&(c?Aa.execute(a,c):Aa.execute(a))}}else null!==Aa&&void 0!==typeof Aa.execute&&(c?Aa.execute(a,c):Aa.execute(a))}function $(){Z("handleChromecastConnecting")}function _(){Z("handleChromecastConnectionError")}function aa(){Z("handleChromecastAvailable"),La.publish(Oa.CHROMECAST_AVAILABLE)}function ba(){Z("handleChromecastUnavailable"),La.publish(Oa.CHROMECAST_UNAVAILABLE)}function ca(){Z("handleChromecastConnected",!0),La.publish(Oa.CHROMECAST_CONNECTED)}function da(){Z("handleChromecastDisconnected",!1),La.publish(Oa.CHROMECAST_DISCONNECTED)}function ea(){Z("handleChromecastCastingStarted",!0)}function fa(){Z("handleChromecastCastingStopped",!0)}function ga(){Z("handleChromecastMuted",!0)}function ha(){Z("handleChromecastUnmuted",!0)}function ia(a){Z("handleChromecastVolumeChanged",!0,a.toString())}function ja(a){Z("handleChromecastMediaStatusUpdate",!0,a),La.publish(Oa.CHROMECAST_MEDIA_STATUS,a)}function ka(){Z("handleChromecastError",!0)}function la(){Z("handleChromecastPlaying",!0)}function ma(){Z("handleChromecastPaused",!0)}function na(){Z("handleChromecastStopped",!0)}var oa,pa=null,qa=.5,ra=!1,sa=null,ta=!1,ua=null,va=!1,wa=!1,xa=.5,ya=!1,za=!1,Aa=null,Ba=null,Ca=null,Da=1,Ea=-1,Fa={},Ga=null,Ha=-1,Ia=!1,Ja=!1,Ka=null,La=null,Ma="single",Na="#video-player",Oa={CHROMECAST_CONNECTED:c.CHROMECAST_CONNECTED,CHROMECAST_DISCONNECTED:c.CHROMECAST_DISCONNECTED,CHROMECAST_MEDIA_STATUS:c.CHROMECAST_MEDIA_STATUS,CHROMECAST_AVAILABLE:c.CHROMECAST_AVAILABLE,CHROMECAST_UNAVAILABLE:c.CHROMECAST_UNAVAILABLE,SWITCH_LAYOUT_VIEW:"multiviewLayout:switch"};return oa={init:e,connected:N,disconnect:K,session:ua,castMedia:q,sendMessage:r,captionsOn:A,captionsOff:B,muteMedia:E,unmuteMedia:F,setVolume:G,pausePlayback:D,resumePlayback:C,seekPlayback:H,getStatusMessage:J,setVideoPlayer:Q,setClip:R,setMetadata:S,getMetadata:T,getSession:U,getContentImageUrl:I,setConfig:V,events:Oa,openDialog:L,setWindowMode:W,rejoinSession:n,setCurrentTime:X,getLastKnownMediaPosition:Y}}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/FlashPlayer",["jquery","lodash/lodash","bam-video-players/players/AbstractPlayer","bam-video-players/players/VideoPlayerFactory","bam-video-players/utils/VideoUtils","bam-video-players/events/PlayerEvents","bam-video-players/players/interfaces/FlashInterface","bam-video-players/utils/FlashConfigHelper","bam-video-players/utils/FlashPlaylistHelper","flashobject/flashobject","chromecast-utils/chromecast","intent-registry/IntentRegistry"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("bam-video-players/players/AbstractPlayer"),require("bam-video-players/players/VideoPlayerFactory"),require("bam-video-players/utils/VideoUtils"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/players/interfaces/FlashInterface"),require("bam-video-players/utils/FlashConfigHelper"),require("bam-video-players/utils/FlashPlaylistHelper"),require("flashobject/flashobject"),require("chromecast-utils/chromecast"),require("intent-registry/IntentRegistry")):a.FlashPlayer=b(a.jQuery,a._,a.AbstractPlayer,a.VideoPlayerFactory,a.VideoUtils,a.PlayerEvents,a.FlashInterface,a.FlashConfigHelper,a.FlashPlaylistHelper,null,null,a.IntentRegistry)}(this,function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a){m.prototype["super"].constructor.call(this,a),this.playlist=null,this.isFlash=!0,this.supportsHls=!0,n.call(this,a)}function n(){var c=this;if(!this.loaded){var d=document.createElement("div");a(d).attr("id",this.id).appendTo(this.$container);var e=p.call(this,"swfPathOverride");e&&e.length&&("qa"===e||"beta"===e||"beta2"===e||"dev"===e)&&(this.config.staticUrl=this.config.flash.swfPathOverride[e]);var f=this.config.flash.flashVersion,g=this.config.width,i=this.config.height,l=h.getSwfUrlFromConfig(this.config),m=h.getFlashVarsFromConfig(this.id,this.config),n=h.getFlashParamsFromConfig(this.config);j.embedSWF(l,this.id,g,i,f,null,m,n,{},function(b){c.$player=a("#"+c.id),c.$player.addClass("video-player__screen"),c.player=c.$player.get(0),window.VideoPlayerManager.FlashInstances[c.id]=c.getFlashInterface()}),this.config.flash&&this.config.flash.chromecast&&this.config.flash.chromecast.enabled&&(k.setVideoPlayer(this),k.setConfig(this.config.flash),window.VideoPlayerManager.chromecast=k),b.get(window,"VideoPlayerManager.FlashInstances",null)||b.set(window,"VideoPlayerManager.FlashInstances",{}),o.call(this)}}function o(){this.dispatcher.on(f.PLAYER_LOADED,q.bind(this))}function p(a){a=a.replace(/[*+?^$.\[\]{}()|\\\/]/g,"\\$&");var b=location.search.match(new RegExp("[?&]"+a+"=([^&]+)(&|$)"));return b&&decodeURIComponent(b[1].replace(/\+/g," "))}function q(b,c){this.loaded=!0,this.resize(),a(window).resize(e.debounce(a.proxy(this.resize,this),150,!1))}function r(a){a.freewheelProps=l.get.intent.sync(l.enums.freewheel,[a])}return m.prototype=Object.create(c.prototype),m.prototype.constructor=m,m.prototype["super"]=c.prototype,m.prototype.toString=function(){return"FlashPlayer"},m.prototype.log=function(){console.log("["+this.toString()+"]",Array.prototype.slice.call(arguments).join(" "))},m.prototype.getFlashInterface=function(){return new g(this)},m.prototype.execute=function(){if(!this.loaded){var a=arguments;return void this.dispatcher.one(f.PLAYER_LOADED,function(b){this.execute.apply(this,a)}.bind(this))}var b,c=arguments[0],d=Array.prototype.slice.call(arguments,1);if(this.log("execute: command="+c+"("+Array.prototype.join.call(d,",")+")"),!this.player||!this.player[c])throw new Error(this.toString()+".execute: Called with invalid function: "+c+", or this.player is undefined");try{if(arguments.length>1){var e=Array.prototype.slice.call(arguments,1);1===e.length?b=this.player[c](e[0]):2===e.length?b=this.player[c](e[0],e[1]):3===e.length?b=this.player[c](e[0],e[1],e[2]):4===e.length&&(b=this.player[c](e[0],e[1],e[2],e[3]))}else b=this.player[c]()}catch(g){throw console.error(this.toString()+" execute: Error calling function: "+c,g.message,g),new Error(this.toString()+".execute: Error calling function: "+c+", failed")}return b},m.prototype.enterFullScreen=function(){this.isFullScreen||(m.prototype["super"].enterFullScreen.call(this),this.execute("enterFullScreen"))},m.prototype.exitFullScreen=function(){this.isFullScreen&&(m.prototype["super"].exitFullScreen.call(this),this.execute("exitFullScreen"))},m.prototype.enterMiniMode=function(a,b){this.inMiniMode||(this.inMiniMode=!0,m.prototype["super"].enterMiniMode.call(this,a,b),this.execute("enterMiniMode",a,b))},m.prototype.exitMiniMode=function(a,b){this.inMiniMode&&(this.inMiniMode=!1,m.prototype["super"].exitMiniMode.call(this,a,b),this.execute("exitMiniMode",a,b))},m.prototype.resize=function(b){if(this.player){var c,d;if(Array.isArray(b))c=b[0],d=b[1];else if(b&&b.data)c=b.data.width,d=b.data.height;else if(a("#video__wrapper").width()){var e=a("#video__wrapper");c=e.width(),d=e.height(),this.log("resize to #video__wrapper ",c,d)}else if(this.$container.parent()){var e=this.$container.parent();c=e.width(),d=e.height(),this.log(" resize to parent ",c,d)}var f=c&&c>0,g=d&&d>0;f&&g||(c=640,d=480,this.log(" resize: hardcoded to ",c,d)),this.execute("resizeVideo",c,d)}},m.prototype.mute=function(){this.muted||(m.prototype["super"].mute.call(this),this.execute("muteVolume"))},m.prototype.unmute=function(){this.muted&&(m.prototype["super"].unmute.call(this),this.execute("changeVolume",70))},m.prototype.setVolume=function(a){a>100?a=100:0>a&&(a=0),m.prototype["super"].setVolume.call(this,a),this.execute("changeVolume",a)},m.prototype.play=function(a){if(this.log(" play: playlist=",a),a)this.playlist=i.normalizePlaylist(a);else if(!a&&!this.playlist)return void this.log(" play: playlist not defined");this.clip=this.playlist.length?this.playlist[0]:null,r(this.clip),m.prototype["super"].play.call(this);var b=i.getFlashPlaylist(this.playlist),c=b?b.length:0;this.log(" play: call startPlaylist() flashPlaylist.length = "+c),this.execute("startPlaylist",b),this.config.flash&&this.config.flash.chromecast&&this.config.flash.chromecast.enabled&&k.setClip(this.clip)},m.prototype.setClip=function(a){if(!a||!a.length)return void(this.clip=null);this.playlist=i.normalizePlaylist(a),this.clip=this.playlist.length?this.playlist[0]:null,r(this.clip);var b=i.getFlashPlaylist(this.playlist),c=b?b.length:0;this.log(" setClip: call setPlaylist() flashPlaylist.length = "+c),this.execute("setPlaylist",b),this.config.flash&&this.config.flash.chromecast&&this.config.flash.chromecast.enabled&&k.setClip(this.clip)},m.prototype.changeAudioChannel=function(a){this.execute("changeAudioChannel",a)},m.prototype.pause=function(){this.execute("pausePlayback")},m.prototype.resume=function(){this.execute("resumePlayback")},m.prototype.setBeginPoster=function(a){m.prototype["super"].setBeginPoster.call(this,a),this.execute("setBeginPoster",a)},m.prototype.getCurrentAdDuration=function(){var a=0;try{a=this.execute("getCurrentAdDuration")}catch(b){}return a},d.registerPlayer(m),m}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/interfaces/MultiViewFlashInterface",["bam-video-players/players/interfaces/FlashInterface","bam-video-players/events/PlayerEvents","bam-video-advertising/events/AdEvents","bam-video-players/events/StreamMediaErrorEventEnums"],b):"object"==typeof exports?module.exports=b(require("bam-video-players/players/interfaces/FlashInterface"),require("bam-video-players/events/PlayerEvents"),require("bam-video-advertising/events/AdEvents"),require("bam-video-players/events/StreamMediaErrorEventEnums")):a.MultiViewFlashInterface=b(a.FlashInterface,a.PlayerEvents,a.AdEvents,a.StreamMediaErrorEventEnums);
}(this,function(a,b,c,d){"use strict";function e(a){this.flashPlayer=a}return e.prototype=Object.create(a.prototype),e.prototype.constructor=e,e.prototype["super"]=a.prototype,e.prototype.viewPlayerHighlight=function(a){console.debug("viewPlayerHightlight:"),this.flashPlayer.dispatcher.publish(b.VIEW_HIGHLIGHT,{player:this.flashPlayer,data:a})},e.prototype.enterMiniModeButtonClick=function(a){console.debug("enterMiniModeButtonClick:"),this.flashPlayer.dispatcher.publish(b.ENTER_MINI_MODE_BUTTON_CLICK,{player:this.flashPlayer})},e.prototype.exitMiniModeButtonClick=function(a){console.debug("exitMiniModeButtonClick:"),this.flashPlayer.dispatcher.publish(b.EXIT_MINI_MODE_BUTTON_CLICK,{player:this.flashPlayer})},e.prototype.trackingEvent=function(a){console.debug("trackingEvent: impressionKey = "+a.impressionKey),this.flashPlayer.dispatcher.publish(b.TRACKING_EVENT,{player:this.flashPlayer,data:a})},e.prototype.selectedMediaSlotChanged=function(a){console.debug("selectedMediaSlotChanged: metrics = "+a.metrics),this.flashPlayer.dispatcher.publish(b.SELECTED_MEDIA_SLOT_CHANGED,{player:this.flashPlayer,data:a})},e.prototype.videoAreaLayoutStateChanged=function(a){console.debug("videoAreaLayoutStateChanged: metrics = "+a.metrics),this.flashPlayer.dispatcher.publish(b.VIDEO_AREA_LAYOUT_STATE_CHANGED,{player:this.flashPlayer,data:a})},e.prototype.changeVolume=function(a){console.debug("changeVolume: volume = "+a.volume+", muted = "+a.muted),this.flashPlayer.dispatcher.publish(b.CHANGE_VOLUME,{player:this.flashPlayer,data:a})},e.prototype.muteButton=function(a){console.debug("muteButton"),this.flashPlayer.dispatcher.publish(b.MUTE_BUTTON,{player:this.flashPlayer,data:a})},e.prototype.quickRewind=function(a){},e.prototype.quickForward=function(a){},e.prototype.streamMediaError=function(a){var c=a.errorMessage,d=a.errorType,e=a.uniqueId;console.debug("streamMediaError: errorType="+d+", errorMessage="+c+", uniqueId="+e),this.flashPlayer.dispatcher.publish(b.STREAM_MEDIA_ERROR,{player:this.flashPlayer,data:a})},e.prototype.playbackStarted=function(a){console.debug("playbackStarted "),this.flashPlayer.dispatcher.publish(b.PLAYBACK_STARTED,{player:this.flashPlayer,data:a})},e.prototype.seekComplete=function(a){console.debug("seekComplete"),this.flashPlayer.dispatcher.publish(b.SEEK_COMPLETE,{player:this.flashPlayer,data:a})},e.prototype.closeHighlight=function(a){console.debug("closeHighlight"),this.flashPlayer.dispatcher.publish(b.CLOSE_HIGHLIGHT,{player:this.flashPlayer,data:a})},e.prototype.enableClosedCaptions=function(a){console.debug("enableClosedCaptions"),this.flashPlayer.dispatcher.publish(b.ENABLE_CLOSED_CAPTIONS,{player:this.flashPlayer,data:a})},e.prototype.disableClosedCaptions=function(a){console.debug("disableClosedCaptions"),this.flashPlayer.dispatcher.publish(b.DISABLE_CLOSED_CAPTIONS,{player:this.flashPlayer,data:a})},e.prototype.adPlaybackStart=function(a){console.debug("adPlaybackStart: uniqueId="+a.uniqueId+", slotPosition="+a.slotPosition),this.flashPlayer.dispatcher.publish(b.FREEWHEEL_AD_STARTED,{player:this.flashPlayer,data:a})},e.prototype.adPlaybackEnd=function(a){console.debug("adPlaybackEnd: uniqueId="+a.uniqueId+", slotPosition="+a.slotPosition),this.flashPlayer.dispatcher.publish(b.FREEWHEEL_AD_ENDED,{player:this.flashPlayer,data:a})},e}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/MultiViewFlashPlayer",["jquery","bam-video-players/players/FlashPlayer","bam-video-players/utils/FlashPlaylistHelper","bam-video-players/players/VideoPlayerFactory","bam-video-players/utils/VideoUtils","bam-video-players/events/PlayerEvents","bam-video-players/players/interfaces/MultiViewFlashInterface","intent-registry/IntentRegistry"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("bam-video-players/players/FlashPlayer"),require("bam-video-players/utils/FlashPlaylistHelper"),require("bam-video-players/players/VideoPlayerFactory"),require("bam-video-players/utils/VideoUtils"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/players/interfaces/MultiViewFlashInterface"),require("intent-registry/IntentRegistry")):a.MultiViewFlashPlayer=b(a.jQuery,a.FlashPlayer,a.FlashPlaylistHelper,a.VideoPlayerFactory,a.VideoUtils,a.PlayerEvents,a.MultiViewFlashInterface,a.IntentRegistry)}(this,function(a,b,c,d,e,f,g,h){"use strict";function i(a){i.prototype["super"].constructor.call(this,a),j.call(this)}function j(){this.dispatcher.on(f.SELECTED_MEDIA_SLOT_CHANGED,k.bind(this))}function k(a,b){var c=a.data.metrics,d=c.slots[c.selectedSlotPosition];d.contentId&&(this.clip=this.slots[d.contentId])}function l(a){a.freewheelProps=h.get.intent.sync(h.enums.freewheel,[a])}return i.prototype=Object.create(b.prototype),i.prototype.constructor=i,i.prototype["super"]=b.prototype,i.prototype.slots={},i.prototype.toString=function(){return"MultiViewFlashPlayer"},i.prototype.getFlashInterface=function(){return new g(this)},i.prototype.mute=function(){this.log(" mute()"),this.execute("muteVolume")},i.prototype.unmute=function(a){this.log(" unmute()"),a?this.execute("unMuteVolume",a):this.execute("unMuteVolume")},i.prototype.getVolume=function(){this.log(" FlashPlayer.getVolume()")},i.prototype.setVolume=function(a){this.log(" setVolume()"),this.execute("changeVolume",a)},i.prototype.play=function(a,b){this.log(" play: playlist=",a);var d=a?a.length:0;if(this.log(" play: playlist.length = "+d),0==d)return void this.log(" play: playlist is empty so get out of here");b&&(this.log(" play: updateUserProfile called via play()"),this.updateUserProfile(b));var a=c.normalizePlaylist(a),e=c.getFlashPlaylist(a);this.clip=e[0],l(this.clip),this.slots[this.clip.content_id]=this.clip,this.execute("playContent",this.clip)},i.prototype.setClip=function(a){},i.prototype.playHighlight=function(a){this.execute("playHighlight",a)},i.prototype.changeAudioChannel=function(a,b){this.log(" changeAudioChannel: uniqueId = "+a+" channel = "+b),this.execute("changeAudioChannel",a,b)},i.prototype.clearContentByUniqueId=function(a){this.log(" clearContentByUniqueId: uniqueId = "+a),this.execute("clearContentByUniqueId",a)},i.prototype.stopContentByUniqueId=function(a){this.log(" stopContentByUniqueId: uniqueId = "+a),this.execute("stopContentByUniqueId",a)},i.prototype.selectSlotByEventId=function(a){this.log(" selectSlotByEventId: eventId = "+a),this.execute("selectSlotByEventId",a)},i.prototype.updateUserProfile=function(a){this.log(" updateUserProfile: call flashplayer.updateUserProfile()"),this.execute("updateUserProfile",a)},i.prototype.updateUserPreference=function(a){this.log(" updateUserPreference: preference = ",a),this.execute("updateUserPreference",a)},i.prototype.updateMilestones=function(a){this.log(" updateMilestones: milestones = ",a),this.execute("updateMilestones",a)},i.prototype.updateTrackingMetadata=function(a){this.log(" updateTrackingMetadata: metadata = ",a),this.execute("updateTrackingMetadata",a)},i.prototype.pause=function(a){this.log(" pause:"),this.execute("pausePlayback",a)},i.prototype.resume=function(a){this.log(" resume()"),this.execute("resumePlayback",a)},i.prototype.quickRewind=function(a){this.log(" quickRewind( "+a+" )"),this.execute("quickRewind",a)},i.prototype.quickFastForward=function(a){this.log(" quickFastForward( "+a+" )"),this.execute("quickFastForward",a)},i.prototype.seekToLive=function(a){this.log(" seekToLive( "+a+" )"),this.execute("seekToLive",a)},i.prototype.switchViews=function(a){this.execute("switchViews",a)},d.registerPlayer(i),i}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/events/VideoNodeEvents",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.VideoNodeEvents=b(a.lodash)}(this,function(a){var b={ABORT:"abort",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",EMPTIED:"emtied",ENDED:"ended",ERROR:"error",LOAD:"load",LOAD_START:"loadstart",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",RATE_CHANGE:"ratechange",RESIZE:"resize",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",TIME_UPDATE:"timeupdate",VOLUME_CHANGE:"volumechange",WAITING:"waiting",TOUCHEND:"touchend"};return b}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/ui/helpers/VideoMediaErrorHelper",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.VideoNodeEvents=b(a.lodash)}(this,function(a){return{decode:function(a){switch(a){case 1:return{name:"MEDIA_ERR_ABORTED",description:"The fetching of the associated resource has been aborted by the user"};case 2:return{name:"MEDIA_ERR_NETWORK",description:"A network error caused the resource to stop being fetched."};case 3:return{name:"MEDIA_ERR_DECODE",description:"A decoding error caused the resource to stop being fetched."};case 4:return{name:"MEDIA_ERR_SRC_NOT_SUPPORTED",description:"The associated resource has been detected to be not suitable."}}return{name:"UNKNOWN",description:"Unknown media error occured"}}}}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/clients/MediaElementClient",["jquery","lodash/lodash","bandwagon/bandwagon","bam-video-players/events/PlayerEvents","bam-video-players/events/VideoNodeEvents","bam-video-players/events/UserEvents","bam-video-players/players/ui/helpers/VideoMediaErrorHelper"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("bandwagon/bandwagon"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/VideoNodeEvents"),require("bam-video-players/events/UserEvents"),require("bam-video-players/players/ui/helpers/VideoMediaErrorHelper")):a.VideoClient=b(a.jQuery,a._,a.bandwagon,a.PlayerEvents,a.VideoNodeEvents,a.UserEvents,a.VideoMediaErrorHelper)}(this,function(a,b,c,d,e,f,g){"use strict";function h(b){this.video=b,this.$video=a(b),s("created"),this.getPlayerEventDispatcher(),i.call(this)}function i(){if(s("addVideoListeners",this.listenersAdded),!this.listenersAdded){this.boundFunctions={_onMediaStart:l.bind(this)},this.$video.on(e.ENDED,m.bind(this)),this.$video.on(e.PAUSE,o.bind(this)),this.$video.on(e.PLAYING,n.bind(this)),this.$video.on(e.PLAY,this.boundFunctions._onMediaStart),this.$video.on(e.TIME_UPDATE,p.bind(this)),this.$video.on(e.TOUCHEND,q.bind(this)),this.listenersAdded=!0}}function j(a){s("_onLoad"),i.call(this)}function k(a){s("_onMetaDataLoaded"),this.dispatcher.dispatchEvent(d.META_DATA_LOADED)}function l(){s("_onMediaStart"),this.$video.off(e.PLAY,this.boundFunctions._onMediaStart),this.dispatcher.dispatchEvent(d.MEDIA_START)}function m(a){s("_onEnded"),this.dispatcher.dispatchEvent(d.MEDIA_COMPLETE)}function n(a){s("_onPlaying"),this.dispatcher.dispatchEvent(d.MEDIA_PLAYING)}function o(a){s("_onPause"),this.dispatcher.dispatchEvent(d.MEDIA_PAUSED)}function p(a){var b=this.video.currentTime,c=this.getDurationInSecs();this.dispatcher.dispatchEvent(d.MEDIA_TIME_UPDATE,{timeInSecs:b,duration:c})}function q(a){this.dispatcher.dispatchEvent(new Event(f.TOUCHEND))}function r(a){var b=g.decode(this.video.error.code),c=b.name+": "+b.description;s("Video Error",c),this.dispatcher.dispatchEvent(d.MEDIA_ERROR,{message:c})}function s(){console.log("[VideoClient]",Array.prototype.slice.call(arguments).join(" "))}return h.prototype.getPlayerEventDispatcher=function(){if(!this.dispatcher){var a=c.getInstanceByKey("HTML5Video"+Date.now());this.dispatcher={addEventListener:function(b,c){a.on(b,c)},removeEventListener:function(b,c){a.off(b,c)},dispatchEvent:function(b,c){a.publish(b,c)},removeAllListeners:function(){a.removeAllListeners()}}}return this.dispatcher},h.prototype.reset=function(){this.lastSeekTime=null},h.prototype.play=function(){s("play","trigger"),b.size(this.$video.attr("src"))>0?this.$video.trigger(e.PLAY):s("not able to play, src="+this.$video.attr("src"))},h.prototype.pause=function(){s("pause","trigger"),this.$video.trigger(e.PAUSE)},h.prototype.setVolume=function(a){this.video.volume=a/100},h.prototype.mute=function(){this.$video.prop("muted",!0)},h.prototype.unmute=function(){this.$video.prop("muted",!1)},h.prototype.seek=function(a){this.isSeeking?this.lastSeekTime=a:(this.lastSeekTime=null,null!=a&&(this.video.currentTime=a))},h.prototype.getDurationInSecs=function(){return this.video.readyState>0?this.video.duration:(s("getDurationInSecs. Video is not ready yet"),0)},h.prototype.setClip=function(a){var b=a.path||"";this.listenersAdded=!1,s("setClip",b),this.$video.off().one(e.LOAD,j.bind(this)).one(e.LOADED_METADATA,k.bind(this)).on(e.ERROR,r.bind(this)).attr("src",b).trigger(e.LOAD)},h.prototype.getCurrentTimeInSecs=function(){return this.video.currentTime},h}),function(a,b){"function"==typeof define&&define.amd?define("dash-client/VideoMediaErrorHelper",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.VideoNodeEvents=b(a.lodash)}(this,function(a){return{decode:function(a){switch(a){case 1:return{name:"MEDIA_ERR_ABORTED",description:"The fetching of the associated resource has been aborted by the user"};case 2:return{name:"MEDIA_ERR_NETWORK",description:"A network error caused the resource to stop being fetched."};case 3:return{name:"MEDIA_ERR_DECODE",description:"A decoding error caused the resource to stop being fetched."};case 4:return{name:"MEDIA_ERR_SRC_NOT_SUPPORTED",description:"The associated resource has been detected to be not suitable."}}return{name:"UNKNOWN",description:"Unknown media error occured"}}}}),function(a,b){"function"==typeof define&&define.amd?define("dash-client/VideoNodeEvents",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.VideoNodeEvents=b(a.lodash)}(this,function(a){var b={ABORT:"abort",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",DURATION_CHANGE:"durationchange",EMPTIED:"emtied",ENDED:"ended",ERROR:"error",LOAD_START:"loadstart",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",RATE_CHANGE:"ratechange",RESIZE:"resize",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",TIME_UPDATED:"timeupdated",VOLUME_CHANGE:"volumechange",WAITING:"waiting"};return b}),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define("dash/dist/dash.mediaplayer.min",[],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(b.dashjs||(b.dashjs={})).MediaPlayer=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";!function(a){var b={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},c=function(a){var c=a;return b.hasOwnProperty(a)&&(c=b[a]),String.fromCharCode(c)},d=15,e=32,f={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},g={17:2,18:4,21:6,22:8,23:10,19:13,20:15},h={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},i={25:2,26:4,29:6,30:8,31:10,27:13,28:15},j=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],k={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(a){this.time=a},log:function(a,b){var c=this.verboseFilter[a];this.verboseLevel>=c&&console.log(this.time+" ["+a+"] "+b)}},l=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c].toString(16));return b},m=function(a,b,c,d,e){this.foreground=a||"white",this.underline=b||!1,this.italics=c||!1,this.background=d||"black",this.flash=e||!1};m.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(a){for(var b=["foreground","underline","italics","background","flash"],c=0;c<b.length;c++){var d=b[c];a.hasOwnProperty(d)&&(this[d]=a[d])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(a){return this.foreground===a.foreground&&this.underline===a.underline&&this.italics===a.italics&&this.background===a.background&&this.flash===a.flash},copy:function(a){this.foreground=a.foreground,this.underline=a.underline,this.italics=a.italics,this.background=a.background,this.flash=a.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var n=function(a,b,c,d,e,f){this.uchar=a||" ",this.penState=new m(b,c,d,e,f)};n.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(a,b){this.uchar=a,this.penState.copy(b)},setPenState:function(a){this.penState.copy(a)},equals:function(a){return this.uchar===a.uchar&&this.penState.equals(a.penState)},copy:function(a){this.uchar=a.uchar,this.penState.copy(a.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var o=function(){this.chars=[];for(var a=0;e>a;a++)this.chars.push(new n);this.pos=0,this.currPenState=new m};o.prototype={equals:function(a){for(var b=!0,c=0;e>c;c++)if(!this.chars[c].equals(a.chars[c])){b=!1;break}return b},copy:function(a){for(var b=0;e>b;b++)this.chars[b].copy(a.chars[b])},isEmpty:function(){for(var a=!0,b=0;e>b;b++)if(!this.chars[b].isEmpty()){a=!1;break}return a},setCursor:function(a){this.pos!==a&&(this.pos=a),this.pos<0?(k.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>e&&(k.log("ERROR","Too large cursor position "+this.pos),this.pos=e)},moveCursor:function(a){var b=this.pos+a;if(a>1)for(var c=this.pos+1;b+1>c;c++)this.chars[c].setPenState(this.currPenState);this.setCursor(b)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(a){a>=144&&this.backSpace();var b=c(a);return this.pos>=e?void k.log("ERROR","Cannot insert "+a.toString(16)+" ("+b+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(b,this.currPenState),void this.moveCursor(1))},clearFromPos:function(a){var b;for(b=a;e>b;b++)this.chars[b].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var a=[],b=!0,c=0;e>c;c++){var d=this.chars[c].uchar;" "!==d&&(b=!1),a.push(d)}return b?"":a.join("")},setPenStyles:function(a){this.currPenState.setStyles(a);var b=this.chars[this.pos];b.setPenState(this.currPenState)}};var p=function(){this.rows=[];for(var a=0;d>a;a++)this.rows.push(new o);this.currRow=d-1,this.nrRollUpRows=null,this.reset()};p.prototype={reset:function(){for(var a=0;d>a;a++)this.rows[a].clear();this.currRow=d-1},equals:function(a){for(var b=!0,c=0;d>c;c++)if(!this.rows[c].equals(a.rows[c])){b=!1;break}return b},copy:function(a){for(var b=0;d>b;b++)this.rows[b].copy(a.rows[b])},isEmpty:function(){for(var a=!0,b=0;d>b;b++)if(!this.rows[b].isEmpty()){a=!1;break}return a},backSpace:function(){var a=this.rows[this.currRow];a.backSpace()},clearToEndOfRow:function(){var a=this.rows[this.currRow];a.clearToEndOfRow()},insertChar:function(a){var b=this.rows[this.currRow];b.insertChar(a)},setPen:function(a){var b=this.rows[this.currRow];b.setPenStyles(a)},moveCursor:function(a){var b=this.rows[this.currRow];b.moveCursor(a)},setCursor:function(a){k.log("INFO","setCursor: "+a);var b=this.rows[this.currRow];b.setCursor(a)},setPAC:function(a){k.log("INFO","pacData = "+JSON.stringify(a));var b=a.row-1;this.nrRollUpRows&&b<this.nrRollUpRows-1&&(b=this.nrRollUpRows-1),this.currRow=b;var c=this.rows[this.currRow];if(null!==a.indent){var d=a.indent,e=Math.max(d-1,0);c.setCursor(a.indent),a.color=c.chars[e].penState.foreground}var f={foreground:a.color,underline:a.underline,italics:a.italics,background:"black",flash:!1};this.setPen(f)},setBkgData:function(a){k.log("INFO","bkgData = "+JSON.stringify(a)),this.backSpace(),this.setPen(a),this.insertChar(32)},setRollUpRows:function(a){this.nrRollUpRows=a},rollUp:function(){if(null===this.nrRollUpRows)return void k.log("DEBUG","roll_up but nrRollUpRows not set yet");k.log("TEXT",this.getDisplayText());var a=this.currRow+1-this.nrRollUpRows,b=this.rows.splice(a,1)[0];b.clear(),this.rows.splice(this.currRow,0,b),k.log("INFO","Rolling up")},getDisplayText:function(a){a=a||!1;for(var b=[],c="",e=-1,f=0;d>f;f++){var g=this.rows[f].getTextString();g&&(e=f+1,a?b.push("Row "+e+': "'+g+'"'):b.push(g.trim()))}return b.length>0&&(c=a?"["+b.join(" | ")+"]":b.join("\n")),c},getTextAndFormat:function(){return this.rows}};var q=function(a,b){this.chNr=a,this.outputFilter=b,this.mode=null,this.verbose=0,this.displayedMemory=new p,this.nonDisplayedMemory=new p,this.lastOutputScreen=new p,this.currRollUpRow=this.displayedMemory.rows[d-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};q.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[d-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(a){this.outputFilter=a},setPAC:function(a){this.writeScreen.setPAC(a)},setBkgData:function(a){this.writeScreen.setBkgData(a)},setMode:function(a){a!==this.mode&&(this.mode=a,k.log("INFO","MODE="+a),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=a)},insertChars:function(a){for(var b=0;b<a.length;b++)this.writeScreen.insertChar(a[b]);var c=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";k.log("INFO",c+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(k.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){k.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){k.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){k.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(a){k.log("INFO","RU("+a+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(a)},cc_FON:function(){k.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){k.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){k.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){k.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){k.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){k.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){k.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(k.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var a=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=a,this.writeScreen=this.nonDisplayedMemory,k.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(a){k.log("INFO","TO("+a+") - Tab Offset"),this.writeScreen.moveCursor(a)},cc_MIDROW:function(a){var b={flash:!1};if(b.underline=a%2===1,b.italics=a>=46,b.italics)b.foreground="white";else{var c=Math.floor(a/2)-16,d=["white","green","blue","cyan","red","yellow","magenta"];b.foreground=d[c]}k.log("INFO","MIDROW: "+JSON.stringify(b)),this.writeScreen.setPen(b)},outputDataUpdate:function(){var a=k.time;null!==a&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(a,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,a,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:a):this.cueStartTime=a,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(a){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,a,this.displayedMemory),this.cueStartTime=a))}};var r=function(a,b,c){this.field=a||1,this.outputs=[b,c],this.channels=[new q(1,b),new q(2,c)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,"char":0,cmd:0,other:0}};r.prototype={getHandler:function(a){return this.channels[a].getHandler()},setHandler:function(a,b){this.channels[a].setHandler(b)},addData:function(a,b){var c,d,e,f=!1;this.lastTime=a,k.setTime(a);for(var g=0;g<b.length;g+=2)if(d=127&b[g],e=127&b[g+1],0!==d||0!==e){if(k.log("DATA","["+l([b[g],b[g+1]])+"] -> ("+l([d,e])+")"),c=this.parseCmd(d,e),c||(c=this.parseMidrow(d,e)),c||(c=this.parsePAC(d,e)),c||(c=this.parseBackgroundAttributes(d,e)),!c&&(f=this.parseChars(d,e)))if(this.currChNr&&this.currChNr>=0){var h=this.channels[this.currChNr-1];h.insertChars(f)}else k.log("WARNING","No channel found yet. TEXT-MODE?");c?this.dataCounters.cmd+=2:f?this.dataCounters["char"]+=2:(this.dataCounters.other+=2,k.log("WARNING","Couldn't parse cleaned data "+l([d,e])+" orig: "+l([b[g],b[g+1]])))}else this.dataCounters.padding+=2},parseCmd:function(a,b){var c=null,d=(20===a||28===a)&&b>=32&&47>=b,e=(23===a||31===a)&&b>=33&&35>=b;if(!d&&!e)return!1;if(a===this.lastCmdA&&b===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,k.log("DEBUG","Repeated command ("+l([a,b])+") is dropped"),!0;c=20===a||23===a?1:2;var f=this.channels[c-1];return 20===a||28===a?32===b?f.cc_RCL():33===b?f.cc_BS():34===b?f.cc_AOF():35===b?f.cc_AON():36===b?f.cc_DER():37===b?f.cc_RU(2):38===b?f.cc_RU(3):39===b?f.cc_RU(4):40===b?f.cc_FON():41===b?f.cc_RDC():42===b?f.cc_TR():43===b?f.cc_RTD():44===b?f.cc_EDM():45===b?f.cc_CR():46===b?f.cc_ENM():47===b&&f.cc_EOC():f.cc_TO(b-32),this.lastCmdA=a,this.lastCmdB=b,this.currChNr=c,!0},parseMidrow:function(a,b){var c=null;if((17===a||25===a)&&b>=32&&47>=b){if(c=17===a?1:2,c!==this.currChNr)return k.log("ERROR","Mismatch channel in midrow parsing"),!1;var d=this.channels[c-1];return d.cc_MIDROW(b),k.log("DEBUG","MIDROW ("+l([a,b])+")"),!0}return!1},parsePAC:function(a,b){var c=null,d=null,e=(a>=17&&23>=a||a>=25&&31>=a)&&b>=64&&127>=b,j=(16===a||24===a)&&b>=64&&95>=b;if(!e&&!j)return!1;if(a===this.lastCmdA&&b===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;c=23>=a?1:2,d=b>=64&&95>=b?1===c?f[a]:h[a]:1===c?g[a]:i[a];var k=this.interpretPAC(d,b),l=this.channels[c-1];return l.setPAC(k),this.lastCmdA=a,this.lastCmdB=b,this.currChNr=c,!0},interpretPAC:function(a,b){var c=b,d={color:null,italics:!1,indent:null,underline:!1,row:a};return c=b>95?b-96:b-64,d.underline=1===(1&c),13>=c?d.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(c/2)]:15>=c?(d.italics=!0,d.color="white"):d.indent=4*Math.floor((c-16)/2),d},parseChars:function(a,b){var d=null,e=null,f=null;if(a>=25?(d=2,f=a-8):(d=1,f=a),f>=17&&19>=f){var g=b;g=17===f?b+80:18===f?b+112:b+144,k.log("INFO","Special char '"+c(g)+"' in channel "+d),e=[g]}else a>=32&&127>=a&&(e=0===b?[a]:[a,b]);if(e){var h=l(e);k.log("DEBUG","Char codes =  "+h.join(",")),this.lastCmdA=null,this.lastCmdB=null}return e},parseBackgroundAttributes:function(a,b){var c,d,e,f,g=(16===a||24===a)&&b>=32&&47>=b,h=(23===a||31===a)&&b>=45&&47>=b;return!(!g&&!h||(c={},16===a||24===a?(d=Math.floor((b-32)/2),c.background=j[d],b%2===1&&(c.background=c.background+"_semi")):45===b?c.background="transparent":(c.foreground="black",47===b&&(c.underline=!0)),e=24>a?1:2,f=this.channels[e-1],f.setBkgData(c),this.lastCmdA=null,this.lastCmdB=null,0))},reset:function(){for(var a=0;a<this.channels.length;a++)this.channels[a]&&this.channels[a].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(a){for(var b=0;b<this.channels.length;b++)this.channels[b]&&this.channels[b].cueSplitAtTime(a)}};var s=function(a,b,c){for(var d=0,e=b,f=0,g=[],h=function(a,b,c,d){if(4!==a||8>b)return null;var e=c.getUint8(d),f=c.getUint16(d+1),g=c.getUint32(d+3),h=c.getUint8(d+7);return 181==e&&49==f&&1195456820==g&&3==h};b+c>e;){if(d=a.getUint32(e),f=31&a.getUint8(e+4),6===f)for(var i=e+5,j=-1;e+4+d-1>i;){j=0;for(var k=255;255===k;)k=a.getUint8(i),j+=k,i++;var l=0;for(k=255;255===k;)k=a.getUint8(i),l+=k,i++;h(j,l,a,i)&&g.push([i,l]),i+=l}e+=d+4}return g},t=function(a,b){var c=b[0],d=[[],[]];c+=8;var e=31&a.getUint8(c);c+=2;for(var f=0;e>f;f++){var g=a.getUint8(c),h=4&g,i=3&g;c++;var j=a.getUint8(c);c++;var k=a.getUint8(c);c++,h&&(127&j)+(127&k)!==0&&(0===i?(d[0].push(j),d[0].push(k)):1===i&&(d[1].push(j),d[1].push(k)))}return d};a.logger=k,a.PenState=m,a.CaptionScreen=p,a.Cea608Parser=r,a.findCea608Nalus=s,a.extractCea608DataFromRange=t}("undefined"==typeof c?(void 0).cea608parser={}:c)},{}],2:[function(a,b,c){"use strict";function d(a){var b,c,d;for(b=[],d=0,c=a.length;c>d;d+=1)a[d].isRoot?b.push("root"):b.push(a[d].name);var e=function(a,b){var c;if(null!==a&&null!==b)for(c in a)a.hasOwnProperty(c)&&(b.hasOwnProperty(c)||(b[c]=a[c]))},f=function(a,b,c){var d,f,g,h,i;if(null!==a&&0!==a.length)for(d=0,f=a.length;f>d;d+=1)g=a[d],b.hasOwnProperty(g.name)&&(c.hasOwnProperty(g.name)?g.merge&&(h=b[g.name],i=c[g.name],"object"==typeof h&&"object"==typeof i?e(h,i):null!=g.mergeFunction?c[g.name]=g.mergeFunction(h,i):c[g.name]=h+i):c[g.name]=b[g.name])},g=function i(a,b){var c,d,e,g,h,j,k,l=a;if(null!==l.children&&0!==l.children.length)for(c=0,d=l.children.length;d>c;c+=1)if(j=l.children[c],b.hasOwnProperty(j.name))if(j.isArray)for(h=b[j.name+"_asArray"],e=0,g=h.length;g>e;e+=1)k=h[e],f(l.properties,b,k),i(j,k);else k=b[j.name],f(l.properties,b,k),i(j,k)},h=function j(c){var d,e,f,h,i,k,l;if(null===c)return c;if("object"!=typeof c)return c;for(d=0,e=b.length;e>d;d+=1)"root"===b[d]&&(i=a[d],k=c,g(i,k));for(h in c)if(c.hasOwnProperty(h)&&"__children"!=h){if(f=b.indexOf(h),-1!==f)if(i=a[f],i.isArray)for(l=c[h+"_asArray"],d=0,e=l.length;e>d;d+=1)k=l[d],g(i,k);else k=c[h],g(i,k);j(c[h])}return c};return{run:h}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d,b.exports=c["default"]},{}],3:[function(a,b,c){"use strict";function d(a){function b(){void 0===a.escapeMode&&(a.escapeMode=!0),void 0===a.attributePrefix&&(a.attributePrefix="_"),a.arrayAccessForm=a.arrayAccessForm||"none",
a.emptyNodeForm=a.emptyNodeForm||"text",void 0===a.enableToStringFunc&&(a.enableToStringFunc=!0),a.arrayAccessFormPaths=a.arrayAccessFormPaths||[],void 0===a.skipEmptyTextNodesForObj&&(a.skipEmptyTextNodesForObj=!0),void 0===a.stripWhitespaces&&(a.stripWhitespaces=!0),a.datetimeAccessFormPaths=a.datetimeAccessFormPaths||[],void 0===a.useDoubleQuotes&&(a.useDoubleQuotes=!1),a.xmlElementsFilter=a.xmlElementsFilter||[],a.jsonPropertiesFilter=a.jsonPropertiesFilter||[],void 0===a.keepCData&&(a.keepCData=!1),void 0===a.ignoreRoot&&(a.ignoreRoot=!1)}function c(){}function d(a){var b=a.localName;return null==b&&(b=a.baseName),null!=b&&""!=b||(b=a.nodeName),b}function e(a){return a.prefix}function f(a){return"string"==typeof a?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):a}function g(a,b,c,d){for(var e=0;e<a.length;e++){var f=a[e];if("string"==typeof f){if(f==d)break}else if(f instanceof RegExp){if(f.test(d))break}else if("function"==typeof f&&f(b,c,d))break}return e!=a.length}function h(b,c,d){switch(a.arrayAccessForm){case"property":b[c]instanceof Array?b[c+"_asArray"]=b[c]:b[c+"_asArray"]=[b[c]]}!(b[c]instanceof Array)&&a.arrayAccessFormPaths.length>0&&g(a.arrayAccessFormPaths,b,c,d)&&(b[c]=[b[c]])}function i(a){var b=a.split(/[-T:+Z]/g),c=new Date(b[0],b[1]-1,b[2]),d=b[5].split(".");if(c.setHours(b[3],b[4],d[0]),d.length>1&&c.setMilliseconds(d[1]),b[6]&&b[7]){var e=60*b[6]+Number(b[7]),f=/\d\d-\d\d:\d\d$/.test(a)?"-":"+";e=0+("-"==f?-1*e:e),c.setMinutes(c.getMinutes()-e-c.getTimezoneOffset())}else-1!==a.indexOf("Z",a.length-1)&&(c=new Date(Date.UTC(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds())));return c}function j(b,c,d){if(a.datetimeAccessFormPaths.length>0){var e=d.split(".#")[0];return g(a.datetimeAccessFormPaths,b,c,e)?i(b):b}return b}function k(b,c,d,e){return!(c==z.ELEMENT_NODE&&a.xmlElementsFilter.length>0)||g(a.xmlElementsFilter,b,d,e)}function l(b,c){if(b.nodeType==z.DOCUMENT_NODE){for(var f=new Object,g=b.childNodes,i=0;i<g.length;i++){var m=g[i];if(m.nodeType==z.ELEMENT_NODE)if(a.ignoreRoot)f=l(m);else{f={};var n=d(m);f[n]=l(m)}}return f}if(b.nodeType==z.ELEMENT_NODE){var f=new Object;f.__cnt=0;for(var o=[],g=b.childNodes,i=0;i<g.length;i++){var m=g[i],n=d(m);if(m.nodeType!=z.COMMENT_NODE){var p=c+"."+n;if(k(f,m.nodeType,n,p))if(f.__cnt++,null==f[n]){var q=l(m,p);if("#text"!=n||/[^\s]/.test(q)){var r={};r[n]=q,o.push(r)}f[n]=q,h(f,n,p)}else{null!=f[n]&&(f[n]instanceof Array||(f[n]=[f[n]],h(f,n,p)));var q=l(m,p);if("#text"!=n||/[^\s]/.test(q)){var r={};r[n]=q,o.push(r)}f[n][f[n].length]=q}}}f.__children=o;for(var s=d(b),t=0;t<b.attributes.length;t++){var u=b.attributes[t];f.__cnt++;for(var v=u.value,w=0,x=a.matchers.length;x>w;w++){var y=a.matchers[w];y.test(u,s)&&(v=y.converter(u.value))}f[a.attributePrefix+u.name]=v}var A=e(b);return null!=A&&""!=A&&(f.__cnt++,f.__prefix=A),null!=f["#text"]&&(f.__text=f["#text"],f.__text instanceof Array&&(f.__text=f.__text.join("\n")),a.stripWhitespaces&&(f.__text=f.__text.trim()),delete f["#text"],"property"==a.arrayAccessForm&&delete f["#text_asArray"],f.__text=j(f.__text,n,c+"."+n)),null!=f["#cdata-section"]&&(f.__cdata=f["#cdata-section"],delete f["#cdata-section"],"property"==a.arrayAccessForm&&delete f["#cdata-section_asArray"]),0==f.__cnt&&"text"==a.emptyNodeForm?f="":1==f.__cnt&&null!=f.__text?f=f.__text:1!=f.__cnt||null==f.__cdata||a.keepCData?f.__cnt>1&&null!=f.__text&&a.skipEmptyTextNodesForObj&&(a.stripWhitespaces&&""==f.__text||""==f.__text.trim())&&delete f.__text:f=f.__cdata,delete f.__cnt,!a.enableToStringFunc||null==f.__text&&null==f.__cdata||(f.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),f}return b.nodeType==z.TEXT_NODE||b.nodeType==z.CDATA_SECTION_NODE?b.nodeValue:void 0}function m(b,c,d,e){var g="<"+(null!=b&&null!=b.__prefix?b.__prefix+":":"")+c;if(null!=d)for(var h=0;h<d.length;h++){var i=d[h],j=b[i];a.escapeMode&&(j=f(j)),g+=" "+i.substr(a.attributePrefix.length)+"=",g+=a.useDoubleQuotes?'"'+j+'"':"'"+j+"'"}return g+=e?"/>":">"}function n(a,b){return"</"+(null!=a.__prefix?a.__prefix+":":"")+b+">"}function o(a,b){return-1!==a.indexOf(b,a.length-b.length)}function p(b,c){return!!("property"==a.arrayAccessForm&&o(c.toString(),"_asArray")||0==c.toString().indexOf(a.attributePrefix)||0==c.toString().indexOf("__")||b[c]instanceof Function)}function q(a){var b=0;if(a instanceof Object)for(var c in a)p(a,c)||b++;return b}function r(b,c,d){return 0==a.jsonPropertiesFilter.length||""==d||g(a.jsonPropertiesFilter,b,c,d)}function s(b){var c=[];if(b instanceof Object)for(var d in b)-1==d.toString().indexOf("__")&&0==d.toString().indexOf(a.attributePrefix)&&c.push(d);return c}function t(b){var c="";return null!=b.__cdata&&(c+="<![CDATA["+b.__cdata+"]]>"),null!=b.__text&&(c+=a.escapeMode?f(b.__text):b.__text),c}function u(b){var c="";return b instanceof Object?c+=t(b):null!=b&&(c+=a.escapeMode?f(b):b),c}function v(a,b){return""===a?b:a+"."+b}function w(a,b,c,d){var e="";if(0==a.length)e+=m(a,b,c,!0);else for(var f=0;f<a.length;f++)e+=m(a[f],b,s(a[f]),!1),e+=x(a[f],v(d,b)),e+=n(a[f],b);return e}function x(a,b){var c="",d=q(a);if(d>0)for(var e in a)if(!p(a,e)&&(""==b||r(a,e,v(b,e)))){var f=a[e],g=s(f);if(null==f||void 0==f)c+=m(f,e,g,!0);else if(f instanceof Object)if(f instanceof Array)c+=w(f,e,g,b);else if(f instanceof Date)c+=m(f,e,g,!1),c+=f.toISOString(),c+=n(f,e);else{var h=q(f);h>0||null!=f.__text||null!=f.__cdata?(c+=m(f,e,g,!1),c+=x(f,v(b,e)),c+=n(f,e)):c+=m(f,e,g,!0)}else c+=m(f,e,g,!1),c+=u(f),c+=n(f,e)}return c+=u(a)}var y="1.2.0";a=a||{},b(),c();var z={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(a){var b=window.ActiveXObject||"ActiveXObject"in window;if(void 0===a)return null;var c;if(window.DOMParser){var d=new window.DOMParser,e=null;if(!b)try{e=d.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(f){e=null}try{c=d.parseFromString(a,"text/xml"),null!=e&&c.getElementsByTagNameNS(e,"parsererror").length>0&&(c=null)}catch(f){c=null}}else 0==a.indexOf("<?")&&(a=a.substr(a.indexOf("?>")+2)),c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(a);return c},this.asArray=function(a){return void 0===a||null==a?[]:a instanceof Array?a:[a]},this.toXmlDateTime=function(a){return a instanceof Date?a.toISOString():"number"==typeof a?new Date(a).toISOString():null},this.asDateTime=function(a){return"string"==typeof a?i(a):a},this.xml2json=function(a){return l(a)},this.xml_str2json=function(a){var b=this.parseXmlString(a);return null!=b?this.xml2json(b):null},this.json2xml_str=function(a){return x(a,"")},this.json2xml=function(a){var b=this.json2xml_str(a);return this.parseXmlString(b)},this.getVersion=function(){return y}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d,b.exports=c["default"]},{}],4:[function(a,b,c){var d={};d.parseBuffer=function(a){return new e(a).parse()},d.addBoxProcessor=function(a,b){"string"==typeof a&&"function"==typeof b&&(f.prototype._boxProcessors[a]=b)},d.createFile=function(){return new e},d.createBox=function(a,b,c){var d=f.create(a);return b&&b.append(d,c),d},d.createFullBox=function(a,b,c){var e=d.createBox(a,b,c);return e.version=0,e.flags=0,e},d.Utils={},d.Utils.dataViewToString=function(a,b){var c=b||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(c).decode(a);var d=[],e=0;if("utf-8"===c)for(;e<a.byteLength;){var f=a.getUint8(e++);128>f||(224>f?(f=(31&f)<<6,f|=63&a.getUint8(e++)):240>f?(f=(15&f)<<12,f|=(63&a.getUint8(e++))<<6,f|=63&a.getUint8(e++)):(f=(7&f)<<18,f|=(63&a.getUint8(e++))<<12,f|=(63&a.getUint8(e++))<<6,f|=63&a.getUint8(e++))),d.push(String.fromCharCode(f))}else for(;e<a.byteLength;)d.push(String.fromCharCode(a.getUint8(e++)));return d.join("")},d.Utils.utf8ToByteArray=function(a){var b,c;if("undefined"!=typeof TextEncoder)b=(new TextEncoder).encode(a);else for(b=[],c=0;c<a.length;++c){var d=a.charCodeAt(c);128>d?b.push(d):2048>d?(b.push(192|d>>6),b.push(128|63&d)):65536>d?(b.push(224|d>>12),b.push(128|63&d>>6),b.push(128|63&d)):(b.push(240|d>>18),b.push(128|63&d>>12),b.push(128|63&d>>6),b.push(128|63&d))}return b},d.Utils.appendBox=function(a,b,c){if(b._offset=a._cursor.offset,b._root=a._root?a._root:a,b._raw=a._raw,b._parent=a,-1!==c){if(void 0===c||null===c)return void a.boxes.push(b);var d,e=-1;if("number"==typeof c)e=c;else{if("string"==typeof c)d=c;else{if("object"!=typeof c||!c.type)return void a.boxes.push(b);d=c.type}for(var f=0;f<a.boxes.length;f++)if(d===a.boxes[f].type){e=f+1;break}}a.boxes.splice(e,0,b)}},"undefined"!=typeof c&&(c.parseBuffer=d.parseBuffer,c.addBoxProcessor=d.addBoxProcessor,c.createFile=d.createFile,c.createBox=d.createBox,c.createFullBox=d.createFullBox,c.Utils=d.Utils),d.Cursor=function(a){this.offset="undefined"==typeof a?0:a};var e=function(a){this._cursor=new d.Cursor,this.boxes=[],a&&(this._raw=new DataView(a))};e.prototype.fetch=function(a){var b=this.fetchAll(a,!0);return b.length?b[0]:null},e.prototype.fetchAll=function(a,b){var c=[];return e._sweep.call(this,a,c,b),c},e.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var a=f.parse(this);if("undefined"==typeof a.type)break;this.boxes.push(a)}return this},e._sweep=function(a,b,c){this.type&&this.type==a&&b.push(this);for(var d in this.boxes){if(b.length&&c)return;e._sweep.call(this.boxes[d],a,b,c)}},e.prototype.write=function(){var a,b=0;for(a=0;a<this.boxes.length;a++)b+=this.boxes[a].getLength(!1);var c=new Uint8Array(b);for(this._rawo=new DataView(c.buffer),this.bytes=c,this._cursor.offset=0,a=0;a<this.boxes.length;a++)this.boxes[a].write();return c.buffer},e.prototype.append=function(a,b){d.Utils.appendBox(this,a,b)};var f=function(){this._cursor=new d.Cursor};f.parse=function(a){var b=new f;return b._offset=a._cursor.offset,b._root=a._root?a._root:a,b._raw=a._raw,b._parent=a,b._parseBox(),a._cursor.offset=b._raw.byteOffset+b._raw.byteLength,b},f.create=function(a){var b=new f;return b.type=a,b.boxes=[],b},f.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],f.prototype._boxProcessors={},f.prototype._procField=function(a,b,c){this._parsing?this[a]=this._readField(b,c):this._writeField(b,c,this[a])},f.prototype._procFieldArray=function(a,b,c,d){var e;if(this._parsing)for(this[a]=[],e=0;b>e;e++)this[a][e]=this._readField(c,d);else for(e=0;e<this[a].length;e++)this._writeField(c,d,this[a][e])},f.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},f.prototype._procEntries=function(a,b,c){var d;if(this._parsing)for(this[a]=[],d=0;b>d;d++)this[a].push({}),c.call(this,this[a][d]);else for(d=0;b>d;d++)c.call(this,this[a][d])},f.prototype._procSubEntries=function(a,b,c,d){var e;if(this._parsing)for(a[b]=[],e=0;c>e;e++)a[b].push({}),d.call(this,a[b][e]);else for(e=0;c>e;e++)d.call(this,a[b][e])},f.prototype._procEntryField=function(a,b,c,d){this._parsing?a[b]=this._readField(c,d):this._writeField(c,d,a[b])},f.prototype._procSubBoxes=function(a,b){var c;if(this._parsing)for(this[a]=[],c=0;b>c;c++)this[a].push(f.parse(this));else for(c=0;b>c;c++)this._rawo?this[a][c].write():this.size+=this[a][c].getLength()},f.prototype._readField=function(a,b){switch(a){case"uint":return this._readUint(b);case"int":return this._readInt(b);case"template":return this._readTemplate(b);case"string":return-1===b?this._readTerminatedString():this._readString(b);case"data":return this._readData(b);case"utf8":return this._readUTF8String();default:return-1}},f.prototype._readInt=function(a){var b=null,c=this._cursor.offset-this._raw.byteOffset;switch(a){case 8:b=this._raw.getInt8(c);break;case 16:b=this._raw.getInt16(c);break;case 32:b=this._raw.getInt32(c);break;case 64:var d=this._raw.getInt32(c),e=this._raw.getInt32(c+4);b=d*Math.pow(2,32)+e}return this._cursor.offset+=a>>3,b},f.prototype._readUint=function(a){var b,c,d=null,e=this._cursor.offset-this._raw.byteOffset;switch(a){case 8:d=this._raw.getUint8(e);break;case 16:d=this._raw.getUint16(e);break;case 24:b=this._raw.getUint16(e),c=this._raw.getUint8(e+2),d=(b<<8)+c;break;case 32:d=this._raw.getUint32(e);break;case 64:b=this._raw.getUint32(e),c=this._raw.getUint32(e+4),d=b*Math.pow(2,32)+c}return this._cursor.offset+=a>>3,d},f.prototype._readString=function(a){for(var b="",c=0;a>c;c++){var d=this._readUint(8);b+=String.fromCharCode(d)}return b},f.prototype._readTemplate=function(a){var b=this._readUint(a/2),c=this._readUint(a/2);return b+c/Math.pow(2,a/2)},f.prototype._readTerminatedString=function(){for(var a="";this._cursor.offset-this._offset<this._raw.byteLength;){var b=this._readUint(8);if(0===b)break;a+=String.fromCharCode(b)}return a},f.prototype._readData=function(a){var b=a>0?a:this._raw.byteLength-(this._cursor.offset-this._offset),c=new DataView(this._raw.buffer,this._cursor.offset,b);return this._cursor.offset+=b,c},f.prototype._readUTF8String=function(){var a=this._readData();return d.Utils.dataViewToString(a)},f.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)return void(this._root._incomplete=!0);switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())},f.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},f.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(f.parse(this))},f.prototype.append=function(a,b){d.Utils.appendBox(this,a,b)},f.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var a=0;a<this.boxes.length;a++)this.size+=this.boxes[a].getLength();return this._data&&this._writeData(this._data),this.size},f.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var a=0;a<this.boxes.length;a++)this.boxes[a].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},f.prototype._writeInt=function(a,b){if(this._rawo){var c=this._cursor.offset-this._rawo.byteOffset;switch(a){case 8:this._rawo.setInt8(c,b);break;case 16:this._rawo.setInt16(c,b);break;case 32:this._rawo.setInt32(c,b);break;case 64:var d=Math.floor(b/Math.pow(2,32)),e=b-d*Math.pow(2,32);this._rawo.setUint32(c,d),this._rawo.setUint32(c+4,e)}this._cursor.offset+=a>>3}else this.size+=a>>3},f.prototype._writeUint=function(a,b){if(this._rawo){var c,d,e=this._cursor.offset-this._rawo.byteOffset;switch(a){case 8:this._rawo.setUint8(e,b);break;case 16:this._rawo.setUint16(e,b);break;case 24:c=(16776960&b)>>8,d=255&b,this._rawo.setUint16(e,c),this._rawo.setUint8(e+2,d);break;case 32:this._rawo.setUint32(e,b);break;case 64:c=Math.floor(b/Math.pow(2,32)),d=b-c*Math.pow(2,32),this._rawo.setUint32(e,c),this._rawo.setUint32(e+4,d)}this._cursor.offset+=a>>3}else this.size+=a>>3},f.prototype._writeString=function(a,b){for(var c=0;a>c;c++)this._writeUint(8,b.charCodeAt(c))},f.prototype._writeTerminatedString=function(a){if(0!==a.length){for(var b=0;b<a.length;b++)this._writeUint(8,a.charCodeAt(b));this._writeUint(8,0)}},f.prototype._writeTemplate=function(a,b){var c=Math.floor(b),d=(b-c)*Math.pow(2,a/2);this._writeUint(a/2,c),this._writeUint(a/2,d)},f.prototype._writeData=function(a){if(a instanceof Array&&(a=new DataView(Uint8Array.from(a).buffer)),a instanceof Uint8Array&&(a=new DataView(a.buffer)),this._rawo){for(var b=this._cursor.offset-this._rawo.byteOffset,c=0;c<a.byteLength;c++)this._rawo.setUint8(b+c,a.getUint8(c));this._cursor.offset+=a.byteLength}else this.size+=a.byteLength},f.prototype._writeUTF8String=function(a){var b=d.Utils.utf8ToByteArray(a);if(this._rawo)for(var c=new DataView(this._rawo.buffer,this._cursor.offset,b.length),e=0;e<b.length;e++)c.setUint8(e,b[e]);else this.size+=b.length},f.prototype._writeField=function(a,b,c){switch(a){case"uint":this._writeUint(b,c);break;case"int":this._writeInt(b,c);break;case"template":this._writeTemplate(b,c);break;case"string":-1==b?this._writeTerminatedString(c):this._writeString(b,c);break;case"data":this._writeData(c);break;case"utf8":this._writeUTF8String(c)}},f.prototype._boxProcessors.avc1=f.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},f.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},f.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(a){this._procEntryField(a,"segment_duration","uint",1===this.version?64:32),this._procEntryField(a,"media_time","int",1===this.version?64:32),this._procEntryField(a,"media_rate_integer","int",16),this._procEntryField(a,"media_rate_fraction","int",16)})},f.prototype._boxProcessors.emsg=function(){this._procFullBox(),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("message_data","data",-1)},f.prototype._boxProcessors.free=f.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},f.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},f.prototype._boxProcessors.ftyp=f.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var a=-1;this._parsing&&(a=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",a,"string",4)},f.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},f.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},f.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode((this.language>>10&31)+96,(this.language>>5&31)+96,(31&this.language)+96)),this._procField("pre_defined","uint",16)},f.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},f.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},f.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},f.prototype._boxProcessors.mp4a=f.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},f.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},f.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},f.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},f.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},f.prototype._boxProcessors.sdtp=function(){this._procFullBox();var a=-1;this._parsing&&(a=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",a,"uint",8)},f.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(a){this._parsing||(a.reference=(1&a.reference_type)<<31,a.reference|=2147483647&a.referenced_size,a.sap=(1&a.starts_with_SAP)<<31,a.sap|=(3&a.SAP_type)<<28,a.sap|=268435455&a.SAP_delta_time),this._procEntryField(a,"reference","uint",32),this._procEntryField(a,"subsegment_duration","uint",32),this._procEntryField(a,"sap","uint",32),this._parsing&&(a.reference_type=a.reference>>31&1,a.referenced_size=2147483647&a.reference,a.starts_with_SAP=a.sap>>31&1,a.SAP_type=a.sap>>28&7,a.SAP_delta_time=268435455&a.sap)})},f.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},f.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(a){this._procEntryField(a,"ranges_count","uint",32),this._procSubEntries(a,"ranges",a.ranges_count,function(a){this._procEntryField(a,"level","uint",8),this._procEntryField(a,"range_size","uint",24)})})},f.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},f.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(a){this._procEntryField(a,"sample_delta","uint",32),this._procEntryField(a,"subsample_count","uint",16),this._procSubEntries(a,"subsamples",a.subsample_count,function(a){this._procEntryField(a,"subsample_size","uint",1===this.version?32:16),this._procEntryField(a,"subsample_priority","uint",8),this._procEntryField(a,"discardable","uint",8),this._procEntryField(a,"codec_specific_parameters","uint",32)})})},f.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},f.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},f.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},f.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(a){this._procEntryField(a,"time","uint",1===this.version?64:32),this._procEntryField(a,"moof_offset","uint",1===this.version?64:32),this._procEntryField(a,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(a,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(a,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},f.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},f.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},f.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(a){256&this.flags&&this._procEntryField(a,"sample_duration","uint",32),512&this.flags&&this._procEntryField(a,"sample_size","uint",32),1024&this.flags&&this._procEntryField(a,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(a,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},f.prototype._boxProcessors["url "]=f.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},f.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},f.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},f.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},f.prototype._boxProcessors.vtte=function(){}},{}],5:[function(a,b,c){var d=c.decimalAdjust=function(a,b,c){return"undefined"==typeof c||0===+c?Math[a](b):(b=+b,c=+c,isNaN(b)||"number"!=typeof c||c%1!==0?NaN:(b=b.toString().split("e"),b=Math[a](+(b[0]+"e"+(b[1]?+b[1]-c:-c))),b=b.toString().split("e"),+(b[0]+"e"+(b[1]?+b[1]+c:c))))};b.exports={round10:function(a,b){return d("round",a,b)},floor10:function(a,b){return d("floor",a,b)},ceil10:function(a,b){return d("ceil",a,b)}},b.exports.polyfill=function(){Math.round10||(Math.round10=b.exports.round10),Math.floor10||(Math.floor10=b.exports.floor10),Math.ceil10||(Math.ceil10=b.exports.ceil10)}},{}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){k=!0,l=!0,m=(new Date).getTime()}function b(a){l=a}function c(a){k=a}function d(){return k}function e(){var a="",b=null;l&&(b=(new Date).getTime(),a+="["+(b-m)+"]"),a.length>0&&(a+=" "),Array.apply(null,arguments).forEach(function(b){a+=b+" "}),k&&console.log(a),h.trigger(i["default"].LOG,{message:a})}var f=this.context,h=g["default"](f).getInstance(),j=void 0,k=void 0,l=void 0,m=void 0;return j={log:e,setLogTimestampVisible:b,setLogToBrowserConsole:c,getLogToBrowserConsole:d},a(),j}Object.defineProperty(c,"__esModule",{value:!0});var f=a(7),g=d(f),h=a(11),i=d(h),j=a(8),k=d(j);e.__dashjs_factory_name="Debug",c["default"]=k["default"].getSingletonFactory(e),b.exports=c["default"]},{11:11,7:7,8:8}],7:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b,c){var e=arguments.length<=3||void 0===arguments[3]?h:arguments[3];if(!a)throw new Error("event type cannot be null or undefined");if(!b||"function"!=typeof b)throw new Error("listener must be a function: "+b);if(!(d(a,b,c)>=0)){f[a]=f[a]||[];var g={callback:b,scope:c,priority:e},i=f[a].some(function(b,c){return b&&e>b.priority?(f[a].splice(c,0,g),!0):void 0});i||f[a].push(g)}}function b(a,b,c){if(a&&b&&f[a]){var e=d(a,b,c);0>e||(f[a][e]=null)}}function c(a,b){if(a&&f[a]){if(b=b||{},b.hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");b.type=a,f[a]=f[a].filter(function(a){return a}),f[a].forEach(function(a){return a.callback.call(a.scope,b)})}}function d(a,b,c){var d=-1;return f[a]?(f[a].some(function(a,e){return!a||a.callback!==b||c&&c!==a.scope?void 0:(d=e,!0)}),d):d}function e(){f={}}var f={},g={on:a,off:b,trigger:c,reset:e};return g}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f),h=0,i=5e3;e.__dashjs_factory_name="EventBus";var j=g["default"].getSingletonFactory(e);j.EVENT_PRIORITY_LOW=h,j.EVENT_PRIORITY_HIGH=i,c["default"]=j,
b.exports=c["default"]},{8:8}],8:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(){function a(a,b,c,d){var e=g(d);!e[a]&&b&&(e[a]={instance:b,override:c})}function b(a,b){for(var c in j){var d=j[c];if(d.context===a&&d.name===b)return d.instance}return null}function c(a,b,c){for(var d in j){var e=j[d];if(e.context===a&&e.name===b)return void(j[d].instance=c)}j.push({name:b,context:a,instance:c})}function d(a){return function(b){return void 0===b&&(b={}),{create:function(){return f(a.__dashjs_factory_name,a.apply({context:b},arguments),b,arguments)}}}}function e(a){return function(c){var d=void 0;return void 0===c&&(c={}),{getInstance:function(){return d||(d=b(c,a.__dashjs_factory_name)),d||(d=f(a.__dashjs_factory_name,a.apply({context:c},arguments),c,arguments),j.push({name:a.__dashjs_factory_name,context:c,instance:d})),d}}}}function f(a,b,c,d){var e=g(c),f=e[a];if(f){var i=f.instance;if(!f.override)return i.apply({context:c,factory:h},d);i=i.apply({context:c,factory:h,parent:b},d);for(var j in i)b.hasOwnProperty(j)&&(b[j]=i[j])}return b}function g(a){var b=void 0;return i.forEach(function(c){c===a&&(b=c)}),b||(b=i.push(a)),b}var h=void 0,i=[],j=[];return h={extend:a,getSingletonInstance:b,setSingletonInstance:c,getSingletonFactory:e,getClassFactory:d}}();c["default"]=d,b.exports=c["default"]},{}],9:[function(a,b,c){"use strict";function d(){return e}Object.defineProperty(c,"__esModule",{value:!0}),c.getVersionString=d;var e="2.5.0"},{}],10:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(12),i=d(h),j=function(a){function b(){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_REQUESTED="initRequested",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATED="representationUpdated",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_APPEND_COMPLETED="sourceBufferAppendCompleted",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TIMED_TEXT_REQUESTED="timedTextRequested",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}return f(b,a),b}(i["default"]);c["default"]=j,b.exports=c["default"]},{12:12}],11:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(10),i=d(h),j=function(a){function b(){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).apply(this,arguments)}return f(b,a),b}(i["default"]),k=new j;c["default"]=k,b.exports=c["default"]},{10:10}],12:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"extend",value:function(a,b){if(a){var c=!!b&&b.override,d=!!b&&b.publicOnly;for(var e in a)!a.hasOwnProperty(e)||this[e]&&!c||d&&-1===a[e].indexOf("public_")||(this[e]=a[e])}}}]),a}();c["default"]=f,b.exports=c["default"]},{}],13:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(){function a(a){a&&a.dashManifestModel&&(I=a.dashManifestModel)}function b(){J=[],K={}}function c(a,b){return b.getRepresentationForQuality(a.quality)}function d(a){return K&&a&&K[a.streamInfo.id]?K[a.streamInfo.id][a.index]:null}function e(a){for(var b=J.length,c=0;b>c;c++){var d=J[c];if(a.id===d.id)return d}return null}function f(a,b){var c=new h["default"],d=b.adaptation.period.mpd.manifest.Period_asArray[b.adaptation.period.index].AdaptationSet_asArray[b.adaptation.index],e=I.getRepresentationFor(b.index,d);return c.id=b.id,c.quality=b.index,c.bandwidth=I.getBandwidth(e),c.DVRWindow=b.segmentAvailabilityRange,c.fragmentDuration=b.segmentDuration||(b.segments&&b.segments.length>0?b.segments[0].duration:NaN),c.MSETimeOffset=b.MSETimeOffset,c.useCalculatedLiveEdgeTime=b.useCalculatedLiveEdgeTime,c.mediaInfo=g(a,b.adaptation),c}function g(a,b){var c,d=new j["default"],e=b.period.mpd.manifest.Period_asArray[b.period.index].AdaptationSet_asArray[b.index];return d.id=b.id,d.index=b.index,d.type=b.type,d.streamInfo=k(a,b.period),d.representationCount=I.getRepresentationCount(e),d.lang=I.getLanguageForAdaptation(e),c=I.getViewpointForAdaptation(e),d.viewpoint=c?c.value:void 0,d.accessibility=I.getAccessibilityForAdaptation(e).map(function(a){var b=a.value,c=b;return a.schemeIdUri&&a.schemeIdUri.search("cea-608")>=0&&"undefined"!=typeof t["default"]&&(c=b?"cea-608:"+b:"cea-608",d.embeddedCaptions=!0),c}),d.audioChannelConfiguration=I.getAudioChannelConfigurationForAdaptation(e).map(function(a){return a.value}),d.roles=I.getRolesForAdaptation(e).map(function(a){return a.value}),d.codec=I.getCodec(e),d.mimeType=I.getMimeType(e),d.contentProtection=I.getContentProtectionData(e),d.bitrateList=I.getBitrateListForAdaptation(e),d.contentProtection&&d.contentProtection.forEach(function(a){a.KID=I.getKID(a)}),d.isText=I.getIsTextTrack(d.mimeType),d}function i(a,b,c){a.id=b,a.index=100+parseInt(b.substring(2,3)),a.type="embeddedText",a.codec="cea-608-in-SEI",a.isText=!0,a.isEmbedded=!0,a.lang=b+" "+c,a.roles=["caption"]}function k(a,b){var c=new l["default"],d=1;return c.id=b.id,c.index=b.index,c.start=b.start,c.duration=b.duration,c.manifestInfo=m(a,b.mpd),c.isLast=1===a.Period_asArray.length||Math.abs(c.start+c.duration-c.manifestInfo.duration)<d,c.isFirst=1===a.Period_asArray.length||I.getRegularPeriods(a,I.getMpd(a))[0].id===b.id,c}function m(a,b){var c=new n["default"];return c.DVRWindowSize=b.timeShiftBufferDepth,c.loadedTime=b.manifest.loadedTime,c.availableFrom=b.availabilityStartTime,c.minBufferTime=b.manifest.minBufferTime,c.maxFragmentDuration=b.maxSegmentDuration,c.duration=I.getDuration(a),c.isDynamic=I.getIsDynamic(a),c}function o(a,b,c){var d=I.getAdaptationForType(a,b.index,c,b);if(!d)return null;var f=e(b),h=f.id,i=I.getIndexForAdaptation(d,a,b.index);return K[h]=K[h]||I.getAdaptationsForPeriod(a,f),g(a,K[h][i])}function q(a,b,c){var d,f,h,j,k,l,m=e(b),n=m.id,o=I.getAdaptationsForType(a,b.index,"embeddedText"!==c?c:"video"),p=[];if(!o)return p;for(K[n]=K[n]||I.getAdaptationsForPeriod(a,m),j=0,l=o.length;l>j;j++){if(d=o[j],h=I.getIndexForAdaptation(d,a,b.index),f=g(a,K[n][h]),"embeddedText"===c){var q=f.accessibility.length;for(k=0;q>k;k++)if(f){var r=f.accessibility[k];if(0===r.indexOf("cea-608:")){var s=r.substring(8),t=s.split(";");if("CC"===t[0].substring(0,2))for(k=0;k<t.length;k++)f||(f=g.call(this,a,K[n][h])),i(f,t[k].substring(0,3),t[k].substring(4)),p.push(f),f=null;else for(k=0;k<t.length;k++)f||(f=g.call(this,a,K[n][h])),i(f,"CC"+(k+1),t[k]),p.push(f),f=null}else 0===r.indexOf("cea-608")&&(i(f,"CC1","eng"),p.push(f),f=null)}}f&&"embeddedText"!==c&&p.push(f)}return p}function r(a){if(!a)return null;var b=[],c=I.getMpd(a);J=I.getRegularPeriods(a,c),K={};for(var d=0,e=J.length;e>d;d++)b.push(k(a,J[d]));return b}function s(a){var b=I.getMpd(a);return m(a,b)}function u(a,b){var c=a.getRepresentationController().getRepresentationForQuality(b);return a.getIndexHandler().getInitRequest(c)}function w(a,b){var d=c(b,a.getRepresentationController());return a.getIndexHandler().getNextSegmentRequest(d)}function x(a,b,d,e){var f=c(b,a.getRepresentationController());return a.getIndexHandler().getSegmentRequestForTime(f,d,e)}function y(a,b,d){var e=c(b,a.getRepresentationController());return a.getIndexHandler().generateSegmentRequestForTime(e,d)}function z(a){return a.getIndexHandler().getCurrentTime()}function A(a,b){return a.getIndexHandler().setCurrentTime(b)}function B(a,b){var c,f,g=e(b.getStreamInfo()),h=b.getMediaInfo(),i=d(h),j=b.getType();c=h.id,f=c?I.getAdaptationForId(c,a,g.index):I.getAdaptationForIndex(h.index,a,g.index),b.getRepresentationController().updateData(f,i,j)}function C(a,b,c){var d=b.getRepresentationForQuality(c);return d?f(a,d):null}function D(a,b){var c=b.getCurrentRepresentation();return c?f(a,c):null}function E(a,b,c){var d=new p["default"],e=a.scheme_id_uri,f=a.value,g=a.timescale,h=a.presentation_time_delta,i=a.event_duration,j=a.id,k=a.message_data,l=c*g+h;return b[e]?(d.eventStream=b[e],d.eventStream.value=f,d.eventStream.timescale=g,d.duration=i,d.id=j,d.presentationTime=l,d.messageData=k,d.presentationTimeDelta=h,d):null}function F(a,b,f){var g=[];return b instanceof l["default"]?g=I.getEventsForPeriod(a,e(b)):b instanceof j["default"]?g=I.getEventStreamForAdaptationSet(a,d(b)):b instanceof h["default"]&&(g=I.getEventStreamForRepresentation(a,c(b,f.getRepresentationController()))),g}function G(){J=[],K={}}var H=void 0,I=void 0,J=void 0,K=void 0;return H={initialize:b,convertDataToTrack:f,convertDataToMedia:g,convertDataToStream:k,getDataForTrack:c,getDataForMedia:d,getDataForStream:e,getStreamsInfo:r,getManifestInfo:s,getMediaInfoForType:o,getAllMediaInfoForType:q,getCurrentRepresentationInfo:D,getRepresentationInfoForQuality:C,updateData:B,getInitRequest:u,getNextFragmentRequest:w,getFragmentRequestForTime:x,generateFragmentRequestForTime:y,getIndexHandlerTime:z,setIndexHandlerTime:A,getEventsFor:F,getEvent:E,setConfig:a,reset:G,metricsList:v}}Object.defineProperty(c,"__esModule",{value:!0});var g=a(126),h=e(g),i=a(121),j=e(i),k=a(123),l=e(k),m=a(120),n=e(m),o=a(40),p=e(o),q=a(8),r=e(q),s=a(1),t=e(s),u=a(18),v=d(u);f.__dashjs_factory_name="DashAdapter",c["default"]=r["default"].getSingletonFactory(f),b.exports=c["default"]},{1:1,120:120,121:121,123:123,126:126,18:18,40:40,8:8}],14:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){V=-1,Z=0,$=NaN,N.on(l["default"].INITIALIZATION_LOADED,J,U),N.on(l["default"].SEGMENTS_LOADED,K,U)}function c(b){_=b,Y=_.getType(),X=_.isDynamic(),aa=y["default"](L).create(a,X)}function d(){return _}function e(a){Z=a}function f(){return Z}function h(){return V}function k(){return $}function m(){aa=null,Z=0,$=NaN,W=NaN,V=-1,X=null,Y=null,_=null,N.off(l["default"].INITIALIZATION_LOADED,J,U),N.off(l["default"].SEGMENTS_LOADED,K,U)}function o(a){return a?a.split("$$").join("$"):a}function p(a,b){if(null===b||null===a||-1===a.indexOf("$RepresentationID$"))return a;var c=b.toString();return a.split("$RepresentationID$").join(c)}function q(a,b,c){var d,e,f=T.resolve(c.path);return f&&b!==f.url&&O.isRelative(b)?(d=f.url,e=f.serviceLocation,b&&(d=O.resolve(b,d))):d=b,!O.isRelative(d)&&(a.url=d,a.serviceLocation=e,!0)}function s(a,b){var c=new g["default"],d=a.adaptation.period,e=d.start;return c.mediaType=b,c.type=j.HTTPRequest.INIT_SEGMENT_TYPE,c.range=a.range,c.availabilityStartTime=Q.calcAvailabilityStartTimeFromPresentationTime(e,d.mpd,X),c.availabilityEndTime=Q.calcAvailabilityEndTimeFromPresentationTime(e+d.duration,d.mpd,X),c.quality=a.index,c.mediaInfo=_.getMediaInfo(),c.representationId=a.id,q(c,a.initialization,a)?c:void 0}function u(a){if(!a)return null;var b=s(a,Y);return b}function x(a){var b=!1;if(X||V!==a.availableSegmentsNumber){var c=w.getSegmentByIndex(V,a);if(c){var d=c.presentationStartTime-a.adaptation.period.start,e=a.adaptation.period.duration;M(a.segmentInfoType+": "+d+" / "+e),b=("SegmentTimeline"!==a.segmentInfoType||!X)&&d>=e}}else b=!0;return b}function A(a){return aa.getSegments(a,W,V,B)}function B(a,b){if(a.segments=b,b&&b.length>0&&($=isNaN($)?b[0].presentationStartTime:Math.min(b[0].presentationStartTime,$)),X&&isNaN(Q.getExpectedLiveEdge())){var c=b[b.length-1],d=c.presentationStartTime,e=S.getMetricsFor("stream");Q.setExpectedLiveEdge(d),S.updateManifestUpdateInfo(R.getCurrentManifestUpdate(e),{presentationStartTime:d})}}function C(a){if(!a)throw new i["default"]("no representation");return a.segments=null,A(a),a}function D(a,b){var c,d=v["default"].hasInitialization(a),e=v["default"].hasSegments(a);return a.segmentDuration||a.segments||C(a),a.segmentAvailabilityRange=null,a.segmentAvailabilityRange=Q.calcSegmentAvailabilityRange(a,X),a.segmentAvailabilityRange.end<a.segmentAvailabilityRange.start&&!a.useCalculatedLiveEdgeTime?(c=new i["default"](z,"no segments are available yet",{availabilityDelay:a.segmentAvailabilityRange.start-a.segmentAvailabilityRange.end}),void N.trigger(l["default"].REPRESENTATION_UPDATED,{sender:this,representation:a,error:c})):(b||(V=-1),a.segmentDuration&&C(a),d||P.loadInitialization(a),e||P.loadSegments(a,Y,a.indexRange),void(d&&e&&N.trigger(l["default"].REPRESENTATION_UPDATED,{sender:this,representation:a})))}function E(a,b,c){var d,e,f,g,h,i=b.segments,j=i?i.length:null,k=-1;if(i&&j>0)for(h=0;j>h;h++)if(e=i[h],f=e.presentationStartTime,g=e.duration,d=void 0===c||null===c?g/2:c,a+d>=f&&f+g>a-d){k=e.availabilityIdx;break}return k}function F(a){if(null===a||void 0===a)return null;var b=new g["default"],c=a.representation,d=c.adaptation.period.mpd.manifest.Period_asArray[c.adaptation.period.index].AdaptationSet_asArray[c.adaptation.index].Representation_asArray[c.index].bandwidth,e=a.media;return e=w.replaceTokenForTemplate(e,"Number",a.replacementNumber),e=w.replaceTokenForTemplate(e,"Time",a.replacementTime),e=w.replaceTokenForTemplate(e,"Bandwidth",d),e=p(e,c.id),e=o(e),b.mediaType=Y,b.type=j.HTTPRequest.MEDIA_SEGMENT_TYPE,b.range=a.mediaRange,b.startTime=a.presentationStartTime,b.duration=a.duration,b.timescale=c.timescale,b.availabilityStartTime=a.availabilityStartTime,b.availabilityEndTime=a.availabilityEndTime,b.wallStartTime=a.wallStartTime,b.quality=c.index,b.index=a.availabilityIdx,b.mediaInfo=_.getMediaInfo(),b.adaptationIndex=c.adaptation.index,q(b,e,c)?b:void 0}function G(a,b,c){var d,e,f,h=V,i=!!c&&c.keepIdx,j=c?c.timeThreshold:null,k=!(!c||!c.ignoreIsFinished);return a?(W!==b&&(W=b,M("Getting the request for "+Y+" time : "+b)),A(a),V=E(b,a,j),0>V&&(A(a),V=E(b,a,j)),V>0&&M("Index for "+Y+" time "+b+" is "+V),f=!k&&x(a),f?(d=new g["default"],d.action=g["default"].ACTION_COMPLETE,d.index=V,d.mediaType=Y,d.mediaInfo=_.getMediaInfo(),M("Signal complete.",d)):(e=w.getSegmentByIndex(V,a),d=F(e)),i&&h>=0&&(V="SegmentTimeline"===a.segmentInfoType&&X?V:h),d):null}function H(a,b){var c=(a.segmentAvailabilityRange.end-a.segmentAvailabilityRange.start)/2;return a.segments=null,a.segmentAvailabilityRange={start:b-c,end:b+c},G(a,b,{keepIdx:!1,ignoreIsFinished:!0})}function I(a){var b,c,d;return a&&-1!==V?(W=null,V++,M("Getting the next request at index: "+V),d=x(a),d?(b=new g["default"],b.action=g["default"].ACTION_COMPLETE,b.index=V,b.mediaType=Y,b.mediaInfo=_.getMediaInfo(),M("Signal complete.")):(A(a),c=w.getSegmentByIndex(V,a),b=F(c),!c&&X&&V--),b):null}function J(a){var b=a.representation;b.segments&&N.trigger(l["default"].REPRESENTATION_UPDATED,{sender:this,representation:b})}function K(a){if(!a.error&&Y===a.mediaType){var b,c,d,e,f=a.segments,g=a.representation,h=[],i=0;for(b=0,c=f.length;c>b;b++)d=f[b],e=w.getTimeBasedSegment(Q,X,g,d.startTime,d.duration,d.timescale,d.media,d.mediaRange,i),h.push(e),e=null,i++;g.segmentAvailabilityRange={start:h[0].presentationStartTime,end:h[c-1].presentationStartTime},g.availableSegmentsNumber=c,B(g,h),v["default"].hasInitialization(g)&&N.trigger(l["default"].REPRESENTATION_UPDATED,{sender:this,representation:g})}}var L=this.context,M=r["default"](L).getInstance().log,N=n["default"](L).getInstance(),O=t["default"](L).getInstance(),P=a.segmentBaseLoader,Q=a.timelineConverter,R=a.dashMetrics,S=a.metricsModel,T=a.baseURLController,U=void 0,V=void 0,W=void 0,X=void 0,Y=void 0,Z=void 0,$=void 0,_=void 0,aa=void 0;return U={initialize:c,getStreamProcessor:d,getInitRequest:u,getSegmentRequestForTime:G,getNextSegmentRequest:I,generateSegmentRequestForTime:H,updateRepresentation:D,setCurrentTime:e,getCurrentTime:f,getCurrentIndex:h,getEarliestTime:k,reset:m},b(),U}Object.defineProperty(c,"__esModule",{value:!0});var f=a(117),g=d(f),h=a(116),i=d(h),j=a(133),k=a(11),l=d(k),m=a(7),n=d(m),o=a(8),p=d(o),q=a(6),r=d(q),s=a(110),t=d(s),u=a(44),v=d(u),w=a(34),x=a(33),y=d(x),z=1;e.__dashjs_factory_name="DashHandler";var A=p["default"].getClassFactory(e);A.SEGMENTS_UNAVAILABLE_ERROR_CODE=z,c["default"]=A,b.exports=c["default"]},{11:11,110:110,116:116,117:117,133:133,33:33,34:34,44:44,6:6,7:7,8:8}],15:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(){function a(a,b){var c,d=C.getValue(),e=d.Period_asArray[b];return c=x(e,a),null===c?null:c.bandwidth}function b(a,b){var c,d=C.getValue(),e=d.Period_asArray[b];return c=w(e,a)}function c(a,b){var c,d=C.getValue(),e=d.Period_asArray[b];return c=z(e,a)}function d(a){return m(a,o.TRACK_SWITCH)}function e(a){return m(a,o.BUFFER_LEVEL)}function f(a){var b=e(a);return b?p.round10(b.level/1e3,-3):0}function h(a){return a.RequestsQueue}function j(a){if(null===a)return null;var b,c,d=a.HttpList,e=null;if(null===d||d.length<=0)return null;for(b=d.length,c=b-1;c>=0;){if(d[c].responsecode){e=d[c];break}c--}return e}function l(a){return null===a?[]:a.HttpList?a.HttpList:[]}function m(a,b){if(null===a)return null;var c=a[b];if(null===c)return null;var d=c.length;return 0>=d?null:c[d-1]}function n(a){return m(a,o.DROPPED_FRAMES)}function q(a){return m(a,o.SCHEDULING_INFO)}function r(a){return m(a,o.MANIFEST_UPDATE)}function s(a){return m(a,o.DVR_INFO)}function t(a,b){var c,d,e,f={};if(null===a)return null;for(c=l(a),e=c.length-1;e>=0;e--)if(d=c[e],d.type===g.HTTPRequest.MPD_TYPE){f=v(d._responseHeaders);break}return void 0===f[b]?null:f[b]}function u(a,b){if(null===a)return null;var c,d=j(a);return null===d||null===d._responseHeaders?null:(c=v(d._responseHeaders),void 0===c[b]?null:c[b])}function v(a){var b={};if(!a)return b;for(var c=a.trim().split("\r\n"),d=0,e=c.length;e>d;d++){var f=c[d],g=f.indexOf(": ");g>0&&(b[f.substring(0,g)]=f.substring(g+2))}return b}function w(a,b){var c=x(a,b,!0);return null!==c?c:-1}function x(a,b,c){var d,e,f,g,h,i;if(a)for(e=a.AdaptationSet_asArray,h=0;h<e.length;h+=1)for(d=e[h],g=d.Representation_asArray,i=0;i<g.length;i+=1)if(f=g[i],b===f.id)return c?i:f;return null}function y(a,b){return k["default"](B).getInstance().getIsTypeOf(a,b)}function z(a,b){var c,d,e,f;if(!a||!b)return-1;for(d=a.AdaptationSet_asArray,f=0;f<d.length;f+=1)if(c=d[f],e=c.Representation_asArray,y(c,b))return e.length;return-1}var A=void 0,B=this.context,C=i["default"](B).getInstance();return A={getBandwidthForRepresentation:a,getIndexForRepresentation:b,getMaxIndexForBufferType:c,getCurrentRepresentationSwitch:d,getLatestBufferLevelVO:e,getCurrentBufferLevel:f,getCurrentHttpRequest:j,getHttpRequests:l,getCurrentDroppedFrames:n,getCurrentSchedulingInfo:q,getCurrentDVRInfo:s,getCurrentManifestUpdate:r,getLatestFragmentRequestHeaderValueByID:u,getLatestMPDRequestHeaderValueByID:t,getRequestsQueue:h}}Object.defineProperty(c,"__esModule",{value:!0});var g=a(133),h=a(72),i=e(h),j=a(20),k=e(j),l=a(8),m=e(l),n=a(18),o=d(n),p=a(5);f.__dashjs_factory_name="DashMetrics",c["default"]=m["default"].getSingletonFactory(f),b.exports=c["default"]},{133:133,18:18,20:20,5:5,72:72,8:8}],16:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){u=m["default"](n).getInstance(),v=s["default"](n).getInstance(),y=g["default"](n).getInstance(),C=B["default"](n).create({errHandler:u,metricsModel:A,requestModifier:y})}function b(a){a.baseURLController&&(D=a.baseURLController),a.metricsModel&&(A=a.metricsModel)}function c(a,b){var d=null,e=null,f=D.resolve(a.path),g=b||{init:!0,url:f?f.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500};p("Start searching for initialization.");var i=j(g),k=function(b){g.bytesLoaded=g.range.end,e=v.parse(b),d=h(e),d?(a.range=d,r.trigger(o["default"].INITIALIZATION_LOADED,{representation:a})):(g.range.end=g.bytesLoaded+g.bytesToLoad,c(a,g))},l=function(){r.trigger(o["default"].INITIALIZATION_LOADED,{representation:a})};C.load({request:i,success:k,error:l}),p("Perform init search: "+g.url)}function d(a,b,c,e,g){if(c&&(void 0===c.start||void 0===c.end)){var h=c?c.toString().split("-"):null;c=h?{start:parseFloat(h[0]),end:parseFloat(h[1])}:null}g=g?g:l;var i=null,k=null,m=!!c,n=D.resolve(a.path),o={init:!1,url:n?n.url:void 0,range:m?c:{start:0,end:1500},searching:!m,bytesLoaded:e?e.bytesLoaded:0,bytesToLoad:1500},q=j(o),r=function(c){var e=o.bytesToLoad,h=c.byteLength;if(o.bytesLoaded=o.range.end-o.range.start,i=v.parse(c),k=i.getBox("sidx"),k&&k.isComplete){var j,l,m=k.references;if(null!==m&&void 0!==m&&m.length>0&&(j=1===m[0].reference_type),j){p("Initiate multiple SIDX load."),o.range.end=o.range.start+k.size;var n,q,r,s,t,u=[],w=0,x=(k.offset||o.range.start)+k.size,y=function(c){c?(u=u.concat(c),w++,w>=q&&g(u,a,b)):g(null,a,b)};for(n=0,q=m.length;q>n;n++)r=x,s=x+m[n].referenced_size-1,x+=m[n].referenced_size,t={start:r,end:s},d(a,null,t,o,y)}else p("Parsing segments from SIDX."),l=f(k,o),g(l,a,b)}else{if(k)o.range.start=k.offset||o.range.start,o.range.end=o.range.start+(k.size||e);else{if(h<o.bytesLoaded)return void g(null,a,b);var z=i.getLastBox();z&&z.size?(o.range.start=z.offset+z.size,o.range.end=o.range.start+e):o.range.end+=e}d(a,b,o.range,o,g)}},s=function(){g(null,a,b)};C.load({request:q,success:r,error:s}),p("Perform SIDX load: "+o.url)}function e(){C.abort(),C=null,u=null,v=null,y=null}function f(a,b){for(var c,d,e,f,g=a.references,h=g.length,j=a.timescale,k=a.earliest_presentation_time,l=b.range.start+a.offset+a.first_offset+a.size,m=[],n=0;h>n;n++)e=g[n].subsegment_duration,f=g[n].referenced_size,c=new i["default"],c.duration=e,c.startTime=k,c.timescale=j,d=l+f-1,c.mediaRange=l+"-"+d,m.push(c),k+=e,l+=f;return m}function h(a){var b,c,d=a.getBox("ftyp"),e=a.getBox("moov"),f=null;return p("Searching for initialization."),e&&e.isComplete&&(b=d?d.offset:e.offset,c=e.offset+e.size-1,f=b+"-"+c,p("Found the initialization.  Range: "+f)),f}function j(a){if(a.url){var b=new z["default"];return b.type=a.init?x.HTTPRequest.INIT_SEGMENT_TYPE:x.HTTPRequest.MEDIA_SEGMENT_TYPE,b.url=a.url,b.range=a.range.start+"-"+a.range.end,b}}function l(a,b,c){a?r.trigger(o["default"].SEGMENTS_LOADED,{segments:a,representation:b,mediaType:c}):r.trigger(o["default"].SEGMENTS_LOADED,{segments:null,representation:b,mediaType:c,error:new k["default"](null,"error loading segments",null)})}var n=this.context,p=w["default"](n).getInstance().log,r=q["default"](n).getInstance(),t=void 0,u=void 0,v=void 0,y=void 0,A=void 0,C=void 0,D=void 0;return t={setConfig:b,initialize:a,loadInitialization:c,loadSegments:d,reset:e}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(108),g=d(f),h=a(45),i=d(h),j=a(116),k=d(j),l=a(103),m=d(l),n=a(11),o=d(n),p=a(7),q=d(p),r=a(98),s=d(r),t=a(8),u=d(t),v=a(6),w=d(v),x=a(133),y=a(117),z=d(y),A=a(54),B=d(A);e.__dashjs_factory_name="SegmentBaseLoader",c["default"]=u["default"].getSingletonFactory(e),b.exports=c["default"]},{103:103,108:108,11:11,116:116,117:117,133:133,45:45,54:54,6:6,7:7,8:8,98:98}],17:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){y={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"},CueBlockNumber:{tag:21368}}}}},Void:{tag:236,required:!0}}}function b(){A=q["default"](p).getInstance(),B=s["default"](p).getInstance(),D=z["default"](p).create({errHandler:A,metricsModel:C,requestModifier:B})}function c(a){if(!a.baseURLController||!a.metricsModel)throw new Error("Missing config parameter(s)");E=a.baseURLController,C=a.metricsModel}function d(a){var b=[],c=void 0,d=void 0,e=void 0,f=k["default"](p).create({data:a}),g=void 0;for(f.consumeTag(y.Segment.Cues),d=f.getMatroskaCodedNum();f.moreData()&&f.consumeTagAndSize(y.Segment.Cues.CuePoint,!0);){for(c={},c.CueTime=f.parseTag(y.Segment.Cues.CuePoint.CueTime),c.CueTracks=[];f.moreData()&&f.consumeTagAndSize(y.Segment.Cues.CuePoint.CueTrackPositions,!0);){if(e={},e.Track=f.parseTag(y.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===e.Track)throw new Error("Cue track cannot be 0");e.ClusterPosition=f.parseTag(y.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),f.getPos()+4>d||!f.consumeTag(y.Segment.Cues.CuePoint.CueTrackPositions.CueBlockNumber,!0)?c.CueTracks.push(e):(g=f.getMatroskaCodedNum(),e.BlockNumber=f.getMatroskaUint(g),c.CueTracks.push(e))}if(0===c.CueTracks.length)throw new Error("Mandatory cuetrack not found");b.push(c)}if(0===b.length)throw new Error("mandatory cuepoint not found");return b}function e(a,b,c,e){var f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,k=void 0,l=void 0,m=void 0;for(g=d(a),h=[],j=0,k=g.length;k>j;j+=1)i=new u["default"],f=0,f=j<g.length-1?g[j+1].CueTime-g[j].CueTime:e-g[j].CueTime,i.duration=f,i.startTime=g[j].CueTime,i.timescale=1e3,l=g[j].CueTracks[0].ClusterPosition+b,m=j<g.length-1?g[j+1].CueTracks[0].ClusterPosition+b-1:c-1,i.mediaRange=l+"-"+m,h.push(i);return r("Parsed cues: "+h.length+" cues."),h}function f(a,b,c,d){var f=k["default"](p).create({data:a}),g=void 0,h=void 0,i=c.split("-"),j=null,l={url:b,range:{start:parseFloat(i[0]),end:parseFloat(i[1])},request:j},n=void 0,o=void 0;for(r("Parse EBML header: "+l.url),f.skipOverElement(y.EBML),f.consumeTag(y.Segment),n=f.getMatroskaCodedNum(),n+=f.getPos(),o=f.getPos();f.moreData()&&!f.consumeTagAndSize(y.Segment.Info,!0);)if(!(f.skipOverElement(y.Segment.SeekHead,!0)||f.skipOverElement(y.Segment.Tracks,!0)||f.skipOverElement(y.Segment.Cues,!0)||f.skipOverElement(y.Void,!0)))throw new Error("no valid top level element found");for(;void 0===g;){var q=f.getMatroskaCodedNum(!0),s=f.getMatroskaCodedNum();switch(q){case y.Segment.Info.Duration.tag:g=f[y.Segment.Info.Duration.parse](s);break;default:f.setPos(f.getPos()+s)}}j=m(l);var t=function(a){h=e(a,o,n,g),d(h)},u=function(){r("Download Error: Cues "+l.url),d(null)};D.load({request:j,success:t,error:u}),r("Perform cues load: "+l.url+" bytes="+l.range.start+"-"+l.range.end)}function h(a,b){var c=null,d=E.resolve(a.path),e=d?d.url:void 0,f=a.range.split("-"),h=b||{range:{start:parseFloat(f[0]),end:parseFloat(f[1])},request:c,url:e,init:!0};r("Start loading initialization."),c=m(h);var i=function(){t.trigger(g["default"].INITIALIZATION_LOADED,{representation:a})},j=function(){t.trigger(g["default"].INITIALIZATION_LOADED,{representation:a})};D.load({request:c,success:i,error:j}),r("Perform init load: "+h.url)}function j(a,b,c,d){var e=null,g=E.resolve(a.path),h=g?g.url:void 0,i=8192,j={bytesLoaded:0,bytesToLoad:i,range:{start:0,end:i},request:e,url:h,init:!1};d=d?d:l,e=m(j),r("Parsing ebml header");var k=function(e){f(e,h,c,function(c){d(c,a,b)})},n=function(){d(null,a,b)};D.load({request:e,success:k,error:n})}function l(a,b,c){a?t.trigger(g["default"].SEGMENTS_LOADED,{segments:a,representation:b,mediaType:c}):t.trigger(g["default"].SEGMENTS_LOADED,{segments:null,representation:b,mediaType:c,error:new Error(null,"error loading segments",null)})}function m(a){var b=new x["default"];return b.type=a.init?v.HTTPRequest.INIT_SEGMENT_TYPE:v.HTTPRequest.MEDIA_SEGMENT_TYPE,b.url=a.url,b.range=a.range.start+"-"+a.range.end,b}function n(){A=null,B=null,r=null}var p=this.context,r=o["default"](p).getInstance().log,t=i["default"](p).getInstance(),w=void 0,y=void 0,A=void 0,B=void 0,C=void 0,D=void 0,E=void 0;return w={setConfig:c,initialize:b,loadInitialization:h,loadSegments:j,reset:n},a(),w}Object.defineProperty(c,"__esModule",{value:!0});var f=a(11),g=d(f),h=a(7),i=d(h),j=a(102),k=d(j),l=a(8),m=d(l),n=a(6),o=d(n),p=a(103),q=d(p),r=a(108),s=d(r),t=a(45),u=d(t),v=a(133),w=a(117),x=d(w),y=a(54),z=d(y);e.__dashjs_factory_name="WebmSegmentBaseLoader",c["default"]=m["default"].getSingletonFactory(e),b.exports=c["default"]},{102:102,103:103,108:108,11:11,117:117,133:133,45:45,54:54,6:6,7:7,8:8}],18:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d="TcpList";c.TCP_CONNECTION=d;var e="HttpList";c.HTTP_REQUEST=e;var f="RepSwitchList";c.TRACK_SWITCH=f;var g="BufferLevel";c.BUFFER_LEVEL=g;var h="BufferState";c.BUFFER_STATE=h;var i="DVRInfo";c.DVR_INFO=i;var j="DroppedFrames";c.DROPPED_FRAMES=j;var k="SchedulingInfo";c.SCHEDULING_INFO=k;var l="RequestsQueue";c.REQUESTS_QUEUE=l;var m="ManifestUpdate";c.MANIFEST_UPDATE=m;var n="ManifestUpdatePeriodInfo";c.MANIFEST_UPDATE_STREAM_INFO=n;var o="ManifestUpdateRepresentationInfo";c.MANIFEST_UPDATE_TRACK_INFO=o;var p="PlayList";c.PLAY_LIST=p;var q="DVBErrors";c.DVB_ERRORS=q},{}],19:[function(a,b,c){"use strict";
function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){O=null,P=-1,Q=!0,R=[],U=m["default"](L).getInstance(),W=o["default"](L).getInstance(),X=q["default"](L).getInstance(),Y=s["default"](L).getInstance(),Z=u["default"](L).getInstance(),$=k["default"](L).getInstance(),_=g["default"](L).getInstance(),aa=i["default"](L).getInstance(),M.on(A["default"].QUALITY_CHANGE_REQUESTED,J,N),M.on(A["default"].REPRESENTATION_UPDATED,F,N),M.on(A["default"].WALLCLOCK_TIME_UPDATED,H,N),M.on(A["default"].BUFFER_LEVEL_UPDATED,I,N)}function b(a){a.abrController&&(U=a.abrController)}function c(a){T=a,V=T.getIndexHandler()}function d(){return T}function e(){return O}function f(){return P}function h(){return Q}function j(){return S}function l(){M.off(A["default"].QUALITY_CHANGE_REQUESTED,J,N),M.off(A["default"].REPRESENTATION_UPDATED,F,N),M.off(A["default"].WALLCLOCK_TIME_UPDATED,H,N),M.off(A["default"].BUFFER_LEVEL_UPDATED,I,N),O=null,P=-1,Q=!0,R=[],U=null,W=null,X=null,Y=null,Z=null,$=null,_=null,aa=null}function n(a,b,c){var d,e,f=null,g=T.getStreamInfo(),h=U.getTopQualityIndexFor(c,g.id);if(Q=!0,M.trigger(A["default"].DATA_UPDATE_STARTED,{sender:this}),R=z(b),null===O&&"fragmentedText"!==c?(e=U.getAverageThroughput(c),f=e||U.getInitialBitrateFor(c,g),d=U.getQualityForBitrate(T.getMediaInfo(),f)):d=U.getQualityFor(c,g),d>h&&(d=h),S=t(d),O=a,"video"!==c&&"audio"!==c&&"fragmentedText"!==c)return Q=!1,void M.trigger(A["default"].DATA_UPDATE_COMPLETED,{sender:this,data:O,currentRepresentation:S});for(var i=0;i<R.length;i++)V.updateRepresentation(R[i],!0)}function p(){var a=new Date,b=j(),c=1e3*W.getTime();Y.addRepresentationSwitch(b.adaptation.type,a,c,b.id)}function r(){var a=$.calcSegmentAvailabilityRange(S,T.isDynamic());Y.addDVRInfo(T.getType(),W.getTime(),T.getStreamInfo().manifestInfo,a)}function t(a){return R[a]}function v(a){return R.indexOf(a)}function x(){for(var a=0,b=R.length;b>a;a++){var c=R[a].segmentInfoType;if(null===R[a].segmentAvailabilityRange||!G["default"].hasInitialization(R[a])||("SegmentBase"===c||"BaseURL"===c)&&!R[a].segments)return!1}return!0}function z(a){var b,c=X.getValue();return P=_.getIndexForAdaptation(O,c,a.period.index),b=_.getRepresentationsForAdaptation(c,a)}function B(a){for(var b,c=0,d=R.length;d>c;c++)b=R[c],b.segmentAvailabilityRange=$.calcSegmentAvailabilityRange(b,a)}function D(){R.forEach(function(a){a.segmentAvailabilityRange=null})}function E(a){var b=a,c=function(){if(!h()){Q=!0,M.trigger(A["default"].DATA_UPDATE_STARTED,{sender:N}),D();for(var a=0;a<R.length;a++)V.updateRepresentation(R[a],!0)}};Q=!1,M.trigger(C["default"].AST_IN_FUTURE,{delay:b}),setTimeout(c,b)}function F(a){if(a.sender.getStreamProcessor()===T&&h()){var b,c,d,e=a.representation,f=Y.getMetricsFor("stream"),g=Y.getMetricsFor(j().adaptation.type),i=aa.getCurrentManifestUpdate(f),k=!1,l=0;if("dynamic"===e.adaptation.period.mpd.manifest.type){var m=e.segmentAvailabilityRange.end-e.segmentAvailabilityRange.start,n=W.computeLiveDelay(S.segmentDuration,T.getStreamInfo().manifestInfo.DVRWindowSize);l=1e3*(n-m)}if(l>0)return r(),E(l),c=new w["default"](K,"Segments update failed",null),void M.trigger(A["default"].DATA_UPDATE_COMPLETED,{sender:this,data:O,currentRepresentation:S,error:c});if(i){for(var o=0;o<i.trackInfo.length;o++)if(b=i.trackInfo[o],b.index===e.index&&b.mediaType===T.getType()){k=!0;break}k||Y.addManifestUpdateRepresentationInfo(i,e.id,e.index,e.adaptation.period.index,T.getType(),e.presentationTimeOffset,e.startNumber,e.segmentInfoType)}x()&&(Q=!1,U.setPlaybackQuality(T.getType(),T.getStreamInfo(),v(S)),Y.updateManifestUpdateInfo(i,{latency:S.segmentAvailabilityRange.end-W.getTime()}),d=aa.getCurrentRepresentationSwitch(g),d||p(),M.trigger(A["default"].DATA_UPDATE_COMPLETED,{sender:this,data:O,currentRepresentation:S}))}}function H(a){a.isDynamic&&B(a.isDynamic)}function I(a){a.sender.getStreamProcessor()===T&&r()}function J(a){a.mediaType===T.getType()&&T.getStreamInfo().id===a.streamInfo.id&&a.oldQuality!==a.newQuality&&(S=t(a.newQuality),Z.setSavedBitrateSettings(a.mediaType,S.bandwidth),p())}var K=1,L=this.context,M=y["default"](L).getInstance(),N=void 0,O=void 0,P=void 0,Q=void 0,R=void 0,S=void 0,T=void 0,U=void 0,V=void 0,W=void 0,X=void 0,Y=void 0,Z=void 0,$=void 0,_=void 0,aa=void 0;return N={initialize:c,setConfig:b,getData:e,getDataIndex:f,isUpdating:h,updateData:n,getStreamProcessor:d,getCurrentRepresentation:j,getRepresentationForQuality:t,reset:l},a(),N}Object.defineProperty(c,"__esModule",{value:!0});var f=a(20),g=d(f),h=a(15),i=d(h),j=a(36),k=d(j),l=a(56),m=d(l),n=a(64),o=d(n),p=a(72),q=d(p),r=a(74),s=d(r),t=a(101),u=d(t),v=a(116),w=d(v),x=a(7),y=d(x),z=a(11),A=d(z),B=a(51),C=d(B),D=a(8),E=d(D),F=a(44),G=d(F);e.__dashjs_factory_name="RepresentationController",c["default"]=E["default"].getClassFactory(e),b.exports=c["default"]},{101:101,11:11,116:116,15:15,20:20,36:36,44:44,51:51,56:56,64:64,7:7,72:72,74:74,8:8}],20:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b){var c,d,e,f=!1,g=!1,h=a.ContentComponent_asArray,i="text"!==b?new RegExp(b):new RegExp("(vtt|ttml)");if(a.Representation_asArray.length>0&&a.Representation_asArray[0].hasOwnProperty("codecs")){var j=a.Representation_asArray[0].codecs;if(0===j.search("stpp")||0===j.search("wvtt"))return"fragmentedText"===b}if(h){if(h.length>1)return"muxed"===b;h[0]&&h[0].contentType===b&&(f=!0,g=!0)}if(a.hasOwnProperty("mimeType")&&(f=i.test(a.mimeType),g=!0),!g)for(c=0,d=a.Representation_asArray.length;!g&&d>c;)e=a.Representation_asArray[c],e.hasOwnProperty("mimeType")&&(f=i.test(e.mimeType),g=!0),c++;return f}function b(b){return a(b,"audio")}function c(b){return a(b,"video")}function d(b){return a(b,"fragmentedText")}function e(b){return a(b,"text")}function f(b){return a(b,"muxed")}function h(a){return"text/vtt"===a||"application/ttml+xml"===a}function j(a){var b="";return a.hasOwnProperty("lang")&&(b=a.lang.replace(/[^A-Za-z0-9-]/g,"")),b}function l(a){return a.hasOwnProperty("Viewpoint")?a.Viewpoint:null}function n(a){return a.hasOwnProperty("Role_asArray")?a.Role_asArray:[]}function p(a){return a.hasOwnProperty("Accessibility_asArray")?a.Accessibility_asArray:[]}function r(a){return a.hasOwnProperty("AudioChannelConfiguration_asArray")?a.AudioChannelConfiguration_asArray:[]}function t(a){return n(a).filter(function(a){return"main"===a.value})[0]}function v(){return function(a,b){return a.bandwidth-b.bandwidth}}function x(a){return void 0!==a.Representation_asArray&&null!==a.Representation_asArray&&a.Representation_asArray.sort(v()),a}function z(a,b,c){var d,e,f=b.Period_asArray[c].AdaptationSet_asArray;for(d=0,e=f.length;e>d;d++)if(f[d].hasOwnProperty("id")&&f[d].id===a)return f[d];return null}function B(a,b,c){var d=b.Period_asArray[c].AdaptationSet_asArray;return d[a]}function D(a,b,c){var d,e,f=b.Period_asArray[c].AdaptationSet_asArray;for(d=0,e=f.length;e>d;d++)if(f[d]===a)return d;return-1}function E(b,c,d){var e,f,g=b.Period_asArray[c].AdaptationSet_asArray,h=[];for(e=0,f=g.length;f>e;e++)a(g[e],d)&&h.push(x(g[e]));return h}function F(a,b,c,d){var e=E(a,b,c);if(!e||0===e.length)return null;if(e.length>1&&d)for(var f=ja.getCurrentTrackFor(c,d),g=ka.getAllMediaInfoForType(a,d,c),h=0,i=e.length;i>h;h++){if(f&&ja.isTracksEqual(f,g[h]))return e[h];if(t(e[h]))return e[h]}return e[0]}function G(a){var b=a.Representation_asArray[0];return b.mimeType+';codecs="'+b.codecs+'"'}function H(a){return a.Representation_asArray[0].mimeType}function I(a){return a&&a.hasOwnProperty("cenc:default_KID")?a["cenc:default_KID"]:null}function J(a){return a&&a.hasOwnProperty("ContentProtection_asArray")&&0!==a.ContentProtection_asArray.length?a.ContentProtection_asArray:null}function K(a){var b=!1;return a.hasOwnProperty("type")&&(b="dynamic"===a.type),b}function L(a){var b,c,d=K(a);return b=!isNaN(a.timeShiftBufferDepth),c=d&&b}function M(a,b){var c=!1;return a.profiles&&a.profiles.length>0&&(c=-1!==a.profiles.indexOf(b)),c}function N(a){return M(a,"urn:mpeg:dash:profile:isoff-on-demand:2011")}function O(a){return M(a,"urn:dvb:dash:profile:dvb-dash:2014")}function P(a){var b;return b=a.hasOwnProperty("mediaPresentationDuration")?a.mediaPresentationDuration:Number.MAX_VALUE}function Q(a){return a.bandwidth}function R(a){var b=arguments.length<=1||void 0===arguments[1]?0:arguments[1],c=NaN;return a.hasOwnProperty("minimumUpdatePeriod")&&(c=a.minimumUpdatePeriod),isNaN(c)?c:Math.max(c-b,1)}function S(a){return a.Representation_asArray.length}function T(a){if(!a||!a.Representation_asArray||!a.Representation_asArray.length)return null;for(var b=x(a),c=b.Representation_asArray,d=c.length,e=[],f=0;d>f;f++)e.push({bandwidth:c[f].bandwidth,width:c[f].width||0,height:c[f].height||0});return e}function U(a,b){return b.Representation_asArray[a]}function V(a,b){for(var c,d,e,f,i,j=x(a.Period_asArray[b.period.index].AdaptationSet_asArray[b.index]),k=[],l=0;l<j.Representation_asArray.length;l++)f=j.Representation_asArray[l],c=new g["default"],c.index=l,c.adaptation=b,f.hasOwnProperty("id")&&(c.id=f.id),f.hasOwnProperty("codecs")&&(c.codecs=f.codecs),f.hasOwnProperty("codecPrivateData")&&(c.codecPrivateData=f.codecPrivateData),f.hasOwnProperty("bandwidth")&&(c.bandwidth=f.bandwidth),f.hasOwnProperty("width")&&(c.width=f.width),f.hasOwnProperty("height")&&(c.height=f.height),f.hasOwnProperty("maxPlayoutRate")&&(c.maxPlayoutRate=f.maxPlayoutRate),f.hasOwnProperty("SegmentBase")?(e=f.SegmentBase,c.segmentInfoType="SegmentBase"):f.hasOwnProperty("SegmentList")?(e=f.SegmentList,e.hasOwnProperty("SegmentTimeline")?(c.segmentInfoType="SegmentTimeline",i=e.SegmentTimeline.S_asArray[e.SegmentTimeline.S_asArray.length-1],(!i.hasOwnProperty("r")||i.r>=0)&&(c.useCalculatedLiveEdgeTime=!0)):(c.segmentInfoType="SegmentList",c.useCalculatedLiveEdgeTime=!0)):f.hasOwnProperty("SegmentTemplate")?(e=f.SegmentTemplate,e.hasOwnProperty("SegmentTimeline")?(c.segmentInfoType="SegmentTimeline",i=e.SegmentTimeline.S_asArray[e.SegmentTimeline.S_asArray.length-1],(!i.hasOwnProperty("r")||i.r>=0)&&(c.useCalculatedLiveEdgeTime=!0)):c.segmentInfoType="SegmentTemplate",e.hasOwnProperty("initialization")&&(c.initialization=e.initialization.split("$Bandwidth$").join(f.bandwidth).split("$RepresentationID$").join(f.id))):c.segmentInfoType="BaseURL",e&&(e.hasOwnProperty("Initialization")?(d=e.Initialization,d.hasOwnProperty("sourceURL")?c.initialization=d.sourceURL:d.hasOwnProperty("range")&&(c.range=d.range)):f.hasOwnProperty("mimeType")&&h(f.mimeType)&&(c.range=0),e.hasOwnProperty("timescale")&&(c.timescale=e.timescale),e.hasOwnProperty("duration")&&(c.segmentDuration=e.duration/c.timescale),e.hasOwnProperty("startNumber")&&(c.startNumber=e.startNumber),e.hasOwnProperty("indexRange")&&(c.indexRange=e.indexRange),e.hasOwnProperty("presentationTimeOffset")&&(c.presentationTimeOffset=e.presentationTimeOffset/c.timescale)),c.MSETimeOffset=ia.calcMSETimeOffset(c),c.path=[b.period.index,b.index,l],k.push(c);return k}function W(a,e){for(var g,h,j=a.Period_asArray[e.index],k=[],l=0;l<j.AdaptationSet_asArray.length;l++)h=j.AdaptationSet_asArray[l],g=new i["default"],h.hasOwnProperty("id")&&(g.id=h.id),g.index=l,g.period=e,f(h)?g.type="muxed":b(h)?g.type="audio":c(h)?g.type="video":d(h)?g.type="fragmentedText":g.type="text",k.push(g);return k}function X(a,b){var c,d,e=K(a),f=[],g=null,h=null,i=null,j=null;for(d=0,c=a.Period_asArray.length;c>d;d++)h=a.Period_asArray[d],h.hasOwnProperty("start")?(j=new k["default"],j.start=h.start):null!==g&&h.hasOwnProperty("duration")&&null!==i?(j=new k["default"],j.start=i.start+i.duration,j.duration=h.duration):0!==d||e||(j=new k["default"],j.start=0),null!==i&&isNaN(i.duration)&&(i.duration=j.start-i.start),null!==j&&(j.id=Y(h,d)),null!==j&&h.hasOwnProperty("duration")&&(j.duration=h.duration),null!==j&&(j.index=d,j.mpd=b,f.push(j),g=h,i=j),h=null,j=null;return 0===f.length?f:(null!==i&&isNaN(i.duration)&&(i.duration=$(a,i)-i.start),f)}function Y(a,b){if(!a)throw new Error("Period cannot be null or undefined");var c=k["default"].DEFAULT_ID+"_"+b;return a.hasOwnProperty("id")&&"__proto__"!==a.id&&(c=a.id),c}function Z(a){var b=new m["default"];return b.manifest=a,a.hasOwnProperty("availabilityStartTime")?b.availabilityStartTime=new Date(a.availabilityStartTime.getTime()):b.availabilityStartTime=new Date(a.loadedTime.getTime()),a.hasOwnProperty("availabilityEndTime")&&(b.availabilityEndTime=new Date(a.availabilityEndTime.getTime())),a.hasOwnProperty("minimumUpdatePeriod")&&(b.minimumUpdatePeriod=a.minimumUpdatePeriod),a.hasOwnProperty("mediaPresentationDuration")&&(b.mediaPresentationDuration=a.mediaPresentationDuration),a.hasOwnProperty("suggestedPresentationDelay")&&(b.suggestedPresentationDelay=a.suggestedPresentationDelay),a.hasOwnProperty("timeShiftBufferDepth")&&(b.timeShiftBufferDepth=a.timeShiftBufferDepth),a.hasOwnProperty("maxSegmentDuration")&&(b.maxSegmentDuration=a.maxSegmentDuration),b}function $(a,b){var c=K(a),d=void 0;if(a.mediaPresentationDuration)d=a.mediaPresentationDuration;else if(b.duration)d=b.duration;else{if(!c)throw new Error("Must have @mediaPresentationDuratio on MPD or an explicit @duration on the last period.");d=Number.POSITIVE_INFINITY}return d}function _(a,b){var c=a.Period_asArray,d=c[b.index].EventStream_asArray,e=[];if(d)for(var f=0;f<d.length;f++){var g=new A["default"];if(g.period=b,g.timescale=1,!d[f].hasOwnProperty("schemeIdUri"))throw new Error("Invalid EventStream. SchemeIdUri has to be set");g.schemeIdUri=d[f].schemeIdUri,d[f].hasOwnProperty("timescale")&&(g.timescale=d[f].timescale),d[f].hasOwnProperty("value")&&(g.value=d[f].value);for(var h=0;h<d[f].Event_asArray.length;h++){var i=new w["default"];i.presentationTime=0,i.eventStream=g,d[f].Event_asArray[h].hasOwnProperty("presentationTime")&&(i.presentationTime=d[f].Event_asArray[h].presentationTime),d[f].Event_asArray[h].hasOwnProperty("duration")&&(i.duration=d[f].Event_asArray[h].duration),d[f].Event_asArray[h].hasOwnProperty("id")&&(i.id=d[f].Event_asArray[h].id),e.push(i)}}return e}function aa(a,b){var c=[];if(!a)return c;for(var d=0;d<a.length;d++){var e=new A["default"];if(e.timescale=1,e.representation=b,!a[d].hasOwnProperty("schemeIdUri"))throw new Error("Invalid EventStream. SchemeIdUri has to be set");e.schemeIdUri=a[d].schemeIdUri,a[d].hasOwnProperty("timescale")&&(e.timescale=a[d].timescale),a[d].hasOwnProperty("value")&&(e.value=a[d].value),c.push(e)}return c}function ba(a,b){if(!b||!a)return[];var c=a.Period_asArray[b.period.index].AdaptationSet_asArray[b.index].InbandEventStream_asArray;return aa(c,null)}function ca(a,b){var c=a.Period_asArray[b.adaptation.period.index].AdaptationSet_asArray[b.adaptation.index].Representation_asArray[b.index].InbandEventStream_asArray;return aa(c,b)}function da(a){var b=K(a),c=a.hasOwnProperty("availabilityStartTime"),d=a.UTCTiming_asArray,e=[];return(b||c)&&d&&d.forEach(function(a){var b=new o["default"];a.hasOwnProperty("schemeIdUri")&&(b.schemeIdUri=a.schemeIdUri,a.hasOwnProperty("value")&&(b.value=a.value.toString(),e.push(b)))}),e}function ea(a){var b=[],c=a.BaseURL_asArray||[a.baseUri],d=!1;return c.some(function(c){if(c){var e=new y["default"],f=c.__text||c;return la.isRelative(f)&&(d=!0,a.baseUri&&(f=a.baseUri+f)),e.url=f,c.hasOwnProperty("serviceLocation")&&c.serviceLocation.length?e.serviceLocation=c.serviceLocation:e.serviceLocation=f,c.hasOwnProperty("dvb:priority")&&(e.dvb_priority=c["dvb:priority"]),c.hasOwnProperty("dvb:weight")&&(e.dvb_weight=c["dvb:weight"]),b.push(e),d}}),b}function fa(a){return a.hasOwnProperty("Location")&&(a.Location=a.Location_asArray[0]),a.Location}var ga=void 0,ha=this.context,ia=q["default"](ha).getInstance(),ja=s["default"](ha).getInstance(),ka=u["default"](ha).getInstance(),la=C["default"](ha).getInstance();return ga={getIsTypeOf:a,getIsAudio:b,getIsVideo:c,getIsText:e,getIsMuxed:f,getIsTextTrack:h,getIsFragmentedText:d,getIsMain:t,getLanguageForAdaptation:j,getViewpointForAdaptation:l,getRolesForAdaptation:n,getAccessibilityForAdaptation:p,getAudioChannelConfigurationForAdaptation:r,processAdaptation:x,getAdaptationForIndex:B,getIndexForAdaptation:D,getAdaptationForId:z,getAdaptationsForType:E,getAdaptationForType:F,getCodec:G,getMimeType:H,getKID:I,getContentProtectionData:J,getIsDynamic:K,getIsDVR:L,getIsOnDemand:N,getIsDVB:O,getDuration:P,getBandwidth:Q,getManifestUpdatePeriod:R,getRepresentationCount:S,getBitrateListForAdaptation:T,getRepresentationFor:U,getRepresentationsForAdaptation:V,getAdaptationsForPeriod:W,getRegularPeriods:X,getMpd:Z,getEventsForPeriod:_,getEventStreams:aa,getEventStreamForAdaptationSet:ba,getEventStreamForRepresentation:ca,getUTCTimingSources:da,getBaseURLsFromElement:ea,getRepresentationSortFunction:v,getLocation:fa}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(44),g=d(f),h=a(38),i=d(h),j=a(43),k=d(j),l=a(42),m=d(l),n=a(46),o=d(n),p=a(36),q=d(p),r=a(62),s=d(r),t=a(13),u=d(t),v=a(40),w=d(v),x=a(39),y=d(x),z=a(41),A=d(z),B=a(110),C=d(B),D=a(8),E=d(D);e.__dashjs_factory_name="DashManifestModel",c["default"]=E["default"].getSingletonFactory(e),b.exports=c["default"]},{110:110,13:13,36:36,38:38,39:39,40:40,41:41,42:42,43:43,44:44,46:46,62:62,8:8}],21:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){h=[new s["default"],new u["default"],new w["default"],new q["default"]],i=new o["default"]({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:h}),j=new m["default"]([new y["default"],new A["default"]])}function b(a,b){var c;try{var f=window.performance.now();if(c=i.xml_str2json(a),!c)throw new Error("parser error");var g=window.performance.now();j.run(c);var k=window.performance.now();b.setMatchers(h),b.setIron(j),d("Parsing complete: ( xml2json: "+(g-f).toPrecision(3)+"ms, objectiron: "+(k-g).toPrecision(3)+"ms, total: "+((k-f)/1e3).toPrecision(3)+"s)")}catch(l){return e.manifestError("parsing the manifest failed","parse",a,l),null}return c}var c=this.context,d=k["default"](c).getInstance().log,e=g["default"](c).getInstance(),f=void 0,h=void 0,i=void 0,j=void 0;return f={parse:b},a(),f}Object.defineProperty(c,"__esModule",{value:!0});var f=a(103),g=d(f),h=a(8),i=d(h),j=a(6),k=d(j),l=a(2),m=d(l),n=a(3),o=d(n),p=a(30),q=d(p),r=a(28),s=d(r),t=a(27),u=d(t),v=a(29),w=d(v),x=a(24),y=d(x),z=a(25),A=d(z);e.__dashjs_factory_name="DashParser",c["default"]=i["default"].getClassFactory(e),b.exports=c["default"]},{103:103,2:2,24:24,25:25,27:27,28:28,29:29,3:3,30:30,6:6,8:8}],22:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c){d(this,a);var e=function(a){return a&&a.length&&a.charAt(0)===a.charAt(0).toUpperCase()};this._name=b,this._merge=void 0!==c?c:e(b)}return e(a,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),a}();c["default"]=f,b.exports=c["default"]},{}],23:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a(22),h=d(g),i=function(){function a(b,c,d,f,g){var i=this;e(this,a),this._name=b||"",this._properties=[],this._children=d||[],this._isRoot=f||!1,this._isArray=g||!0,Array.isArray(c)&&c.forEach(function(a){i._properties.push(new h["default"](a))})}return f(a,[{key:"name",get:function(){return this._name}},{key:"isRoot",get:function(){return this._isRoot}},{key:"isArray",get:function(){return this._isArray}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),a}();c["default"]=i,b.exports=c["default"]},{22:22}],24:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(23),i=d(h),j=function(a){function b(){e(this,b);var a=["profiles","width","height","sar","frameRate","audioSamplingRate","mimeType","segmentProfiles","codecs","maximumSAPPeriod","startWithSAP","maxPlayoutRate","codingDependency","scanType","FramePacking","AudioChannelConfiguration","ContentProtection","EssentialProperty","SupplementalProperty","InbandEventStream"];g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,"AdaptationSet",a,[new i["default"]("Representation",a,[new i["default"]("SubRepresentation",a)])])}return f(b,a),b}(i["default"]);c["default"]=j,b.exports=c["default"]},{23:23}],25:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(23),i=d(h),j=function(a){function b(){e(this,b);var a=["SegmentBase","SegmentTemplate","SegmentList"];g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,"Period",a,[new i["default"]("AdaptationSet",a,[new i["default"]("Representation",a)])])}return f(b,a),b}(i["default"]);c["default"]=j,b.exports=c["default"]},{23:23}],26:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c){d(this,a),this._test=b,this._converter=c}return e(a,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),a}();c["default"]=f,b.exports=c["default"]},{}],27:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(26),i=d(h),j=60,k=60,l=1e3,m=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,n=function(a){function b(){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,function(a){return m.test(a.value)},function(a){var b=m.exec(a),c=void 0;if(c=Date.UTC(parseInt(b[1],10),parseInt(b[2],10)-1,parseInt(b[3],10),parseInt(b[4],10),parseInt(b[5],10),b[6]&&parseInt(b[6],10)||0,b[7]&&parseFloat(b[7])*l||0),b[9]&&b[10]){var d=parseInt(b[9],10)*k+parseInt(b[10],10);c+=("+"===b[8]?-1:1)*d*j*l}return new Date(c)})}return f(b,a),b}(i["default"]);c["default"]=n,b.exports=c["default"]},{26:26}],28:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(26),i=d(h),j=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,k=31536e3,l=2592e3,m=86400,n=3600,o=60,p=function(a){function b(){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,function(a){for(var b=["minBufferTime","mediaPresentationDuration","minimumUpdatePeriod","timeShiftBufferDepth","maxSegmentDuration","maxSubsegmentDuration","suggestedPresentationDelay","start","starttime","duration"],c=b.length,d=0;c>d;d++)if(a.nodeName===b[d])return j.test(a.value);return!1},function(a){var b=j.exec(a),c=parseFloat(b[2]||0)*k+parseFloat(b[4]||0)*l+parseFloat(b[6]||0)*m+parseFloat(b[8]||0)*n+parseFloat(b[10]||0)*o+parseFloat(b[12]||0);return void 0!==b[1]&&(c=-c),c})}return f(b,a),b}(i["default"]);c["default"]=p,b.exports=c["default"]},{26:26}],29:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(26),i=d(h),j=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,k=function(a){function b(){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,function(a){return j.test(a.value)},function(a){return parseFloat(a)})}return f(b,a),b}(i["default"]);c["default"]=k,b.exports=c["default"]},{26:26}],30:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(26),i=d(h),j=function(a){function b(){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,function(a,b){var c={MPD:["id","profiles"],Period:["id"],BaseURL:["serviceLocation","byteRange"],SegmentBase:["indexRange"],Initialization:["range"],RepresentationIndex:["range"],SegmentList:["indexRange"],BitstreamSwitching:["range"],SegmentURL:["mediaRange","indexRange"],SegmentTemplate:["indexRange","media","index","initialization","bitstreamSwitching"],AssetIdentifier:["value","id"],EventStream:["value"],AdaptationSet:["profiles","mimeType","segmentProfiles","codecs","contentType"],FramePacking:["value","id"],AudioChannelConfiguration:["value","id"],ContentProtection:["value","id"],EssentialProperty:["value","id"],SupplementalProperty:["value","id"],InbandEventStream:["value","id"],Accessibility:["value","id"],Role:["value","id"],Rating:["value","id"],Viewpoint:["value","id"],ContentComponent:["contentType"],Representation:["id","dependencyId","mediaStreamStructureId"],Subset:["id"],Metrics:["metrics"],Reporting:["value","id"]};if(c.hasOwnProperty(b)){var d=c[b];return void 0!==d&&d.indexOf(a.name)>=0}return!1},function(a){return String(a)})}return f(b,a),b}(i["default"]);c["default"]=j,b.exports=c["default"]},{26:26}],31:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){a&&a.boxParser&&(e=a.boxParser)}function b(a){var b,c,d,f,g,h,i,j,k,l,m,n,o=e.parse(a),p=o.getBox("tfhd"),q=o.getBox("tfdt"),r=o.getBox("trun"),s=o.getBox("moof"),t=o.getBox("mfhd"),u=o.getBox("subs");m=t.sequence_number,d=r.sample_count,g=q.baseMediaDecodeTime,l=(p.base_data_offset||0)+(r.data_offset||0),h=[];var v=-1,w=-1;for(j=0;d>j;j++){i=r.samples[j],b=void 0!==i.sample_duration?i.sample_duration:p.default_sample_duration,f=void 0!==i.sample_size?i.sample_size:p.default_sample_size,c=void 0!==i.sample_composition_time_offset?i.sample_composition_time_offset:0;var x={dts:g,cts:g+c,duration:b,offset:s.offset+l,size:f,subSizes:[f]};if(u&&(v<u.entry_count&&j>w&&(v++,w+=u.entries[v].sample_delta),j==w)){x.subSizes=[];var y=u.entries[v];for(k=0;k<y.subsample_count;k++)x.subSizes.push(y.subsamples[k].subsample_size)}h.push(x),l+=f,g+=b}return n=g-q.baseMediaDecodeTime,{sampleList:h,sequenceNumber:m,totalDuration:n}}function c(a){var b=e.parse(a),c=b.getBox("mdhd");return c?c.timescale:NaN}var d=void 0,e=void 0;return d={getSamplesInfo:b,getMediaTimescaleFromMoov:c,setConfig:a}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f);e.__dashjs_factory_name="FragmentedTextBoxParser",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{8:8}],32:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){function c(a,c,e,f){var g,i,j,k,l,m,n,o=a.adaptation.period.mpd.manifest.Period_asArray[a.adaptation.period.index].AdaptationSet_asArray[a.adaptation.index].Representation_asArray[a.index].SegmentList,p=o.SegmentURL_asArray.length,q=[];for(n=a.startNumber,k=h.decideSegmentListRangeForTemplate(d,b,a,c,e,f),
l=Math.max(k.start,0),m=Math.min(k.end,o.SegmentURL_asArray.length-1),g=l;m>=g;g++)j=o.SegmentURL_asArray[g],i=h.getIndexBasedSegment(d,b,a,g),i.replacementTime=(n+g-1)*a.segmentDuration,i.media=j.media?j.media:"",i.mediaRange=j.mediaRange,i.index=j.index,i.indexRange=j.indexRange,q.push(i),i=null;return a.availableSegmentsNumber=p,q}var d=a.timelineConverter,e=void 0;return e={getSegments:c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f),h=a(34);e.__dashjs_factory_name="ListSegmentsGetter";var i=g["default"].getClassFactory(e);c["default"]=i,b.exports=c["default"]},{34:34,8:8}],33:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){function c(){h=i["default"](f).create(a,b),j=k["default"](f).create(a,b),l=m["default"](f).create(a,b)}function d(a,b,c,d,f){var g,i=a.segmentInfoType;return"SegmentBase"!==i&&"BaseURL"!==i&&e(a,c)?("SegmentTimeline"===i?g=h.getSegments(a,b,c,f):"SegmentTemplate"===i?g=j.getSegments(a,b,c,f):"SegmentList"===i&&(g=l.getSegments(a,b,c,f)),d&&d(a,g)):g=a.segments,g}function e(a,b){var c,d,e=a.segments,f=!1;return e&&0!==e.length?(d=e[0].availabilityIdx,c=e[e.length-1].availabilityIdx,f=d>b||b>c):f=!0,f}var f=this.context,g=void 0,h=void 0,j=void 0,l=void 0;return g={getSegments:d},c(),g}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f),h=a(37),i=d(h),j=a(35),k=d(j),l=a(32),m=d(l);e.__dashjs_factory_name="SegmentsGetter";var n=g["default"].getClassFactory(e);c["default"]=n,b.exports=c["default"]},{32:32,35:35,37:37,8:8}],34:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){for(;a.length<b;)a="0"+a;return a}function f(a,b){return a.representation.startNumber+b}function g(a,b,c){var d,f,g,h,i,j,k="%0",l=b.length,m=k.length;if(!a)return a;for(;;){if(d=a.indexOf("$"+b),0>d)return a;if(f=a.indexOf("$",d+l),0>f)return a;if(g=a.indexOf(k,d+l),g>d&&f>g)switch(h=a.charAt(f-1),i=parseInt(a.substring(g+m,f-1),10),h){case"d":case"i":case"u":j=e(c.toString(),i);break;case"x":j=e(c.toString(16),i);break;case"X":j=e(c.toString(16),i).toUpperCase();break;case"o":j=e(c.toString(8),i);break;default:return a}else j=c;a=a.substring(0,d)+j+a.substring(f+1)}}function h(a,b,c,d){var e,g,h,i;return g=c.segmentDuration,isNaN(g)&&(g=c.adaptation.period.duration),h=c.adaptation.period.start+d*g,i=h+g,e=new n["default"],e.representation=c,e.duration=g,e.presentationStartTime=h,e.mediaStartTime=a.calcMediaTimeFromPresentationTime(e.presentationStartTime,c),e.availabilityStartTime=a.calcAvailabilityStartTimeFromPresentationTime(e.presentationStartTime,c.adaptation.period.mpd,b),e.availabilityEndTime=a.calcAvailabilityEndTimeFromPresentationTime(i,c.adaptation.period.mpd,b),e.wallStartTime=a.calcWallTimeForSegment(e,b),e.replacementNumber=f(e,d),e.availabilityIdx=d,e}function i(a,b,c,d,e,h,i,j,k){var l,m,o,p=d/h,q=Math.min(e/h,c.adaptation.period.mpd.maxSegmentDuration);return l=a.calcPresentationTimeFromMediaTime(p,c),m=l+q,o=new n["default"],o.representation=c,o.duration=q,o.mediaStartTime=p,o.presentationStartTime=l,o.availabilityStartTime=c.adaptation.period.mpd.manifest.loadedTime,o.availabilityEndTime=a.calcAvailabilityEndTimeFromPresentationTime(m,c.adaptation.period.mpd,b),o.wallStartTime=a.calcWallTimeForSegment(o,b),o.replacementTime=d,o.replacementNumber=f(o,k),i=g(i,"Number",o.replacementNumber),i=g(i,"Time",o.replacementTime),o.media=i,o.mediaRange=j,o.availabilityIdx=k,o}function j(a,b){if(!b||!b.segments)return null;var c,d,e=b.segments.length;if(e>a&&(c=b.segments[a],c&&c.availabilityIdx===a))return c;for(d=0;e>d;d++)if(c=b.segments[d],c&&c.availabilityIdx===a)return c;return null}function k(a,b,c,d,e){var f,g,h,i=2,j=e||10,k=0,l=Number.POSITIVE_INFINITY;return b&&!a.isTimeSyncCompleted()?h={start:k,end:l}:!b&&c||0>d?null:(f=Math.max(d-i,k),g=Math.min(d+j,l),h={start:f,end:g})}function l(a,b,c,d,e,f){var g,h,i,k=c.segmentDuration,l=c.adaptation.period.mpd.manifest.minBufferTime,m=c.segmentAvailabilityRange,n={start:a.calcPeriodRelativeTimeFromMpdRelativeTime(c,m.start),end:a.calcPeriodRelativeTimeFromMpdRelativeTime(c,m.end)},o=c.segments,p=2*k,q=f||Math.max(2*l,10*k),r=NaN,s=null;return n.start=Math.max(n.start,0),b&&!a.isTimeSyncCompleted()?(g=Math.floor(n.start/k),h=Math.floor(n.end/k),i={start:g,end:h}):(o&&o.length>0?(s=j(e,c),r=s?a.calcPeriodRelativeTimeFromMpdRelativeTime(c,s.presentationStartTime):e>0?e*k:a.calcPeriodRelativeTimeFromMpdRelativeTime(c,d)):r=e>0?e*k:b?n.end:n.start,g=Math.floor(Math.max(r-p,n.start)/k),h=Math.floor(Math.min(g+q/k,n.end/k)),i={start:g,end:h})}Object.defineProperty(c,"__esModule",{value:!0}),c.replaceTokenForTemplate=g,c.getIndexBasedSegment=h,c.getTimeBasedSegment=i,c.getSegmentByIndex=j,c.decideSegmentListRangeForTimeline=k,c.decideSegmentListRangeForTemplate=l;var m=a(45),n=d(m)},{45:45}],35:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){function c(a,c,e,f){var g,i,j,k,l,m=a.adaptation.period.mpd.manifest.Period_asArray[a.adaptation.period.index].AdaptationSet_asArray[a.adaptation.index].Representation_asArray[a.index].SegmentTemplate,n=a.segmentDuration,o=a.segmentAvailabilityRange,p=[],q=null,r=null;for(l=a.startNumber,g=isNaN(n)&&!b?{start:l,end:l}:h.decideSegmentListRangeForTemplate(d,b,a,c,e,f),j=g.start,k=g.end,i=j;k>=i;i++)r=h.getIndexBasedSegment(d,b,a,i),r.replacementTime=(l+i-1)*a.segmentDuration,q=m.media,q=h.replaceTokenForTemplate(q,"Number",r.replacementNumber),q=h.replaceTokenForTemplate(q,"Time",r.replacementTime),r.media=q,p.push(r),r=null;return isNaN(n)?a.availableSegmentsNumber=1:a.availableSegmentsNumber=Math.ceil((o.end-o.start)/n),p}var d=a.timelineConverter,e=void 0;return e={getSegments:c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f),h=a(34);e.__dashjs_factory_name="TemplateSegmentsGetter";var i=g["default"].getClassFactory(e);c["default"]=i,b.exports=c["default"]},{34:34,8:8}],36:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){z=0,A=!1,B=NaN,x.on(i["default"].TIME_SYNCHRONIZATION_COMPLETED,t,this)}function b(){return A}function c(a){A=a}function d(){return z}function e(a){z=a}function f(){return B}function h(a){B=a}function j(a,b,c,d){var e=NaN;return e=d?c&&b.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(b.availabilityStartTime.getTime()+1e3*(a+b.timeShiftBufferDepth)):b.availabilityEndTime:c?new Date(b.availabilityStartTime.getTime()+1e3*(a-z)):b.availabilityStartTime}function k(a,b,c){return j.call(this,a,b,c)}function l(a,b,c){return j.call(this,a,b,c,!0)}function m(a,b){return(a.getTime()-b.mpd.availabilityStartTime.getTime()+1e3*z)/1e3}function n(a,b){var c=b.adaptation.period.start,d=b.presentationTimeOffset;return a+(c-d)}function o(a,b){var c=b.adaptation.period.start,d=b.presentationTimeOffset;return a-c+d}function p(a,b){var c,d,e;return b&&(c=a.representation.adaptation.period.mpd.suggestedPresentationDelay,d=a.presentationStartTime+c,e=new Date(a.availabilityStartTime.getTime()+1e3*d)),e}function q(a,b){var c=a.adaptation.period,d={start:c.start,end:c.start+c.duration};if(!b)return d;if(!A&&a.segmentAvailabilityRange)return a.segmentAvailabilityRange;var e=a.segmentDuration||(a.segments&&a.segments.length?a.segments[a.segments.length-1].duration:0),f=m(new Date,c),g=c.start+c.duration;return d.start=Math.max(f-c.mpd.timeShiftBufferDepth,c.start),d.end=f>=g&&g>f-e?g-e:f-e,d}function r(a,b){var c=a.adaptation.period.start;return b-c}function s(a,b){var c=a.adaptation.period.start;return b+c}function t(a){A||void 0!==a.offset&&(e(a.offset/1e3),A=!0)}function u(a){var b=a.presentationTimeOffset,c=a.adaptation.period.start;return c-b}function v(){x.off(i["default"].TIME_SYNCHRONIZATION_COMPLETED,t,this),z=0,A=!1,B=NaN}var w=this.context,x=g["default"](w).getInstance(),y=void 0,z=void 0,A=void 0,B=void 0;return y={initialize:a,isTimeSyncCompleted:b,setTimeSyncCompleted:c,getClientTimeOffset:d,setClientTimeOffset:e,getExpectedLiveEdge:f,setExpectedLiveEdge:h,calcAvailabilityStartTimeFromPresentationTime:k,calcAvailabilityEndTimeFromPresentationTime:l,calcPresentationTimeFromWallTime:m,calcPresentationTimeFromMediaTime:n,calcPeriodRelativeTimeFromMpdRelativeTime:r,calcMpdRelativeTimeFromPeriodRelativeTime:s,calcMediaTimeFromPresentationTime:o,calcSegmentAvailabilityRange:q,calcWallTimeForSegment:p,calcMSETimeOffset:u,reset:v}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(7),g=d(f),h=a(11),i=d(h),j=a(8),k=d(j);e.__dashjs_factory_name="TimelineConverter",c["default"]=k["default"].getSingletonFactory(e),b.exports=c["default"]},{11:11,7:7,8:8}],37:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){function c(a,c,e,f){var g,i,j,k,l,m,n,o,p,q,r,s,t,u,v=a.adaptation.period.mpd.manifest.Period_asArray[a.adaptation.period.index].AdaptationSet_asArray[a.adaptation.index].Representation_asArray[a.index].SegmentTemplate||a.adaptation.period.mpd.manifest.Period_asArray[a.adaptation.period.index].AdaptationSet_asArray[a.adaptation.index].Representation_asArray[a.index].SegmentList,w=v.SegmentTimeline,x=v.SegmentURL_asArray,y=a.availableSegmentsNumber>0,z=10,A=0,B=0,C=-1,D=[],E=!1,F=function(c,e){var f=v.media,g=c.mediaRange;return x&&(f=x[e].media||"",g=x[e].mediaRange),h.getTimeBasedSegment(d,b,a,A,c.d,u,f,g,C)};for(u=a.timescale,g=w.S_asArray,p=h.decideSegmentListRangeForTimeline(d,b,c,e,f),p?(s=p.start,t=p.end):r=d.calcMediaTimeFromPresentationTime(c||0,a),j=0,k=g.length;k>j;j++){if(i=g[j],m=0,i.hasOwnProperty("r")&&(m=i.r),i.hasOwnProperty("t")&&(A=i.t,B=A/u),0>m){if(o=g[j+1],o&&o.hasOwnProperty("t"))n=o.t/u;else{var G=a.segmentAvailabilityRange?a.segmentAvailabilityRange.end:d.calcSegmentAvailabilityRange(a,b).end;n=d.calcMediaTimeFromPresentationTime(G,a),a.segmentDuration=i.d/u}m=Math.ceil((n-B)/(i.d/u))-1}if(q){if(y)break;C+=m+1}else for(l=0;m>=l;l++){if(C++,p){if(C>t){if(q=!0,y)break;continue}C>=s&&D.push(F(i,C))}else{if(D.length>z){if(q=!0,y)break;continue}E?D.push(F(i,C)):B>=r-i.d/u*1.5&&(E=!0,D.push(F(i,C)))}A+=i.d,B=A/u}}return y||(a.availableSegmentsNumber=C+1),D}var d=a.timelineConverter,e=void 0;return e={getSegments:c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f),h=a(34);e.__dashjs_factory_name="TimelineSegmentsGetter";var i=g["default"].getClassFactory(e);c["default"]=i,b.exports=c["default"]},{34:34,8:8}],38:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.period=null,this.index=-1,this.type=null};c["default"]=e,b.exports=c["default"]},{}],39:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=1,f=1,g=function h(a,b,c,g){d(this,h),this.url=a||"",this.serviceLocation=b||a||"",this.dvb_priority=c||e,this.dvb_weight=g||f};g.DEFAULT_DVB_PRIORITY=e,g.DEFAULT_DVB_WEIGHT=f,c["default"]=g,b.exports=c["default"]},{}],40:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN};c["default"]=e,b.exports=c["default"]},{}],41:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""};c["default"]=e,b.exports=c["default"]},{}],42:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN};c["default"]=e,b.exports=c["default"]},{}],43:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null};e.DEFAULT_ID="defaultId",c["default"]=e,b.exports=c["default"]},{}],44:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.maxPlayoutRate=NaN}return e(a,null,[{key:"hasInitialization",value:function(a){return null!==a.initialization||("BaseURL"!==a.segmentInfoType||"SegmentBase"!==a.segmentInfoType)&&null!==a.range}},{key:"hasSegments",value:function(a){return"BaseURL"!==a.segmentInfoType&&"SegmentBase"!==a.segmentInfoType&&!a.indexRange}}]),a}();c["default"]=f,b.exports=c["default"]},{}],45:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null};c["default"]=e,b.exports=c["default"]},{}],46:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.schemeIdUri="",this.value=""};c["default"]=e,b.exports=c["default"]},{}],47:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){n=g["default"](h).create({errHandler:a.errHandler,metricsModel:a.metricsModel,requestModifier:a.requestModifier})}function c(a){var b=function(b){j.trigger(o["default"].CHECK_FOR_EXISTENCE_COMPLETED,{request:a,exists:b})};if(a){var c=new i["default"](a.url);n.load({request:c,success:function(){b(!0)},error:function(){b(!1)}})}else b(!1)}function d(a){var b=function(b,c){j.trigger(o["default"].LOADING_COMPLETED,{request:a,response:b||null,error:c||null,sender:l})};a?n.load({request:a,progress:function(){j.trigger(o["default"].LOADING_PROGRESS,{request:a})},success:function(a){b(a)},error:function(a,c,d){b(void 0,new k["default"](r,d,c))}}):b(void 0,new k["default"](s,t))}function e(){n&&n.abort()}function f(){n&&(n.abort(),n=null)}var h=this.context,j=m["default"](h).getInstance(),l=void 0,n=void 0;return l={checkForExistence:c,load:d,abort:e,reset:f},b(),l}Object.defineProperty(c,"__esModule",{value:!0});var f=a(54),g=d(f),h=a(118),i=d(h),j=a(116),k=d(j),l=a(7),m=d(l),n=a(11),o=d(n),p=a(8),q=d(p),r=1,s=2,t="request is null";e.__dashjs_factory_name="FragmentLoader";var u=q["default"].getClassFactory(e);u.FRAGMENT_LOADER_ERROR_LOADING_FAILURE=r,u.FRAGMENT_LOADER_ERROR_NULL_REQUEST=s,c["default"]=u,b.exports=c["default"]},{11:11,116:116,118:118,54:54,7:7,8:8}],48:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){j.on(v["default"].XLINK_READY,c,p),s=i["default"](h).create({errHandler:a.errHandler,metricsModel:a.metricsModel,requestModifier:a.requestModifier}),u=g["default"](h).create({errHandler:a.errHandler,metricsModel:a.metricsModel,requestModifier:a.requestModifier}),w=null}function c(a){j.trigger(v["default"].INTERNAL_MANIFEST_LOADED,{manifest:a.manifest})}function d(a){var b=null;return a.indexOf("SmoothStreamingMedia")>-1?(x?(b=x.createMssParser(),x.registerEvents()):n.manifestError("manifest type unsupported","createParser"),b):a.indexOf("MPD")>-1?z["default"](h).create():b}function e(a){var b=new o["default"](a,r.HTTPRequest.MPD_TYPE);s.load({request:b,success:function(b,c,e){var f,g;if(e.responseURL&&e.responseURL!==a?(g=l.parseBaseUrl(e.responseURL),f=e.responseURL):(l.isRelative(a)&&(a=l.resolve(a,window.location.href)),g=l.parseBaseUrl(a)),null===w&&(w=d(b)),null===w)return void j.trigger(v["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new q["default"](A,"Failed detecting manifest type: "+a)});var h=w.parse(b,u);h?(h.url=f||a,h.originalUrl||(h.originalUrl=h.url),h.baseUri=g,h.loadedTime=new Date,u.resolveManifestOnLoad(h)):j.trigger(v["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new q["default"](A,C)})},error:function(b,c,d){j.trigger(v["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new q["default"](B,"Failed loading manifest: "+a+", "+d)})}})}function f(){j.off(v["default"].XLINK_READY,c,p),u&&(u.reset(),u=null),s&&(s.abort(),s=null),x&&x.reset()}var h=this.context,j=t["default"](h).getInstance(),l=k["default"](h).getInstance(),n=m["default"](h).getInstance(),p=void 0,s=void 0,u=void 0,w=void 0,x=a.mssHandler;return p={load:e,reset:f},b(),p}Object.defineProperty(c,"__esModule",{value:!0});var f=a(69),g=d(f),h=a(54),i=d(h),j=a(110),k=d(j),l=a(103),m=d(l),n=a(124),o=d(n),p=a(116),q=d(p),r=a(133),s=a(7),t=d(s),u=a(11),v=d(u),w=a(8),x=d(w),y=a(21),z=d(y),A=1,B=2,C="parsing failed";e.__dashjs_factory_name="ManifestLoader";var D=x["default"].getClassFactory(e);D.MANIFEST_LOADER_ERROR_PARSING_FAILURE=A,D.MANIFEST_LOADER_ERROR_LOADING_FAILURE=B,c["default"]=D,b.exports=c["default"]},{103:103,11:11,110:110,116:116,124:124,133:133,21:21,54:54,69:69,7:7,8:8}],49:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){a&&(a.manifestModel&&(B=a.manifestModel),a.dashManifestModel&&(C=a.dashManifestModel))}function b(a){A=a,w=NaN,x=null,z=!1,y=!0,D=m["default"](s).getInstance(),u.on(i["default"].STREAMS_COMPOSED,r,this),u.on(i["default"].PLAYBACK_STARTED,p,this),u.on(i["default"].PLAYBACK_PAUSED,q,this),u.on(i["default"].INTERNAL_MANIFEST_LOADED,n,this)}function c(a){k(a)}function d(){return A}function e(){u.off(i["default"].PLAYBACK_STARTED,p,this),u.off(i["default"].PLAYBACK_PAUSED,q,this),u.off(i["default"].STREAMS_COMPOSED,r,this),u.off(i["default"].INTERNAL_MANIFEST_LOADED,n,this),f(),y=!0,z=!1,w=NaN,D=null}function f(){null!==x&&(clearInterval(x),x=null)}function h(){f(),isNaN(w)||(t("Refresh manifest in "+w+" seconds."),x=setTimeout(l,1e3*w))}function j(){z=!0;var a=B.getValue(),b=a.url,c=C.getLocation(a);c&&(b=c),A.load(b)}function k(a){B.setValue(a);var b=new Date,c=(b.getTime()-a.loadedTime.getTime())/1e3;w=C.getManifestUpdatePeriod(a,c),u.trigger(i["default"].MANIFEST_UPDATED,{manifest:a}),t("Manifest has been refreshed at "+b+"["+b.getTime()/1e3+"] "),y||h()}function l(){y&&!D.getScheduleWhilePaused()||z||j()}function n(a){a.error||k(a.manifest)}function p(){y=!1,h()}function q(){y=!0,f()}function r(){z=!1}var s=this.context,t=o["default"](s).getInstance().log,u=g["default"](s).getInstance(),v=void 0,w=void 0,x=void 0,y=void 0,z=void 0,A=void 0,B=void 0,C=void 0,D=void 0;return v={initialize:b,setManifest:c,getManifestLoader:d,refreshManifest:j,setConfig:a,reset:e}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(7),g=d(f),h=a(11),i=d(h),j=a(8),k=d(j),l=a(73),m=d(l),n=a(6),o=d(n);e.__dashjs_factory_name="ManifestUpdater",c["default"]=k["default"].getSingletonFactory(e),b.exports=c["default"]},{11:11,6:6,7:7,73:73,8:8}],50:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){ec=!1,fc=!1,gc=!0,jc=null,dc=null,mc=null,aa["default"].extend(ca["default"]),oc=I["default"](Zb).getInstance()}function b(a,b,c){return qc=u["default"](Zb).getInstance(),pc=s["default"](Zb).getInstance(),qc.supportsMediaSource()?void(ec||(ec=!0,hc=M["default"](Zb).getInstance(),sc=i["default"](Zb).getInstance(),ic=m["default"](Zb).getInstance(),ic.initialize(),uc=ja["default"](Zb).getInstance(),tc=la["default"](Zb).getInstance(),nc=K["default"](Zb).getInstance(),nc.setConfig({adapter:Nb()}),gb(),sa(void 0===c||c),a&&Eb(a),b&&Ib(b),ac("[dash.js "+T()+"] MediaPlayer has been initialized"))):void pc.capabilityError("mediasource")}function c(){return!!vc&&!!cc}function d(){if(!fc)throw Vb;(!gc||f()&&fc)&&sc.play()}function e(){if(!fc)throw Vb;sc.pause()}function f(){if(!fc)throw Vb;return sc.isPaused()}function h(){if(!fc)throw Vb;return sc.isSeeking()}function j(){if(!fc)throw Vb;return sc.getIsDynamic()}function l(a){if(!vc)throw Wb;Db().muted=a}function n(){if(!vc)throw Wb;return Db().muted}function p(a){if(!vc)throw Wb;Db().volume=a}function r(){if(!vc)throw Wb;return Db().volume}function t(a){var b=["video","audio","fragmentedText"];if(a){if(-1!==b.indexOf(a)){var c=wa().getCurrentBufferLevel(xa(a));return c?c:NaN}return ac("Warning  - getBufferLength requested for invalid type"),NaN}return b.map(function(a){return Na(a).length>0?wa().getCurrentBufferLevel(xa(a)):Number.MAX_VALUE}).reduce(function(a,b){return Math.min(a,b)})}function v(){var a=Rb();return a?a.manifestInfo.DVRWindowSize:0}function x(a){var b=Rb();if(!b)return 0;var c=b.range.start+a;return c>b.range.end&&(c=b.range.end),c}function z(a){if(!fc)throw Vb;var b=sc.getIsDynamic()?x(a):a;sc.seek(b)}function B(a){if(!fc)throw Vb;var b=Db().currentTime;if(void 0!==a)b=rc.getTimeRelativeToStreamId(b,a);else if(sc.getIsDynamic()){var c=Rb();b=null===c?0:D()-(c.range.end-c.time)}return b}function D(){if(!fc)throw Vb;var a=Db().duration;if(sc.getIsDynamic()){var b,c=Rb();if(!c)return 0;b=c.range.end-c.range.start,a=b<c.manifestInfo.DVRWindowSize?b:c.manifestInfo.DVRWindowSize}return a}function F(){if(!fc)throw Vb;return B()<0?NaN:Sb(B())}function H(){if(!fc)throw Vb;return Sb(D())}function J(a,b,c){var d=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],e=new Date(1e3*a),f=e.toLocaleDateString(b),g=e.toLocaleTimeString(b,{hour12:c});return d?g+" "+f:g}function L(a){a=Math.max(a,0);var b=Math.floor(a/3600),c=Math.floor(a%3600/60),d=Math.floor(a%3600%60);return(0===b?"":10>b?"0"+b.toString()+":":b.toString()+":")+(10>c?"0"+c.toString():c.toString())+":"+(10>d?"0"+d.toString():d.toString())}function N(a,b,c){ea["default"].extend(a,b,c,Zb)}function P(a,b,c){$b.on(a,b,c)}function R(a,b,c){$b.off(a,b,c)}function T(){return fa.getVersionString()}function V(){return _b}function X(){if(!vc)throw Wb;return vc}function Z(a){oc.setLiveDelayFragmentCount(a)}function _(a){oc.setLiveDelay(a)}function ba(){return oc.getLiveDelay()}function da(a){oc.setUseSuggestedPresentationDelay(a)}function ga(a,b){oc.setLastBitrateCachingInfo(a,b)}function ia(a,b){oc.setLastMediaSettingsCachingInfo(a,b)}function ka(a,b){hc.setMaxAllowedBitrateFor(a,b)}function ma(a,b){hc.setMinAllowedBitrateFor(a,b)}function oa(a){return hc.getMaxAllowedBitrateFor(a)}function pa(a){return hc.getMinAllowedBitrateFor(a)}function qa(a,b){hc.setMaxAllowedRepresentationRatioFor(a,b)}function ra(a){return hc.getMaxAllowedRepresentationRatioFor(a)}function sa(a){gc=a}function ta(){return gc}function ua(a){oc.setScheduleWhilePaused(a)}function va(){return oc.getScheduleWhilePaused()}function wa(){return tc}function xa(a){return nc.getReadOnlyMetricsFor(a)}function ya(a){if(!fc)throw Vb;return hc.getQualityFor(a,rc.getActiveStreamInfo())}function za(a,b){if(!fc)throw Vb;hc.setPlaybackQuality(a,rc.getActiveStreamInfo(),b)}function Aa(){hc.setElementSize(),hc.setWindowResizeEventCalled(!0)}function Ba(){return hc.getLimitBitrateByPortal()}function Ca(a){hc.setLimitBitrateByPortal(a)}function Da(){return hc.getUsePixelRatioInLimitBitrateByPortal()}function Ea(a){hc.setUsePixelRatioInLimitBitrateByPortal(a)}function Fa(a){if(!fc)throw Vb;void 0===wc&&(wc=C["default"](Zb).getInstance());for(var b=Db().textTracks,c=b.length,d=0;c>d;d++){var e=b[d],f=a===d?"showing":"hidden";e.mode!==f&&(e.mode=f)}wc.setTextTrack()}function Ga(){var a=NaN;return wc&&(a=wc.getCurrentTrackIdx()),a}function Ha(a){if(!fc)throw Vb;var b=Tb();return b?b.getBitrateListFor(a):[]}function Ia(a,b){hc.setInitialBitrateFor(a,b)}function Ja(a){if(!fc)throw Vb;return hc.getInitialBitrateFor(a)}function Ka(a,b){hc.setInitialRepresentationRatioFor(a,b)}function La(a){return hc.getInitialRepresentationRatioFor(a)}function Ma(a){if(!fc)throw Vb;return mc.getStreamsInfo(a)}function Na(a){if(!fc)throw Vb;var b=rc.getActiveStreamInfo();return b?ic.getTracksFor(a,b):[]}function Oa(a,b,c){if(!fc)throw Vb;return c=c||mc.getStreamsInfo(b)[0],c?mc.getAllMediaInfoForType(b,c,a):[]}function Pa(a){if(!fc)throw Vb;var b=rc.getActiveStreamInfo();return b?ic.getCurrentTrackFor(a,b):null}function Qa(a,b){ic.setInitialSettings(a,b)}function Ra(a){return ic.getInitialSettings(a)}function Sa(a){if(!fc)throw Vb;ic.setTrack(a)}function Ta(a){return ic.getSwitchMode(a)}function Ua(a,b){ic.setSwitchMode(a,b)}function Va(a){ic.setSelectionModeForInitialTrack(a)}function Wa(){return ic.getSelectionModeForInitialTrack()}function Xa(){return hc.getAutoSwitchBitrateFor("video")||hc.getAutoSwitchBitrateFor("audio")}function Ya(a){hc.setAutoSwitchBitrateFor("video",a),hc.setAutoSwitchBitrateFor("audio",a)}function Za(a){return hc.getAutoSwitchBitrateFor(a)}function $a(a,b){hc.setAutoSwitchBitrateFor(a,b)}function _a(a){oc.setFastSwitchEnabled(a)}function ab(){return oc.getFastSwitchEnabled()}function bb(a){oc.setBufferOccupancyABREnabled(a)}function cb(a,b){var c=Mb(),d=this,e=function g(a){a.error?b(null,a.error):b(a.manifest),$b.off(aa["default"].INTERNAL_MANIFEST_LOADED,g,d),c.reset()};$b.on(aa["default"].INTERNAL_MANIFEST_LOADED,e,d);var f=E["default"](Zb).getInstance();f.initialize(),c.load(f.parseURI(a))}function db(a,b){eb(a,b);var c=new g["default"];c.schemeIdUri=a,c.value=b,oc.getUTCTimingSources().push(c)}function eb(a,b){var c=oc.getUTCTimingSources();c.forEach(function(d,e){d.schemeIdUri===a&&d.value===b&&c.splice(e,1)})}function fb(){oc.setUTCTimingSources([])}function gb(){db(I["default"].DEFAULT_UTC_TIMING_SOURCE.scheme,I["default"].DEFAULT_UTC_TIMING_SOURCE.value)}function hb(a){oc.setUseManifestDateHeaderTimeSource(a)}function ib(a){oc.setBufferToKeep(a)}function jb(a){oc.setBufferPruningInterval(a)}function kb(a){oc.setStableBufferTime(a)}function lb(a){oc.setBufferTimeAtTopQuality(a)}function mb(a){oc.setBufferTimeAtTopQualityLongForm(a)}function nb(a){oc.setLongFormContentDurationThreshold(a)}function ob(a){oc.setRichBufferThreshold(a)}function pb(a){oc.setBandwidthSafetyFactor(a)}function qb(){return oc.getBandwidthSafetyFactor()}function rb(a){oc.setAbandonLoadTimeout(a)}function sb(a){oc.setFragmentRetryAttempts(a)}function tb(a){oc.setFragmentRetryInterval(a)}function ub(a){vb(void 0,a)}function vb(a,b){oc.setXHRWithCredentialsForType(a,b)}function wb(a){return oc.getXHRWithCredentialsForType(a)}function xb(){return Ob()}function yb(a){jc=a}function zb(a){dc=a}function Ab(a){var b=w["default"](Zb).getInstance();b.setConfig({videoModel:vc}),b.initialize(),b.displayCConTop(a)}function Bb(){return vc?vc.getVideoContainer():null}function Cb(a){if(!vc)throw Wb;vc.setVideoContainer(a)}function Db(){if(!vc)throw Wb;return vc.getElement()}function Eb(a){if(!ec)throw Yb;vc=null,a&&(vc=S["default"](Zb).getInstance(),vc.initialize(),vc.setElement(a),Ob(),Pb(),Qb()),Kb()}function Fb(){return vc?vc.getTTMLRenderingDiv():null}function Gb(a){if(!vc)throw Wb;vc.setTTMLRenderingDiv(a)}function Hb(){if(!cc)throw Xb;return cc}function Ib(a){if(!ec)throw Yb;if("string"==typeof a){var b=E["default"](Zb).getInstance();b.initialize(),cc=b.parseURI(a)}else cc=a;Kb()}function Jb(){Ib(null),Eb(null),dc=null,jc=null}function Kb(){fc?(fc=!1,mc.reset(),rc.reset(),sc.reset(),hc.reset(),ic.reset(),wc.reset(),rc=null,kc=null,c()&&Ub()):c()&&Ub()}function Lb(){var a=Q["default"](Zb).getInstance();a.initialize();var b=y["default"](Zb).getInstance();b.setConfig({dashManifestModel:uc}),ic.initialize(),ic.setConfig({errHandler:pc}),rc=k["default"](Zb).getInstance(),rc.setConfig({capabilities:qc,manifestLoader:Mb(),manifestModel:G["default"](Zb).getInstance(),dashManifestModel:uc,protectionController:jc,adapter:mc,metricsModel:nc,dashMetrics:tc,liveEdgeFinder:q["default"](Zb).getInstance(),mediaSourceController:U["default"](Zb).getInstance(),timeSyncController:O["default"](Zb).getInstance(),baseURLController:W["default"](Zb).getInstance(),errHandler:pc,timelineConverter:na["default"](Zb).getInstance()}),rc.initialize(gc,dc),hc.setConfig({abrRulesCollection:a,streamController:rc}),wc=C["default"](Zb).getInstance(),wc.setConfig({errHandler:pc,dashManifestModel:uc,mediaController:ic,streamController:rc,videoModel:vc})}function Mb(){return o["default"](Zb).create({errHandler:pc,metricsModel:nc,requestModifier:A["default"](Zb).getInstance(),mssHandler:lc})}function Nb(){return mc=ha["default"](Zb).getInstance(),mc.initialize(),mc.setConfig({dashManifestModel:uc}),mc}function Ob(){if(jc)return jc;var a=dashjs.Protection;if("function"==typeof a){var b=a(Zb).create();return aa["default"].extend(a.events),ca["default"].extend(a.events,{publicOnly:!0}),jc=b.createProtectionSystem({log:ac,videoModel:vc,capabilities:qc,eventBus:$b,adapter:mc})}return null}function Pb(){if(kc)return kc;var a=dashjs.MetricsReporting;if("function"==typeof a){var b=a(Zb).create();return kc=b.createMetricsReporting({log:ac,eventBus:$b,mediaElement:Db(),dashManifestModel:uc,metricsModel:nc})}return null}function Qb(){if(lc)return lc;var a=dashjs.MssHandler;return"function"==typeof a?lc=a(Zb).create({eventBus:$b,mediaPlayerModel:oc}):null}function Rb(){var a=nc.getReadOnlyMetricsFor("video")||nc.getReadOnlyMetricsFor("audio");return tc.getCurrentDVRInfo(a)}function Sb(a){var b,c,d=Rb();return d?(b=d.manifestInfo.availableFrom.getTime()/1e3,c=a+(b+d.range.start)):0}function Tb(){if(!fc)throw Vb;var a=rc.getActiveStreamInfo();return a?rc.getStreamById(a.id):null}function Ub(){fc||(fc=!0,ac("Playback Initialized"),Lb(),"string"==typeof cc?rc.load(cc):rc.loadWithManifest(cc))}var Vb="You must first call play() to init playback before calling this method",Wb="You must first call attachView() to set the video element before calling this method",Xb="You must first call attachSource() with a valid source before calling this method",Yb="MediaPlayer not initialized!",Zb=this.context,$b=$["default"](Zb).getInstance(),_b=Y["default"](Zb).getInstance(),ac=_b.log,bc=void 0,cc=void 0,dc=void 0,ec=void 0,fc=void 0,gc=void 0,hc=void 0,ic=void 0,jc=void 0,kc=void 0,lc=void 0,mc=void 0,nc=void 0,oc=void 0,pc=void 0,qc=void 0,rc=void 0,sc=void 0,tc=void 0,uc=void 0,vc=void 0,wc=void 0;return bc={initialize:b,on:P,off:R,extend:N,attachView:Eb,attachSource:Ib,isReady:c,play:d,isPaused:f,pause:e,isSeeking:h,isDynamic:j,seek:z,setMute:l,isMuted:n,setVolume:p,getVolume:r,time:B,duration:D,timeAsUTC:F,durationAsUTC:H,getActiveStream:Tb,getDVRWindowSize:v,getDVRSeekOffset:x,convertToTimeCode:L,formatUTC:J,getVersion:T,getDebug:V,getBufferLength:t,getVideoModel:X,getVideoContainer:Bb,getTTMLRenderingDiv:Fb,getVideoElement:Db,
getSource:Hb,setLiveDelayFragmentCount:Z,setLiveDelay:_,getLiveDelay:ba,useSuggestedPresentationDelay:da,enableLastBitrateCaching:ga,enableLastMediaSettingsCaching:ia,setMaxAllowedBitrateFor:ka,getMaxAllowedBitrateFor:oa,setMinAllowedBitrateFor:ma,getMinAllowedBitrateFor:pa,setMaxAllowedRepresentationRatioFor:qa,getMaxAllowedRepresentationRatioFor:ra,setAutoPlay:sa,getAutoPlay:ta,setScheduleWhilePaused:ua,getScheduleWhilePaused:va,getDashMetrics:wa,getMetricsFor:xa,getQualityFor:ya,setQualityFor:za,updatePortalSize:Aa,getLimitBitrateByPortal:Ba,setLimitBitrateByPortal:Ca,getUsePixelRatioInLimitBitrateByPortal:Da,setUsePixelRatioInLimitBitrateByPortal:Ea,setTextTrack:Fa,getBitrateInfoListFor:Ha,setInitialBitrateFor:Ia,getInitialBitrateFor:Ja,setInitialRepresentationRatioFor:Ka,getInitialRepresentationRatioFor:La,getStreamsFromManifest:Ma,getTracksFor:Na,getTracksForTypeFromManifest:Oa,getCurrentTrackFor:Pa,setInitialMediaSettingsFor:Qa,getInitialMediaSettingsFor:Ra,setCurrentTrack:Sa,getTrackSwitchModeFor:Ta,setTrackSwitchModeFor:Ua,setSelectionModeForInitialTrack:Va,getSelectionModeForInitialTrack:Wa,getAutoSwitchQuality:Xa,setAutoSwitchQuality:Ya,setFastSwitchEnabled:_a,getFastSwitchEnabled:ab,getAutoSwitchQualityFor:Za,setAutoSwitchQualityFor:$a,enableBufferOccupancyABR:bb,setBandwidthSafetyFactor:pb,getBandwidthSafetyFactor:qb,setAbandonLoadTimeout:rb,retrieveManifest:cb,addUTCTimingSource:db,removeUTCTimingSource:eb,clearDefaultUTCTimingSources:fb,restoreDefaultUTCTimingSources:gb,setBufferToKeep:ib,setBufferPruningInterval:jb,setStableBufferTime:kb,setBufferTimeAtTopQuality:lb,setFragmentLoaderRetryAttempts:sb,setFragmentLoaderRetryInterval:tb,setXHRWithCredentials:ub,setXHRWithCredentialsForType:vb,getXHRWithCredentialsForType:wb,setBufferTimeAtTopQualityLongForm:mb,setLongFormContentDurationThreshold:nb,setRichBufferThreshold:ob,getProtectionController:xb,attachProtectionController:yb,setProtectionData:zb,enableManifestDateHeaderTimeSource:hb,displayCaptionsOnTop:Ab,attachVideoContainer:Cb,attachTTMLRenderingDiv:Gb,getCurrentTextTrackIndex:Ga,reset:Jb},a(),bc}Object.defineProperty(c,"__esModule",{value:!0});var f=a(46),g=d(f),h=a(64),i=d(h),j=a(67),k=d(j),l=a(62),m=d(l),n=a(48),o=d(n),p=a(106),q=d(p),r=a(103),s=d(r),t=a(99),u=d(t),v=a(96),w=d(v),x=a(66),y=d(x),z=a(108),A=d(z),B=a(94),C=d(B),D=a(75),E=d(D),F=a(72),G=d(F),H=a(73),I=d(H),J=a(74),K=d(J),L=a(56),M=d(L),N=a(68),O=d(N),P=a(81),Q=d(P),R=a(76),S=d(R),T=a(63),U=d(T),V=a(57),W=d(V),X=a(6),Y=d(X),Z=a(7),$=d(Z),_=a(11),aa=d(_),ba=a(51),ca=d(ba),da=a(8),ea=d(da),fa=a(9),ga=a(13),ha=d(ga),ia=a(20),ja=d(ia),ka=a(15),la=d(ka),ma=a(36),na=d(ma);e.__dashjs_factory_name="MediaPlayer";var oa=ea["default"].getClassFactory(e);oa.events=ca["default"],c["default"]=oa,b.exports=c["default"]},{103:103,106:106,108:108,11:11,13:13,15:15,20:20,36:36,46:46,48:48,51:51,56:56,57:57,6:6,62:62,63:63,64:64,66:66,67:67,68:68,7:7,72:72,73:73,74:74,75:75,76:76,8:8,81:81,9:9,94:94,96:96,99:99}],51:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(12),i=d(h),j=function(a){function b(){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.STREAM_INITIALIZED="streamInitialized",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated"}return f(b,a),b}(i["default"]),k=new j;c["default"]=k,b.exports=c["default"]},{12:12}],52:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){ja=[],ka=!1,la=!1,ma=null,na={},oa=!1,pa=!1,ra=g["default"]($).getInstance(),sa=w["default"]($).getInstance(),wa=q["default"]($).getInstance(),ta=k["default"]($).getInstance(),ua=o["default"]($).create(),xa=O["default"]($).getInstance(),aa.on(I["default"].BUFFERING_COMPLETED,U,ia),aa.on(I["default"].DATA_UPDATE_COMPLETED,V,ia)}function c(a,b){ma=a,qa=b,qa&&(aa.on(I["default"].KEY_ERROR,D,ia),aa.on(I["default"].SERVER_CERTIFICATE_UPDATED,D,ia),aa.on(I["default"].LICENSE_REQUEST_COMPLETE,D,ia),aa.on(I["default"].KEY_SYSTEM_SELECTED,D,ia),aa.on(I["default"].KEY_SESSION_CREATED,D,ia))}function d(a){ka||(aa.on(I["default"].CURRENT_TRACK_CHANGED,J,ia),Q(a),ka=!0)}function e(){for(var a=ja.length,b=0;a>b;b++)ja[b].reset();ja=[],ka=!1,la=!1,x(),aa.off(I["default"].CURRENT_TRACK_CHANGED,J,ia)}function f(){sa&&(sa.pause(),sa=null),ua&&(ua.reset(),ua=null),e(),ta=null,wa=null,ca=null,ba=null,da=null,ea=null,_=null,fa=null,oa=!1,pa=!1,na={},aa.off(I["default"].DATA_UPDATE_COMPLETED,V,ia),aa.off(I["default"].BUFFERING_COMPLETED,U,ia),aa.off(I["default"].KEY_ERROR,D,ia),aa.off(I["default"].SERVER_CERTIFICATE_UPDATED,D,ia),aa.off(I["default"].LICENSE_REQUEST_COMPLETE,D,ia),aa.off(I["default"].KEY_SYSTEM_SELECTED,D,ia),aa.off(I["default"].KEY_SESSION_CREATED,D,ia)}function h(){return ma.duration}function j(){return ma.start}function l(){return ma.index}function n(){return ma.id}function p(){return ma}function r(a){return null!==S(a)}function t(a){var b=S(a);return wa.getBitrateList(b)}function v(){va&&va.start()}function x(){va&&va.clear()}function z(){return ka}function B(){return pa}function D(a){a.error&&(fa.mediaKeySessionError(a.error),_(a.error),f())}function F(a){return"text"===a.type?a.mimeType:a.type}function H(a,b,c){var d,e,f=a.type;if("muxed"===f&&a)return e="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",_(e),fa.manifestError(e,"multiplexedrep",ba.getValue()),!1;if("text"===f||"fragmentedText"===f||"embeddedText"===f)return!0;if(d=a.codec,_(f+" codec: "+d),a.contentProtection&&!ea.supportsEncryptedMedia())fa.capabilityError("encryptedmedia");else if(!ea.supportsCodec(s["default"]($).getInstance().getElement(),d))return e=f+"Codec ("+d+") is not supported.",fa.manifestError(e,"codec",c),_(e),!1;return!0}function J(a){if(a.newMediaInfo.streamInfo.id===ma.id){var b=W(a.oldMediaInfo);if(b){var c=sa.getTime(),d=b.getBuffer(),e=a.newMediaInfo,f=ba.getValue(),g=ja.indexOf(b),h=b.getMediaSource();"fragmentedText"!==e.type?(b.reset(!0),N(e,f,h,{buffer:d,replaceIdx:g,currentTime:c}),sa.seek(sa.getTime())):b.updateMediaInfo(f,e)}}}function L(a){var b=a.split("/")[1];return"webm"===b.toLowerCase()}function M(a){var b=L(a.mimeType)?C["default"]($).getInstance():A["default"]($).getInstance();b.setConfig({baseURLController:ha,metricsModel:u["default"]($).getInstance()}),b.initialize();var c=y["default"]($).create({segmentBaseLoader:b,timelineConverter:ga,dashMetrics:E["default"]($).getInstance(),metricsModel:u["default"]($).getInstance(),baseURLController:ha});return c}function N(a,b,c,d){var e=i["default"]($).create({indexHandler:M(a),timelineConverter:ga,adapter:da,manifestModel:ba}),f=da.getAllMediaInfoForType(b,ma,a.type);if(e.initialize(F(a),ua,c,ia,va),wa.updateTopQualityIndex(a),d?(e.setBuffer(d.buffer),e.getIndexHandler().setCurrentTime(d.currentTime),ja[d.replaceIdx]=e):ja.push(e),"text"===a.type||"fragmentedText"===a.type){for(var g,h=0;h<f.length;h++)f[h].index===a.index&&(g=h),e.updateMediaInfo(b,f[h]);"fragmentedText"===a.type&&e.updateMediaInfo(b,f[g])}else e.updateMediaInfo(b,a)}function P(a,b){var c,d=ba.getValue(),e=da.getAllMediaInfoForType(d,ma,a),f=null;if(!e||0===e.length)return void _("No "+a+" data.");for(var g=0,h=e.length;h>g;g++)if(f=e[g],"embeddedText"===a)xa.addEmbeddedTrack(f);else{if(!H(f,b,d))continue;ta.isMultiTrackSupportedByType(f.type)&&ta.addTrack(f,ma)}"embeddedText"!==a&&0!==ta.getTracksFor(a,ma).length&&(ta.checkInitialMediaSettingsForType(a,ma),c=ta.getCurrentTrackFor(a,ma),N(c,d,b))}function Q(a){var b,c=ba.getValue();if(va=m["default"]($).getInstance(),va.initialize(),va.setConfig({manifestModel:ba,manifestUpdater:ca}),b=da.getEventsFor(c,ma),va.addInlineEvents(b),oa=!0,P("video",a),P("audio",a),P("text",a),P("fragmentedText",a),P("embeddedText",a),P("muxed",a),T(),la=!0,oa=!1,0===ja.length){var d="No streams to play.";fa.manifestError(d,"nostreams",c),_(d)}else ra.initialize(ga,ja[0]),R()}function R(){var a=ja.length,b=!!na.audio||!!na.video,c=b?new Error(Z,"Data update failed",null):null,d=0;for(d;a>d;d++)if(ja[d].isUpdating()||oa)return;pa=!0,la&&(qa&&qa.initialize(ba.getValue(),S("audio"),S("video")),aa.trigger(I["default"].STREAM_INITIALIZED,{streamInfo:ma,error:c}))}function S(a){for(var b=ja.length,c=null,d=0;b>d;d++)if(c=ja[d],c.getType()===a)return c.getMediaInfo();return null}function T(){for(var a=0,b=ja.length;b>a;a++)ja[a].createBuffer()}function U(a){if(a.streamInfo===ma){var b=X(),c=b.length,d=0;for(d;c>d;d++)if(!b[d].isBufferingCompleted())return;aa.trigger(I["default"].STREAM_BUFFERING_COMPLETED,{streamInfo:ma})}}function V(a){var b=a.sender.getStreamProcessor();b.getStreamInfo()===ma&&(na[b.getType()]=a.error,R())}function W(a){if(!a)return!1;var b=X();return b.filter(function(b){return b.getType()===a.type})[0]}function X(){var a,b,c=ja.length,d=[],e=0;for(e;c>e;e++)b=ja[e],a=b.getType(),"audio"!==a&&"video"!==a&&"fragmentedText"!==a||d.push(b);return d}function Y(a){_("Manifest updated... updating data system wide.");var b=ba.getValue();if(ka=!1,oa=!0,pa=!1,ma=a,va){var c=da.getEventsFor(b,ma);va.addInlineEvents(c)}for(var d=0,e=ja.length;e>d;d++){var f=ja[d],g=da.getMediaInfoForType(b,ma,f.getType());wa.updateTopQualityIndex(g),f.updateMediaInfo(b,g)}oa=!1,R()}var Z=1,$=this.context,_=K["default"]($).getInstance().log,aa=G["default"]($).getInstance(),ba=a.manifestModel,ca=a.manifestUpdater,da=a.adapter,ea=a.capabilities,fa=a.errHandler,ga=a.timelineConverter,ha=a.baseURLController,ia=void 0,ja=void 0,ka=void 0,la=void 0,ma=void 0,na=void 0,oa=void 0,pa=void 0,qa=void 0,ra=void 0,sa=void 0,ta=void 0,ua=void 0,va=void 0,wa=void 0,xa=void 0;return ia={initialize:c,activate:d,deactivate:e,getDuration:h,getStartTime:j,getStreamIndex:l,getId:n,getStreamInfo:p,hasMedia:r,getBitrateListFor:t,startEventController:v,isActivated:z,isInitialized:B,updateData:Y,reset:f,getProcessors:X},b(),ia}Object.defineProperty(c,"__esModule",{value:!0});var f=a(106),g=d(f),h=a(53),i=d(h),j=a(62),k=d(j),l=a(60),m=d(l),n=a(61),o=d(n),p=a(56),q=d(p),r=a(76),s=d(r),t=a(74),u=d(t),v=a(64),w=d(v),x=a(14),y=d(x),z=a(16),A=d(z),B=a(17),C=d(B),D=a(15),E=d(D),F=a(7),G=d(F),H=a(11),I=d(H),J=a(6),K=d(J),L=a(8),M=d(L),N=a(94),O=d(N);e.__dashjs_factory_name="Stream",c["default"]=M["default"].getClassFactory(e),b.exports=c["default"]},{106:106,11:11,14:14,15:15,16:16,17:17,53:53,56:56,6:6,60:60,61:61,62:62,64:64,7:7,74:74,76:76,8:8,94:94}],53:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){ba=[]}function c(a,b,c,d,e){aa=a,ca=d,da=e,ia=b,$=ca.getStreamInfo().manifestInfo.isDynamic,V.initialize(this),ea=g["default"](U).getInstance(),ea.initialize(aa,this),fa=T(a),ga=q["default"](U).create({metricsModel:u["default"](U).getInstance(),manifestModel:Y,adapter:X,dashMetrics:G["default"](U).getInstance(),dashManifestModel:E["default"](U).getInstance(),timelineConverter:W,mediaPlayerModel:s["default"](U).getInstance()}),fa.initialize(aa,c,this),ga.initialize(aa,this),ja=w["default"](U).create({metricsModel:u["default"](U).getInstance(),errHandler:K["default"](U).getInstance(),requestModifier:y["default"](U).getInstance()}),ka=ga.getFragmentModel(),ka.setLoader(ja),ha=I["default"](U).create(),ha.initialize(this)}function d(a){V.reset(),fa&&(fa.reset(a),fa=null),ga&&(ga.reset(),ga=null),ha&&(ha.reset(),ha=null),ia=null,ja=null,da=null,ca=null,$=null,_=null,ba=[],aa=null}function e(){return ha.isUpdating()}function f(){return aa}function h(){return ea}function j(){return ha}function l(){return ja}function n(){return V}function p(){return ia}function r(){return fa.getBuffer()}function t(a){fa.setBuffer(a)}function v(){return fa}function x(){return ka}function z(){return ca?ca.getStreamInfo():null}function B(a,b){b===_||b&&_&&b.type!==_.type||(_=b),-1===ba.indexOf(b)&&ba.push(b),X.updateData(a,this)}function D(){return ba}function F(){return _}function H(){return fa.getMediaSource()}function J(){return ga}function L(){return da}function M(){ga.start()}function N(){ga.stop()}function O(){return X.getCurrentRepresentationInfo(Y.getValue(),ha)}function P(a){return X.getRepresentationInfoForQuality(Y.getValue(),ha,a)}function Q(){return fa.getIsBufferingCompleted()}function R(){return fa.getBuffer()||fa.createBuffer(_)}function S(){return $}function T(a){var b=null;return b="video"===a||"audio"===a?i["default"](U).create({metricsModel:u["default"](U).getInstance(),manifestModel:Y,sourceBufferController:A["default"](U).getInstance(),errHandler:K["default"](U).getInstance(),streamController:k["default"](U).getInstance(),mediaController:m["default"](U).getInstance(),adapter:X,textController:C["default"](U).getInstance()}):o["default"](U).create({type:a,metricsModel:u["default"](U).getInstance(),manifestModel:Y,sourceBufferController:A["default"](U).getInstance(),errHandler:K["default"](U).getInstance(),streamController:k["default"](U).getInstance(),mediaController:m["default"](U).getInstance(),adapter:X,textController:C["default"](U).getInstance()})}var U=this.context,V=a.indexHandler,W=a.timelineConverter,X=a.adapter,Y=a.manifestModel,Z=void 0,$=void 0,_=void 0,aa=void 0,ba=void 0,ca=void 0,da=void 0,ea=void 0,fa=void 0,ga=void 0,ha=void 0,ia=void 0,ja=void 0,ka=void 0;return Z={initialize:c,isUpdating:e,getType:f,getBufferController:v,getABRController:h,getFragmentLoader:l,getFragmentModel:x,getScheduleController:J,getEventController:L,getFragmentController:p,getRepresentationController:j,getIndexHandler:n,getCurrentRepresentationInfo:O,getRepresentationInfoForQuality:P,isBufferingCompleted:Q,createBuffer:R,getStreamInfo:z,updateMediaInfo:B,getMediaInfoArr:D,getMediaInfo:F,getMediaSource:H,getBuffer:r,setBuffer:t,start:M,stop:N,isDynamic:S,reset:d},b(),Z}Object.defineProperty(c,"__esModule",{value:!0});var f=a(56),g=d(f),h=a(59),i=d(h),j=a(67),k=d(j),l=a(62),m=d(l),n=a(93),o=d(n),p=a(65),q=d(p),r=a(73),s=d(r),t=a(74),u=d(t),v=a(47),w=d(v),x=a(108),y=d(x),z=a(66),A=d(z),B=a(94),C=d(B),D=a(20),E=d(D),F=a(15),G=d(F),H=a(19),I=d(H),J=a(103),K=d(J),L=a(8),M=d(L);e.__dashjs_factory_name="StreamProcessor",c["default"]=M["default"].getClassFactory(e),b.exports=c["default"]},{103:103,108:108,15:15,19:19,20:20,47:47,56:56,59:59,62:62,65:65,66:66,67:67,73:73,74:74,8:8,93:93,94:94}],54:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(a){function b(){var a;p=[],q=[],r=[],a={},e(a,g.HTTPRequest.MPD_TYPE,m["default"].DOWNLOAD_ERROR_ID_MANIFEST),e(a,g.HTTPRequest.XLINK_EXPANSION_TYPE,m["default"].DOWNLOAD_ERROR_ID_XLINK),e(a,g.HTTPRequest.INIT_SEGMENT_TYPE,m["default"].DOWNLOAD_ERROR_ID_INITIALIZATION),e(a,g.HTTPRequest.MEDIA_SEGMENT_TYPE,m["default"].DOWNLOAD_ERROR_ID_CONTENT),e(a,g.HTTPRequest.INDEX_SEGMENT_TYPE,m["default"].DOWNLOAD_ERROR_ID_CONTENT),e(a,g.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,m["default"].DOWNLOAD_ERROR_ID_CONTENT),e(a,g.HTTPRequest.OTHER_TYPE,m["default"].DOWNLOAD_ERROR_ID_CONTENT),s=a}function c(a,b){var d=a.request,e=new XMLHttpRequest,f=[],g=!0,h=!0,k=new Date,m=k,o=0,t=function(a){h=!1,d.requestStartDate=k,d.requestEndDate=new Date,d.firstByteDate=d.firstByteDate||k,d.checkExistenceOnly||l.addHttpRequest(d.mediaType,null,d.type,d.url,e.responseURL||null,d.serviceLocation||null,d.range||null,d.requestStartDate,d.firstByteDate,d.requestEndDate,e.status,d.duration,e.getAllResponseHeaders(),a?f:null)},u=function(){-1!==p.indexOf(e)&&(p.splice(p.indexOf(e),1),h&&(t(!1),b>0?(b--,r.push(setTimeout(function(){c(a,b)},i.getRetryIntervalForType(d.type)))):(j.downloadError(s[d.type],d.url,d),a.error&&a.error(d,"error",e.statusText),a.complete&&a.complete(d,e.statusText))))},v=function(b){var c=new Date;g&&(g=!1,(!b.lengthComputable||b.lengthComputable&&b.total!==b.loaded)&&(d.firstByteDate=c)),b.lengthComputable&&(d.bytesLoaded=b.loaded,d.bytesTotal=b.total),f.push({s:m,d:c.getTime()-m.getTime(),b:[b.loaded?b.loaded-o:0]}),m=c,o=b.loaded,a.progress&&a.progress()},w=function(){e.status>=200&&e.status<=299&&(t(!0),a.success&&a.success(e.response,e.statusText,e),a.complete&&a.complete(d,e.statusText))};try{var x=n.modifyRequestURL(d.url),y=d.checkExistenceOnly?"HEAD":"GET";e.open(y,x,!0),d.responseType&&(e.responseType=d.responseType),d.range&&e.setRequestHeader("Range","bytes="+d.range),d.requestStartDate||(d.requestStartDate=k),e=n.modifyRequestHeader(e),e.withCredentials=i.getXHRWithCredentialsForType(d.type),e.onload=w,e.onloadend=u,e.onerror=u,e.onprogress=v;var z=(new Date).getTime();isNaN(d.delayLoadingTime)||z>=d.delayLoadingTime?(p.push(e),e.send()):!function(){var a={xhr:e};q.push(a),a.delayTimeout=setTimeout(function(){if(-1!==q.indexOf(a)){q.splice(q.indexOf(a),1);try{p.push(a.xhr),a.xhr.send()}catch(b){a.xhr.onerror()}}},d.delayLoadingTime-z)}()}catch(A){e.onerror()}}function d(a){a.request&&c(a,i.getRetryAttemptsForType(a.request.type))}function f(){r.forEach(function(a){return clearTimeout(a)}),r=[],q.forEach(function(a){return clearTimeout(a.delayTimeout)}),q=[],p.forEach(function(a){a.onloadend=a.onerror=a.onprogress=void 0,a.abort()}),p=[]}var h=this.context,i=k["default"](h).getInstance(),j=a.errHandler,l=a.metricsModel,n=a.requestModifier,o=void 0,p=void 0,q=void 0,r=void 0,s=void 0;return o={load:d,abort:f},b(),o}Object.defineProperty(c,"__esModule",{value:!0});var g=a(133),h=a(8),i=d(h),j=a(73),k=d(j),l=a(103),m=d(l);f.__dashjs_factory_name="XHRLoader";var n=i["default"].getClassFactory(f);c["default"]=n,b.exports=c["default"]},{103:103,133:133,73:73,8:8}],55:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(a,b,c){var e=function(d,e){b.resolved=!0,b.resolvedContent=d?d:null,f.trigger(p["default"].XLINK_ELEMENT_LOADED,{element:b,resolveObject:c,error:d||e?null:new g["default"](s,"Failed loading Xlink element: "+a)})};if(a===d)e(null,!0);else{var i=new l["default"](a,j.HTTPRequest.XLINK_TYPE);h.load({request:i,success:function(a){e(a)},error:function(){e(null)}})}}function c(){h&&(h.abort(),h=null)}var d="urn:mpeg:dash:resolve-to-zero:2013",e=this.context,f=n["default"](e).getInstance(),h=i["default"](e).create({errHandler:a.errHandler,metricsModel:a.metricsModel,requestModifier:a.requestModifier}),k=void 0;return k={load:b,reset:c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(116),g=d(f),h=a(54),i=d(h),j=a(133),k=a(124),l=d(k),m=a(7),n=d(m),o=a(11),p=d(o),q=a(8),r=d(q),s=1;e.__dashjs_factory_name="XlinkLoader";var t=r["default"].getClassFactory(e);t.XLINK_LOADER_ERROR_LOADING_FAILURE=s,c["default"]=t,b.exports=c["default"]},{11:11,116:116,124:124,133:133,54:54,7:7,8:8}],56:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){sa={video:!0,audio:!0},ta={},ua={},va={},wa={},xa={},za={},ya={},Ma={},Ba=!1,Ca=!1,void 0===Da&&(Da=!1),Ka=i["default"](la).getInstance(),Ja=k["default"](la).getInstance(),Ga=w["default"](la).getInstance(),Ha=y["default"](la).getInstance(),Ia=A["default"](la).getInstance(),Oa=K["default"](la).getInstance(),Pa=M["default"](la).getInstance(),Qa=(new Date).getTime()/1e3}function b(a,b){Ma[a]=G["default"](la).create(),ya[a]=b,za[a]=za[a]||{},za[a].state=Q,oa.on(q["default"].LOADING_PROGRESS,ka,this),"video"==a&&(oa.on(s["default"].QUALITY_CHANGE_RENDERED,e,this),Na=I["default"](la).create(),ia())}function c(){oa.off(q["default"].LOADING_PROGRESS,ka,this),oa.off(s["default"].QUALITY_CHANGE_RENDERED,e,this),La=void 0,Na=void 0,clearTimeout(Aa),Aa=null,a()}function d(a){a&&(a.abrRulesCollection&&(qa=a.abrRulesCollection),a.streamController&&(ra=a.streamController))}function e(a){"video"===a.mediaType&&(La=a.newQuality,Na.push(La,Ia.getPlaybackQuality()))}function f(a,b){var c;return ta[b]=ta[b]||{},ta[b].hasOwnProperty(a)||(ta[b][a]=0),c=fa(ta[b][a],a),c=ga(c,a,ta[b][a]),c=ja(c,a)}function h(a){var b=Ka.getSavedBitrateSettings(a);if(!va.hasOwnProperty(a))if(wa.hasOwnProperty(a)){var c=Ga.getValue(),d=Ha.getAdaptationForType(c,0,a).Representation;if(Array.isArray(d)){var e=Math.max(Math.round(d.length*wa[a])-1,0);va[a]=d[e].bandwidth}else va[a]=0}else isNaN(b)?va[a]="video"===a?R:S:va[a]=b;return va[a]}function j(a,b){va[a]=b}function l(a){return wa.hasOwnProperty(a)?wa[a]:null}function n(a,b){wa[a]=b}function p(a){return va.hasOwnProperty("max")&&va.max.hasOwnProperty(a)?va.max[a]:NaN}function r(a){return va.hasOwnProperty("min")&&va.min.hasOwnProperty(a)?va.min[a]:NaN}function t(a,b){va.max=va.max||{},va.max[a]=b}function u(a,b){va.min=va.min||{},va.min[a]=b}function v(a){return wa.hasOwnProperty("max")&&wa.max.hasOwnProperty(a)?wa.max[a]:1}function x(a,b){wa.max=wa.max||{},wa.max[a]=b}function z(a){return sa[a]}function B(a,b){sa[a]=b}function D(){return Ba}function F(a){Ba=a}function H(){return Ca}function J(a){Ca=a}function L(a){var b=a.getType(),c=a.getStreamInfo(),d=c.id,e=ca(b,c),g=C["default"](la).create({streamProcessor:a,currentValue:e,playbackIndex:La,switchHistory:Ma[b],droppedFramesHistory:Na,hasRichBuffer:Z(b)});if(Na&&Na.push(La,Ia.getPlaybackQuality()),z(b)){var h=f(b,d),i=qa.getMaxQuality(g),j=i.value;if(j>h&&(j=h),Ma[b].push({oldValue:e,newValue:j}),j>E["default"].NO_CHANGE&&j!=e)(za[b].state===Q||j>e)&&U(b,c,e,j,h,i.reason);else if(ma.getLogToBrowserConsole()){var k=Pa.getCurrentBufferLevel(Oa.getReadOnlyMetricsFor(b));na("AbrController ("+b+") stay on "+e+"/"+h+" (buffer: "+k+")")}}}function N(a,b,c,d){var e=b.id,g=ca(a,b),h=null!==c&&!isNaN(c)&&c%1===0;if(!h)throw new Error("argument is not an integer");var i=f(a,e);c!==g&&c>=0&&i>=c&&U(a,b,g,c,i,d)}function U(a,b,c,d,e,f){if(ma.getLogToBrowserConsole()){var g=Pa.getCurrentBufferLevel(Oa.getReadOnlyMetricsFor(a));na("AbrController ("+a+") switch from "+c+" to "+d+"/"+e+" (buffer: "+g+")\n"+JSON.stringify(f))}da(a,b.id,d),oa.trigger(q["default"].QUALITY_CHANGE_REQUESTED,{mediaType:a,streamInfo:b,oldQuality:c,newQuality:d,reason:f})}function V(a,b){za[a].state=b}function W(a){return za[a].state}function X(a,b,c){if(c&&ya[a.type].getCurrentRepresentationInfo()&&ya[a.type].getCurrentRepresentationInfo().fragmentDuration){c/=1e3;var d=ya[a.type].getCurrentRepresentationInfo().fragmentDuration;if(c>d)return 0;var e=c/d;b*=1-e}var f=Y(a);if(!f||0===f.length)return T;for(var g=f.length-1;g>=0;g--){var h=f[g];if(1e3*b>=h.bitrate)return g}return 0}function Y(a){if(!a||!a.bitrateList)return null;for(var b,c=a.bitrateList,d=a.type,e=[],f=0,h=c.length;h>f;f++)b=new g["default"],b.mediaType=d,b.qualityIndex=f,b.bitrate=c[f].bandwidth,b.width=c[f].width,b.height=c[f].height,e.push(b);return e}function Z(a){var b=Oa.getReadOnlyMetricsFor(a),c=Pa.getCurrentBufferLevel(b),d=b.BufferState.length>0?b.BufferState[b.BufferState.length-1]:null,e=!1;return d&&c>d.target&&(e=c>d.target+Ja.getRichBufferThreshold()),e}function $(a,b){xa[a]=b}function _(a){return xa[a]}function aa(a){var b=a.type,c=a.streamInfo.id,d=a.representationCount-1;return ea(b,c,d),d}function ba(a){var b,c=a.id,d=ca("audio",a),e=ca("video",a);return b=d===f("audio",c)&&e===f("video",c)}function ca(a,b){var c,d=b.id;return ua[d]=ua[d]||{},ua[d].hasOwnProperty(a)||(ua[d][a]=T),c=ua[d][a]}function da(a,b,c){ua[b]=ua[b]||{},ua[b][a]=c}function ea(a,b,c){ta[b]=ta[b]||{},ta[b][a]=c}function fa(a,b){var c=a;if(!ya[b])return c;var d=r(b);if(d){var e=X(ya[b].getMediaInfo(),d);c=Math.max(a,e)}var f=p(b);if(f){var g=X(ya[b].getMediaInfo(),f);c=Math.min(c,g)}return c}function ga(a,b,c){var d=v(b);return isNaN(d)||d>=1||0>d?a:Math.min(a,Math.round(c*d))}function ha(a){Da=a}function ia(){var a=Ia.getElement();if(void 0!==a){var b=Ca&&window.hasOwnProperty("devicePixelRatio"),c=b?window.devicePixelRatio:1;Ea=a.clientWidth*c,Fa=a.clientHeight*c}}function ja(a,b){if("video"!==b||!Ba||!ya[b])return a;Da||ia();var c=Ga.getValue(),d=Ha.getAdaptationForType(c,0,b).Representation,e=a;if(Ea>0&&Fa>0){for(;e>0&&d[e]&&Ea<d[e].width&&Ea-d[e-1].width<d[e].width-Ea;)e-=1;d.length-2>=e&&d[e].width===d[e+1].width&&(e=Math.min(a,e+1))}return e}function ka(a){var b=a.request.mediaType;if(z(b)){var c=ya[b].getScheduleController();if(!c)return;var d=C["default"](la).create({streamProcessor:ya[b],currentRequest:a.request,currentValue:ca(b,ra.getActiveStreamInfo()),hasRichBuffer:Z(b)}),e=qa.shouldAbandonFragment(d);if(e.value>E["default"].NO_CHANGE){var f=c.getFragmentModel(),g=f.getRequests({state:m["default"].FRAGMENT_MODEL_LOADING,index:a.request.index})[0];g&&(f.abortRequests(),V(b,P),Ma[b].reset(),Ma[b].push({oldValue:ca(b,ra.getActiveStreamInfo()),newValue:e.value,confidence:1,reason:e.reason}),N(b,ra.getActiveStreamInfo(),e.value,e.reason),oa.trigger(q["default"].FRAGMENT_LOADING_ABANDONED,{streamProcessor:ya[b],request:g,mediaType:b}),clearTimeout(Aa),Aa=setTimeout(function(){V(b,Q),Aa=null},Ja.getAbandonLoadTimeout()))}}}var la=this.context,ma=O["default"](la).getInstance(),na=ma.log,oa=o["default"](la).getInstance(),pa=void 0,qa=void 0,ra=void 0,sa=void 0,ta=void 0,ua=void 0,va=void 0,wa=void 0,xa=void 0,ya=void 0,za=void 0,Aa=void 0,Ba=void 0,Ca=void 0,Da=void 0,Ea=void 0,Fa=void 0,Ga=void 0,Ha=void 0,Ia=void 0,Ja=void 0,Ka=void 0,La=void 0,Ma=void 0,Na=void 0,Oa=void 0,Pa=void 0,Qa=void 0;return pa={isPlayingAtTopQuality:ba,updateTopQualityIndex:aa,getAverageThroughput:_,getBitrateList:Y,getQualityForBitrate:X,getMaxAllowedBitrateFor:p,getMinAllowedBitrateFor:r,setMaxAllowedBitrateFor:t,setMinAllowedBitrateFor:u,getMaxAllowedRepresentationRatioFor:v,setMaxAllowedRepresentationRatioFor:x,getInitialBitrateFor:h,setInitialBitrateFor:j,getInitialRepresentationRatioFor:l,setInitialRepresentationRatioFor:n,setAutoSwitchBitrateFor:B,getAutoSwitchBitrateFor:z,setLimitBitrateByPortal:F,getLimitBitrateByPortal:D,getUsePixelRatioInLimitBitrateByPortal:H,setUsePixelRatioInLimitBitrateByPortal:J,getQualityFor:ca,getAbandonmentStateFor:W,setAbandonmentStateFor:V,setPlaybackQuality:N,getPlaybackQuality:L,setAverageThroughput:$,getTopQualityIndexFor:f,setElementSize:ia,setWindowResizeEventCalled:ha,initialize:b,setConfig:d,reset:c},a(),pa}Object.defineProperty(c,"__esModule",{value:!0});var f=a(114),g=d(f),h=a(101),i=d(h),j=a(73),k=d(j),l=a(71),m=d(l),n=a(7),o=d(n),p=a(11),q=d(p),r=a(51),s=d(r),t=a(8),u=d(t),v=a(72),w=d(v),x=a(20),y=d(x),z=a(76),A=d(z),B=a(78),C=d(B),D=a(79),E=d(D),F=a(80),G=d(F),H=a(77),I=d(H),J=a(74),K=d(J),L=a(15),M=d(L),N=a(6),O=d(N),P="abandonload",Q="allowload",R=1e3,S=100,T=0;e.__dashjs_factory_name="AbrController";var U=u["default"].getSingletonFactory(e);U.ABANDON_LOAD=P,U.QUALITY_DEFAULT=T,c["default"]=U,b.exports=c["default"]},{101:101,11:11,114:114,15:15,20:20,51:51,6:6,7:7,71:71,72:72,73:73,74:74,76:76,77:77,78:78,79:79,8:8,80:80}],57:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){p.invalidateSelectedIndexes(a.entry)}function b(){p=g["default"](l).create(),r=i["default"](l).create(),n.on(s["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,a,j)}function c(a){a.baseURLTreeModel&&(p=a.baseURLTreeModel),a.baseURLSelector&&(r=a.baseURLSelector)}function d(a){p.update(a),r.chooseSelectorFromManifest(a)}function e(a){var b=p.getForPath(a),c=b.reduce(function(a,b){var c=r.select(b);return c?(o.isRelative(c.url)?a.url=o.resolve(c.url,a.url):(a.url=c.url,a.serviceLocation=c.serviceLocation),a):new m["default"]},new m["default"]);return o.isRelative(c.url)?void 0:c}function f(){p.reset(),r.reset()}function h(a){d(a)}var j=void 0,l=this.context,n=q["default"](l).getInstance(),o=k["default"](l).getInstance(),p=void 0,r=void 0;return j={reset:f,initialize:h,resolve:e,setConfig:c},b(),j}Object.defineProperty(c,"__esModule",{value:!0});var f=a(70),g=d(f),h=a(97),i=d(h),j=a(110),k=d(j),l=a(39),m=d(l),n=a(8),o=d(n),p=a(7),q=d(p),r=a(11),s=d(r);e.__dashjs_factory_name="BaseURLController",c["default"]=o["default"].getSingletonFactory(e),b.exports=c["default"]},{11:11,110:110,39:39,7:7,70:70,8:8,97:97}],58:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(a){return!!(g.length&&a&&a.length)&&-1!==g.indexOf(a)}function c(a){-1===g.indexOf(a)&&(g.push(a),h.trigger(j,{entry:a}))}function d(a){a.error&&c(a.request.serviceLocation)}function e(){k&&h.on(k,d,this)}function f(){g=[]}var g=[],h=i["default"](this.context).getInstance(),j=a.updateEventName,k=a.loadFailedEventName;return e(),{add:c,contains:b,reset:f}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f),h=a(7),i=d(h);e.__dashjs_factory_name="BlackListController",c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{7:7,8:8}],59:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){oa=m["default"].QUALITY_DEFAULT,pa=!1,qa=0,ra=Number.POSITIVE_INFINITY,ta=0,ua=Number.POSITIVE_INFINITY,wa=null,xa=E,za=0,Aa=!1,Ba=!1,Ca=!1,Da=!1}function c(a,b,c){va=a,$(b),Fa=c,Ia=i["default"](ca).getInstance(),Ea=o["default"](ca).getInstance(),Ga=m["default"](ca).getInstance(),Ja=C["default"](ca).getInstance(),Ha=Fa.getScheduleController(),oa=Ga.getQualityFor(va,Fa.getStreamInfo()),ea.on(u["default"].DATA_UPDATE_COMPLETED,O,this),ea.on(u["default"].INIT_FRAGMENT_LOADED,f,this),ea.on(u["default"].MEDIA_FRAGMENT_LOADED,j,this),ea.on(u["default"].QUALITY_CHANGE_REQUESTED,p,this),ea.on(u["default"].STREAM_COMPLETED,P,this),ea.on(u["default"].PLAYBACK_PROGRESS,t,this),ea.on(u["default"].PLAYBACK_TIME_UPDATED,t,this),ea.on(u["default"].PLAYBACK_RATE_CHANGED,S,this),ea.on(u["default"].PLAYBACK_SEEKING,r,this),ea.on(u["default"].WALLCLOCK_TIME_UPDATED,R,this),ea.on(u["default"].CURRENT_TRACK_CHANGED,Q,this,s["default"].EVENT_PRIORITY_HIGH),ea.on(u["default"].SOURCEBUFFER_APPEND_COMPLETED,n,this),ea.on(u["default"].SOURCEBUFFER_REMOVE_COMPLETED,M,this)}function d(a){if(!a||!sa||!Fa)return null;var b=null;try{b=ha.createSourceBuffer(sa,a),b&&b.hasOwnProperty("initialize")&&b.initialize(va,this);
}catch(c){ia.mediaSourceError("Error creating "+va+" source buffer.")}return X(b),N(Fa.getRepresentationInfoForQuality(oa).MSETimeOffset),b}function e(){return!(!Fa||!ja)&&Fa.getStreamInfo().id===ja.getActiveStreamInfo().id}function f(a){a.fragmentModel===Fa.getFragmentModel()&&(da("Init fragment finished loading saving to",va+"'s init cache"),Ja.save(a.chunk),l(a.chunk))}function h(a,b){var c=Ja.extract(a,b);c?l(c):ea.trigger(u["default"].INIT_REQUESTED,{sender:na})}function j(a){if(a.fragmentModel===Fa.getFragmentModel()){var b=a.chunk,c=b.bytes,d=b.quality,e=Fa.getRepresentationInfoForQuality(d),f=ga.getValue(),h=la.getEventsFor(f,e.mediaInfo,Fa),i=la.getEventsFor(f,e,Fa);if(h&&h.length>0||i&&i.length>0){var j=Fa.getFragmentModel().getRequests({state:g["default"].FRAGMENT_MODEL_EXECUTED,quality:d,index:b.index})[0],k=G(c,j,h,i);Fa.getEventController().addInbandEvents(k)}b.bytes=H(c),l(b)}}function l(a){Ba=!0,ya=a,ha.append(wa,a),"video"===a.mediaInfo.type&&ea.trigger(u["default"].VIDEO_CHUNK_RECEIVED,{chunk:a})}function n(a){if(wa===a.buffer){if(a.error||!I())return a.error.code===k["default"].QUOTA_EXCEEDED_ERROR_CODE&&(ra=.8*ha.getTotalBufferedTime(wa)),void(a.error.code!==k["default"].QUOTA_EXCEEDED_ERROR_CODE&&I()||(ea.trigger(u["default"].QUOTA_EXCEEDED,{sender:na,criticalBufferLevel:ra}),L(K())));ya&&!isNaN(ya.index)&&(ta=Math.max(ya.index,ta),y());var b=ha.getAllRanges(wa);if(b&&b.length>0)for(var c=0,d=b.length;d>c;c++)da("Buffered Range for type:",va,":",b.start(c)," - ",b.end(c));t(),Ba=!1,ya&&ea.trigger(u["default"].BYTES_APPENDED,{sender:na,quality:ya.quality,startTime:ya.start,index:ya.index,bufferedRanges:b})}}function p(a){oa!==a.newQuality&&va===a.mediaType&&Fa.getStreamInfo().id===a.streamInfo.id&&(N(Fa.getRepresentationInfoForQuality(a.newQuality).MSETimeOffset),oa=a.newQuality)}function r(){ua=Number.POSITIVE_INFINITY,pa=!1,t()}function t(){v(),x()}function v(){Ea&&(qa=ha.getBufferLength(wa,Ea.getTime()),ea.trigger(u["default"].BUFFER_LEVEL_UPDATED,{sender:na,bufferLevel:qa}),z())}function x(){e()&&(fa.addBufferState(va,xa,Ha.getBufferTarget()),fa.addBufferLevel(va,new Date,1e3*qa))}function y(){var a=ta>=ua-1;a&&!pa&&(pa=!0,ea.trigger(u["default"].BUFFERING_COMPLETED,{sender:na,streamInfo:Fa.getStreamInfo()}))}function z(){B(F>qa&&!pa?E:D)}function B(a){xa===a||"fragmentedText"===va&&ma.getAllTracksAreDisabled()||(xa=a,x(),ea.trigger(u["default"].BUFFER_LEVEL_STATE_CHANGED,{sender:na,state:a,mediaType:va,streamInfo:Fa.getStreamInfo()}),ea.trigger(a===D?u["default"].BUFFER_LOADED:u["default"].BUFFER_EMPTY,{mediaType:va}),da(a===D?"Got enough buffer to start.":"Waiting for more buffer before starting playback."))}function G(a,b,c,d){var e=Math.max(isNaN(b.startTime)?0:b.startTime,0),f=[],g=[];Da=!1;for(var h=c.concat(d),i=0,j=h.length;j>i;i++)f[h[i].schemeIdUri]=h[i];for(var k=w["default"](ca).getInstance().parse(a),l=k.getBoxes("emsg"),i=0,j=l.length;j>i;i++){var m=la.getEvent(l[i],f,e);m&&g.push(m)}return g}function H(a){if(!Da)return a;for(var b=a.length,c=Math.pow(256,2),d=Math.pow(256,3),e=new Uint8Array(a.length),f=0,g=0;b>f;){var h=String.fromCharCode(a[f+4],a[f+5],a[f+6],a[f+7]),i=a[f]*d+a[f+1]*c+256*a[f+2]+1*a[f+3];if("emsg"!=h)for(var j=f;f+i>j;j++)e[g]=a[j],g++;f+=i}return e.subarray(0,g)}function I(){var a=ha.getTotalBufferedTime(wa);return ra>a}function J(){if(wa&&"fragmentedText"!==va){var a=wa.buffered.length?wa.buffered.start(0):0,b=Ea.getTime()-a-Ia.getBufferToKeep();b>0&&(da("pruning buffer: "+b+" seconds."),Ca=!0,ha.remove(wa,0,Math.round(a+b),sa))}}function K(a){if(!wa)return null;var b=Ea.getTime(),c=Fa.getFragmentModel().getRequests({state:g["default"].FRAGMENT_MODEL_EXECUTED,time:b,threshold:a})[0],d=ha.getBufferRange(wa,b),e=c&&!isNaN(c.startTime)?c.startTime:Math.floor(b);return null===d&&wa.buffered.length>0&&(e=wa.buffered.end(wa.buffered.length-1)),{start:wa.buffered.start(0),end:e}}function L(a){a&&wa&&ha.remove(wa,a.start,a.end,sa)}function M(a){wa===a.buffer&&(Ca&&(Ca=!1),v(),ea.trigger(u["default"].BUFFER_CLEARED,{sender:na,from:a.from,to:a.to,hasEnoughSpaceToAppend:I()}))}function N(a){wa&&wa.timestampOffset!==a&&!isNaN(a)&&(wa.timestampOffset=a)}function O(a){a.sender.getStreamProcessor()!==Fa||a.error||N(a.currentRepresentation.MSETimeOffset)}function P(a){a.fragmentModel===Fa.getFragmentModel()&&(ua=a.request.index,y())}function Q(a){wa&&a.newMediaInfo.type===va&&a.newMediaInfo.streamInfo.id===Fa.getStreamInfo().id&&ka.getSwitchMode(va)===q["default"].TRACK_SWITCH_MODE_ALWAYS_REPLACE&&L(K(0))}function R(){za++;var a=za*(Ia.getWallclockTimeUpdateInterval()/1e3);a>=Ia.getBufferPruningInterval()&&!Ba&&(za=0,J())}function S(){z()}function T(){return va}function U(){return Fa}function V(a){Fa=a}function W(){return wa}function X(a){wa=a}function Y(){return qa}function Z(){return ra}function $(a){sa=a}function _(){return sa}function aa(){return pa}function ba(a){ea.off(u["default"].DATA_UPDATE_COMPLETED,O,this),ea.off(u["default"].QUALITY_CHANGE_REQUESTED,p,this),ea.off(u["default"].INIT_FRAGMENT_LOADED,f,this),ea.off(u["default"].MEDIA_FRAGMENT_LOADED,j,this),ea.off(u["default"].STREAM_COMPLETED,P,this),ea.off(u["default"].CURRENT_TRACK_CHANGED,Q,this),ea.off(u["default"].PLAYBACK_PROGRESS,t,this),ea.off(u["default"].PLAYBACK_TIME_UPDATED,t,this),ea.off(u["default"].PLAYBACK_RATE_CHANGED,S,this),ea.off(u["default"].PLAYBACK_SEEKING,r,this),ea.off(u["default"].WALLCLOCK_TIME_UPDATED,R,this),ea.off(u["default"].SOURCEBUFFER_APPEND_COMPLETED,n,this),ea.off(u["default"].SOURCEBUFFER_REMOVE_COMPLETED,M,this),ra=Number.POSITIVE_INFINITY,xa=E,oa=m["default"].QUALITY_DEFAULT,ua=Number.POSITIVE_INFINITY,ta=0,ya=null,Aa=!1,pa=!1,Ba=!1,Ca=!1,Ea=null,Fa=null,Ga=null,Ha=null,a||(ha.abort(sa,wa),ha.removeSourceBuffer(sa,wa)),wa=null}var ca=this.context,da=A["default"](ca).getInstance().log,ea=s["default"](ca).getInstance(),fa=a.metricsModel,ga=a.manifestModel,ha=a.sourceBufferController,ia=a.errHandler,ja=a.streamController,ka=a.mediaController,la=a.adapter,ma=a.textController,na=void 0,oa=void 0,pa=void 0,qa=void 0,ra=void 0,sa=void 0,ta=void 0,ua=void 0,va=void 0,wa=void 0,xa=void 0,ya=void 0,za=void 0,Aa=void 0,Ba=void 0,Ca=void 0,Da=void 0,Ea=void 0,Fa=void 0,Ga=void 0,Ha=void 0,Ia=void 0,Ja=void 0;return na={initialize:c,createBuffer:d,getType:T,getStreamProcessor:U,setStreamProcessor:V,getBuffer:W,setBuffer:X,getBufferLevel:Y,getCriticalBufferLevel:Z,setMediaSource:$,getMediaSource:_,getIsBufferingCompleted:aa,switchInitData:h,reset:ba},b(),na}Object.defineProperty(c,"__esModule",{value:!0});var f=a(71),g=d(f),h=a(73),i=d(h),j=a(66),k=d(j),l=a(56),m=d(l),n=a(64),o=d(n),p=a(62),q=d(p),r=a(7),s=d(r),t=a(11),u=d(t),v=a(98),w=d(v),x=a(8),y=d(x),z=a(6),A=d(z),B=a(104),C=d(B),D="bufferLoaded",E="bufferStalled",F=.5;e.__dashjs_factory_name="BufferController";var G=y["default"].getClassFactory(e);G.BUFFER_LOADED=D,G.BUFFER_EMPTY=E,c["default"]=G,b.exports=c["default"]},{104:104,11:11,56:56,6:6,62:62,64:64,66:66,7:7,71:71,73:73,8:8,98:98}],60:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){D=!1,u={},v={},w={},x=null,y=100,z=y/1e3,C=g["default"](q).getInstance()}function b(){null!==x&&D&&(clearInterval(x),x=null,D=!1)}function c(){r("Start Event Controller"),D||isNaN(y)||(D=!0,x=setInterval(h,y))}function d(a){if(u={},a)for(var b=0;b<a.length;b++){var c=a[b];u[c.id]=c,r("Add inline event with id "+c.id)}r("Added "+a.length+" inline events")}function e(a){for(var b=0;b<a.length;b++){var c=a[b];c.id in v?r("Repeated event with id "+c.id):(v[c.id]=c,r("Add inband event with id "+c.id))}}function f(){if(w)for(var a=C.getTime(),b=Object.keys(w),c=0;c<b.length;c++){var d=b[c],e=w[d];null!==e&&(e.duration+e.presentationTime)/e.eventStream.timescale<a&&(r("Remove Event "+d+" at time "+a),e=null,delete w[d])}}function h(){j(v),j(u),f()}function i(){var a=A.getValue(),b=a.url;a.hasOwnProperty("Location")&&(b=a.Location),r("Refresh manifest @ "+b),B.getManifestLoader().load(b)}function j(a){var b,c=C.getTime();if(a)for(var d=Object.keys(a),e=0;e<d.length;e++){var f=d[e],g=a[f];void 0!==g&&(b=g.presentationTime/g.eventStream.timescale,(0===b||c>=b&&b+z>c)&&(r("Start Event "+f+" at "+c),g.duration>0&&(w[f]=g),g.eventStream.schemeIdUri==o&&g.eventStream.value==p?i():s.trigger(g.eventStream.schemeIdUri,{event:g}),delete a[f]))}}function l(a){a&&(a.manifestModel&&(A=a.manifestModel),a.manifestUpdater&&(B=a.manifestUpdater))}function n(){b(),u=null,v=null,w=null,C=null}var o="urn:mpeg:dash:event:2012",p=1,q=this.context,r=k["default"](q).getInstance().log,s=m["default"](q).getInstance(),t=void 0,u=void 0,v=void 0,w=void 0,x=void 0,y=void 0,z=void 0,A=void 0,B=void 0,C=void 0,D=void 0;return t={initialize:a,addInlineEvents:d,addInbandEvents:e,clear:b,start:c,setConfig:l,reset:n}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(64),g=d(f),h=a(8),i=d(h),j=a(6),k=d(j),l=a(7),m=d(l);e.__dashjs_factory_name="EventController",c["default"]=i["default"].getSingletonFactory(e),b.exports=c["default"]},{6:6,64:64,7:7,8:8}],61:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){q={},m.on(p["default"].FRAGMENT_LOADING_COMPLETED,g,o)}function b(a){var b=q[a];return b||(b=j["default"](i).create({metricsModel:l["default"](i).getInstance()}),q[a]=b),b}function c(a){return a&&a.type&&a.type===f.HTTPRequest.INIT_SEGMENT_TYPE}function d(){m.off(p["default"].FRAGMENT_LOADING_COMPLETED,g,this);for(var a in q)q[a].reset();q={}}function e(a,b,c){var d=new h["default"];return d.streamId=c,d.mediaInfo=b.mediaInfo,d.segmentType=b.type,d.start=b.startTime,d.duration=b.duration,d.end=d.start+d.duration,d.bytes=a,d.index=b.index,d.quality=b.quality,d.representationId=b.representationId,d}function g(a){if(q[a.request.mediaType]===a.sender){var b=a.request,d=a.response,f=c(b),g=b.mediaInfo.streamInfo;if(!d||!g)return void k("No "+b.mediaType+" bytes to push or stream is inactive.");var h=e(d,b,g.id);m.trigger(f?p["default"].INIT_FRAGMENT_LOADED:p["default"].MEDIA_FRAGMENT_LOADED,{chunk:h,fragmentModel:a.sender})}}var i=this.context,k=t["default"](i).getInstance().log,m=n["default"](i).getInstance(),o=void 0,q=void 0;return o={getModel:b,isInitializationRequest:c,reset:d},a(),o}Object.defineProperty(c,"__esModule",{value:!0});var f=a(133),g=a(115),h=d(g),i=a(71),j=d(i),k=a(74),l=d(k),m=a(7),n=d(m),o=a(11),p=d(o),q=a(8),r=d(q),s=a(6),t=d(s);e.__dashjs_factory_name="FragmentController",c["default"]=r["default"].getClassFactory(e),b.exports=c["default"]},{11:11,115:115,133:133,6:6,7:7,71:71,74:74,8:8}],62:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){N={},E(),D()}function b(a,b){var c=k(a),e=d(a,b),f=[];return"fragmentedText"===a?void h(e[0]):(c||(c=L.getSavedMediaSettings(a),j(a,c)),void(e&&0!==e.length&&(c&&e.forEach(function(a){C(c,a)&&f.push(a)}),h(0===f.length?F(e):f.length>1?F(f):f[0]))))}function c(a){var b=a?a.type:null,c=a?a.streamInfo.id:null,d=k(b);return!(!a||!x(b)||(N[c]=N[c]||G(),N[c][b].list.indexOf(a)>=0||(N[c][b].list.push(a),d&&C(d,a)&&!e(b,a.streamInfo)&&h(a),0)))}function d(a,b){if(!a||!b)return[];var c=b.id;return N[c]&&N[c][a]?N[c][a].list:[]}function e(a,b){return!a||!b||b&&!N[b.id]?null:N[b.id][a].current}function f(a){var b=a.type,c=a.streamInfo.id;return N[c]&&N[c][b]&&y(N[c][b].current,a)}function h(a){if(a){var b=a.type,c=a.streamInfo,d=c.id,f=e(b,c);if(N[d]&&N[d][b]&&(!f||!y(a,f))){N[d][b].current=a,f&&J.trigger(g["default"].CURRENT_TRACK_CHANGED,{oldMediaInfo:f,newMediaInfo:a,switchMode:Q[b]});var h=B(a);h&&N[d][b].storeLastSettings&&(h.roles&&(h.role=h.roles[0],delete h.roles),h.accessibility&&(h.accessibility=h.accessibility[0]),h.audioChannelConfiguration&&(h.audioChannelConfiguration=h.audioChannelConfiguration[0]),L.setSavedMediaSettings(b,h))}}}function j(a,b){a&&b&&(O[a]=b)}function k(a){return a?O[a]:null}function l(a,b){var c=-1!==S.indexOf(b);return c?void(Q[a]=b):void I("track switch mode is not supported: "+b)}function n(a){return Q[a]}function p(a){var b=-1!==T.indexOf(a);return b?void(P=a):void I("track selection mode is not supported: "+a)}function w(){return P||v}function x(a){return"audio"===a||"video"===a||"text"===a||"fragmentedText"===a}function y(a,b){var c=a.id===b.id,d=a.viewpoint===b.viewpoint,e=a.lang===b.lang,f=a.roles.toString()===b.roles.toString(),g=a.accessibility.toString()===b.accessibility.toString(),h=a.audioChannelConfiguration.toString()===b.audioChannelConfiguration.toString();return c&&d&&e&&f&&g&&h}function z(a){a&&a.errHandler&&(R=a.errHandler)}function A(){a(),K.reset()}function B(a){var b={lang:a.lang,viewpoint:a.viewpoint,roles:a.roles,accessibility:a.accessibility,audioChannelConfiguration:a.audioChannelConfiguration},c=b.lang||b.viewpoint||b.role&&b.role.length>0||b.accessibility&&b.accessibility.length>0||b.audioChannelConfiguration&&b.audioChannelConfiguration.length>0;return c?b:null}function C(a,b){var c=!a.lang||a.lang===b.lang,d=!a.viewpoint||a.viewpoint===b.viewpoint,e=!a.role||!!b.roles.filter(function(b){return b===a.role})[0],f=!a.accessibility||!!b.accessibility.filter(function(b){return b===a.accessibility})[0],g=!a.audioChannelConfiguration||!!b.audioChannelConfiguration.filter(function(b){return b===a.audioChannelConfiguration})[0];return c&&d&&e&&f&&g}function D(){Q={audio:s,video:r}}function E(){O={audio:null,video:null}}function F(a){var b=w(),c=[],d=function(a){var b,c=0,d=[];return a.forEach(function(a){b=Math.max.apply(Math,a.bitrateList.map(function(a){return a.bandwidth})),b>c?(c=b,d=[a]):b===c&&d.push(a)}),d},e=function(a){var b,c=0,d=[];return a.forEach(function(a){b=a.representationCount,b>c?(c=b,d=[a]):b===c&&d.push(a)}),d};switch(b){case t:c=d(a),c.length>1&&(c=e(c));break;case u:c=e(a),c.length>1&&(c=d(a));break;default:I("track selection mode is not supported: "+b)}return c[0]}function G(){return{audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null}}}var H=this.context,I=m["default"](H).getInstance().log,J=i["default"](H).getInstance(),K=o["default"](H).getInstance(),L=q["default"](H).getInstance(),M=void 0,N=void 0,O=void 0,P=void 0,Q=void 0,R=void 0,S=[s,r],T=[t,u];return M={initialize:a,checkInitialMediaSettingsForType:b,addTrack:c,getTracksFor:d,getCurrentTrackFor:e,isCurrentTrack:f,setTrack:h,setInitialSettings:j,getInitialSettings:k,setSwitchMode:l,getSwitchMode:n,setSelectionModeForInitialTrack:p,getSelectionModeForInitialTrack:w,isMultiTrackSupportedByType:x,isTracksEqual:y,setConfig:z,reset:A}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(11),g=d(f),h=a(7),i=d(h),j=a(8),k=d(j),l=a(6),m=d(l),n=a(94),o=d(n),p=a(101),q=d(p),r="neverReplace",s="alwaysReplace",t="highestBitrate",u="widestRange",v=t;e.__dashjs_factory_name="MediaController";var w=k["default"].getSingletonFactory(e);w.TRACK_SWITCH_MODE_NEVER_REPLACE=r,w.TRACK_SWITCH_MODE_ALWAYS_REPLACE=s,w.TRACK_SELECTION_MODE_HIGHEST_BITRATE=t,w.TRACK_SELECTION_MODE_WIDEST_RANGE=u,w.DEFAULT_INIT_TRACK_SELECTION_MODE=v,c["default"]=w,b.exports=c["default"]},{101:101,11:11,6:6,7:7,8:8,94:94}],63:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){var a="WebKitMediaSource"in window,b="MediaSource"in window;return b?new MediaSource:a?new WebKitMediaSource:null}function b(a,b){var c=window.URL.createObjectURL(a);return b.setSource(c),c}function c(a){a.setSource(null)}function d(a,b){return a.duration!=b&&(a.duration=b),a.duration}function e(a){var b=a.sourceBuffers,c=b.length,d=0;if("open"===a.readyState){for(d;c>d;d++){if(b[d].updating)return;if(0===b[d].buffered.length)return}a.endOfStream()}}var f=void 0;return f={createMediaSource:a,attachMediaSource:b,detachMediaSource:c,setDuration:d,signalEndOfStream:e}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f);e.__dashjs_factory_name="MediaSourceController",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{8:8}],64:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){ka=0,la=NaN,ma=null,pa=null,ra=!1,na={},qa=k["default"](Z).getInstance()}function b(a){oa=a,ba=ja.getElement(),X(),pa=oa.manifestInfo.isDynamic,la=oa.start,_.on(o["default"].DATA_UPDATE_COMPLETED,H,this),_.on(o["default"].BYTES_APPENDED,V,this),_.on(o["default"].BUFFER_LEVEL_STATE_CHANGED,W,this),_.on(o["default"].PERIOD_SWITCH_STARTED,c,this),ra&&(ra=!1,h())}function c(a){!pa&&a.fromStreamInfo&&na[a.fromStreamInfo.id]&&delete na[a.fromStreamInfo.id]}function d(){var a=B(!0),b=pa?a-oa.start:0;return a+(oa.duration-b)-q()}function e(){return q()>0}function f(){return oa.id}function h(){if(ba){ba.autoplay=!0;var a=ba.play();a&&"undefined"!=typeof Promise&&a instanceof Promise&&a["catch"](function(a){"NotAllowedError"===a.name&&_.trigger(o["default"].PLAYBACK_NOT_ALLOWED),$("Caught pending play exception - continuing ("+a+")")})}else ra=!0}function j(){return ba?ba.paused:void 0}function l(){ba&&(ba.pause(),ba.autoplay=!1)}function n(){return ba?ba.seeking:void 0}function p(a){ja&&($("Requesting seek to time: "+a),ja.setCurrentTime(a))}function q(){return ba?ba.currentTime:void 0}function r(){return ba?ba.playbackRate:void 0}function t(){return ba?ba.played:void 0}function u(){return ba?ba.ended:void 0}function v(){return pa}function w(a){la=a}function x(){return la}function y(a,b){var c=ha.getMpd(ga.getValue()),d=void 0,e=10;d=qa.getUseSuggestedPresentationDelay()&&c.hasOwnProperty("suggestedPresentationDelay")?c.suggestedPresentationDelay:qa.getLiveDelay()?qa.getLiveDelay():isNaN(a)?2*oa.manifestInfo.minBufferTime:a*qa.getLiveDelayFragmentCount();var f=Math.max(b-e,b/2);return Math.min(d,f)}function z(){ja&&ba&&(_.off(o["default"].DATA_UPDATE_COMPLETED,H,this),_.off(o["default"].BUFFER_LEVEL_STATE_CHANGED,W,this),_.off(o["default"].BYTES_APPENDED,V,this),E(),Y()),ja=null,oa=null,ba=null,pa=null,a()}function A(a){a&&(a.streamController&&(ca=a.streamController),a.timelineConverter&&(da=a.timelineConverter),a.metricsModel&&(ea=a.metricsModel),a.dashMetrics&&(fa=a.dashMetrics),a.manifestModel&&(ga=a.manifestModel),a.dashManifestModel&&(ha=a.dashManifestModel),a.adapter&&(ia=a.adapter),a.videoModel&&(ja=a.videoModel))}function B(a){var b=void 0,c=i["default"](Z).getInstance().getURIFragmentData(),d=parseInt(c.s,10),e=parseInt(c.t,10),f=NaN;if(a||(f=isNaN(d)?e:d),pa)!isNaN(f)&&f>1262304e3&&(b=f-oa.manifestInfo.availableFrom.getTime()/1e3,(b>la||b<la-oa.manifestInfo.DVRWindowSize)&&(b=null)),b=b||la;else if(!isNaN(f)&&f<Math.max(oa.manifestInfo.duration,oa.duration)&&f>=0)b=f;else{var g=na[oa.id];void 0===g&&(g=ca.getActiveStreamCommonEarliestTime()),b=Math.max(g,oa.start)}return b}function C(a){var b,c=ea.getReadOnlyMetricsFor("video")||ea.getReadOnlyMetricsFor("audio"),d=fa.getCurrentDVRInfo(c),e=d?d.range:null;if(!e)return NaN;if(a>e.end)b=Math.max(e.end-2*oa.manifestInfo.minBufferTime,e.start);else{if(!(a<e.start))return a;b=e.start}return b}function D(){if(null===ma){var a=function(){U()};ma=setInterval(a,qa.getWallclockTimeUpdateInterval())}}function E(){clearInterval(ma),ma=null}function F(){var a=B(!1);a>0&&(p(a),$("Starting playback at offset: "+a))}function G(){if(!j()&&pa&&0!==ba.readyState){var a=q(),b=C(a),c=!isNaN(b)&&b!==a;c&&p(b)}}function H(a){if(!a.error){var b=ia.convertDataToTrack(ga.getValue(),a.currentRepresentation),c=b.mediaInfo.streamInfo;oa.id===c.id&&(oa=c,G())}}function I(){_.trigger(o["default"].CAN_PLAY)}function J(){$("Native video element event: play"),G(),D(),_.trigger(o["default"].PLAYBACK_STARTED,{startTime:q()})}function K(){$("Native video element event: playing"),_.trigger(o["default"].PLAYBACK_PLAYING,{playingTime:q()})}function L(){$("Native video element event: pause"),_.trigger(o["default"].PLAYBACK_PAUSED,{ended:u()})}function M(){var a=q();$("Seeking to: "+a),D(),_.trigger(o["default"].PLAYBACK_SEEKING,{seekTime:a})}function N(){$("Native video element event: seeked"),_.trigger(o["default"].PLAYBACK_SEEKED)}function O(){var a=q();a!==ka&&(ka=a,_.trigger(o["default"].PLAYBACK_TIME_UPDATED,{timeToEnd:d(),time:a}))}function P(){_.trigger(o["default"].PLAYBACK_PROGRESS)}function Q(){var a=r();$("Native video element event: ratechange: ",a),_.trigger(o["default"].PLAYBACK_RATE_CHANGED,{playbackRate:a})}function R(){$("Native video element event: loadedmetadata"),(!pa&&oa.isFirst||da.isTimeSyncCompleted())&&F(),_.trigger(o["default"].PLAYBACK_METADATA_LOADED),D()}function S(){$("Native video element event: ended"),l(),E(),_.trigger(o["default"].PLAYBACK_ENDED)}function T(a){var b=a.target||a.srcElement;_.trigger(o["default"].PLAYBACK_ERROR,{error:b.error})}function U(){_.trigger(o["default"].WALLCLOCK_TIME_UPDATED,{isDynamic:pa,time:new Date})}function V(a){var b=a.bufferedRanges;if(b&&b.length){var c=Math.max(b.start(0),oa.start),d=void 0===na[oa.id]?c:Math.max(na[oa.id],c);d!==na[oa.id]&&(!pa&&B(!0)<d&&q()<d&&p(d),na[oa.id]=d)}}function W(a){a.streamInfo.id===oa.id&&ja.setStallState(a.mediaType,a.state===g["default"].BUFFER_EMPTY)}function X(){ba.addEventListener("canplay",I),ba.addEventListener("play",J),ba.addEventListener("playing",K),ba.addEventListener("pause",L),ba.addEventListener("error",T),ba.addEventListener("seeking",M),ba.addEventListener("seeked",N),ba.addEventListener("timeupdate",O),ba.addEventListener("progress",P),ba.addEventListener("ratechange",Q),ba.addEventListener("loadedmetadata",R),ba.addEventListener("ended",S)}function Y(){ba.removeEventListener("canplay",I),ba.removeEventListener("play",J),ba.removeEventListener("playing",K),ba.removeEventListener("pause",L),ba.removeEventListener("error",T),ba.removeEventListener("seeking",M),ba.removeEventListener("seeked",N),ba.removeEventListener("timeupdate",O),ba.removeEventListener("progress",P),ba.removeEventListener("ratechange",Q),ba.removeEventListener("loadedmetadata",R),ba.removeEventListener("ended",S)}var Z=this.context,$=s["default"](Z).getInstance().log,_=m["default"](Z).getInstance(),aa=void 0,ba=void 0,ca=void 0,da=void 0,ea=void 0,fa=void 0,ga=void 0,ha=void 0,ia=void 0,ja=void 0,ka=void 0,la=void 0,ma=void 0,na=void 0,oa=void 0,pa=void 0,qa=void 0,ra=void 0;return aa={initialize:b,setConfig:A,getStreamStartTime:B,getTimeToStreamEnd:d,isPlaybackStarted:e,getStreamId:f,getTime:q,getPlaybackRate:r,getPlayedRanges:t,getEnded:u,getIsDynamic:v,setLiveStartTime:w,getLiveStartTime:x,computeLiveDelay:y,play:h,isPaused:j,pause:l,isSeeking:n,seek:p,reset:z},a(),aa}Object.defineProperty(c,"__esModule",{value:!0});var f=a(59),g=d(f),h=a(75),i=d(h),j=a(73),k=d(j),l=a(7),m=d(l),n=a(11),o=d(n),p=a(8),q=d(p),r=a(6),s=d(r);e.__dashjs_factory_name="PlaybackController",c["default"]=q["default"].getSingletonFactory(e),b.exports=c["default"]},{11:11,59:59,6:6,7:7,73:73,75:75,8:8}],65:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){ta=!0,Oa=NaN,Ma=NaN,Na={},Pa=[],ua=!0,va=null,wa=null,xa=!0,ya=!1,za=0,Ba=NaN}function c(a,b){pa=a,Fa=b,Ca=h["default"](ea).getInstance(),Da=n["default"](ea).getInstance(),Ea=j["default"](ea).getInstance(),Ga=H["default"](ea).getInstance(),Ha=Fa.getFragmentController(),Ia=Fa.getBufferController(),qa=Ha.getModel(pa),ra=Fa.isDynamic(),La=na.getScheduleWhilePaused(),Ja=p["default"](ea).create({dashMetrics:ka,metricsModel:ha,textController:t["default"](ea).getInstance()}),Ka=r["default"](ea).create({adapter:ja,sourceBufferController:x["default"](ea).getInstance(),textController:t["default"](ea).getInstance()}),la.getIsTextTrack(pa)&&ga.on(D["default"].TIMED_TEXT_REQUESTED,Q,this),ga.on(D["default"].QUALITY_CHANGE_REQUESTED,u,this),ga.on(D["default"].DATA_UPDATE_STARTED,L,this),ga.on(D["default"].DATA_UPDATE_COMPLETED,y,this),ga.on(D["default"].FRAGMENT_LOADING_COMPLETED,F,this),ga.on(D["default"].STREAM_COMPLETED,E,this),ga.on(D["default"].STREAM_INITIALIZED,A,this),ga.on(D["default"].BUFFER_LEVEL_STATE_CHANGED,N,this),ga.on(D["default"].BUFFER_CLEARED,M,this),ga.on(D["default"].BYTES_APPENDED,I,this),ga.on(D["default"].INIT_REQUESTED,o,this),ga.on(D["default"].QUOTA_EXCEEDED,O,this),ga.on(D["default"].PLAYBACK_SEEKING,S,this),ga.on(D["default"].PLAYBACK_STARTED,R,this),ga.on(D["default"].PLAYBACK_RATE_CHANGED,T,this),ga.on(D["default"].PLAYBACK_TIME_UPDATED,G,this),ga.on(D["default"].URL_RESOLUTION_FAILED,P,this),ga.on(D["default"].FRAGMENT_LOADING_ABANDONED,K,this)}function d(){sa&&!Ia.getIsBufferingCompleted()&&(ca(),ua=!1,ta&&(ta=!1),m(0),fa("Schedule controller starting for "+pa))}function e(){ua||(ua=!0,clearTimeout(Aa),fa("Schedule controller stopping for "+pa))}function g(a,b){Na[b]=Na[b]||{};var c=Ea.getTopQualityIndexFor(a,b);return Na[b][a]!=c&&(fa("Top quality"+a+" index has changed from "+Na[b][a]+" to "+c),Na[b][a]=c,!0)}function i(){if(!(ua||ya||!Ia||Ca.isPaused()&&!La)){k();var a=Pa.length>0;if(a||g(sa.mediaInfo.type,Fa.getStreamInfo().id)||Ja.execute(Fa,pa,Ga.isVideoTrackPresent())){var b=function(){if(sa.quality!==Oa)Oa=sa.quality,Ia.switchInitData(Fa.getStreamInfo().id,sa.id);else{var a=Pa.shift();if(Ha.isInitializationRequest(a))Ia.switchInitData(a.mediaInfo.streamInfo.id,a.representationId);else{var b=Ka.execute(Fa,a);b?qa.executeRequest(b):(ya=!1,m(500))}}};ya=!0,a?b():(Ea.getPlaybackQuality(Fa),b())}else m(500)}}function k(){var a=1.5*sa.fragmentDuration,b=qa.getRequests({state:v["default"].FRAGMENT_MODEL_EXECUTED,time:Ca.getTime()+a,threshold:0})[0];b&&-1===Pa.indexOf(b)&&!la.getIsTextTrack(pa)&&(!Da.isCurrentTrack(b.mediaInfo)||na.getFastSwitchEnabled()&&b.quality<sa.quality&&Ia.getBufferLevel()>=a&&Ea.getAbandonmentStateFor(pa)!==j["default"].ABANDON_LOAD?(s(b),fa("Reloading outdated fragment at index: ",b.index)):b.quality>sa.quality&&V(Ca.getTime()+Ia.getBufferLevel()))}function m(a){clearTimeout(Aa),Aa=setTimeout(i,a)}function o(a){a.sender&&a.sender.getStreamProcessor()===Fa&&q(sa.quality)}function q(a){Oa=a;var b=ja.getInitRequest(Fa,a);b&&(ya=!0,qa.executeRequest(b))}function s(a){Pa.push(a)}function u(a){if(pa===a.mediaType&&Fa.getStreamInfo().id===a.streamInfo.id){if(sa=Fa.getRepresentationInfoForQuality(a.newQuality),null===sa||void 0===sa)throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");ba(new Date,f.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),ca()}}function w(a){if(Ca){var b=qa.getRequests({state:v["default"].FRAGMENT_MODEL_EXECUTED,time:Ca.getTime(),threshold:0})[0];b&&Ca.getTime()>=b.startTime&&(b.quality!==Ma&&a&&ga.trigger(D["default"].QUALITY_CHANGE_RENDERED,{mediaType:pa,oldQuality:Ma,newQuality:b.quality}),Ma=b.quality)}}function y(a){a.error||a.sender.getStreamProcessor()!==Fa||(sa=ja.convertDataToTrack(ia.getValue(),a.currentRepresentation))}function A(a){a.error||Fa.getStreamInfo().id!==a.streamInfo.id||(sa=Fa.getCurrentRepresentationInfo(),ra&&ta&&(ma.setTimeSyncCompleted(!0),C()),ua&&d())}function C(){var a=z["default"](ea).getInstance().getLiveEdge(),b=sa.mediaInfo.streamInfo.manifestInfo.DVRWindowSize/2,c=a-Ca.computeLiveDelay(sa.fragmentDuration,b),d=ja.getFragmentRequestForTime(Fa,sa,c,{ignoreIsFinished:!0});Ba=Ca.getLiveStartTime(),(isNaN(Ba)||d.startTime>Ba)&&(Ca.setLiveStartTime(d.startTime),Ba=d.startTime);var e=ka.getCurrentManifestUpdate(ha.getMetricsFor("stream"));ha.updateManifestUpdateInfo(e,{currentTime:Ba,presentationStartTime:a,latency:a-Ba,clientTimeOffset:ma.getClientTimeOffset()})}function E(a){a.fragmentModel===qa&&(e(),ya=!1,fa("Stream is complete"))}function F(a){a.sender===qa&&(la.getIsTextTrack(pa)&&(ya=!1),a.error&&a.request.serviceLocation&&!ua&&(s(a.request),ya=!1,m(0)))}function G(){w(!0)}function I(a){a.sender.getStreamProcessor()===Fa&&(ya=!1,m(0))}function K(a){a.streamProcessor===Fa&&(s(a.request),ya=!1,m(0))}function L(a){a.sender.getStreamProcessor()===Fa&&e()}function M(a){a.sender.getStreamProcessor()===Fa&&(qa.removeExecutedRequestsBeforeTime(a.to),a.hasEnoughSpaceToAppend&&ua&&d())}function N(a){a.sender.getStreamProcessor()!==Fa||a.state!==l["default"].BUFFER_EMPTY||Ca.isSeeking()||(fa("Buffer is empty! Stalling!"),ba(new Date,f.PlayListTrace.REBUFFERING_REASON))}function O(a){a.sender.getStreamProcessor()===Fa&&e()}function P(){qa.abortRequests(),e()}function Q(a){a.sender.getStreamProcessor()===Fa&&q(a.index)}function R(){!ua&&La||d()}function S(a){Ba=a.seekTime,X(0),ua&&d();var b=ka.getCurrentManifestUpdate(ha.getMetricsFor("stream")),c=sa.DVRWindow?sa.DVRWindow.end-Ca.getTime():NaN;ha.updateManifestUpdateInfo(b,{latency:c})}function T(a){wa&&(wa.playbackspeed=a.playbackRate.toString())}function U(){return Ba}function V(a){Ba=a}function W(){return qa}function X(a){za=a}function Y(){return za}function Z(){return Fa}function $(){return Ja.getBufferTarget(Fa,pa,Ga.isVideoTrackPresent())}function _(a){va=a}function aa(a,b){ba(a,b),va=null}function ba(a,b){if(va&&xa===!1){var c=wa.start,d=a.getTime()-c.getTime();wa.duration=d,wa.stopreason=b,va.trace.push(wa),xa=!0}}function ca(){va&&xa===!0&&sa&&(xa=!1,wa=new f.PlayListTrace,wa.representationid=sa.id,wa.start=new Date,wa.mstart=1e3*Ca.getTime(),wa.playbackspeed=Ca.getPlaybackRate().toString())}function da(){ga.off(D["default"].DATA_UPDATE_STARTED,L,this),ga.off(D["default"].DATA_UPDATE_COMPLETED,y,this),ga.off(D["default"].BUFFER_LEVEL_STATE_CHANGED,N,this),ga.off(D["default"].QUALITY_CHANGE_REQUESTED,u,this),ga.off(D["default"].FRAGMENT_LOADING_COMPLETED,F,this),ga.off(D["default"].STREAM_COMPLETED,E,this),ga.off(D["default"].STREAM_INITIALIZED,A,this),ga.off(D["default"].QUOTA_EXCEEDED,O,this),ga.off(D["default"].BYTES_APPENDED,I,this),ga.off(D["default"].BUFFER_CLEARED,M,this),ga.off(D["default"].INIT_REQUESTED,o,this),ga.off(D["default"].PLAYBACK_RATE_CHANGED,T,this),ga.off(D["default"].PLAYBACK_SEEKING,S,this),ga.off(D["default"].PLAYBACK_STARTED,R,this),ga.off(D["default"].PLAYBACK_TIME_UPDATED,G,this),ga.off(D["default"].URL_RESOLUTION_FAILED,P,this),ga.off(D["default"].FRAGMENT_LOADING_ABANDONED,K,this),la.getIsTextTrack(pa)&&ga.off(D["default"].TIMED_TEXT_REQUESTED,Q,this),e(),w(!1),ya=!1,za=0,Ba=NaN,Ca=null,va=null}var ea=this.context,fa=J["default"](ea).getInstance().log,ga=B["default"](ea).getInstance(),ha=a.metricsModel,ia=a.manifestModel,ja=a.adapter,ka=a.dashMetrics,la=a.dashManifestModel,ma=a.timelineConverter,na=a.mediaPlayerModel,oa=void 0,pa=void 0,qa=void 0,ra=void 0,sa=void 0,ta=void 0,ua=void 0,va=void 0,wa=void 0,xa=void 0,ya=void 0,za=void 0,Aa=void 0,Ba=void 0,Ca=void 0,Da=void 0,Ea=void 0,Fa=void 0,Ga=void 0,Ha=void 0,Ia=void 0,Ja=void 0,Ka=void 0,La=void 0,Ma=void 0,Na=void 0,Oa=void 0,Pa=void 0;return oa={initialize:c,getStreamProcessor:Z,getSeekTarget:U,setSeekTarget:V,getFragmentModel:W,setTimeToLoadDelay:X,getTimeToLoadDelay:Y,replaceRequest:s,start:d,stop:e,reset:da,setPlayList:_,getBufferTarget:$,finalisePlayList:aa},b(),oa}Object.defineProperty(c,"__esModule",{value:!0});var f=a(135),g=a(64),h=d(g),i=a(56),j=d(i),k=a(59),l=d(k),m=a(62),n=d(m),o=a(89),p=d(o),q=a(90),r=d(q),s=a(94),t=d(s),u=a(71),v=d(u),w=a(66),x=d(w),y=a(106),z=d(y),A=a(7),B=d(A),C=a(11),D=d(C),E=a(8),F=d(E),G=a(67),H=d(G),I=a(6),J=d(I);e.__dashjs_factory_name="ScheduleController",c["default"]=F["default"].getClassFactory(e),b.exports=c["default"]},{106:106,11:11,135:135,56:56,59:59,6:6,62:62,64:64,66:66,67:67,7:7,71:71,8:8,89:89,90:90,94:94}],66:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b){var c=b.codec,d=null;try{if(c.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new i["default"]("not really supported");d=a.addSourceBuffer(c)}catch(e){if(!b.isText&&-1===c.indexOf('codecs="stpp')&&-1===c.indexOf('codecs="wvtt'))throw e;var f=g["default"](q).getInstance();d=f.getTextSourceBuffer()}return d}function b(a,b){try{a.removeSourceBuffer(b)}catch(c){}}function c(a,b,c){var d,e,f=null,g=0,h=0,i=null,j=null,k=0,l=c||.15;try{
f=a.buffered}catch(m){return null}if(null!==f&&void 0!==f){for(e=0,d=f.length;d>e;e++)if(g=f.start(e),h=f.end(e),null===i)k=Math.abs(g-b),b>=g&&h>b?(i=g,j=h):l>=k&&(i=g,j=h);else{if(k=g-j,!(l>=k))break;j=h}if(null!==i)return{start:i,end:j}}return null}function d(a){var b=null;try{return b=a.buffered}catch(c){return null}}function e(a){var b,c,e=d(a),f=0;if(!e)return f;for(c=0,b=e.length;b>c;c++)f+=e.end(c)-e.start(c);return f}function f(a,b,d){var e,f;return e=c(a,b,d),f=null===e?0:e.end-b}function h(a,b){if(!b)return null;var c,e,f,g,h,i,j,k,l,m=d(b);if(!m)return null;for(var n=0,o=m.length;o>n;n++){if(k=a.length>n,h=k?{start:a.start(n),end:a.end(n)}:null,c=m.start(n),e=m.end(n),!h)return l={start:c,end:e};if(f=h.start===c,g=h.end===e,!f||!g){if(f)l={start:h.end,end:e};else{if(!g)return l={start:c,end:e};l={start:c,end:h.start}}return i=a.length>n+1?{start:a.start(n+1),end:a.end(n+1)}:null,j=o>n+1?{start:m.start(n+1),end:m.end(n+1)}:null,!i||j&&j.start===i.start&&j.end===i.end||(l.end=i.start),l}}return null}function j(a,b){var c=b.bytes,d="append"in a?"append":"appendBuffer"in a?"appendBuffer":null,e="Object"===Object.prototype.toString.call(a).slice(8,-1);d&&p(a,function(){try{e?a[d](c,b):a[d](c),p(a,function(){r.trigger(m["default"].SOURCEBUFFER_APPEND_COMPLETED,{buffer:a,bytes:c})})}catch(f){r.trigger(m["default"].SOURCEBUFFER_APPEND_COMPLETED,{buffer:a,bytes:c,error:new i["default"](f.code,f.message,null)})}})}function l(a,b,c,d){p(a,function(){try{b>=0&&c>b&&"ended"!==d.readyState&&a.remove(b,c),p(a,function(){r.trigger(m["default"].SOURCEBUFFER_REMOVE_COMPLETED,{buffer:a,from:b,to:c})})}catch(e){r.trigger(m["default"].SOURCEBUFFER_REMOVE_COMPLETED,{buffer:a,from:b,to:c,error:new i["default"](e.code,e.message,null)})}})}function n(a,b){try{"open"===a.readyState?b.abort():b.setTextTrack&&"ended"===a.readyState&&b.abort()}catch(c){}}function o(a){a&&a.dashManifestModel&&(t=a.dashManifestModel)}function p(a,b){var c,d=50,e=function(){a.updating||(clearInterval(c),b())},f=function h(){a.updating||(a.removeEventListener("updateend",h,!1),b())};if(!a.updating)return void b();if("function"==typeof a.addEventListener)try{a.addEventListener("updateend",f,!1)}catch(g){c=setInterval(e,d)}else c=setInterval(e,d)}var q=this.context,r=k["default"](q).getInstance(),s=void 0,t=void 0;return s={append:j,remove:l,abort:n,createSourceBuffer:a,removeSourceBuffer:b,getBufferRange:c,getAllRanges:d,getTotalBufferedTime:e,getBufferLength:f,getRangeDifference:h,setConfig:o}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(94),g=d(f),h=a(116),i=d(h),j=a(7),k=d(j),l=a(11),m=d(l),n=a(8),o=d(n),p=22;e.__dashjs_factory_name="SourceBufferController";var q=o["default"].getSingletonFactory(e);q.QUOTA_EXCEEDED_ERROR_CODE=p,c["default"]=q,b.exports=c["default"]},{11:11,116:116,7:7,8:8,94:94}],67:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){ma=null,ka=[],wa=u["default"](T).getInstance(),oa=!0,pa=!1,qa=!1,xa=!1,ya=!0,za=null,ra=!1,sa=!1}function b(a,b){oa=a,na=b,ja.initialize(),ha=B["default"](T).getInstance(),Y=k["default"](T).getInstance(),Y.setConfig({manifestModel:$,dashManifestModel:_}),Y.initialize(Z),ua=s["default"](T).getInstance(),va=g["default"](T).getInstance(),va.setConfig({streamController:W,timelineConverter:ja,metricsModel:ba,dashMetrics:ca,manifestModel:$,dashManifestModel:_,adapter:aa,videoModel:ua}),V.on(o["default"].TIME_SYNCHRONIZATION_COMPLETED,D,this),V.on(o["default"].PLAYBACK_SEEKING,d,this),V.on(o["default"].PLAYBACK_TIME_UPDATED,c,this),V.on(o["default"].PLAYBACK_ENDED,p,this),V.on(o["default"].PLAYBACK_ERROR,J,this),V.on(o["default"].PLAYBACK_STARTED,e,this),V.on(o["default"].PLAYBACK_PAUSED,f,this),V.on(o["default"].MANIFEST_UPDATED,E,this),V.on(o["default"].STREAM_BUFFERING_COMPLETED,h,this)}function c(a){if(F()){var b=ua.getPlaybackQuality();b&&ba.addDroppedFrames("video",b)}va.isSeeking()||a.timeToEnd<=S&&p()}function d(a){var b=j(a.seekTime);b&&b!==la?(H(x.PlayListTrace.END_OF_PERIOD_STOP_REASON),t(la,b,a.seekTime)):H(x.PlayListTrace.USER_REQUEST_STOP_REASON),I(x.PlayList.SEEK_START_REASON)}function e(){ya?(ya=!1,I(x.PlayList.INITIAL_PLAYOUT_START_REASON)):xa&&(xa=!1,I(x.PlayList.RESUME_FROM_PAUSE_START_REASON))}function f(a){a.ended||(xa=!0,H(x.PlayListTrace.USER_REQUEST_STOP_REASON))}function h(){var a=L().isLast;ta&&a&&ea.signalEndOfStream(ta)}function j(a){var b=0,c=null,d=ka.length;d>0&&(b+=ka[0].getStartTime());for(var e=0;d>e;e++)if(c=ka[e],b+=c.getDuration(),b>a)return c;return null}function l(a,b){for(var c=null,d=0,e=0,f=null,g=ka.length,h=0;g>h;h++){if(c=ka[h],e=c.getStartTime(),f=c.getDuration(),Number.isFinite(e)&&(d=e),c.getId()===b)return a-d;Number.isFinite(f)&&(d+=f)}return null}function n(){var a=[];return la.getProcessors().forEach(function(b){a.push(b.getIndexHandler().getEarliestTime())}),Math.min.apply(Math,a)}function p(){var a=r();a&&t(la,a,NaN),H(a?x.PlayListTrace.END_OF_PERIOD_STOP_REASON:x.PlayListTrace.END_OF_CONTENT_STOP_REASON)}function r(){if(la){var a=function(){var a=la.getStreamInfo().start,b=la.getStreamInfo().duration;return{v:ka.filter(function(c){return c.getStreamInfo().start===a+b})[0]}}();if("object"==typeof a)return a.v}}function t(a,b,c){!pa&&b&&a!==b&&(pa=!0,V.trigger(o["default"].PERIOD_SWITCH_STARTED,{fromStreamInfo:a?a.getStreamInfo():null,toStreamInfo:b.getStreamInfo()}),a&&a.deactivate(),la=b,va.initialize(la.getStreamInfo()),v(c))}function v(a){function b(){U("MediaSource is open!"),window.URL.revokeObjectURL(c),ta.removeEventListener("sourceopen",b),ta.removeEventListener("webkitsourceopen",b),y(),w(a)}var c=void 0;ta?ea.detachMediaSource(ua):ta=ea.createMediaSource(),ta.addEventListener("sourceopen",b,!1),ta.addEventListener("webkitsourceopen",b,!1),c=ea.attachMediaSource(ta,ua),U("MediaSource attached to element.  Waiting on open...")}function w(a){la.activate(ta),ya?Aa=G():isNaN(a)?!function(){var a=va.getStreamStartTime(!0);la.getProcessors().forEach(function(b){aa.setIndexHandlerTime(b,a)}),va.seek(a)}():va.seek(a),la.startEventController(),!oa&&ya||va.play(),pa=!1,V.trigger(o["default"].PERIOD_SWITCH_COMPLETED,{toStreamInfo:la.getStreamInfo()})}function y(){var a=la.getStreamInfo().manifestInfo.duration,b=ea.setDuration(ta,a);U("Duration successfully set to: "+b)}function A(a){for(var b=0,c=ka.length;c>b;b++)if(ka[b].getId()===a.id)return ka[b];return null}function C(a){try{var b=aa.getStreamsInfo(a);if(0===b.length)throw new Error("There are no streams");var c=ca.getCurrentManifestUpdate(ba.getMetricsFor("stream"));ba.updateManifestUpdateInfo(c,{currentTime:va.getTime(),buffered:ua.getElement().buffered,presentationStartTime:b[0].start,clientTimeOffset:ja.getClientTimeOffset()});for(var d=0,e=b.length;e>d;d++){var f=b[d],g=A(f);g?g.updateData(f):(g=i["default"](T).create({manifestModel:$,manifestUpdater:Y,adapter:aa,timelineConverter:ja,capabilities:X,errHandler:ia,baseURLController:ga}),ka.push(g),g.initialize(f,ma)),ba.addManifestUpdateStreamInfo(c,f.id,f.index,f.start,f.duration)}la||t(null,ka[0],NaN),V.trigger(o["default"].STREAMS_COMPOSED)}catch(h){ia.manifestError(h.message,"nostreamscomposed",a),sa=!0,R()}}function D(){var a=$.getValue();ma&&(V.trigger(o["default"].PROTECTION_CREATED,{controller:ma,manifest:a}),ma.setMediaElement(ua.getElement()),na&&ma.setProtectionData(na)),C(a)}function E(a){if(a.error)sa=!0,R();else{var b,c,d=a.manifest,e=aa.getStreamsInfo(d)[0],f=aa.getMediaInfoForType(d,e,"video")||aa.getMediaInfoForType(d,e,"audio");f&&(b=aa.getDataForMedia(f),c=_.getRepresentationsForAdaptation(d,b)[0].useCalculatedLiveEdgeTime,c&&(U("SegmentTimeline detected using calculated Live Edge Time"),wa.setUseManifestDateHeaderTimeSource(!1)));var g=_.getUTCTimingSources(a.manifest),h=!_.getIsDynamic(d)||c?g:g.concat(wa.getUTCTimingSources()),i=q["default"](T).getInstance().isManifestHTTPS();h.forEach(function(a){a.value.replace(/.*?:\/\//g,"")===u["default"].DEFAULT_UTC_TIMING_SOURCE.value.replace(/.*?:\/\//g,"")&&(a.value=a.value.replace(i?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),i?"https://":"http://"),U("Matching default timing source protocol to manifest protocol: ",a.value))}),ga.initialize(d),fa.setConfig({metricsModel:ba,dashMetrics:ca}),fa.initialize(h,wa.getUseManifestDateHeaderTimeSource())}}function F(){return void 0===Aa&&(Aa=G()),Aa}function G(){var a=!1;return la.getProcessors().forEach(function(b){"video"===b.getMediaInfo().type&&(a=!0)}),a}function H(a,b){b=b||new Date,za&&(la&&la.getProcessors().forEach(function(c){var d=c.getScheduleController();d&&d.finalisePlayList(b,a)}),ba.addPlayList(za),za=null)}function I(a){za=new x.PlayList,za.start=new Date,za.mstart=1e3*va.getTime(),za.starttype=a,la&&la.getProcessors().forEach(function(a){var b=a.getScheduleController();b&&b.setPlayList(za)})}function J(a){if(a.error){var b="";switch(a.error.code){case 1:b="MEDIA_ERR_ABORTED";break;case 2:b="MEDIA_ERR_NETWORK";break;case 3:b="MEDIA_ERR_DECODE";break;case 4:b="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:b="MEDIA_ERR_ENCRYPTED";break;default:b="UNKNOWN"}ra=!0,a.error.message&&(b+=" ("+a.error.message+")"),a.error.msExtendedCode&&(b+=" (0x"+(a.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),U("Video Element Error: "+b),a.error&&U(a.error),ia.mediaSourceError(b),R()}}function K(){return oa}function L(){return la?la.getStreamInfo():null}function M(a){return la.getId()===a.id}function N(a){return ka.filter(function(b){return b.getId()===a})[0]}function O(a){Z.load(a)}function P(a){Y.setManifest(a)}function Q(a){a&&(a.capabilities&&(X=a.capabilities),a.manifestLoader&&(Z=a.manifestLoader),a.manifestModel&&($=a.manifestModel),a.dashManifestModel&&(_=a.dashManifestModel),a.protectionController&&(ma=a.protectionController),a.adapter&&(aa=a.adapter),a.metricsModel&&(ba=a.metricsModel),a.dashMetrics&&(ca=a.dashMetrics),a.liveEdgeFinder&&(da=a.liveEdgeFinder),a.mediaSourceController&&(ea=a.mediaSourceController),a.timeSyncController&&(fa=a.timeSyncController),a.baseURLController&&(ga=a.baseURLController),a.errHandler&&(ia=a.errHandler),a.timelineConverter&&(ja=a.timelineConverter))}function R(){fa.reset(),H(ra||sa?x.PlayListTrace.FAILURE_STOP_REASON:x.PlayListTrace.USER_REQUEST_STOP_REASON);for(var a=0,b=ka.length;b>a;a++){var g=ka[a];g.reset(ra)}ka=[],V.off(o["default"].PLAYBACK_TIME_UPDATED,c,this),V.off(o["default"].PLAYBACK_SEEKING,d,this),V.off(o["default"].PLAYBACK_ERROR,J,this),V.off(o["default"].PLAYBACK_STARTED,e,this),V.off(o["default"].PLAYBACK_PAUSED,f,this),V.off(o["default"].PLAYBACK_ENDED,p,this),V.off(o["default"].MANIFEST_UPDATED,E,this),V.off(o["default"].STREAM_BUFFERING_COMPLETED,h,this),ga.reset(),Y.reset(),ba.clearAllCurrentMetrics(),$.setValue(null),Z.reset(),ja.reset(),da.reset(),aa.reset(),ha.reset(),pa=!1,qa=!1,la=null,ra=!1,sa=!1,Aa=void 0,ya=!0,xa=!1,ta&&(ea.detachMediaSource(ua),ta=null),ua=null,ma&&(ma.setMediaElement(null),ma=null,na=null,$.getValue()&&V.trigger(o["default"].PROTECTION_DESTROYED,{data:$.getValue().url})),V.trigger(o["default"].STREAM_TEARDOWN_COMPLETE)}var S=.1,T=this.context,U=z["default"](T).getInstance().log,V=m["default"](T).getInstance(),W=void 0,X=void 0,Y=void 0,Z=void 0,$=void 0,_=void 0,aa=void 0,ba=void 0,ca=void 0,da=void 0,ea=void 0,fa=void 0,ga=void 0,ha=void 0,ia=void 0,ja=void 0,ka=void 0,la=void 0,ma=void 0,na=void 0,oa=void 0,pa=void 0,qa=void 0,ra=void 0,sa=void 0,ta=void 0,ua=void 0,va=void 0,wa=void 0,xa=void 0,ya=void 0,za=void 0,Aa=void 0;return W={initialize:b,getAutoPlay:K,getActiveStreamInfo:L,isStreamActive:M,isVideoTrackPresent:F,getStreamById:N,getTimeRelativeToStreamId:l,load:O,loadWithManifest:P,getActiveStreamCommonEarliestTime:n,setConfig:Q,reset:R},a(),W}Object.defineProperty(c,"__esModule",{value:!0});var f=a(64),g=d(f),h=a(52),i=d(h),j=a(49),k=d(j),l=a(7),m=d(l),n=a(11),o=d(n),p=a(75),q=d(p),r=a(76),s=d(r),t=a(73),u=d(t),v=a(8),w=d(v),x=a(135),y=a(6),z=d(y),A=a(104),B=d(A);e.__dashjs_factory_name="StreamController",c["default"]=w["default"].getSingletonFactory(e),b.exports=c["default"]},{104:104,11:11,135:135,49:49,52:52,6:6,64:64,7:7,73:73,75:75,76:76,8:8}],68:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b){H=b,E=0,F=!1,G=!1,I={"urn:mpeg:dash:utc:http-head:2014":v,"urn:mpeg:dash:utc:http-xsdate:2014":u.bind(null,m),"urn:mpeg:dash:utc:http-iso:2014":u.bind(null,n),"urn:mpeg:dash:utc:direct:2014":t,"urn:mpeg:dash:utc:http-head:2012":v,"urn:mpeg:dash:utc:http-xsdate:2012":u.bind(null,m),"urn:mpeg:dash:utc:http-iso:2012":u.bind(null,n),"urn:mpeg:dash:utc:direct:2012":t,"urn:mpeg:dash:utc:http-ntp:2014":s,"urn:mpeg:dash:utc:ntp:2014":s,"urn:mpeg:dash:utc:sntp:2014":s},e()||(y(a),f(!0))}function b(a){a&&(a.metricsModel&&(J=a.metricsModel),a.dashMetrics&&(K=a.dashMetrics))}function c(){return j()}function d(a){F=a}function e(){return F}function f(a){G=a}function h(a){E=a}function j(){return E}function l(a){var b,c,d=60,e=60,f=1e3,g=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/,h=g.exec(a);return b=Date.UTC(parseInt(h[1],10),parseInt(h[2],10)-1,parseInt(h[3],10),parseInt(h[4],10),parseInt(h[5],10),h[6]&&(parseInt(h[6],10)||0),h[7]&&parseFloat(h[7])*f||0),h[9]&&h[10]&&(c=parseInt(h[9],10)*e+parseInt(h[10],10),b+=("+"===h[8]?-1:1)*c*d*f),new Date(b).getTime()}function m(a){var b=Date.parse(a);return isNaN(b)&&(b=l(a)),b}function n(a){return Date.parse(a)}function r(a){return Date.parse(a)}function s(a,b,c){c()}function t(a,b,c){var d=m(a);return isNaN(d)?void c():void b(d)}function u(a,b,c,d,e){var f,g,h=!1,i=new XMLHttpRequest,j=e?"HEAD":"GET",k=b.match(/\S+/g);b=k.shift(),f=function(){h||(h=!0,k.length?u(a,k.join(" "),c,d,e):d())},g=function(){var b,d;200===i.status&&(b=e?i.getResponseHeader("Date"):i.response,d=a(b),isNaN(d)||(c(d),h=!0))},i.open(j,b),i.timeout=q||0,i.onload=g,i.onloadend=f,i.send()}function v(a,b,c){u(r,a,b,c,!0)}function w(){var a=J.getReadOnlyMetricsFor("stream"),b=K.getLatestMPDRequestHeaderValueByID(a,"Date"),c=null!==b?new Date(b).getTime():Number.NaN;isNaN(c)?x(!0):(h(c-(new Date).getTime()),x(!1,c/1e3,E))}function x(a,b,c){d(!1),C.trigger(k["default"].TIME_SYNCHRONIZATION_COMPLETED,{time:b,offset:c,error:a?new g["default"](p):null})}function y(a,b){var c=b||0,e=a[c],f=function(a,b){var c=!a||!b;c&&H?w():x(c,a,b)};d(!0),e?I.hasOwnProperty(e.schemeIdUri)?I[e.schemeIdUri](e.value,function(a){var b=(new Date).getTime(),c=a-b;h(c),B("Local time:      "+new Date(b)),B("Server time:     "+new Date(a)),B("Difference (ms): "+c),f(a,c)},function(){y(a,c+1)}):y(a,c+1):(h(0),f())}function z(){f(!1),d(!1)}var A=this.context,B=o["default"](A).getInstance().log,C=i["default"](A).getInstance(),D=void 0,E=void 0,F=void 0,G=void 0,H=void 0,I=void 0,J=void 0,K=void 0;return D={initialize:a,getOffsetToDeviceTimeMs:c,setConfig:b,reset:z}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(116),g=d(f),h=a(7),i=d(h),j=a(11),k=d(j),l=a(8),m=d(l),n=a(6),o=d(n),p=1,q=5e3;e.__dashjs_factory_name="TimeSyncController";var r=m["default"].getSingletonFactory(e);r.TIME_SYNC_FAILED_ERROR_CODE=p,r.HTTP_TIMEOUT_MS=q,c["default"]=r,b.exports=c["default"]},{11:11,116:116,6:6,7:7,8:8}],69:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){A.on(k["default"].XLINK_ELEMENT_LOADED,j,C),H=g["default"](z).create({errHandler:a.errHandler,metricsModel:a.metricsModel,requestModifier:a.requestModifier})}function c(a){D=a}function d(a){E=a}function e(a){var b;G=new o["default"]({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:D}),F=a,b=m(F.Period_asArray,F,t,r),h(b,t,r)}function f(){A.off(k["default"].XLINK_ELEMENT_LOADED,j,C),H&&(H.reset(),H=null)}function h(a,b,c){var d,e,f,g={};for(g.elements=a,g.type=b,g.resolveType=c,0===g.elements.length&&l(g),f=0;f<g.elements.length;f++)d=g.elements[f],e=B.isHTTPURL(d.url)?d.url:d.originalContent.BaseURL+d.url,H.load(e,d,g)}function j(a){var b,c,d,e="<response>",f="</response>",g="";b=a.element,c=a.resolveObject,b.resolvedContent&&(d=b.resolvedContent.indexOf(">")+1,g=b.resolvedContent.substr(0,d)+e+b.resolvedContent.substr(d)+f,b.resolvedContent=G.xml_str2json(g)),x(c)&&l(c)}function l(a){var b,c,d=[];if(n(a),a.resolveType===s&&A.trigger(k["default"].XLINK_READY,{manifest:F}),a.resolveType===r)switch(a.type){case t:for(b=0;b<F[t+"_asArray"].length;b++)c=F[t+"_asArray"][b],c.hasOwnProperty(u+"_asArray")&&(d=d.concat(m(c[u+"_asArray"],c,u,r))),c.hasOwnProperty(v+"_asArray")&&(d=d.concat(m(c[v+"_asArray"],c,v,r)));h(d,u,r);break;case u:A.trigger(k["default"].XLINK_READY,{manifest:F})}}function m(a,b,c,d){var e,f,g,h=[];for(f=a.length-1;f>=0;f--)e=a[f],e.hasOwnProperty("xlink:href")&&e["xlink:href"]===w&&a.splice(f,1);for(f=0;f<a.length;f++)e=a[f],e.hasOwnProperty("xlink:href")&&e.hasOwnProperty("xlink:actuate")&&e["xlink:actuate"]===d&&(g=p(e["xlink:href"],b,c,f,d,e),h.push(g));return h}function n(a){var b,c,d,e,f,g,h=[];for(e=a.elements.length-1;e>=0;e--){if(b=a.elements[e],c=b.type+"_asArray",!b.resolvedContent||y())delete b.originalContent["xlink:actuate"],delete b.originalContent["xlink:href"],h.push(b.originalContent);else if(b.resolvedContent)for(f=0;f<b.resolvedContent[c].length;f++)d=b.resolvedContent[c][f],h.push(d);for(b.parentElement[c].splice(b.index,1),g=0;g<h.length;g++)b.parentElement[c].splice(b.index+g,0,h[g]);h=[]}a.elements.length>0&&E.run(F)}function p(a,b,c,d,e,f){return{url:a,parentElement:b,type:c,index:d,resolveType:e,originalContent:f,resolvedContent:null,resolved:!1}}function x(a){var b,c;for(b=0;b<a.elements.length;b++)if(c=a.elements[b],c.resolved===!1)return!1;return!0}function y(){return!1}var z=this.context,A=i["default"](z).getInstance(),B=q["default"](z).getInstance(),C=void 0,D=void 0,E=void 0,F=void 0,G=void 0,H=void 0;return C={resolveManifestOnLoad:e,setMatchers:c,setIron:d,reset:f},b(),C}Object.defineProperty(c,"__esModule",{value:!0});var f=a(55),g=d(f),h=a(7),i=d(h),j=a(11),k=d(j),l=a(8),m=d(l),n=a(3),o=d(n),p=a(110),q=d(p),r="onLoad",s="onActuate",t="Period",u="AdaptationSet",v="EventStream",w="urn:mpeg:dash:resolve-to-zero:2013";e.__dashjs_factory_name="XlinkController",c["default"]=m["default"].getClassFactory(e),b.exports=c["default"]},{11:11,110:110,3:3,55:55,7:7,8:8}],70:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(){function a(){l=new n}function b(a,b,c){var d=p.getBaseURLsFromElement(c);a[b]?q.areSimpleEquivalent(d,a[b].data.baseUrls)||(a[b].data.baseUrls=d,a[b].data.selectedIdx=m):a[b]=new n(d)}function c(a){var c=p.getBaseURLsFromElement(a);q.areSimpleEquivalent(c,l.data.baseUrls)||(l.data.baseUrls=c,l.data.selectedIdx=m),a.Period_asArray&&a.Period_asArray.forEach(function(a,c){b(l.children,c,a),a.AdaptationSet_asArray&&a.AdaptationSet_asArray.forEach(function(a,d){b(l.children[c].children,d,a),a.Representation_asArray&&a.Representation_asArray.sort(p.getRepresentationSortFunction()).forEach(function(a,e){b(l.children[c].children[d].children,e,a)})})})}function d(a,b){var c=b||l;a(c.data),c.children&&c.children.forEach(function(b){return d(a,b)})}function e(a){d(function(b){isNaN(b.selectedIdx)||a===b.baseUrls[b.selectedIdx].serviceLocation&&(b.selectedIdx=m)})}function f(a){c(a)}function g(){l=new n}function i(a){var b=l,c=[b.data];return a.forEach(function(a){b=b.children[a],b&&c.push(b.data)}),c.filter(function(a){return a.baseUrls.length})}var k=void 0,l=void 0,o=this.context,p=h["default"](o).getInstance(),q=j["default"](o).getInstance();return k={reset:g,update:f,getForPath:i,invalidateSelectedIndexes:e},a(),k}Object.defineProperty(c,"__esModule",{value:!0});var g=a(20),h=d(g),i=a(107),j=d(i),k=a(8),l=d(k),m=NaN,n=function o(a,b){e(this,o),this.data={baseUrls:a||null,selectedIdx:b||m},this.children=[]};f.__dashjs_factory_name="BaseURLTreeModel",c["default"]=l["default"].getClassFactory(f),b.exports=c["default"]},{107:107,20:20,8:8}],71:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){B=null,E=null,C=[],D=[],y.on(i["default"].LOADING_COMPLETED,u,A)}function c(a){E=a}function d(a){var b=function(a,b){return a.action===m["default"].ACTION_COMPLETE&&a.action===b.action},c=function(a,b){return!isNaN(a.index)&&a.startTime===b.startTime&&a.adaptationIndex===b.adaptationIndex},d=function(a,b){return isNaN(a.index)&&isNaN(b.index)&&a.quality===b.quality},e=function(e){var f=!1;return e.some(function(e){return c(a,e)||d(a,e)||b(a,e)?f=!0:void 0}),f};return e(C)}function e(a){var b=a.state instanceof Array?a.state:[a.state],c=[];return b.forEach(function(b){var d=r(b);c=c.concat(n(d,a))}),c}function f(a){C=C.filter(function(b){return isNaN(b.startTime)||b.startTime>=a})}function h(){E.abort(),D=[]}function j(a){switch(a.action){case m["default"].ACTION_COMPLETE:C.push(a),t(a,q),y.trigger(i["default"].STREAM_COMPLETED,{request:a,fragmentModel:this});break;case m["default"].ACTION_DOWNLOAD:t(a,p),D.push(a),k(a);break;default:x("Unknown request action.")}}function k(a){y.trigger(i["default"].FRAGMENT_LOADING_STARTED,{sender:A,request:a}),E.load(a)}function l(a,b,c){for(var d=a.length-1,e=d;e>=0;e--){var f=a[e],g=f.startTime,h=g+f.duration;if(c=void 0!==c?c:f.duration/2,!isNaN(g)&&!isNaN(h)&&b+c>=g&&h>b-c||isNaN(g)&&isNaN(b))return f}return null}function n(a,b){return b.hasOwnProperty("time")?[l(a,b.time,b.threshold)]:a.filter(function(a){for(var c in b)if("state"!==c&&b.hasOwnProperty(c)&&a[c]!=b[c])return!1;return!0})}function r(a){var b=void 0;switch(a){case p:b=D;break;case q:b=C;break;default:b=[]}return b}function t(a,b){z.addSchedulingInfo(a.mediaType,new Date,a.type,a.startTime,a.availabilityStartTime,a.duration,a.quality,a.range,b),z.addRequestsQueue(a.mediaType,D,C)}function u(a){a.sender===E&&(D.splice(D.indexOf(a.request),1),a.response&&!a.error&&C.push(a.request),t(a.request,a.error?s:q),y.trigger(i["default"].FRAGMENT_LOADING_COMPLETED,{request:a.request,response:a.response,error:a.error,sender:this}))}function v(){y.off(i["default"].LOADING_COMPLETED,u,this),E&&(E.reset(),E=null),C=[],D=[]}var w=this.context,x=o["default"](w).getInstance().log,y=g["default"](w).getInstance(),z=a.metricsModel,A=void 0,B=void 0,C=void 0,D=void 0,E=void 0;return A={setLoader:c,getRequests:e,isFragmentLoaded:d,removeExecutedRequestsBeforeTime:f,abortRequests:h,executeRequest:j,reset:v},b(),A}Object.defineProperty(c,"__esModule",{value:!0});var f=a(7),g=d(f),h=a(11),i=d(h),j=a(8),k=d(j),l=a(117),m=d(l),n=a(6),o=d(n),p="loading",q="executed",r="canceled",s="failed";e.__dashjs_factory_name="FragmentModel";var t=k["default"].getClassFactory(e);t.FRAGMENT_MODEL_LOADING=p,t.FRAGMENT_MODEL_EXECUTED=q,t.FRAGMENT_MODEL_CANCELED=r,t.FRAGMENT_MODEL_FAILED=s,c["default"]=t,b.exports=c["default"]},{11:11,117:117,6:6,7:7,8:8}],72:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){return f}function b(a){f=a,a&&d.trigger(i["default"].MANIFEST_LOADED,{data:a})}var c=this.context,d=g["default"](c).getInstance(),e=void 0,f=void 0;return e={getValue:a,setValue:b}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(7),g=d(f),h=a(11),i=d(h),j=a(8),k=d(j);e.__dashjs_factory_name="ManifestModel",c["default"]=k["default"].getSingletonFactory(e),b.exports=c["default"]},{11:11,7:7,8:8}],73:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(){function a(){var a,b;ya=[],xa=!1,wa=!0,Ba=!0,Qa=!1,Sa=!1,Ea={enabled:!0,ttl:l},Fa={enabled:!0,ttl:m},za=k,Aa=void 0,Ca=p,Da=q,Ga=NaN,Ha=t,Ia=u,Ja=v,Ka=w,La=n,Ma=o,Pa=D,Ra={"default":E},a={},e(a,i.HTTPRequest.MPD_TYPE,z),e(a,i.HTTPRequest.XLINK_EXPANSION_TYPE,B),e(a,i.HTTPRequest.MEDIA_SEGMENT_TYPE,x),e(a,i.HTTPRequest.INIT_SEGMENT_TYPE,x),e(a,i.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,x),e(a,i.HTTPRequest.INDEX_SEGMENT_TYPE,x),e(a,i.HTTPRequest.OTHER_TYPE,x),Na=a,b={},e(b,i.HTTPRequest.MPD_TYPE,A),e(b,i.HTTPRequest.XLINK_EXPANSION_TYPE,C),e(b,i.HTTPRequest.MEDIA_SEGMENT_TYPE,y),e(b,i.HTTPRequest.INIT_SEGMENT_TYPE,y),e(b,i.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,y),e(b,i.HTTPRequest.INDEX_SEGMENT_TYPE,y),e(b,i.HTTPRequest.OTHER_TYPE,y),Oa=b}function b(a){Qa=a}function c(){return Qa}function d(a){La=a}function f(){return La}function g(a){Ma=a}function h(){return Ma}function j(a){Ga=a}function F(){return isNaN(Ga)?Sa?s:r:Ga}function G(a){Ha=a}function H(){return Ha}function I(a){Ia=a}function J(){return Ia}function K(a){Ja=a}function L(){return Ja}function M(a){Ka=a}function N(){return Ka}function O(a){Ca=a}function P(){return Ca}function Q(a,b){Ea.enabled=a,void 0===b||isNaN(b)||"number"!=typeof b||(Ea.ttl=b)}function R(){return Ea}function S(a,b){Fa.enabled=a,void 0===b||isNaN(b)||"number"!=typeof b||(Fa.ttl=b)}function T(){return Fa}function U(a){Da=a}function V(){return Da}function W(a){Na[i.HTTPRequest.MEDIA_SEGMENT_TYPE]=a}function X(a,b){Na[a]=b}function Y(){return Na[i.HTTPRequest.MEDIA_SEGMENT_TYPE]}function Z(a){return Na[a]}function $(a){Oa[i.HTTPRequest.MEDIA_SEGMENT_TYPE]=a}function _(a,b){Oa[a]=b}function aa(){return Oa[i.HTTPRequest.MEDIA_SEGMENT_TYPE]}function ba(a){return Oa[a]}function ca(a){Pa=a}function da(){return Pa}function ea(a){Ba=a}function fa(){return Ba}function ga(a){za=a}function ha(a){Aa=a}function ia(){return za}function ja(){return Aa}function ka(a){wa=a}function la(){return wa}function ma(a){xa=a}function na(){return xa}function oa(a){ya=a}function pa(){return ya}function qa(a,b){a?Ra[a]=!!b:Object.keys(Ra).forEach(function(a){qa(a,b)})}function ra(a){var b=Ra[a];return void 0===b?Ra["default"]:b}function sa(){return Sa}function ta(a){Sa=a}function ua(){}var va=void 0,wa=void 0,xa=void 0,ya=void 0,za=void 0,Aa=void 0,Ba=void 0,Ca=void 0,Da=void 0,Ea=void 0,Fa=void 0,Ga=void 0,Ha=void 0,Ia=void 0,Ja=void 0,Ka=void 0,La=void 0,Ma=void 0,Na=void 0,Oa=void 0,Pa=void 0,Qa=void 0,Ra=void 0,Sa=void 0;return va={setBufferOccupancyABREnabled:b,getBufferOccupancyABREnabled:c,setBandwidthSafetyFactor:d,getBandwidthSafetyFactor:f,setAbandonLoadTimeout:g,getAbandonLoadTimeout:h,setLastBitrateCachingInfo:Q,getLastBitrateCachingInfo:R,setLastMediaSettingsCachingInfo:S,getLastMediaSettingsCachingInfo:T,setStableBufferTime:j,getStableBufferTime:F,setBufferTimeAtTopQuality:G,getBufferTimeAtTopQuality:H,setBufferTimeAtTopQualityLongForm:I,getBufferTimeAtTopQualityLongForm:J,setLongFormContentDurationThreshold:K,getLongFormContentDurationThreshold:L,setRichBufferThreshold:M,getRichBufferThreshold:N,setBufferToKeep:O,getBufferToKeep:P,setBufferPruningInterval:U,getBufferPruningInterval:V,setFragmentRetryAttempts:W,getFragmentRetryAttempts:Y,setRetryAttemptsForType:X,getRetryAttemptsForType:Z,setFragmentRetryInterval:$,getFragmentRetryInterval:aa,setRetryIntervalForType:_,getRetryIntervalForType:ba,setWallclockTimeUpdateInterval:ca,getWallclockTimeUpdateInterval:da,setScheduleWhilePaused:ea,getScheduleWhilePaused:fa,getUseSuggestedPresentationDelay:na,setUseSuggestedPresentationDelay:ma,setLiveDelayFragmentCount:ga,getLiveDelayFragmentCount:ia,getLiveDelay:ja,setLiveDelay:ha,setUseManifestDateHeaderTimeSource:ka,getUseManifestDateHeaderTimeSource:la,setUTCTimingSources:oa,getUTCTimingSources:pa,setXHRWithCredentialsForType:qa,getXHRWithCredentialsForType:ra,setFastSwitchEnabled:ta,getFastSwitchEnabled:sa,reset:ua},a(),va}Object.defineProperty(c,"__esModule",{value:!0});var g=a(8),h=d(g),i=a(133),j={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso"},k=4,l=36e4,m=36e4,n=.9,o=1e4,p=30,q=30,r=12,s=20,t=30,u=60,v=600,w=20,x=3,y=1e3,z=3,A=500,B=1,C=500,D=50,E=!1;f.__dashjs_factory_name="MediaPlayerModel";var F=h["default"].getSingletonFactory(f);F.DEFAULT_UTC_TIMING_SOURCE=j,c["default"]=F,b.exports=c["default"]},{133:133,8:8}],74:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){W={}}function b(a){a&&a.adapter&&(V=a.adapter)}function c(){T.trigger(C["default"].METRICS_CHANGED)}function d(a){T.trigger(C["default"].METRIC_CHANGED,{mediaType:a}),c()}function e(a,b,c){T.trigger(C["default"].METRIC_UPDATED,{mediaType:a,metric:b,value:c}),d(a)}function f(a,b,c){T.trigger(C["default"].METRIC_ADDED,{mediaType:a,metric:b,value:c}),d(a)}function h(a){delete W[a],d(a)}function k(){W={},c()}function m(a){return W.hasOwnProperty(a)?W[a]:null}function o(a){var b;return W.hasOwnProperty(a)?b=W[a]:(b=new g["default"],W[a]=b),b}function q(a,b,c){var d=o(a);d[b].push(c),d[b].length>R&&d[b].shift()}function s(a,b,c,d,e,f){var g=new i["default"];return g.tcpid=b,g.dest=c,g.topen=d,g.tclose=e,g.tconnect=f,B(a,V.metricsList.TCP_CONNECTION,g),g}function v(a,b,c,d){var e=new j.HTTPRequestTrace;return e.s=b,e.d=c,e.b=d,a.trace.push(e),a.interval||(a.interval=0),a.interval+=c,e}function x(a,b,c,d,e,f,g,h,i,k,l,m,n,o){var p=new j.HTTPRequest;return e&&e!==d&&(x(a,null,c,d,null,null,g,h,null,null,null,m,null,null),p.actualurl=e),p.tcpid=b,p.type=c,p.url=d,p.range=g,p.trequest=h,p.tresponse=i,p.responsecode=l,p._tfinish=k,p._stream=a,p._mediaduration=m,p._responseHeaders=n,p._serviceLocation=f,o?o.forEach(function(a){v(p,a.s,a.d,a.b)}):(delete p.interval,delete p.trace),B(a,V.metricsList.HTTP_REQUEST,p),p}function z(a,b,c,d,e){var f=new l["default"];return f.t=b,f.mt=c,f.to=d,e?f.lto=e:delete f.lto,B(a,V.metricsList.TRACK_SWITCH,f),f}function B(a,b,c){q(a,b,c),f(a,b,c)}function D(a,b,c){var d=new n["default"];return d.t=b,d.level=c,B(a,V.metricsList.BUFFER_LEVEL,d),d}function E(a,b,c){var d=new p["default"];return d.target=c,d.state=b,B(a,V.metricsList.BUFFER_STATE,d),d}function F(a,b,c,d){var e=new r["default"];return e.time=b,e.range=d,e.manifestInfo=c,B(a,V.metricsList.DVR_INFO,e),e}function H(a,b){var c=new t["default"],d=o(a).DroppedFrames;return c.time=b.creationTime,c.droppedFrames=b.droppedVideoFrames,d.length>0&&d[d.length-1]==c?d[d.length-1]:(B(a,V.metricsList.DROPPED_FRAMES,c),c)}function I(a,b,c,d,e,f,g,h,i){var j=new w["default"];return j.mediaType=a,j.t=b,j.type=c,j.startTime=d,j.availabilityStartTime=e,j.duration=f,j.quality=g,j.range=h,j.state=i,B(a,V.metricsList.SCHEDULING_INFO,j),j}function J(a,b,c){var d=new A["default"];d.loadingRequests=b,d.executedRequests=c,o(a).RequestsQueue=d,f(a,V.metricsList.REQUESTS_QUEUE,d)}function K(a,b,c,d,e,g,h,i,j,k){var l=new u.ManifestUpdate;return l.mediaType=a,l.type=b,l.requestTime=c,l.fetchTime=d,l.availabilityStartTime=e,l.presentationStartTime=g,l.clientTimeOffset=h,l.currentTime=i,l.buffered=j,l.latency=k,q("stream","ManifestUpdate",l),f(a,V.metricsList.MANIFEST_UPDATE,l),l}function L(a,b){if(a){for(var c in b)a[c]=b[c];e(a.mediaType,V.metricsList.MANIFEST_UPDATE,a)}}function M(a,b,c,d,f){if(a){var g=new u.ManifestUpdateStreamInfo;return g.id=b,g.index=c,g.start=d,g.duration=f,a.streamInfo.push(g),e(a.mediaType,V.metricsList.MANIFEST_UPDATE_STREAM_INFO,a),g}return null}function N(a,b,c,d,f,g,h,i){if(a){var j=new u.ManifestUpdateTrackInfo;return j.id=b,j.index=c,j.streamIndex=d,j.mediaType=f,j.startNumber=h,j.fragmentInfoType=i,j.presentationTimeOffset=g,a.trackInfo.push(j),e(a.mediaType,V.metricsList.MANIFEST_UPDATE_TRACK_INFO,a),j}return null}function O(a){var b="stream";return a.trace&&Array.isArray(a.trace)?a.trace.forEach(function(a){a.hasOwnProperty("subreplevel")&&!a.subreplevel&&delete a.subreplevel}):delete a.trace,B(b,V.metricsList.PLAY_LIST,a),a}function P(a){var b="stream";return B(b,V.metricsList.DVB_ERRORS,a),a}function Q(a,b){var c=new G["default"];return c._s=b,o(a).BolaState=[c],f(a,"BolaState",c),c}var R=1e3,S=this.context,T=y["default"](S).getInstance(),U=void 0,V=void 0,W=void 0;return U={metricsChanged:c,metricChanged:d,
metricUpdated:e,metricAdded:f,clearCurrentMetricsForType:h,clearAllCurrentMetrics:k,getReadOnlyMetricsFor:m,getMetricsFor:o,addTcpConnection:s,addHttpRequest:x,addRepresentationSwitch:z,addBufferLevel:D,addBufferState:E,addDVRInfo:F,addDroppedFrames:H,addSchedulingInfo:I,addRequestsQueue:J,addManifestUpdate:K,updateManifestUpdateInfo:L,addManifestUpdateStreamInfo:M,addManifestUpdateRepresentationInfo:N,addPlayList:O,addDVBErrors:P,updateBolaState:Q,setConfig:b},a(),U}Object.defineProperty(c,"__esModule",{value:!0});var f=a(122),g=d(f),h=a(139),i=d(h),j=a(133),k=a(136),l=d(k),m=a(129),n=d(m),o=a(130),p=d(o),q=a(131),r=d(q),s=a(132),t=d(s),u=a(134),v=a(138),w=d(v),x=a(7),y=d(x),z=a(137),A=d(z),B=a(11),C=d(B),D=a(8),E=d(D),F=a(128),G=d(F);e.__dashjs_factory_name="MetricsModel",c["default"]=E["default"].getSingletonFactory(e),b.exports=c["default"]},{11:11,122:122,128:128,129:129,130:130,131:131,132:132,133:133,134:134,136:136,137:137,138:138,139:139,7:7,8:8}],75:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){h=new g["default"],i=[],j=!1}function b(){return h}function c(){return i}function d(){return j}function e(a){function b(a,b,c,d){var e=d[0].split(/[=]/);return d.push({key:e[0],value:e[1]}),d.shift(),d}function c(a,b,c){return b>0&&(l&&0===i.length?i=c[b].split(/[&]/):m&&(e=c[b].split(/[&]/))),c}if(!a)return null;var d,e=[],f=new RegExp(/[?]/),g=new RegExp(/[#]/),k=new RegExp(/^(https:)?\/\//i),l=f.test(a),m=g.test(a);return j=k.test(a),d=a.split(/[?#]/).map(c),i.length>0&&(i=i.reduce(b,null)),e.length>0&&(e=e.reduce(b,null),e.forEach(function(a){h[a.key]=a.value})),a}var f=void 0,h=void 0,i=void 0,j=void 0;return f={initialize:a,parseURI:e,getURIFragmentData:b,getURIQueryData:c,isManifestHTTPS:d}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(127),g=d(f),h=a(8),i=d(h);e.__dashjs_factory_name="URIQueryAndFragmentModel",c["default"]=i["default"].getSingletonFactory(e),b.exports=c["default"]},{127:127,8:8}],76:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){w=[]}function b(){t.playbackRate=x||1,t.removeEventListener("canplay",b)}function c(a){t&&(t.readyState<=2&&a>0?t.addEventListener("canplay",b):t.playbackRate=a)}function d(a){if(t.currentTime!=a)try{t.currentTime=a}catch(b){0===t.readyState&&b.code===b.INVALID_STATE_ERR&&setTimeout(function(){t.currentTime=a},400)}}function e(){return t}function f(a){t=a,t.preload="auto"}function g(a){a?t.src=a:(t.removeAttribute("src"),t.load())}function h(){return t.src}function i(){return v}function j(a){v=a}function k(){return u}function l(a){u=a,u.style.position="absolute",u.style.display="flex",u.style.overflow="hidden",u.style.pointerEvents="none",u.style.top=0,u.style.left=0}function m(a,b){q(a,b)}function n(){return w.length>0}function o(a){var b=void 0;null===a||t.seeking||-1!==w.indexOf(a)||(w.push(a),1===w.length&&(b=document.createEvent("Event"),b.initEvent("waiting",!0,!1),x=t.playbackRate,c(0),t.dispatchEvent(b)))}function p(a){var b=w.indexOf(a),d=void 0;null!==a&&(-1!==b&&w.splice(b,1),n()===!1&&0===t.playbackRate&&(c(x||1),t.paused||(d=document.createEvent("Event"),d.initEvent("playing",!0,!1),t.dispatchEvent(d))))}function q(a,b){b?o(a):p(a)}function r(){var a="webkitDroppedFrameCount"in t&&"webkitDecodedFrameCount"in t,b="getVideoPlaybackQuality"in t,c=null;return b?c=t.getVideoPlaybackQuality():a&&(c={droppedVideoFrames:t.webkitDroppedFrameCount,totalVideoFrames:t.webkitDroppedFrameCount+t.webkitDecodedFrameCount,creationTime:new Date}),c}var s=void 0,t=void 0,u=void 0,v=void 0,w=void 0,x=void 0;return s={initialize:a,setCurrentTime:d,setStallState:m,getElement:e,setElement:f,setSource:g,getSource:h,getVideoContainer:i,setVideoContainer:j,getTTMLRenderingDiv:k,setTTMLRenderingDiv:l,getPlaybackQuality:r}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f);e.__dashjs_factory_name="VideoModel",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{8:8}],77:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b){var c=b.droppedVideoFrames-e;e=b.droppedVideoFrames;var g=b.totalVideoFrames-f;f=b.totalVideoFrames,d[a]?(d[a].droppedVideoFrames+=c,d[a].totalVideoFrames+=g):d[a]={droppedVideoFrames:c,totalVideoFrames:g}}function b(){return d}function c(a){d=[],e=a.droppedVideoFrames,f=a.totalVideoFrames}var d=[],e=0,f=0;return{push:a,getFrameHistory:b,reset:c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f);e.__dashjs_factory_name="DroppedFramesHistory";var h=g["default"].getClassFactory(e);c["default"]=h,b.exports=c["default"]},{8:8}],78:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){return n.mediaInfo.streamInfo}function c(){return n.mediaInfo}function d(){return n}function e(){return p}function f(){return n.mediaInfo.streamInfo.manifestInfo}function g(){return o}function h(){return q}function i(){return r}function j(){return s}function k(){return t}function l(){return u}var m=void 0,n=a.streamProcessor.getCurrentRepresentationInfo(),o=a.streamProcessor,p=a.currentValue,q=a.playbackIndex,r=a.switchHistory,s=a.droppedFramesHistory,t=a.currentRequest,u=a.hasRichBuffer;return m={getCurrentValue:e,getManifestInfo:f,getMediaInfo:c,getPlaybackIndex:h,getDroppedFramesHistory:j,getCurrentRequest:k,getSwitchHistory:i,getStreamInfo:b,getStreamProcessor:g,getTrackInfo:d,hasRichBuffer:l}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f);e.__dashjs_factory_name="RulesContext",c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{8:8}],79:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){var c=void 0===a?h:a,d=void 0===b?null:b,e={value:c,reason:d};return e}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f),h=-1;e.__dashjs_factory_name="SwitchRequest";var i=g["default"].getClassFactory(e);i.NO_CHANGE=h,c["default"]=i,b.exports=c["default"]},{8:8}],80:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){d[a.oldValue]||(d[a.oldValue]={noDrops:0,drops:0,dropSize:0});var b=a.newValue-a.oldValue,c=0>b?1:0,f=c?-b:0,g=c?0:1;if(d[a.oldValue].drops+=c,d[a.oldValue].dropSize+=f,d[a.oldValue].noDrops+=g,e.push({idx:a.oldValue,noDrop:g,drop:c,dropSize:f}),e.length>h){var i=e.shift();d[i.idx].drops-=i.drop,d[i.idx].dropSize-=i.dropSize,d[i.idx].noDrops-=i.noDrop}}function b(){return d}function c(){d=[],e=[]}var d=[],e=[];return{push:a,getSwitchRequests:b,reset:c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f),h=8;e.__dashjs_factory_name="SwitchRequestHistory";var i=g["default"].getClassFactory(e);c["default"]=i,b.exports=c["default"]},{8:8}],81:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){l=[],n=[];var a=w["default"](h).getInstance(),b=y["default"](h).getInstance(),c=u["default"](h).getInstance();c.getBufferOccupancyABREnabled()?(l.push(q["default"](h).create({metricsModel:a,dashMetrics:b})),n.push(s["default"](h).create({metricsModel:a,dashMetrics:b}))):(l.push(g["default"](h).create({metricsModel:a,dashMetrics:b})),l.push(i["default"](h).create({metricsModel:a})),l.push(o["default"](h).create()),l.push(m["default"](h).create()),n.push(k["default"](h).create()))}function b(a){switch(a){case D:return l;case E:return n;default:return null}}function c(a){return a.filter(function(a){return a.value>C["default"].NO_CHANGE})}function d(a){return 0!==a.length?a.reduce(function(a,b){return a.value<b.value?a:b}):void 0}function e(a){var b=l.map(function(b){return b.getMaxIndex(a)}),e=c(b),f=d(e);return f||C["default"](h).create()}function f(a){var b=n.map(function(b){return b.shouldAbandon(a)}),e=c(b),f=d(e);return f||C["default"](h).create()}var h=this.context,j=void 0,l=void 0,n=void 0;return j={initialize:a,getRules:b,getMaxQuality:e,shouldAbandonFragment:f}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(88),g=d(f),h=a(86),i=d(h),j=a(82),k=d(j),l=a(85),m=d(l),n=a(87),o=d(n),p=a(84),q=d(p),r=a(83),s=d(r),t=a(73),u=d(t),v=a(74),w=d(v),x=a(15),y=d(x),z=a(8),A=d(z),B=a(79),C=d(B),D="qualitySwitchRules",E="abandonFragmentRules";e.__dashjs_factory_name="ABRRulesCollection";var F=A["default"].getSingletonFactory(e);F.QUALITY_SWITCH_RULES=D,F.ABANDON_FRAGMENT_RULES=E,c["default"]=F,b.exports=c["default"]},{15:15,73:73,74:74,79:79,8:8,82:82,83:83,84:84,85:85,86:86,87:87,88:88}],82:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){p={},r={},s=[],t=i["default"](n).getInstance(),u=k["default"](n).getInstance(),v=m["default"](n).getInstance()}function b(a,b){p[a]=p[a]||{},p[a][b]=p[a][b]||{}}function c(a,b){s[a]=s[a]||[],s[a].push(b)}function d(a){var d=a.getMediaInfo(),f=d.type,i=a.getCurrentRequest(),k=g["default"](n).create(g["default"].NO_CHANGE,{name:e.__dashjs_factory_name});if(!isNaN(i.index)){b(f,i.index);var m=t.getStableBufferTime(),q=u.getCurrentBufferLevel(v.getReadOnlyMetricsFor(f));if(q>m)return k;var w=p[f][i.index];if(null===w||null===i.firstByteDate||r.hasOwnProperty(w.id))return k;if(void 0===w.firstByteTime&&(s[f]=[],w.firstByteTime=i.firstByteDate.getTime(),w.segmentDuration=i.duration,w.bytesTotal=i.bytesTotal,w.id=i.index),w.bytesLoaded=i.bytesLoaded,w.elapsedTime=(new Date).getTime()-w.firstByteTime,w.bytesLoaded>0&&w.elapsedTime>0&&c(f,Math.round(8*w.bytesLoaded/w.elapsedTime)),s[f].length>=l&&w.elapsedTime>j&&w.bytesLoaded<w.bytesTotal){var x=s[f].reduce(function(a,b){return a+b},0);if(w.measuredBandwidthInKbps=Math.round(x/s[f].length),w.estimatedTimeOfDownload=+(8*w.bytesTotal/w.measuredBandwidthInKbps/1e3).toFixed(2),w.estimatedTimeOfDownload<w.segmentDuration*h||0===a.getTrackInfo().quality)return k;if(!r.hasOwnProperty(w.id)){var y=a.getStreamProcessor().getABRController(),z=w.bytesTotal-w.bytesLoaded,A=y.getBitrateList(d),B=y.getQualityForBitrate(d,w.measuredBandwidthInKbps*t.getBandwidthSafetyFactor()),C=w.bytesTotal*A[B].bitrate/A[y.getQualityFor(f,d.streamInfo)].bitrate;z>C&&(k.value=B,k.reason.throughput=w.measuredBandwidthInKbps,k.reason.fragmentID=w.id,r[w.id]=w,o("AbandonRequestsRule ( ",f,"frag id",w.id,") is asking to abandon and switch to quality to ",B," measured bandwidth was",w.measuredBandwidthInKbps),delete p[f][w.id])}}else w.bytesLoaded===w.bytesTotal&&delete p[f][w.id]}return k}function f(){a()}var h=1.8,j=500,l=5,n=this.context,o=q["default"](n).getInstance().log,p=void 0,r=void 0,s=void 0,t=void 0,u=void 0,v=void 0,w={shouldAbandon:d,reset:f};return a(),w}Object.defineProperty(c,"__esModule",{value:!0});var f=a(79),g=d(f),h=a(73),i=d(h),j=a(15),k=d(j),l=a(74),m=d(l),n=a(8),o=d(n),p=a(6),q=d(p);e.__dashjs_factory_name="AbandonRequestsRule",c["default"]=o["default"].getClassFactory(e),b.exports=c["default"]},{15:15,6:6,73:73,74:74,79:79,8:8}],83:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){s={},t=i["default"](l).getInstance()}function c(a,b,c){s[a]={index:b,quality:c}}function d(a,b,c){var d=s[a];return!d||b!==d.index||c<d.quality}function f(a){var b=a.getMediaInfo(),f=b.type,h=q.getReadOnlyMetricsFor(f),i=a.getCurrentRequest(),m=g["default"](l).create(g["default"].NO_CHANGE,{name:e.__dashjs_factory_name});if(0===h.BolaState.length)return n("WARNING: executing BolaAbandonRule before initializing BolaRule"),s[f]=null,m;var r=h.BolaState[0]._s,t=i.index,u=i.quality;if(isNaN(t)||0===u||!d(f,t,u)||!i.firstByteDate)return m;var v=Date.now(),w=v-i.firstByteDate.getTime(),x=i.bytesLoaded,y=i.bytesTotal,z=y-x,A=i.duration,B=p.getCurrentBufferLevel(h)?p.getCurrentBufferLevel(h):0,C=B+r.placeholderBuffer,D=8*x/(.001*w),E=r.bandwidthSafetyFactor*D,F=.001*(i.firstByteDate.getTime()-i.requestStartDate.getTime());.001*k>F&&(F=.001*k);var G=F+8*y/E,H="";o["default"].BOLA_DEBUG&&(H="index="+t+" quality="+u+" bytesLoaded/bytesTotal="+x+"/"+y+" bufferLevel="+B+" timeSince1stByte="+(w/1e3).toFixed(3)+" estThroughput="+(E/1e6).toFixed(3)+" latency="+F.toFixed(3));var I=y*r.bitrates[0]/r.bitrates[u],J=z-F*E/8;if(1>J&&(J=1),j>w||I>=z||B>r.bufferTarget||I>=J||A>=G)return m;var K=C-F;0>K&&(K=0);for(var L=0;u>L+1&&y*r.bitrates[L+1]/r.bitrates[u]<J;)++L;var M=u;if(r.state===o["default"].BOLA_STATE_STARTUP){M=0;for(var N=0;L>=N&&(I=y*r.bitrates[N]/r.bitrates[u],!(8*I/A>E));++N)M=N}else for(var O=(r.Vp*(r.utilities[u]+r.gp)-K)/J,N=0;L>=N;++N){I=y*r.bitrates[N]/r.bitrates[u];var P=(r.Vp*(r.utilities[N]+r.gp)-K)/I;P>O&&(M=N,O=P)}var Q=r.rebufferSafetyFactor*D*(B-F)/8;if(M===u&&J>Q&&(M=L),M===u)return m;for(;M>0&&(I=y*r.bitrates[M]/r.bitrates[u],!(Q>=I));)--M;var R=NaN;if(M>0){var S=r.utilities[M],T=r.utilities[M-1],P=r.bitrates[M],U=r.bitrates[M-1];R=r.Vp*((P*T-U*S)/(P-U)+r.gp)}else{var S=r.utilities[0],T=r.utilities[1],P=r.bitrates[0],U=r.bitrates[1];R=r.Vp*((P*T-U*S)/(P-U)+r.gp),R-=A}return C>R&&(r.placeholderBuffer=R-B,r.placeholderBuffer<0&&(r.placeholderBuffer=0)),r.lastQuality=M,q.updateBolaState(f,r),o["default"].BOLA_DEBUG&&n("BolaDebug "+f+" BolaAbandonRule abandon to "+M+" - "+H),c(f,t,u),m.value=M,m.reason.state=r.state,m.reason.throughput=D,m.reason.bufferLevel=B,m.reason.bytesLoaded=i.bytesLoaded,m.reason.bytesTotal=i.bytesTotal,m.reason.elapsedTimeMs=w,m}function h(){s={}}var j=500,k=200,l=this.context,n=m["default"](l).getInstance().log,p=a.dashMetrics,q=a.metricsModel,r=void 0,s=void 0,t=void 0;return r={shouldAbandon:f,reset:h},b(),r}Object.defineProperty(c,"__esModule",{value:!0});var f=a(79),g=d(f),h=a(73),i=d(h),j=a(8),k=d(j),l=a(6),m=d(l),n=a(84),o=d(n);e.__dashjs_factory_name="BolaAbandonRule",c["default"]=k["default"].getClassFactory(e),b.exports=c["default"]},{6:6,73:73,79:79,8:8,84:84}],84:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){N={},O={},P={},Q=[],R=k["default"](H).getInstance(),S=n["default"](H).getInstance(),L.on(r["default"].BUFFER_EMPTY,q,M),L.on(r["default"].PLAYBACK_SEEKING,s,M),L.on(r["default"].PERIOD_SWITCH_STARTED,B,M),L.on(r["default"].MEDIA_FRAGMENT_LOADED,C,M)}function c(a){return a.map(function(a){return Math.log(a)})}function d(a,b,d,e){var f=NaN;if(e?(f=0,e.forEach(function(a,b){a>e[f]&&(f=b)})):(e=c(d),f=e.length-1),0===f)return null;var g=1-e[0]+(e[f]-e[0])/(b/a-1),h=a/(e[0]+g-1);return{utilities:e,gp:g,Vp:h}}function f(a){var b={},c=a.getMediaInfo(),e=a.getStreamProcessor(),f=a.getStreamInfo(),g=a.getTrackInfo(),h=e.isDynamic(),i=f.manifestInfo.duration,j=g.fragmentDuration,k=c.bitrateList.map(function(a){return a.bandwidth}),l=d(y,z,k,null);if(null===l)return b.state=u,b;if(b.state=v,b.bitrates=k,b.utilities=l.utilities,b.Vp=l.Vp,b.gp=l.gp,b.isDynamic=h,b.movieDuration=i,b.fragmentDuration=j,b.bandwidthSafetyFactor=R.getBandwidthSafetyFactor(),b.rebufferSafetyFactor=A,b.bufferTarget=R.getStableBufferTime(),b.lastQuality=0,b.placeholderBuffer=0,b.throughputCount=h?F:G,x){for(var m="",n=0;n<k.length;++n){var o=l.utilities[n],p=k[n],q=0;if(n>0){var r=l.utilities[n-1],s=k[n-1];q=l.Vp*((r*p-o*s)/(p-s)+l.gp)}var t=l.Vp*(o+l.gp);m+="\n"+n+":"+(1e-6*k[n]).toFixed(3)+"Mbps "+q.toFixed(3)+"/"+t.toFixed(3)}I("BolaDebug "+c.type+" bitrates"+m)}return b}function h(a,b){for(var c=a.bitrates.length,d=NaN,e=NaN,f=0;c>f;++f){var g=(a.Vp*(a.utilities[f]+a.gp)-b)/a.bitrates[f];(isNaN(e)||g>=e)&&(e=g,d=f)}return d}function i(a,b){for(var c=J.getHttpRequests(a),d=[],e=c.length-1;e>=0&&d.length<b;--e){var f=c[e];f.type===l.HTTPRequest.MEDIA_SEGMENT_TYPE&&f._tfinish&&f.tresponse&&f.trace&&d.push(f)}return d}function j(a,b,c){var d=i(a,b);if(0===d.length)return 0;for(var e=0,f="",g=0;g<d.length;++g){var h=.001*(d[g]._tfinish.getTime()-d[g].trequest.getTime()),j=8*d[g].trace.reduce(function(a,b){return a+b.b[0]},0);x&&(f+=" "+(1e-6*j).toFixed(3)+"/"+h.toFixed(3)+"="+(1e-6*j/h).toFixed(3)+"Mbps"),e+=h/j}return x&&I("BolaDebug "+c+" BolaRule recent throughput = "+(d.length/(1e6*e)).toFixed(3)+"Mbps:"+f),d.length/e}function m(a,b){var c=0;return a.bitrates.some(function(a,d){return a>b||(c=d,!1)}),c}function o(a,b){var c=Date.now(),d=N[b],e=P[b],f=NaN;if(N[b]=c,P[b]=!1,!e){var g=i(a,1);g.length>0&&(f=g[0]._tfinish.getTime(),f>c&&(f=c))}var h=0;return h=e||d>f?c-d:c-f,isNaN(h)||0>=h?0:.001*h}function q(){x&&I("BolaDebug BUFFER_EMPTY"),Q.forEach(function(a){var b=K.getReadOnlyMetricsFor(a);if(0!==b.BolaState.length){var c=b.BolaState[0]._s;c.state===w&&(c.placeholderBuffer=0,K.updateBolaState(a,c))}})}function s(a){x&&I("BolaDebug PLAYBACK_SEEKING "+a.seekTime.toFixed(3)),Q.forEach(function(a){var b=K.getReadOnlyMetricsFor(a);if(0!==b.BolaState.length){var c=b.BolaState[0]._s;c.state!==u&&(c.state=v),K.updateBolaState(a,c)}}),O={},P={}}function B(){}function C(a){if(a&&a.chunk&&a.chunk.mediaInfo){var b=a.chunk.mediaInfo.type,c=a.chunk.start;void 0===b||isNaN(c)||(c<=O[b]?P[b]=!0:(P[b]=!1,O[b]=c))}}function D(a){var b=a.getStreamProcessor();b.getScheduleController().setTimeToLoadDelay(0);var c=g["default"](H).create(g["default"].NO_CHANGE,{name:e.__dashjs_factory_name}),d=a.getMediaInfo(),i=d.type,k=K.getReadOnlyMetricsFor(i);if(0===k.BolaState.length){x&&I("BolaDebug "+i+"\nBolaDebug "+i+" BolaRule for state=- fragmentStart="+S.getIndexHandlerTime(a.getStreamProcessor()).toFixed(3));var l=f(a);K.updateBolaState(i,l);var n=0;if(l.state!==u){Q.push(i);var p=j(k,l.throughputCount,i);if(0===p)return x&&I("BolaDebug "+i+" BolaRule quality unchanged for INITIALIZE"),c;n=m(l,p*l.bandwidthSafetyFactor),l.lastQuality=n,c.value=n,c.reason.state=l.state,c.reason.throughput=p}return x&&I("BolaDebug "+i+" BolaRule quality "+n+" for INITIALIZE"),c}var q=k.BolaState[0]._s;if(q.state===u)return x&&I("BolaDebug "+i+" BolaRule quality 0 for ONE_BITRATE"),c;var r=q.bitrates,s=q.utilities;x&&I("BolaDebug "+i+"\nBolaDebug "+i+" EXECUTE BolaRule for state="+q.state+" fragmentStart="+S.getIndexHandlerTime(a.getStreamProcessor()).toFixed(3));var t=J.getCurrentBufferLevel(k)?J.getCurrentBufferLevel(k):0,y=j(k,q.throughputCount,i);.1>=t&&(q.placeholderBuffer=0);var z=o(k,i);z>0&&(q.placeholderBuffer+=z),q.placeholderBuffer<0&&(q.placeholderBuffer=0);var B=t+q.placeholderBuffer,C=h(q,B);if(x&&I("BolaDebug "+i+" BolaRule bufferLevel="+t.toFixed(3)+"(+"+q.placeholderBuffer.toFixed(3)+"="+B.toFixed(3)+") recentThroughput="+(1e-6*y).toFixed(3)+" tentativeQuality="+C),q.state===v){var n=m(q,y*q.bandwidthSafetyFactor);if(t>q.fragmentDuration/A){q.state=w;for(var D=0,E=0;n>E;++E){var F=q.Vp*(q.gp+(r[n]*s[E]-r[E]*s[n])/(r[n]-r[E]));F>D&&(D=F)}D>t&&(q.placeholderBuffer=D-t)}return x&&I("BolaDebug "+i+" BolaRule quality "+n+" for STARTUP"),q.lastQuality=n,K.updateBolaState(i,q),c.value=n,c.reason.state=v,c.reason.throughput=y,c}if(C>q.lastQuality){var n=m(q,y);C>n&&(n<q.lastQuality&&(n=q.lastQuality),C=n)}if(y>0)for(var G=A*y*t/q.fragmentDuration;C>0&&r[C]>G;)--C;var L=0,M=q.Vp*(s[C]+q.gp);return L=B-M,L>0&&(L>q.placeholderBuffer?(L-=q.placeholderBuffer,q.placeholderBuffer=0):(q.placeholderBuffer-=L,L=0)),L>0?C===r.length-1?L=0:b.getScheduleController().setTimeToLoadDelay(1e3*L):L=0,q.lastQuality=C,K.updateBolaState(i,q),c.value=C,c.reason.state=q.state,c.reason.throughput=y,c.reason.bufferLevel=t,x&&I("BolaDebug "+i+" BolaRule quality "+C+" delay="+L.toFixed(3)+" for STEADY"),c}function E(){L.off(r["default"].BUFFER_EMPTY,q,M),L.off(r["default"].PLAYBACK_SEEKING,s,M),L.off(r["default"].PERIOD_SWITCH_STARTED,B,M),L.off(r["default"].MEDIA_FRAGMENT_LOADED,C,M),b()}var F=2,G=3,H=this.context,I=t["default"](H).getInstance().log,J=a.dashMetrics,K=a.metricsModel,L=p["default"](H).getInstance(),M=void 0,N=void 0,O=void 0,P=void 0,Q=void 0,R=void 0,S=void 0;return M={getMaxIndex:D,reset:E},b(),M}Object.defineProperty(c,"__esModule",{value:!0});var f=a(79),g=d(f),h=a(8),i=d(h),j=a(73),k=d(j),l=a(133),m=a(13),n=d(m),o=a(7),p=d(o),q=a(11),r=d(q),s=a(6),t=d(s),u=0,v=1,w=2,x=!1,y=10,z=30,A=.5;e.__dashjs_factory_name="BolaRule";var B=i["default"].getClassFactory(e);B.BOLA_STATE_ONE_BITRATE=u,B.BOLA_STATE_STARTUP=v,B.BOLA_STATE_STEADY=w,B.BOLA_DEBUG=x,c["default"]=B,b.exports=c["default"]},{11:11,13:13,133:133,6:6,7:7,73:73,79:79,8:8}],85:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){var f=a.getDroppedFramesHistory();if(f){for(var g=f.getFrameHistory(),h=0,j=0,k=i["default"].NO_CHANGE,l=1;l<g.length;l++)if(g[l]&&(h=g[l].droppedVideoFrames,j=g[l].totalVideoFrames,j>e&&h/j>d)){k=l-1,c("DroppedFramesRule, index: "+k+" Dropped Frames: "+h+" Total Frames: "+j);break}return i["default"](b).create(k,{droppedFrames:h})}return i["default"](b).create()}var b=this.context,c=k["default"](b).getInstance().log,d=.15,e=375;return{getMaxIndex:a}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f),h=a(79),i=d(h),j=a(6),k=d(j);e.__dashjs_factory_name="DroppedFramesRule";var l=g["default"].getClassFactory(e);c["default"]=l,b.exports=c["default"]},{6:6,79:79,8:8}],86:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){p={},r=0,s=1e3,l.on(k["default"].PLAYBACK_SEEKING,e,n)}function c(a){var b=(new Date).getTime(),c=a.getMediaInfo().type,e=m.getReadOnlyMetricsFor(c),f=e.BufferState.length>0?e.BufferState[e.BufferState.length-1]:null,i=q["default"](h).create();return s>b-r||null===f?i:(d(c,f.state),f.state===g["default"].BUFFER_EMPTY&&void 0!==p[c].firstBufferLoadedEvent&&(j("Switch to index 0; buffer is empty."),i.value=0,i.reason="InsufficientBufferRule: Buffer is empty"),r=b,i)}function d(a,b){p[a]=p[a]||{},p[a].state=b,b!==g["default"].BUFFER_LOADED||p[a].firstBufferLoadedEvent||(p[a].firstBufferLoadedEvent=!0)}function e(){p={}}function f(){l.off(k["default"].PLAYBACK_SEEKING,e,n),p={},r=0}var h=this.context,j=o["default"](h).getInstance().log,l=i["default"](h).getInstance(),m=a.metricsModel,n=void 0,p=void 0,r=void 0,s=void 0;return n={getMaxIndex:c,reset:f},b(),n}Object.defineProperty(c,"__esModule",{value:!0});var f=a(59),g=d(f),h=a(7),i=d(h),j=a(11),k=d(j),l=a(8),m=d(l),n=a(6),o=d(n),p=a(79),q=d(p);e.__dashjs_factory_name="InsufficientBufferRule",c["default"]=m["default"].getClassFactory(e),b.exports=c["default"]},{11:11,59:59,6:6,7:7,79:79,8:8}],87:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){for(var f=a.getSwitchHistory(),g=f.getSwitchRequests(),h=0,i=0,j=0,l=k["default"](b).create(),m=0;m<g.length;m++)if(void 0!==g[m]&&(h+=g[m].drops,i+=g[m].noDrops,j+=g[m].dropSize,h+i>=e&&h/i>d)){l.value=m>0?m-1:0,l.reason={index:l.value,drops:h,noDrops:i,dropSize:j},c("Switch history rule index: "+l.value+" samples: "+(h+i)+" drops: "+h);break}return l}var b=this.context,c=i["default"](b).getInstance().log,d=.075,e=6;return{getMaxIndex:a}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f),h=a(6),i=d(h),j=a(79),k=d(j);e.__dashjs_factory_name="SwitchRequest";var l=g["default"].getClassFactory(e);c["default"]=l,b.exports=c["default"]},{6:6,79:79,8:8}],88:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){D=[],E=[],F=k["default"](z).getInstance()}function c(a,b){D[a]=D[a]||[],D[a].push(b)}function d(a,b){return E[a]||(E[a]=[]),E[a].push(b),E[a].length>t?E[a].shift():void 0}function e(a){var b=void 0;return E[a]&&E[a].length>0&&(b=E[a].reduce(function(a,b){return a+b})/E[a].length),b}function f(a,b){var c=Math.min(D[a].length,b?q:s),d=D[a].slice(-1*c,D[a].length);return d.length>1&&d.reduce(function(a,b){return(b>=a*y||a>=b*x)&&c++,b}),c=Math.min(D[a].length,c),D[a].slice(-1*c,D[a].length)}function h(a,b){var c=f(a,b),d=0;if(c.length>0){var e=c.reduce(function(a,b){return a+b},0);d=e/c.length}return D[a].length>=o&&D[a].shift(),d/1e3*F.getBandwidthSafetyFactor()}function j(a,b,c){var d=!1;if(w>a&&(d=!0),!d)switch(c){case"video":d=u>b;break;case"audio":d=v>b}return d}function m(a){var b=a.getMediaInfo(),f=b.type,k=C.getReadOnlyMetricsFor(f),m=a.getStreamProcessor(),n=m.getABRController(),o=m.isDynamic(),p=B.getCurrentHttpRequest(k),q=k.BufferState.length>0?k.BufferState[k.BufferState.length-1]:null,s=a.hasRichBuffer(),t=r["default"](z).create();if(!k||!p||p.type!==l.HTTPRequest.MEDIA_SEGMENT_TYPE||!q||s)return t;var u=void 0,v=void 0;if(p.trace&&p.trace.length){v=p.tresponse.getTime()-p.trequest.getTime()||1,u=p._tfinish.getTime()-p.tresponse.getTime()||1;var w=p.trace.reduce(function(a,b){return a+b.b[0]},0),x=Math.round(8*w/(u/1e3)),y=void 0,F=void 0;j(v,u,f)?D[f]&&E[f]?(y=h(f,o),F=e(f)):(y=x/1e3,F=v):(c(f,x),y=h(f,o),d(f,v),F=e(f,o)),n.setAverageThroughput(f,y),n.getAbandonmentStateFor(f)!==i["default"].ABANDON_LOAD&&(q.state===g["default"].BUFFER_LOADED||o)&&(t.value=n.getQualityForBitrate(b,y,F),m.getScheduleController().setTimeToLoadDelay(0),A("ThroughputRule requesting switch to index: ",t.value,"type: ",f,"Average throughput",Math.round(y),"kbps"),t.reason={throughput:y,latency:F})}return t}function n(){b()}var o=20,q=3,s=4,t=s,u=50,v=5,w=50,x=1.3,y=1.3,z=this.context,A=p["default"](z).getInstance().log,B=a.dashMetrics,C=a.metricsModel,D=void 0,E=void 0,F=void 0,G={getMaxIndex:m,reset:n};return b(),G}Object.defineProperty(c,"__esModule",{value:!0});var f=a(59),g=d(f),h=a(56),i=d(h),j=a(73),k=d(j),l=a(133),m=a(8),n=d(m),o=a(6),p=d(o),q=a(79),r=d(q);e.__dashjs_factory_name="ThroughputRule",c["default"]=n["default"].getClassFactory(e),b.exports=c["default"]},{133:133,56:56,59:59,6:6,73:73,79:79,8:8}],89:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){j=g["default"](e).getInstance()}function c(a,b,c){var e=f.getCurrentBufferLevel(h.getReadOnlyMetricsFor(b));return e<d(a,b,c)}function d(a,b,c){var d=NaN,e=a.getCurrentRepresentationInfo();if("fragmentedText"===b)d=i.getAllTracksAreDisabled()?0:e.fragmentDuration;else if("audio"===b&&c){var g=f.getCurrentBufferLevel(h.getReadOnlyMetricsFor("video"));d=Math.floor(Math.max(g,e.fragmentDuration))}else{var k=e.mediaInfo.streamInfo,l=a.getABRController();if(l.isPlayingAtTopQuality(k)){var m=k.manifestInfo.duration>=j.getLongFormContentDurationThreshold();d=m?j.getBufferTimeAtTopQualityLongForm():j.getBufferTimeAtTopQuality()}else d=j.getStableBufferTime()}return d}var e=this.context,f=a.dashMetrics,h=a.metricsModel,i=a.textController,j=void 0,k={execute:c,getBufferTarget:d};return b(),k}Object.defineProperty(c,"__esModule",{value:!0});var f=a(73),g=d(f),h=a(8),i=d(h);e.__dashjs_factory_name="BufferLevelRule",c["default"]=i["default"].getClassFactory(e),b.exports=c["default"]},{73:73,8:8}],90:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(a,b){var c=a.getCurrentRepresentationInfo(),g=c.mediaInfo,i=g.type,j=a.getScheduleController(),k=j.getSeekTarget(),l=!isNaN(k),m=a.getBuffer(),n=l?k:e.getIndexHandlerTime(a);if(isNaN(n)||"fragmentedText"===i&&h.getAllTracksAreDisabled())return null;if(l&&j.setSeekTarget(NaN),m){var o=f.getBufferRange(a.getBuffer(),n);null!==o&&(d("Prior to making a request for time, NextFragmentRequestRule is aligning index handler's currentTime with bufferedRange.end.",n," was changed to ",o.end),n=o.end)}var p=void 0;return b?(n=b.startTime+b.duration/2,p=e.getFragmentRequestForTime(a,c,n,{timeThreshold:0,ignoreIsFinished:!0})):(p=e.getFragmentRequestForTime(a,c,n,{keepIdx:!l}),p&&a.getFragmentModel().isFragmentLoaded(p)&&(p=e.getNextFragmentRequest(a,c)),p&&(e.setIndexHandlerTime(a,p.startTime+p.duration),p.delayLoadingTime=(new Date).getTime()+j.getTimeToLoadDelay(),j.setTimeToLoadDelay(0))),p}var c=this.context,d=g["default"](c).getInstance().log,e=a.adapter,f=a.sourceBufferController,h=a.textController,i={execute:b};return i}Object.defineProperty(c,"__esModule",{value:!0});var f=a(6),g=d(f),h=a(8),i=d(h);e.__dashjs_factory_name="NextFragmentRequestRule",c["default"]=i["default"].getClassFactory(e),b.exports=c["default"]},{6:6,8:8}],91:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){for(var b="",c=0;c<a.length;++c){var d=a[c];b+=d.uchar}var e=b.length,f=b.replace(/^\s+/,"").length;return e-f}function b(a){return"left: "+3.125*a.x+"%; top: "+6.66*a.y1+"%; width: "+(100-3.125*a.x)+"%; height: "+6.66*Math.max(a.y2-1-a.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function c(a){return"red"===a?"rgb(255, 0, 0)":"green"===a?"rgb(0, 255, 0)":"blue"===a?"rgb(0, 0, 255)":"cyan"===a?"rgb(0, 255, 255)":"magenta"===a?"rgb(255, 0, 255)":"yellow"===a?"rgb(255, 255, 0)":"white"===a?"rgb(255, 255, 255)":"black"===a?"rgb(0, 0, 0)":a}function d(a,b){var d=a.videoHeight/15;return b?"font-size: "+d+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(b.foreground?c(b.foreground):"rgb(255, 255, 255)")+"; font-style: "+(b.italics?"italic":"normal")+"; text-decoration: "+(b.underline?"underline":"none")+"; white-space: pre; background-color: "+(b.background?c(b.background):"transparent")+";":"font-size: "+d+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function e(a){var b=a.replace(/^\s+/g,"");return b}function f(a){var b=a.replace(/\s+$/g,"");return b}function g(c,g,i,j){var k=null,l=null,m=!1,n=-1,o={start:g,end:i,spans:[]},p="style_cea608_white_black",q={},r={},s=[],t=void 0,u=void 0;for(t=0;15>t;++t){var v=j.rows[t],w="",x=null;if(!1===v.isEmpty()){var y=a(v.chars);null===k&&(k={x:y,y1:t,y2:t+1,p:[]}),y!==n&&m&&(k.p.push(o),o={start:g,end:i,spans:[]},k.y2=t,k.name="region_"+k.x+"_"+k.y1+"_"+k.y2,!1===q.hasOwnProperty(k.name)?(s.push(k),q[k.name]=k):(l=q[k.name],l.p.contat(k.p)),k={x:y,y1:t,y2:t+1,p:[]});for(var z=0;z<v.chars.length;++z){var A=v.chars[z],B=A.penState;if(null===x||!B.equals(x)){w.trim().length>0&&(o.spans.push({name:p,line:w,row:t}),w="");var C="style_cea608_"+B.foreground+"_"+B.background;B.underline&&(C+="_underline"),B.italics&&(C+="_italics"),r.hasOwnProperty(C)||(r[C]=JSON.parse(JSON.stringify(B))),x=B,p=C}w+=A.uchar}w.trim().length>0&&o.spans.push({name:p,line:w,row:t}),m=!0,n=y}else m=!1,n=-1,k&&(k.p.push(o),o={start:g,end:i,spans:[]},k.y2=t,k.name="region_"+k.x+"_"+k.y1+"_"+k.y2,!1===q.hasOwnProperty(k.name)?(s.push(k),q[k.name]=k):(l=q[k.name],l.p.contat(k.p)),k=null)}k&&(k.p.push(o),k.y2=t+1,k.name="region_"+k.x+"_"+k.y1+"_"+k.y2,!1===q.hasOwnProperty(k.name)?(s.push(k),q[k.name]=k):(l=q[k.name],l.p.contat(k.p)),k=null);var D=[];for(t=0;t<s.length;++t){var E=s[t],F="sub_cea608_"+h++,G=document.createElement("div");G.id=F;var H=b(E);G.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+H;var I=document.createElement("div");I.className="paragraph bodyStyle",I.style.cssText=d(c);var J=document.createElement("div");J.className="cueUniWrapper",J.style.cssText="unicode-bidi: normal; direction: ltr;";for(var K=0;K<E.p.length;++K){var L=E.p[K],M=0;for(u=0;u<L.spans.length;++u){var N=L.spans[u];if(N.line.length>0){if(0!==u&&M!=N.row){var O=document.createElement("br");O.className="lineBreak",J.appendChild(O)}var P=!1;M===N.row&&(P=!0),M=N.row;var Q=r[N.name],R=document.createElement("span");R.className="spanPadding "+N.name+" customSpanColor",R.style.cssText=d(c,Q),0!==u&&P?u===L.spans.length-1?R.textContent=f(N.line):R.textContent=N.line:0===u&&L.spans.length>1&&N.row===L.spans[1].row?R.textContent=e(N.line):R.textContent=N.line.trim(),J.appendChild(R)}}}I.appendChild(J),G.appendChild(I);var S={bodyStyle:["%",90]};for(u in r)r.hasOwnProperty(u)&&(S[u]=["%",90]);D.push({type:"html",start:g,end:i,cueHTMLElement:G,cueID:F,cellResolution:[32,15],isFromCEA608:!0,regions:s,regionID:E.name,videoHeight:c.videoHeight,videoWidth:c.videoWidth,fontSize:S,
lineHeight:{},linePadding:{}})}return D}var h=0,i=void 0;return i={createHTMLCaptionsFromScreen:g}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f);e.__dashjs_factory_name="EmbeddedTextHtmlRender",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{8:8}],92:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){B=!1,C=null,D=null,E=null,F=null,G=null,A=!1,w.on(i["default"].DATA_UPDATE_COMPLETED,r,this),w.on(i["default"].INIT_FRAGMENT_LOADED,s,this)}function c(a,b,c){E=a,j(b),F=c,G=F.getRepresentationController(),H=m["default"](v).getInstance()}function d(a){try{D=x.createSourceBuffer(C,a),B||(D.hasOwnProperty("initialize")&&D.initialize(E,this),B=!0)}catch(b){y.mediaSourceError("Error creating "+E+" source buffer.")}return D}function e(){return E}function f(){return D}function h(a){D=a}function j(a){C=a}function k(){return C}function l(a){F=a}function n(){return F}function o(){return 0}function p(){return 0}function q(a){w.off(i["default"].DATA_UPDATE_COMPLETED,r,this),w.off(i["default"].INIT_FRAGMENT_LOADED,s,this),a||(x.abort(C,D),x.removeSourceBuffer(C,D))}function r(a){a.sender.getStreamProcessor()===F&&w.trigger(i["default"].TIMED_TEXT_REQUESTED,{index:0,sender:a.sender})}function s(a){a.fragmentModel===F.getFragmentModel()&&a.chunk.bytes&&x.append(D,a.chunk)}function t(){return A}function u(a,b){var c=H.extract(a,E,b);c?x.append(c):w.trigger(i["default"].INIT_REQUESTED,{sender:z})}var v=this.context,w=g["default"](v).getInstance(),x=a.sourceBufferController,y=a.errHandler,z=void 0,A=void 0,B=void 0,C=void 0,D=void 0,E=void 0,F=void 0,G=void 0,H=void 0;return z={initialize:c,createBuffer:d,getType:e,getStreamProcessor:n,setStreamProcessor:l,getBuffer:f,setBuffer:h,getBufferLevel:o,getCriticalBufferLevel:p,setMediaSource:j,getMediaSource:k,getIsBufferingCompleted:t,switchInitData:u,reset:q},b(),z}Object.defineProperty(c,"__esModule",{value:!0});var f=a(7),g=d(f),h=a(11),i=d(h),j=a(8),k=d(j),l=a(104),m=d(l);e.__dashjs_factory_name="NotFragmentedTextBufferController",c["default"]=k["default"].getClassFactory(e),b.exports=c["default"]},{104:104,11:11,7:7,8:8}],93:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(a){t="fragmentedText"===a.type?i["default"](s).create({metricsModel:a.metricsModel,manifestModel:a.manifestModel,sourceBufferController:a.sourceBufferController,errHandler:a.errHandler,streamController:a.streamController,mediaController:a.mediaController,adapter:a.adapter,textController:a.textController}):k["default"](s).create({errHandler:a.errHandler,sourceBufferController:a.sourceBufferController})}function c(a,b,c){return t.initialize(a,b,c)}function d(a){return t.createBuffer(a)}function e(){return t.getType()}function f(){return t.getBuffer()}function g(a){t.setBuffer(a)}function h(){return t.getMediaSource()}function j(a){t.setMediaSource(a)}function l(a){t.setStreamProcessor(a)}function m(){t.getStreamProcessor()}function n(){return t.getBufferLevel()}function o(){return t.getCriticalBufferLevel()}function p(a){t.reset(a)}function q(){return t.getIsBufferingCompleted()}function r(a,b){t.switchInitData(a,b)}var s=this.context,t=void 0,u=void 0;return u={initialize:c,createBuffer:d,getType:e,getStreamProcessor:m,setStreamProcessor:l,getBuffer:f,setBuffer:g,getBufferLevel:n,getCriticalBufferLevel:o,setMediaSource:j,getMediaSource:h,getIsBufferingCompleted:q,switchInitData:r,reset:p},b(a),u}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f),h=a(59),i=d(h),j=a(92),k=d(j);e.__dashjs_factory_name="TextBufferController",c["default"]=g["default"].getClassFactory(e),c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{59:59,8:8,92:92}],94:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){v=k["default"](j).getInstance(),w=m["default"](j).getInstance(),x=o["default"](j).getInstance(),n=i["default"](j).getInstance(),v.initialize(),p=!1}function b(a){a&&(a.errHandler&&(q=a.errHandler),a.dashManifestModel&&(r=a.dashManifestModel),a.mediaController&&(s=a.mediaController),a.videoModel&&(t=a.videoModel),a.streamController&&(u=a.streamController),a.textTracks&&(v=a.textTracks),a.vttParser&&(w=a.vttParser),a.ttmlParser&&(x=a.ttmlParser),n.setConfig({errHandler:q,dashManifestModel:r,mediaController:s,videoModel:t,streamController:u,textTracks:v,vttParser:w,ttmlParser:x}))}function c(){return n}function d(){return p}function e(a){n.addEmbeddedTrack(a)}function f(){for(var a=n.getConfig(),b=a.fragmentModel,c=a.embeddedTracks,d=a.isFragmented,e=a.fragmentedTracks,f=a.allTracksAreDisabled,g=t.getElement(),h=g.textTracks,i=h.length,j=i-c.length,k=v.getCurrentTrackIdx(),l=0;i>l;l++){var m=h[l];if(f="showing"!==m.mode,"showing"===m.mode){if(k!==l&&(v.setCurrentTrackIdx(l),v.addCaptions(l,0,null),d&&j>l)){var o=s.getCurrentTrackFor("fragmentedText",u.getActiveStreamInfo()),p=e[l];p!==o&&(b.abortRequests(),v.deleteTrackCues(o),s.setTrack(p),n.setCurrentFragmentedTrackIdx(l))}break}}f&&v.setCurrentTrackIdx(-1)}function g(){var a=n.getConfig().textTracks;return a.getCurrentTrackIdx()}function h(){p=!1,n.resetEmbedded()}var j=this.context,l=void 0,n=void 0,p=void 0,q=void 0,r=void 0,s=void 0,t=void 0,u=void 0,v=void 0,w=void 0,x=void 0;return l={setConfig:b,getTextSourceBuffer:c,getAllTracksAreDisabled:d,addEmbeddedTrack:e,setTextTrack:f,getCurrentTrackIdx:g,reset:h},a(),l}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f),h=a(95),i=d(h),j=a(96),k=d(j),l=a(111),m=d(l),n=a(109),o=d(n);e.__dashjs_factory_name="TextController",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{109:109,111:111,8:8,95:95,96:96}],95:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b){I=null,P=null,Q=!1,R=NaN,S=[],V=null,z||d();var c=b.getStreamProcessor();if(M=c.getMediaInfoArr(),N.setConfig({videoModel:T}),N.initialize(),O=!G.getIsTextTrack(a),D=k["default"](t).getInstance(),L=i["default"](t).getInstance(),L.setConfig({boxParser:D}),O){P=c.getFragmentModel(),this.buffered=m["default"](t).create(),S=H.getTracksFor("fragmentedText",U.getActiveStreamInfo());for(var e=H.getCurrentTrackFor("fragmentedText",U.getActiveStreamInfo()),f=0;f<S.length;f++)if(S[f]===e){W=f;break}}}function b(){N.deleteAllTextTracks(),I=null,L=null,M=null,N=null,O=!1,P=null,Q=!1,R=NaN,S=[],T=null,U=null,z=!1,X=null}function c(a){var b=a.chunk;b.mediaInfo.embeddedCaptions&&n(b.bytes,b)}function d(){X=[],M=[],T=s["default"](t).getInstance(),N=u["default"](t).getInstance(),N.setConfig({videoModel:T}),N.initialize(),D=k["default"](t).getInstance(),L=i["default"](t).getInstance(),L.setConfig({boxParser:D}),O=!1,W=null,Y=!1,Z=0,aa=[],_=[],$=null,z=!0,ba=w["default"](t).getInstance(),x.on(E["default"].VIDEO_CHUNK_RECEIVED,c,this)}function e(){x.off(E["default"].VIDEO_CHUNK_RECEIVED,c,this),null!==N&&N.deleteAllTextTracks(),z=!1,X=[],aa=[null,null],_=[],$=null}function f(a){z||d(),"CC1"===a.id||"CC3"===a.id?X.push(a):v("Warning: Embedded track "+a.id+" not supported!")}function h(a){a&&(a.errHandler&&(F=a.errHandler),a.dashManifestModel&&(G=a.dashManifestModel),a.mediaController&&(H=a.mediaController),a.videoModel&&(T=a.videoModel),a.streamController&&(U=a.streamController),a.textTracks&&(N=a.textTracks),a.vttParser&&(J=a.vttParser),a.ttmlParser&&(K=a.ttmlParser))}function j(){var a={errHandler:F,dashManifestModel:G,mediaController:H,videoModel:T,fragmentModel:P,streamController:U,textTracks:N,isFragmented:O,embeddedTracks:X,fragmentedTracks:S};return a}function l(a){W=a}function n(a,b){function c(a,b){var c=new g["default"],d={subtitle:"subtitles",caption:"captions"},e=function(){var a=b.roles.length>0?d[b.roles[0]]:d.caption;return a=a===d.caption||a===d.subtitle?a:d.caption},f=function(){var a=!1;return b.codec&&b.codec.search("stpp")>=0&&(a=!0),b.mimeType&&b.mimeType.search("ttml")>=0&&(a=!0),a};c.captionData=a,c.lang=b.lang,c.label=b.id,c.index=b.index,c.isTTML=f(),c.video=T.getElement(),c.defaultTrack=p(b),c.isFragmented=O,c.isEmbedded=!!b.isEmbedded,c.kind=e(),c.roles=b.roles;var h=(M?M.length:0)+X.length;N.addTextTrack(c,h)}var d,e,f,h,i,j,k,l=b.mediaInfo,m=l.type,n=l.mimeType,q=l.codec||n;if(!q)return void v("No text type defined");if("fragmentedText"===m)if(Q)if(j=L.getSamplesInfo(a),e=j.sampleList,!V&&e.length>0&&(V=e[0].cts-b.start*R),q.search("stpp")>=0)for(I=null!==I?I:r(q),f=0;f<e.length;f++){var s=e[f],t=s.cts,u=t-V;this.buffered.add(u/R,(u+s.duration)/R);var w=new DataView(a,s.offset,s.subSizes[0]);k=y["default"].Utils.dataViewToString(w,"utf-8");var x=[],z=s.offset+s.subSizes[0];for(h=1;h<s.subSizes.length;h++){var B=new Uint8Array(a,z,s.subSizes[h]),C=String.fromCharCode.apply(null,B);x.push(C),z+=s.subSizes[h]}try{d=I.parse(k,t/R,(t+s.duration)/R,x),N.addCaptions(W,V/R,d)}catch(D){v("TTML parser error: "+D.message)}}else{var E=[];for(f=0;f<e.length;f++){var G=e[f];G.cts-=V,this.buffered.add(G.cts/R,(G.cts+G.duration)/R);var H=a.slice(G.offset,G.offset+G.size),J=y["default"].parseBuffer(H);for(h=0;h<J.boxes.length;h++){var K=J.boxes[h];if(v("VTT box1: "+K.type),"vtte"!==K.type&&"vttc"===K.type)for(v("VTT vttc boxes.length = "+K.boxes.length),i=0;i<K.boxes.length;i++){var P=K.boxes[i];if(v("VTT box2: "+P.type),"payl"===P.type){var S=P.cue_text;v("VTT cue_text = "+S);var U=G.cts/R,Y=(G.cts+G.duration)/R;E.push({start:U,end:Y,data:S,styles:{}}),v("VTT "+U+"-"+Y+" : "+S)}}}}E.length>0&&N.addCaptions(W,0,E)}else{for(Q=!0,f=0;f<M.length;f++)c(null,M[f]);R=L.getMediaTimescaleFromMoov(a)}else if("text"===m){var w=new DataView(a,0,a.byteLength);k=y["default"].Utils.dataViewToString(w,"utf-8");try{d=r(q).parse(k),c(d,l)}catch(D){F.timedTextError(D,"parse",k)}}else if("video"===m)if("InitializationSegment"===b.segmentType){if(0===Z)for(Z=L.getMediaTimescaleFromMoov(a),f=0;f<X.length;f++)c(null,X[f])}else{if(0===Z)return void v("CEA-608: No timescale for embeddedTextTrack yet");var ca=function(a,b){function c(a,c,d){var e=null;if(T.getTTMLRenderingDiv())e=ba.createHTMLCaptionsFromScreen(T.getElement(),a,c,d);else{var f=d.getDisplayText();e=[{start:a,end:c,data:f,styles:{}}]}e&&N.addCaptions(b,0,e)}return c};j=L.getSamplesInfo(a);var da=j.sequenceNumber;if(!aa[0]&&!aa[1]){var ea=void 0,fa=void 0,ga=void 0;for(f=0;f<X.length;f++){if("CC1"===X[f].id?(ea=0,ga=N.getTrackIdxForId("CC1")):"CC3"===X[f].id&&(ea=1,ga=N.getTrackIdxForId("CC3")),-1===ga)return void v("CEA-608: data before track is ready.");fa=ca(this,ga),aa[f]=new A["default"].Cea608Parser(f,{newCue:fa},null)}}if(Z&&-1==_.indexOf(da)){if(null!==$&&da!==$+1)for(f=0;f<aa.length;f++)aa[f]&&aa[f].reset();for(var ha=o(a),ia=0;ia<aa.length;ia++){var ja=ha.fields[ia],ka=aa[ia];if(ka){for(f=0;f<ja.length;f++)ka.addData(ja[f][0]/Z,ja[f][1]);ha.endTime&&ka.cueSplitAtTime(ha.endTime/Z)}}$=da,_.push(da)}}}function o(a){var b=D.parse(a),c=b.getBox("moof"),d=b.getBox("tfdt"),e=b.getBox("tfhd"),f=b.getBoxes("trun"),g=null;if(0===f.length)return null;g=f[0],f.length>1&&v("Warning: Too many truns");for(var h=c.offset+g.data_offset,i=g.sample_count,j=h,k=d.baseMediaDecodeTime,l=new DataView(a),m={startTime:null,endTime:null,fields:[[],[]]},n=0,o=0;i>o;o++){var p=g.samples[o];void 0===p.sample_duration&&(p.sample_duration=e.default_sample_duration),void 0===p.sample_size&&(p.sample_size=e.default_sample_size),void 0===p.sample_composition_time_offset&&(p.sample_composition_time_offset=0);for(var q=k+n+p.sample_composition_time_offset,r=A["default"].findCea608Nalus(l,j,p.sample_size),s=0;s<r.length;s++)for(var t=A["default"].extractCea608DataFromRange(l,r[s]),u=0;2>u;u++)t[u].length>0&&m.fields[u].push([q,t[u]]);n+=p.sample_duration,j+=p.sample_size}m.fields[0].sort(function(a,b){return a[0]-b[0]}),m.fields[1].sort(function(a,b){return a[0]-b[0]});var w=k+n;return m.startTime=k,m.endTime=w,m}function p(a){var b=!1;return X.length>1&&a.isEmbedded?b=a.id&&"CC1"===a.id:1===X.length?a.id&&"CC"===a.id.substring(0,2)&&(b=!0):0===X.length&&(b=a.index===M[0].index),b}function r(a){var b;return a.search("vtt")>=0?b=J:(a.search("ttml")>=0||a.search("stpp")>=0)&&(b=K,b.setConfig({videoModel:T})),b}var t=this.context,v=q["default"](t).getInstance().log,x=C["default"](t).getInstance(),z=!1,B=void 0,D=void 0,F=void 0,G=void 0,H=void 0,I=void 0,J=void 0,K=void 0,L=void 0,M=void 0,N=void 0,O=void 0,P=void 0,Q=void 0,R=void 0,S=void 0,T=void 0,U=void 0,V=void 0,W=void 0,X=void 0,Y=void 0,Z=void 0,$=void 0,_=void 0,aa=void 0,ba=void 0;return B={initialize:a,append:n,abort:b,addEmbeddedTrack:f,resetEmbedded:e,setConfig:h,getConfig:j,setCurrentFragmentedTrackIdx:l}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(125),g=d(f),h=a(31),i=d(h),j=a(98),k=d(j),l=a(100),m=d(l),n=a(8),o=d(n),p=a(6),q=d(p),r=a(76),s=d(r),t=a(96),u=d(t),v=a(91),w=d(v),x=a(4),y=d(x),z=a(1),A=d(z),B=a(7),C=d(B),D=a(11),E=d(D);e.__dashjs_factory_name="TextSourceBuffer",c["default"]=o["default"].getSingletonFactory(e),b.exports=c["default"]},{1:1,100:100,11:11,125:125,31:31,4:4,6:6,7:7,76:76,8:8,91:91,96:96,98:98}],96:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(D=window.VTTCue||window.TextTrackCue,G=[],H=[],I=-1,J=0,K=0,L=0,M=0,N=null,O=null,R=!1,S=2147483647,P=!!navigator.userAgent.match(/Chrome/)&&!navigator.userAgent.match(/Edge/),void 0!==document.fullscreenElement?Q="fullscreenElement":void 0!==document.webkitIsFullScreen?Q="webkitIsFullScreen":document.msFullscreenElement?Q="msFullscreenElement":document.mozFullScreen&&(Q="mozFullScreen"))}function b(a){var b=G[a].kind,c=void 0!==G[a].label?G[a].label:G[a].lang,d=G[a].lang,e=P?document.createElement("track"):F.addTextTrack(b,c,d);return P&&(e.kind=b,e.label=c,e.srclang=d),e}function c(a){R=a,N&&!document[Q]&&(N.style.zIndex=a?S:null)}function d(a,c){if(G.length===c)return void B("Trying to add too many tracks.");if(G.push(a),void 0===F&&(F=a.video),G.length===c){G.sort(function(a,b){return a.index-b.index}),N=E.getTTMLRenderingDiv();for(var d=-1,e=0;e<G.length;e++){var f=b.call(this,e);H.push(f),G[e].defaultTrack&&(f["default"]=!0,d=e),P&&F.appendChild(f);var g=F.textTracks[e];g.nonAddedCues=[],N&&(G[e].isTTML||G[e].isEmbedded)?g.renderingType="html":g.renderingType="default",this.addCaptions(e,0,G[e].captionData),A.trigger(i["default"].TEXT_TRACK_ADDED)}if(q.call(this,d),d>=0){for(var h=0;h<F.textTracks.length;h++)F.textTracks[h].mode=h===d?"showing":"hidden";this.addCaptions(d,0,null)}A.trigger(i["default"].TEXT_TRACKS_ADDED,{index:I,tracks:G})}}function e(a,b,c,d,e,f){var g=a/b,h=c/d,i=0,j=0;g>h?(j=b,i=j/d*c):(i=a,j=i/c*d);var k=0,l=0,m=0,n=0,o=i/j;return o>e?(n=j,m=j/(1/e),k=(a-m)/2,l=0):(m=i,n=i/e,k=0,l=(b-n)/2),f?{x:k+.1*m,y:l+.1*n,w:.8*m,h:.8*n}:{x:k,y:l,w:m,h:n}}function f(){var a=this.getCurrentTextTrack();if(a&&"html"===a.renderingType){var b=F.clientWidth/F.clientHeight,c=!1;a.isFromCEA608&&(b=3.5/3,c=!0);var d=e.call(this,F.clientWidth,F.clientHeight,F.videoWidth,F.videoHeight,b,c),f=d.w,g=d.h;if(f!=L||g!=M){J=d.x,K=d.y,L=f,M=g,N.style.left=J+"px",N.style.top=K+"px",N.style.width=L+"px",N.style.height=M+"px";for(var h=0;a.activeCues&&h<a.activeCues.length;++h){var i=a.activeCues[h];i.scaleCue(i)}Q&&document[Q]||R?N.style.zIndex=S:N.style.zIndex=null}}}function h(a,b){var c=Math.round(.01*a*b).toString()+"px";return c}function j(a){var b=L,c=M;if(b*c!==0&&a.layout){var d=a.layout,e=h(d.left,b),f=h(d.top,c),g=h(d.width,b),i=h(d.height,c);N.style.left=e,N.style.top=f,N.style.width=g,N.style.height=i;var j=N.firstChild;j&&j.style&&(j.style.left="0px",j.style.top="0px",j.style.width=g,j.style.height=i,Q&&document[Q]||R?j.style.zIndex=S:j.style.zIndex=null)}}function k(a){var b,c,d,e,f,g=L,h=M,i=[g/a.cellResolution[0],h/a.cellResolution[1]];if(a.linePadding)for(b in a.linePadding)if(a.linePadding.hasOwnProperty(b)){var j=a.linePadding[b];c=(j*i[0]).toString();for(var k=document.getElementsByClassName("spanPadding"),l=0;l<k.length;l++)k[l].style.cssText=k[l].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+c),k[l].style.cssText=k[l].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+c)}if(a.fontSize)for(b in a.fontSize)if(a.fontSize.hasOwnProperty(b)){"%"===a.fontSize[b][0]?d=a.fontSize[b][1]/100:"c"===a.fontSize[b][0]&&(d=a.fontSize[b][1]),c=(d*i[1]).toString(),f="defaultFontSize"!==b?document.getElementsByClassName(b):document.getElementsByClassName("paragraph");for(var m=0;m<f.length;m++)f[m].style.cssText=f[m].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+c)}if(a.lineHeight)for(b in a.lineHeight)if(a.lineHeight.hasOwnProperty(b)){"%"===a.lineHeight[b][0]?e=a.lineHeight[b][1]/100:"c"===a.fontSize[b][0]&&(e=a.lineHeight[b][1]),c=(e*i[1]).toString(),f=document.getElementsByClassName(b);for(var n=0;n<f.length;n++)f[n].style.cssText=f[n].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+c)}}function l(a,b,c){var d=a>=0?F.textTracks[a]:null,e=this;if(d){if("showing"!==d.mode)return void(c&&c.length>0&&(d.nonAddedCues=d.nonAddedCues.concat(c)));if(c||(c=d.nonAddedCues,d.nonAddedCues=[]),c&&0!==c.length)for(var g in c){var h,i=c[g];d.cellResolution=i.cellResolution,d.isFromCEA608=i.isFromCEA608,O||"html"!==i.type&&"image"!==i.type||(O=setInterval(f.bind(this),500)),"image"===i.type?(h=new D(i.start-b,i.end-b,""),h.image=i.data,h.id=i.id,h.size=0,h.type="image",h.layout=i.layout,h.scaleCue=j.bind(e),h.onenter=function(){if(N&&"showing"===d.mode){var a=new Image;a.id="ttmlImage_"+this.id,a.src=this.image,a.style.cssText="pointer-events: none; display: block; visibility: visible !important; position: relative !important;",N.appendChild(a),j.call(e,this)}},h.onexit=function(){if(N)for(var a=N.childNodes,b=0;b<a.length;b++)a[b].id==="ttmlImage_"+this.id&&N.removeChild(a[b])}):"html"===i.type?(h=new D(i.start-b,i.end-b,""),h.cueHTMLElement=i.cueHTMLElement,h.regions=i.regions,h.regionID=i.regionID,h.cueID=i.cueID,h.videoWidth=i.videoWidth,h.videoHeight=i.videoHeight,h.cellResolution=i.cellResolution,h.fontSize=i.fontSize,h.lineHeight=i.lineHeight,h.linePadding=i.linePadding,h.scaleCue=k.bind(e),N.style.left=J+"px",N.style.top=K+"px",N.style.width=L+"px",N.style.height=M+"px",h.onenter=function(){"showing"===d.mode&&(B("Cue "+this.startTime+"-"+this.endTime+" : "+this.cueHTMLElement.id+" : "+this.cueHTMLElement.innerText),N.appendChild(this.cueHTMLElement),k.call(e,this))},h.onexit=function(){for(var a=N.childNodes,b=0;b<a.length;++b)a[b].id===this.cueID&&N.removeChild(a[b])}):(h=new D(i.start-b,i.end-b,i.data),i.styles&&(void 0!==i.styles.align&&"align"in h&&(h.align=i.styles.align),void 0!==i.styles.line&&"line"in h&&(h.line=i.styles.line),void 0!==i.styles.position&&"position"in h&&(h.position=i.styles.position),void 0!==i.styles.size&&"size"in h&&(h.size=i.styles.size))),d.addCue(h)}}}function n(){return I>=0?F.textTracks[I]:null}function o(){return I}function p(a){for(var b=-1,c=0;c<F.textTracks.length;c++)if(F.textTracks[c].label===a){b=c;break}return b}function q(a){if(I=a,x.call(this),a>=0){var b=F.textTracks[a];"html"===b.renderingType?v.call(this):w.call(this)}else w.call(this)}function r(a){return F.textTracks[a]}function s(a){if(a.cues){for(var b=a.cues,c=b.length-1,d=c;d>=0;d--)a.removeCue(b[d]);a.mode="disabled"}}function t(){for(var a=H.length,b=0;a>b;b++)if(P)F.removeChild(H[b]);else{var c=r.call(this,b);c.nonAddedCues=[],s.call(this,c)}H=[],G=[],O&&(clearInterval(O),O=null),x.call(this)}function u(a){F.removeChild(H[a]),H.splice(a,1)}function v(){if(P){var a=document.getElementById("native-cue-style");if(!a){a=document.createElement("style"),a.id="native-cue-style",document.head.appendChild(a);var b=a.sheet;F.id?b.insertRule("#"+F.id+"::cue {background: transparent}",0):0!==F.classList.length?b.insertRule("."+F.className+"::cue {background: transparent}",0):b.insertRule("video::cue {background: transparent}",0)}}}function w(){if(P){var a=document.getElementById("native-cue-style");a&&document.head.removeChild(a)}}function x(){if(N)for(;N.firstChild;)N.removeChild(N.firstChild)}function y(a){a&&a.videoModel&&(E=a.videoModel)}var z=this.context,A=g["default"](z).getInstance(),B=m["default"](z).getInstance().log,C=void 0,D=void 0,E=void 0,F=void 0,G=void 0,H=void 0,I=void 0,J=void 0,K=void 0,L=void 0,M=void 0,N=void 0,O=void 0,P=void 0,Q=void 0,R=void 0,S=void 0;return C={initialize:a,displayCConTop:c,addTextTrack:d,addCaptions:l,getTextTrack:r,getCurrentTextTrack:n,getCurrentTrackIdx:o,setCurrentTrackIdx:q,getTrackIdxForId:p,deleteTrackCues:s,deleteAllTextTracks:t,deleteTextTrack:u,setConfig:y}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(7),g=d(f),h=a(11),i=d(h),j=a(8),k=d(j),l=a(6),m=d(l);e.__dashjs_factory_name="TextTracks",c["default"]=k["default"].getSingletonFactory(e),b.exports=c["default"]},{11:11,6:6,7:7,8:8}],97:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){n=m["default"](f).create({updateEventName:i["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,loadFailedEventName:i["default"].FRAGMENT_LOADING_COMPLETED}),p=q["default"](f).create({blacklistController:n}),r=o["default"](f).create({blacklistController:n}),s=p}function b(a){a.selector&&(s=a.selector)}function c(a){s=j.getIsDVB(a)?r:p}function d(a){var b=a.baseUrls,c=a.selectedIdx;if(!isNaN(c))return b[c];var d=s.select(b);return d?(a.selectedIdx=b.indexOf(d),d):void h.trigger(i["default"].URL_RESOLUTION_FAILED,{error:new Error(t,u)})}function e(){n.reset()}var f=this.context,h=g["default"](f).getInstance(),j=k["default"](f).getInstance(),l=void 0,n=void 0,p=void 0,r=void 0,s=void 0;return l={chooseSelectorFromManifest:c,select:d,reset:e,setConfig:b},a(),l}Object.defineProperty(c,"__esModule",{value:!0});var f=a(7),g=d(f),h=a(11),i=d(h),j=a(20),k=d(j),l=a(58),m=d(l),n=a(113),o=d(n),p=a(112),q=d(p),r=a(8),s=d(r),t=1,u="Failed to resolve a valid URL";e.__dashjs_factory_name="BaseURLSelector";var v=s["default"].getClassFactory(e);v.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=t,v.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE=u,c["default"]=v,b.exports=c["default"]},{11:11,112:112,113:113,20:20,58:58,7:7,8:8}],98:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){if(!a)return null;void 0===a.fileStart&&(a.fileStart=0);var b=k["default"].parseBuffer(a),d=g["default"](c).create();return d.setData(b),d}var b=void 0,c=this.context;return b={parse:a}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(105),g=d(f),h=a(8),i=d(h),j=a(4),k=d(j);e.__dashjs_factory_name="BoxParser",c["default"]=i["default"].getSingletonFactory(e),b.exports=c["default"]},{105:105,4:4,8:8}],99:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){g=!1}function b(){var a="WebKitMediaSource"in window,b="MediaSource"in window;return a||b}function c(){return g}function d(a){g=a}function e(a,b){var c=a.canPlayType(b);return"probably"===c||"maybe"===c}var f=void 0,g=void 0;return f={supportsMediaSource:b,supportsEncryptedMedia:c,supportsCodec:e,setEncryptedMediaSupported:d},a(),f}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f);e.__dashjs_factory_name="Capabilities",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{8:8}],100:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b){var c=0;for(c=0;c<this.customTimeRangeArray.length&&a>this.customTimeRangeArray[c].start;c++);for(this.customTimeRangeArray.splice(c,0,{start:a,end:b}),c=0;c<this.customTimeRangeArray.length-1;c++)this.mergeRanges(c,c+1)&&c--;this.length=this.customTimeRangeArray.length}function b(){this.customTimeRangeArray=[],this.length=0}function c(a,b){for(var c=0;c<this.customTimeRangeArray.length;c++)if(a<=this.customTimeRangeArray[c].start&&b>=this.customTimeRangeArray[c].end)this.customTimeRangeArray.splice(c,1),c--;else{if(a>this.customTimeRangeArray[c].start&&b<this.customTimeRangeArray[c].end){this.customTimeRangeArray.splice(c+1,0,{start:b,end:this.customTimeRangeArray[c].end}),this.customTimeRangeArray[c].end=a;break}a>this.customTimeRangeArray[c].start&&a<this.customTimeRangeArray[c].end?this.customTimeRangeArray[c].end=a:b>this.customTimeRangeArray[c].start&&b<this.customTimeRangeArray[c].end&&(this.customTimeRangeArray[c].start=b)}this.length=this.customTimeRangeArray.length}function d(a,b){var c=this.customTimeRangeArray[a],d=this.customTimeRangeArray[b];return c.start<=d.start&&d.start<=c.end&&c.end<=d.end?(c.end=d.end,this.customTimeRangeArray.splice(b,1),!0):d.start<=c.start&&c.start<=d.end&&d.end<=c.end?(c.start=d.start,this.customTimeRangeArray.splice(b,1),!0):d.start<=c.start&&c.start<=d.end&&c.end<=d.end?(this.customTimeRangeArray.splice(a,1),!0):c.start<=d.start&&d.start<=c.end&&d.end<=c.end&&(this.customTimeRangeArray.splice(b,1),!0)}function e(a){return this.customTimeRangeArray[a].start}function f(a){return this.customTimeRangeArray[a].end}var g=[],h=0;return{customTimeRangeArray:g,length:h,add:a,clear:b,remove:c,mergeRanges:d,start:e,end:f}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f);e.__dashjs_factory_name="CustomTimeRanges",c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{8:8}],101:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){if(void 0!==t)return t;t=!1;var b,c="1",d="1";try{"undefined"!=typeof window&&(b=window[a])}catch(e){return r("Warning: DOMStorage access denied: "+e.message),t}if(!b||a!==o&&a!==p)return t;try{b.setItem(c,d),b.removeItem(c),t=!0}catch(e){r("Warning: DOMStorage is supported, but cannot be used: "+e.message)}return t}function b(){a(o)&&l.forEach(function(a){var b=localStorage.getItem(a.oldKey);if(b){localStorage.removeItem(a.oldKey);try{localStorage.setItem(a.newKey,b)}catch(c){r(c.message)}}})}function c(){u=i["default"](q).getInstance(),b()}function d(){var a=6e5;return Math.round((new Date).getTime()/a)*a}function e(b,c){return a(b)&&u["get"+c+"CachingInfo"]().enabled}function f(a){if(!e(o,"LastMediaSettings"))return null;var b=n.replace(/\?/,a),c=JSON.parse(localStorage.getItem(b))||{},d=(new Date).getTime()-parseInt(c.timestamp,10)>=u.getLastMediaSettingsCachingInfo().ttl||!1,f=c.settings;return d&&(localStorage.removeItem(b),f=null),f}function g(a){var b=NaN;if(e(o,"LastBitrate")){var c=m.replace(/\?/,a),d=JSON.parse(localStorage.getItem(c))||{},f=(new Date).getTime()-parseInt(d.timestamp,10)>=u.getLastBitrateCachingInfo().ttl||!1,g=parseInt(d.bitrate,10);isNaN(g)||f?f&&localStorage.removeItem(c):(b=g,r("Last saved bitrate for "+a+" was "+g))}return b}function h(a,b){if(e(o,"LastMediaSettings")){var c=n.replace(/\?/,a);try{localStorage.setItem(c,JSON.stringify({settings:b,timestamp:d()}))}catch(f){r(f.message)}}}function j(a,b){if(e(o,"LastBitrate")&&b){var c=m.replace(/\?/,a);try{localStorage.setItem(c,JSON.stringify({bitrate:b/1e3,timestamp:d()}))}catch(f){r(f.message)}}}var q=this.context,r=k["default"](q).getInstance().log,s=void 0,t=void 0,u=void 0;return s={getSavedBitrateSettings:g,setSavedBitrateSettings:j,getSavedMediaSettings:f,setSavedMediaSettings:h,isSupported:a},c(),s}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f),h=a(73),i=d(h),j=a(6),k=d(j),l=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],m="dashjs_?_bitrate",n="dashjs_?_settings",o="localStorage",p="sessionStorage";e.__dashjs_factory_name="DOMStorage";var q=g["default"].getSingletonFactory(e);c["default"]=q,b.exports=c["default"]},{6:6,73:73,8:8}],102:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){return o}function c(a){o=a}function d(a,b){var c=!0,d=0,e=void 0,f=void 0;if(void 0===b&&(b=!1),a.tag>16777215?(n.getUint32(o)!==a.tag&&(c=!1),d=4):a.tag>65535?(e=n.getUint16(o),f=n.getUint8(o+2),256*e+f!==a.tag&&(c=!1),d=3):a.tag>255?(n.getUint16(o)!==a.tag&&(c=!1),d=2):(n.getUint8(o)!==a.tag&&(c=!1),d=1),!c&&a.required&&!b)throw new i["default"]("required tag not found");return c&&(o+=d),c}function e(a,b){var c=d(a,b);return c&&h(),c}function f(a){var b=void 0;return d(a),b=h(),m[a.parse](b)}function g(a,b){var c=d(a,b),e=void 0;return c&&(e=h(),o+=e),c}function h(a){var b=1,c=128,d=8,e=-1,f=0,g=n.getUint8(o),h=void 0;for(h=0;d>h;h+=1){if((g&c)===c){f=void 0===a?g&~c:g,e=h;break}c>>=1}for(h=0;e>h;h+=1,b+=1)f=f<<8|255&n.getUint8(o+b);return o+=b,f}function j(a){var b=void 0;switch(a){case 4:b=n.getFloat32(o),o+=4;break;case 8:b=n.getFloat64(o),o+=8}return b}function k(a){var b=0,c=void 0;for(c=0;a>c;c+=1)b<<=8,b|=255&n.getUint8(o+c);return o+=a,b}function l(){return o<n.byteLength}var m=void 0,n=new DataView(a.data),o=0;return m={getPos:b,setPos:c,consumeTag:d,consumeTagAndSize:e,parseTag:f,skipOverElement:g,getMatroskaCodedNum:h,getMatroskaFloat:j,getMatroskaUint:k,moreData:l}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f),h=a(116),i=d(h);e.__dashjs_factory_name="EBMLParser",c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{116:116,8:8}],103:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){l.trigger(i["default"].ERROR,{error:"capability",event:a})}function b(a,b,c){l.trigger(i["default"].ERROR,{error:"download",event:{id:a,url:b,request:c}})}function c(a,b,c,d){l.trigger(i["default"].ERROR,{error:"manifestError",event:{message:a,id:b,manifest:c,event:d}})}function d(a,b,c){l.trigger(i["default"].ERROR,{error:"cc",event:{message:a,id:b,cc:c}})}function e(a){l.trigger(i["default"].ERROR,{error:"mediasource",event:a})}function f(a){l.trigger(i["default"].ERROR,{error:"key_session",event:a})}function h(a){l.trigger(i["default"].ERROR,{error:"key_message",event:a})}var j=void 0,k=this.context,l=g["default"](k).getInstance();return j={capabilityError:a,downloadError:b,manifestError:c,timedTextError:d,mediaSourceError:e,mediaKeySessionError:f,mediaKeyMessageError:h}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(7),g=d(f),h=a(11),i=d(h),j=a(8),k=d(j),l="mediasource",m="mediakeys",n="manifest",o="SIDX",p="content",q="initialization",r="xlink",s="codec",t="parse",u="nostreams",v="parse";e.__dashjs_factory_name="ErrorHandler";var w=k["default"].getSingletonFactory(e);w.CAPABILITY_ERROR_MEDIASOURCE=l,w.CAPABILITY_ERROR_MEDIAKEYS=m,w.DOWNLOAD_ERROR_ID_MANIFEST=n,w.DOWNLOAD_ERROR_ID_SIDX=o,w.DOWNLOAD_ERROR_ID_CONTENT=p,w.DOWNLOAD_ERROR_ID_INITIALIZATION=q,w.DOWNLOAD_ERROR_ID_XLINK=r,w.MANIFEST_ERROR_ID_CODEC=s,w.MANIFEST_ERROR_ID_PARSE=t,w.MANIFEST_ERROR_ID_NOSTREAMS=u,w.TIMED_TEXT_ERROR_ID_PARSE=v,c["default"]=w,b.exports=c["default"]},{11:11,7:7,8:8}],104:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){var b=a.streamId,c=a.representationId;d[b]=d[b]||{},d[b][c]=a}function b(a,b){return d&&d[a]&&d[a][b]?d[a][b]:null}function c(){d={}}var d={},e={save:a,extract:b,reset:c};return e}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f);e.__dashjs_factory_name="InitCache",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{8:8}],105:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){return a&&k&&k.boxes&&0!==k.boxes.length?i(k.fetch(a)):null}function b(a){for(var b,c=k.fetchAll(a),d=[],e=0,f=c.length;f>e;e++)b=i(c[e]),b&&d.push(b);return d}function c(a){k=a}function d(){if(!k||!k.boxes||!k.boxes.length)return null;var a=k.boxes[k.boxes.length-1].type,c=b(a);return c[c.length-1]}function e(){return k._cursor.offset}function f(){l={offset:"_offset",size:"size",
type:"type"},m={references:"references",timescale:"timescale",earliest_presentation_time:"earliest_presentation_time",first_offset:"first_offset"},n={reference_type:"reference_type",referenced_size:"referenced_size",subsegment_duration:"subsegment_duration"},o={id:"id",value:"value",timescale:"timescale",scheme_id_uri:"scheme_id_uri",presentation_time_delta:"presentation_time_delta",event_duration:"event_duration",message_data:"message_data"},p={timescale:"timescale"},q={sequence_number:"sequence_number"},r={entry_count:"entry_count",entries:"entries"},s={base_data_offset:"base_data_offset",sample_description_index:"sample_description_index",default_sample_duration:"default_sample_duration",default_sample_size:"default_sample_size",default_sample_flags:"default_sample_flags",flags:"flags"},t={version:"version",baseMediaDecodeTime:"baseMediaDecodeTime",flags:"flags"},u={sample_count:"sample_count",first_sample_flags:"first_sample_flags",data_offset:"data_offset",flags:"flags",samples:"samples"},v={sample_size:"sample_size",sample_duration:"sample_duration",sample_composition_time_offset:"sample_composition_time_offset"}}function h(a,b,c){for(var d in c)b[d]=a[c[d]]}function i(a){if(!a)return null;var b,c,d=new g["default"];switch(h(a,d,l),a.hasOwnProperty("_incomplete")&&(d.isComplete=!a._incomplete),d.type){case"sidx":if(h(a,d,m),d.references)for(b=0,c=d.references.length;c>b;b++)h(a.references[b],d.references[b],n);break;case"emsg":h(a,d,o);break;case"mdhd":h(a,d,p);break;case"mfhd":h(a,d,q);break;case"subs":h(a,d,r);break;case"tfhd":h(a,d,s);break;case"tfdt":h(a,d,t);break;case"trun":if(h(a,d,u),d.samples)for(b=0,c=d.samples.length;c>b;b++)h(a.samples[b],d.samples[b],v)}return d}var j=void 0,k=void 0,l=void 0,m=void 0,n=void 0,o=void 0,p=void 0,q=void 0,r=void 0,s=void 0,t=void 0,u=void 0,v=void 0;return j={getBox:a,getBoxes:b,setData:c,getLastBox:d,getOffset:e},f(),j}Object.defineProperty(c,"__esModule",{value:!0});var f=a(119),g=d(f),h=a(8),i=d(h);e.__dashjs_factory_name="IsoFile",c["default"]=i["default"].getClassFactory(e),b.exports=c["default"]},{119:119,8:8}],106:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b){e=a,f=b}function b(){var a=f.getCurrentRepresentationInfo(),b=a.DVRWindow.end;return a.useCalculatedLiveEdgeTime&&(b=e.getExpectedLiveEdge(),e.setClientTimeOffset(b-a.DVRWindow.end)),b}function c(){e=null,f=null}var d=void 0,e=void 0,f=void 0;return d={initialize:a,getLiveEdge:b,reset:c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f);e.__dashjs_factory_name="LiveEdgeFinder";var h=g["default"].getSingletonFactory(e);c["default"]=h,b.exports=c["default"]},{8:8}],107:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b){return JSON.stringify(a)===JSON.stringify(b)}var b=void 0;return b={areSimpleEquivalent:a}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f);e.__dashjs_factory_name="ObjectUtils",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{8:8}],108:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){return a}function b(a){return a}var c=void 0;return c={modifyRequestURL:a,modifyRequestHeader:b}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f);e.__dashjs_factory_name="RequestModifier",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{8:8}],109:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){a&&a.videoModel&&(da=a.videoModel)}function b(a){if(a.hasOwnProperty("begin")&&a.hasOwnProperty("end")){var b=o(a.begin),c=o(a.end);return[b,c]}return null}function c(){var a="cue_TTML_"+fa;return fa++,a}function d(a,b,c){function d(a,b){if(a.hasOwnProperty(b)){var c=a[b];f.indexOf(c)<0&&f.push(c)}}for(var e=[],f=[],g=[],h=0;h<a.length;h++){var i=a[h];d(i,"begin"),d(i,"end")}if(0===f.length)return g;if("undefined"!=typeof b&&"undefined"!=typeof c){for(var h=0;h<f.length;h++){var j=o(f[h]);j>b&&c>j&&e.push(j)}e.push(b),e.push(c)}else for(var h=0;h<f.length;h++)e.push(o(f[h]));e.sort(function(a,b){return a-b});for(var h=0;h<e.length-1;h++)g.push([e[h],e[h+1]]);return g}function e(a,b){return"undefined"!=typeof b&&b>a&&(a=b),a}function f(a,b){return"undefined"!=typeof b&&a>b&&(a=b),a}function g(a,b,c){var d=o(a.begin),g=o(a.end);return d=e(d,b),g=f(g,c),"undefined"!=typeof b&&"undefined"!=typeof c&&(b>g||d>c)?(N("TTML: Cue "+d+"-"+g+" outside interval "+b+"-"+c),null):[d,g]}function h(a,c){var d=!0;if(a.hasOwnProperty("span")){var e=b(a.span);null!==e&&(d=e[0]<c[1]&&e[1]>c[0])}return d}function j(a,e,f,i){var j=void 0,k=void 0,l=void 0,m=void 0,n=void 0,o=void 0,r="";if(Q=ea.xml_str2json(a),!Q)throw new Error("TTML document could not be parsed");if(da.getTTMLRenderingDiv()&&(n="html"),j=Q.tt,!j)throw new Error("TTML document lacks tt element");var s=p(j,"http://www.w3.org/ns/ttml");if(s&&q(j,s),m=j["tts:extent"],k=j.head,!k)throw new Error("TTML document lacks head element");k.layout&&(S=k.layout.region_asArray),k.styling&&(R=k.styling.style_asArray);var t={};if(i)for(o=0;o<i.length;o++){var x="urn:mpeg:14496-30:subs:"+(o+1).toString(),y="data:image/png;base64,"+btoa(i[o]);t[x]=y}if(k.metadata){var z=k.metadata.image_asArray;if(z)for(o=0;o<z.length;o++){var x="#"+z[o]["xml:id"],A=z[o].imagetype.toLowerCase(),y="data:image/"+A+";base64,"+z[o].__text;t[x]=y}}if(l=j.body,!l)throw new Error("TTML document lacks body element");var B=G(),F=da.getElement().clientWidth,L=da.getElement().clientHeight,M=[F/B[0],L/B[1]];X["font-size"]=M[1]+"px;";var O=[];if(S)for(o=0;o<S.length;o++)O.push(D(JSON.parse(JSON.stringify(S[o])),M));var P=p(Q.tt,"http://www.w3.org/ns/ttml#parameter");j.hasOwnProperty(P+":frameRate")&&(j.frameRate=parseInt(j[P+":frameRate"],10));for(var W=[],Y=j.body_asArray[0].__children,Z=0;Z<Y.length;Z++){var $=Y[Z].div,_=null;if(null===(_=b($))){var aa=$.p_asArray;if(null===_&&(!aa||0===aa.length))return r="TTML has div that contains no timing and no paragraphs.",N(r),W;for(var ba=0;ba<aa.length;ba++){var ca=aa[ba],fa=ca.span_asArray,ga=[];if(ca.hasOwnProperty("begin")&&ca.hasOwnProperty("end")){var ha=g(ca,e,f);null!==ha&&ga.push(ha)}else ga=d(fa,e,f);if(0!==ga.length)for(var ia=ca.__children,ja=0;ja<ga.length;ja++){for(var ka=ga[ja],la=[],ma=0;ma<ia.length;ma++){var na=ia[ma];h(na,ka)&&la.push(na)}if(0!==la.length)if("html"===n){U={},V={},T={};var oa=J(ca,$,M),pa=K(ca,M),qa=pa[1];pa=pa[0];var ra=document.createElement("div");ra.className=qa;var sa=I(la,M);sa.className="cueDirUniWrapper",u("unicode-bidi",pa)&&(sa.style.cssText+=v("unicode-bidi",pa),w("unicode-bidi",pa)),u("direction",pa)&&(sa.style.cssText+=v("direction",pa),w("direction",pa)),u("padding-left",pa)&&u("padding-right",pa)&&(sa.innerHTML=H(sa,pa)),u("padding-left",pa)&&u("padding-right",pa)&&(w("padding-left",pa),w("padding-right",pa));var ta="";if(u("regionID",oa)){var ua=v("regionID",oa);ta=ua.slice(ua.indexOf(":")+1,ua.length-1)}pa&&(ra.style.cssText=pa.join(" ")+"display:flex;"),oa&&(oa=oa.join(" ")),ra.appendChild(sa);var va=document.createElement("div");va.appendChild(ra),va.id=c(),va.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+oa,0===Object.keys(T).length&&(T.defaultFontSize="100"),W.push({start:ka[0],end:ka[1],type:"html",cueHTMLElement:va,regions:O,regionID:ta,cueID:va.id,videoHeight:L,videoWidth:F,cellResolution:B,fontSize:T||{defaultFontSize:"100"},lineHeight:U,linePadding:V})}else{var wa="",xa=la;xa.length&&xa.forEach(function(a){if(a.hasOwnProperty("span")){var b=a.span.__children;b.forEach(function(a){b.hasOwnProperty("metadata")||(a.hasOwnProperty("#text")?wa+=a["#text"].replace(/[\r\n]+/gm," ").trim():"br"in a&&(wa+="\n"))})}else wa+=a.hasOwnProperty("br")?"\n":a["#text"].replace(/[\r\n]+/gm," ").trim()}),W.push({start:ka[0],end:ka[1],data:wa,type:"text"})}}else r="TTML: Empty paragraph"}}else{var ya=void 0;if($.region){var za=E(S,$.region);ya=C(za,m)}ya||(ya=C($,m));var Aa=$["smpte:backgroundImage"];void 0!==Aa&&void 0!==t[Aa]&&W.push({start:_[0],end:_[1],id:c(),data:t[Aa],type:"image",layout:ya})}}if(""!==r&&N(r),W.length>0)return W;throw new Error(r)}function n(){P=/^([0-9][0-9]+):([0-5][0-9]):([0-5][0-9])|(60)(\.([0-9])+)?$/,T={},U={},V={},W={top:"auto;",left:"auto;",width:"90%;",height:"10%;","align-items":"flex-start;",overflow:"visible;","-ms-writing-mode":"lr-tb, horizontal-tb;","-webkit-writing-mode":"horizontal-tb;","-moz-writing-mode":"horizontal-tb;","writing-mode":"horizontal-tb;"},X={color:"rgb(255,255,255);",direction:"ltr;","font-family":"monospace, sans-serif;","font-style":"normal;","line-height":"normal;","font-weight":"normal;","text-align":"start;","justify-content":"flex-start;","text-decoration":"none;","unicode-bidi":"normal;","white-space":"normal;",width:"100%;"},Y={monospace:"font-family: monospace;",sansSerif:"font-family: sans-serif;",serif:"font-family: serif;",monospaceSansSerif:"font-family: monospace, sans-serif;",monospaceSerif:"font-family: monospace, serif;",proportionalSansSerif:"font-family: Arial;",proportionalSerif:"font-family: Times New Roman;","default":"font-family: monospace, sans-serif;"},Z={right:["justify-content: flex-end;","text-align: right;"],start:["justify-content: flex-start;","text-align: start;"],center:["justify-content: center;","text-align: center;"],end:["justify-content: flex-end;","text-align: end;"],left:["justify-content: flex-start;","text-align: left;"]},$={start:"text-align: start;",center:"text-align: center;",end:"text-align: end;",auto:""},_={wrap:"white-space: normal;",noWrap:"white-space: nowrap;"},aa={normal:"unicode-bidi: normal;",embed:"unicode-bidi: embed;",bidiOverride:"unicode-bidi: bidi-override;"},ba={before:"align-items: flex-start;",center:"align-items: center;",after:"align-items: flex-end;"},ca={lrtb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rltb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;unicode-bidi: bidi-override;",tbrl:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;",tblr:"-webkit-writing-mode: vertical-lr;writing-mode: vertical-lr;-webkit-text-orientation: upright;text-orientation: upright;",lr:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rl:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;",tb:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;"},ea=new i["default"]({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,matchers:[]})}function o(a){var b,c,d,e=P.test(a);if(!e)return NaN;if(b=a.split(":"),c=parseFloat(b[0])*l+parseFloat(b[1])*m+parseFloat(b[2]),b[3]){if(d=Q.tt.frameRate,!d||isNaN(d))return NaN;c+=parseFloat(b[3])/d}return c}function p(a,b){var c=Object.keys(a).filter(function(c){return("xmlns"===c.split(":")[0]||"xmlns"===c.split(":")[1])&&a[c]===b}).map(function(a){return a.split(":")[2]||a.split(":")[1]});return 1!=c.length?null:c[0]}function q(a,b){for(var c in a)if(a.hasOwnProperty(c)){if(("object"==typeof a[c]||a[c]instanceof Object)&&!Array.isArray(a[c]))q(a[c],b);else if(Array.isArray(a[c]))for(var d=0;d<a[c].length;d++)q(a[c][d],b);var e=b+":",f=c.indexOf(e);if(f>=0){var g=c.slice(f+e.length);a[g]=a[c],delete a[c]}}}function r(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function s(a){var b=a.slice(1),c=b.match(/.{2}/g),d=parseFloat(parseInt(parseInt(c[3],16)/255*1e3,10)/1e3),e=c.slice(0,3).map(function(a){return parseInt(a,16)});return"rgba("+e.join(",")+","+d+");"}function t(a){var b=void 0,c=void 0,d=void 0;return b=a.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),c=parseInt(b[b.length-1],10)/255,d="rgba("+b[0]+","+b[1]+","+b[2]+","+c+");"}function u(a,b){for(var c=0;c<b.length;c++)if(b[c].indexOf(a)>-1)return!0;return!1}function v(a,b){for(var c=0;c<b.length;c++)if(b[c].indexOf(a)>-1)return b[c];return null}function w(a,b){b.splice(b.indexOf(v(a,b)),1)}function x(a,b){for(var c=0;c<a.length;c++)for(var d=0;d<b.length;d++)a[c]&&a[c].split(":")[0].indexOf(b[d].split(":")[0])>-1&&a.splice(c,1);return a.concat(b)}function y(a){var b=new Array(2),c=-1===a.indexOf(":")?0:a.indexOf(":"),d=void 0;return-1===a.indexOf("%")?-1===a.indexOf("c")?-1===a.indexOf("p")?b[0]=b[1]=null:(b[0]="p",d=a.indexOf("p")):(b[0]="c",d=a.indexOf("c")):(b[0]="%",d=a.indexOf("%")),b[1]=a.slice(c,d),b}function z(a,b,c){var d,e,f=[];for(var g in a)if(a.hasOwnProperty(g)){var h=g.replace("ebutts:","");h=h.replace("xml:",""),h=h.replace("tts:",""),h=r(h),a[h]=a[g],delete a[g]}if("line-padding"in a){var i=parseFloat(a["line-padding"].slice(a["line-padding"].indexOf(":")+1,a["line-padding"].indexOf("c")));"id"in a&&(V[a.id]=i);var j=i*b[0]+"px;";f.push("padding-left:"+j),f.push("padding-right:"+j)}if("font-size"in a){var k=y(a["font-size"]),l=parseFloat(k[1]);"id"in a&&(T[a.id]=k),"%"===k[0]?d=l/100*b[1]+"px;":"c"===k[0]&&(d=l*b[1]+"px;"),f.push("font-size:"+d)}if("line-height"in a)if("normal"===a["line-height"])f.push("line-height: normal;");else{var m=y(a["line-height"]),n=parseFloat(m[1]);"id"in a&&(U[a.id]=m),"%"===m[0]?e=n/100*b[1]+"px;":"c"===m[0]&&(e=n*b[1]+"px;"),f.push("line-height:"+e)}"font-family"in a&&(a["font-family"]in Y?f.push(Y[a["font-family"]]):f.push("font-family:"+a["font-family"]+";")),"text-align"in a&&a["text-align"]in Z&&(f.push(Z[a["text-align"]][0]),f.push(Z[a["text-align"]][1])),"multi-row-align"in a&&(u("text-align",f)&&"auto"!=a["multi-row-align"]&&w("text-align",f),a["multi-row-align"]in $&&f.push($[a["multi-row-align"]]));var o;return"background-color"in a&&(o=a["background-color"].indexOf("#")>-1&&a["background-color"].length-1===8?s(a["background-color"]):a["background-color"].indexOf("rgba")>-1?t(a["background-color"]):a["background-color"]+";",f.push("background-color: "+o)),"color"in a&&(o=a.color.indexOf("#")>-1&&a.color.length-1===8?s(a.color):a.color.indexOf("rgba")>-1?t(a.color):a.color+";",f.push("color: "+o)),"wrap-option"in a&&(a["wrap-option"]in _?f.push(_[a["wrap-option"]]):f.push("white-space:"+a["wrap-option"])),"unicode-bidi"in a&&(a["unicode-bidi"]in aa?f.push(aa[a["unicode-bidi"]]):f.push("unicode-bidi:"+a["unicode-bidi"])),"font-style"in a&&f.push("font-style:"+a["font-style"]+";"),"font-weight"in a&&f.push("font-weight:"+a["font-weight"]+";"),"direction"in a&&f.push("direction:"+a.direction+";"),"text-decoration"in a&&f.push("text-decoration:"+a["text-decoration"]+";"),c&&(f=f.concat(D(a,b))),Q.tt.hasOwnProperty("xml:space")&&"preserve"===Q.tt["xml:space"]&&f.push("white-space: pre;"),f}function A(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d["xml:id"]===b||d.id===b)return d}return null}function B(a,b,c){var d=[],e=a.match(/\S+/g);return e.forEach(function(a){var e=A(R,a);if(e){var f=z(JSON.parse(JSON.stringify(e)),b,c);d=d.concat(f)}}),d}function C(a,b){var c=/([\d\.]+)(%|px)\s+([\d\.]+)(%|px)/;if("tts:extent"in a&&"tts:origin"in a){var d=c.exec(a["tts:extent"]),e=c.exec(a["tts:origin"]);if(null===d||null===e)return N("Bad extent or origin: "+a["tts:extent"]+" "+a["tts:origin"]),null;var f=parseFloat(d[1]),g=parseFloat(d[3]),h=parseFloat(e[1]),i=parseFloat(e[3]);if(b){var j=c.exec(b);if(null===j||"px"!==j[2]||"px"!==j[4])return N("Bad tt.extent: "+b),null;var k=parseFloat(j[1]),l=parseFloat(j[3]);"px"===d[2]&&(f=f/k*100),"px"===d[4]&&(g=g/l*100),"px"===e[2]&&(h=h/k*100),"px"===e[4]&&(i=i/l*100)}return{left:h,top:i,width:f,height:g}}return null}function D(a,b){var c=[];for(var d in a){var e=d.replace("tts:","");e=e.replace("xml:",""),e=r(e),a[e]=a[d],e!==d&&delete a[d]}if("extent"in a){var f=a.extent.split(/\s/);c.push("width: "+f[0]+";"),c.push("height: "+f[1]+";")}if("origin"in a){var g=a.origin.split(/\s/);c.push("left: "+g[0]+";"),c.push("top: "+g[1]+";")}if("display-align"in a&&c.push(ba[a["display-align"]]),"writing-mode"in a&&c.push(ca[a["writing-mode"]]),"style"in a){var h=B(a.style,b,!0);c=c.concat(h)}return"padding"in a&&c.push("padding:"+a.padding+";"),"overflow"in a&&c.push("overflow:"+a.overflow+";"),"show-background"in a&&c.push("show-background:"+a["show-background"]+";"),"id"in a&&c.push("regionID:"+a.id+";"),c}function E(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d["xml:id"]===b||d.id===b)return d}return null}function F(a,b){var c=[],d=a.match(/\S+/g);return d.forEach(function(a){var d=E(S,a);if(d){var e=D(JSON.parse(JSON.stringify(d)),b);c=c.concat(e)}}),c}function G(){var a=[32,15];return Q.tt.hasOwnProperty("ttp:cellResolution")?Q.tt["ttp:cellResolution"].split(" ").map(parseFloat):a}function H(a,b){for(var c=v("padding-left",b),d=v("padding-right",b),e=c.concat(" "+d+" "),f="",g="",h="",i=Array.prototype.slice.call(a.children),j=a.getElementsByClassName("lineBreak")[0],k=i.indexOf(j),l=[];-1!=k;)l.push(k),k=i.indexOf(j,k+1);var m="</span>",n="<br>",o='<span class="spanPadding" style="-webkit-box-decoration-break: clone; box-decoration-break: clone; ';if(l.length)l.forEach(function(a,b){if(0===b){for(var c="",d=0;a>d;d++)f+=i[d].outerHTML,0===d&&(c=e.concat(i[d].style.cssText));f=o+c+'">'+f}for(var j="",k=a+1;k<i.length;k++)g+=i[k].outerHTML,k===i.length-1&&(j+=e.concat(i[k].style.cssText));g=o+j+'">'+g,f&&g&&b===l.length-1?h+=f+m+n+g+m:f&&g&&b!==l.length-1?h+=f+m+n+g+m+n:f&&!g?h+=f+m:!f&&g&&b===l.length-1?h+=g+m:!f&&g&&b!==l.length-1&&(h+=g+m+n)});else{for(var p="",q=0;q<i.length;q++)p+=i[q].style.cssText;h=o+e+p+'">'+a.innerHTML+m}return h}function I(a,b){var c=document.createElement("div");return a.forEach(function(a){if(!a.hasOwnProperty("metadata"))if(a.hasOwnProperty("span")){var d=a.span.__children,e=document.createElement("span");if(a.span.hasOwnProperty("style")){var f=B(a.span.style,b);e.className="spanPadding "+a.span.style,e.style.cssText=f.join(" ")}d.forEach(function(a){if(!d.hasOwnProperty("metadata"))if(a.hasOwnProperty("#text")){var b=document.createTextNode(a["#text"]);e.appendChild(b)}else if("br"in a){e.hasChildNodes()&&c.appendChild(e);var f=document.createElement("br");f.className="lineBreak",c.appendChild(f);var g=document.createElement("span");g.className=e.className,g.style.cssText=e.style.cssText,e=g}}),c.appendChild(e)}else if(a.hasOwnProperty("br")){var g=document.createElement("br");g.className="lineBreak",c.appendChild(g)}else if(a.hasOwnProperty("#text")){var h=document.createElement("span");h.textContent=a["#text"],c.appendChild(h)}}),c}function J(a,b,c){var d,e,f=[],g=a.region,h=b.region;return h&&(d=F(h,c)),g?(e=f.concat(F(g,c)),f=d?x(d,e):e):d&&(f=d),L(f,W),f}function K(a,b){var c,d,e,f=[],g=a.style,h=Q.tt.body.style,i=Q.tt.body.div.style,j="";return h&&(c=B(h,b),j="paragraph "+h),i&&(d=B(i,b),c?(d=x(c,d),j+=" "+i):j="paragraph "+i),g?(e=B(g,b),c&&d?(f=x(d,e),j+=" "+g):c?(f=x(c,e),j+=" "+g):d?(f=x(d,e),j+=" "+g):(f=e,j="paragraph "+g)):c&&!d?f=c:!c&&d&&(f=d),L(f,X),[f,j]}function L(a,b){for(var c in b)b.hasOwnProperty(c)&&(u(c,a)||a.push(c+":"+b[c]))}var M=this.context,N=k["default"](M).getInstance().log,O=void 0,P=void 0,Q=void 0,R=void 0,S=void 0,T=void 0,U=void 0,V=void 0,W=void 0,X=void 0,Y=void 0,Z=void 0,$=void 0,_=void 0,aa=void 0,ba=void 0,ca=void 0,da=void 0,ea=void 0,fa=0;return O={parse:j,setConfig:a},n(),O}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f),h=a(3),i=d(h),j=a(6),k=d(j),l=3600,m=60;e.__dashjs_factory_name="TTMLParser",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{3:3,6:6,8:8}],110:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){try{new window.URL("x","http://y"),j=n}catch(a){}finally{j=j||o}}function b(a){var b=a.indexOf("/"),c=a.lastIndexOf("/");return-1!==b?c===b+1?a:(-1!==a.indexOf("?")&&(a=a.substring(0,a.indexOf("?"))),a.substring(0,c+1)):""}function c(a){var b=a.match(m);return b?b[1]:""}function d(a){var b=a.match(k);return b?b[0]:""}function e(a){return!k.test(a)}function f(a){return e(a)&&"/"===a.charAt(0)}function g(a){return 0===a.indexOf("//")}function h(a){return l.test(a)}function i(a,b){return j(a,b)}var j=void 0,k=/^[a-z][a-z0-9+\-.]*:/i,l=/^https?:\/\//i,m=/^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i,n=function(a,b){try{return new window.URL(a,b).toString()}catch(c){return a}},o=function(a,h){var i=b;if(!h)return a;if(!e(a))return a;f(a)&&(i=c),g(a)&&(i=d);var j=i(h),k="/"!==j.charAt(j.length-1)&&"/"!==a.charAt(0)?"/":"";return[j,a].join(k)};a();var p={parseBaseUrl:b,parseOrigin:c,parseScheme:d,isRelative:e,isPathAbsolute:f,isSchemeRelative:g,isHTTPURL:h,resolve:i};return p}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f);e.__dashjs_factory_name="URLUtils",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{8:8}],111:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){k=/(?:\r\n|\r|\n)/gm,l=/-->/,m=/(^[\s]+|[\s]+$)/g,n=/\s\b/g}function b(a){var b,e,g=[];a=a.split(k),b=a.length,e=-1;for(var i=0;b>i;i++){var j=a[i];if(j.length>0&&"WEBVTT"!==j&&j.match(l)){var n=d(j),o=n.cuePoints,p=n.styles,q=f(a,i+1),r=c(o[0].replace(m,"")),s=c(o[1].replace(m,""));!isNaN(r)&&!isNaN(s)&&r>=e&&s>r?""!==q?(e=r,g.push({start:r,end:s,data:q,styles:p})):h("Skipping cue due to empty/malformed cue text"):h("Skipping cue due to incorrect cue timing")}}return g}function c(a){var b=a.split(":"),c=b.length-1;return a=60*parseInt(b[c-1],10)+parseFloat(b[c]),2===c&&(a+=3600*parseInt(b[0],10)),a}function d(a){var b=a.split(l),c=b[1].split(n);return c.shift(),b[1]=c[0],c.shift(),{cuePoints:b,styles:e(c)}}function e(a){var b={};return a.forEach(function(a){if(a.split(/:/).length>1){var c=a.split(/:/)[1];c&&-1!=c.search(/%/)&&(c=parseInt(c.replace(/%/,""),10)),(a.match(/align/)||a.match(/A/))&&(b.align=c),(a.match(/line/)||a.match(/L/))&&(b.line=c),(a.match(/position/)||a.match(/P/))&&(b.position=c),(a.match(/size/)||a.match(/S/))&&(b.size=c)}}),b}function f(a,b){for(var c,d=b,e="",f="";""!==a[d]&&d<a.length;)d++;if(c=d-b,c>1)for(var g=0;c>g;g++){if(f=a[b+g],f.match(l)){e="";break}e+=f,g!==c-1&&(e+="\n")}else f=a[b],f.match(l)||(e=f);return e}var g=this.context,h=i["default"](g).getInstance().log,j=void 0,k=void 0,l=void 0,m=void 0,n=void 0;return j={parse:b},a(),j}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f),h=a(6),i=d(h);e.__dashjs_factory_name="VTTParser",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{6:6,8:8}],112:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(a){var b,c=0;return a&&a.some(function(a,b){return c=b,!d.contains(a.serviceLocation)})&&(b=a[c]),b}var c=void 0,d=a.blacklistController;return c={select:b}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f);e.__dashjs_factory_name="BasicSelector",c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{8:8}],113:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(a){var b=[],c=function(a){return!b.length||!a.dvb_priority||-1===b.indexOf(a.dvb_priority)},d=function(a){return!f.contains(a.serviceLocation)||(a.dvb_priority&&b.push(a.dvb_priority),!1)};return a.filter(d).filter(c)}function c(a){var b,c,d=function(a,b){var c=a.dvb_priority-b.dvb_priority;return isNaN(c)?0:c},e=function(a,b,c){return!b||c[0].dvb_priority&&a.dvb_priority&&c[0].dvb_priority===a.dvb_priority},f=0,g=[],h=0;return c=a.sort(d).filter(e),c.length?(c.length>1&&(c.forEach(function(a){f+=a.dvb_weight,g.push(f)}),b=Math.floor(Math.random()*(f-1)),g.every(function(a,c){return h=c,!(a>b)})),c[h]):void 0}function d(a){return a&&c(b(a))}var e=void 0,f=a.blacklistController;return e={select:d}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f);e.__dashjs_factory_name="DVBSelector",c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{8:8}],114:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.qualityIndex=NaN};c["default"]=e,b.exports=c["default"]},{}],115:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null};c["default"]=e,b.exports=c["default"]},{}],116:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(a,b,c){d(this,f),this.code=a||null,this.message=b||null,this.data=c||null};c["default"]=e,b.exports=c["default"]},{}],117:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.action=f.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null};e.ACTION_DOWNLOAD="download",e.ACTION_COMPLETE="complete",c["default"]=e,b.exports=c["default"]},{}],118:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(117),i=d(h),j=function(a){function b(a){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.url=a||null,this.checkForExistenceOnly=!0}return f(b,a),b}(i["default"]);c["default"]=j,b.exports=c["default"]},{117:117}],119:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.offset=NaN,this.type=null,this.size=NaN,this.isComplete=!0};c["default"]=e,b.exports=c["default"]},{}],120:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null};c["default"]=e,b.exports=c["default"]},{}],121:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null};c["default"]=e,b.exports=c["default"]},{}],122:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[],this.BolaState=[]};c["default"]=e,b.exports=c["default"]},{}],123:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0,this.isFirst=!0};c["default"]=e,b.exports=c["default"]},{}],124:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(117),i=d(h),j=function(a){function b(a,c){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.url=a||null,this.type=c||null,this.mediaType="stream",this.responseType="text"}return f(b,a),b}(i["default"]);c["default"]=j,b.exports=c["default"]},{117:117}],125:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.video=null,this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1};c["default"]=e,b.exports=c["default"]},{}],126:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null};c["default"]=e,b.exports=c["default"]},{}],127:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null};c["default"]=e,b.exports=c["default"]},{}],128:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this._s=void 0};c["default"]=e,b.exports=c["default"]},{}],129:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.t=null,this.level=null};
c["default"]=e,b.exports=c["default"]},{}],130:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=a(59),g=d(f),h=function i(){e(this,i),this.target=null,this.state=g["default"].BUFFER_EMPTY};c["default"]=h,b.exports=c["default"]},{59:59}],131:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.time=null,this.range=null,this.manifestInfo=null};c["default"]=e,b.exports=c["default"]},{}],132:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.time=null,this.droppedFrames=null};c["default"]=e,b.exports=c["default"]},{}],133:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function g(){d(this,g),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null},f=function h(){d(this,h),this.s=null,this.d=null,this.b=[]};e.MPD_TYPE="MPD",e.XLINK_EXPANSION_TYPE="XLinkExpansion",e.INIT_SEGMENT_TYPE="InitializationSegment",e.INDEX_SEGMENT_TYPE="IndexSegment",e.MEDIA_SEGMENT_TYPE="MediaSegment",e.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",e.OTHER_TYPE="other",c.HTTPRequest=e,c.HTTPRequestTrace=f},{}],134:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function h(){d(this,h),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.trackInfo=[]},f=function i(){d(this,i),this.id=null,this.index=null,this.start=null,this.duration=null},g=function j(){d(this,j),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null};c.ManifestUpdate=e,c.ManifestUpdateStreamInfo=f,c.ManifestUpdateTrackInfo=g},{}],135:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function g(){d(this,g),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};e.INITIAL_PLAYOUT_START_REASON="initial_playout",e.SEEK_START_REASON="seek",e.RESUME_FROM_PAUSE_START_REASON="resume",e.METRICS_COLLECTION_START_REASON="metrics_collection_start";var f=function h(){d(this,h),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};f.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",f.REBUFFERING_REASON="rebuffering",f.USER_REQUEST_STOP_REASON="user_request",f.END_OF_PERIOD_STOP_REASON="end_of_period",f.END_OF_CONTENT_STOP_REASON="end_of_content",f.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",f.FAILURE_STOP_REASON="failure",c.PlayList=e,c.PlayListTrace=f},{}],136:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.t=null,this.mt=null,this.to=null,this.lto=null};c["default"]=e,b.exports=c["default"]},{}],137:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.loadingRequests=[],this.executedRequests=[]};c["default"]=e,b.exports=c["default"]},{}],138:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null};c["default"]=e,b.exports=c["default"]},{}],139:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.tcpid=null,this.dest=null,this.topen=null,this.tclose=null,this.tconnect=null};c["default"]=e,b.exports=c["default"]},{}]},{},[50])(50)}),!function c(a,b,d){function e(g,h){if(!b[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=b[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,c,a,b,d)}return b[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(b,c,d){"use strict";var e={};e.encode=function(a){for(var b=[],c=0;c<a.length;++c){var d=a.charCodeAt(c);128>d?b.push(d):2048>d?(b.push(192|d>>6),b.push(128|63&d)):65536>d?(b.push(224|d>>12),b.push(128|63&d>>6),b.push(128|63&d)):(b.push(240|d>>18),b.push(128|63&d>>12),b.push(128|63&d>>6),b.push(128|63&d))}return b},e.decode=function(a){for(var b=[],c=0;c<a.length;){var d=a[c++];128>d||(224>d?(d=(31&d)<<6,d|=63&a[c++]):240>d?(d=(15&d)<<12,d|=(63&a[c++])<<6,d|=63&a[c++]):(d=(7&d)<<18,d|=(63&a[c++])<<12,d|=(63&a[c++])<<6,d|=63&a[c++])),b.push(String.fromCharCode(d))}return b.join("")};var f={};!function(b){var c=function(a){for(var c=0,d=[],e=0|a.length/3;0<e--;){var f=(a[c]<<16)+(a[c+1]<<8)+a[c+2];c+=3,d.push(b.charAt(63&f>>18)),d.push(b.charAt(63&f>>12)),d.push(b.charAt(63&f>>6)),d.push(b.charAt(63&f))}if(2==a.length-c){var f=(a[c]<<16)+(a[c+1]<<8);d.push(b.charAt(63&f>>18)),d.push(b.charAt(63&f>>12)),d.push(b.charAt(63&f>>6)),d.push("=")}else if(1==a.length-c){var f=a[c]<<16;d.push(b.charAt(63&f>>18)),d.push(b.charAt(63&f>>12)),d.push("==")}return d.join("")},d=function(){for(var a=[],c=0;c<b.length;++c)a[b.charCodeAt(c)]=c;return a["=".charCodeAt(0)]=0,a}(),g=function(a){for(var b=0,c=[],e=0|a.length/4;0<e--;){var f=(d[a.charCodeAt(b)]<<18)+(d[a.charCodeAt(b+1)]<<12)+(d[a.charCodeAt(b+2)]<<6)+d[a.charCodeAt(b+3)];c.push(255&f>>16),c.push(255&f>>8),c.push(255&f),b+=4}return c&&("="==a.charAt(b-2)?(c.pop(),c.pop()):"="==a.charAt(b-1)&&c.pop()),c},h={};h.encode=function(a){for(var b=[],c=0;c<a.length;++c)b.push(a.charCodeAt(c));return b},h.decode=function(b){for(var c=0;c<s.length;++c)a[c]=String.fromCharCode(a[c]);return a.join("")},f.decodeArray=function(a){var b=g(a);return new Uint8Array(b)},f.encodeASCII=function(a){var b=h.encode(a);return c(b)},f.decodeASCII=function(a){var b=g(a);return h.decode(b)},f.encode=function(a){var b=e.encode(a);return c(b)},f.decode=function(a){var b=g(a);return e.decode(b)}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),"undefined"!=typeof d&&(d.decode=f.decode,d.decodeArray=f.decodeArray)},{}],2:[function(a,b,c){"use strict";!function(a){var b={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},c=function(a){var c=a;return b.hasOwnProperty(a)&&(c=b[a]),String.fromCharCode(c)},d=15,e=32,f={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},g={17:2,18:4,21:6,22:8,23:10,19:13,20:15},h={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},i={25:2,26:4,29:6,30:8,31:10,27:13,28:15},j=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],k={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(a){this.time=a},log:function(a,b){var c=this.verboseFilter[a];this.verboseLevel>=c&&console.log(this.time+" ["+a+"] "+b)}},l=function(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c].toString(16));return b},m=function(a,b,c,d,e){this.foreground=a||"white",this.underline=b||!1,this.italics=c||!1,this.background=d||"black",this.flash=e||!1};m.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(a){for(var b=["foreground","underline","italics","background","flash"],c=0;c<b.length;c++){var d=b[c];a.hasOwnProperty(d)&&(this[d]=a[d])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(a){return this.foreground===a.foreground&&this.underline===a.underline&&this.italics===a.italics&&this.background===a.background&&this.flash===a.flash},copy:function(a){this.foreground=a.foreground,this.underline=a.underline,this.italics=a.italics,this.background=a.background,this.flash=a.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var n=function(a,b,c,d,e,f){this.uchar=a||" ",this.penState=new m(b,c,d,e,f)};n.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(a,b){this.uchar=a,this.penState.copy(b)},setPenState:function(a){this.penState.copy(a)},equals:function(a){return this.uchar===a.uchar&&this.penState.equals(a.penState)},copy:function(a){this.uchar=a.uchar,this.penState.copy(a.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var o=function(){this.chars=[];for(var a=0;e>a;a++)this.chars.push(new n);this.pos=0,this.currPenState=new m};o.prototype={equals:function(a){for(var b=!0,c=0;e>c;c++)if(!this.chars[c].equals(a.chars[c])){b=!1;break}return b},copy:function(a){for(var b=0;e>b;b++)this.chars[b].copy(a.chars[b])},isEmpty:function(){for(var a=!0,b=0;e>b;b++)if(!this.chars[b].isEmpty()){a=!1;break}return a},setCursor:function(a){this.pos!==a&&(this.pos=a),this.pos<0?(k.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>e&&(k.log("ERROR","Too large cursor position "+this.pos),this.pos=e)},moveCursor:function(a){var b=this.pos+a;if(a>1)for(var c=this.pos+1;b+1>c;c++)this.chars[c].setPenState(this.currPenState);this.setCursor(b)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(a){a>=144&&this.backSpace();var b=c(a);return this.pos>=e?void k.log("ERROR","Cannot insert "+a.toString(16)+" ("+b+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(b,this.currPenState),void this.moveCursor(1))},clearFromPos:function(a){var b;for(b=a;e>b;b++)this.chars[b].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var a=[],b=!0,c=0;e>c;c++){var d=this.chars[c].uchar;" "!==d&&(b=!1),a.push(d)}return b?"":a.join("")},setPenStyles:function(a){this.currPenState.setStyles(a);var b=this.chars[this.pos];b.setPenState(this.currPenState)}};var p=function(){this.rows=[];for(var a=0;d>a;a++)this.rows.push(new o);this.currRow=d-1,this.nrRollUpRows=null,this.reset()};p.prototype={reset:function(){for(var a=0;d>a;a++)this.rows[a].clear();this.currRow=d-1},equals:function(a){for(var b=!0,c=0;d>c;c++)if(!this.rows[c].equals(a.rows[c])){b=!1;break}return b},copy:function(a){for(var b=0;d>b;b++)this.rows[b].copy(a.rows[b])},isEmpty:function(){for(var a=!0,b=0;d>b;b++)if(!this.rows[b].isEmpty()){a=!1;break}return a},backSpace:function(){var a=this.rows[this.currRow];a.backSpace()},clearToEndOfRow:function(){var a=this.rows[this.currRow];a.clearToEndOfRow()},insertChar:function(a){var b=this.rows[this.currRow];b.insertChar(a)},setPen:function(a){var b=this.rows[this.currRow];b.setPenStyles(a)},moveCursor:function(a){var b=this.rows[this.currRow];b.moveCursor(a)},setCursor:function(a){k.log("INFO","setCursor: "+a);var b=this.rows[this.currRow];b.setCursor(a)},setPAC:function(a){k.log("INFO","pacData = "+JSON.stringify(a));var b=a.row-1;this.nrRollUpRows&&b<this.nrRollUpRows-1&&(b=this.nrRollUpRows-1),this.currRow=b;var c=this.rows[this.currRow];if(null!==a.indent){var d=a.indent,e=Math.max(d-1,0);c.setCursor(a.indent),a.color=c.chars[e].penState.foreground}var f={foreground:a.color,underline:a.underline,italics:a.italics,background:"black",flash:!1};this.setPen(f)},setBkgData:function(a){k.log("INFO","bkgData = "+JSON.stringify(a)),this.backSpace(),this.setPen(a),this.insertChar(32)},setRollUpRows:function(a){this.nrRollUpRows=a},rollUp:function(){if(null===this.nrRollUpRows)return void k.log("DEBUG","roll_up but nrRollUpRows not set yet");k.log("TEXT",this.getDisplayText());var a=this.currRow+1-this.nrRollUpRows,b=this.rows.splice(a,1)[0];b.clear(),this.rows.splice(this.currRow,0,b),k.log("INFO","Rolling up")},getDisplayText:function(a){a=a||!1;for(var b=[],c="",e=-1,f=0;d>f;f++){var g=this.rows[f].getTextString();g&&(e=f+1,a?b.push("Row "+e+': "'+g+'"'):b.push(g.trim()))}return b.length>0&&(c=a?"["+b.join(" | ")+"]":b.join("\n")),c},getTextAndFormat:function(){return this.rows}};var q=function(a,b){this.chNr=a,this.outputFilter=b,this.mode=null,this.verbose=0,this.displayedMemory=new p,this.nonDisplayedMemory=new p,this.lastOutputScreen=new p,this.currRollUpRow=this.displayedMemory.rows[d-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};q.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[d-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(a){this.outputFilter=a},setPAC:function(a){this.writeScreen.setPAC(a)},setBkgData:function(a){this.writeScreen.setBkgData(a)},setMode:function(a){a!==this.mode&&(this.mode=a,k.log("INFO","MODE="+a),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=a)},insertChars:function(a){for(var b=0;b<a.length;b++)this.writeScreen.insertChar(a[b]);var c=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";k.log("INFO",c+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(k.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){k.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){k.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){k.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(a){k.log("INFO","RU("+a+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(a)},cc_FON:function(){k.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){k.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){k.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){k.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){k.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){k.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){k.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(k.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var a=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=a,this.writeScreen=this.nonDisplayedMemory,k.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(a){k.log("INFO","TO("+a+") - Tab Offset"),this.writeScreen.moveCursor(a)},cc_MIDROW:function(a){var b={flash:!1};if(b.underline=a%2===1,b.italics=a>=46,b.italics)b.foreground="white";else{var c=Math.floor(a/2)-16,d=["white","green","blue","cyan","red","yellow","magenta"];b.foreground=d[c]}k.log("INFO","MIDROW: "+JSON.stringify(b)),this.writeScreen.setPen(b)},outputDataUpdate:function(){var a=k.time;null!==a&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(a,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,a,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:a):this.cueStartTime=a,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(a){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,a,this.displayedMemory),this.cueStartTime=a))}};var r=function(a,b,c){this.field=a||1,this.outputs=[b,c],this.channels=[new q(1,b),new q(2,c)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,"char":0,cmd:0,other:0}};r.prototype={getHandler:function(a){return this.channels[a].getHandler()},setHandler:function(a,b){this.channels[a].setHandler(b)},addData:function(a,b){var c,d,e,f=!1;this.lastTime=a,k.setTime(a);for(var g=0;g<b.length;g+=2)if(d=127&b[g],e=127&b[g+1],0!==d||0!==e){if(k.log("DATA","["+l([b[g],b[g+1]])+"] -> ("+l([d,e])+")"),c=this.parseCmd(d,e),c||(c=this.parseMidrow(d,e)),c||(c=this.parsePAC(d,e)),c||(c=this.parseBackgroundAttributes(d,e)),!c&&(f=this.parseChars(d,e)))if(this.currChNr&&this.currChNr>=0){var h=this.channels[this.currChNr-1];h.insertChars(f)}else k.log("WARNING","No channel found yet. TEXT-MODE?");c?this.dataCounters.cmd+=2:f?this.dataCounters["char"]+=2:(this.dataCounters.other+=2,k.log("WARNING","Couldn't parse cleaned data "+l([d,e])+" orig: "+l([b[g],b[g+1]])))}else this.dataCounters.padding+=2},parseCmd:function(a,b){var c=null,d=(20===a||28===a)&&b>=32&&47>=b,e=(23===a||31===a)&&b>=33&&35>=b;if(!d&&!e)return!1;if(a===this.lastCmdA&&b===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,k.log("DEBUG","Repeated command ("+l([a,b])+") is dropped"),!0;c=20===a||23===a?1:2;var f=this.channels[c-1];return 20===a||28===a?32===b?f.cc_RCL():33===b?f.cc_BS():34===b?f.cc_AOF():35===b?f.cc_AON():36===b?f.cc_DER():37===b?f.cc_RU(2):38===b?f.cc_RU(3):39===b?f.cc_RU(4):40===b?f.cc_FON():41===b?f.cc_RDC():42===b?f.cc_TR():43===b?f.cc_RTD():44===b?f.cc_EDM():45===b?f.cc_CR():46===b?f.cc_ENM():47===b&&f.cc_EOC():f.cc_TO(b-32),this.lastCmdA=a,this.lastCmdB=b,this.currChNr=c,!0},parseMidrow:function(a,b){var c=null;if((17===a||25===a)&&b>=32&&47>=b){if(c=17===a?1:2,c!==this.currChNr)return k.log("ERROR","Mismatch channel in midrow parsing"),!1;var d=this.channels[c-1];return d.cc_MIDROW(b),k.log("DEBUG","MIDROW ("+l([a,b])+")"),!0}return!1},parsePAC:function(a,b){var c=null,d=null,e=(a>=17&&23>=a||a>=25&&31>=a)&&b>=64&&127>=b,j=(16===a||24===a)&&b>=64&&95>=b;if(!e&&!j)return!1;if(a===this.lastCmdA&&b===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;c=23>=a?1:2,d=b>=64&&95>=b?1===c?f[a]:h[a]:1===c?g[a]:i[a];var k=this.interpretPAC(d,b),l=this.channels[c-1];return l.setPAC(k),this.lastCmdA=a,this.lastCmdB=b,this.currChNr=c,!0},interpretPAC:function(a,b){var c=b,d={color:null,italics:!1,indent:null,underline:!1,row:a};return c=b>95?b-96:b-64,d.underline=1===(1&c),13>=c?d.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(c/2)]:15>=c?(d.italics=!0,d.color="white"):d.indent=4*Math.floor((c-16)/2),d},parseChars:function(a,b){var d=null,e=null,f=null;if(a>=25?(d=2,f=a-8):(d=1,f=a),f>=17&&19>=f){var g=b;g=17===f?b+80:18===f?b+112:b+144,k.log("INFO","Special char '"+c(g)+"' in channel "+d),e=[g]}else a>=32&&127>=a&&(e=0===b?[a]:[a,b]);if(e){var h=l(e);k.log("DEBUG","Char codes =  "+h.join(",")),this.lastCmdA=null,this.lastCmdB=null}return e},parseBackgroundAttributes:function(a,b){var c,d,e,f,g=(16===a||24===a)&&b>=32&&47>=b,h=(23===a||31===a)&&b>=45&&47>=b;return!(!g&&!h||(c={},16===a||24===a?(d=Math.floor((b-32)/2),c.background=j[d],b%2===1&&(c.background=c.background+"_semi")):45===b?c.background="transparent":(c.foreground="black",47===b&&(c.underline=!0)),e=24>a?1:2,f=this.channels[e-1],f.setBkgData(c),this.lastCmdA=null,this.lastCmdB=null,0))},reset:function(){for(var a=0;a<this.channels.length;a++)this.channels[a]&&this.channels[a].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(a){for(var b=0;b<this.channels.length;b++)this.channels[b]&&this.channels[b].cueSplitAtTime(a)}};var s=function(a,b,c){for(var d=0,e=b,f=0,g=[],h=function(a,b,c,d){if(4!==a||8>b)return null;var e=c.getUint8(d),f=c.getUint16(d+1),g=c.getUint32(d+3),h=c.getUint8(d+7);return 181==e&&49==f&&1195456820==g&&3==h};b+c>e;){if(d=a.getUint32(e),f=31&a.getUint8(e+4),6===f)for(var i=e+5,j=-1;e+4+d-1>i;){j=0;for(var k=255;255===k;)k=a.getUint8(i),j+=k,i++;var l=0;for(k=255;255===k;)k=a.getUint8(i),l+=k,i++;h(j,l,a,i)&&g.push([i,l]),i+=l}e+=d+4}return g},t=function(a,b){var c=b[0],d=[[],[]];c+=8;var e=31&a.getUint8(c);c+=2;for(var f=0;e>f;f++){var g=a.getUint8(c),h=4&g,i=3&g;c++;var j=a.getUint8(c);c++;var k=a.getUint8(c);c++,h&&(127&j)+(127&k)!==0&&(0===i?(d[0].push(j),d[0].push(k)):1===i&&(d[1].push(j),d[1].push(k)))}return d};a.logger=k,a.PenState=m,a.CaptionScreen=p,a.Cea608Parser=r,a.findCea608Nalus=s,a.extractCea608DataFromRange=t}("undefined"==typeof c?(void 0).cea608parser={}:c)},{}],3:[function(a,b,c){"use strict";function d(a){var b,c,d;for(b=[],d=0,c=a.length;c>d;d+=1)a[d].isRoot?b.push("root"):b.push(a[d].name);var e=function(a,b){var c;if(null!==a&&null!==b)for(c in a)a.hasOwnProperty(c)&&(b.hasOwnProperty(c)||(b[c]=a[c]))},f=function(a,b,c){var d,f,g,h,i;if(null!==a&&0!==a.length)for(d=0,f=a.length;f>d;d+=1)g=a[d],b.hasOwnProperty(g.name)&&(c.hasOwnProperty(g.name)?g.merge&&(h=b[g.name],i=c[g.name],"object"==typeof h&&"object"==typeof i?e(h,i):null!=g.mergeFunction?c[g.name]=g.mergeFunction(h,i):c[g.name]=h+i):c[g.name]=b[g.name])},g=function i(a,b){var c,d,e,g,h,j,k,l=a;if(null!==l.children&&0!==l.children.length)for(c=0,d=l.children.length;d>c;c+=1)if(j=l.children[c],b.hasOwnProperty(j.name))if(j.isArray)for(h=b[j.name+"_asArray"],e=0,g=h.length;g>e;e+=1)k=h[e],f(l.properties,b,k),i(j,k);else k=b[j.name],f(l.properties,b,k),i(j,k)},h=function j(c){var d,e,f,h,i,k,l;if(null===c)return c;if("object"!=typeof c)return c;for(d=0,e=b.length;e>d;d+=1)"root"===b[d]&&(i=a[d],k=c,g(i,k));for(h in c)if(c.hasOwnProperty(h)&&"__children"!=h){if(f=b.indexOf(h),-1!==f)if(i=a[f],i.isArray)for(l=c[h+"_asArray"],d=0,e=l.length;e>d;d+=1)k=l[d],g(i,k);else k=c[h],g(i,k);j(c[h])}return c};return{run:h}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d,b.exports=c["default"]},{}],4:[function(a,b,c){"use strict";function d(a){function b(){void 0===a.escapeMode&&(a.escapeMode=!0),void 0===a.attributePrefix&&(a.attributePrefix="_"),a.arrayAccessForm=a.arrayAccessForm||"none",a.emptyNodeForm=a.emptyNodeForm||"text",void 0===a.enableToStringFunc&&(a.enableToStringFunc=!0),a.arrayAccessFormPaths=a.arrayAccessFormPaths||[],void 0===a.skipEmptyTextNodesForObj&&(a.skipEmptyTextNodesForObj=!0),void 0===a.stripWhitespaces&&(a.stripWhitespaces=!0),a.datetimeAccessFormPaths=a.datetimeAccessFormPaths||[],void 0===a.useDoubleQuotes&&(a.useDoubleQuotes=!1),a.xmlElementsFilter=a.xmlElementsFilter||[],a.jsonPropertiesFilter=a.jsonPropertiesFilter||[],void 0===a.keepCData&&(a.keepCData=!1),void 0===a.ignoreRoot&&(a.ignoreRoot=!1)}function c(){}function d(a){var b=a.localName;return null==b&&(b=a.baseName),null!=b&&""!=b||(b=a.nodeName),b}function e(a){return a.prefix}function f(a){return"string"==typeof a?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):a}function g(a,b,c,d){for(var e=0;e<a.length;e++){var f=a[e];if("string"==typeof f){if(f==d)break}else if(f instanceof RegExp){if(f.test(d))break}else if("function"==typeof f&&f(b,c,d))break}return e!=a.length}function h(b,c,d){switch(a.arrayAccessForm){case"property":b[c]instanceof Array?b[c+"_asArray"]=b[c]:b[c+"_asArray"]=[b[c]]}!(b[c]instanceof Array)&&a.arrayAccessFormPaths.length>0&&g(a.arrayAccessFormPaths,b,c,d)&&(b[c]=[b[c]])}function i(a){var b=a.split(/[-T:+Z]/g),c=new Date(b[0],b[1]-1,b[2]),d=b[5].split(".");if(c.setHours(b[3],b[4],d[0]),d.length>1&&c.setMilliseconds(d[1]),b[6]&&b[7]){var e=60*b[6]+Number(b[7]),f=/\d\d-\d\d:\d\d$/.test(a)?"-":"+";e=0+("-"==f?-1*e:e),c.setMinutes(c.getMinutes()-e-c.getTimezoneOffset())}else-1!==a.indexOf("Z",a.length-1)&&(c=new Date(Date.UTC(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds())));return c}function j(b,c,d){if(a.datetimeAccessFormPaths.length>0){var e=d.split(".#")[0];return g(a.datetimeAccessFormPaths,b,c,e)?i(b):b}return b}function k(b,c,d,e){return!(c==z.ELEMENT_NODE&&a.xmlElementsFilter.length>0)||g(a.xmlElementsFilter,b,d,e)}function l(b,c){if(b.nodeType==z.DOCUMENT_NODE){for(var f=new Object,g=b.childNodes,i=0;i<g.length;i++){var m=g[i];if(m.nodeType==z.ELEMENT_NODE)if(a.ignoreRoot)f=l(m);else{f={};var n=d(m);f[n]=l(m)}}return f}if(b.nodeType==z.ELEMENT_NODE){var f=new Object;f.__cnt=0;for(var o=[],g=b.childNodes,i=0;i<g.length;i++){var m=g[i],n=d(m);if(m.nodeType!=z.COMMENT_NODE){var p=c+"."+n;if(k(f,m.nodeType,n,p))if(f.__cnt++,null==f[n]){var q=l(m,p);if("#text"!=n||/[^\s]/.test(q)){var r={};r[n]=q,o.push(r)}f[n]=q,h(f,n,p)}else{null!=f[n]&&(f[n]instanceof Array||(f[n]=[f[n]],h(f,n,p)));var q=l(m,p);if("#text"!=n||/[^\s]/.test(q)){var r={};r[n]=q,o.push(r)}f[n][f[n].length]=q}}}f.__children=o;for(var s=d(b),t=0;t<b.attributes.length;t++){var u=b.attributes[t];f.__cnt++;for(var v=u.value,w=0,x=a.matchers.length;x>w;w++){var y=a.matchers[w];y.test(u,s)&&(v=y.converter(u.value))}f[a.attributePrefix+u.name]=v}var A=e(b);return null!=A&&""!=A&&(f.__cnt++,f.__prefix=A),null!=f["#text"]&&(f.__text=f["#text"],f.__text instanceof Array&&(f.__text=f.__text.join("\n")),a.stripWhitespaces&&(f.__text=f.__text.trim()),delete f["#text"],"property"==a.arrayAccessForm&&delete f["#text_asArray"],f.__text=j(f.__text,n,c+"."+n)),null!=f["#cdata-section"]&&(f.__cdata=f["#cdata-section"],delete f["#cdata-section"],"property"==a.arrayAccessForm&&delete f["#cdata-section_asArray"]),0==f.__cnt&&"text"==a.emptyNodeForm?f="":1==f.__cnt&&null!=f.__text?f=f.__text:1!=f.__cnt||null==f.__cdata||a.keepCData?f.__cnt>1&&null!=f.__text&&a.skipEmptyTextNodesForObj&&(a.stripWhitespaces&&""==f.__text||""==f.__text.trim())&&delete f.__text:f=f.__cdata,delete f.__cnt,!a.enableToStringFunc||null==f.__text&&null==f.__cdata||(f.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),f}return b.nodeType==z.TEXT_NODE||b.nodeType==z.CDATA_SECTION_NODE?b.nodeValue:void 0}function m(b,c,d,e){var g="<"+(null!=b&&null!=b.__prefix?b.__prefix+":":"")+c;if(null!=d)for(var h=0;h<d.length;h++){var i=d[h],j=b[i];a.escapeMode&&(j=f(j)),g+=" "+i.substr(a.attributePrefix.length)+"=",g+=a.useDoubleQuotes?'"'+j+'"':"'"+j+"'"}return g+=e?"/>":">"}function n(a,b){return"</"+(null!=a.__prefix?a.__prefix+":":"")+b+">"}function o(a,b){return-1!==a.indexOf(b,a.length-b.length)}function p(b,c){return!!("property"==a.arrayAccessForm&&o(c.toString(),"_asArray")||0==c.toString().indexOf(a.attributePrefix)||0==c.toString().indexOf("__")||b[c]instanceof Function)}function q(a){var b=0;if(a instanceof Object)for(var c in a)p(a,c)||b++;return b}function r(b,c,d){return 0==a.jsonPropertiesFilter.length||""==d||g(a.jsonPropertiesFilter,b,c,d)}function s(b){var c=[];if(b instanceof Object)for(var d in b)-1==d.toString().indexOf("__")&&0==d.toString().indexOf(a.attributePrefix)&&c.push(d);return c}function t(b){var c="";return null!=b.__cdata&&(c+="<![CDATA["+b.__cdata+"]]>"),null!=b.__text&&(c+=a.escapeMode?f(b.__text):b.__text),c}function u(b){var c="";return b instanceof Object?c+=t(b):null!=b&&(c+=a.escapeMode?f(b):b),c}function v(a,b){return""===a?b:a+"."+b}function w(a,b,c,d){var e="";if(0==a.length)e+=m(a,b,c,!0);else for(var f=0;f<a.length;f++)e+=m(a[f],b,s(a[f]),!1),e+=x(a[f],v(d,b)),e+=n(a[f],b);return e}function x(a,b){var c="",d=q(a);if(d>0)for(var e in a)if(!p(a,e)&&(""==b||r(a,e,v(b,e)))){var f=a[e],g=s(f);if(null==f||void 0==f)c+=m(f,e,g,!0);else if(f instanceof Object)if(f instanceof Array)c+=w(f,e,g,b);else if(f instanceof Date)c+=m(f,e,g,!1),c+=f.toISOString(),c+=n(f,e);else{var h=q(f);h>0||null!=f.__text||null!=f.__cdata?(c+=m(f,e,g,!1),c+=x(f,v(b,e)),c+=n(f,e)):c+=m(f,e,g,!0)}else c+=m(f,e,g,!1),c+=u(f),c+=n(f,e)}return c+=u(a)}var y="1.2.0";a=a||{},b(),c();var z={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(a){var b=window.ActiveXObject||"ActiveXObject"in window;if(void 0===a)return null;var c;if(window.DOMParser){var d=new window.DOMParser,e=null;if(!b)try{e=d.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(f){e=null}try{c=d.parseFromString(a,"text/xml"),null!=e&&c.getElementsByTagNameNS(e,"parsererror").length>0&&(c=null)}catch(f){c=null}}else 0==a.indexOf("<?")&&(a=a.substr(a.indexOf("?>")+2)),c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(a);return c},this.asArray=function(a){return void 0===a||null==a?[]:a instanceof Array?a:[a]},this.toXmlDateTime=function(a){return a instanceof Date?a.toISOString():"number"==typeof a?new Date(a).toISOString():null},this.asDateTime=function(a){return"string"==typeof a?i(a):a},this.xml2json=function(a){return l(a)},this.xml_str2json=function(a){var b=this.parseXmlString(a);return null!=b?this.xml2json(b):null},this.json2xml_str=function(a){return x(a,"")},this.json2xml=function(a){var b=this.json2xml_str(a);return this.parseXmlString(b)},this.getVersion=function(){return y}}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d,b.exports=c["default"]},{}],5:[function(a,b,c){(function(b){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a(52),f=d(e),g=a(104),h=d(g),i=a(73),j=d(i),k=a(54),l=d(k),m=a(11),n="undefined"!=typeof window&&window||b,o=n.dashjs;o||(o=n.dashjs={}),o.MediaPlayer=f["default"],o.Protection=h["default"],o.MetricsReporting=j["default"],o.MediaPlayerFactory=l["default"],o.Version=m.getVersionString(),c["default"]=o,c.MediaPlayer=f["default"],c.Protection=h["default"],c.MetricsReporting=j["default"],c.MediaPlayerFactory=l["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{104:104,11:11,52:52,54:54,73:73}],6:[function(a,b,c){var d={};d.parseBuffer=function(a){return new e(a).parse()},d.addBoxProcessor=function(a,b){"string"==typeof a&&"function"==typeof b&&(f.prototype._boxProcessors[a]=b)},d.createFile=function(){return new e},d.createBox=function(a,b,c){var d=f.create(a);return b&&b.append(d,c),d},d.createFullBox=function(a,b,c){var e=d.createBox(a,b,c);return e.version=0,e.flags=0,e},d.Utils={},d.Utils.dataViewToString=function(a,b){var c=b||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(c).decode(a);var d=[],e=0;if("utf-8"===c)for(;e<a.byteLength;){var f=a.getUint8(e++);128>f||(224>f?(f=(31&f)<<6,f|=63&a.getUint8(e++)):240>f?(f=(15&f)<<12,f|=(63&a.getUint8(e++))<<6,f|=63&a.getUint8(e++)):(f=(7&f)<<18,f|=(63&a.getUint8(e++))<<12,f|=(63&a.getUint8(e++))<<6,f|=63&a.getUint8(e++))),d.push(String.fromCharCode(f))}else for(;e<a.byteLength;)d.push(String.fromCharCode(a.getUint8(e++)));return d.join("")},d.Utils.utf8ToByteArray=function(a){var b,c;if("undefined"!=typeof TextEncoder)b=(new TextEncoder).encode(a);else for(b=[],c=0;c<a.length;++c){var d=a.charCodeAt(c);128>d?b.push(d):2048>d?(b.push(192|d>>6),b.push(128|63&d)):65536>d?(b.push(224|d>>12),b.push(128|63&d>>6),b.push(128|63&d)):(b.push(240|d>>18),b.push(128|63&d>>12),b.push(128|63&d>>6),b.push(128|63&d))}return b},d.Utils.appendBox=function(a,b,c){if(b._offset=a._cursor.offset,b._root=a._root?a._root:a,b._raw=a._raw,b._parent=a,-1!==c){if(void 0===c||null===c)return void a.boxes.push(b);var d,e=-1;if("number"==typeof c)e=c;else{if("string"==typeof c)d=c;else{if("object"!=typeof c||!c.type)return void a.boxes.push(b);d=c.type}for(var f=0;f<a.boxes.length;f++)if(d===a.boxes[f].type){e=f+1;break}}a.boxes.splice(e,0,b)}},"undefined"!=typeof c&&(c.parseBuffer=d.parseBuffer,c.addBoxProcessor=d.addBoxProcessor,c.createFile=d.createFile,c.createBox=d.createBox,c.createFullBox=d.createFullBox,c.Utils=d.Utils),d.Cursor=function(a){this.offset="undefined"==typeof a?0:a};var e=function(a){this._cursor=new d.Cursor,this.boxes=[],a&&(this._raw=new DataView(a))};e.prototype.fetch=function(a){var b=this.fetchAll(a,!0);return b.length?b[0]:null},e.prototype.fetchAll=function(a,b){var c=[];return e._sweep.call(this,a,c,b),c},e.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var a=f.parse(this);if("undefined"==typeof a.type)break;this.boxes.push(a)}return this},e._sweep=function(a,b,c){this.type&&this.type==a&&b.push(this);for(var d in this.boxes){if(b.length&&c)return;e._sweep.call(this.boxes[d],a,b,c)}},e.prototype.write=function(){var a,b=0;for(a=0;a<this.boxes.length;a++)b+=this.boxes[a].getLength(!1);var c=new Uint8Array(b);for(this._rawo=new DataView(c.buffer),this.bytes=c,this._cursor.offset=0,a=0;a<this.boxes.length;a++)this.boxes[a].write();return c.buffer},e.prototype.append=function(a,b){d.Utils.appendBox(this,a,b)};var f=function(){this._cursor=new d.Cursor};f.parse=function(a){var b=new f;return b._offset=a._cursor.offset,b._root=a._root?a._root:a,b._raw=a._raw,b._parent=a,b._parseBox(),a._cursor.offset=b._raw.byteOffset+b._raw.byteLength,b},f.create=function(a){var b=new f;return b.type=a,b.boxes=[],b},f.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],f.prototype._boxProcessors={},f.prototype._procField=function(a,b,c){this._parsing?this[a]=this._readField(b,c):this._writeField(b,c,this[a])},f.prototype._procFieldArray=function(a,b,c,d){var e;if(this._parsing)for(this[a]=[],e=0;b>e;e++)this[a][e]=this._readField(c,d);else for(e=0;e<this[a].length;e++)this._writeField(c,d,this[a][e])},f.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},f.prototype._procEntries=function(a,b,c){var d;if(this._parsing)for(this[a]=[],d=0;b>d;d++)this[a].push({}),c.call(this,this[a][d]);else for(d=0;b>d;d++)c.call(this,this[a][d])},f.prototype._procSubEntries=function(a,b,c,d){var e;if(this._parsing)for(a[b]=[],e=0;c>e;e++)a[b].push({}),d.call(this,a[b][e]);else for(e=0;c>e;e++)d.call(this,a[b][e])},f.prototype._procEntryField=function(a,b,c,d){this._parsing?a[b]=this._readField(c,d):this._writeField(c,d,a[b])},f.prototype._procSubBoxes=function(a,b){var c;if(this._parsing)for(this[a]=[],c=0;b>c;c++)this[a].push(f.parse(this));else for(c=0;b>c;c++)this._rawo?this[a][c].write():this.size+=this[a][c].getLength()},f.prototype._readField=function(a,b){switch(a){case"uint":return this._readUint(b);case"int":return this._readInt(b);case"template":return this._readTemplate(b);case"string":return-1===b?this._readTerminatedString():this._readString(b);case"data":return this._readData(b);case"utf8":return this._readUTF8String();default:return-1}},f.prototype._readInt=function(a){var b=null,c=this._cursor.offset-this._raw.byteOffset;switch(a){case 8:b=this._raw.getInt8(c);break;case 16:b=this._raw.getInt16(c);break;case 32:b=this._raw.getInt32(c);break;case 64:var d=this._raw.getInt32(c),e=this._raw.getInt32(c+4);b=d*Math.pow(2,32)+e}return this._cursor.offset+=a>>3,b},f.prototype._readUint=function(a){var b,c,d=null,e=this._cursor.offset-this._raw.byteOffset;switch(a){case 8:d=this._raw.getUint8(e);break;case 16:d=this._raw.getUint16(e);break;case 24:b=this._raw.getUint16(e),c=this._raw.getUint8(e+2),d=(b<<8)+c;break;case 32:d=this._raw.getUint32(e);break;case 64:b=this._raw.getUint32(e),c=this._raw.getUint32(e+4),d=b*Math.pow(2,32)+c}return this._cursor.offset+=a>>3,d},f.prototype._readString=function(a){for(var b="",c=0;a>c;c++){var d=this._readUint(8);b+=String.fromCharCode(d)}return b},f.prototype._readTemplate=function(a){var b=this._readUint(a/2),c=this._readUint(a/2);return b+c/Math.pow(2,a/2)},f.prototype._readTerminatedString=function(){for(var a="";this._cursor.offset-this._offset<this._raw.byteLength;){var b=this._readUint(8);if(0===b)break;a+=String.fromCharCode(b)}return a},f.prototype._readData=function(a){var b=a>0?a:this._raw.byteLength-(this._cursor.offset-this._offset),c=new DataView(this._raw.buffer,this._cursor.offset,b);return this._cursor.offset+=b,c},f.prototype._readUTF8String=function(){var a=this._readData();return d.Utils.dataViewToString(a)},f.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)return void(this._root._incomplete=!0);switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())},f.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},f.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(f.parse(this))},f.prototype.append=function(a,b){d.Utils.appendBox(this,a,b)},f.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var a=0;a<this.boxes.length;a++)this.size+=this.boxes[a].getLength();return this._data&&this._writeData(this._data),this.size},f.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var a=0;a<this.boxes.length;a++)this.boxes[a].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},f.prototype._writeInt=function(a,b){if(this._rawo){var c=this._cursor.offset-this._rawo.byteOffset;switch(a){case 8:this._rawo.setInt8(c,b);break;case 16:this._rawo.setInt16(c,b);break;case 32:this._rawo.setInt32(c,b);break;case 64:var d=Math.floor(b/Math.pow(2,32)),e=b-d*Math.pow(2,32);this._rawo.setUint32(c,d),this._rawo.setUint32(c+4,e)}this._cursor.offset+=a>>3}else this.size+=a>>3},f.prototype._writeUint=function(a,b){if(this._rawo){var c,d,e=this._cursor.offset-this._rawo.byteOffset;switch(a){case 8:this._rawo.setUint8(e,b);break;case 16:this._rawo.setUint16(e,b);break;case 24:c=(16776960&b)>>8,d=255&b,this._rawo.setUint16(e,c),this._rawo.setUint8(e+2,d);break;case 32:this._rawo.setUint32(e,b);break;case 64:c=Math.floor(b/Math.pow(2,32)),d=b-c*Math.pow(2,32),this._rawo.setUint32(e,c),this._rawo.setUint32(e+4,d)}this._cursor.offset+=a>>3}else this.size+=a>>3},f.prototype._writeString=function(a,b){for(var c=0;a>c;c++)this._writeUint(8,b.charCodeAt(c))},f.prototype._writeTerminatedString=function(a){if(0!==a.length){for(var b=0;b<a.length;b++)this._writeUint(8,a.charCodeAt(b));this._writeUint(8,0)}},f.prototype._writeTemplate=function(a,b){var c=Math.floor(b),d=(b-c)*Math.pow(2,a/2);this._writeUint(a/2,c),this._writeUint(a/2,d)},f.prototype._writeData=function(a){if(a instanceof Array&&(a=new DataView(Uint8Array.from(a).buffer)),a instanceof Uint8Array&&(a=new DataView(a.buffer)),this._rawo){for(var b=this._cursor.offset-this._rawo.byteOffset,c=0;c<a.byteLength;c++)this._rawo.setUint8(b+c,a.getUint8(c));this._cursor.offset+=a.byteLength}else this.size+=a.byteLength},f.prototype._writeUTF8String=function(a){var b=d.Utils.utf8ToByteArray(a);if(this._rawo)for(var c=new DataView(this._rawo.buffer,this._cursor.offset,b.length),e=0;e<b.length;e++)c.setUint8(e,b[e]);else this.size+=b.length},f.prototype._writeField=function(a,b,c){switch(a){case"uint":this._writeUint(b,c);break;case"int":this._writeInt(b,c);break;case"template":this._writeTemplate(b,c);break;case"string":-1==b?this._writeTerminatedString(c):this._writeString(b,c);break;case"data":this._writeData(c);break;case"utf8":this._writeUTF8String(c)}},f.prototype._boxProcessors.avc1=f.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},f.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},f.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(a){this._procEntryField(a,"segment_duration","uint",1===this.version?64:32),this._procEntryField(a,"media_time","int",1===this.version?64:32),this._procEntryField(a,"media_rate_integer","int",16),this._procEntryField(a,"media_rate_fraction","int",16)})},f.prototype._boxProcessors.emsg=function(){this._procFullBox(),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("message_data","data",-1)},f.prototype._boxProcessors.free=f.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},f.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},f.prototype._boxProcessors.ftyp=f.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var a=-1;this._parsing&&(a=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",a,"string",4)},f.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},f.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},f.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode((this.language>>10&31)+96,(this.language>>5&31)+96,(31&this.language)+96)),this._procField("pre_defined","uint",16)},f.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},f.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},f.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},f.prototype._boxProcessors.mp4a=f.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},f.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},f.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},f.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},f.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},f.prototype._boxProcessors.sdtp=function(){this._procFullBox();var a=-1;this._parsing&&(a=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",a,"uint",8)},f.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(a){this._parsing||(a.reference=(1&a.reference_type)<<31,a.reference|=2147483647&a.referenced_size,a.sap=(1&a.starts_with_SAP)<<31,a.sap|=(3&a.SAP_type)<<28,a.sap|=268435455&a.SAP_delta_time),this._procEntryField(a,"reference","uint",32),this._procEntryField(a,"subsegment_duration","uint",32),this._procEntryField(a,"sap","uint",32),this._parsing&&(a.reference_type=a.reference>>31&1,a.referenced_size=2147483647&a.reference,a.starts_with_SAP=a.sap>>31&1,a.SAP_type=a.sap>>28&7,a.SAP_delta_time=268435455&a.sap)})},f.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},f.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(a){this._procEntryField(a,"ranges_count","uint",32),this._procSubEntries(a,"ranges",a.ranges_count,function(a){this._procEntryField(a,"level","uint",8),this._procEntryField(a,"range_size","uint",24)})})},f.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},f.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(a){this._procEntryField(a,"sample_delta","uint",32),this._procEntryField(a,"subsample_count","uint",16),this._procSubEntries(a,"subsamples",a.subsample_count,function(a){this._procEntryField(a,"subsample_size","uint",1===this.version?32:16),this._procEntryField(a,"subsample_priority","uint",8),this._procEntryField(a,"discardable","uint",8),this._procEntryField(a,"codec_specific_parameters","uint",32)})})},f.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},f.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},f.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},f.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(a){this._procEntryField(a,"time","uint",1===this.version?64:32),this._procEntryField(a,"moof_offset","uint",1===this.version?64:32),this._procEntryField(a,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(a,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(a,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},f.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},f.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},f.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(a){256&this.flags&&this._procEntryField(a,"sample_duration","uint",32),512&this.flags&&this._procEntryField(a,"sample_size","uint",32),1024&this.flags&&this._procEntryField(a,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(a,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},f.prototype._boxProcessors["url "]=f.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},f.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},f.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},f.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},f.prototype._boxProcessors.vtte=function(){}},{}],7:[function(a,b,c){var d=c.decimalAdjust=function(a,b,c){return"undefined"==typeof c||0===+c?Math[a](b):(b=+b,c=+c,isNaN(b)||"number"!=typeof c||c%1!==0?NaN:(b=b.toString().split("e"),b=Math[a](+(b[0]+"e"+(b[1]?+b[1]-c:-c))),b=b.toString().split("e"),+(b[0]+"e"+(b[1]?+b[1]+c:c))))};b.exports={round10:function(a,b){return d("round",a,b)},floor10:function(a,b){return d("floor",a,b)},ceil10:function(a,b){return d("ceil",a,b)}},b.exports.polyfill=function(){Math.round10||(Math.round10=b.exports.round10),Math.floor10||(Math.floor10=b.exports.floor10),Math.ceil10||(Math.ceil10=b.exports.ceil10)}},{}],8:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){k=!0,l=!0,m=(new Date).getTime()}function b(a){l=a}function c(a){k=a}function d(){return k}function e(){var a="",b=null;l&&(b=(new Date).getTime(),a+="["+(b-m)+"]"),a.length>0&&(a+=" "),Array.apply(null,arguments).forEach(function(b){a+=b+" "}),k&&console.log(a),h.trigger(i["default"].LOG,{message:a})}var f=this.context,h=g["default"](f).getInstance(),j=void 0,k=void 0,l=void 0,m=void 0;return j={log:e,setLogTimestampVisible:b,setLogToBrowserConsole:c,getLogToBrowserConsole:d},a(),j}Object.defineProperty(c,"__esModule",{value:!0});var f=a(9),g=d(f),h=a(13),i=d(h),j=a(10),k=d(j);e.__dashjs_factory_name="Debug",c["default"]=k["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,13:13,9:9}],9:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b,c){var e=arguments.length<=3||void 0===arguments[3]?h:arguments[3];if(!a)throw new Error("event type cannot be null or undefined");if(!b||"function"!=typeof b)throw new Error("listener must be a function: "+b);if(!(d(a,b,c)>=0)){f[a]=f[a]||[];var g={callback:b,scope:c,priority:e},i=f[a].some(function(b,c){return b&&e>b.priority?(f[a].splice(c,0,g),!0):void 0});i||f[a].push(g)}}function b(a,b,c){if(a&&b&&f[a]){var e=d(a,b,c);0>e||(f[a][e]=null)}}function c(a,b){if(a&&f[a]){if(b=b||{},b.hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");b.type=a,f[a]=f[a].filter(function(a){return a}),f[a].forEach(function(a){return a.callback.call(a.scope,b)})}}function d(a,b,c){var d=-1;return f[a]?(f[a].some(function(a,e){return!a||a.callback!==b||c&&c!==a.scope?void 0:(d=e,!0)}),d):d}function e(){f={}}var f={},g={on:a,off:b,trigger:c,reset:e};return g}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=0,i=5e3;e.__dashjs_factory_name="EventBus";var j=g["default"].getSingletonFactory(e);j.EVENT_PRIORITY_LOW=h,j.EVENT_PRIORITY_HIGH=i,c["default"]=j,b.exports=c["default"]},{10:10}],10:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(){function a(a,b,c,d){var e=g(d);!e[a]&&b&&(e[a]={instance:b,override:c})}function b(a,b){for(var c in j){var d=j[c];if(d.context===a&&d.name===b)return d.instance}return null}function c(a,b,c){for(var d in j){var e=j[d];if(e.context===a&&e.name===b)return void(j[d].instance=c)}j.push({name:b,context:a,instance:c})}function d(a){return function(b){return void 0===b&&(b={}),{create:function(){return f(a.__dashjs_factory_name,a.apply({context:b},arguments),b,arguments)}}}}function e(a){return function(c){var d=void 0;return void 0===c&&(c={}),{getInstance:function(){return d||(d=b(c,a.__dashjs_factory_name)),d||(d=f(a.__dashjs_factory_name,a.apply({context:c},arguments),c,arguments),j.push({name:a.__dashjs_factory_name,context:c,instance:d})),d}}}}function f(a,b,c,d){var e=g(c),f=e[a];if(f){var i=f.instance;if(!f.override)return i.apply({context:c,factory:h},d);i=i.apply({context:c,factory:h,parent:b},d);for(var j in i)b.hasOwnProperty(j)&&(b[j]=i[j])}return b}function g(a){var b=void 0;return i.forEach(function(c){c===a&&(b=c)}),b||(b=i.push(a)),b}var h=void 0,i=[],j=[];return h={extend:a,getSingletonInstance:b,setSingletonInstance:c,getSingletonFactory:e,getClassFactory:d}}();c["default"]=d,b.exports=c["default"]},{}],11:[function(a,b,c){"use strict";function d(){return e}Object.defineProperty(c,"__esModule",{value:!0}),c.getVersionString=d;var e="2.5.0"},{}],12:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(14),i=d(h),j=function(a){function b(){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_REQUESTED="initRequested",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATED="representationUpdated",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_APPEND_COMPLETED="sourceBufferAppendCompleted",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TIMED_TEXT_REQUESTED="timedTextRequested",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}return f(b,a),b}(i["default"]);c["default"]=j,b.exports=c["default"]},{14:14}],13:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(12),i=d(h),j=function(a){function b(){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).apply(this,arguments)}return f(b,a),b}(i["default"]),k=new j;c["default"]=k,b.exports=c["default"]},{12:12}],14:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"extend",value:function(a,b){if(a){var c=!!b&&b.override,d=!!b&&b.publicOnly;for(var e in a)!a.hasOwnProperty(e)||this[e]&&!c||d&&-1===a[e].indexOf("public_")||(this[e]=a[e])}}}]),a}();c["default"]=f,b.exports=c["default"]},{}],15:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(){function a(a){a&&a.dashManifestModel&&(I=a.dashManifestModel)}function b(){J=[],K={}}function c(a,b){return b.getRepresentationForQuality(a.quality)}function d(a){return K&&a&&K[a.streamInfo.id]?K[a.streamInfo.id][a.index]:null}function e(a){for(var b=J.length,c=0;b>c;c++){var d=J[c];if(a.id===d.id)return d}return null}function f(a,b){var c=new h["default"],d=b.adaptation.period.mpd.manifest.Period_asArray[b.adaptation.period.index].AdaptationSet_asArray[b.adaptation.index],e=I.getRepresentationFor(b.index,d);return c.id=b.id,c.quality=b.index,c.bandwidth=I.getBandwidth(e),c.DVRWindow=b.segmentAvailabilityRange,c.fragmentDuration=b.segmentDuration||(b.segments&&b.segments.length>0?b.segments[0].duration:NaN),
c.MSETimeOffset=b.MSETimeOffset,c.useCalculatedLiveEdgeTime=b.useCalculatedLiveEdgeTime,c.mediaInfo=g(a,b.adaptation),c}function g(a,b){var c,d=new j["default"],e=b.period.mpd.manifest.Period_asArray[b.period.index].AdaptationSet_asArray[b.index];return d.id=b.id,d.index=b.index,d.type=b.type,d.streamInfo=k(a,b.period),d.representationCount=I.getRepresentationCount(e),d.lang=I.getLanguageForAdaptation(e),c=I.getViewpointForAdaptation(e),d.viewpoint=c?c.value:void 0,d.accessibility=I.getAccessibilityForAdaptation(e).map(function(a){var b=a.value,c=b;return a.schemeIdUri&&a.schemeIdUri.search("cea-608")>=0&&"undefined"!=typeof t["default"]&&(c=b?"cea-608:"+b:"cea-608",d.embeddedCaptions=!0),c}),d.audioChannelConfiguration=I.getAudioChannelConfigurationForAdaptation(e).map(function(a){return a.value}),d.roles=I.getRolesForAdaptation(e).map(function(a){return a.value}),d.codec=I.getCodec(e),d.mimeType=I.getMimeType(e),d.contentProtection=I.getContentProtectionData(e),d.bitrateList=I.getBitrateListForAdaptation(e),d.contentProtection&&d.contentProtection.forEach(function(a){a.KID=I.getKID(a)}),d.isText=I.getIsTextTrack(d.mimeType),d}function i(a,b,c){a.id=b,a.index=100+parseInt(b.substring(2,3)),a.type="embeddedText",a.codec="cea-608-in-SEI",a.isText=!0,a.isEmbedded=!0,a.lang=b+" "+c,a.roles=["caption"]}function k(a,b){var c=new l["default"],d=1;return c.id=b.id,c.index=b.index,c.start=b.start,c.duration=b.duration,c.manifestInfo=m(a,b.mpd),c.isLast=1===a.Period_asArray.length||Math.abs(c.start+c.duration-c.manifestInfo.duration)<d,c.isFirst=1===a.Period_asArray.length||I.getRegularPeriods(a,I.getMpd(a))[0].id===b.id,c}function m(a,b){var c=new n["default"];return c.DVRWindowSize=b.timeShiftBufferDepth,c.loadedTime=b.manifest.loadedTime,c.availableFrom=b.availabilityStartTime,c.minBufferTime=b.manifest.minBufferTime,c.maxFragmentDuration=b.maxSegmentDuration,c.duration=I.getDuration(a),c.isDynamic=I.getIsDynamic(a),c}function o(a,b,c){var d=I.getAdaptationForType(a,b.index,c,b);if(!d)return null;var f=e(b),h=f.id,i=I.getIndexForAdaptation(d,a,b.index);return K[h]=K[h]||I.getAdaptationsForPeriod(a,f),g(a,K[h][i])}function q(a,b,c){var d,f,h,j,k,l,m=e(b),n=m.id,o=I.getAdaptationsForType(a,b.index,"embeddedText"!==c?c:"video"),p=[];if(!o)return p;for(K[n]=K[n]||I.getAdaptationsForPeriod(a,m),j=0,l=o.length;l>j;j++){if(d=o[j],h=I.getIndexForAdaptation(d,a,b.index),f=g(a,K[n][h]),"embeddedText"===c){var q=f.accessibility.length;for(k=0;q>k;k++)if(f){var r=f.accessibility[k];if(0===r.indexOf("cea-608:")){var s=r.substring(8),t=s.split(";");if("CC"===t[0].substring(0,2))for(k=0;k<t.length;k++)f||(f=g.call(this,a,K[n][h])),i(f,t[k].substring(0,3),t[k].substring(4)),p.push(f),f=null;else for(k=0;k<t.length;k++)f||(f=g.call(this,a,K[n][h])),i(f,"CC"+(k+1),t[k]),p.push(f),f=null}else 0===r.indexOf("cea-608")&&(i(f,"CC1","eng"),p.push(f),f=null)}}f&&"embeddedText"!==c&&p.push(f)}return p}function r(a){if(!a)return null;var b=[],c=I.getMpd(a);J=I.getRegularPeriods(a,c),K={};for(var d=0,e=J.length;e>d;d++)b.push(k(a,J[d]));return b}function s(a){var b=I.getMpd(a);return m(a,b)}function u(a,b){var c=a.getRepresentationController().getRepresentationForQuality(b);return a.getIndexHandler().getInitRequest(c)}function w(a,b){var d=c(b,a.getRepresentationController());return a.getIndexHandler().getNextSegmentRequest(d)}function x(a,b,d,e){var f=c(b,a.getRepresentationController());return a.getIndexHandler().getSegmentRequestForTime(f,d,e)}function y(a,b,d){var e=c(b,a.getRepresentationController());return a.getIndexHandler().generateSegmentRequestForTime(e,d)}function z(a){return a.getIndexHandler().getCurrentTime()}function A(a,b){return a.getIndexHandler().setCurrentTime(b)}function B(a,b){var c,f,g=e(b.getStreamInfo()),h=b.getMediaInfo(),i=d(h),j=b.getType();c=h.id,f=c?I.getAdaptationForId(c,a,g.index):I.getAdaptationForIndex(h.index,a,g.index),b.getRepresentationController().updateData(f,i,j)}function C(a,b,c){var d=b.getRepresentationForQuality(c);return d?f(a,d):null}function D(a,b){var c=b.getCurrentRepresentation();return c?f(a,c):null}function E(a,b,c){var d=new p["default"],e=a.scheme_id_uri,f=a.value,g=a.timescale,h=a.presentation_time_delta,i=a.event_duration,j=a.id,k=a.message_data,l=c*g+h;return b[e]?(d.eventStream=b[e],d.eventStream.value=f,d.eventStream.timescale=g,d.duration=i,d.id=j,d.presentationTime=l,d.messageData=k,d.presentationTimeDelta=h,d):null}function F(a,b,f){var g=[];return b instanceof l["default"]?g=I.getEventsForPeriod(a,e(b)):b instanceof j["default"]?g=I.getEventStreamForAdaptationSet(a,d(b)):b instanceof h["default"]&&(g=I.getEventStreamForRepresentation(a,c(b,f.getRepresentationController()))),g}function G(){J=[],K={}}var H=void 0,I=void 0,J=void 0,K=void 0;return H={initialize:b,convertDataToTrack:f,convertDataToMedia:g,convertDataToStream:k,getDataForTrack:c,getDataForMedia:d,getDataForStream:e,getStreamsInfo:r,getManifestInfo:s,getMediaInfoForType:o,getAllMediaInfoForType:q,getCurrentRepresentationInfo:D,getRepresentationInfoForQuality:C,updateData:B,getInitRequest:u,getNextFragmentRequest:w,getFragmentRequestForTime:x,generateFragmentRequestForTime:y,getIndexHandlerTime:z,setIndexHandlerTime:A,getEventsFor:F,getEvent:E,setConfig:a,reset:G,metricsList:v}}Object.defineProperty(c,"__esModule",{value:!0});var g=a(175),h=e(g),i=a(170),j=e(i),k=a(172),l=e(k),m=a(169),n=e(m),o=a(42),p=e(o),q=a(10),r=e(q),s=a(2),t=e(s),u=a(20),v=d(u);f.__dashjs_factory_name="DashAdapter",c["default"]=r["default"].getSingletonFactory(f),b.exports=c["default"]},{10:10,169:169,170:170,172:172,175:175,2:2,20:20,42:42}],16:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){V=-1,Z=0,$=NaN,N.on(l["default"].INITIALIZATION_LOADED,J,U),N.on(l["default"].SEGMENTS_LOADED,K,U)}function c(b){_=b,Y=_.getType(),X=_.isDynamic(),aa=y["default"](L).create(a,X)}function d(){return _}function e(a){Z=a}function f(){return Z}function h(){return V}function k(){return $}function m(){aa=null,Z=0,$=NaN,W=NaN,V=-1,X=null,Y=null,_=null,N.off(l["default"].INITIALIZATION_LOADED,J,U),N.off(l["default"].SEGMENTS_LOADED,K,U)}function o(a){return a?a.split("$$").join("$"):a}function p(a,b){if(null===b||null===a||-1===a.indexOf("$RepresentationID$"))return a;var c=b.toString();return a.split("$RepresentationID$").join(c)}function q(a,b,c){var d,e,f=T.resolve(c.path);return f&&b!==f.url&&O.isRelative(b)?(d=f.url,e=f.serviceLocation,b&&(d=O.resolve(b,d))):d=b,!O.isRelative(d)&&(a.url=d,a.serviceLocation=e,!0)}function s(a,b){var c=new g["default"],d=a.adaptation.period,e=d.start;return c.mediaType=b,c.type=j.HTTPRequest.INIT_SEGMENT_TYPE,c.range=a.range,c.availabilityStartTime=Q.calcAvailabilityStartTimeFromPresentationTime(e,d.mpd,X),c.availabilityEndTime=Q.calcAvailabilityEndTimeFromPresentationTime(e+d.duration,d.mpd,X),c.quality=a.index,c.mediaInfo=_.getMediaInfo(),c.representationId=a.id,q(c,a.initialization,a)?c:void 0}function u(a){if(!a)return null;var b=s(a,Y);return b}function x(a){var b=!1;if(X||V!==a.availableSegmentsNumber){var c=w.getSegmentByIndex(V,a);if(c){var d=c.presentationStartTime-a.adaptation.period.start,e=a.adaptation.period.duration;M(a.segmentInfoType+": "+d+" / "+e),b=("SegmentTimeline"!==a.segmentInfoType||!X)&&d>=e}}else b=!0;return b}function A(a){return aa.getSegments(a,W,V,B)}function B(a,b){if(a.segments=b,b&&b.length>0&&($=isNaN($)?b[0].presentationStartTime:Math.min(b[0].presentationStartTime,$)),X&&isNaN(Q.getExpectedLiveEdge())){var c=b[b.length-1],d=c.presentationStartTime,e=S.getMetricsFor("stream");Q.setExpectedLiveEdge(d),S.updateManifestUpdateInfo(R.getCurrentManifestUpdate(e),{presentationStartTime:d})}}function C(a){if(!a)throw new i["default"]("no representation");return a.segments=null,A(a),a}function D(a,b){var c,d=v["default"].hasInitialization(a),e=v["default"].hasSegments(a);return a.segmentDuration||a.segments||C(a),a.segmentAvailabilityRange=null,a.segmentAvailabilityRange=Q.calcSegmentAvailabilityRange(a,X),a.segmentAvailabilityRange.end<a.segmentAvailabilityRange.start&&!a.useCalculatedLiveEdgeTime?(c=new i["default"](z,"no segments are available yet",{availabilityDelay:a.segmentAvailabilityRange.start-a.segmentAvailabilityRange.end}),void N.trigger(l["default"].REPRESENTATION_UPDATED,{sender:this,representation:a,error:c})):(b||(V=-1),a.segmentDuration&&C(a),d||P.loadInitialization(a),e||P.loadSegments(a,Y,a.indexRange),void(d&&e&&N.trigger(l["default"].REPRESENTATION_UPDATED,{sender:this,representation:a})))}function E(a,b,c){var d,e,f,g,h,i=b.segments,j=i?i.length:null,k=-1;if(i&&j>0)for(h=0;j>h;h++)if(e=i[h],f=e.presentationStartTime,g=e.duration,d=void 0===c||null===c?g/2:c,a+d>=f&&f+g>a-d){k=e.availabilityIdx;break}return k}function F(a){if(null===a||void 0===a)return null;var b=new g["default"],c=a.representation,d=c.adaptation.period.mpd.manifest.Period_asArray[c.adaptation.period.index].AdaptationSet_asArray[c.adaptation.index].Representation_asArray[c.index].bandwidth,e=a.media;return e=w.replaceTokenForTemplate(e,"Number",a.replacementNumber),e=w.replaceTokenForTemplate(e,"Time",a.replacementTime),e=w.replaceTokenForTemplate(e,"Bandwidth",d),e=p(e,c.id),e=o(e),b.mediaType=Y,b.type=j.HTTPRequest.MEDIA_SEGMENT_TYPE,b.range=a.mediaRange,b.startTime=a.presentationStartTime,b.duration=a.duration,b.timescale=c.timescale,b.availabilityStartTime=a.availabilityStartTime,b.availabilityEndTime=a.availabilityEndTime,b.wallStartTime=a.wallStartTime,b.quality=c.index,b.index=a.availabilityIdx,b.mediaInfo=_.getMediaInfo(),b.adaptationIndex=c.adaptation.index,q(b,e,c)?b:void 0}function G(a,b,c){var d,e,f,h=V,i=!!c&&c.keepIdx,j=c?c.timeThreshold:null,k=!(!c||!c.ignoreIsFinished);return a?(W!==b&&(W=b,M("Getting the request for "+Y+" time : "+b)),A(a),V=E(b,a,j),0>V&&(A(a),V=E(b,a,j)),V>0&&M("Index for "+Y+" time "+b+" is "+V),f=!k&&x(a),f?(d=new g["default"],d.action=g["default"].ACTION_COMPLETE,d.index=V,d.mediaType=Y,d.mediaInfo=_.getMediaInfo(),M("Signal complete.",d)):(e=w.getSegmentByIndex(V,a),d=F(e)),i&&h>=0&&(V="SegmentTimeline"===a.segmentInfoType&&X?V:h),d):null}function H(a,b){var c=(a.segmentAvailabilityRange.end-a.segmentAvailabilityRange.start)/2;return a.segments=null,a.segmentAvailabilityRange={start:b-c,end:b+c},G(a,b,{keepIdx:!1,ignoreIsFinished:!0})}function I(a){var b,c,d;return a&&-1!==V?(W=null,V++,M("Getting the next request at index: "+V),d=x(a),d?(b=new g["default"],b.action=g["default"].ACTION_COMPLETE,b.index=V,b.mediaType=Y,b.mediaInfo=_.getMediaInfo(),M("Signal complete.")):(A(a),c=w.getSegmentByIndex(V,a),b=F(c),!c&&X&&V--),b):null}function J(a){var b=a.representation;b.segments&&N.trigger(l["default"].REPRESENTATION_UPDATED,{sender:this,representation:b})}function K(a){if(!a.error&&Y===a.mediaType){var b,c,d,e,f=a.segments,g=a.representation,h=[],i=0;for(b=0,c=f.length;c>b;b++)d=f[b],e=w.getTimeBasedSegment(Q,X,g,d.startTime,d.duration,d.timescale,d.media,d.mediaRange,i),h.push(e),e=null,i++;g.segmentAvailabilityRange={start:h[0].presentationStartTime,end:h[c-1].presentationStartTime},g.availableSegmentsNumber=c,B(g,h),v["default"].hasInitialization(g)&&N.trigger(l["default"].REPRESENTATION_UPDATED,{sender:this,representation:g})}}var L=this.context,M=r["default"](L).getInstance().log,N=n["default"](L).getInstance(),O=t["default"](L).getInstance(),P=a.segmentBaseLoader,Q=a.timelineConverter,R=a.dashMetrics,S=a.metricsModel,T=a.baseURLController,U=void 0,V=void 0,W=void 0,X=void 0,Y=void 0,Z=void 0,$=void 0,_=void 0,aa=void 0;return U={initialize:c,getStreamProcessor:d,getInitRequest:u,getSegmentRequestForTime:G,getNextSegmentRequest:I,generateSegmentRequestForTime:H,updateRepresentation:D,setCurrentTime:e,getCurrentTime:f,getCurrentIndex:h,getEarliestTime:k,reset:m},b(),U}Object.defineProperty(c,"__esModule",{value:!0});var f=a(166),g=d(f),h=a(165),i=d(h),j=a(182),k=a(13),l=d(k),m=a(9),n=d(m),o=a(10),p=d(o),q=a(8),r=d(q),s=a(159),t=d(s),u=a(46),v=d(u),w=a(36),x=a(35),y=d(x),z=1;e.__dashjs_factory_name="DashHandler";var A=p["default"].getClassFactory(e);A.SEGMENTS_UNAVAILABLE_ERROR_CODE=z,c["default"]=A,b.exports=c["default"]},{10:10,13:13,159:159,165:165,166:166,182:182,35:35,36:36,46:46,8:8,9:9}],17:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(){function a(a,b){var c,d=C.getValue(),e=d.Period_asArray[b];return c=x(e,a),null===c?null:c.bandwidth}function b(a,b){var c,d=C.getValue(),e=d.Period_asArray[b];return c=w(e,a)}function c(a,b){var c,d=C.getValue(),e=d.Period_asArray[b];return c=z(e,a)}function d(a){return m(a,o.TRACK_SWITCH)}function e(a){return m(a,o.BUFFER_LEVEL)}function f(a){var b=e(a);return b?p.round10(b.level/1e3,-3):0}function h(a){return a.RequestsQueue}function j(a){if(null===a)return null;var b,c,d=a.HttpList,e=null;if(null===d||d.length<=0)return null;for(b=d.length,c=b-1;c>=0;){if(d[c].responsecode){e=d[c];break}c--}return e}function l(a){return null===a?[]:a.HttpList?a.HttpList:[]}function m(a,b){if(null===a)return null;var c=a[b];if(null===c)return null;var d=c.length;return 0>=d?null:c[d-1]}function n(a){return m(a,o.DROPPED_FRAMES)}function q(a){return m(a,o.SCHEDULING_INFO)}function r(a){return m(a,o.MANIFEST_UPDATE)}function s(a){return m(a,o.DVR_INFO)}function t(a,b){var c,d,e,f={};if(null===a)return null;for(c=l(a),e=c.length-1;e>=0;e--)if(d=c[e],d.type===g.HTTPRequest.MPD_TYPE){f=v(d._responseHeaders);break}return void 0===f[b]?null:f[b]}function u(a,b){if(null===a)return null;var c,d=j(a);return null===d||null===d._responseHeaders?null:(c=v(d._responseHeaders),void 0===c[b]?null:c[b])}function v(a){var b={};if(!a)return b;for(var c=a.trim().split("\r\n"),d=0,e=c.length;e>d;d++){var f=c[d],g=f.indexOf(": ");g>0&&(b[f.substring(0,g)]=f.substring(g+2))}return b}function w(a,b){var c=x(a,b,!0);return null!==c?c:-1}function x(a,b,c){var d,e,f,g,h,i;if(a)for(e=a.AdaptationSet_asArray,h=0;h<e.length;h+=1)for(d=e[h],g=d.Representation_asArray,i=0;i<g.length;i+=1)if(f=g[i],b===f.id)return c?i:f;return null}function y(a,b){return k["default"](B).getInstance().getIsTypeOf(a,b)}function z(a,b){var c,d,e,f;if(!a||!b)return-1;for(d=a.AdaptationSet_asArray,f=0;f<d.length;f+=1)if(c=d[f],e=c.Representation_asArray,y(c,b))return e.length;return-1}var A=void 0,B=this.context,C=i["default"](B).getInstance();return A={getBandwidthForRepresentation:a,getIndexForRepresentation:b,getMaxIndexForBufferType:c,getCurrentRepresentationSwitch:d,getLatestBufferLevelVO:e,getCurrentBufferLevel:f,getCurrentHttpRequest:j,getHttpRequests:l,getCurrentDroppedFrames:n,getCurrentSchedulingInfo:q,getCurrentDVRInfo:s,getCurrentManifestUpdate:r,getLatestFragmentRequestHeaderValueByID:u,getLatestMPDRequestHeaderValueByID:t,getRequestsQueue:h}}Object.defineProperty(c,"__esModule",{value:!0});var g=a(182),h=a(98),i=e(h),j=a(22),k=e(j),l=a(10),m=e(l),n=a(20),o=d(n),p=a(7);f.__dashjs_factory_name="DashMetrics",c["default"]=m["default"].getSingletonFactory(f),b.exports=c["default"]},{10:10,182:182,20:20,22:22,7:7,98:98}],18:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){u=m["default"](n).getInstance(),v=s["default"](n).getInstance(),y=g["default"](n).getInstance(),C=B["default"](n).create({errHandler:u,metricsModel:A,requestModifier:y})}function b(a){a.baseURLController&&(D=a.baseURLController),a.metricsModel&&(A=a.metricsModel)}function c(a,b){var d=null,e=null,f=D.resolve(a.path),g=b||{init:!0,url:f?f.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500};p("Start searching for initialization.");var i=j(g),k=function(b){g.bytesLoaded=g.range.end,e=v.parse(b),d=h(e),d?(a.range=d,r.trigger(o["default"].INITIALIZATION_LOADED,{representation:a})):(g.range.end=g.bytesLoaded+g.bytesToLoad,c(a,g))},l=function(){r.trigger(o["default"].INITIALIZATION_LOADED,{representation:a})};C.load({request:i,success:k,error:l}),p("Perform init search: "+g.url)}function d(a,b,c,e,g){if(c&&(void 0===c.start||void 0===c.end)){var h=c?c.toString().split("-"):null;c=h?{start:parseFloat(h[0]),end:parseFloat(h[1])}:null}g=g?g:l;var i=null,k=null,m=!!c,n=D.resolve(a.path),o={init:!1,url:n?n.url:void 0,range:m?c:{start:0,end:1500},searching:!m,bytesLoaded:e?e.bytesLoaded:0,bytesToLoad:1500},q=j(o),r=function(c){var e=o.bytesToLoad,h=c.byteLength;if(o.bytesLoaded=o.range.end-o.range.start,i=v.parse(c),k=i.getBox("sidx"),k&&k.isComplete){var j,l,m=k.references;if(null!==m&&void 0!==m&&m.length>0&&(j=1===m[0].reference_type),j){p("Initiate multiple SIDX load."),o.range.end=o.range.start+k.size;var n,q,r,s,t,u=[],w=0,x=(k.offset||o.range.start)+k.size,y=function(c){c?(u=u.concat(c),w++,w>=q&&g(u,a,b)):g(null,a,b)};for(n=0,q=m.length;q>n;n++)r=x,s=x+m[n].referenced_size-1,x+=m[n].referenced_size,t={start:r,end:s},d(a,null,t,o,y)}else p("Parsing segments from SIDX."),l=f(k,o),g(l,a,b)}else{if(k)o.range.start=k.offset||o.range.start,o.range.end=o.range.start+(k.size||e);else{if(h<o.bytesLoaded)return void g(null,a,b);var z=i.getLastBox();z&&z.size?(o.range.start=z.offset+z.size,o.range.end=o.range.start+e):o.range.end+=e}d(a,b,o.range,o,g)}},s=function(){g(null,a,b)};C.load({request:q,success:r,error:s}),p("Perform SIDX load: "+o.url)}function e(){C.abort(),C=null,u=null,v=null,y=null}function f(a,b){for(var c,d,e,f,g=a.references,h=g.length,j=a.timescale,k=a.earliest_presentation_time,l=b.range.start+a.offset+a.first_offset+a.size,m=[],n=0;h>n;n++)e=g[n].subsegment_duration,f=g[n].referenced_size,c=new i["default"],c.duration=e,c.startTime=k,c.timescale=j,d=l+f-1,c.mediaRange=l+"-"+d,m.push(c),k+=e,l+=f;return m}function h(a){var b,c,d=a.getBox("ftyp"),e=a.getBox("moov"),f=null;return p("Searching for initialization."),e&&e.isComplete&&(b=d?d.offset:e.offset,c=e.offset+e.size-1,f=b+"-"+c,p("Found the initialization.  Range: "+f)),f}function j(a){if(a.url){var b=new z["default"];return b.type=a.init?x.HTTPRequest.INIT_SEGMENT_TYPE:x.HTTPRequest.MEDIA_SEGMENT_TYPE,b.url=a.url,b.range=a.range.start+"-"+a.range.end,b}}function l(a,b,c){a?r.trigger(o["default"].SEGMENTS_LOADED,{segments:a,representation:b,mediaType:c}):r.trigger(o["default"].SEGMENTS_LOADED,{segments:null,representation:b,mediaType:c,error:new k["default"](null,"error loading segments",null)})}var n=this.context,p=w["default"](n).getInstance().log,r=q["default"](n).getInstance(),t=void 0,u=void 0,v=void 0,y=void 0,A=void 0,C=void 0,D=void 0;return t={setConfig:b,initialize:a,loadInitialization:c,loadSegments:d,reset:e}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(157),g=d(f),h=a(47),i=d(h),j=a(165),k=d(j),l=a(152),m=d(l),n=a(13),o=d(n),p=a(9),q=d(p),r=a(147),s=d(r),t=a(10),u=d(t),v=a(8),w=d(v),x=a(182),y=a(166),z=d(y),A=a(57),B=d(A);e.__dashjs_factory_name="SegmentBaseLoader",c["default"]=u["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,13:13,147:147,152:152,157:157,165:165,166:166,182:182,47:47,57:57,8:8,9:9}],19:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){y={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"},CueBlockNumber:{tag:21368}}}}},Void:{tag:236,required:!0}}}function b(){A=q["default"](p).getInstance(),B=s["default"](p).getInstance(),D=z["default"](p).create({errHandler:A,metricsModel:C,requestModifier:B})}function c(a){if(!a.baseURLController||!a.metricsModel)throw new Error("Missing config parameter(s)");E=a.baseURLController,C=a.metricsModel}function d(a){var b=[],c=void 0,d=void 0,e=void 0,f=k["default"](p).create({data:a}),g=void 0;for(f.consumeTag(y.Segment.Cues),d=f.getMatroskaCodedNum();f.moreData()&&f.consumeTagAndSize(y.Segment.Cues.CuePoint,!0);){for(c={},c.CueTime=f.parseTag(y.Segment.Cues.CuePoint.CueTime),c.CueTracks=[];f.moreData()&&f.consumeTagAndSize(y.Segment.Cues.CuePoint.CueTrackPositions,!0);){if(e={},e.Track=f.parseTag(y.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===e.Track)throw new Error("Cue track cannot be 0");e.ClusterPosition=f.parseTag(y.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),f.getPos()+4>d||!f.consumeTag(y.Segment.Cues.CuePoint.CueTrackPositions.CueBlockNumber,!0)?c.CueTracks.push(e):(g=f.getMatroskaCodedNum(),e.BlockNumber=f.getMatroskaUint(g),c.CueTracks.push(e))}if(0===c.CueTracks.length)throw new Error("Mandatory cuetrack not found");b.push(c)}if(0===b.length)throw new Error("mandatory cuepoint not found");return b}function e(a,b,c,e){var f=void 0,g=void 0,h=void 0,i=void 0,j=void 0,k=void 0,l=void 0,m=void 0;for(g=d(a),h=[],j=0,k=g.length;k>j;j+=1)i=new u["default"],f=0,f=j<g.length-1?g[j+1].CueTime-g[j].CueTime:e-g[j].CueTime,i.duration=f,i.startTime=g[j].CueTime,i.timescale=1e3,l=g[j].CueTracks[0].ClusterPosition+b,m=j<g.length-1?g[j+1].CueTracks[0].ClusterPosition+b-1:c-1,i.mediaRange=l+"-"+m,h.push(i);return r("Parsed cues: "+h.length+" cues."),h}function f(a,b,c,d){var f=k["default"](p).create({data:a}),g=void 0,h=void 0,i=c.split("-"),j=null,l={url:b,range:{start:parseFloat(i[0]),end:parseFloat(i[1])},request:j},n=void 0,o=void 0;for(r("Parse EBML header: "+l.url),f.skipOverElement(y.EBML),f.consumeTag(y.Segment),n=f.getMatroskaCodedNum(),n+=f.getPos(),o=f.getPos();f.moreData()&&!f.consumeTagAndSize(y.Segment.Info,!0);)if(!(f.skipOverElement(y.Segment.SeekHead,!0)||f.skipOverElement(y.Segment.Tracks,!0)||f.skipOverElement(y.Segment.Cues,!0)||f.skipOverElement(y.Void,!0)))throw new Error("no valid top level element found");for(;void 0===g;){var q=f.getMatroskaCodedNum(!0),s=f.getMatroskaCodedNum();switch(q){case y.Segment.Info.Duration.tag:g=f[y.Segment.Info.Duration.parse](s);break;default:f.setPos(f.getPos()+s)}}j=m(l);var t=function(a){h=e(a,o,n,g),d(h)},u=function(){r("Download Error: Cues "+l.url),d(null)};D.load({request:j,success:t,error:u}),r("Perform cues load: "+l.url+" bytes="+l.range.start+"-"+l.range.end)}function h(a,b){var c=null,d=E.resolve(a.path),e=d?d.url:void 0,f=a.range.split("-"),h=b||{range:{start:parseFloat(f[0]),end:parseFloat(f[1])},request:c,url:e,init:!0};r("Start loading initialization."),c=m(h);var i=function(){t.trigger(g["default"].INITIALIZATION_LOADED,{representation:a})},j=function(){t.trigger(g["default"].INITIALIZATION_LOADED,{representation:a})};D.load({request:c,success:i,error:j}),r("Perform init load: "+h.url)}function j(a,b,c,d){var e=null,g=E.resolve(a.path),h=g?g.url:void 0,i=8192,j={bytesLoaded:0,bytesToLoad:i,range:{start:0,end:i},request:e,url:h,init:!1};d=d?d:l,e=m(j),r("Parsing ebml header");var k=function(e){f(e,h,c,function(c){d(c,a,b)})},n=function(){d(null,a,b)};D.load({request:e,success:k,error:n})}function l(a,b,c){a?t.trigger(g["default"].SEGMENTS_LOADED,{segments:a,representation:b,mediaType:c}):t.trigger(g["default"].SEGMENTS_LOADED,{segments:null,representation:b,mediaType:c,error:new Error(null,"error loading segments",null)})}function m(a){var b=new x["default"];return b.type=a.init?v.HTTPRequest.INIT_SEGMENT_TYPE:v.HTTPRequest.MEDIA_SEGMENT_TYPE,b.url=a.url,b.range=a.range.start+"-"+a.range.end,b}function n(){A=null,B=null,r=null}var p=this.context,r=o["default"](p).getInstance().log,t=i["default"](p).getInstance(),w=void 0,y=void 0,A=void 0,B=void 0,C=void 0,D=void 0,E=void 0;return w={setConfig:c,initialize:b,loadInitialization:h,loadSegments:j,reset:n},a(),w}Object.defineProperty(c,"__esModule",{value:!0});var f=a(13),g=d(f),h=a(9),i=d(h),j=a(151),k=d(j),l=a(10),m=d(l),n=a(8),o=d(n),p=a(152),q=d(p),r=a(157),s=d(r),t=a(47),u=d(t),v=a(182),w=a(166),x=d(w),y=a(57),z=d(y);e.__dashjs_factory_name="WebmSegmentBaseLoader",c["default"]=m["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,13:13,151:151,152:152,157:157,166:166,182:182,47:47,57:57,8:8,9:9}],20:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d="TcpList";c.TCP_CONNECTION=d;var e="HttpList";c.HTTP_REQUEST=e;var f="RepSwitchList";c.TRACK_SWITCH=f;var g="BufferLevel";c.BUFFER_LEVEL=g;var h="BufferState";c.BUFFER_STATE=h;var i="DVRInfo";c.DVR_INFO=i;var j="DroppedFrames";c.DROPPED_FRAMES=j;var k="SchedulingInfo";c.SCHEDULING_INFO=k;var l="RequestsQueue";c.REQUESTS_QUEUE=l;var m="ManifestUpdate";c.MANIFEST_UPDATE=m;var n="ManifestUpdatePeriodInfo";c.MANIFEST_UPDATE_STREAM_INFO=n;var o="ManifestUpdateRepresentationInfo";c.MANIFEST_UPDATE_TRACK_INFO=o;var p="PlayList";c.PLAY_LIST=p;var q="DVBErrors";c.DVB_ERRORS=q},{}],21:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){O=null,P=-1,Q=!0,R=[],U=m["default"](L).getInstance(),W=o["default"](L).getInstance(),X=q["default"](L).getInstance(),Y=s["default"](L).getInstance(),Z=u["default"](L).getInstance(),$=k["default"](L).getInstance(),_=g["default"](L).getInstance(),aa=i["default"](L).getInstance(),M.on(A["default"].QUALITY_CHANGE_REQUESTED,J,N),M.on(A["default"].REPRESENTATION_UPDATED,F,N),M.on(A["default"].WALLCLOCK_TIME_UPDATED,H,N),M.on(A["default"].BUFFER_LEVEL_UPDATED,I,N)}function b(a){a.abrController&&(U=a.abrController)}function c(a){T=a,V=T.getIndexHandler()}function d(){return T}function e(){return O}function f(){return P}function h(){return Q}function j(){return S}function l(){M.off(A["default"].QUALITY_CHANGE_REQUESTED,J,N),M.off(A["default"].REPRESENTATION_UPDATED,F,N),M.off(A["default"].WALLCLOCK_TIME_UPDATED,H,N),M.off(A["default"].BUFFER_LEVEL_UPDATED,I,N),O=null,P=-1,Q=!0,R=[],U=null,W=null,X=null,Y=null,Z=null,$=null,_=null,aa=null}function n(a,b,c){var d,e,f=null,g=T.getStreamInfo(),h=U.getTopQualityIndexFor(c,g.id);if(Q=!0,M.trigger(A["default"].DATA_UPDATE_STARTED,{sender:this}),R=z(b),null===O&&"fragmentedText"!==c?(e=U.getAverageThroughput(c),f=e||U.getInitialBitrateFor(c,g),d=U.getQualityForBitrate(T.getMediaInfo(),f)):d=U.getQualityFor(c,g),d>h&&(d=h),S=t(d),O=a,"video"!==c&&"audio"!==c&&"fragmentedText"!==c)return Q=!1,void M.trigger(A["default"].DATA_UPDATE_COMPLETED,{sender:this,data:O,currentRepresentation:S});for(var i=0;i<R.length;i++)V.updateRepresentation(R[i],!0)}function p(){var a=new Date,b=j(),c=1e3*W.getTime();Y.addRepresentationSwitch(b.adaptation.type,a,c,b.id)}function r(){var a=$.calcSegmentAvailabilityRange(S,T.isDynamic());Y.addDVRInfo(T.getType(),W.getTime(),T.getStreamInfo().manifestInfo,a)}function t(a){return R[a]}function v(a){return R.indexOf(a)}function x(){for(var a=0,b=R.length;b>a;a++){var c=R[a].segmentInfoType;if(null===R[a].segmentAvailabilityRange||!G["default"].hasInitialization(R[a])||("SegmentBase"===c||"BaseURL"===c)&&!R[a].segments)return!1}return!0}function z(a){var b,c=X.getValue();return P=_.getIndexForAdaptation(O,c,a.period.index),b=_.getRepresentationsForAdaptation(c,a)}function B(a){for(var b,c=0,d=R.length;d>c;c++)b=R[c],b.segmentAvailabilityRange=$.calcSegmentAvailabilityRange(b,a)}function D(){R.forEach(function(a){a.segmentAvailabilityRange=null})}function E(a){var b=a,c=function(){if(!h()){Q=!0,M.trigger(A["default"].DATA_UPDATE_STARTED,{sender:N}),D();for(var a=0;a<R.length;a++)V.updateRepresentation(R[a],!0)}};Q=!1,M.trigger(C["default"].AST_IN_FUTURE,{delay:b}),setTimeout(c,b)}function F(a){if(a.sender.getStreamProcessor()===T&&h()){var b,c,d,e=a.representation,f=Y.getMetricsFor("stream"),g=Y.getMetricsFor(j().adaptation.type),i=aa.getCurrentManifestUpdate(f),k=!1,l=0;if("dynamic"===e.adaptation.period.mpd.manifest.type){var m=e.segmentAvailabilityRange.end-e.segmentAvailabilityRange.start,n=W.computeLiveDelay(S.segmentDuration,T.getStreamInfo().manifestInfo.DVRWindowSize);l=1e3*(n-m)}if(l>0)return r(),E(l),c=new w["default"](K,"Segments update failed",null),void M.trigger(A["default"].DATA_UPDATE_COMPLETED,{sender:this,data:O,currentRepresentation:S,error:c});if(i){for(var o=0;o<i.trackInfo.length;o++)if(b=i.trackInfo[o],b.index===e.index&&b.mediaType===T.getType()){k=!0;break}k||Y.addManifestUpdateRepresentationInfo(i,e.id,e.index,e.adaptation.period.index,T.getType(),e.presentationTimeOffset,e.startNumber,e.segmentInfoType)}x()&&(Q=!1,U.setPlaybackQuality(T.getType(),T.getStreamInfo(),v(S)),Y.updateManifestUpdateInfo(i,{latency:S.segmentAvailabilityRange.end-W.getTime()}),d=aa.getCurrentRepresentationSwitch(g),d||p(),M.trigger(A["default"].DATA_UPDATE_COMPLETED,{sender:this,data:O,currentRepresentation:S}))}}function H(a){a.isDynamic&&B(a.isDynamic)}function I(a){a.sender.getStreamProcessor()===T&&r()}function J(a){a.mediaType===T.getType()&&T.getStreamInfo().id===a.streamInfo.id&&a.oldQuality!==a.newQuality&&(S=t(a.newQuality),Z.setSavedBitrateSettings(a.mediaType,S.bandwidth),p())}var K=1,L=this.context,M=y["default"](L).getInstance(),N=void 0,O=void 0,P=void 0,Q=void 0,R=void 0,S=void 0,T=void 0,U=void 0,V=void 0,W=void 0,X=void 0,Y=void 0,Z=void 0,$=void 0,_=void 0,aa=void 0;return N={initialize:c,setConfig:b,getData:e,getDataIndex:f,isUpdating:h,updateData:n,getStreamProcessor:d,getCurrentRepresentation:j,getRepresentationForQuality:t,reset:l},a(),N}Object.defineProperty(c,"__esModule",{value:!0});var f=a(22),g=d(f),h=a(17),i=d(h),j=a(38),k=d(j),l=a(59),m=d(l),n=a(67),o=d(n),p=a(98),q=d(p),r=a(100),s=d(r),t=a(150),u=d(t),v=a(165),w=d(v),x=a(9),y=d(x),z=a(13),A=d(z),B=a(53),C=d(B),D=a(10),E=d(D),F=a(46),G=d(F);e.__dashjs_factory_name="RepresentationController",c["default"]=E["default"].getClassFactory(e),b.exports=c["default"]},{10:10,100:100,13:13,150:150,165:165,17:17,22:22,38:38,46:46,53:53,59:59,67:67,9:9,98:98}],22:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b){var c,d,e,f=!1,g=!1,h=a.ContentComponent_asArray,i="text"!==b?new RegExp(b):new RegExp("(vtt|ttml)");if(a.Representation_asArray.length>0&&a.Representation_asArray[0].hasOwnProperty("codecs")){var j=a.Representation_asArray[0].codecs;if(0===j.search("stpp")||0===j.search("wvtt"))return"fragmentedText"===b}if(h){if(h.length>1)return"muxed"===b;h[0]&&h[0].contentType===b&&(f=!0,g=!0)}if(a.hasOwnProperty("mimeType")&&(f=i.test(a.mimeType),g=!0),!g)for(c=0,d=a.Representation_asArray.length;!g&&d>c;)e=a.Representation_asArray[c],e.hasOwnProperty("mimeType")&&(f=i.test(e.mimeType),g=!0),c++;return f}function b(b){return a(b,"audio")}function c(b){return a(b,"video")}function d(b){return a(b,"fragmentedText")}function e(b){return a(b,"text")}function f(b){return a(b,"muxed")}function h(a){return"text/vtt"===a||"application/ttml+xml"===a}function j(a){var b="";return a.hasOwnProperty("lang")&&(b=a.lang.replace(/[^A-Za-z0-9-]/g,"")),b}function l(a){return a.hasOwnProperty("Viewpoint")?a.Viewpoint:null}function n(a){return a.hasOwnProperty("Role_asArray")?a.Role_asArray:[]}function p(a){return a.hasOwnProperty("Accessibility_asArray")?a.Accessibility_asArray:[]}function r(a){return a.hasOwnProperty("AudioChannelConfiguration_asArray")?a.AudioChannelConfiguration_asArray:[]}function t(a){return n(a).filter(function(a){return"main"===a.value})[0]}function v(){return function(a,b){return a.bandwidth-b.bandwidth}}function x(a){return void 0!==a.Representation_asArray&&null!==a.Representation_asArray&&a.Representation_asArray.sort(v()),a}function z(a,b,c){var d,e,f=b.Period_asArray[c].AdaptationSet_asArray;for(d=0,e=f.length;e>d;d++)if(f[d].hasOwnProperty("id")&&f[d].id===a)return f[d];return null}function B(a,b,c){var d=b.Period_asArray[c].AdaptationSet_asArray;return d[a]}function D(a,b,c){var d,e,f=b.Period_asArray[c].AdaptationSet_asArray;for(d=0,e=f.length;e>d;d++)if(f[d]===a)return d;
return-1}function E(b,c,d){var e,f,g=b.Period_asArray[c].AdaptationSet_asArray,h=[];for(e=0,f=g.length;f>e;e++)a(g[e],d)&&h.push(x(g[e]));return h}function F(a,b,c,d){var e=E(a,b,c);if(!e||0===e.length)return null;if(e.length>1&&d)for(var f=ja.getCurrentTrackFor(c,d),g=ka.getAllMediaInfoForType(a,d,c),h=0,i=e.length;i>h;h++){if(f&&ja.isTracksEqual(f,g[h]))return e[h];if(t(e[h]))return e[h]}return e[0]}function G(a){var b=a.Representation_asArray[0];return b.mimeType+';codecs="'+b.codecs+'"'}function H(a){return a.Representation_asArray[0].mimeType}function I(a){return a&&a.hasOwnProperty("cenc:default_KID")?a["cenc:default_KID"]:null}function J(a){return a&&a.hasOwnProperty("ContentProtection_asArray")&&0!==a.ContentProtection_asArray.length?a.ContentProtection_asArray:null}function K(a){var b=!1;return a.hasOwnProperty("type")&&(b="dynamic"===a.type),b}function L(a){var b,c,d=K(a);return b=!isNaN(a.timeShiftBufferDepth),c=d&&b}function M(a,b){var c=!1;return a.profiles&&a.profiles.length>0&&(c=-1!==a.profiles.indexOf(b)),c}function N(a){return M(a,"urn:mpeg:dash:profile:isoff-on-demand:2011")}function O(a){return M(a,"urn:dvb:dash:profile:dvb-dash:2014")}function P(a){var b;return b=a.hasOwnProperty("mediaPresentationDuration")?a.mediaPresentationDuration:Number.MAX_VALUE}function Q(a){return a.bandwidth}function R(a){var b=arguments.length<=1||void 0===arguments[1]?0:arguments[1],c=NaN;return a.hasOwnProperty("minimumUpdatePeriod")&&(c=a.minimumUpdatePeriod),isNaN(c)?c:Math.max(c-b,1)}function S(a){return a.Representation_asArray.length}function T(a){if(!a||!a.Representation_asArray||!a.Representation_asArray.length)return null;for(var b=x(a),c=b.Representation_asArray,d=c.length,e=[],f=0;d>f;f++)e.push({bandwidth:c[f].bandwidth,width:c[f].width||0,height:c[f].height||0});return e}function U(a,b){return b.Representation_asArray[a]}function V(a,b){for(var c,d,e,f,i,j=x(a.Period_asArray[b.period.index].AdaptationSet_asArray[b.index]),k=[],l=0;l<j.Representation_asArray.length;l++)f=j.Representation_asArray[l],c=new g["default"],c.index=l,c.adaptation=b,f.hasOwnProperty("id")&&(c.id=f.id),f.hasOwnProperty("codecs")&&(c.codecs=f.codecs),f.hasOwnProperty("codecPrivateData")&&(c.codecPrivateData=f.codecPrivateData),f.hasOwnProperty("bandwidth")&&(c.bandwidth=f.bandwidth),f.hasOwnProperty("width")&&(c.width=f.width),f.hasOwnProperty("height")&&(c.height=f.height),f.hasOwnProperty("maxPlayoutRate")&&(c.maxPlayoutRate=f.maxPlayoutRate),f.hasOwnProperty("SegmentBase")?(e=f.SegmentBase,c.segmentInfoType="SegmentBase"):f.hasOwnProperty("SegmentList")?(e=f.SegmentList,e.hasOwnProperty("SegmentTimeline")?(c.segmentInfoType="SegmentTimeline",i=e.SegmentTimeline.S_asArray[e.SegmentTimeline.S_asArray.length-1],(!i.hasOwnProperty("r")||i.r>=0)&&(c.useCalculatedLiveEdgeTime=!0)):(c.segmentInfoType="SegmentList",c.useCalculatedLiveEdgeTime=!0)):f.hasOwnProperty("SegmentTemplate")?(e=f.SegmentTemplate,e.hasOwnProperty("SegmentTimeline")?(c.segmentInfoType="SegmentTimeline",i=e.SegmentTimeline.S_asArray[e.SegmentTimeline.S_asArray.length-1],(!i.hasOwnProperty("r")||i.r>=0)&&(c.useCalculatedLiveEdgeTime=!0)):c.segmentInfoType="SegmentTemplate",e.hasOwnProperty("initialization")&&(c.initialization=e.initialization.split("$Bandwidth$").join(f.bandwidth).split("$RepresentationID$").join(f.id))):c.segmentInfoType="BaseURL",e&&(e.hasOwnProperty("Initialization")?(d=e.Initialization,d.hasOwnProperty("sourceURL")?c.initialization=d.sourceURL:d.hasOwnProperty("range")&&(c.range=d.range)):f.hasOwnProperty("mimeType")&&h(f.mimeType)&&(c.range=0),e.hasOwnProperty("timescale")&&(c.timescale=e.timescale),e.hasOwnProperty("duration")&&(c.segmentDuration=e.duration/c.timescale),e.hasOwnProperty("startNumber")&&(c.startNumber=e.startNumber),e.hasOwnProperty("indexRange")&&(c.indexRange=e.indexRange),e.hasOwnProperty("presentationTimeOffset")&&(c.presentationTimeOffset=e.presentationTimeOffset/c.timescale)),c.MSETimeOffset=ia.calcMSETimeOffset(c),c.path=[b.period.index,b.index,l],k.push(c);return k}function W(a,e){for(var g,h,j=a.Period_asArray[e.index],k=[],l=0;l<j.AdaptationSet_asArray.length;l++)h=j.AdaptationSet_asArray[l],g=new i["default"],h.hasOwnProperty("id")&&(g.id=h.id),g.index=l,g.period=e,f(h)?g.type="muxed":b(h)?g.type="audio":c(h)?g.type="video":d(h)?g.type="fragmentedText":g.type="text",k.push(g);return k}function X(a,b){var c,d,e=K(a),f=[],g=null,h=null,i=null,j=null;for(d=0,c=a.Period_asArray.length;c>d;d++)h=a.Period_asArray[d],h.hasOwnProperty("start")?(j=new k["default"],j.start=h.start):null!==g&&h.hasOwnProperty("duration")&&null!==i?(j=new k["default"],j.start=i.start+i.duration,j.duration=h.duration):0!==d||e||(j=new k["default"],j.start=0),null!==i&&isNaN(i.duration)&&(i.duration=j.start-i.start),null!==j&&(j.id=Y(h,d)),null!==j&&h.hasOwnProperty("duration")&&(j.duration=h.duration),null!==j&&(j.index=d,j.mpd=b,f.push(j),g=h,i=j),h=null,j=null;return 0===f.length?f:(null!==i&&isNaN(i.duration)&&(i.duration=$(a,i)-i.start),f)}function Y(a,b){if(!a)throw new Error("Period cannot be null or undefined");var c=k["default"].DEFAULT_ID+"_"+b;return a.hasOwnProperty("id")&&"__proto__"!==a.id&&(c=a.id),c}function Z(a){var b=new m["default"];return b.manifest=a,a.hasOwnProperty("availabilityStartTime")?b.availabilityStartTime=new Date(a.availabilityStartTime.getTime()):b.availabilityStartTime=new Date(a.loadedTime.getTime()),a.hasOwnProperty("availabilityEndTime")&&(b.availabilityEndTime=new Date(a.availabilityEndTime.getTime())),a.hasOwnProperty("minimumUpdatePeriod")&&(b.minimumUpdatePeriod=a.minimumUpdatePeriod),a.hasOwnProperty("mediaPresentationDuration")&&(b.mediaPresentationDuration=a.mediaPresentationDuration),a.hasOwnProperty("suggestedPresentationDelay")&&(b.suggestedPresentationDelay=a.suggestedPresentationDelay),a.hasOwnProperty("timeShiftBufferDepth")&&(b.timeShiftBufferDepth=a.timeShiftBufferDepth),a.hasOwnProperty("maxSegmentDuration")&&(b.maxSegmentDuration=a.maxSegmentDuration),b}function $(a,b){var c=K(a),d=void 0;if(a.mediaPresentationDuration)d=a.mediaPresentationDuration;else if(b.duration)d=b.duration;else{if(!c)throw new Error("Must have @mediaPresentationDuratio on MPD or an explicit @duration on the last period.");d=Number.POSITIVE_INFINITY}return d}function _(a,b){var c=a.Period_asArray,d=c[b.index].EventStream_asArray,e=[];if(d)for(var f=0;f<d.length;f++){var g=new A["default"];if(g.period=b,g.timescale=1,!d[f].hasOwnProperty("schemeIdUri"))throw new Error("Invalid EventStream. SchemeIdUri has to be set");g.schemeIdUri=d[f].schemeIdUri,d[f].hasOwnProperty("timescale")&&(g.timescale=d[f].timescale),d[f].hasOwnProperty("value")&&(g.value=d[f].value);for(var h=0;h<d[f].Event_asArray.length;h++){var i=new w["default"];i.presentationTime=0,i.eventStream=g,d[f].Event_asArray[h].hasOwnProperty("presentationTime")&&(i.presentationTime=d[f].Event_asArray[h].presentationTime),d[f].Event_asArray[h].hasOwnProperty("duration")&&(i.duration=d[f].Event_asArray[h].duration),d[f].Event_asArray[h].hasOwnProperty("id")&&(i.id=d[f].Event_asArray[h].id),e.push(i)}}return e}function aa(a,b){var c=[];if(!a)return c;for(var d=0;d<a.length;d++){var e=new A["default"];if(e.timescale=1,e.representation=b,!a[d].hasOwnProperty("schemeIdUri"))throw new Error("Invalid EventStream. SchemeIdUri has to be set");e.schemeIdUri=a[d].schemeIdUri,a[d].hasOwnProperty("timescale")&&(e.timescale=a[d].timescale),a[d].hasOwnProperty("value")&&(e.value=a[d].value),c.push(e)}return c}function ba(a,b){if(!b||!a)return[];var c=a.Period_asArray[b.period.index].AdaptationSet_asArray[b.index].InbandEventStream_asArray;return aa(c,null)}function ca(a,b){var c=a.Period_asArray[b.adaptation.period.index].AdaptationSet_asArray[b.adaptation.index].Representation_asArray[b.index].InbandEventStream_asArray;return aa(c,b)}function da(a){var b=K(a),c=a.hasOwnProperty("availabilityStartTime"),d=a.UTCTiming_asArray,e=[];return(b||c)&&d&&d.forEach(function(a){var b=new o["default"];a.hasOwnProperty("schemeIdUri")&&(b.schemeIdUri=a.schemeIdUri,a.hasOwnProperty("value")&&(b.value=a.value.toString(),e.push(b)))}),e}function ea(a){var b=[],c=a.BaseURL_asArray||[a.baseUri],d=!1;return c.some(function(c){if(c){var e=new y["default"],f=c.__text||c;return la.isRelative(f)&&(d=!0,a.baseUri&&(f=a.baseUri+f)),e.url=f,c.hasOwnProperty("serviceLocation")&&c.serviceLocation.length?e.serviceLocation=c.serviceLocation:e.serviceLocation=f,c.hasOwnProperty("dvb:priority")&&(e.dvb_priority=c["dvb:priority"]),c.hasOwnProperty("dvb:weight")&&(e.dvb_weight=c["dvb:weight"]),b.push(e),d}}),b}function fa(a){return a.hasOwnProperty("Location")&&(a.Location=a.Location_asArray[0]),a.Location}var ga=void 0,ha=this.context,ia=q["default"](ha).getInstance(),ja=s["default"](ha).getInstance(),ka=u["default"](ha).getInstance(),la=C["default"](ha).getInstance();return ga={getIsTypeOf:a,getIsAudio:b,getIsVideo:c,getIsText:e,getIsMuxed:f,getIsTextTrack:h,getIsFragmentedText:d,getIsMain:t,getLanguageForAdaptation:j,getViewpointForAdaptation:l,getRolesForAdaptation:n,getAccessibilityForAdaptation:p,getAudioChannelConfigurationForAdaptation:r,processAdaptation:x,getAdaptationForIndex:B,getIndexForAdaptation:D,getAdaptationForId:z,getAdaptationsForType:E,getAdaptationForType:F,getCodec:G,getMimeType:H,getKID:I,getContentProtectionData:J,getIsDynamic:K,getIsDVR:L,getIsOnDemand:N,getIsDVB:O,getDuration:P,getBandwidth:Q,getManifestUpdatePeriod:R,getRepresentationCount:S,getBitrateListForAdaptation:T,getRepresentationFor:U,getRepresentationsForAdaptation:V,getAdaptationsForPeriod:W,getRegularPeriods:X,getMpd:Z,getEventsForPeriod:_,getEventStreams:aa,getEventStreamForAdaptationSet:ba,getEventStreamForRepresentation:ca,getUTCTimingSources:da,getBaseURLsFromElement:ea,getRepresentationSortFunction:v,getLocation:fa}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(46),g=d(f),h=a(40),i=d(h),j=a(45),k=d(j),l=a(44),m=d(l),n=a(48),o=d(n),p=a(38),q=d(p),r=a(65),s=d(r),t=a(15),u=d(t),v=a(42),w=d(v),x=a(41),y=d(x),z=a(43),A=d(z),B=a(159),C=d(B),D=a(10),E=d(D);e.__dashjs_factory_name="DashManifestModel",c["default"]=E["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,15:15,159:159,38:38,40:40,41:41,42:42,43:43,44:44,45:45,46:46,48:48,65:65}],23:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){h=[new s["default"],new u["default"],new w["default"],new q["default"]],i=new o["default"]({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:h}),j=new m["default"]([new y["default"],new A["default"]])}function b(a,b){var c;try{var f=window.performance.now();if(c=i.xml_str2json(a),!c)throw new Error("parser error");var g=window.performance.now();j.run(c);var k=window.performance.now();b.setMatchers(h),b.setIron(j),d("Parsing complete: ( xml2json: "+(g-f).toPrecision(3)+"ms, objectiron: "+(k-g).toPrecision(3)+"ms, total: "+((k-f)/1e3).toPrecision(3)+"s)")}catch(l){return e.manifestError("parsing the manifest failed","parse",a,l),null}return c}var c=this.context,d=k["default"](c).getInstance().log,e=g["default"](c).getInstance(),f=void 0,h=void 0,i=void 0,j=void 0;return f={parse:b},a(),f}Object.defineProperty(c,"__esModule",{value:!0});var f=a(152),g=d(f),h=a(10),i=d(h),j=a(8),k=d(j),l=a(3),m=d(l),n=a(4),o=d(n),p=a(32),q=d(p),r=a(30),s=d(r),t=a(29),u=d(t),v=a(31),w=d(v),x=a(26),y=d(x),z=a(27),A=d(z);e.__dashjs_factory_name="DashParser",c["default"]=i["default"].getClassFactory(e),b.exports=c["default"]},{10:10,152:152,26:26,27:27,29:29,3:3,30:30,31:31,32:32,4:4,8:8}],24:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c){d(this,a);var e=function(a){return a&&a.length&&a.charAt(0)===a.charAt(0).toUpperCase()};this._name=b,this._merge=void 0!==c?c:e(b)}return e(a,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),a}();c["default"]=f,b.exports=c["default"]},{}],25:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a(24),h=d(g),i=function(){function a(b,c,d,f,g){var i=this;e(this,a),this._name=b||"",this._properties=[],this._children=d||[],this._isRoot=f||!1,this._isArray=g||!0,Array.isArray(c)&&c.forEach(function(a){i._properties.push(new h["default"](a))})}return f(a,[{key:"name",get:function(){return this._name}},{key:"isRoot",get:function(){return this._isRoot}},{key:"isArray",get:function(){return this._isArray}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),a}();c["default"]=i,b.exports=c["default"]},{24:24}],26:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(25),i=d(h),j=function(a){function b(){e(this,b);var a=["profiles","width","height","sar","frameRate","audioSamplingRate","mimeType","segmentProfiles","codecs","maximumSAPPeriod","startWithSAP","maxPlayoutRate","codingDependency","scanType","FramePacking","AudioChannelConfiguration","ContentProtection","EssentialProperty","SupplementalProperty","InbandEventStream"];g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,"AdaptationSet",a,[new i["default"]("Representation",a,[new i["default"]("SubRepresentation",a)])])}return f(b,a),b}(i["default"]);c["default"]=j,b.exports=c["default"]},{25:25}],27:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(25),i=d(h),j=function(a){function b(){e(this,b);var a=["SegmentBase","SegmentTemplate","SegmentList"];g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,"Period",a,[new i["default"]("AdaptationSet",a,[new i["default"]("Representation",a)])])}return f(b,a),b}(i["default"]);c["default"]=j,b.exports=c["default"]},{25:25}],28:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c){d(this,a),this._test=b,this._converter=c}return e(a,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),a}();c["default"]=f,b.exports=c["default"]},{}],29:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(28),i=d(h),j=60,k=60,l=1e3,m=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,n=function(a){function b(){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,function(a){return m.test(a.value)},function(a){var b=m.exec(a),c=void 0;if(c=Date.UTC(parseInt(b[1],10),parseInt(b[2],10)-1,parseInt(b[3],10),parseInt(b[4],10),parseInt(b[5],10),b[6]&&parseInt(b[6],10)||0,b[7]&&parseFloat(b[7])*l||0),b[9]&&b[10]){var d=parseInt(b[9],10)*k+parseInt(b[10],10);c+=("+"===b[8]?-1:1)*d*j*l}return new Date(c)})}return f(b,a),b}(i["default"]);c["default"]=n,b.exports=c["default"]},{28:28}],30:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(28),i=d(h),j=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,k=31536e3,l=2592e3,m=86400,n=3600,o=60,p=function(a){function b(){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,function(a){for(var b=["minBufferTime","mediaPresentationDuration","minimumUpdatePeriod","timeShiftBufferDepth","maxSegmentDuration","maxSubsegmentDuration","suggestedPresentationDelay","start","starttime","duration"],c=b.length,d=0;c>d;d++)if(a.nodeName===b[d])return j.test(a.value);return!1},function(a){var b=j.exec(a),c=parseFloat(b[2]||0)*k+parseFloat(b[4]||0)*l+parseFloat(b[6]||0)*m+parseFloat(b[8]||0)*n+parseFloat(b[10]||0)*o+parseFloat(b[12]||0);return void 0!==b[1]&&(c=-c),c})}return f(b,a),b}(i["default"]);c["default"]=p,b.exports=c["default"]},{28:28}],31:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(28),i=d(h),j=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,k=function(a){function b(){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,function(a){return j.test(a.value)},function(a){return parseFloat(a)})}return f(b,a),b}(i["default"]);c["default"]=k,b.exports=c["default"]},{28:28}],32:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(28),i=d(h),j=function(a){function b(){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,function(a,b){var c={MPD:["id","profiles"],Period:["id"],BaseURL:["serviceLocation","byteRange"],SegmentBase:["indexRange"],Initialization:["range"],RepresentationIndex:["range"],SegmentList:["indexRange"],BitstreamSwitching:["range"],SegmentURL:["mediaRange","indexRange"],SegmentTemplate:["indexRange","media","index","initialization","bitstreamSwitching"],AssetIdentifier:["value","id"],EventStream:["value"],AdaptationSet:["profiles","mimeType","segmentProfiles","codecs","contentType"],FramePacking:["value","id"],AudioChannelConfiguration:["value","id"],ContentProtection:["value","id"],EssentialProperty:["value","id"],SupplementalProperty:["value","id"],InbandEventStream:["value","id"],Accessibility:["value","id"],Role:["value","id"],Rating:["value","id"],Viewpoint:["value","id"],ContentComponent:["contentType"],Representation:["id","dependencyId","mediaStreamStructureId"],Subset:["id"],Metrics:["metrics"],Reporting:["value","id"]};if(c.hasOwnProperty(b)){var d=c[b];return void 0!==d&&d.indexOf(a.name)>=0}return!1},function(a){return String(a)})}return f(b,a),b}(i["default"]);c["default"]=j,b.exports=c["default"]},{28:28}],33:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){a&&a.boxParser&&(e=a.boxParser)}function b(a){var b,c,d,f,g,h,i,j,k,l,m,n,o=e.parse(a),p=o.getBox("tfhd"),q=o.getBox("tfdt"),r=o.getBox("trun"),s=o.getBox("moof"),t=o.getBox("mfhd"),u=o.getBox("subs");m=t.sequence_number,d=r.sample_count,g=q.baseMediaDecodeTime,l=(p.base_data_offset||0)+(r.data_offset||0),h=[];var v=-1,w=-1;for(j=0;d>j;j++){i=r.samples[j],b=void 0!==i.sample_duration?i.sample_duration:p.default_sample_duration,f=void 0!==i.sample_size?i.sample_size:p.default_sample_size,c=void 0!==i.sample_composition_time_offset?i.sample_composition_time_offset:0;var x={dts:g,cts:g+c,duration:b,offset:s.offset+l,size:f,subSizes:[f]};if(u&&(v<u.entry_count&&j>w&&(v++,w+=u.entries[v].sample_delta),j==w)){x.subSizes=[];var y=u.entries[v];for(k=0;k<y.subsample_count;k++)x.subSizes.push(y.subsamples[k].subsample_size)}h.push(x),l+=f,g+=b}return n=g-q.baseMediaDecodeTime,{sampleList:h,sequenceNumber:m,totalDuration:n}}function c(a){var b=e.parse(a),c=b.getBox("mdhd");return c?c.timescale:NaN}var d=void 0,e=void 0;return d={getSamplesInfo:b,getMediaTimescaleFromMoov:c,setConfig:a}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f);e.__dashjs_factory_name="FragmentedTextBoxParser",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10}],34:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){function c(a,c,e,f){var g,i,j,k,l,m,n,o=a.adaptation.period.mpd.manifest.Period_asArray[a.adaptation.period.index].AdaptationSet_asArray[a.adaptation.index].Representation_asArray[a.index].SegmentList,p=o.SegmentURL_asArray.length,q=[];for(n=a.startNumber,k=h.decideSegmentListRangeForTemplate(d,b,a,c,e,f),l=Math.max(k.start,0),m=Math.min(k.end,o.SegmentURL_asArray.length-1),g=l;m>=g;g++)j=o.SegmentURL_asArray[g],i=h.getIndexBasedSegment(d,b,a,g),i.replacementTime=(n+g-1)*a.segmentDuration,i.media=j.media?j.media:"",i.mediaRange=j.mediaRange,i.index=j.index,i.indexRange=j.indexRange,q.push(i),i=null;return a.availableSegmentsNumber=p,q}var d=a.timelineConverter,e=void 0;return e={getSegments:c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(36);e.__dashjs_factory_name="ListSegmentsGetter";var i=g["default"].getClassFactory(e);c["default"]=i,b.exports=c["default"]},{10:10,36:36}],35:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){function c(){h=i["default"](f).create(a,b),j=k["default"](f).create(a,b),l=m["default"](f).create(a,b)}function d(a,b,c,d,f){var g,i=a.segmentInfoType;return"SegmentBase"!==i&&"BaseURL"!==i&&e(a,c)?("SegmentTimeline"===i?g=h.getSegments(a,b,c,f):"SegmentTemplate"===i?g=j.getSegments(a,b,c,f):"SegmentList"===i&&(g=l.getSegments(a,b,c,f)),d&&d(a,g)):g=a.segments,g}function e(a,b){var c,d,e=a.segments,f=!1;return e&&0!==e.length?(d=e[0].availabilityIdx,c=e[e.length-1].availabilityIdx,f=d>b||b>c):f=!0,f}var f=this.context,g=void 0,h=void 0,j=void 0,l=void 0;return g={getSegments:d},c(),g}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(39),i=d(h),j=a(37),k=d(j),l=a(34),m=d(l);e.__dashjs_factory_name="SegmentsGetter";var n=g["default"].getClassFactory(e);c["default"]=n,b.exports=c["default"]},{10:10,34:34,37:37,39:39}],36:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){for(;a.length<b;)a="0"+a;return a}function f(a,b){return a.representation.startNumber+b}function g(a,b,c){var d,f,g,h,i,j,k="%0",l=b.length,m=k.length;if(!a)return a;for(;;){if(d=a.indexOf("$"+b),0>d)return a;if(f=a.indexOf("$",d+l),0>f)return a;if(g=a.indexOf(k,d+l),g>d&&f>g)switch(h=a.charAt(f-1),i=parseInt(a.substring(g+m,f-1),10),h){case"d":case"i":case"u":j=e(c.toString(),i);break;case"x":j=e(c.toString(16),i);break;case"X":j=e(c.toString(16),i).toUpperCase();break;case"o":j=e(c.toString(8),i);break;default:return a}else j=c;a=a.substring(0,d)+j+a.substring(f+1)}}function h(a,b,c,d){var e,g,h,i;return g=c.segmentDuration,isNaN(g)&&(g=c.adaptation.period.duration),h=c.adaptation.period.start+d*g,i=h+g,e=new n["default"],e.representation=c,e.duration=g,e.presentationStartTime=h,e.mediaStartTime=a.calcMediaTimeFromPresentationTime(e.presentationStartTime,c),e.availabilityStartTime=a.calcAvailabilityStartTimeFromPresentationTime(e.presentationStartTime,c.adaptation.period.mpd,b),e.availabilityEndTime=a.calcAvailabilityEndTimeFromPresentationTime(i,c.adaptation.period.mpd,b),e.wallStartTime=a.calcWallTimeForSegment(e,b),e.replacementNumber=f(e,d),e.availabilityIdx=d,e}function i(a,b,c,d,e,h,i,j,k){var l,m,o,p=d/h,q=Math.min(e/h,c.adaptation.period.mpd.maxSegmentDuration);return l=a.calcPresentationTimeFromMediaTime(p,c),m=l+q,o=new n["default"],o.representation=c,o.duration=q,o.mediaStartTime=p,o.presentationStartTime=l,o.availabilityStartTime=c.adaptation.period.mpd.manifest.loadedTime,o.availabilityEndTime=a.calcAvailabilityEndTimeFromPresentationTime(m,c.adaptation.period.mpd,b),o.wallStartTime=a.calcWallTimeForSegment(o,b),o.replacementTime=d,o.replacementNumber=f(o,k),i=g(i,"Number",o.replacementNumber),i=g(i,"Time",o.replacementTime),o.media=i,o.mediaRange=j,o.availabilityIdx=k,o}function j(a,b){if(!b||!b.segments)return null;var c,d,e=b.segments.length;if(e>a&&(c=b.segments[a],c&&c.availabilityIdx===a))return c;for(d=0;e>d;d++)if(c=b.segments[d],c&&c.availabilityIdx===a)return c;return null}function k(a,b,c,d,e){var f,g,h,i=2,j=e||10,k=0,l=Number.POSITIVE_INFINITY;return b&&!a.isTimeSyncCompleted()?h={start:k,end:l}:!b&&c||0>d?null:(f=Math.max(d-i,k),g=Math.min(d+j,l),h={start:f,end:g})}function l(a,b,c,d,e,f){var g,h,i,k=c.segmentDuration,l=c.adaptation.period.mpd.manifest.minBufferTime,m=c.segmentAvailabilityRange,n={start:a.calcPeriodRelativeTimeFromMpdRelativeTime(c,m.start),end:a.calcPeriodRelativeTimeFromMpdRelativeTime(c,m.end)},o=c.segments,p=2*k,q=f||Math.max(2*l,10*k),r=NaN,s=null;return n.start=Math.max(n.start,0),b&&!a.isTimeSyncCompleted()?(g=Math.floor(n.start/k),h=Math.floor(n.end/k),i={start:g,end:h}):(o&&o.length>0?(s=j(e,c),r=s?a.calcPeriodRelativeTimeFromMpdRelativeTime(c,s.presentationStartTime):e>0?e*k:a.calcPeriodRelativeTimeFromMpdRelativeTime(c,d)):r=e>0?e*k:b?n.end:n.start,g=Math.floor(Math.max(r-p,n.start)/k),h=Math.floor(Math.min(g+q/k,n.end/k)),i={start:g,end:h})}Object.defineProperty(c,"__esModule",{value:!0}),c.replaceTokenForTemplate=g,c.getIndexBasedSegment=h,c.getTimeBasedSegment=i,c.getSegmentByIndex=j,c.decideSegmentListRangeForTimeline=k,c.decideSegmentListRangeForTemplate=l;var m=a(47),n=d(m)},{47:47}],37:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){function c(a,c,e,f){var g,i,j,k,l,m=a.adaptation.period.mpd.manifest.Period_asArray[a.adaptation.period.index].AdaptationSet_asArray[a.adaptation.index].Representation_asArray[a.index].SegmentTemplate,n=a.segmentDuration,o=a.segmentAvailabilityRange,p=[],q=null,r=null;for(l=a.startNumber,g=isNaN(n)&&!b?{start:l,end:l}:h.decideSegmentListRangeForTemplate(d,b,a,c,e,f),j=g.start,k=g.end,i=j;k>=i;i++)r=h.getIndexBasedSegment(d,b,a,i),r.replacementTime=(l+i-1)*a.segmentDuration,q=m.media,q=h.replaceTokenForTemplate(q,"Number",r.replacementNumber),q=h.replaceTokenForTemplate(q,"Time",r.replacementTime),r.media=q,p.push(r),r=null;return isNaN(n)?a.availableSegmentsNumber=1:a.availableSegmentsNumber=Math.ceil((o.end-o.start)/n),p}var d=a.timelineConverter,e=void 0;return e={getSegments:c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(36);e.__dashjs_factory_name="TemplateSegmentsGetter";var i=g["default"].getClassFactory(e);c["default"]=i,b.exports=c["default"]},{10:10,36:36}],38:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){z=0,A=!1,B=NaN,x.on(i["default"].TIME_SYNCHRONIZATION_COMPLETED,t,this)}function b(){return A}function c(a){A=a}function d(){return z}function e(a){z=a}function f(){return B}function h(a){B=a}function j(a,b,c,d){var e=NaN;return e=d?c&&b.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(b.availabilityStartTime.getTime()+1e3*(a+b.timeShiftBufferDepth)):b.availabilityEndTime:c?new Date(b.availabilityStartTime.getTime()+1e3*(a-z)):b.availabilityStartTime}function k(a,b,c){return j.call(this,a,b,c)}function l(a,b,c){return j.call(this,a,b,c,!0)}function m(a,b){return(a.getTime()-b.mpd.availabilityStartTime.getTime()+1e3*z)/1e3}function n(a,b){var c=b.adaptation.period.start,d=b.presentationTimeOffset;return a+(c-d)}function o(a,b){var c=b.adaptation.period.start,d=b.presentationTimeOffset;return a-c+d}function p(a,b){var c,d,e;
return b&&(c=a.representation.adaptation.period.mpd.suggestedPresentationDelay,d=a.presentationStartTime+c,e=new Date(a.availabilityStartTime.getTime()+1e3*d)),e}function q(a,b){var c=a.adaptation.period,d={start:c.start,end:c.start+c.duration};if(!b)return d;if(!A&&a.segmentAvailabilityRange)return a.segmentAvailabilityRange;var e=a.segmentDuration||(a.segments&&a.segments.length?a.segments[a.segments.length-1].duration:0),f=m(new Date,c),g=c.start+c.duration;return d.start=Math.max(f-c.mpd.timeShiftBufferDepth,c.start),d.end=f>=g&&g>f-e?g-e:f-e,d}function r(a,b){var c=a.adaptation.period.start;return b-c}function s(a,b){var c=a.adaptation.period.start;return b+c}function t(a){A||void 0!==a.offset&&(e(a.offset/1e3),A=!0)}function u(a){var b=a.presentationTimeOffset,c=a.adaptation.period.start;return c-b}function v(){x.off(i["default"].TIME_SYNCHRONIZATION_COMPLETED,t,this),z=0,A=!1,B=NaN}var w=this.context,x=g["default"](w).getInstance(),y=void 0,z=void 0,A=void 0,B=void 0;return y={initialize:a,isTimeSyncCompleted:b,setTimeSyncCompleted:c,getClientTimeOffset:d,setClientTimeOffset:e,getExpectedLiveEdge:f,setExpectedLiveEdge:h,calcAvailabilityStartTimeFromPresentationTime:k,calcAvailabilityEndTimeFromPresentationTime:l,calcPresentationTimeFromWallTime:m,calcPresentationTimeFromMediaTime:n,calcPeriodRelativeTimeFromMpdRelativeTime:r,calcMpdRelativeTimeFromPeriodRelativeTime:s,calcMediaTimeFromPresentationTime:o,calcSegmentAvailabilityRange:q,calcWallTimeForSegment:p,calcMSETimeOffset:u,reset:v}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(9),g=d(f),h=a(13),i=d(h),j=a(10),k=d(j);e.__dashjs_factory_name="TimelineConverter",c["default"]=k["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,13:13,9:9}],39:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){function c(a,c,e,f){var g,i,j,k,l,m,n,o,p,q,r,s,t,u,v=a.adaptation.period.mpd.manifest.Period_asArray[a.adaptation.period.index].AdaptationSet_asArray[a.adaptation.index].Representation_asArray[a.index].SegmentTemplate||a.adaptation.period.mpd.manifest.Period_asArray[a.adaptation.period.index].AdaptationSet_asArray[a.adaptation.index].Representation_asArray[a.index].SegmentList,w=v.SegmentTimeline,x=v.SegmentURL_asArray,y=a.availableSegmentsNumber>0,z=10,A=0,B=0,C=-1,D=[],E=!1,F=function(c,e){var f=v.media,g=c.mediaRange;return x&&(f=x[e].media||"",g=x[e].mediaRange),h.getTimeBasedSegment(d,b,a,A,c.d,u,f,g,C)};for(u=a.timescale,g=w.S_asArray,p=h.decideSegmentListRangeForTimeline(d,b,c,e,f),p?(s=p.start,t=p.end):r=d.calcMediaTimeFromPresentationTime(c||0,a),j=0,k=g.length;k>j;j++){if(i=g[j],m=0,i.hasOwnProperty("r")&&(m=i.r),i.hasOwnProperty("t")&&(A=i.t,B=A/u),0>m){if(o=g[j+1],o&&o.hasOwnProperty("t"))n=o.t/u;else{var G=a.segmentAvailabilityRange?a.segmentAvailabilityRange.end:d.calcSegmentAvailabilityRange(a,b).end;n=d.calcMediaTimeFromPresentationTime(G,a),a.segmentDuration=i.d/u}m=Math.ceil((n-B)/(i.d/u))-1}if(q){if(y)break;C+=m+1}else for(l=0;m>=l;l++){if(C++,p){if(C>t){if(q=!0,y)break;continue}C>=s&&D.push(F(i,C))}else{if(D.length>z){if(q=!0,y)break;continue}E?D.push(F(i,C)):B>=r-i.d/u*1.5&&(E=!0,D.push(F(i,C)))}A+=i.d,B=A/u}}return y||(a.availableSegmentsNumber=C+1),D}var d=a.timelineConverter,e=void 0;return e={getSegments:c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(36);e.__dashjs_factory_name="TimelineSegmentsGetter";var i=g["default"].getClassFactory(e);c["default"]=i,b.exports=c["default"]},{10:10,36:36}],40:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.period=null,this.index=-1,this.type=null};c["default"]=e,b.exports=c["default"]},{}],41:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=1,f=1,g=function h(a,b,c,g){d(this,h),this.url=a||"",this.serviceLocation=b||a||"",this.dvb_priority=c||e,this.dvb_weight=g||f};g.DEFAULT_DVB_PRIORITY=e,g.DEFAULT_DVB_WEIGHT=f,c["default"]=g,b.exports=c["default"]},{}],42:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN};c["default"]=e,b.exports=c["default"]},{}],43:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""};c["default"]=e,b.exports=c["default"]},{}],44:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN};c["default"]=e,b.exports=c["default"]},{}],45:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null};e.DEFAULT_ID="defaultId",c["default"]=e,b.exports=c["default"]},{}],46:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.maxPlayoutRate=NaN}return e(a,null,[{key:"hasInitialization",value:function(a){return null!==a.initialization||("BaseURL"!==a.segmentInfoType||"SegmentBase"!==a.segmentInfoType)&&null!==a.range}},{key:"hasSegments",value:function(a){return"BaseURL"!==a.segmentInfoType&&"SegmentBase"!==a.segmentInfoType&&!a.indexRange}}]),a}();c["default"]=f,b.exports=c["default"]},{}],47:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null};c["default"]=e,b.exports=c["default"]},{}],48:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.schemeIdUri="",this.value=""};c["default"]=e,b.exports=c["default"]},{}],49:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){n=g["default"](h).create({errHandler:a.errHandler,metricsModel:a.metricsModel,requestModifier:a.requestModifier})}function c(a){var b=function(b){j.trigger(o["default"].CHECK_FOR_EXISTENCE_COMPLETED,{request:a,exists:b})};if(a){var c=new i["default"](a.url);n.load({request:c,success:function(){b(!0)},error:function(){b(!1)}})}else b(!1)}function d(a){var b=function(b,c){j.trigger(o["default"].LOADING_COMPLETED,{request:a,response:b||null,error:c||null,sender:l})};a?n.load({request:a,progress:function(){j.trigger(o["default"].LOADING_PROGRESS,{request:a})},success:function(a){b(a)},error:function(a,c,d){b(void 0,new k["default"](r,d,c))}}):b(void 0,new k["default"](s,t))}function e(){n&&n.abort()}function f(){n&&(n.abort(),n=null)}var h=this.context,j=m["default"](h).getInstance(),l=void 0,n=void 0;return l={checkForExistence:c,load:d,abort:e,reset:f},b(),l}Object.defineProperty(c,"__esModule",{value:!0});var f=a(57),g=d(f),h=a(167),i=d(h),j=a(165),k=d(j),l=a(9),m=d(l),n=a(13),o=d(n),p=a(10),q=d(p),r=1,s=2,t="request is null";e.__dashjs_factory_name="FragmentLoader";var u=q["default"].getClassFactory(e);u.FRAGMENT_LOADER_ERROR_LOADING_FAILURE=r,u.FRAGMENT_LOADER_ERROR_NULL_REQUEST=s,c["default"]=u,b.exports=c["default"]},{10:10,13:13,165:165,167:167,57:57,9:9}],50:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){j.on(v["default"].XLINK_READY,c,p),s=i["default"](h).create({errHandler:a.errHandler,metricsModel:a.metricsModel,requestModifier:a.requestModifier}),u=g["default"](h).create({errHandler:a.errHandler,metricsModel:a.metricsModel,requestModifier:a.requestModifier}),w=null}function c(a){j.trigger(v["default"].INTERNAL_MANIFEST_LOADED,{manifest:a.manifest})}function d(a){var b=null;return a.indexOf("SmoothStreamingMedia")>-1?(x?(b=x.createMssParser(),x.registerEvents()):n.manifestError("manifest type unsupported","createParser"),b):a.indexOf("MPD")>-1?z["default"](h).create():b}function e(a){var b=new o["default"](a,r.HTTPRequest.MPD_TYPE);s.load({request:b,success:function(b,c,e){var f,g;if(e.responseURL&&e.responseURL!==a?(g=l.parseBaseUrl(e.responseURL),f=e.responseURL):(l.isRelative(a)&&(a=l.resolve(a,window.location.href)),g=l.parseBaseUrl(a)),null===w&&(w=d(b)),null===w)return void j.trigger(v["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new q["default"](A,"Failed detecting manifest type: "+a)});var h=w.parse(b,u);h?(h.url=f||a,h.originalUrl||(h.originalUrl=h.url),h.baseUri=g,h.loadedTime=new Date,u.resolveManifestOnLoad(h)):j.trigger(v["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new q["default"](A,C)})},error:function(b,c,d){j.trigger(v["default"].INTERNAL_MANIFEST_LOADED,{manifest:null,error:new q["default"](B,"Failed loading manifest: "+a+", "+d)})}})}function f(){j.off(v["default"].XLINK_READY,c,p),u&&(u.reset(),u=null),s&&(s.abort(),s=null),x&&x.reset()}var h=this.context,j=t["default"](h).getInstance(),l=k["default"](h).getInstance(),n=m["default"](h).getInstance(),p=void 0,s=void 0,u=void 0,w=void 0,x=a.mssHandler;return p={load:e,reset:f},b(),p}Object.defineProperty(c,"__esModule",{value:!0});var f=a(72),g=d(f),h=a(57),i=d(h),j=a(159),k=d(j),l=a(152),m=d(l),n=a(173),o=d(n),p=a(165),q=d(p),r=a(182),s=a(9),t=d(s),u=a(13),v=d(u),w=a(10),x=d(w),y=a(23),z=d(y),A=1,B=2,C="parsing failed";e.__dashjs_factory_name="ManifestLoader";var D=x["default"].getClassFactory(e);D.MANIFEST_LOADER_ERROR_PARSING_FAILURE=A,D.MANIFEST_LOADER_ERROR_LOADING_FAILURE=B,c["default"]=D,b.exports=c["default"]},{10:10,13:13,152:152,159:159,165:165,173:173,182:182,23:23,57:57,72:72,9:9}],51:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){a&&(a.manifestModel&&(B=a.manifestModel),a.dashManifestModel&&(C=a.dashManifestModel))}function b(a){A=a,w=NaN,x=null,z=!1,y=!0,D=m["default"](s).getInstance(),u.on(i["default"].STREAMS_COMPOSED,r,this),u.on(i["default"].PLAYBACK_STARTED,p,this),u.on(i["default"].PLAYBACK_PAUSED,q,this),u.on(i["default"].INTERNAL_MANIFEST_LOADED,n,this)}function c(a){k(a)}function d(){return A}function e(){u.off(i["default"].PLAYBACK_STARTED,p,this),u.off(i["default"].PLAYBACK_PAUSED,q,this),u.off(i["default"].STREAMS_COMPOSED,r,this),u.off(i["default"].INTERNAL_MANIFEST_LOADED,n,this),f(),y=!0,z=!1,w=NaN,D=null}function f(){null!==x&&(clearInterval(x),x=null)}function h(){f(),isNaN(w)||(t("Refresh manifest in "+w+" seconds."),x=setTimeout(l,1e3*w))}function j(){z=!0;var a=B.getValue(),b=a.url,c=C.getLocation(a);c&&(b=c),A.load(b)}function k(a){B.setValue(a);var b=new Date,c=(b.getTime()-a.loadedTime.getTime())/1e3;w=C.getManifestUpdatePeriod(a,c),u.trigger(i["default"].MANIFEST_UPDATED,{manifest:a}),t("Manifest has been refreshed at "+b+"["+b.getTime()/1e3+"] "),y||h()}function l(){y&&!D.getScheduleWhilePaused()||z||j()}function n(a){a.error||k(a.manifest)}function p(){y=!1,h()}function q(){y=!0,f()}function r(){z=!1}var s=this.context,t=o["default"](s).getInstance().log,u=g["default"](s).getInstance(),v=void 0,w=void 0,x=void 0,y=void 0,z=void 0,A=void 0,B=void 0,C=void 0,D=void 0;return v={initialize:b,setManifest:c,getManifestLoader:d,refreshManifest:j,setConfig:a,reset:e}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(9),g=d(f),h=a(13),i=d(h),j=a(10),k=d(j),l=a(99),m=d(l),n=a(8),o=d(n);e.__dashjs_factory_name="ManifestUpdater",c["default"]=k["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,13:13,8:8,9:9,99:99}],52:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){ec=!1,fc=!1,gc=!0,jc=null,dc=null,mc=null,aa["default"].extend(ca["default"]),oc=I["default"](Zb).getInstance()}function b(a,b,c){return qc=u["default"](Zb).getInstance(),pc=s["default"](Zb).getInstance(),qc.supportsMediaSource()?void(ec||(ec=!0,hc=M["default"](Zb).getInstance(),sc=i["default"](Zb).getInstance(),ic=m["default"](Zb).getInstance(),ic.initialize(),uc=ja["default"](Zb).getInstance(),tc=la["default"](Zb).getInstance(),nc=K["default"](Zb).getInstance(),nc.setConfig({adapter:Nb()}),gb(),sa(void 0===c||c),a&&Eb(a),b&&Ib(b),ac("[dash.js "+T()+"] MediaPlayer has been initialized"))):void pc.capabilityError("mediasource")}function c(){return!!vc&&!!cc}function d(){if(!fc)throw Vb;(!gc||f()&&fc)&&sc.play()}function e(){if(!fc)throw Vb;sc.pause()}function f(){if(!fc)throw Vb;return sc.isPaused()}function h(){if(!fc)throw Vb;return sc.isSeeking()}function j(){if(!fc)throw Vb;return sc.getIsDynamic()}function l(a){if(!vc)throw Wb;Db().muted=a}function n(){if(!vc)throw Wb;return Db().muted}function p(a){if(!vc)throw Wb;Db().volume=a}function r(){if(!vc)throw Wb;return Db().volume}function t(a){var b=["video","audio","fragmentedText"];if(a){if(-1!==b.indexOf(a)){var c=wa().getCurrentBufferLevel(xa(a));return c?c:NaN}return ac("Warning  - getBufferLength requested for invalid type"),NaN}return b.map(function(a){return Na(a).length>0?wa().getCurrentBufferLevel(xa(a)):Number.MAX_VALUE}).reduce(function(a,b){return Math.min(a,b)})}function v(){var a=Rb();return a?a.manifestInfo.DVRWindowSize:0}function x(a){var b=Rb();if(!b)return 0;var c=b.range.start+a;return c>b.range.end&&(c=b.range.end),c}function z(a){if(!fc)throw Vb;var b=sc.getIsDynamic()?x(a):a;sc.seek(b)}function B(a){if(!fc)throw Vb;var b=Db().currentTime;if(void 0!==a)b=rc.getTimeRelativeToStreamId(b,a);else if(sc.getIsDynamic()){var c=Rb();b=null===c?0:D()-(c.range.end-c.time)}return b}function D(){if(!fc)throw Vb;var a=Db().duration;if(sc.getIsDynamic()){var b,c=Rb();if(!c)return 0;b=c.range.end-c.range.start,a=b<c.manifestInfo.DVRWindowSize?b:c.manifestInfo.DVRWindowSize}return a}function F(){if(!fc)throw Vb;return B()<0?NaN:Sb(B())}function H(){if(!fc)throw Vb;return Sb(D())}function J(a,b,c){var d=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],e=new Date(1e3*a),f=e.toLocaleDateString(b),g=e.toLocaleTimeString(b,{hour12:c});return d?g+" "+f:g}function L(a){a=Math.max(a,0);var b=Math.floor(a/3600),c=Math.floor(a%3600/60),d=Math.floor(a%3600%60);return(0===b?"":10>b?"0"+b.toString()+":":b.toString()+":")+(10>c?"0"+c.toString():c.toString())+":"+(10>d?"0"+d.toString():d.toString())}function N(a,b,c){ea["default"].extend(a,b,c,Zb)}function P(a,b,c){$b.on(a,b,c)}function R(a,b,c){$b.off(a,b,c)}function T(){return fa.getVersionString()}function V(){return _b}function X(){if(!vc)throw Wb;return vc}function Z(a){oc.setLiveDelayFragmentCount(a)}function _(a){oc.setLiveDelay(a)}function ba(){return oc.getLiveDelay()}function da(a){oc.setUseSuggestedPresentationDelay(a)}function ga(a,b){oc.setLastBitrateCachingInfo(a,b)}function ia(a,b){oc.setLastMediaSettingsCachingInfo(a,b)}function ka(a,b){hc.setMaxAllowedBitrateFor(a,b)}function ma(a,b){hc.setMinAllowedBitrateFor(a,b)}function oa(a){return hc.getMaxAllowedBitrateFor(a)}function pa(a){return hc.getMinAllowedBitrateFor(a)}function qa(a,b){hc.setMaxAllowedRepresentationRatioFor(a,b)}function ra(a){return hc.getMaxAllowedRepresentationRatioFor(a)}function sa(a){gc=a}function ta(){return gc}function ua(a){oc.setScheduleWhilePaused(a)}function va(){return oc.getScheduleWhilePaused()}function wa(){return tc}function xa(a){return nc.getReadOnlyMetricsFor(a)}function ya(a){if(!fc)throw Vb;return hc.getQualityFor(a,rc.getActiveStreamInfo())}function za(a,b){if(!fc)throw Vb;hc.setPlaybackQuality(a,rc.getActiveStreamInfo(),b)}function Aa(){hc.setElementSize(),hc.setWindowResizeEventCalled(!0)}function Ba(){return hc.getLimitBitrateByPortal()}function Ca(a){hc.setLimitBitrateByPortal(a)}function Da(){return hc.getUsePixelRatioInLimitBitrateByPortal()}function Ea(a){hc.setUsePixelRatioInLimitBitrateByPortal(a)}function Fa(a){if(!fc)throw Vb;void 0===wc&&(wc=C["default"](Zb).getInstance());for(var b=Db().textTracks,c=b.length,d=0;c>d;d++){var e=b[d],f=a===d?"showing":"hidden";e.mode!==f&&(e.mode=f)}wc.setTextTrack()}function Ga(){var a=NaN;return wc&&(a=wc.getCurrentTrackIdx()),a}function Ha(a){if(!fc)throw Vb;var b=Tb();return b?b.getBitrateListFor(a):[]}function Ia(a,b){hc.setInitialBitrateFor(a,b)}function Ja(a){if(!fc)throw Vb;return hc.getInitialBitrateFor(a)}function Ka(a,b){hc.setInitialRepresentationRatioFor(a,b)}function La(a){return hc.getInitialRepresentationRatioFor(a)}function Ma(a){if(!fc)throw Vb;return mc.getStreamsInfo(a)}function Na(a){if(!fc)throw Vb;var b=rc.getActiveStreamInfo();return b?ic.getTracksFor(a,b):[]}function Oa(a,b,c){if(!fc)throw Vb;return c=c||mc.getStreamsInfo(b)[0],c?mc.getAllMediaInfoForType(b,c,a):[]}function Pa(a){if(!fc)throw Vb;var b=rc.getActiveStreamInfo();return b?ic.getCurrentTrackFor(a,b):null}function Qa(a,b){ic.setInitialSettings(a,b)}function Ra(a){return ic.getInitialSettings(a)}function Sa(a){if(!fc)throw Vb;ic.setTrack(a)}function Ta(a){return ic.getSwitchMode(a)}function Ua(a,b){ic.setSwitchMode(a,b)}function Va(a){ic.setSelectionModeForInitialTrack(a)}function Wa(){return ic.getSelectionModeForInitialTrack()}function Xa(){return hc.getAutoSwitchBitrateFor("video")||hc.getAutoSwitchBitrateFor("audio")}function Ya(a){hc.setAutoSwitchBitrateFor("video",a),hc.setAutoSwitchBitrateFor("audio",a)}function Za(a){return hc.getAutoSwitchBitrateFor(a)}function $a(a,b){hc.setAutoSwitchBitrateFor(a,b)}function _a(a){oc.setFastSwitchEnabled(a)}function ab(){return oc.getFastSwitchEnabled()}function bb(a){oc.setBufferOccupancyABREnabled(a)}function cb(a,b){var c=Mb(),d=this,e=function g(a){a.error?b(null,a.error):b(a.manifest),$b.off(aa["default"].INTERNAL_MANIFEST_LOADED,g,d),c.reset()};$b.on(aa["default"].INTERNAL_MANIFEST_LOADED,e,d);var f=E["default"](Zb).getInstance();f.initialize(),c.load(f.parseURI(a))}function db(a,b){eb(a,b);var c=new g["default"];c.schemeIdUri=a,c.value=b,oc.getUTCTimingSources().push(c)}function eb(a,b){var c=oc.getUTCTimingSources();c.forEach(function(d,e){d.schemeIdUri===a&&d.value===b&&c.splice(e,1)})}function fb(){oc.setUTCTimingSources([])}function gb(){db(I["default"].DEFAULT_UTC_TIMING_SOURCE.scheme,I["default"].DEFAULT_UTC_TIMING_SOURCE.value)}function hb(a){oc.setUseManifestDateHeaderTimeSource(a)}function ib(a){oc.setBufferToKeep(a)}function jb(a){oc.setBufferPruningInterval(a)}function kb(a){oc.setStableBufferTime(a)}function lb(a){oc.setBufferTimeAtTopQuality(a)}function mb(a){oc.setBufferTimeAtTopQualityLongForm(a)}function nb(a){oc.setLongFormContentDurationThreshold(a)}function ob(a){oc.setRichBufferThreshold(a)}function pb(a){oc.setBandwidthSafetyFactor(a)}function qb(){return oc.getBandwidthSafetyFactor()}function rb(a){oc.setAbandonLoadTimeout(a)}function sb(a){oc.setFragmentRetryAttempts(a)}function tb(a){oc.setFragmentRetryInterval(a)}function ub(a){vb(void 0,a)}function vb(a,b){oc.setXHRWithCredentialsForType(a,b)}function wb(a){return oc.getXHRWithCredentialsForType(a)}function xb(){return Ob()}function yb(a){jc=a}function zb(a){dc=a}function Ab(a){var b=w["default"](Zb).getInstance();b.setConfig({videoModel:vc}),b.initialize(),b.displayCConTop(a)}function Bb(){return vc?vc.getVideoContainer():null}function Cb(a){if(!vc)throw Wb;vc.setVideoContainer(a)}function Db(){if(!vc)throw Wb;return vc.getElement()}function Eb(a){if(!ec)throw Yb;vc=null,a&&(vc=S["default"](Zb).getInstance(),vc.initialize(),vc.setElement(a),Ob(),Pb(),Qb()),Kb()}function Fb(){return vc?vc.getTTMLRenderingDiv():null}function Gb(a){if(!vc)throw Wb;vc.setTTMLRenderingDiv(a)}function Hb(){if(!cc)throw Xb;return cc}function Ib(a){if(!ec)throw Yb;if("string"==typeof a){var b=E["default"](Zb).getInstance();b.initialize(),cc=b.parseURI(a)}else cc=a;Kb()}function Jb(){Ib(null),Eb(null),dc=null,jc=null}function Kb(){fc?(fc=!1,mc.reset(),rc.reset(),sc.reset(),hc.reset(),ic.reset(),wc.reset(),rc=null,kc=null,c()&&Ub()):c()&&Ub()}function Lb(){var a=Q["default"](Zb).getInstance();a.initialize();var b=y["default"](Zb).getInstance();b.setConfig({dashManifestModel:uc}),ic.initialize(),ic.setConfig({errHandler:pc}),rc=k["default"](Zb).getInstance(),rc.setConfig({capabilities:qc,manifestLoader:Mb(),manifestModel:G["default"](Zb).getInstance(),dashManifestModel:uc,protectionController:jc,adapter:mc,metricsModel:nc,dashMetrics:tc,liveEdgeFinder:q["default"](Zb).getInstance(),mediaSourceController:U["default"](Zb).getInstance(),timeSyncController:O["default"](Zb).getInstance(),baseURLController:W["default"](Zb).getInstance(),errHandler:pc,timelineConverter:na["default"](Zb).getInstance()}),rc.initialize(gc,dc),hc.setConfig({abrRulesCollection:a,streamController:rc}),wc=C["default"](Zb).getInstance(),wc.setConfig({errHandler:pc,dashManifestModel:uc,mediaController:ic,streamController:rc,videoModel:vc})}function Mb(){return o["default"](Zb).create({errHandler:pc,metricsModel:nc,requestModifier:A["default"](Zb).getInstance(),mssHandler:lc})}function Nb(){return mc=ha["default"](Zb).getInstance(),mc.initialize(),mc.setConfig({dashManifestModel:uc}),mc}function Ob(){if(jc)return jc;var a=dashjs.Protection;if("function"==typeof a){var b=a(Zb).create();return aa["default"].extend(a.events),ca["default"].extend(a.events,{publicOnly:!0}),jc=b.createProtectionSystem({log:ac,videoModel:vc,capabilities:qc,eventBus:$b,adapter:mc})}return null}function Pb(){if(kc)return kc;var a=dashjs.MetricsReporting;if("function"==typeof a){var b=a(Zb).create();return kc=b.createMetricsReporting({log:ac,eventBus:$b,mediaElement:Db(),dashManifestModel:uc,metricsModel:nc})}return null}function Qb(){if(lc)return lc;var a=dashjs.MssHandler;return"function"==typeof a?lc=a(Zb).create({eventBus:$b,mediaPlayerModel:oc}):null}function Rb(){var a=nc.getReadOnlyMetricsFor("video")||nc.getReadOnlyMetricsFor("audio");return tc.getCurrentDVRInfo(a)}function Sb(a){var b,c,d=Rb();return d?(b=d.manifestInfo.availableFrom.getTime()/1e3,c=a+(b+d.range.start)):0}function Tb(){if(!fc)throw Vb;var a=rc.getActiveStreamInfo();return a?rc.getStreamById(a.id):null}function Ub(){fc||(fc=!0,ac("Playback Initialized"),Lb(),"string"==typeof cc?rc.load(cc):rc.loadWithManifest(cc))}var Vb="You must first call play() to init playback before calling this method",Wb="You must first call attachView() to set the video element before calling this method",Xb="You must first call attachSource() with a valid source before calling this method",Yb="MediaPlayer not initialized!",Zb=this.context,$b=$["default"](Zb).getInstance(),_b=Y["default"](Zb).getInstance(),ac=_b.log,bc=void 0,cc=void 0,dc=void 0,ec=void 0,fc=void 0,gc=void 0,hc=void 0,ic=void 0,jc=void 0,kc=void 0,lc=void 0,mc=void 0,nc=void 0,oc=void 0,pc=void 0,qc=void 0,rc=void 0,sc=void 0,tc=void 0,uc=void 0,vc=void 0,wc=void 0;return bc={initialize:b,on:P,off:R,extend:N,attachView:Eb,attachSource:Ib,isReady:c,play:d,isPaused:f,pause:e,isSeeking:h,isDynamic:j,seek:z,setMute:l,isMuted:n,setVolume:p,getVolume:r,time:B,duration:D,timeAsUTC:F,durationAsUTC:H,getActiveStream:Tb,getDVRWindowSize:v,getDVRSeekOffset:x,convertToTimeCode:L,formatUTC:J,getVersion:T,getDebug:V,getBufferLength:t,getVideoModel:X,getVideoContainer:Bb,getTTMLRenderingDiv:Fb,getVideoElement:Db,getSource:Hb,setLiveDelayFragmentCount:Z,setLiveDelay:_,getLiveDelay:ba,useSuggestedPresentationDelay:da,enableLastBitrateCaching:ga,enableLastMediaSettingsCaching:ia,setMaxAllowedBitrateFor:ka,getMaxAllowedBitrateFor:oa,setMinAllowedBitrateFor:ma,getMinAllowedBitrateFor:pa,setMaxAllowedRepresentationRatioFor:qa,getMaxAllowedRepresentationRatioFor:ra,setAutoPlay:sa,getAutoPlay:ta,setScheduleWhilePaused:ua,getScheduleWhilePaused:va,getDashMetrics:wa,getMetricsFor:xa,getQualityFor:ya,setQualityFor:za,updatePortalSize:Aa,getLimitBitrateByPortal:Ba,setLimitBitrateByPortal:Ca,getUsePixelRatioInLimitBitrateByPortal:Da,setUsePixelRatioInLimitBitrateByPortal:Ea,setTextTrack:Fa,getBitrateInfoListFor:Ha,setInitialBitrateFor:Ia,getInitialBitrateFor:Ja,setInitialRepresentationRatioFor:Ka,getInitialRepresentationRatioFor:La,getStreamsFromManifest:Ma,getTracksFor:Na,getTracksForTypeFromManifest:Oa,getCurrentTrackFor:Pa,setInitialMediaSettingsFor:Qa,getInitialMediaSettingsFor:Ra,setCurrentTrack:Sa,getTrackSwitchModeFor:Ta,setTrackSwitchModeFor:Ua,setSelectionModeForInitialTrack:Va,getSelectionModeForInitialTrack:Wa,getAutoSwitchQuality:Xa,setAutoSwitchQuality:Ya,setFastSwitchEnabled:_a,getFastSwitchEnabled:ab,getAutoSwitchQualityFor:Za,setAutoSwitchQualityFor:$a,enableBufferOccupancyABR:bb,setBandwidthSafetyFactor:pb,getBandwidthSafetyFactor:qb,setAbandonLoadTimeout:rb,retrieveManifest:cb,addUTCTimingSource:db,removeUTCTimingSource:eb,clearDefaultUTCTimingSources:fb,restoreDefaultUTCTimingSources:gb,setBufferToKeep:ib,setBufferPruningInterval:jb,setStableBufferTime:kb,setBufferTimeAtTopQuality:lb,setFragmentLoaderRetryAttempts:sb,setFragmentLoaderRetryInterval:tb,setXHRWithCredentials:ub,setXHRWithCredentialsForType:vb,getXHRWithCredentialsForType:wb,setBufferTimeAtTopQualityLongForm:mb,setLongFormContentDurationThreshold:nb,setRichBufferThreshold:ob,getProtectionController:xb,attachProtectionController:yb,setProtectionData:zb,enableManifestDateHeaderTimeSource:hb,displayCaptionsOnTop:Ab,attachVideoContainer:Cb,attachTTMLRenderingDiv:Gb,getCurrentTextTrackIndex:Ga,reset:Jb},a(),bc}Object.defineProperty(c,"__esModule",{value:!0});var f=a(48),g=d(f),h=a(67),i=d(h),j=a(70),k=d(j),l=a(65),m=d(l),n=a(50),o=d(n),p=a(155),q=d(p),r=a(152),s=d(r),t=a(148),u=d(t),v=a(145),w=d(v),x=a(69),y=d(x),z=a(157),A=d(z),B=a(143),C=d(B),D=a(101),E=d(D),F=a(98),G=d(F),H=a(99),I=d(H),J=a(100),K=d(J),L=a(59),M=d(L),N=a(71),O=d(N),P=a(130),Q=d(P),R=a(102),S=d(R),T=a(66),U=d(T),V=a(60),W=d(V),X=a(8),Y=d(X),Z=a(9),$=d(Z),_=a(13),aa=d(_),ba=a(53),ca=d(ba),da=a(10),ea=d(da),fa=a(11),ga=a(15),ha=d(ga),ia=a(22),ja=d(ia),ka=a(17),la=d(ka),ma=a(38),na=d(ma);e.__dashjs_factory_name="MediaPlayer";var oa=ea["default"].getClassFactory(e);oa.events=ca["default"],c["default"]=oa,b.exports=c["default"]},{10:10,100:100,101:101,102:102,11:11,13:13,130:130,143:143,145:145,148:148,15:15,152:152,155:155,157:157,17:17,22:22,38:38,48:48,50:50,53:53,59:59,60:60,65:65,66:66,67:67,69:69,70:70,71:71,8:8,9:9,98:98,99:99}],53:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(14),i=d(h),j=function(a){function b(){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.STREAM_INITIALIZED="streamInitialized",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated"}return f(b,a),b}(i["default"]),k=new j;c["default"]=k,b.exports=c["default"]},{14:14}],54:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b,c){if(!a||"VIDEO"!==a.nodeName)return null;if(a._dashjs_player)return a._dashjs_player;var e,f=a.id||a.name||"video element";if(b=b||[].slice.call(a.querySelectorAll("source")).filter(function(a){return a.type==d})[0],!b&&a.src)b=document.createElement("source"),b.src=a.src;else if(!b&&!a.src)return null;return c=c||{},e=i["default"](c).create(),e.initialize(a,b.src,a.autoplay),e.getDebug().log("Converted "+f+" to dash.js player and added content: "+b.src),a._dashjs_player=e,e}function b(b,e){var f=[];b=b||"[data-dashjs-player]",e=e||document;for(var g=e.querySelectorAll(b),h=0;h<g.length;h++){var i=a(g[h],null);f.push(i)}for(var j=e.querySelectorAll('source[type="'+d+'"]'),h=0;h<j.length;h++){var k=c(j[h]),i=a(k,null);f.push(i)}return f}function c(a){for(var b=!0;b;){var c=a;if(b=!1,"video"===c.nodeName.toLowerCase())return c;a=c.parentNode,b=!0}}var d="application/dash+xml";return{create:a,createAll:b}}function f(){window.removeEventListener("load",f),j.createAll()}function g(){window.dashjs&&(window.clearInterval(k),j.createAll())}Object.defineProperty(c,"__esModule",{value:!0});var h=a(52),i=d(h),j=e(),k=void 0,l="undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate;!l&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?j.createAll():k=window.setInterval(g,500):window.addEventListener("load",f)),
c["default"]=j,b.exports=c["default"]},{52:52}],55:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){ja=[],ka=!1,la=!1,ma=null,na={},oa=!1,pa=!1,ra=g["default"]($).getInstance(),sa=w["default"]($).getInstance(),wa=q["default"]($).getInstance(),ta=k["default"]($).getInstance(),ua=o["default"]($).create(),xa=O["default"]($).getInstance(),aa.on(I["default"].BUFFERING_COMPLETED,U,ia),aa.on(I["default"].DATA_UPDATE_COMPLETED,V,ia)}function c(a,b){ma=a,qa=b,qa&&(aa.on(I["default"].KEY_ERROR,D,ia),aa.on(I["default"].SERVER_CERTIFICATE_UPDATED,D,ia),aa.on(I["default"].LICENSE_REQUEST_COMPLETE,D,ia),aa.on(I["default"].KEY_SYSTEM_SELECTED,D,ia),aa.on(I["default"].KEY_SESSION_CREATED,D,ia))}function d(a){ka||(aa.on(I["default"].CURRENT_TRACK_CHANGED,J,ia),Q(a),ka=!0)}function e(){for(var a=ja.length,b=0;a>b;b++)ja[b].reset();ja=[],ka=!1,la=!1,x(),aa.off(I["default"].CURRENT_TRACK_CHANGED,J,ia)}function f(){sa&&(sa.pause(),sa=null),ua&&(ua.reset(),ua=null),e(),ta=null,wa=null,ca=null,ba=null,da=null,ea=null,_=null,fa=null,oa=!1,pa=!1,na={},aa.off(I["default"].DATA_UPDATE_COMPLETED,V,ia),aa.off(I["default"].BUFFERING_COMPLETED,U,ia),aa.off(I["default"].KEY_ERROR,D,ia),aa.off(I["default"].SERVER_CERTIFICATE_UPDATED,D,ia),aa.off(I["default"].LICENSE_REQUEST_COMPLETE,D,ia),aa.off(I["default"].KEY_SYSTEM_SELECTED,D,ia),aa.off(I["default"].KEY_SESSION_CREATED,D,ia)}function h(){return ma.duration}function j(){return ma.start}function l(){return ma.index}function n(){return ma.id}function p(){return ma}function r(a){return null!==S(a)}function t(a){var b=S(a);return wa.getBitrateList(b)}function v(){va&&va.start()}function x(){va&&va.clear()}function z(){return ka}function B(){return pa}function D(a){a.error&&(fa.mediaKeySessionError(a.error),_(a.error),f())}function F(a){return"text"===a.type?a.mimeType:a.type}function H(a,b,c){var d,e,f=a.type;if("muxed"===f&&a)return e="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",_(e),fa.manifestError(e,"multiplexedrep",ba.getValue()),!1;if("text"===f||"fragmentedText"===f||"embeddedText"===f)return!0;if(d=a.codec,_(f+" codec: "+d),a.contentProtection&&!ea.supportsEncryptedMedia())fa.capabilityError("encryptedmedia");else if(!ea.supportsCodec(s["default"]($).getInstance().getElement(),d))return e=f+"Codec ("+d+") is not supported.",fa.manifestError(e,"codec",c),_(e),!1;return!0}function J(a){if(a.newMediaInfo.streamInfo.id===ma.id){var b=W(a.oldMediaInfo);if(b){var c=sa.getTime(),d=b.getBuffer(),e=a.newMediaInfo,f=ba.getValue(),g=ja.indexOf(b),h=b.getMediaSource();"fragmentedText"!==e.type?(b.reset(!0),N(e,f,h,{buffer:d,replaceIdx:g,currentTime:c}),sa.seek(sa.getTime())):b.updateMediaInfo(f,e)}}}function L(a){var b=a.split("/")[1];return"webm"===b.toLowerCase()}function M(a){var b=L(a.mimeType)?C["default"]($).getInstance():A["default"]($).getInstance();b.setConfig({baseURLController:ha,metricsModel:u["default"]($).getInstance()}),b.initialize();var c=y["default"]($).create({segmentBaseLoader:b,timelineConverter:ga,dashMetrics:E["default"]($).getInstance(),metricsModel:u["default"]($).getInstance(),baseURLController:ha});return c}function N(a,b,c,d){var e=i["default"]($).create({indexHandler:M(a),timelineConverter:ga,adapter:da,manifestModel:ba}),f=da.getAllMediaInfoForType(b,ma,a.type);if(e.initialize(F(a),ua,c,ia,va),wa.updateTopQualityIndex(a),d?(e.setBuffer(d.buffer),e.getIndexHandler().setCurrentTime(d.currentTime),ja[d.replaceIdx]=e):ja.push(e),"text"===a.type||"fragmentedText"===a.type){for(var g,h=0;h<f.length;h++)f[h].index===a.index&&(g=h),e.updateMediaInfo(b,f[h]);"fragmentedText"===a.type&&e.updateMediaInfo(b,f[g])}else e.updateMediaInfo(b,a)}function P(a,b){var c,d=ba.getValue(),e=da.getAllMediaInfoForType(d,ma,a),f=null;if(!e||0===e.length)return void _("No "+a+" data.");for(var g=0,h=e.length;h>g;g++)if(f=e[g],"embeddedText"===a)xa.addEmbeddedTrack(f);else{if(!H(f,b,d))continue;ta.isMultiTrackSupportedByType(f.type)&&ta.addTrack(f,ma)}"embeddedText"!==a&&0!==ta.getTracksFor(a,ma).length&&(ta.checkInitialMediaSettingsForType(a,ma),c=ta.getCurrentTrackFor(a,ma),N(c,d,b))}function Q(a){var b,c=ba.getValue();if(va=m["default"]($).getInstance(),va.initialize(),va.setConfig({manifestModel:ba,manifestUpdater:ca}),b=da.getEventsFor(c,ma),va.addInlineEvents(b),oa=!0,P("video",a),P("audio",a),P("text",a),P("fragmentedText",a),P("embeddedText",a),P("muxed",a),T(),la=!0,oa=!1,0===ja.length){var d="No streams to play.";fa.manifestError(d,"nostreams",c),_(d)}else ra.initialize(ga,ja[0]),R()}function R(){var a=ja.length,b=!!na.audio||!!na.video,c=b?new Error(Z,"Data update failed",null):null,d=0;for(d;a>d;d++)if(ja[d].isUpdating()||oa)return;pa=!0,la&&(qa&&qa.initialize(ba.getValue(),S("audio"),S("video")),aa.trigger(I["default"].STREAM_INITIALIZED,{streamInfo:ma,error:c}))}function S(a){for(var b=ja.length,c=null,d=0;b>d;d++)if(c=ja[d],c.getType()===a)return c.getMediaInfo();return null}function T(){for(var a=0,b=ja.length;b>a;a++)ja[a].createBuffer()}function U(a){if(a.streamInfo===ma){var b=X(),c=b.length,d=0;for(d;c>d;d++)if(!b[d].isBufferingCompleted())return;aa.trigger(I["default"].STREAM_BUFFERING_COMPLETED,{streamInfo:ma})}}function V(a){var b=a.sender.getStreamProcessor();b.getStreamInfo()===ma&&(na[b.getType()]=a.error,R())}function W(a){if(!a)return!1;var b=X();return b.filter(function(b){return b.getType()===a.type})[0]}function X(){var a,b,c=ja.length,d=[],e=0;for(e;c>e;e++)b=ja[e],a=b.getType(),"audio"!==a&&"video"!==a&&"fragmentedText"!==a||d.push(b);return d}function Y(a){_("Manifest updated... updating data system wide.");var b=ba.getValue();if(ka=!1,oa=!0,pa=!1,ma=a,va){var c=da.getEventsFor(b,ma);va.addInlineEvents(c)}for(var d=0,e=ja.length;e>d;d++){var f=ja[d],g=da.getMediaInfoForType(b,ma,f.getType());wa.updateTopQualityIndex(g),f.updateMediaInfo(b,g)}oa=!1,R()}var Z=1,$=this.context,_=K["default"]($).getInstance().log,aa=G["default"]($).getInstance(),ba=a.manifestModel,ca=a.manifestUpdater,da=a.adapter,ea=a.capabilities,fa=a.errHandler,ga=a.timelineConverter,ha=a.baseURLController,ia=void 0,ja=void 0,ka=void 0,la=void 0,ma=void 0,na=void 0,oa=void 0,pa=void 0,qa=void 0,ra=void 0,sa=void 0,ta=void 0,ua=void 0,va=void 0,wa=void 0,xa=void 0;return ia={initialize:c,activate:d,deactivate:e,getDuration:h,getStartTime:j,getStreamIndex:l,getId:n,getStreamInfo:p,hasMedia:r,getBitrateListFor:t,startEventController:v,isActivated:z,isInitialized:B,updateData:Y,reset:f,getProcessors:X},b(),ia}Object.defineProperty(c,"__esModule",{value:!0});var f=a(155),g=d(f),h=a(56),i=d(h),j=a(65),k=d(j),l=a(63),m=d(l),n=a(64),o=d(n),p=a(59),q=d(p),r=a(102),s=d(r),t=a(100),u=d(t),v=a(67),w=d(v),x=a(16),y=d(x),z=a(18),A=d(z),B=a(19),C=d(B),D=a(17),E=d(D),F=a(9),G=d(F),H=a(13),I=d(H),J=a(8),K=d(J),L=a(10),M=d(L),N=a(143),O=d(N);e.__dashjs_factory_name="Stream",c["default"]=M["default"].getClassFactory(e),b.exports=c["default"]},{10:10,100:100,102:102,13:13,143:143,155:155,16:16,17:17,18:18,19:19,56:56,59:59,63:63,64:64,65:65,67:67,8:8,9:9}],56:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){ba=[]}function c(a,b,c,d,e){aa=a,ca=d,da=e,ia=b,$=ca.getStreamInfo().manifestInfo.isDynamic,V.initialize(this),ea=g["default"](U).getInstance(),ea.initialize(aa,this),fa=T(a),ga=q["default"](U).create({metricsModel:u["default"](U).getInstance(),manifestModel:Y,adapter:X,dashMetrics:G["default"](U).getInstance(),dashManifestModel:E["default"](U).getInstance(),timelineConverter:W,mediaPlayerModel:s["default"](U).getInstance()}),fa.initialize(aa,c,this),ga.initialize(aa,this),ja=w["default"](U).create({metricsModel:u["default"](U).getInstance(),errHandler:K["default"](U).getInstance(),requestModifier:y["default"](U).getInstance()}),ka=ga.getFragmentModel(),ka.setLoader(ja),ha=I["default"](U).create(),ha.initialize(this)}function d(a){V.reset(),fa&&(fa.reset(a),fa=null),ga&&(ga.reset(),ga=null),ha&&(ha.reset(),ha=null),ia=null,ja=null,da=null,ca=null,$=null,_=null,ba=[],aa=null}function e(){return ha.isUpdating()}function f(){return aa}function h(){return ea}function j(){return ha}function l(){return ja}function n(){return V}function p(){return ia}function r(){return fa.getBuffer()}function t(a){fa.setBuffer(a)}function v(){return fa}function x(){return ka}function z(){return ca?ca.getStreamInfo():null}function B(a,b){b===_||b&&_&&b.type!==_.type||(_=b),-1===ba.indexOf(b)&&ba.push(b),X.updateData(a,this)}function D(){return ba}function F(){return _}function H(){return fa.getMediaSource()}function J(){return ga}function L(){return da}function M(){ga.start()}function N(){ga.stop()}function O(){return X.getCurrentRepresentationInfo(Y.getValue(),ha)}function P(a){return X.getRepresentationInfoForQuality(Y.getValue(),ha,a)}function Q(){return fa.getIsBufferingCompleted()}function R(){return fa.getBuffer()||fa.createBuffer(_)}function S(){return $}function T(a){var b=null;return b="video"===a||"audio"===a?i["default"](U).create({metricsModel:u["default"](U).getInstance(),manifestModel:Y,sourceBufferController:A["default"](U).getInstance(),errHandler:K["default"](U).getInstance(),streamController:k["default"](U).getInstance(),mediaController:m["default"](U).getInstance(),adapter:X,textController:C["default"](U).getInstance()}):o["default"](U).create({type:a,metricsModel:u["default"](U).getInstance(),manifestModel:Y,sourceBufferController:A["default"](U).getInstance(),errHandler:K["default"](U).getInstance(),streamController:k["default"](U).getInstance(),mediaController:m["default"](U).getInstance(),adapter:X,textController:C["default"](U).getInstance()})}var U=this.context,V=a.indexHandler,W=a.timelineConverter,X=a.adapter,Y=a.manifestModel,Z=void 0,$=void 0,_=void 0,aa=void 0,ba=void 0,ca=void 0,da=void 0,ea=void 0,fa=void 0,ga=void 0,ha=void 0,ia=void 0,ja=void 0,ka=void 0;return Z={initialize:c,isUpdating:e,getType:f,getBufferController:v,getABRController:h,getFragmentLoader:l,getFragmentModel:x,getScheduleController:J,getEventController:L,getFragmentController:p,getRepresentationController:j,getIndexHandler:n,getCurrentRepresentationInfo:O,getRepresentationInfoForQuality:P,isBufferingCompleted:Q,createBuffer:R,getStreamInfo:z,updateMediaInfo:B,getMediaInfoArr:D,getMediaInfo:F,getMediaSource:H,getBuffer:r,setBuffer:t,start:M,stop:N,isDynamic:S,reset:d},b(),Z}Object.defineProperty(c,"__esModule",{value:!0});var f=a(59),g=d(f),h=a(62),i=d(h),j=a(70),k=d(j),l=a(65),m=d(l),n=a(142),o=d(n),p=a(68),q=d(p),r=a(99),s=d(r),t=a(100),u=d(t),v=a(49),w=d(v),x=a(157),y=d(x),z=a(69),A=d(z),B=a(143),C=d(B),D=a(22),E=d(D),F=a(17),G=d(F),H=a(21),I=d(H),J=a(152),K=d(J),L=a(10),M=d(L);e.__dashjs_factory_name="StreamProcessor",c["default"]=M["default"].getClassFactory(e),b.exports=c["default"]},{10:10,100:100,142:142,143:143,152:152,157:157,17:17,21:21,22:22,49:49,59:59,62:62,65:65,68:68,69:69,70:70,99:99}],57:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(a){function b(){var a;p=[],q=[],r=[],a={},e(a,g.HTTPRequest.MPD_TYPE,m["default"].DOWNLOAD_ERROR_ID_MANIFEST),e(a,g.HTTPRequest.XLINK_EXPANSION_TYPE,m["default"].DOWNLOAD_ERROR_ID_XLINK),e(a,g.HTTPRequest.INIT_SEGMENT_TYPE,m["default"].DOWNLOAD_ERROR_ID_INITIALIZATION),e(a,g.HTTPRequest.MEDIA_SEGMENT_TYPE,m["default"].DOWNLOAD_ERROR_ID_CONTENT),e(a,g.HTTPRequest.INDEX_SEGMENT_TYPE,m["default"].DOWNLOAD_ERROR_ID_CONTENT),e(a,g.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,m["default"].DOWNLOAD_ERROR_ID_CONTENT),e(a,g.HTTPRequest.OTHER_TYPE,m["default"].DOWNLOAD_ERROR_ID_CONTENT),s=a}function c(a,b){var d=a.request,e=new XMLHttpRequest,f=[],g=!0,h=!0,k=new Date,m=k,o=0,t=function(a){h=!1,d.requestStartDate=k,d.requestEndDate=new Date,d.firstByteDate=d.firstByteDate||k,d.checkExistenceOnly||l.addHttpRequest(d.mediaType,null,d.type,d.url,e.responseURL||null,d.serviceLocation||null,d.range||null,d.requestStartDate,d.firstByteDate,d.requestEndDate,e.status,d.duration,e.getAllResponseHeaders(),a?f:null)},u=function(){-1!==p.indexOf(e)&&(p.splice(p.indexOf(e),1),h&&(t(!1),b>0?(b--,r.push(setTimeout(function(){c(a,b)},i.getRetryIntervalForType(d.type)))):(j.downloadError(s[d.type],d.url,d),a.error&&a.error(d,"error",e.statusText),a.complete&&a.complete(d,e.statusText))))},v=function(b){var c=new Date;g&&(g=!1,(!b.lengthComputable||b.lengthComputable&&b.total!==b.loaded)&&(d.firstByteDate=c)),b.lengthComputable&&(d.bytesLoaded=b.loaded,d.bytesTotal=b.total),f.push({s:m,d:c.getTime()-m.getTime(),b:[b.loaded?b.loaded-o:0]}),m=c,o=b.loaded,a.progress&&a.progress()},w=function(){e.status>=200&&e.status<=299&&(t(!0),a.success&&a.success(e.response,e.statusText,e),a.complete&&a.complete(d,e.statusText))};try{var x=n.modifyRequestURL(d.url),y=d.checkExistenceOnly?"HEAD":"GET";e.open(y,x,!0),d.responseType&&(e.responseType=d.responseType),d.range&&e.setRequestHeader("Range","bytes="+d.range),d.requestStartDate||(d.requestStartDate=k),e=n.modifyRequestHeader(e),e.withCredentials=i.getXHRWithCredentialsForType(d.type),e.onload=w,e.onloadend=u,e.onerror=u,e.onprogress=v;var z=(new Date).getTime();isNaN(d.delayLoadingTime)||z>=d.delayLoadingTime?(p.push(e),e.send()):!function(){var a={xhr:e};q.push(a),a.delayTimeout=setTimeout(function(){if(-1!==q.indexOf(a)){q.splice(q.indexOf(a),1);try{p.push(a.xhr),a.xhr.send()}catch(b){a.xhr.onerror()}}},d.delayLoadingTime-z)}()}catch(A){e.onerror()}}function d(a){a.request&&c(a,i.getRetryAttemptsForType(a.request.type))}function f(){r.forEach(function(a){return clearTimeout(a)}),r=[],q.forEach(function(a){return clearTimeout(a.delayTimeout)}),q=[],p.forEach(function(a){a.onloadend=a.onerror=a.onprogress=void 0,a.abort()}),p=[]}var h=this.context,i=k["default"](h).getInstance(),j=a.errHandler,l=a.metricsModel,n=a.requestModifier,o=void 0,p=void 0,q=void 0,r=void 0,s=void 0;return o={load:d,abort:f},b(),o}Object.defineProperty(c,"__esModule",{value:!0});var g=a(182),h=a(10),i=d(h),j=a(99),k=d(j),l=a(152),m=d(l);f.__dashjs_factory_name="XHRLoader";var n=i["default"].getClassFactory(f);c["default"]=n,b.exports=c["default"]},{10:10,152:152,182:182,99:99}],58:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(a,b,c){var e=function(d,e){b.resolved=!0,b.resolvedContent=d?d:null,f.trigger(p["default"].XLINK_ELEMENT_LOADED,{element:b,resolveObject:c,error:d||e?null:new g["default"](s,"Failed loading Xlink element: "+a)})};if(a===d)e(null,!0);else{var i=new l["default"](a,j.HTTPRequest.XLINK_TYPE);h.load({request:i,success:function(a){e(a)},error:function(){e(null)}})}}function c(){h&&(h.abort(),h=null)}var d="urn:mpeg:dash:resolve-to-zero:2013",e=this.context,f=n["default"](e).getInstance(),h=i["default"](e).create({errHandler:a.errHandler,metricsModel:a.metricsModel,requestModifier:a.requestModifier}),k=void 0;return k={load:b,reset:c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(165),g=d(f),h=a(57),i=d(h),j=a(182),k=a(173),l=d(k),m=a(9),n=d(m),o=a(13),p=d(o),q=a(10),r=d(q),s=1;e.__dashjs_factory_name="XlinkLoader";var t=r["default"].getClassFactory(e);t.XLINK_LOADER_ERROR_LOADING_FAILURE=s,c["default"]=t,b.exports=c["default"]},{10:10,13:13,165:165,173:173,182:182,57:57,9:9}],59:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){sa={video:!0,audio:!0},ta={},ua={},va={},wa={},xa={},za={},ya={},Ma={},Ba=!1,Ca=!1,void 0===Da&&(Da=!1),Ka=i["default"](la).getInstance(),Ja=k["default"](la).getInstance(),Ga=w["default"](la).getInstance(),Ha=y["default"](la).getInstance(),Ia=A["default"](la).getInstance(),Oa=K["default"](la).getInstance(),Pa=M["default"](la).getInstance(),Qa=(new Date).getTime()/1e3}function b(a,b){Ma[a]=G["default"](la).create(),ya[a]=b,za[a]=za[a]||{},za[a].state=Q,oa.on(q["default"].LOADING_PROGRESS,ka,this),"video"==a&&(oa.on(s["default"].QUALITY_CHANGE_RENDERED,e,this),Na=I["default"](la).create(),ia())}function c(){oa.off(q["default"].LOADING_PROGRESS,ka,this),oa.off(s["default"].QUALITY_CHANGE_RENDERED,e,this),La=void 0,Na=void 0,clearTimeout(Aa),Aa=null,a()}function d(a){a&&(a.abrRulesCollection&&(qa=a.abrRulesCollection),a.streamController&&(ra=a.streamController))}function e(a){"video"===a.mediaType&&(La=a.newQuality,Na.push(La,Ia.getPlaybackQuality()))}function f(a,b){var c;return ta[b]=ta[b]||{},ta[b].hasOwnProperty(a)||(ta[b][a]=0),c=fa(ta[b][a],a),c=ga(c,a,ta[b][a]),c=ja(c,a)}function h(a){var b=Ka.getSavedBitrateSettings(a);if(!va.hasOwnProperty(a))if(wa.hasOwnProperty(a)){var c=Ga.getValue(),d=Ha.getAdaptationForType(c,0,a).Representation;if(Array.isArray(d)){var e=Math.max(Math.round(d.length*wa[a])-1,0);va[a]=d[e].bandwidth}else va[a]=0}else isNaN(b)?va[a]="video"===a?R:S:va[a]=b;return va[a]}function j(a,b){va[a]=b}function l(a){return wa.hasOwnProperty(a)?wa[a]:null}function n(a,b){wa[a]=b}function p(a){return va.hasOwnProperty("max")&&va.max.hasOwnProperty(a)?va.max[a]:NaN}function r(a){return va.hasOwnProperty("min")&&va.min.hasOwnProperty(a)?va.min[a]:NaN}function t(a,b){va.max=va.max||{},va.max[a]=b}function u(a,b){va.min=va.min||{},va.min[a]=b}function v(a){return wa.hasOwnProperty("max")&&wa.max.hasOwnProperty(a)?wa.max[a]:1}function x(a,b){wa.max=wa.max||{},wa.max[a]=b}function z(a){return sa[a]}function B(a,b){sa[a]=b}function D(){return Ba}function F(a){Ba=a}function H(){return Ca}function J(a){Ca=a}function L(a){var b=a.getType(),c=a.getStreamInfo(),d=c.id,e=ca(b,c),g=C["default"](la).create({streamProcessor:a,currentValue:e,playbackIndex:La,switchHistory:Ma[b],droppedFramesHistory:Na,hasRichBuffer:Z(b)});if(Na&&Na.push(La,Ia.getPlaybackQuality()),z(b)){var h=f(b,d),i=qa.getMaxQuality(g),j=i.value;if(j>h&&(j=h),Ma[b].push({oldValue:e,newValue:j}),j>E["default"].NO_CHANGE&&j!=e)(za[b].state===Q||j>e)&&U(b,c,e,j,h,i.reason);else if(ma.getLogToBrowserConsole()){var k=Pa.getCurrentBufferLevel(Oa.getReadOnlyMetricsFor(b));na("AbrController ("+b+") stay on "+e+"/"+h+" (buffer: "+k+")")}}}function N(a,b,c,d){var e=b.id,g=ca(a,b),h=null!==c&&!isNaN(c)&&c%1===0;if(!h)throw new Error("argument is not an integer");var i=f(a,e);c!==g&&c>=0&&i>=c&&U(a,b,g,c,i,d)}function U(a,b,c,d,e,f){if(ma.getLogToBrowserConsole()){var g=Pa.getCurrentBufferLevel(Oa.getReadOnlyMetricsFor(a));na("AbrController ("+a+") switch from "+c+" to "+d+"/"+e+" (buffer: "+g+")\n"+JSON.stringify(f))}da(a,b.id,d),oa.trigger(q["default"].QUALITY_CHANGE_REQUESTED,{mediaType:a,streamInfo:b,oldQuality:c,newQuality:d,reason:f})}function V(a,b){za[a].state=b}function W(a){return za[a].state}function X(a,b,c){if(c&&ya[a.type].getCurrentRepresentationInfo()&&ya[a.type].getCurrentRepresentationInfo().fragmentDuration){c/=1e3;var d=ya[a.type].getCurrentRepresentationInfo().fragmentDuration;if(c>d)return 0;var e=c/d;b*=1-e}var f=Y(a);if(!f||0===f.length)return T;for(var g=f.length-1;g>=0;g--){var h=f[g];if(1e3*b>=h.bitrate)return g}return 0}function Y(a){if(!a||!a.bitrateList)return null;for(var b,c=a.bitrateList,d=a.type,e=[],f=0,h=c.length;h>f;f++)b=new g["default"],b.mediaType=d,b.qualityIndex=f,b.bitrate=c[f].bandwidth,b.width=c[f].width,b.height=c[f].height,e.push(b);return e}function Z(a){var b=Oa.getReadOnlyMetricsFor(a),c=Pa.getCurrentBufferLevel(b),d=b.BufferState.length>0?b.BufferState[b.BufferState.length-1]:null,e=!1;return d&&c>d.target&&(e=c>d.target+Ja.getRichBufferThreshold()),e}function $(a,b){xa[a]=b}function _(a){return xa[a]}function aa(a){var b=a.type,c=a.streamInfo.id,d=a.representationCount-1;return ea(b,c,d),d}function ba(a){var b,c=a.id,d=ca("audio",a),e=ca("video",a);return b=d===f("audio",c)&&e===f("video",c)}function ca(a,b){var c,d=b.id;return ua[d]=ua[d]||{},ua[d].hasOwnProperty(a)||(ua[d][a]=T),c=ua[d][a]}function da(a,b,c){ua[b]=ua[b]||{},ua[b][a]=c}function ea(a,b,c){ta[b]=ta[b]||{},ta[b][a]=c}function fa(a,b){var c=a;if(!ya[b])return c;var d=r(b);if(d){var e=X(ya[b].getMediaInfo(),d);c=Math.max(a,e)}var f=p(b);if(f){var g=X(ya[b].getMediaInfo(),f);c=Math.min(c,g)}return c}function ga(a,b,c){var d=v(b);return isNaN(d)||d>=1||0>d?a:Math.min(a,Math.round(c*d))}function ha(a){Da=a}function ia(){var a=Ia.getElement();if(void 0!==a){var b=Ca&&window.hasOwnProperty("devicePixelRatio"),c=b?window.devicePixelRatio:1;Ea=a.clientWidth*c,Fa=a.clientHeight*c}}function ja(a,b){if("video"!==b||!Ba||!ya[b])return a;Da||ia();var c=Ga.getValue(),d=Ha.getAdaptationForType(c,0,b).Representation,e=a;if(Ea>0&&Fa>0){for(;e>0&&d[e]&&Ea<d[e].width&&Ea-d[e-1].width<d[e].width-Ea;)e-=1;d.length-2>=e&&d[e].width===d[e+1].width&&(e=Math.min(a,e+1))}return e}function ka(a){var b=a.request.mediaType;if(z(b)){var c=ya[b].getScheduleController();if(!c)return;var d=C["default"](la).create({streamProcessor:ya[b],currentRequest:a.request,currentValue:ca(b,ra.getActiveStreamInfo()),hasRichBuffer:Z(b)}),e=qa.shouldAbandonFragment(d);if(e.value>E["default"].NO_CHANGE){var f=c.getFragmentModel(),g=f.getRequests({state:m["default"].FRAGMENT_MODEL_LOADING,index:a.request.index})[0];g&&(f.abortRequests(),V(b,P),Ma[b].reset(),Ma[b].push({oldValue:ca(b,ra.getActiveStreamInfo()),newValue:e.value,confidence:1,reason:e.reason}),N(b,ra.getActiveStreamInfo(),e.value,e.reason),oa.trigger(q["default"].FRAGMENT_LOADING_ABANDONED,{streamProcessor:ya[b],request:g,mediaType:b}),clearTimeout(Aa),Aa=setTimeout(function(){V(b,Q),Aa=null},Ja.getAbandonLoadTimeout()))}}}var la=this.context,ma=O["default"](la).getInstance(),na=ma.log,oa=o["default"](la).getInstance(),pa=void 0,qa=void 0,ra=void 0,sa=void 0,ta=void 0,ua=void 0,va=void 0,wa=void 0,xa=void 0,ya=void 0,za=void 0,Aa=void 0,Ba=void 0,Ca=void 0,Da=void 0,Ea=void 0,Fa=void 0,Ga=void 0,Ha=void 0,Ia=void 0,Ja=void 0,Ka=void 0,La=void 0,Ma=void 0,Na=void 0,Oa=void 0,Pa=void 0,Qa=void 0;return pa={isPlayingAtTopQuality:ba,updateTopQualityIndex:aa,getAverageThroughput:_,getBitrateList:Y,getQualityForBitrate:X,getMaxAllowedBitrateFor:p,getMinAllowedBitrateFor:r,setMaxAllowedBitrateFor:t,setMinAllowedBitrateFor:u,getMaxAllowedRepresentationRatioFor:v,setMaxAllowedRepresentationRatioFor:x,getInitialBitrateFor:h,setInitialBitrateFor:j,getInitialRepresentationRatioFor:l,setInitialRepresentationRatioFor:n,setAutoSwitchBitrateFor:B,getAutoSwitchBitrateFor:z,setLimitBitrateByPortal:F,getLimitBitrateByPortal:D,getUsePixelRatioInLimitBitrateByPortal:H,setUsePixelRatioInLimitBitrateByPortal:J,getQualityFor:ca,getAbandonmentStateFor:W,setAbandonmentStateFor:V,setPlaybackQuality:N,getPlaybackQuality:L,setAverageThroughput:$,getTopQualityIndexFor:f,setElementSize:ia,setWindowResizeEventCalled:ha,initialize:b,setConfig:d,reset:c},a(),pa}Object.defineProperty(c,"__esModule",{value:!0});var f=a(163),g=d(f),h=a(150),i=d(h),j=a(99),k=d(j),l=a(97),m=d(l),n=a(9),o=d(n),p=a(13),q=d(p),r=a(53),s=d(r),t=a(10),u=d(t),v=a(98),w=d(v),x=a(22),y=d(x),z=a(102),A=d(z),B=a(127),C=d(B),D=a(128),E=d(D),F=a(129),G=d(F),H=a(126),I=d(H),J=a(100),K=d(J),L=a(17),M=d(L),N=a(8),O=d(N),P="abandonload",Q="allowload",R=1e3,S=100,T=0;e.__dashjs_factory_name="AbrController";var U=u["default"].getSingletonFactory(e);U.ABANDON_LOAD=P,U.QUALITY_DEFAULT=T,c["default"]=U,b.exports=c["default"]},{10:10,100:100,102:102,126:126,127:127,128:128,129:129,13:13,150:150,163:163,17:17,22:22,53:53,8:8,9:9,97:97,98:98,99:99}],60:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){p.invalidateSelectedIndexes(a.entry)}function b(){p=g["default"](l).create(),r=i["default"](l).create(),n.on(s["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,a,j)}function c(a){a.baseURLTreeModel&&(p=a.baseURLTreeModel),a.baseURLSelector&&(r=a.baseURLSelector)}function d(a){p.update(a),r.chooseSelectorFromManifest(a)}function e(a){var b=p.getForPath(a),c=b.reduce(function(a,b){var c=r.select(b);return c?(o.isRelative(c.url)?a.url=o.resolve(c.url,a.url):(a.url=c.url,a.serviceLocation=c.serviceLocation),a):new m["default"]},new m["default"]);return o.isRelative(c.url)?void 0:c}function f(){p.reset(),r.reset()}function h(a){d(a)}var j=void 0,l=this.context,n=q["default"](l).getInstance(),o=k["default"](l).getInstance(),p=void 0,r=void 0;return j={reset:f,initialize:h,resolve:e,setConfig:c},b(),j}Object.defineProperty(c,"__esModule",{value:!0});var f=a(96),g=d(f),h=a(146),i=d(h),j=a(159),k=d(j),l=a(41),m=d(l),n=a(10),o=d(n),p=a(9),q=d(p),r=a(13),s=d(r);e.__dashjs_factory_name="BaseURLController",c["default"]=o["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,13:13,146:146,159:159,41:41,9:9,96:96}],61:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(a){return!!(g.length&&a&&a.length)&&-1!==g.indexOf(a)}function c(a){-1===g.indexOf(a)&&(g.push(a),h.trigger(j,{entry:a}))}function d(a){a.error&&c(a.request.serviceLocation)}function e(){k&&h.on(k,d,this)}function f(){g=[]}var g=[],h=i["default"](this.context).getInstance(),j=a.updateEventName,k=a.loadFailedEventName;return e(),{add:c,contains:b,reset:f}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(9),i=d(h);e.__dashjs_factory_name="BlackListController",c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{10:10,9:9}],62:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){oa=m["default"].QUALITY_DEFAULT,pa=!1,qa=0,ra=Number.POSITIVE_INFINITY,ta=0,ua=Number.POSITIVE_INFINITY,wa=null,xa=E,za=0,Aa=!1,Ba=!1,Ca=!1,Da=!1}function c(a,b,c){va=a,$(b),Fa=c,Ia=i["default"](ca).getInstance(),Ea=o["default"](ca).getInstance(),Ga=m["default"](ca).getInstance(),Ja=C["default"](ca).getInstance(),Ha=Fa.getScheduleController(),oa=Ga.getQualityFor(va,Fa.getStreamInfo()),ea.on(u["default"].DATA_UPDATE_COMPLETED,O,this),ea.on(u["default"].INIT_FRAGMENT_LOADED,f,this),ea.on(u["default"].MEDIA_FRAGMENT_LOADED,j,this),ea.on(u["default"].QUALITY_CHANGE_REQUESTED,p,this),ea.on(u["default"].STREAM_COMPLETED,P,this),ea.on(u["default"].PLAYBACK_PROGRESS,t,this),ea.on(u["default"].PLAYBACK_TIME_UPDATED,t,this),ea.on(u["default"].PLAYBACK_RATE_CHANGED,S,this),ea.on(u["default"].PLAYBACK_SEEKING,r,this),ea.on(u["default"].WALLCLOCK_TIME_UPDATED,R,this),ea.on(u["default"].CURRENT_TRACK_CHANGED,Q,this,s["default"].EVENT_PRIORITY_HIGH),ea.on(u["default"].SOURCEBUFFER_APPEND_COMPLETED,n,this),ea.on(u["default"].SOURCEBUFFER_REMOVE_COMPLETED,M,this)}function d(a){if(!a||!sa||!Fa)return null;var b=null;try{b=ha.createSourceBuffer(sa,a),b&&b.hasOwnProperty("initialize")&&b.initialize(va,this)}catch(c){ia.mediaSourceError("Error creating "+va+" source buffer.")}return X(b),N(Fa.getRepresentationInfoForQuality(oa).MSETimeOffset),b}function e(){return!(!Fa||!ja)&&Fa.getStreamInfo().id===ja.getActiveStreamInfo().id}function f(a){a.fragmentModel===Fa.getFragmentModel()&&(da("Init fragment finished loading saving to",va+"'s init cache"),Ja.save(a.chunk),l(a.chunk))}function h(a,b){var c=Ja.extract(a,b);c?l(c):ea.trigger(u["default"].INIT_REQUESTED,{sender:na})}function j(a){if(a.fragmentModel===Fa.getFragmentModel()){var b=a.chunk,c=b.bytes,d=b.quality,e=Fa.getRepresentationInfoForQuality(d),f=ga.getValue(),h=la.getEventsFor(f,e.mediaInfo,Fa),i=la.getEventsFor(f,e,Fa);if(h&&h.length>0||i&&i.length>0){var j=Fa.getFragmentModel().getRequests({state:g["default"].FRAGMENT_MODEL_EXECUTED,quality:d,index:b.index})[0],k=G(c,j,h,i);Fa.getEventController().addInbandEvents(k)}b.bytes=H(c),l(b)}}function l(a){Ba=!0,ya=a,ha.append(wa,a),"video"===a.mediaInfo.type&&ea.trigger(u["default"].VIDEO_CHUNK_RECEIVED,{chunk:a})}function n(a){if(wa===a.buffer){if(a.error||!I())return a.error.code===k["default"].QUOTA_EXCEEDED_ERROR_CODE&&(ra=.8*ha.getTotalBufferedTime(wa)),void(a.error.code!==k["default"].QUOTA_EXCEEDED_ERROR_CODE&&I()||(ea.trigger(u["default"].QUOTA_EXCEEDED,{sender:na,criticalBufferLevel:ra}),L(K())));ya&&!isNaN(ya.index)&&(ta=Math.max(ya.index,ta),y());var b=ha.getAllRanges(wa);if(b&&b.length>0)for(var c=0,d=b.length;d>c;c++)da("Buffered Range for type:",va,":",b.start(c)," - ",b.end(c));t(),Ba=!1,ya&&ea.trigger(u["default"].BYTES_APPENDED,{sender:na,quality:ya.quality,startTime:ya.start,index:ya.index,bufferedRanges:b})}}function p(a){oa!==a.newQuality&&va===a.mediaType&&Fa.getStreamInfo().id===a.streamInfo.id&&(N(Fa.getRepresentationInfoForQuality(a.newQuality).MSETimeOffset),oa=a.newQuality)}function r(){ua=Number.POSITIVE_INFINITY,pa=!1,t()}function t(){v(),x()}function v(){Ea&&(qa=ha.getBufferLength(wa,Ea.getTime()),ea.trigger(u["default"].BUFFER_LEVEL_UPDATED,{sender:na,bufferLevel:qa}),z())}function x(){e()&&(fa.addBufferState(va,xa,Ha.getBufferTarget()),fa.addBufferLevel(va,new Date,1e3*qa))}function y(){var a=ta>=ua-1;a&&!pa&&(pa=!0,ea.trigger(u["default"].BUFFERING_COMPLETED,{sender:na,streamInfo:Fa.getStreamInfo()}))}function z(){B(F>qa&&!pa?E:D)}function B(a){xa===a||"fragmentedText"===va&&ma.getAllTracksAreDisabled()||(xa=a,x(),ea.trigger(u["default"].BUFFER_LEVEL_STATE_CHANGED,{sender:na,state:a,mediaType:va,streamInfo:Fa.getStreamInfo()}),ea.trigger(a===D?u["default"].BUFFER_LOADED:u["default"].BUFFER_EMPTY,{mediaType:va}),da(a===D?"Got enough buffer to start.":"Waiting for more buffer before starting playback."))}function G(a,b,c,d){var e=Math.max(isNaN(b.startTime)?0:b.startTime,0),f=[],g=[];Da=!1;for(var h=c.concat(d),i=0,j=h.length;j>i;i++)f[h[i].schemeIdUri]=h[i];for(var k=w["default"](ca).getInstance().parse(a),l=k.getBoxes("emsg"),i=0,j=l.length;j>i;i++){var m=la.getEvent(l[i],f,e);m&&g.push(m)}return g}function H(a){if(!Da)return a;for(var b=a.length,c=Math.pow(256,2),d=Math.pow(256,3),e=new Uint8Array(a.length),f=0,g=0;b>f;){var h=String.fromCharCode(a[f+4],a[f+5],a[f+6],a[f+7]),i=a[f]*d+a[f+1]*c+256*a[f+2]+1*a[f+3];if("emsg"!=h)for(var j=f;f+i>j;j++)e[g]=a[j],g++;f+=i}return e.subarray(0,g)}function I(){var a=ha.getTotalBufferedTime(wa);return ra>a}function J(){if(wa&&"fragmentedText"!==va){var a=wa.buffered.length?wa.buffered.start(0):0,b=Ea.getTime()-a-Ia.getBufferToKeep();b>0&&(da("pruning buffer: "+b+" seconds."),Ca=!0,ha.remove(wa,0,Math.round(a+b),sa))}}function K(a){if(!wa)return null;var b=Ea.getTime(),c=Fa.getFragmentModel().getRequests({state:g["default"].FRAGMENT_MODEL_EXECUTED,time:b,threshold:a})[0],d=ha.getBufferRange(wa,b),e=c&&!isNaN(c.startTime)?c.startTime:Math.floor(b);return null===d&&wa.buffered.length>0&&(e=wa.buffered.end(wa.buffered.length-1)),{start:wa.buffered.start(0),end:e}}function L(a){a&&wa&&ha.remove(wa,a.start,a.end,sa)}function M(a){wa===a.buffer&&(Ca&&(Ca=!1),v(),ea.trigger(u["default"].BUFFER_CLEARED,{sender:na,from:a.from,to:a.to,hasEnoughSpaceToAppend:I()}))}function N(a){wa&&wa.timestampOffset!==a&&!isNaN(a)&&(wa.timestampOffset=a)}function O(a){a.sender.getStreamProcessor()!==Fa||a.error||N(a.currentRepresentation.MSETimeOffset)}function P(a){a.fragmentModel===Fa.getFragmentModel()&&(ua=a.request.index,y())}function Q(a){wa&&a.newMediaInfo.type===va&&a.newMediaInfo.streamInfo.id===Fa.getStreamInfo().id&&ka.getSwitchMode(va)===q["default"].TRACK_SWITCH_MODE_ALWAYS_REPLACE&&L(K(0))}function R(){za++;var a=za*(Ia.getWallclockTimeUpdateInterval()/1e3);a>=Ia.getBufferPruningInterval()&&!Ba&&(za=0,J())}function S(){z()}function T(){return va}function U(){return Fa}function V(a){Fa=a}function W(){return wa}function X(a){wa=a}function Y(){return qa}function Z(){return ra}function $(a){sa=a}function _(){return sa}function aa(){return pa}function ba(a){ea.off(u["default"].DATA_UPDATE_COMPLETED,O,this),ea.off(u["default"].QUALITY_CHANGE_REQUESTED,p,this),ea.off(u["default"].INIT_FRAGMENT_LOADED,f,this),ea.off(u["default"].MEDIA_FRAGMENT_LOADED,j,this),ea.off(u["default"].STREAM_COMPLETED,P,this),ea.off(u["default"].CURRENT_TRACK_CHANGED,Q,this),ea.off(u["default"].PLAYBACK_PROGRESS,t,this),ea.off(u["default"].PLAYBACK_TIME_UPDATED,t,this),ea.off(u["default"].PLAYBACK_RATE_CHANGED,S,this),
ea.off(u["default"].PLAYBACK_SEEKING,r,this),ea.off(u["default"].WALLCLOCK_TIME_UPDATED,R,this),ea.off(u["default"].SOURCEBUFFER_APPEND_COMPLETED,n,this),ea.off(u["default"].SOURCEBUFFER_REMOVE_COMPLETED,M,this),ra=Number.POSITIVE_INFINITY,xa=E,oa=m["default"].QUALITY_DEFAULT,ua=Number.POSITIVE_INFINITY,ta=0,ya=null,Aa=!1,pa=!1,Ba=!1,Ca=!1,Ea=null,Fa=null,Ga=null,Ha=null,a||(ha.abort(sa,wa),ha.removeSourceBuffer(sa,wa)),wa=null}var ca=this.context,da=A["default"](ca).getInstance().log,ea=s["default"](ca).getInstance(),fa=a.metricsModel,ga=a.manifestModel,ha=a.sourceBufferController,ia=a.errHandler,ja=a.streamController,ka=a.mediaController,la=a.adapter,ma=a.textController,na=void 0,oa=void 0,pa=void 0,qa=void 0,ra=void 0,sa=void 0,ta=void 0,ua=void 0,va=void 0,wa=void 0,xa=void 0,ya=void 0,za=void 0,Aa=void 0,Ba=void 0,Ca=void 0,Da=void 0,Ea=void 0,Fa=void 0,Ga=void 0,Ha=void 0,Ia=void 0,Ja=void 0;return na={initialize:c,createBuffer:d,getType:T,getStreamProcessor:U,setStreamProcessor:V,getBuffer:W,setBuffer:X,getBufferLevel:Y,getCriticalBufferLevel:Z,setMediaSource:$,getMediaSource:_,getIsBufferingCompleted:aa,switchInitData:h,reset:ba},b(),na}Object.defineProperty(c,"__esModule",{value:!0});var f=a(97),g=d(f),h=a(99),i=d(h),j=a(69),k=d(j),l=a(59),m=d(l),n=a(67),o=d(n),p=a(65),q=d(p),r=a(9),s=d(r),t=a(13),u=d(t),v=a(147),w=d(v),x=a(10),y=d(x),z=a(8),A=d(z),B=a(153),C=d(B),D="bufferLoaded",E="bufferStalled",F=.5;e.__dashjs_factory_name="BufferController";var G=y["default"].getClassFactory(e);G.BUFFER_LOADED=D,G.BUFFER_EMPTY=E,c["default"]=G,b.exports=c["default"]},{10:10,13:13,147:147,153:153,59:59,65:65,67:67,69:69,8:8,9:9,97:97,99:99}],63:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){D=!1,u={},v={},w={},x=null,y=100,z=y/1e3,C=g["default"](q).getInstance()}function b(){null!==x&&D&&(clearInterval(x),x=null,D=!1)}function c(){r("Start Event Controller"),D||isNaN(y)||(D=!0,x=setInterval(h,y))}function d(a){if(u={},a)for(var b=0;b<a.length;b++){var c=a[b];u[c.id]=c,r("Add inline event with id "+c.id)}r("Added "+a.length+" inline events")}function e(a){for(var b=0;b<a.length;b++){var c=a[b];c.id in v?r("Repeated event with id "+c.id):(v[c.id]=c,r("Add inband event with id "+c.id))}}function f(){if(w)for(var a=C.getTime(),b=Object.keys(w),c=0;c<b.length;c++){var d=b[c],e=w[d];null!==e&&(e.duration+e.presentationTime)/e.eventStream.timescale<a&&(r("Remove Event "+d+" at time "+a),e=null,delete w[d])}}function h(){j(v),j(u),f()}function i(){var a=A.getValue(),b=a.url;a.hasOwnProperty("Location")&&(b=a.Location),r("Refresh manifest @ "+b),B.getManifestLoader().load(b)}function j(a){var b,c=C.getTime();if(a)for(var d=Object.keys(a),e=0;e<d.length;e++){var f=d[e],g=a[f];void 0!==g&&(b=g.presentationTime/g.eventStream.timescale,(0===b||c>=b&&b+z>c)&&(r("Start Event "+f+" at "+c),g.duration>0&&(w[f]=g),g.eventStream.schemeIdUri==o&&g.eventStream.value==p?i():s.trigger(g.eventStream.schemeIdUri,{event:g}),delete a[f]))}}function l(a){a&&(a.manifestModel&&(A=a.manifestModel),a.manifestUpdater&&(B=a.manifestUpdater))}function n(){b(),u=null,v=null,w=null,C=null}var o="urn:mpeg:dash:event:2012",p=1,q=this.context,r=k["default"](q).getInstance().log,s=m["default"](q).getInstance(),t=void 0,u=void 0,v=void 0,w=void 0,x=void 0,y=void 0,z=void 0,A=void 0,B=void 0,C=void 0,D=void 0;return t={initialize:a,addInlineEvents:d,addInbandEvents:e,clear:b,start:c,setConfig:l,reset:n}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(67),g=d(f),h=a(10),i=d(h),j=a(8),k=d(j),l=a(9),m=d(l);e.__dashjs_factory_name="EventController",c["default"]=i["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,67:67,8:8,9:9}],64:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){q={},m.on(p["default"].FRAGMENT_LOADING_COMPLETED,g,o)}function b(a){var b=q[a];return b||(b=j["default"](i).create({metricsModel:l["default"](i).getInstance()}),q[a]=b),b}function c(a){return a&&a.type&&a.type===f.HTTPRequest.INIT_SEGMENT_TYPE}function d(){m.off(p["default"].FRAGMENT_LOADING_COMPLETED,g,this);for(var a in q)q[a].reset();q={}}function e(a,b,c){var d=new h["default"];return d.streamId=c,d.mediaInfo=b.mediaInfo,d.segmentType=b.type,d.start=b.startTime,d.duration=b.duration,d.end=d.start+d.duration,d.bytes=a,d.index=b.index,d.quality=b.quality,d.representationId=b.representationId,d}function g(a){if(q[a.request.mediaType]===a.sender){var b=a.request,d=a.response,f=c(b),g=b.mediaInfo.streamInfo;if(!d||!g)return void k("No "+b.mediaType+" bytes to push or stream is inactive.");var h=e(d,b,g.id);m.trigger(f?p["default"].INIT_FRAGMENT_LOADED:p["default"].MEDIA_FRAGMENT_LOADED,{chunk:h,fragmentModel:a.sender})}}var i=this.context,k=t["default"](i).getInstance().log,m=n["default"](i).getInstance(),o=void 0,q=void 0;return o={getModel:b,isInitializationRequest:c,reset:d},a(),o}Object.defineProperty(c,"__esModule",{value:!0});var f=a(182),g=a(164),h=d(g),i=a(97),j=d(i),k=a(100),l=d(k),m=a(9),n=d(m),o=a(13),p=d(o),q=a(10),r=d(q),s=a(8),t=d(s);e.__dashjs_factory_name="FragmentController",c["default"]=r["default"].getClassFactory(e),b.exports=c["default"]},{10:10,100:100,13:13,164:164,182:182,8:8,9:9,97:97}],65:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){N={},E(),D()}function b(a,b){var c=k(a),e=d(a,b),f=[];return"fragmentedText"===a?void h(e[0]):(c||(c=L.getSavedMediaSettings(a),j(a,c)),void(e&&0!==e.length&&(c&&e.forEach(function(a){C(c,a)&&f.push(a)}),h(0===f.length?F(e):f.length>1?F(f):f[0]))))}function c(a){var b=a?a.type:null,c=a?a.streamInfo.id:null,d=k(b);return!(!a||!x(b)||(N[c]=N[c]||G(),N[c][b].list.indexOf(a)>=0||(N[c][b].list.push(a),d&&C(d,a)&&!e(b,a.streamInfo)&&h(a),0)))}function d(a,b){if(!a||!b)return[];var c=b.id;return N[c]&&N[c][a]?N[c][a].list:[]}function e(a,b){return!a||!b||b&&!N[b.id]?null:N[b.id][a].current}function f(a){var b=a.type,c=a.streamInfo.id;return N[c]&&N[c][b]&&y(N[c][b].current,a)}function h(a){if(a){var b=a.type,c=a.streamInfo,d=c.id,f=e(b,c);if(N[d]&&N[d][b]&&(!f||!y(a,f))){N[d][b].current=a,f&&J.trigger(g["default"].CURRENT_TRACK_CHANGED,{oldMediaInfo:f,newMediaInfo:a,switchMode:Q[b]});var h=B(a);h&&N[d][b].storeLastSettings&&(h.roles&&(h.role=h.roles[0],delete h.roles),h.accessibility&&(h.accessibility=h.accessibility[0]),h.audioChannelConfiguration&&(h.audioChannelConfiguration=h.audioChannelConfiguration[0]),L.setSavedMediaSettings(b,h))}}}function j(a,b){a&&b&&(O[a]=b)}function k(a){return a?O[a]:null}function l(a,b){var c=-1!==S.indexOf(b);return c?void(Q[a]=b):void I("track switch mode is not supported: "+b)}function n(a){return Q[a]}function p(a){var b=-1!==T.indexOf(a);return b?void(P=a):void I("track selection mode is not supported: "+a)}function w(){return P||v}function x(a){return"audio"===a||"video"===a||"text"===a||"fragmentedText"===a}function y(a,b){var c=a.id===b.id,d=a.viewpoint===b.viewpoint,e=a.lang===b.lang,f=a.roles.toString()===b.roles.toString(),g=a.accessibility.toString()===b.accessibility.toString(),h=a.audioChannelConfiguration.toString()===b.audioChannelConfiguration.toString();return c&&d&&e&&f&&g&&h}function z(a){a&&a.errHandler&&(R=a.errHandler)}function A(){a(),K.reset()}function B(a){var b={lang:a.lang,viewpoint:a.viewpoint,roles:a.roles,accessibility:a.accessibility,audioChannelConfiguration:a.audioChannelConfiguration},c=b.lang||b.viewpoint||b.role&&b.role.length>0||b.accessibility&&b.accessibility.length>0||b.audioChannelConfiguration&&b.audioChannelConfiguration.length>0;return c?b:null}function C(a,b){var c=!a.lang||a.lang===b.lang,d=!a.viewpoint||a.viewpoint===b.viewpoint,e=!a.role||!!b.roles.filter(function(b){return b===a.role})[0],f=!a.accessibility||!!b.accessibility.filter(function(b){return b===a.accessibility})[0],g=!a.audioChannelConfiguration||!!b.audioChannelConfiguration.filter(function(b){return b===a.audioChannelConfiguration})[0];return c&&d&&e&&f&&g}function D(){Q={audio:s,video:r}}function E(){O={audio:null,video:null}}function F(a){var b=w(),c=[],d=function(a){var b,c=0,d=[];return a.forEach(function(a){b=Math.max.apply(Math,a.bitrateList.map(function(a){return a.bandwidth})),b>c?(c=b,d=[a]):b===c&&d.push(a)}),d},e=function(a){var b,c=0,d=[];return a.forEach(function(a){b=a.representationCount,b>c?(c=b,d=[a]):b===c&&d.push(a)}),d};switch(b){case t:c=d(a),c.length>1&&(c=e(c));break;case u:c=e(a),c.length>1&&(c=d(a));break;default:I("track selection mode is not supported: "+b)}return c[0]}function G(){return{audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null}}}var H=this.context,I=m["default"](H).getInstance().log,J=i["default"](H).getInstance(),K=o["default"](H).getInstance(),L=q["default"](H).getInstance(),M=void 0,N=void 0,O=void 0,P=void 0,Q=void 0,R=void 0,S=[s,r],T=[t,u];return M={initialize:a,checkInitialMediaSettingsForType:b,addTrack:c,getTracksFor:d,getCurrentTrackFor:e,isCurrentTrack:f,setTrack:h,setInitialSettings:j,getInitialSettings:k,setSwitchMode:l,getSwitchMode:n,setSelectionModeForInitialTrack:p,getSelectionModeForInitialTrack:w,isMultiTrackSupportedByType:x,isTracksEqual:y,setConfig:z,reset:A}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(13),g=d(f),h=a(9),i=d(h),j=a(10),k=d(j),l=a(8),m=d(l),n=a(143),o=d(n),p=a(150),q=d(p),r="neverReplace",s="alwaysReplace",t="highestBitrate",u="widestRange",v=t;e.__dashjs_factory_name="MediaController";var w=k["default"].getSingletonFactory(e);w.TRACK_SWITCH_MODE_NEVER_REPLACE=r,w.TRACK_SWITCH_MODE_ALWAYS_REPLACE=s,w.TRACK_SELECTION_MODE_HIGHEST_BITRATE=t,w.TRACK_SELECTION_MODE_WIDEST_RANGE=u,w.DEFAULT_INIT_TRACK_SELECTION_MODE=v,c["default"]=w,b.exports=c["default"]},{10:10,13:13,143:143,150:150,8:8,9:9}],66:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){var a="WebKitMediaSource"in window,b="MediaSource"in window;return b?new MediaSource:a?new WebKitMediaSource:null}function b(a,b){var c=window.URL.createObjectURL(a);return b.setSource(c),c}function c(a){a.setSource(null)}function d(a,b){return a.duration!=b&&(a.duration=b),a.duration}function e(a){var b=a.sourceBuffers,c=b.length,d=0;if("open"===a.readyState){for(d;c>d;d++){if(b[d].updating)return;if(0===b[d].buffered.length)return}a.endOfStream()}}var f=void 0;return f={createMediaSource:a,attachMediaSource:b,detachMediaSource:c,setDuration:d,signalEndOfStream:e}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f);e.__dashjs_factory_name="MediaSourceController",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10}],67:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){ka=0,la=NaN,ma=null,pa=null,ra=!1,na={},qa=k["default"](Z).getInstance()}function b(a){oa=a,ba=ja.getElement(),X(),pa=oa.manifestInfo.isDynamic,la=oa.start,_.on(o["default"].DATA_UPDATE_COMPLETED,H,this),_.on(o["default"].BYTES_APPENDED,V,this),_.on(o["default"].BUFFER_LEVEL_STATE_CHANGED,W,this),_.on(o["default"].PERIOD_SWITCH_STARTED,c,this),ra&&(ra=!1,h())}function c(a){!pa&&a.fromStreamInfo&&na[a.fromStreamInfo.id]&&delete na[a.fromStreamInfo.id]}function d(){var a=B(!0),b=pa?a-oa.start:0;return a+(oa.duration-b)-q()}function e(){return q()>0}function f(){return oa.id}function h(){if(ba){ba.autoplay=!0;var a=ba.play();a&&"undefined"!=typeof Promise&&a instanceof Promise&&a["catch"](function(a){"NotAllowedError"===a.name&&_.trigger(o["default"].PLAYBACK_NOT_ALLOWED),$("Caught pending play exception - continuing ("+a+")")})}else ra=!0}function j(){return ba?ba.paused:void 0}function l(){ba&&(ba.pause(),ba.autoplay=!1)}function n(){return ba?ba.seeking:void 0}function p(a){ja&&($("Requesting seek to time: "+a),ja.setCurrentTime(a))}function q(){return ba?ba.currentTime:void 0}function r(){return ba?ba.playbackRate:void 0}function t(){return ba?ba.played:void 0}function u(){return ba?ba.ended:void 0}function v(){return pa}function w(a){la=a}function x(){return la}function y(a,b){var c=ha.getMpd(ga.getValue()),d=void 0,e=10;d=qa.getUseSuggestedPresentationDelay()&&c.hasOwnProperty("suggestedPresentationDelay")?c.suggestedPresentationDelay:qa.getLiveDelay()?qa.getLiveDelay():isNaN(a)?2*oa.manifestInfo.minBufferTime:a*qa.getLiveDelayFragmentCount();var f=Math.max(b-e,b/2);return Math.min(d,f)}function z(){ja&&ba&&(_.off(o["default"].DATA_UPDATE_COMPLETED,H,this),_.off(o["default"].BUFFER_LEVEL_STATE_CHANGED,W,this),_.off(o["default"].BYTES_APPENDED,V,this),E(),Y()),ja=null,oa=null,ba=null,pa=null,a()}function A(a){a&&(a.streamController&&(ca=a.streamController),a.timelineConverter&&(da=a.timelineConverter),a.metricsModel&&(ea=a.metricsModel),a.dashMetrics&&(fa=a.dashMetrics),a.manifestModel&&(ga=a.manifestModel),a.dashManifestModel&&(ha=a.dashManifestModel),a.adapter&&(ia=a.adapter),a.videoModel&&(ja=a.videoModel))}function B(a){var b=void 0,c=i["default"](Z).getInstance().getURIFragmentData(),d=parseInt(c.s,10),e=parseInt(c.t,10),f=NaN;if(a||(f=isNaN(d)?e:d),pa)!isNaN(f)&&f>1262304e3&&(b=f-oa.manifestInfo.availableFrom.getTime()/1e3,(b>la||b<la-oa.manifestInfo.DVRWindowSize)&&(b=null)),b=b||la;else if(!isNaN(f)&&f<Math.max(oa.manifestInfo.duration,oa.duration)&&f>=0)b=f;else{var g=na[oa.id];void 0===g&&(g=ca.getActiveStreamCommonEarliestTime()),b=Math.max(g,oa.start)}return b}function C(a){var b,c=ea.getReadOnlyMetricsFor("video")||ea.getReadOnlyMetricsFor("audio"),d=fa.getCurrentDVRInfo(c),e=d?d.range:null;if(!e)return NaN;if(a>e.end)b=Math.max(e.end-2*oa.manifestInfo.minBufferTime,e.start);else{if(!(a<e.start))return a;b=e.start}return b}function D(){if(null===ma){var a=function(){U()};ma=setInterval(a,qa.getWallclockTimeUpdateInterval())}}function E(){clearInterval(ma),ma=null}function F(){var a=B(!1);a>0&&(p(a),$("Starting playback at offset: "+a))}function G(){if(!j()&&pa&&0!==ba.readyState){var a=q(),b=C(a),c=!isNaN(b)&&b!==a;c&&p(b)}}function H(a){if(!a.error){var b=ia.convertDataToTrack(ga.getValue(),a.currentRepresentation),c=b.mediaInfo.streamInfo;oa.id===c.id&&(oa=c,G())}}function I(){_.trigger(o["default"].CAN_PLAY)}function J(){$("Native video element event: play"),G(),D(),_.trigger(o["default"].PLAYBACK_STARTED,{startTime:q()})}function K(){$("Native video element event: playing"),_.trigger(o["default"].PLAYBACK_PLAYING,{playingTime:q()})}function L(){$("Native video element event: pause"),_.trigger(o["default"].PLAYBACK_PAUSED,{ended:u()})}function M(){var a=q();$("Seeking to: "+a),D(),_.trigger(o["default"].PLAYBACK_SEEKING,{seekTime:a})}function N(){$("Native video element event: seeked"),_.trigger(o["default"].PLAYBACK_SEEKED)}function O(){var a=q();a!==ka&&(ka=a,_.trigger(o["default"].PLAYBACK_TIME_UPDATED,{timeToEnd:d(),time:a}))}function P(){_.trigger(o["default"].PLAYBACK_PROGRESS)}function Q(){var a=r();$("Native video element event: ratechange: ",a),_.trigger(o["default"].PLAYBACK_RATE_CHANGED,{playbackRate:a})}function R(){$("Native video element event: loadedmetadata"),(!pa&&oa.isFirst||da.isTimeSyncCompleted())&&F(),_.trigger(o["default"].PLAYBACK_METADATA_LOADED),D()}function S(){$("Native video element event: ended"),l(),E(),_.trigger(o["default"].PLAYBACK_ENDED)}function T(a){var b=a.target||a.srcElement;_.trigger(o["default"].PLAYBACK_ERROR,{error:b.error})}function U(){_.trigger(o["default"].WALLCLOCK_TIME_UPDATED,{isDynamic:pa,time:new Date})}function V(a){var b=a.bufferedRanges;if(b&&b.length){var c=Math.max(b.start(0),oa.start),d=void 0===na[oa.id]?c:Math.max(na[oa.id],c);d!==na[oa.id]&&(!pa&&B(!0)<d&&q()<d&&p(d),na[oa.id]=d)}}function W(a){a.streamInfo.id===oa.id&&ja.setStallState(a.mediaType,a.state===g["default"].BUFFER_EMPTY)}function X(){ba.addEventListener("canplay",I),ba.addEventListener("play",J),ba.addEventListener("playing",K),ba.addEventListener("pause",L),ba.addEventListener("error",T),ba.addEventListener("seeking",M),ba.addEventListener("seeked",N),ba.addEventListener("timeupdate",O),ba.addEventListener("progress",P),ba.addEventListener("ratechange",Q),ba.addEventListener("loadedmetadata",R),ba.addEventListener("ended",S)}function Y(){ba.removeEventListener("canplay",I),ba.removeEventListener("play",J),ba.removeEventListener("playing",K),ba.removeEventListener("pause",L),ba.removeEventListener("error",T),ba.removeEventListener("seeking",M),ba.removeEventListener("seeked",N),ba.removeEventListener("timeupdate",O),ba.removeEventListener("progress",P),ba.removeEventListener("ratechange",Q),ba.removeEventListener("loadedmetadata",R),ba.removeEventListener("ended",S)}var Z=this.context,$=s["default"](Z).getInstance().log,_=m["default"](Z).getInstance(),aa=void 0,ba=void 0,ca=void 0,da=void 0,ea=void 0,fa=void 0,ga=void 0,ha=void 0,ia=void 0,ja=void 0,ka=void 0,la=void 0,ma=void 0,na=void 0,oa=void 0,pa=void 0,qa=void 0,ra=void 0;return aa={initialize:b,setConfig:A,getStreamStartTime:B,getTimeToStreamEnd:d,isPlaybackStarted:e,getStreamId:f,getTime:q,getPlaybackRate:r,getPlayedRanges:t,getEnded:u,getIsDynamic:v,setLiveStartTime:w,getLiveStartTime:x,computeLiveDelay:y,play:h,isPaused:j,pause:l,isSeeking:n,seek:p,reset:z},a(),aa}Object.defineProperty(c,"__esModule",{value:!0});var f=a(62),g=d(f),h=a(101),i=d(h),j=a(99),k=d(j),l=a(9),m=d(l),n=a(13),o=d(n),p=a(10),q=d(p),r=a(8),s=d(r);e.__dashjs_factory_name="PlaybackController",c["default"]=q["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,101:101,13:13,62:62,8:8,9:9,99:99}],68:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){ta=!0,Oa=NaN,Ma=NaN,Na={},Pa=[],ua=!0,va=null,wa=null,xa=!0,ya=!1,za=0,Ba=NaN}function c(a,b){pa=a,Fa=b,Ca=h["default"](ea).getInstance(),Da=n["default"](ea).getInstance(),Ea=j["default"](ea).getInstance(),Ga=H["default"](ea).getInstance(),Ha=Fa.getFragmentController(),Ia=Fa.getBufferController(),qa=Ha.getModel(pa),ra=Fa.isDynamic(),La=na.getScheduleWhilePaused(),Ja=p["default"](ea).create({dashMetrics:ka,metricsModel:ha,textController:t["default"](ea).getInstance()}),Ka=r["default"](ea).create({adapter:ja,sourceBufferController:x["default"](ea).getInstance(),textController:t["default"](ea).getInstance()}),la.getIsTextTrack(pa)&&ga.on(D["default"].TIMED_TEXT_REQUESTED,Q,this),ga.on(D["default"].QUALITY_CHANGE_REQUESTED,u,this),ga.on(D["default"].DATA_UPDATE_STARTED,L,this),ga.on(D["default"].DATA_UPDATE_COMPLETED,y,this),ga.on(D["default"].FRAGMENT_LOADING_COMPLETED,F,this),ga.on(D["default"].STREAM_COMPLETED,E,this),ga.on(D["default"].STREAM_INITIALIZED,A,this),ga.on(D["default"].BUFFER_LEVEL_STATE_CHANGED,N,this),ga.on(D["default"].BUFFER_CLEARED,M,this),ga.on(D["default"].BYTES_APPENDED,I,this),ga.on(D["default"].INIT_REQUESTED,o,this),ga.on(D["default"].QUOTA_EXCEEDED,O,this),ga.on(D["default"].PLAYBACK_SEEKING,S,this),ga.on(D["default"].PLAYBACK_STARTED,R,this),ga.on(D["default"].PLAYBACK_RATE_CHANGED,T,this),ga.on(D["default"].PLAYBACK_TIME_UPDATED,G,this),ga.on(D["default"].URL_RESOLUTION_FAILED,P,this),ga.on(D["default"].FRAGMENT_LOADING_ABANDONED,K,this)}function d(){sa&&!Ia.getIsBufferingCompleted()&&(ca(),ua=!1,ta&&(ta=!1),m(0),fa("Schedule controller starting for "+pa))}function e(){ua||(ua=!0,clearTimeout(Aa),fa("Schedule controller stopping for "+pa))}function g(a,b){Na[b]=Na[b]||{};var c=Ea.getTopQualityIndexFor(a,b);return Na[b][a]!=c&&(fa("Top quality"+a+" index has changed from "+Na[b][a]+" to "+c),Na[b][a]=c,!0)}function i(){if(!(ua||ya||!Ia||Ca.isPaused()&&!La)){k();var a=Pa.length>0;if(a||g(sa.mediaInfo.type,Fa.getStreamInfo().id)||Ja.execute(Fa,pa,Ga.isVideoTrackPresent())){var b=function(){if(sa.quality!==Oa)Oa=sa.quality,Ia.switchInitData(Fa.getStreamInfo().id,sa.id);else{var a=Pa.shift();if(Ha.isInitializationRequest(a))Ia.switchInitData(a.mediaInfo.streamInfo.id,a.representationId);else{var b=Ka.execute(Fa,a);b?qa.executeRequest(b):(ya=!1,m(500))}}};ya=!0,a?b():(Ea.getPlaybackQuality(Fa),b())}else m(500)}}function k(){var a=1.5*sa.fragmentDuration,b=qa.getRequests({state:v["default"].FRAGMENT_MODEL_EXECUTED,time:Ca.getTime()+a,threshold:0})[0];b&&-1===Pa.indexOf(b)&&!la.getIsTextTrack(pa)&&(!Da.isCurrentTrack(b.mediaInfo)||na.getFastSwitchEnabled()&&b.quality<sa.quality&&Ia.getBufferLevel()>=a&&Ea.getAbandonmentStateFor(pa)!==j["default"].ABANDON_LOAD?(s(b),fa("Reloading outdated fragment at index: ",b.index)):b.quality>sa.quality&&V(Ca.getTime()+Ia.getBufferLevel()))}function m(a){clearTimeout(Aa),Aa=setTimeout(i,a)}function o(a){a.sender&&a.sender.getStreamProcessor()===Fa&&q(sa.quality)}function q(a){Oa=a;var b=ja.getInitRequest(Fa,a);b&&(ya=!0,qa.executeRequest(b))}function s(a){Pa.push(a)}function u(a){if(pa===a.mediaType&&Fa.getStreamInfo().id===a.streamInfo.id){if(sa=Fa.getRepresentationInfoForQuality(a.newQuality),null===sa||void 0===sa)throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");ba(new Date,f.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),ca()}}function w(a){if(Ca){var b=qa.getRequests({state:v["default"].FRAGMENT_MODEL_EXECUTED,time:Ca.getTime(),threshold:0})[0];b&&Ca.getTime()>=b.startTime&&(b.quality!==Ma&&a&&ga.trigger(D["default"].QUALITY_CHANGE_RENDERED,{mediaType:pa,oldQuality:Ma,newQuality:b.quality}),Ma=b.quality)}}function y(a){a.error||a.sender.getStreamProcessor()!==Fa||(sa=ja.convertDataToTrack(ia.getValue(),a.currentRepresentation))}function A(a){a.error||Fa.getStreamInfo().id!==a.streamInfo.id||(sa=Fa.getCurrentRepresentationInfo(),ra&&ta&&(ma.setTimeSyncCompleted(!0),C()),ua&&d())}function C(){var a=z["default"](ea).getInstance().getLiveEdge(),b=sa.mediaInfo.streamInfo.manifestInfo.DVRWindowSize/2,c=a-Ca.computeLiveDelay(sa.fragmentDuration,b),d=ja.getFragmentRequestForTime(Fa,sa,c,{ignoreIsFinished:!0});Ba=Ca.getLiveStartTime(),(isNaN(Ba)||d.startTime>Ba)&&(Ca.setLiveStartTime(d.startTime),Ba=d.startTime);var e=ka.getCurrentManifestUpdate(ha.getMetricsFor("stream"));ha.updateManifestUpdateInfo(e,{currentTime:Ba,presentationStartTime:a,latency:a-Ba,clientTimeOffset:ma.getClientTimeOffset()})}function E(a){a.fragmentModel===qa&&(e(),ya=!1,fa("Stream is complete"))}function F(a){a.sender===qa&&(la.getIsTextTrack(pa)&&(ya=!1),a.error&&a.request.serviceLocation&&!ua&&(s(a.request),ya=!1,m(0)))}function G(){w(!0)}function I(a){a.sender.getStreamProcessor()===Fa&&(ya=!1,m(0))}function K(a){a.streamProcessor===Fa&&(s(a.request),ya=!1,m(0))}function L(a){a.sender.getStreamProcessor()===Fa&&e()}function M(a){a.sender.getStreamProcessor()===Fa&&(qa.removeExecutedRequestsBeforeTime(a.to),a.hasEnoughSpaceToAppend&&ua&&d())}function N(a){a.sender.getStreamProcessor()!==Fa||a.state!==l["default"].BUFFER_EMPTY||Ca.isSeeking()||(fa("Buffer is empty! Stalling!"),ba(new Date,f.PlayListTrace.REBUFFERING_REASON))}function O(a){a.sender.getStreamProcessor()===Fa&&e()}function P(){qa.abortRequests(),e()}function Q(a){a.sender.getStreamProcessor()===Fa&&q(a.index)}function R(){!ua&&La||d()}function S(a){Ba=a.seekTime,X(0),ua&&d();var b=ka.getCurrentManifestUpdate(ha.getMetricsFor("stream")),c=sa.DVRWindow?sa.DVRWindow.end-Ca.getTime():NaN;ha.updateManifestUpdateInfo(b,{latency:c})}function T(a){wa&&(wa.playbackspeed=a.playbackRate.toString())}function U(){return Ba}function V(a){Ba=a}function W(){return qa}function X(a){za=a}function Y(){return za}function Z(){return Fa}function $(){return Ja.getBufferTarget(Fa,pa,Ga.isVideoTrackPresent())}function _(a){va=a}function aa(a,b){ba(a,b),va=null}function ba(a,b){if(va&&xa===!1){var c=wa.start,d=a.getTime()-c.getTime();wa.duration=d,wa.stopreason=b,va.trace.push(wa),xa=!0}}function ca(){va&&xa===!0&&sa&&(xa=!1,wa=new f.PlayListTrace,wa.representationid=sa.id,wa.start=new Date,wa.mstart=1e3*Ca.getTime(),wa.playbackspeed=Ca.getPlaybackRate().toString())}function da(){ga.off(D["default"].DATA_UPDATE_STARTED,L,this),ga.off(D["default"].DATA_UPDATE_COMPLETED,y,this),ga.off(D["default"].BUFFER_LEVEL_STATE_CHANGED,N,this),ga.off(D["default"].QUALITY_CHANGE_REQUESTED,u,this),ga.off(D["default"].FRAGMENT_LOADING_COMPLETED,F,this),ga.off(D["default"].STREAM_COMPLETED,E,this),ga.off(D["default"].STREAM_INITIALIZED,A,this),ga.off(D["default"].QUOTA_EXCEEDED,O,this),ga.off(D["default"].BYTES_APPENDED,I,this),ga.off(D["default"].BUFFER_CLEARED,M,this),ga.off(D["default"].INIT_REQUESTED,o,this),ga.off(D["default"].PLAYBACK_RATE_CHANGED,T,this),ga.off(D["default"].PLAYBACK_SEEKING,S,this),ga.off(D["default"].PLAYBACK_STARTED,R,this),ga.off(D["default"].PLAYBACK_TIME_UPDATED,G,this),ga.off(D["default"].URL_RESOLUTION_FAILED,P,this),ga.off(D["default"].FRAGMENT_LOADING_ABANDONED,K,this),la.getIsTextTrack(pa)&&ga.off(D["default"].TIMED_TEXT_REQUESTED,Q,this),e(),w(!1),ya=!1,za=0,Ba=NaN,Ca=null,va=null}var ea=this.context,fa=J["default"](ea).getInstance().log,ga=B["default"](ea).getInstance(),ha=a.metricsModel,ia=a.manifestModel,ja=a.adapter,ka=a.dashMetrics,la=a.dashManifestModel,ma=a.timelineConverter,na=a.mediaPlayerModel,oa=void 0,pa=void 0,qa=void 0,ra=void 0,sa=void 0,ta=void 0,ua=void 0,va=void 0,wa=void 0,xa=void 0,ya=void 0,za=void 0,Aa=void 0,Ba=void 0,Ca=void 0,Da=void 0,Ea=void 0,Fa=void 0,Ga=void 0,Ha=void 0,Ia=void 0,Ja=void 0,Ka=void 0,La=void 0,Ma=void 0,Na=void 0,Oa=void 0,Pa=void 0;return oa={initialize:c,getStreamProcessor:Z,getSeekTarget:U,setSeekTarget:V,getFragmentModel:W,setTimeToLoadDelay:X,getTimeToLoadDelay:Y,replaceRequest:s,start:d,stop:e,reset:da,setPlayList:_,getBufferTarget:$,finalisePlayList:aa},b(),oa}Object.defineProperty(c,"__esModule",{value:!0});var f=a(184),g=a(67),h=d(g),i=a(59),j=d(i),k=a(62),l=d(k),m=a(65),n=d(m),o=a(138),p=d(o),q=a(139),r=d(q),s=a(143),t=d(s),u=a(97),v=d(u),w=a(69),x=d(w),y=a(155),z=d(y),A=a(9),B=d(A),C=a(13),D=d(C),E=a(10),F=d(E),G=a(70),H=d(G),I=a(8),J=d(I);e.__dashjs_factory_name="ScheduleController",c["default"]=F["default"].getClassFactory(e),b.exports=c["default"]},{10:10,13:13,138:138,139:139,143:143,155:155,184:184,59:59,62:62,65:65,67:67,69:69,70:70,8:8,9:9,97:97}],69:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b){var c=b.codec,d=null;try{if(c.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new i["default"]("not really supported");d=a.addSourceBuffer(c)}catch(e){if(!b.isText&&-1===c.indexOf('codecs="stpp')&&-1===c.indexOf('codecs="wvtt'))throw e;var f=g["default"](q).getInstance();d=f.getTextSourceBuffer()}return d}function b(a,b){try{a.removeSourceBuffer(b)}catch(c){}}function c(a,b,c){var d,e,f=null,g=0,h=0,i=null,j=null,k=0,l=c||.15;try{f=a.buffered}catch(m){return null}if(null!==f&&void 0!==f){for(e=0,d=f.length;d>e;e++)if(g=f.start(e),h=f.end(e),null===i)k=Math.abs(g-b),b>=g&&h>b?(i=g,j=h):l>=k&&(i=g,j=h);else{if(k=g-j,!(l>=k))break;j=h}if(null!==i)return{start:i,end:j}}return null}function d(a){var b=null;try{return b=a.buffered}catch(c){return null}}function e(a){var b,c,e=d(a),f=0;if(!e)return f;for(c=0,b=e.length;b>c;c++)f+=e.end(c)-e.start(c);return f}function f(a,b,d){var e,f;return e=c(a,b,d),f=null===e?0:e.end-b}function h(a,b){if(!b)return null;var c,e,f,g,h,i,j,k,l,m=d(b);if(!m)return null;for(var n=0,o=m.length;o>n;n++){if(k=a.length>n,h=k?{start:a.start(n),end:a.end(n)}:null,c=m.start(n),e=m.end(n),!h)return l={start:c,end:e};if(f=h.start===c,g=h.end===e,!f||!g){if(f)l={start:h.end,end:e};else{if(!g)return l={start:c,end:e};l={start:c,end:h.start}}return i=a.length>n+1?{start:a.start(n+1),end:a.end(n+1)}:null,j=o>n+1?{start:m.start(n+1),end:m.end(n+1)}:null,!i||j&&j.start===i.start&&j.end===i.end||(l.end=i.start),l}}return null}function j(a,b){var c=b.bytes,d="append"in a?"append":"appendBuffer"in a?"appendBuffer":null,e="Object"===Object.prototype.toString.call(a).slice(8,-1);d&&p(a,function(){try{e?a[d](c,b):a[d](c),p(a,function(){r.trigger(m["default"].SOURCEBUFFER_APPEND_COMPLETED,{buffer:a,bytes:c})})}catch(f){r.trigger(m["default"].SOURCEBUFFER_APPEND_COMPLETED,{buffer:a,bytes:c,error:new i["default"](f.code,f.message,null)})}})}function l(a,b,c,d){p(a,function(){try{b>=0&&c>b&&"ended"!==d.readyState&&a.remove(b,c),p(a,function(){r.trigger(m["default"].SOURCEBUFFER_REMOVE_COMPLETED,{buffer:a,from:b,to:c})})}catch(e){r.trigger(m["default"].SOURCEBUFFER_REMOVE_COMPLETED,{buffer:a,from:b,to:c,error:new i["default"](e.code,e.message,null)})}})}function n(a,b){try{"open"===a.readyState?b.abort():b.setTextTrack&&"ended"===a.readyState&&b.abort()}catch(c){}}function o(a){a&&a.dashManifestModel&&(t=a.dashManifestModel)}function p(a,b){var c,d=50,e=function(){a.updating||(clearInterval(c),b())},f=function h(){a.updating||(a.removeEventListener("updateend",h,!1),b())};if(!a.updating)return void b();if("function"==typeof a.addEventListener)try{a.addEventListener("updateend",f,!1)}catch(g){c=setInterval(e,d)}else c=setInterval(e,d)}var q=this.context,r=k["default"](q).getInstance(),s=void 0,t=void 0;return s={append:j,remove:l,abort:n,createSourceBuffer:a,removeSourceBuffer:b,getBufferRange:c,getAllRanges:d,getTotalBufferedTime:e,getBufferLength:f,getRangeDifference:h,setConfig:o}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(143),g=d(f),h=a(165),i=d(h),j=a(9),k=d(j),l=a(13),m=d(l),n=a(10),o=d(n),p=22;e.__dashjs_factory_name="SourceBufferController";var q=o["default"].getSingletonFactory(e);q.QUOTA_EXCEEDED_ERROR_CODE=p,c["default"]=q,b.exports=c["default"]},{10:10,13:13,143:143,165:165,9:9}],70:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){ma=null,ka=[],wa=u["default"](T).getInstance(),oa=!0,pa=!1,qa=!1,xa=!1,ya=!0,za=null,ra=!1,sa=!1}function b(a,b){oa=a,na=b,ja.initialize(),ha=B["default"](T).getInstance(),Y=k["default"](T).getInstance(),Y.setConfig({manifestModel:$,dashManifestModel:_}),Y.initialize(Z),ua=s["default"](T).getInstance(),va=g["default"](T).getInstance(),va.setConfig({streamController:W,timelineConverter:ja,metricsModel:ba,dashMetrics:ca,manifestModel:$,dashManifestModel:_,adapter:aa,videoModel:ua}),V.on(o["default"].TIME_SYNCHRONIZATION_COMPLETED,D,this),V.on(o["default"].PLAYBACK_SEEKING,d,this),V.on(o["default"].PLAYBACK_TIME_UPDATED,c,this),V.on(o["default"].PLAYBACK_ENDED,p,this),V.on(o["default"].PLAYBACK_ERROR,J,this),V.on(o["default"].PLAYBACK_STARTED,e,this),V.on(o["default"].PLAYBACK_PAUSED,f,this),V.on(o["default"].MANIFEST_UPDATED,E,this),V.on(o["default"].STREAM_BUFFERING_COMPLETED,h,this)}function c(a){if(F()){var b=ua.getPlaybackQuality();b&&ba.addDroppedFrames("video",b)}va.isSeeking()||a.timeToEnd<=S&&p()}function d(a){var b=j(a.seekTime);b&&b!==la?(H(x.PlayListTrace.END_OF_PERIOD_STOP_REASON),t(la,b,a.seekTime)):H(x.PlayListTrace.USER_REQUEST_STOP_REASON),I(x.PlayList.SEEK_START_REASON)}function e(){ya?(ya=!1,I(x.PlayList.INITIAL_PLAYOUT_START_REASON)):xa&&(xa=!1,I(x.PlayList.RESUME_FROM_PAUSE_START_REASON))}function f(a){a.ended||(xa=!0,H(x.PlayListTrace.USER_REQUEST_STOP_REASON))}function h(){var a=L().isLast;ta&&a&&ea.signalEndOfStream(ta)}function j(a){var b=0,c=null,d=ka.length;d>0&&(b+=ka[0].getStartTime());for(var e=0;d>e;e++)if(c=ka[e],b+=c.getDuration(),b>a)return c;return null}function l(a,b){for(var c=null,d=0,e=0,f=null,g=ka.length,h=0;g>h;h++){if(c=ka[h],e=c.getStartTime(),f=c.getDuration(),Number.isFinite(e)&&(d=e),c.getId()===b)return a-d;Number.isFinite(f)&&(d+=f)}return null}function n(){var a=[];return la.getProcessors().forEach(function(b){a.push(b.getIndexHandler().getEarliestTime())}),Math.min.apply(Math,a)}function p(){var a=r();a&&t(la,a,NaN),H(a?x.PlayListTrace.END_OF_PERIOD_STOP_REASON:x.PlayListTrace.END_OF_CONTENT_STOP_REASON)}function r(){if(la){var a=function(){var a=la.getStreamInfo().start,b=la.getStreamInfo().duration;return{v:ka.filter(function(c){return c.getStreamInfo().start===a+b})[0]}}();if("object"==typeof a)return a.v}}function t(a,b,c){!pa&&b&&a!==b&&(pa=!0,V.trigger(o["default"].PERIOD_SWITCH_STARTED,{
fromStreamInfo:a?a.getStreamInfo():null,toStreamInfo:b.getStreamInfo()}),a&&a.deactivate(),la=b,va.initialize(la.getStreamInfo()),v(c))}function v(a){function b(){U("MediaSource is open!"),window.URL.revokeObjectURL(c),ta.removeEventListener("sourceopen",b),ta.removeEventListener("webkitsourceopen",b),y(),w(a)}var c=void 0;ta?ea.detachMediaSource(ua):ta=ea.createMediaSource(),ta.addEventListener("sourceopen",b,!1),ta.addEventListener("webkitsourceopen",b,!1),c=ea.attachMediaSource(ta,ua),U("MediaSource attached to element.  Waiting on open...")}function w(a){la.activate(ta),ya?Aa=G():isNaN(a)?!function(){var a=va.getStreamStartTime(!0);la.getProcessors().forEach(function(b){aa.setIndexHandlerTime(b,a)}),va.seek(a)}():va.seek(a),la.startEventController(),!oa&&ya||va.play(),pa=!1,V.trigger(o["default"].PERIOD_SWITCH_COMPLETED,{toStreamInfo:la.getStreamInfo()})}function y(){var a=la.getStreamInfo().manifestInfo.duration,b=ea.setDuration(ta,a);U("Duration successfully set to: "+b)}function A(a){for(var b=0,c=ka.length;c>b;b++)if(ka[b].getId()===a.id)return ka[b];return null}function C(a){try{var b=aa.getStreamsInfo(a);if(0===b.length)throw new Error("There are no streams");var c=ca.getCurrentManifestUpdate(ba.getMetricsFor("stream"));ba.updateManifestUpdateInfo(c,{currentTime:va.getTime(),buffered:ua.getElement().buffered,presentationStartTime:b[0].start,clientTimeOffset:ja.getClientTimeOffset()});for(var d=0,e=b.length;e>d;d++){var f=b[d],g=A(f);g?g.updateData(f):(g=i["default"](T).create({manifestModel:$,manifestUpdater:Y,adapter:aa,timelineConverter:ja,capabilities:X,errHandler:ia,baseURLController:ga}),ka.push(g),g.initialize(f,ma)),ba.addManifestUpdateStreamInfo(c,f.id,f.index,f.start,f.duration)}la||t(null,ka[0],NaN),V.trigger(o["default"].STREAMS_COMPOSED)}catch(h){ia.manifestError(h.message,"nostreamscomposed",a),sa=!0,R()}}function D(){var a=$.getValue();ma&&(V.trigger(o["default"].PROTECTION_CREATED,{controller:ma,manifest:a}),ma.setMediaElement(ua.getElement()),na&&ma.setProtectionData(na)),C(a)}function E(a){if(a.error)sa=!0,R();else{var b,c,d=a.manifest,e=aa.getStreamsInfo(d)[0],f=aa.getMediaInfoForType(d,e,"video")||aa.getMediaInfoForType(d,e,"audio");f&&(b=aa.getDataForMedia(f),c=_.getRepresentationsForAdaptation(d,b)[0].useCalculatedLiveEdgeTime,c&&(U("SegmentTimeline detected using calculated Live Edge Time"),wa.setUseManifestDateHeaderTimeSource(!1)));var g=_.getUTCTimingSources(a.manifest),h=!_.getIsDynamic(d)||c?g:g.concat(wa.getUTCTimingSources()),i=q["default"](T).getInstance().isManifestHTTPS();h.forEach(function(a){a.value.replace(/.*?:\/\//g,"")===u["default"].DEFAULT_UTC_TIMING_SOURCE.value.replace(/.*?:\/\//g,"")&&(a.value=a.value.replace(i?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),i?"https://":"http://"),U("Matching default timing source protocol to manifest protocol: ",a.value))}),ga.initialize(d),fa.setConfig({metricsModel:ba,dashMetrics:ca}),fa.initialize(h,wa.getUseManifestDateHeaderTimeSource())}}function F(){return void 0===Aa&&(Aa=G()),Aa}function G(){var a=!1;return la.getProcessors().forEach(function(b){"video"===b.getMediaInfo().type&&(a=!0)}),a}function H(a,b){b=b||new Date,za&&(la&&la.getProcessors().forEach(function(c){var d=c.getScheduleController();d&&d.finalisePlayList(b,a)}),ba.addPlayList(za),za=null)}function I(a){za=new x.PlayList,za.start=new Date,za.mstart=1e3*va.getTime(),za.starttype=a,la&&la.getProcessors().forEach(function(a){var b=a.getScheduleController();b&&b.setPlayList(za)})}function J(a){if(a.error){var b="";switch(a.error.code){case 1:b="MEDIA_ERR_ABORTED";break;case 2:b="MEDIA_ERR_NETWORK";break;case 3:b="MEDIA_ERR_DECODE";break;case 4:b="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:b="MEDIA_ERR_ENCRYPTED";break;default:b="UNKNOWN"}ra=!0,a.error.message&&(b+=" ("+a.error.message+")"),a.error.msExtendedCode&&(b+=" (0x"+(a.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),U("Video Element Error: "+b),a.error&&U(a.error),ia.mediaSourceError(b),R()}}function K(){return oa}function L(){return la?la.getStreamInfo():null}function M(a){return la.getId()===a.id}function N(a){return ka.filter(function(b){return b.getId()===a})[0]}function O(a){Z.load(a)}function P(a){Y.setManifest(a)}function Q(a){a&&(a.capabilities&&(X=a.capabilities),a.manifestLoader&&(Z=a.manifestLoader),a.manifestModel&&($=a.manifestModel),a.dashManifestModel&&(_=a.dashManifestModel),a.protectionController&&(ma=a.protectionController),a.adapter&&(aa=a.adapter),a.metricsModel&&(ba=a.metricsModel),a.dashMetrics&&(ca=a.dashMetrics),a.liveEdgeFinder&&(da=a.liveEdgeFinder),a.mediaSourceController&&(ea=a.mediaSourceController),a.timeSyncController&&(fa=a.timeSyncController),a.baseURLController&&(ga=a.baseURLController),a.errHandler&&(ia=a.errHandler),a.timelineConverter&&(ja=a.timelineConverter))}function R(){fa.reset(),H(ra||sa?x.PlayListTrace.FAILURE_STOP_REASON:x.PlayListTrace.USER_REQUEST_STOP_REASON);for(var a=0,b=ka.length;b>a;a++){var g=ka[a];g.reset(ra)}ka=[],V.off(o["default"].PLAYBACK_TIME_UPDATED,c,this),V.off(o["default"].PLAYBACK_SEEKING,d,this),V.off(o["default"].PLAYBACK_ERROR,J,this),V.off(o["default"].PLAYBACK_STARTED,e,this),V.off(o["default"].PLAYBACK_PAUSED,f,this),V.off(o["default"].PLAYBACK_ENDED,p,this),V.off(o["default"].MANIFEST_UPDATED,E,this),V.off(o["default"].STREAM_BUFFERING_COMPLETED,h,this),ga.reset(),Y.reset(),ba.clearAllCurrentMetrics(),$.setValue(null),Z.reset(),ja.reset(),da.reset(),aa.reset(),ha.reset(),pa=!1,qa=!1,la=null,ra=!1,sa=!1,Aa=void 0,ya=!0,xa=!1,ta&&(ea.detachMediaSource(ua),ta=null),ua=null,ma&&(ma.setMediaElement(null),ma=null,na=null,$.getValue()&&V.trigger(o["default"].PROTECTION_DESTROYED,{data:$.getValue().url})),V.trigger(o["default"].STREAM_TEARDOWN_COMPLETE)}var S=.1,T=this.context,U=z["default"](T).getInstance().log,V=m["default"](T).getInstance(),W=void 0,X=void 0,Y=void 0,Z=void 0,$=void 0,_=void 0,aa=void 0,ba=void 0,ca=void 0,da=void 0,ea=void 0,fa=void 0,ga=void 0,ha=void 0,ia=void 0,ja=void 0,ka=void 0,la=void 0,ma=void 0,na=void 0,oa=void 0,pa=void 0,qa=void 0,ra=void 0,sa=void 0,ta=void 0,ua=void 0,va=void 0,wa=void 0,xa=void 0,ya=void 0,za=void 0,Aa=void 0;return W={initialize:b,getAutoPlay:K,getActiveStreamInfo:L,isStreamActive:M,isVideoTrackPresent:F,getStreamById:N,getTimeRelativeToStreamId:l,load:O,loadWithManifest:P,getActiveStreamCommonEarliestTime:n,setConfig:Q,reset:R},a(),W}Object.defineProperty(c,"__esModule",{value:!0});var f=a(67),g=d(f),h=a(55),i=d(h),j=a(51),k=d(j),l=a(9),m=d(l),n=a(13),o=d(n),p=a(101),q=d(p),r=a(102),s=d(r),t=a(99),u=d(t),v=a(10),w=d(v),x=a(184),y=a(8),z=d(y),A=a(153),B=d(A);e.__dashjs_factory_name="StreamController",c["default"]=w["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,101:101,102:102,13:13,153:153,184:184,51:51,55:55,67:67,8:8,9:9,99:99}],71:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b){H=b,E=0,F=!1,G=!1,I={"urn:mpeg:dash:utc:http-head:2014":v,"urn:mpeg:dash:utc:http-xsdate:2014":u.bind(null,m),"urn:mpeg:dash:utc:http-iso:2014":u.bind(null,n),"urn:mpeg:dash:utc:direct:2014":t,"urn:mpeg:dash:utc:http-head:2012":v,"urn:mpeg:dash:utc:http-xsdate:2012":u.bind(null,m),"urn:mpeg:dash:utc:http-iso:2012":u.bind(null,n),"urn:mpeg:dash:utc:direct:2012":t,"urn:mpeg:dash:utc:http-ntp:2014":s,"urn:mpeg:dash:utc:ntp:2014":s,"urn:mpeg:dash:utc:sntp:2014":s},e()||(y(a),f(!0))}function b(a){a&&(a.metricsModel&&(J=a.metricsModel),a.dashMetrics&&(K=a.dashMetrics))}function c(){return j()}function d(a){F=a}function e(){return F}function f(a){G=a}function h(a){E=a}function j(){return E}function l(a){var b,c,d=60,e=60,f=1e3,g=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/,h=g.exec(a);return b=Date.UTC(parseInt(h[1],10),parseInt(h[2],10)-1,parseInt(h[3],10),parseInt(h[4],10),parseInt(h[5],10),h[6]&&(parseInt(h[6],10)||0),h[7]&&parseFloat(h[7])*f||0),h[9]&&h[10]&&(c=parseInt(h[9],10)*e+parseInt(h[10],10),b+=("+"===h[8]?-1:1)*c*d*f),new Date(b).getTime()}function m(a){var b=Date.parse(a);return isNaN(b)&&(b=l(a)),b}function n(a){return Date.parse(a)}function r(a){return Date.parse(a)}function s(a,b,c){c()}function t(a,b,c){var d=m(a);return isNaN(d)?void c():void b(d)}function u(a,b,c,d,e){var f,g,h=!1,i=new XMLHttpRequest,j=e?"HEAD":"GET",k=b.match(/\S+/g);b=k.shift(),f=function(){h||(h=!0,k.length?u(a,k.join(" "),c,d,e):d())},g=function(){var b,d;200===i.status&&(b=e?i.getResponseHeader("Date"):i.response,d=a(b),isNaN(d)||(c(d),h=!0))},i.open(j,b),i.timeout=q||0,i.onload=g,i.onloadend=f,i.send()}function v(a,b,c){u(r,a,b,c,!0)}function w(){var a=J.getReadOnlyMetricsFor("stream"),b=K.getLatestMPDRequestHeaderValueByID(a,"Date"),c=null!==b?new Date(b).getTime():Number.NaN;isNaN(c)?x(!0):(h(c-(new Date).getTime()),x(!1,c/1e3,E))}function x(a,b,c){d(!1),C.trigger(k["default"].TIME_SYNCHRONIZATION_COMPLETED,{time:b,offset:c,error:a?new g["default"](p):null})}function y(a,b){var c=b||0,e=a[c],f=function(a,b){var c=!a||!b;c&&H?w():x(c,a,b)};d(!0),e?I.hasOwnProperty(e.schemeIdUri)?I[e.schemeIdUri](e.value,function(a){var b=(new Date).getTime(),c=a-b;h(c),B("Local time:      "+new Date(b)),B("Server time:     "+new Date(a)),B("Difference (ms): "+c),f(a,c)},function(){y(a,c+1)}):y(a,c+1):(h(0),f())}function z(){f(!1),d(!1)}var A=this.context,B=o["default"](A).getInstance().log,C=i["default"](A).getInstance(),D=void 0,E=void 0,F=void 0,G=void 0,H=void 0,I=void 0,J=void 0,K=void 0;return D={initialize:a,getOffsetToDeviceTimeMs:c,setConfig:b,reset:z}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(165),g=d(f),h=a(9),i=d(h),j=a(13),k=d(j),l=a(10),m=d(l),n=a(8),o=d(n),p=1,q=5e3;e.__dashjs_factory_name="TimeSyncController";var r=m["default"].getSingletonFactory(e);r.TIME_SYNC_FAILED_ERROR_CODE=p,r.HTTP_TIMEOUT_MS=q,c["default"]=r,b.exports=c["default"]},{10:10,13:13,165:165,8:8,9:9}],72:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){A.on(k["default"].XLINK_ELEMENT_LOADED,j,C),H=g["default"](z).create({errHandler:a.errHandler,metricsModel:a.metricsModel,requestModifier:a.requestModifier})}function c(a){D=a}function d(a){E=a}function e(a){var b;G=new o["default"]({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:D}),F=a,b=m(F.Period_asArray,F,t,r),h(b,t,r)}function f(){A.off(k["default"].XLINK_ELEMENT_LOADED,j,C),H&&(H.reset(),H=null)}function h(a,b,c){var d,e,f,g={};for(g.elements=a,g.type=b,g.resolveType=c,0===g.elements.length&&l(g),f=0;f<g.elements.length;f++)d=g.elements[f],e=B.isHTTPURL(d.url)?d.url:d.originalContent.BaseURL+d.url,H.load(e,d,g)}function j(a){var b,c,d,e="<response>",f="</response>",g="";b=a.element,c=a.resolveObject,b.resolvedContent&&(d=b.resolvedContent.indexOf(">")+1,g=b.resolvedContent.substr(0,d)+e+b.resolvedContent.substr(d)+f,b.resolvedContent=G.xml_str2json(g)),x(c)&&l(c)}function l(a){var b,c,d=[];if(n(a),a.resolveType===s&&A.trigger(k["default"].XLINK_READY,{manifest:F}),a.resolveType===r)switch(a.type){case t:for(b=0;b<F[t+"_asArray"].length;b++)c=F[t+"_asArray"][b],c.hasOwnProperty(u+"_asArray")&&(d=d.concat(m(c[u+"_asArray"],c,u,r))),c.hasOwnProperty(v+"_asArray")&&(d=d.concat(m(c[v+"_asArray"],c,v,r)));h(d,u,r);break;case u:A.trigger(k["default"].XLINK_READY,{manifest:F})}}function m(a,b,c,d){var e,f,g,h=[];for(f=a.length-1;f>=0;f--)e=a[f],e.hasOwnProperty("xlink:href")&&e["xlink:href"]===w&&a.splice(f,1);for(f=0;f<a.length;f++)e=a[f],e.hasOwnProperty("xlink:href")&&e.hasOwnProperty("xlink:actuate")&&e["xlink:actuate"]===d&&(g=p(e["xlink:href"],b,c,f,d,e),h.push(g));return h}function n(a){var b,c,d,e,f,g,h=[];for(e=a.elements.length-1;e>=0;e--){if(b=a.elements[e],c=b.type+"_asArray",!b.resolvedContent||y())delete b.originalContent["xlink:actuate"],delete b.originalContent["xlink:href"],h.push(b.originalContent);else if(b.resolvedContent)for(f=0;f<b.resolvedContent[c].length;f++)d=b.resolvedContent[c][f],h.push(d);for(b.parentElement[c].splice(b.index,1),g=0;g<h.length;g++)b.parentElement[c].splice(b.index+g,0,h[g]);h=[]}a.elements.length>0&&E.run(F)}function p(a,b,c,d,e,f){return{url:a,parentElement:b,type:c,index:d,resolveType:e,originalContent:f,resolvedContent:null,resolved:!1}}function x(a){var b,c;for(b=0;b<a.elements.length;b++)if(c=a.elements[b],c.resolved===!1)return!1;return!0}function y(){return!1}var z=this.context,A=i["default"](z).getInstance(),B=q["default"](z).getInstance(),C=void 0,D=void 0,E=void 0,F=void 0,G=void 0,H=void 0;return C={resolveManifestOnLoad:e,setMatchers:c,setIron:d,reset:f},b(),C}Object.defineProperty(c,"__esModule",{value:!0});var f=a(58),g=d(f),h=a(9),i=d(h),j=a(13),k=d(j),l=a(10),m=d(l),n=a(4),o=d(n),p=a(159),q=d(p),r="onLoad",s="onActuate",t="Period",u="AdaptationSet",v="EventStream",w="urn:mpeg:dash:resolve-to-zero:2013";e.__dashjs_factory_name="XlinkController",c["default"]=m["default"].getClassFactory(e),b.exports=c["default"]},{10:10,13:13,159:159,4:4,58:58,9:9}],73:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){return f=g["default"](d).getInstance({eventBus:a.eventBus,metricsModel:a.metricsModel}),k["default"](d).create(a)}function b(){return o["default"](d).getInstance()}function c(){return m["default"](d).getInstance()}var d=this.context,e=void 0,f=void 0;return e={createMetricsReporting:a,getReportingFactory:b,getMetricsHandlerFactory:c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(87),g=d(f),h=a(74),i=d(h),j=a(75),k=d(j),l=a(80),m=d(l),n=a(85),o=d(n),p=a(10),q=d(p);e.__dashjs_factory_name="MetricsReporting";var r=q["default"].getClassFactory(e);r.events=i["default"],c["default"]=r,b.exports=c["default"]},{10:10,74:74,75:75,80:80,85:85,87:87}],74:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(14),i=d(h),j=function(a){function b(){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer"}return f(b,a),b}(i["default"]),k=new j;c["default"]=k,b.exports=c["default"]},{14:14}],75:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(b){if(!b.error){var c=Object.keys(e),d=i["default"](f).getInstance({dashManifestModel:a.dashManifestModel}).getMetrics(b.manifest);d.forEach(function(b){var d=JSON.stringify(b);if(e.hasOwnProperty(d))c.splice(d,1);else try{var h=g["default"](f).create(a);h.initialize(b),e[d]=h}catch(i){}}),c.forEach(function(a){e[a].reset(),delete e[a]}),h.trigger(m["default"].METRICS_INITIALISATION_COMPLETE)}}function c(){Object.keys(e).forEach(function(a){e[a].reset()}),e={}}function d(){h.on(o["default"].MANIFEST_UPDATED,b),h.on(o["default"].STREAM_TEARDOWN_COMPLETE,c)}var e={},f=this.context,h=a.eventBus;return d(),{}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(76),g=d(f),h=a(89),i=d(h),j=a(10),k=d(j),l=a(74),m=d(l),n=a(13),o=d(n);e.__dashjs_factory_name="MetricsCollectionController",c["default"]=k["default"].getClassFactory(e),b.exports=c["default"]},{10:10,13:13,74:74,76:76,89:89}],76:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(b){try{f=i["default"](h).create({mediaElement:a.mediaElement}),f.initialize(b.Range),e=k["default"](h).create({log:a.log}),e.initialize(b.Reporting,f),d=m["default"](h).create({log:a.log,eventBus:a.eventBus}),d.initialize(b.metrics,e)}catch(g){throw c(),g}}function c(){d&&d.reset(),e&&e.reset(),f&&f.reset()}var d=void 0,e=void 0,f=void 0,g=void 0,h=this.context;return g={initialize:b,reset:c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(78),i=d(h),j=a(79),k=d(j),l=a(77),m=d(l);e.__dashjs_factory_name="MetricsController",c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{10:10,77:77,78:78,79:79}],77:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(a){e.forEach(function(b){b.handleNewMetric(a.metric,a.value,a.mediaType)})}function c(a,c){a.split(",").forEach(function(a,b,d){var f;if(-1!==a.indexOf("(")&&-1===a.indexOf(")")){var g=d[b+1];g&&-1===g.indexOf("(")&&-1!==g.indexOf(")")&&(a+=","+g,delete d[b+1])}f=j.create(a,c),f&&e.push(f)}),i.on(k["default"].METRIC_ADDED,b,f),i.on(k["default"].METRIC_UPDATED,b,f)}function d(){i.off(k["default"].METRIC_ADDED,b,f),i.off(k["default"].METRIC_UPDATED,b,f),e.forEach(function(a){return a.reset()}),e=[]}var e=[],f=void 0,h=this.context,i=a.eventBus,j=g["default"](h).getInstance({log:a.log,eventBus:a.eventBus});return f={initialize:c,reset:d}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(80),g=d(f),h=a(10),i=d(h),j=a(53),k=d(j);e.__dashjs_factory_name="MetricsHandlersController",c["default"]=i["default"].getClassFactory(e),b.exports=c["default"]},{10:10,53:53,80:80}],78:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(a){a&&a.length&&(a.forEach(function(a){var b=a.starttime,c=b+a.duration;j.add(b,c)}),f=!!a[0]._useWallClockTime)}function c(){j.clear()}function d(){j=i["default"](g).create()}function e(){var a,b=j.length;if(!b)return!0;a=f?(new Date).getTime()/1e3:k.currentTime;for(var c=0;b>c;c+=1){var d=j.start(c),e=j.end(c);if(a>=d&&e>a)return!0}return!1}var f=!1,g=this.context,h=void 0,j=void 0,k=a.mediaElement;return h={initialize:b,reset:c,isEnabled:e},d(),h}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(149),i=d(h);e.__dashjs_factory_name="RangeController",c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{10:10,149:149}],79:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(a,b){a.some(function(a){var c=g.create(a,b);return c?(e.push(c),!0):void 0})}function c(){e.forEach(function(a){return a.reset()}),e=[]}function d(a,b){e.forEach(function(c){return c.report(a,b)})}var e=[],f=void 0,g=i["default"](this.context).getInstance({log:a.log});return f={initialize:b,reset:c,report:d}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(85),i=d(h);e.__dashjs_factory_name="ReportingController",c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{10:10,85:85}],80:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(b,c){var d,e=b.match(g);if(e){try{d=j[e[1]](h).create({eventBus:a.eventBus}),d.initialize(e[1],c,e[3],e[5])}catch(i){d=null,f("MetricsHandlerFactory: Could not create handler for type "+e[1]+" with args "+e[3]+", "+e[5]+" ("+i.message+")")}return d}}function c(a,b){j[a]=b}function d(a){delete j[a]}var e=void 0,f=a.log,g=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,h=this.context,j={BufferLevel:i["default"],DVBErrors:k["default"],HttpList:m["default"],PlayList:o["default"],RepSwitchList:o["default"],TcpList:o["default"]};return e={create:b,register:c,unregister:d}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(81),i=d(h),j=a(82),k=d(j),l=a(84),m=d(l),n=a(83),o=d(n);e.__dashjs_factory_name="MetricsHandlerFactory",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,81:81,82:82,83:83,84:84}],81:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){try{return Object.keys(o).map(function(a){return o[a]}).reduce(function(a,b){return a.level<b.level?a:b})}catch(a){return}}function b(){var b=a();b&&l!==b.t&&(l=b.t,g.report(j,b))}function c(a,c,d){c&&(h=n.validateN(d),g=c,j=n.reconstructFullMetricName(a,d),k=setInterval(b,h))}function d(){clearInterval(k),k=null,h=0,g=null,l=null}function e(a,b,c){"BufferLevel"===a&&(o[c]=b)}var f=void 0,g=void 0,h=void 0,j=void 0,k=void 0,l=void 0,m=this.context,n=i["default"](m).getInstance(),o=[];return f={initialize:c,reset:d,handleNewMetric:e}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(88),i=d(h);e.__dashjs_factory_name="BufferLevelHandler",c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{10:10,88:88}],82:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){h.off(i["default"].METRICS_INITIALISATION_COMPLETE,b,this),h.trigger(i["default"].BECAME_REPORTING_PLAYER)}function c(a,c){c&&(g=c,h.on(i["default"].METRICS_INITIALISATION_COMPLETE,b,this))}function d(){g=null}function e(a,b){"DVBErrors"===a&&g&&g.report(a,b)}var f=void 0,g=void 0,h=a.eventBus;return f={initialize:c,reset:d,handleNewMetric:e}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(74),i=d(h);c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{10:10,74:74}],83:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b){e=a,f=b}function b(){f=null,e=void 0}function c(a,b){a===e&&f&&f.report(e,b)}var d=void 0,e=void 0,f=void 0;return d={initialize:a,reset:b,handleNewMetric:c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f);e.__dashjs_factory_name="GenericMetricHandler",c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{10:10}],84:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){var a=l;a.length&&f&&f.report(j,a),l=[]}function b(b,c,d,e){c&&(g=m.validateN(d),f=c,e&&e.length&&(h=e),j=m.reconstructFullMetricName(b,d,e),k=setInterval(a,g))}function c(){clearInterval(k),k=null,g=null,h=null,l=[],f=null}function d(a,b){"HttpList"===a&&(h&&h!==b.type||l.push(b))}var e=void 0,f=void 0,g=void 0,h=void 0,j=void 0,k=void 0,l=[],m=i["default"](this.context).getInstance();return e={initialize:b,reset:c,handleNewMetric:d}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(88),i=d(h);e.__dashjs_factory_name="HttpListHandler",c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{10:10,88:88}],85:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(a,b){var c;try{c=e[a.schemeIdUri](f).create(),c.initialize(a,b)}catch(d){c=null,g("ReportingFactory: could not create Reporting with schemeIdUri "+a.schemeIdUri+" ("+d.message+")")}return c}function c(a,b){e[a]=b}function d(a){delete e[a]}var e={"urn:dvb:dash:reporting:2014":i["default"]},f=this.context,g=a.log,h=void 0;return h={create:b,register:c,unregister:d}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(86),i=d(h);e.__dashjs_factory_name="ReportingFactory",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,86:86}],86:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b,c){var d=new XMLHttpRequest,e=function(){var a=q.indexOf(d);-1!==a&&(q.splice(a,1),d.status>=200&&d.status<300?b&&b():c&&c())};q.push(d);try{d.open("GET",a),d.onloadend=e,d.onerror=e,d.send()}catch(f){d.onerror()}}function b(b,c){Array.isArray(c)||(c=[c]),l&&o.isEnabled()&&c.forEach(function(c){var d=g.serialise(c);j&&"DVBErrors"!==b&&(d="metricname="+b+"&"+d),d=n+"?"+d,a(d,null,function(){l=!1})})}function c(a,b){var c;if(o=b,n=a["dvb:reportingUrl"],!n)throw new Error("required parameter missing (dvb:reportingUrl)");m||(c=a["dvb:probability"]||a["dvb:priority"]||0,c&&(1e3===c||c/1e3>=h.random())&&(l=!0),m=!0)}function d(){p||(q.forEach(function(a){return a.abort()}),q=[]),m=!1,l=!1,n=null,o=null}var e=void 0,f=this.context,g=i["default"](f).getInstance(),h=k["default"](f).getInstance(),j=!0,l=!1,m=!1,n=null,o=null,p=!0,q=[];return e={report:b,initialize:c,reset:d}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(90),i=d(h),j=a(91),k=d(j);e.__dashjs_factory_name="DVBReporting",c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{10:10,90:90,91:91}],87:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(a){var b=new g["default"];if(r){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);b.mpdurl||(b.mpdurl=r.originalUrl||r.url),b.terror||(b.terror=new Date),q.addDVBErrors(b)}}function c(a){a.error||(r=a.manifest)}function d(a){b({errorcode:g["default"].BASE_URL_CHANGED,servicelocation:a.entry})}function e(){b({errorcode:g["default"].BECAME_REPORTER})}function f(a){(0===a.responsecode||a.responsecode>=400||a.responsecode<100||a.responsecode>=600)&&b({errorcode:a.responsecode||g["default"].CONNECTION_ERROR,url:a.url,terror:a.tresponse,servicelocation:a._serviceLocation})}function h(a){switch(a.metric){case"HttpList":f(a.value)}}function j(a){var c,d=a.error?a.error.code:0;switch(d){case MediaError.MEDIA_ERR_NETWORK:c=g["default"].CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:c=g["default"].CORRUPT_MEDIA_OTHER;break;default:return}b({errorcode:c})}function l(){p.on(i["default"].MANIFEST_UPDATED,c,o),p.on(i["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,d,o),p.on(k["default"].METRIC_ADDED,h,o),p.on(k["default"].METRIC_UPDATED,h,o),p.on(k["default"].PLAYBACK_ERROR,j,o),p.on(m["default"].BECAME_REPORTING_PLAYER,e,o)}function n(){p.off(i["default"].MANIFEST_UPDATED,c,o),p.off(i["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,d,o),p.off(k["default"].METRIC_ADDED,h,o),p.off(k["default"].METRIC_UPDATED,h,o),p.off(k["default"].PLAYBACK_ERROR,j,o),p.off(m["default"].BECAME_REPORTING_PLAYER,e,o)}var o=void 0,p=a.eventBus,q=a.metricsModel,r=void 0;return o={initialise:l,reset:n},l(),o}Object.defineProperty(c,"__esModule",{value:!0});var f=a(92),g=d(f),h=a(13),i=d(h),j=a(53),k=d(j),l=a(74),m=d(l),n=a(10),o=d(n);e.__dashjs_factory_name="DVBErrorsTranslator",c["default"]=o["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,13:13,53:53,74:74,92:92}],88:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){return{reconstructFullMetricName:function(a,b,c){var d=a;return b&&(d+="("+b,c&&c.length&&(d+=","+c),d+=")"),d},validateN:function(a){if(!a)throw new Error("missing n");if(isNaN(a))throw new Error("n is NaN");if(0>a)throw new Error("n must be positive");return a}}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f);e.__dashjs_factory_name="HandlerHelpers",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10}],89:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(a,b,c){var d,f,g=e.getMpd(a),h=0;return b?h=g.availabilityStartTime.getTime()/1e3:(d=this.getRegularPeriods(a,g),d.length&&(h=d[0].start)),f=h,c&&c.hasOwnProperty("starttime")&&(f+=c.starttime),f}function c(a){var c=[];return a.Metrics_asArray&&a.Metrics_asArray.forEach(function(d){var f=new g["default"],h=e.getIsDynamic(a);d.hasOwnProperty("metrics")&&(f.metrics=d.metrics,d.Range_asArray&&d.Range_asArray.forEach(function(c){var d=new i["default"];d.starttime=b(a,h,c),c.hasOwnProperty("duration")?d.duration=c.duration:d.duration=e.getDuration(a),d._useWallClockTime=h,f.Range.push(d)}),d.Reporting_asArray&&(d.Reporting_asArray.forEach(function(a){var b=new k["default"];if(a.hasOwnProperty("schemeIdUri")){b.schemeIdUri=a.schemeIdUri;for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);f.Reporting.push(b)}}),c.push(f)))}),c}var d=void 0,e=a.dashManifestModel;return d={getMetrics:c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(93),g=d(f),h=a(94),i=d(h),j=a(95),k=d(j),l=a(10),m=d(l);e.__dashjs_factory_name="ManifestParsing",c["default"]=m["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,93:93,94:94,95:95}],90:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(b){var c,d,e=[],f=[];for(c in b)if(b.hasOwnProperty(c)&&0!==c.indexOf("_")){if(d=b[c],void 0!==d&&null!==d||(d=""),Array.isArray(d)){if(!d.length)continue;f=[],d.forEach(function(b){var c="Object"!==Object.prototype.toString.call(b).slice(8,-1);f.push(c?b:a(b))}),d=f.map(encodeURIComponent).join(",")}else"string"==typeof d?d=encodeURIComponent(d):d instanceof Date?d=d.toISOString():"number"==typeof d&&(d=Math.round(d));e.push(c+"="+d)}return e.join("&")}return{serialise:a}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f);e.__dashjs_factory_name="MetricSerialiser",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10}],91:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){c&&(g||(g=new d(f)),c.getRandomValues(g),h=0)}function b(b,d){var f;return b||(b=0),d||(d=1),c?(h===g.length&&a(),f=g[h]/e,h+=1):f=Math.random(),f*(d-b)+b}var c=window.crypto||window.msCrypto,d=Uint32Array,e=Math.pow(2,8*d.BYTES_PER_ELEMENT)-1,f=10,g=void 0,h=void 0,i=void 0;return i={random:b},a(),i}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f);e.__dashjs_factory_name="RNG",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10}],92:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};e.SSL_CONNECTION_FAILED_PREFIX="SSL",e.DNS_RESOLUTION_FAILED="C00",e.HOST_UNREACHABLE="C01",e.CONNECTION_REFUSED="C02",e.CONNECTION_ERROR="C03",e.CORRUPT_MEDIA_ISOBMFF="M00",e.CORRUPT_MEDIA_OTHER="M01",e.BASE_URL_CHANGED="F00",e.BECAME_REPORTER="S00",c["default"]=e,b.exports=c["default"]},{}],93:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.metrics="",this.Range=[],this.Reporting=[]};c["default"]=e,b.exports=c["default"]},{}],94:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1};c["default"]=e,b.exports=c["default"]},{}],95:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.schemeIdUri="",this.value=""};c["default"]=e,b.exports=c["default"]},{}],96:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(){function a(){l=new n}function b(a,b,c){var d=p.getBaseURLsFromElement(c);a[b]?q.areSimpleEquivalent(d,a[b].data.baseUrls)||(a[b].data.baseUrls=d,a[b].data.selectedIdx=m):a[b]=new n(d)}function c(a){var c=p.getBaseURLsFromElement(a);q.areSimpleEquivalent(c,l.data.baseUrls)||(l.data.baseUrls=c,l.data.selectedIdx=m),a.Period_asArray&&a.Period_asArray.forEach(function(a,c){b(l.children,c,a),
a.AdaptationSet_asArray&&a.AdaptationSet_asArray.forEach(function(a,d){b(l.children[c].children,d,a),a.Representation_asArray&&a.Representation_asArray.sort(p.getRepresentationSortFunction()).forEach(function(a,e){b(l.children[c].children[d].children,e,a)})})})}function d(a,b){var c=b||l;a(c.data),c.children&&c.children.forEach(function(b){return d(a,b)})}function e(a){d(function(b){isNaN(b.selectedIdx)||a===b.baseUrls[b.selectedIdx].serviceLocation&&(b.selectedIdx=m)})}function f(a){c(a)}function g(){l=new n}function i(a){var b=l,c=[b.data];return a.forEach(function(a){b=b.children[a],b&&c.push(b.data)}),c.filter(function(a){return a.baseUrls.length})}var k=void 0,l=void 0,o=this.context,p=h["default"](o).getInstance(),q=j["default"](o).getInstance();return k={reset:g,update:f,getForPath:i,invalidateSelectedIndexes:e},a(),k}Object.defineProperty(c,"__esModule",{value:!0});var g=a(22),h=d(g),i=a(156),j=d(i),k=a(10),l=d(k),m=NaN,n=function o(a,b){e(this,o),this.data={baseUrls:a||null,selectedIdx:b||m},this.children=[]};f.__dashjs_factory_name="BaseURLTreeModel",c["default"]=l["default"].getClassFactory(f),b.exports=c["default"]},{10:10,156:156,22:22}],97:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){B=null,E=null,C=[],D=[],y.on(i["default"].LOADING_COMPLETED,u,A)}function c(a){E=a}function d(a){var b=function(a,b){return a.action===m["default"].ACTION_COMPLETE&&a.action===b.action},c=function(a,b){return!isNaN(a.index)&&a.startTime===b.startTime&&a.adaptationIndex===b.adaptationIndex},d=function(a,b){return isNaN(a.index)&&isNaN(b.index)&&a.quality===b.quality},e=function(e){var f=!1;return e.some(function(e){return c(a,e)||d(a,e)||b(a,e)?f=!0:void 0}),f};return e(C)}function e(a){var b=a.state instanceof Array?a.state:[a.state],c=[];return b.forEach(function(b){var d=r(b);c=c.concat(n(d,a))}),c}function f(a){C=C.filter(function(b){return isNaN(b.startTime)||b.startTime>=a})}function h(){E.abort(),D=[]}function j(a){switch(a.action){case m["default"].ACTION_COMPLETE:C.push(a),t(a,q),y.trigger(i["default"].STREAM_COMPLETED,{request:a,fragmentModel:this});break;case m["default"].ACTION_DOWNLOAD:t(a,p),D.push(a),k(a);break;default:x("Unknown request action.")}}function k(a){y.trigger(i["default"].FRAGMENT_LOADING_STARTED,{sender:A,request:a}),E.load(a)}function l(a,b,c){for(var d=a.length-1,e=d;e>=0;e--){var f=a[e],g=f.startTime,h=g+f.duration;if(c=void 0!==c?c:f.duration/2,!isNaN(g)&&!isNaN(h)&&b+c>=g&&h>b-c||isNaN(g)&&isNaN(b))return f}return null}function n(a,b){return b.hasOwnProperty("time")?[l(a,b.time,b.threshold)]:a.filter(function(a){for(var c in b)if("state"!==c&&b.hasOwnProperty(c)&&a[c]!=b[c])return!1;return!0})}function r(a){var b=void 0;switch(a){case p:b=D;break;case q:b=C;break;default:b=[]}return b}function t(a,b){z.addSchedulingInfo(a.mediaType,new Date,a.type,a.startTime,a.availabilityStartTime,a.duration,a.quality,a.range,b),z.addRequestsQueue(a.mediaType,D,C)}function u(a){a.sender===E&&(D.splice(D.indexOf(a.request),1),a.response&&!a.error&&C.push(a.request),t(a.request,a.error?s:q),y.trigger(i["default"].FRAGMENT_LOADING_COMPLETED,{request:a.request,response:a.response,error:a.error,sender:this}))}function v(){y.off(i["default"].LOADING_COMPLETED,u,this),E&&(E.reset(),E=null),C=[],D=[]}var w=this.context,x=o["default"](w).getInstance().log,y=g["default"](w).getInstance(),z=a.metricsModel,A=void 0,B=void 0,C=void 0,D=void 0,E=void 0;return A={setLoader:c,getRequests:e,isFragmentLoaded:d,removeExecutedRequestsBeforeTime:f,abortRequests:h,executeRequest:j,reset:v},b(),A}Object.defineProperty(c,"__esModule",{value:!0});var f=a(9),g=d(f),h=a(13),i=d(h),j=a(10),k=d(j),l=a(166),m=d(l),n=a(8),o=d(n),p="loading",q="executed",r="canceled",s="failed";e.__dashjs_factory_name="FragmentModel";var t=k["default"].getClassFactory(e);t.FRAGMENT_MODEL_LOADING=p,t.FRAGMENT_MODEL_EXECUTED=q,t.FRAGMENT_MODEL_CANCELED=r,t.FRAGMENT_MODEL_FAILED=s,c["default"]=t,b.exports=c["default"]},{10:10,13:13,166:166,8:8,9:9}],98:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){return f}function b(a){f=a,a&&d.trigger(i["default"].MANIFEST_LOADED,{data:a})}var c=this.context,d=g["default"](c).getInstance(),e=void 0,f=void 0;return e={getValue:a,setValue:b}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(9),g=d(f),h=a(13),i=d(h),j=a(10),k=d(j);e.__dashjs_factory_name="ManifestModel",c["default"]=k["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,13:13,9:9}],99:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(){function a(){var a,b;ya=[],xa=!1,wa=!0,Ba=!0,Qa=!1,Sa=!1,Ea={enabled:!0,ttl:l},Fa={enabled:!0,ttl:m},za=k,Aa=void 0,Ca=p,Da=q,Ga=NaN,Ha=t,Ia=u,Ja=v,Ka=w,La=n,Ma=o,Pa=D,Ra={"default":E},a={},e(a,i.HTTPRequest.MPD_TYPE,z),e(a,i.HTTPRequest.XLINK_EXPANSION_TYPE,B),e(a,i.HTTPRequest.MEDIA_SEGMENT_TYPE,x),e(a,i.HTTPRequest.INIT_SEGMENT_TYPE,x),e(a,i.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,x),e(a,i.HTTPRequest.INDEX_SEGMENT_TYPE,x),e(a,i.HTTPRequest.OTHER_TYPE,x),Na=a,b={},e(b,i.HTTPRequest.MPD_TYPE,A),e(b,i.HTTPRequest.XLINK_EXPANSION_TYPE,C),e(b,i.HTTPRequest.MEDIA_SEGMENT_TYPE,y),e(b,i.HTTPRequest.INIT_SEGMENT_TYPE,y),e(b,i.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,y),e(b,i.HTTPRequest.INDEX_SEGMENT_TYPE,y),e(b,i.HTTPRequest.OTHER_TYPE,y),Oa=b}function b(a){Qa=a}function c(){return Qa}function d(a){La=a}function f(){return La}function g(a){Ma=a}function h(){return Ma}function j(a){Ga=a}function F(){return isNaN(Ga)?Sa?s:r:Ga}function G(a){Ha=a}function H(){return Ha}function I(a){Ia=a}function J(){return Ia}function K(a){Ja=a}function L(){return Ja}function M(a){Ka=a}function N(){return Ka}function O(a){Ca=a}function P(){return Ca}function Q(a,b){Ea.enabled=a,void 0===b||isNaN(b)||"number"!=typeof b||(Ea.ttl=b)}function R(){return Ea}function S(a,b){Fa.enabled=a,void 0===b||isNaN(b)||"number"!=typeof b||(Fa.ttl=b)}function T(){return Fa}function U(a){Da=a}function V(){return Da}function W(a){Na[i.HTTPRequest.MEDIA_SEGMENT_TYPE]=a}function X(a,b){Na[a]=b}function Y(){return Na[i.HTTPRequest.MEDIA_SEGMENT_TYPE]}function Z(a){return Na[a]}function $(a){Oa[i.HTTPRequest.MEDIA_SEGMENT_TYPE]=a}function _(a,b){Oa[a]=b}function aa(){return Oa[i.HTTPRequest.MEDIA_SEGMENT_TYPE]}function ba(a){return Oa[a]}function ca(a){Pa=a}function da(){return Pa}function ea(a){Ba=a}function fa(){return Ba}function ga(a){za=a}function ha(a){Aa=a}function ia(){return za}function ja(){return Aa}function ka(a){wa=a}function la(){return wa}function ma(a){xa=a}function na(){return xa}function oa(a){ya=a}function pa(){return ya}function qa(a,b){a?Ra[a]=!!b:Object.keys(Ra).forEach(function(a){qa(a,b)})}function ra(a){var b=Ra[a];return void 0===b?Ra["default"]:b}function sa(){return Sa}function ta(a){Sa=a}function ua(){}var va=void 0,wa=void 0,xa=void 0,ya=void 0,za=void 0,Aa=void 0,Ba=void 0,Ca=void 0,Da=void 0,Ea=void 0,Fa=void 0,Ga=void 0,Ha=void 0,Ia=void 0,Ja=void 0,Ka=void 0,La=void 0,Ma=void 0,Na=void 0,Oa=void 0,Pa=void 0,Qa=void 0,Ra=void 0,Sa=void 0;return va={setBufferOccupancyABREnabled:b,getBufferOccupancyABREnabled:c,setBandwidthSafetyFactor:d,getBandwidthSafetyFactor:f,setAbandonLoadTimeout:g,getAbandonLoadTimeout:h,setLastBitrateCachingInfo:Q,getLastBitrateCachingInfo:R,setLastMediaSettingsCachingInfo:S,getLastMediaSettingsCachingInfo:T,setStableBufferTime:j,getStableBufferTime:F,setBufferTimeAtTopQuality:G,getBufferTimeAtTopQuality:H,setBufferTimeAtTopQualityLongForm:I,getBufferTimeAtTopQualityLongForm:J,setLongFormContentDurationThreshold:K,getLongFormContentDurationThreshold:L,setRichBufferThreshold:M,getRichBufferThreshold:N,setBufferToKeep:O,getBufferToKeep:P,setBufferPruningInterval:U,getBufferPruningInterval:V,setFragmentRetryAttempts:W,getFragmentRetryAttempts:Y,setRetryAttemptsForType:X,getRetryAttemptsForType:Z,setFragmentRetryInterval:$,getFragmentRetryInterval:aa,setRetryIntervalForType:_,getRetryIntervalForType:ba,setWallclockTimeUpdateInterval:ca,getWallclockTimeUpdateInterval:da,setScheduleWhilePaused:ea,getScheduleWhilePaused:fa,getUseSuggestedPresentationDelay:na,setUseSuggestedPresentationDelay:ma,setLiveDelayFragmentCount:ga,getLiveDelayFragmentCount:ia,getLiveDelay:ja,setLiveDelay:ha,setUseManifestDateHeaderTimeSource:ka,getUseManifestDateHeaderTimeSource:la,setUTCTimingSources:oa,getUTCTimingSources:pa,setXHRWithCredentialsForType:qa,getXHRWithCredentialsForType:ra,setFastSwitchEnabled:ta,getFastSwitchEnabled:sa,reset:ua},a(),va}Object.defineProperty(c,"__esModule",{value:!0});var g=a(10),h=d(g),i=a(182),j={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso"},k=4,l=36e4,m=36e4,n=.9,o=1e4,p=30,q=30,r=12,s=20,t=30,u=60,v=600,w=20,x=3,y=1e3,z=3,A=500,B=1,C=500,D=50,E=!1;f.__dashjs_factory_name="MediaPlayerModel";var F=h["default"].getSingletonFactory(f);F.DEFAULT_UTC_TIMING_SOURCE=j,c["default"]=F,b.exports=c["default"]},{10:10,182:182}],100:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){W={}}function b(a){a&&a.adapter&&(V=a.adapter)}function c(){T.trigger(C["default"].METRICS_CHANGED)}function d(a){T.trigger(C["default"].METRIC_CHANGED,{mediaType:a}),c()}function e(a,b,c){T.trigger(C["default"].METRIC_UPDATED,{mediaType:a,metric:b,value:c}),d(a)}function f(a,b,c){T.trigger(C["default"].METRIC_ADDED,{mediaType:a,metric:b,value:c}),d(a)}function h(a){delete W[a],d(a)}function k(){W={},c()}function m(a){return W.hasOwnProperty(a)?W[a]:null}function o(a){var b;return W.hasOwnProperty(a)?b=W[a]:(b=new g["default"],W[a]=b),b}function q(a,b,c){var d=o(a);d[b].push(c),d[b].length>R&&d[b].shift()}function s(a,b,c,d,e,f){var g=new i["default"];return g.tcpid=b,g.dest=c,g.topen=d,g.tclose=e,g.tconnect=f,B(a,V.metricsList.TCP_CONNECTION,g),g}function v(a,b,c,d){var e=new j.HTTPRequestTrace;return e.s=b,e.d=c,e.b=d,a.trace.push(e),a.interval||(a.interval=0),a.interval+=c,e}function x(a,b,c,d,e,f,g,h,i,k,l,m,n,o){var p=new j.HTTPRequest;return e&&e!==d&&(x(a,null,c,d,null,null,g,h,null,null,null,m,null,null),p.actualurl=e),p.tcpid=b,p.type=c,p.url=d,p.range=g,p.trequest=h,p.tresponse=i,p.responsecode=l,p._tfinish=k,p._stream=a,p._mediaduration=m,p._responseHeaders=n,p._serviceLocation=f,o?o.forEach(function(a){v(p,a.s,a.d,a.b)}):(delete p.interval,delete p.trace),B(a,V.metricsList.HTTP_REQUEST,p),p}function z(a,b,c,d,e){var f=new l["default"];return f.t=b,f.mt=c,f.to=d,e?f.lto=e:delete f.lto,B(a,V.metricsList.TRACK_SWITCH,f),f}function B(a,b,c){q(a,b,c),f(a,b,c)}function D(a,b,c){var d=new n["default"];return d.t=b,d.level=c,B(a,V.metricsList.BUFFER_LEVEL,d),d}function E(a,b,c){var d=new p["default"];return d.target=c,d.state=b,B(a,V.metricsList.BUFFER_STATE,d),d}function F(a,b,c,d){var e=new r["default"];return e.time=b,e.range=d,e.manifestInfo=c,B(a,V.metricsList.DVR_INFO,e),e}function H(a,b){var c=new t["default"],d=o(a).DroppedFrames;return c.time=b.creationTime,c.droppedFrames=b.droppedVideoFrames,d.length>0&&d[d.length-1]==c?d[d.length-1]:(B(a,V.metricsList.DROPPED_FRAMES,c),c)}function I(a,b,c,d,e,f,g,h,i){var j=new w["default"];return j.mediaType=a,j.t=b,j.type=c,j.startTime=d,j.availabilityStartTime=e,j.duration=f,j.quality=g,j.range=h,j.state=i,B(a,V.metricsList.SCHEDULING_INFO,j),j}function J(a,b,c){var d=new A["default"];d.loadingRequests=b,d.executedRequests=c,o(a).RequestsQueue=d,f(a,V.metricsList.REQUESTS_QUEUE,d)}function K(a,b,c,d,e,g,h,i,j,k){var l=new u.ManifestUpdate;return l.mediaType=a,l.type=b,l.requestTime=c,l.fetchTime=d,l.availabilityStartTime=e,l.presentationStartTime=g,l.clientTimeOffset=h,l.currentTime=i,l.buffered=j,l.latency=k,q("stream","ManifestUpdate",l),f(a,V.metricsList.MANIFEST_UPDATE,l),l}function L(a,b){if(a){for(var c in b)a[c]=b[c];e(a.mediaType,V.metricsList.MANIFEST_UPDATE,a)}}function M(a,b,c,d,f){if(a){var g=new u.ManifestUpdateStreamInfo;return g.id=b,g.index=c,g.start=d,g.duration=f,a.streamInfo.push(g),e(a.mediaType,V.metricsList.MANIFEST_UPDATE_STREAM_INFO,a),g}return null}function N(a,b,c,d,f,g,h,i){if(a){var j=new u.ManifestUpdateTrackInfo;return j.id=b,j.index=c,j.streamIndex=d,j.mediaType=f,j.startNumber=h,j.fragmentInfoType=i,j.presentationTimeOffset=g,a.trackInfo.push(j),e(a.mediaType,V.metricsList.MANIFEST_UPDATE_TRACK_INFO,a),j}return null}function O(a){var b="stream";return a.trace&&Array.isArray(a.trace)?a.trace.forEach(function(a){a.hasOwnProperty("subreplevel")&&!a.subreplevel&&delete a.subreplevel}):delete a.trace,B(b,V.metricsList.PLAY_LIST,a),a}function P(a){var b="stream";return B(b,V.metricsList.DVB_ERRORS,a),a}function Q(a,b){var c=new G["default"];return c._s=b,o(a).BolaState=[c],f(a,"BolaState",c),c}var R=1e3,S=this.context,T=y["default"](S).getInstance(),U=void 0,V=void 0,W=void 0;return U={metricsChanged:c,metricChanged:d,metricUpdated:e,metricAdded:f,clearCurrentMetricsForType:h,clearAllCurrentMetrics:k,getReadOnlyMetricsFor:m,getMetricsFor:o,addTcpConnection:s,addHttpRequest:x,addRepresentationSwitch:z,addBufferLevel:D,addBufferState:E,addDVRInfo:F,addDroppedFrames:H,addSchedulingInfo:I,addRequestsQueue:J,addManifestUpdate:K,updateManifestUpdateInfo:L,addManifestUpdateStreamInfo:M,addManifestUpdateRepresentationInfo:N,addPlayList:O,addDVBErrors:P,updateBolaState:Q,setConfig:b},a(),U}Object.defineProperty(c,"__esModule",{value:!0});var f=a(171),g=d(f),h=a(188),i=d(h),j=a(182),k=a(185),l=d(k),m=a(178),n=d(m),o=a(179),p=d(o),q=a(180),r=d(q),s=a(181),t=d(s),u=a(183),v=a(187),w=d(v),x=a(9),y=d(x),z=a(186),A=d(z),B=a(13),C=d(B),D=a(10),E=d(D),F=a(177),G=d(F);e.__dashjs_factory_name="MetricsModel",c["default"]=E["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,13:13,171:171,177:177,178:178,179:179,180:180,181:181,182:182,183:183,185:185,186:186,187:187,188:188,9:9}],101:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){h=new g["default"],i=[],j=!1}function b(){return h}function c(){return i}function d(){return j}function e(a){function b(a,b,c,d){var e=d[0].split(/[=]/);return d.push({key:e[0],value:e[1]}),d.shift(),d}function c(a,b,c){return b>0&&(l&&0===i.length?i=c[b].split(/[&]/):m&&(e=c[b].split(/[&]/))),c}if(!a)return null;var d,e=[],f=new RegExp(/[?]/),g=new RegExp(/[#]/),k=new RegExp(/^(https:)?\/\//i),l=f.test(a),m=g.test(a);return j=k.test(a),d=a.split(/[?#]/).map(c),i.length>0&&(i=i.reduce(b,null)),e.length>0&&(e=e.reduce(b,null),e.forEach(function(a){h[a.key]=a.value})),a}var f=void 0,h=void 0,i=void 0,j=void 0;return f={initialize:a,parseURI:e,getURIFragmentData:b,getURIQueryData:c,isManifestHTTPS:d}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(176),g=d(f),h=a(10),i=d(h);e.__dashjs_factory_name="URIQueryAndFragmentModel",c["default"]=i["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,176:176}],102:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){w=[]}function b(){t.playbackRate=x||1,t.removeEventListener("canplay",b)}function c(a){t&&(t.readyState<=2&&a>0?t.addEventListener("canplay",b):t.playbackRate=a)}function d(a){if(t.currentTime!=a)try{t.currentTime=a}catch(b){0===t.readyState&&b.code===b.INVALID_STATE_ERR&&setTimeout(function(){t.currentTime=a},400)}}function e(){return t}function f(a){t=a,t.preload="auto"}function g(a){a?t.src=a:(t.removeAttribute("src"),t.load())}function h(){return t.src}function i(){return v}function j(a){v=a}function k(){return u}function l(a){u=a,u.style.position="absolute",u.style.display="flex",u.style.overflow="hidden",u.style.pointerEvents="none",u.style.top=0,u.style.left=0}function m(a,b){q(a,b)}function n(){return w.length>0}function o(a){var b=void 0;null===a||t.seeking||-1!==w.indexOf(a)||(w.push(a),1===w.length&&(b=document.createEvent("Event"),b.initEvent("waiting",!0,!1),x=t.playbackRate,c(0),t.dispatchEvent(b)))}function p(a){var b=w.indexOf(a),d=void 0;null!==a&&(-1!==b&&w.splice(b,1),n()===!1&&0===t.playbackRate&&(c(x||1),t.paused||(d=document.createEvent("Event"),d.initEvent("playing",!0,!1),t.dispatchEvent(d))))}function q(a,b){b?o(a):p(a)}function r(){var a="webkitDroppedFrameCount"in t&&"webkitDecodedFrameCount"in t,b="getVideoPlaybackQuality"in t,c=null;return b?c=t.getVideoPlaybackQuality():a&&(c={droppedVideoFrames:t.webkitDroppedFrameCount,totalVideoFrames:t.webkitDroppedFrameCount+t.webkitDecodedFrameCount,creationTime:new Date}),c}var s=void 0,t=void 0,u=void 0,v=void 0,w=void 0,x=void 0;return s={initialize:a,setCurrentTime:d,setStallState:m,getElement:e,setElement:f,setSource:g,getSource:h,getVideoContainer:i,setVideoContainer:j,getTTMLRenderingDiv:k,setTTMLRenderingDiv:l,getPlaybackQuality:r}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f);e.__dashjs_factory_name="VideoModel",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10}],103:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a(1),h=d(g),i=function(){function a(){e(this,a)}return f(a,null,[{key:"findCencContentProtection",value:function(a){for(var b=null,c=0;c<a.length;++c){var d=a[c];"urn:mpeg:dash:mp4protection:2011"===d.schemeIdUri.toLowerCase()&&"cenc"===d.value.toLowerCase()&&(b=d)}return b}},{key:"getPSSHData",value:function(a){var b=8,c=new DataView(a),d=c.getUint8(b);return b+=20,d>0&&(b+=4+16*c.getUint32(b)),b+=4,a.slice(b)}},{key:"getPSSHForKeySystem",value:function(b,c){var d=a.parsePSSHList(c);return d.hasOwnProperty(b.uuid.toLowerCase())?d[b.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(a){return"pssh"in a?h["default"].decodeArray(a.pssh.__text).buffer:null}},{key:"parsePSSHList",value:function(a){if(null===a)return[];for(var b=new DataView(a),c=!1,d={},e=0;!c;){var f,g,h,i,j,k=e;if(e>=b.buffer.byteLength)break;if(f=b.getUint32(e),g=e+f,e+=4,1886614376===b.getUint32(e))if(e+=4,h=b.getUint8(e),0===h||1===h){e++,e+=3,i="";var l,m;for(l=0;4>l;l++)m=b.getUint8(e+l).toString(16),i+=1===m.length?"0"+m:m;for(e+=4,i+="-",l=0;2>l;l++)m=b.getUint8(e+l).toString(16),i+=1===m.length?"0"+m:m;for(e+=2,i+="-",l=0;2>l;l++)m=b.getUint8(e+l).toString(16),i+=1===m.length?"0"+m:m;for(e+=2,i+="-",l=0;2>l;l++)m=b.getUint8(e+l).toString(16),i+=1===m.length?"0"+m:m;for(e+=2,i+="-",l=0;6>l;l++)m=b.getUint8(e+l).toString(16),i+=1===m.length?"0"+m:m;e+=6,i=i.toLowerCase(),j=b.getUint32(e),e+=4,d[i]=b.buffer.slice(k,g),e=g}else e=g;else e=g}return d}}]),a}();c["default"]=i,b.exports=c["default"]},{1:1}],104:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){var c=null,d=i["default"](e).getInstance();d.setConfig({log:a.log}),d.initialize();var f=b(a);return!c&&f&&(c=g["default"](e).create({protectionModel:f,protectionKeyController:d,adapter:a.adapter,eventBus:a.eventBus,log:a.log}),a.capabilities.setEncryptedMediaSupported(!0)),c}function b(a){var b=a.log,d=a.eventBus,f=a.videoModel.getElement();return void 0!==f.onencrypted&&void 0!==f.mediaKeys&&void 0!==navigator.requestMediaKeySystemAccess&&"function"==typeof navigator.requestMediaKeySystemAccess?(b("EME detected on this user agent! (ProtectionModel_21Jan2015)"),m["default"](e).create({log:b,eventBus:d})):c(f,u)?(b("EME detected on this user agent! (ProtectionModel_3Feb2014)"),o["default"](e).create({log:b,eventBus:d,api:c(f,u)})):c(f,t)?(b("EME detected on this user agent! (ProtectionModel_01b)"),q["default"](e).create({log:b,eventBus:d,api:c(f,t)})):(b("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null)}function c(a,b){for(var c=0;c<b.length;c++){var d=b[c];if("function"==typeof a[d[Object.keys(d)[0]]])return d}return null}var d=void 0,e=this.context;return d={createProtectionSystem:a}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(106),g=d(f),h=a(107),i=d(h),j=a(105),k=d(j),l=a(112),m=d(l),n=a(113),o=d(n),p=a(111),q=d(p),r=a(10),s=d(r),t=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],u=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];e.__dashjs_factory_name="Protection";var v=s["default"].getClassFactory(e);v.events=k["default"],c["default"]=v,b.exports=c["default"]},{10:10,105:105,106:106,107:107,111:111,112:112,113:113}],105:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(14),i=d(h),j=function(a){function b(){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected"}return f(b,a),b}(i["default"]),k=new j;c["default"]=k,b.exports=c["default"]},{14:14}],106:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){D=x.getKeySystems(),E=[],I=!1,J="temporary",K="",i["default"].extend(q["default"].events)}function c(a,b,c){if(!I){var d;b||c||(d=z.getStreamsInfo(a)[0]),F=b||(d?z.getMediaInfoForType(a,d,"audio"):null),G=c||(d?z.getMediaInfoForType(a,d,"video"):null);var e=G?G:F,f=x.getSupportedKeySystemsFromContentProtection(e.contentProtection);f&&f.length>0&&t(f,!0),I=!0}}function d(a){var b=g["default"].getPSSHForKeySystem(L,a);if(b){for(var c=y.getAllInitData(),d=0;d<c.length;d++)if(x.initDataEquals(b,c[d]))return void B("DRM: Ignoring initData because we have already seen it!");try{y.createKeySession(b,J)}catch(e){A.trigger(i["default"].KEY_SESSION_CREATED,{data:null,error:"Error creating key session! "+e.message})}}else A.trigger(i["default"].KEY_SESSION_CREATED,{data:null,error:"Selected key system is "+L.systemString+".  needkey/encrypted event contains no initData corresponding to that key system!"})}function e(a){y.loadKeySession(a)}function f(a){y.removeKeySession(a)}function h(a){y.closeKeySession(a)}function j(a){y.setServerCertificate(a)}function l(a){a?(y.setMediaElement(a),A.on(i["default"].NEED_KEY,w,this),A.on(i["default"].INTERNAL_KEY_MESSAGE,v,this)):null===a&&(y.setMediaElement(a),A.off(i["default"].NEED_KEY,w,this),A.off(i["default"].INTERNAL_KEY_MESSAGE,v,this))}function n(a){J=a}function o(a){K=a}function p(a){H=a}function r(){l(null),L=void 0,y&&(y.reset(),y=null)}function s(a){var b=null,c=a.systemString;return H&&(b=c in H?H[c]:null),b}function t(a,b){var c=this,e=[],f=[];G&&f.push(new k["default"](G.codec,K)),F&&e.push(new k["default"](F.codec,K));var g,h=new m["default"](e,f,"optional","temporary"===J?"optional":"required",[J]),j=[];if(L){for(g=0;g<a.length;g++)if(L===a[g].ks){var l=function(){j.push({ks:a[g].ks,configs:[h]});var e=function f(e){A.off(i["default"].KEY_SYSTEM_ACCESS_COMPLETE,f,c),e.error?b||A.trigger(i["default"].KEY_SYSTEM_SELECTED,{error:"DRM: KeySystem Access Denied! -- "+e.error}):(B("DRM: KeySystem Access Granted"),A.trigger(i["default"].KEY_SYSTEM_SELECTED,{data:e.data}),d(a[g].initData))};return A.on(i["default"].KEY_SYSTEM_ACCESS_COMPLETE,e,c),y.requestKeySystemAccess(j),"break"}();if("break"===l)break}}else if(void 0===L){L=null,E.push(a);for(var n=0;n<a.length;n++)j.push({ks:a[n].ks,configs:[h]});var o,p=function r(a){A.off(i["default"].KEY_SYSTEM_ACCESS_COMPLETE,r,c),a.error?(L=void 0,A.off(i["default"].INTERNAL_KEY_SYSTEM_SELECTED,q,c),b||A.trigger(i["default"].KEY_SYSTEM_SELECTED,{data:null,error:"DRM: KeySystem Access Denied! -- "+a.error})):(o=a.data,B("DRM: KeySystem Access Granted ("+o.keySystem.systemString+")!  Selecting key system..."),y.selectKeySystem(o))},q=function s(a){if(A.off(i["default"].INTERNAL_KEY_SYSTEM_SELECTED,s,c),A.off(i["default"].KEY_SYSTEM_ACCESS_COMPLETE,p,c),a.error)L=void 0,b||A.trigger(i["default"].KEY_SYSTEM_SELECTED,{data:null,error:"DRM: Error selecting key system! -- "+a.error});else{L=y.getKeySystem(),A.trigger(i["default"].KEY_SYSTEM_SELECTED,{data:o});for(var e=0;e<E.length;e++)for(g=0;g<E[e].length;g++)if(L===E[e][g].ks){d(E[e][g].initData);break}}};A.on(i["default"].INTERNAL_KEY_SYSTEM_SELECTED,q,c),A.on(i["default"].KEY_SYSTEM_ACCESS_COMPLETE,p,c),y.requestKeySystemAccess(j)}else E.push(a)}function u(a,b){A.trigger(i["default"].LICENSE_REQUEST_COMPLETE,{data:a,error:b})}function v(a){if(B("DRM: onKeyMessage"),a.error)return void B(a.error);var b=a.data;A.trigger(i["default"].KEY_MESSAGE,{data:b});var c=b.messageType?b.messageType:"license-request",d=b.message,e=b.sessionToken,f=s(L),h=L.systemString,j=x.getLicenseServer(L,f,c),k={sessionToken:e,messageType:c};if(!j)return B("DRM: License server request not required for this message (type = "+a.data.messageType+").  Session ID = "+e.getSessionID()),void u(k);if(x.isClearKey(L)){var l=x.processClearKeyLicenseRequest(f,d);if(l)return B("DRM: ClearKey license request handled by application!"),u(k),void y.updateKeySession(e,l)}var m=new XMLHttpRequest,n=null;if(f&&f.serverURL){var o=f.serverURL;"string"==typeof o&&""!==o?n=o:"object"==typeof o&&o.hasOwnProperty(c)&&(n=o[c])}else f&&f.laURL&&""!==f.laURL?n=f.laURL:(n=L.getLicenseServerURLFromInitData(g["default"].getPSSHData(e.initData)),n||(n=a.data.laURL));if(n=j.getServerURLFromMessage(n,d,c),!n)return void u(k,"DRM: No license server URL specified!");m.open(j.getHTTPMethod(c),n,!0),m.responseType=j.getResponseType(h,c),m.onload=function(){200==this.status?(u(k),y.updateKeySession(e,j.getLicenseMessage(this.response,h,c))):u(k,"DRM: "+h+' update, XHR status is "'+this.statusText+'" ('+this.status+"), expected to be 200. readyState is "+this.readyState+".  Response is "+(this.response?j.getErrorResponse(this.response,h,c):"NONE"))},m.onabort=function(){u(k,"DRM: "+h+' update, XHR aborted. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)},m.onerror=function(){u(k,"DRM: "+h+' update, XHR error. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)};var p=function(a){var b;if(a)for(b in a)"authorization"===b.toLowerCase()&&(m.withCredentials=!0),m.setRequestHeader(b,a[b])};f&&p(f.httpRequestHeaders),p(L.getRequestHeadersFromMessage(d)),f&&f.withCredentials&&(m.withCredentials=!0),m.send(L.getLicenseRequestFromMessage(d))}function w(a){if(B("DRM: onNeedKey"),"cenc"!==a.key.initDataType)return void B("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+a.key.initDataType);var b=a.key.initData;ArrayBuffer.isView(b)&&(b=b.buffer),B("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(b)));var c=x.getSupportedKeySystems(b,H);return 0===c.length?void B("DRM: Received needkey event with initData, but we don't support any of the key systems!"):void t(c,!1)}var x=a.protectionKeyController,y=a.protectionModel,z=a.adapter,A=a.eventBus,B=a.log,C=void 0,D=void 0,E=void 0,F=void 0,G=void 0,H=void 0,I=void 0,J=void 0,K=void 0,L=void 0;return C={initialize:c,createKeySession:d,loadKeySession:e,removeKeySession:f,closeKeySession:h,setServerCertificate:j,setMediaElement:l,setSessionType:n,setRobustnessLevel:o,setProtectionData:p,reset:r},b(),C}Object.defineProperty(c,"__esModule",{value:!0});var f=a(103),g=d(f),h=a(13),i=d(h),j=a(124),k=d(j),l=a(123),m=d(l),n=a(10),o=d(n),p=a(104),q=d(p);e.__dashjs_factory_name="ProtectionController",c["default"]=o["default"].getClassFactory(e),b.exports=c["default"]},{10:10,103:103,104:104,123:123,124:124,13:13}],107:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){a&&a.log&&(t=a.log)}function b(){v=[];var a;a=m["default"](p).getInstance(),v.push(a),a=k["default"](p).getInstance(),v.push(a),a=i["default"](p).getInstance(),v.push(a),w=a}function c(){return v}function d(a){for(var b=0;b<v.length;b++)if(v[b].systemString===a)return v[b];return null}function e(a){return a===w}function f(a,b){if(a.byteLength===b.byteLength){for(var c=new Uint8Array(a),d=new Uint8Array(b),e=0;e<c.length;e++)if(c[e]!==d[e])return!1;return!0}return!1}function h(a){var b,c,d,e,f=[];if(a)for(d=0;d<v.length;++d)for(c=v[d],e=0;e<a.length;++e)if(b=a[e],b.schemeIdUri.toLowerCase()===c.schemeIdURI){var g=c.getInitData(b);g&&f.push({ks:v[d],initData:g})}return f}function j(a,b){var c,d=[],e=g["default"].parsePSSHList(a);for(c=0;c<v.length;++c){var f=v[c].systemString,h=!b||f in b;v[c].uuid in e&&h&&d.push({ks:v[c],initData:e[v[c].uuid]})}return d}function l(a,b,c){if("license-release"===c||"individualization-request"===c)return null;var d=null;return b&&b.hasOwnProperty("drmtoday")?d=o["default"](p).getInstance():"com.widevine.alpha"===a.systemString?d=s["default"](p).getInstance():"com.microsoft.playready"===a.systemString?d=q["default"](p).getInstance():"org.w3.clearkey"===a.systemString&&(d=u["default"](p).getInstance()),d}function n(a,b){try{return w.getClearKeysFromProtectionData(a,b)}catch(c){return t("Failed to retrieve clearkeys from ProtectionData"),null}}var p=this.context,r=void 0,t=void 0,v=void 0,w=void 0;return r={initialize:b,isClearKey:e,initDataEquals:f,getKeySystems:c,getKeySystemBySystemString:d,getSupportedKeySystemsFromContentProtection:h,getSupportedKeySystems:j,getLicenseServer:l,processClearKeyLicenseRequest:n,setConfig:a}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(103),g=d(f),h=a(108),i=d(h),j=a(110),k=d(j),l=a(109),m=d(l),n=a(115),o=d(n),p=a(116),q=d(p),r=a(117),s=d(r),t=a(114),u=d(t),v=a(10),w=d(v);e.__dashjs_factory_name="ProtectionKeyController",c["default"]=w["default"].getSingletonFactory(e),
b.exports=c["default"]},{10:10,103:103,108:108,109:109,110:110,114:114,115:115,116:116,117:117}],108:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b){var c=null;if(a){for(var d=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(b))),e=[],f=0;f<d.kids.length;f++){var h=d.kids[f],j=a.clearkeys.hasOwnProperty(h)?a.clearkeys[h]:null;if(!j)throw new Error("DRM: ClearKey keyID ("+h+") is not known!");e.push(new g["default"](h,j))}c=new i["default"](e)}return c}function b(a){return k["default"].parseInitDataFromContentProtection(a)}function c(){return null}function d(a){return new Uint8Array(a)}function e(){return null}var f=void 0;return f={uuid:n,schemeIdURI:p,systemString:o,getInitData:b,getRequestHeadersFromMessage:c,getLicenseRequestFromMessage:d,getLicenseServerURLFromInitData:e,getClearKeysFromProtectionData:a}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(121),g=d(f),h=a(118),i=d(h),j=a(103),k=d(j),l=a(10),m=d(l),n="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",o="org.w3.clearkey",p="urn:uuid:"+n;e.__dashjs_factory_name="KeySystemClearKey",c["default"]=m["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,103:103,118:118,121:121}],109:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){var b,c,d={},e=new DOMParser,f="utf16"===h?new Uint16Array(a):new Uint8Array(a);b=String.fromCharCode.apply(null,f),c=e.parseFromString(b,"application/xml");for(var g=c.getElementsByTagName("name"),i=c.getElementsByTagName("value"),j=0;j<g.length;j++)d[g[j].childNodes[0].nodeValue]=i[j].childNodes[0].nodeValue;return d.hasOwnProperty("Content")&&(d["Content-Type"]=d.Content,delete d.Content),d}function b(a){var b,c,d=null,e=new DOMParser,f="utf16"===h?new Uint16Array(a):new Uint8Array(a);if(b=String.fromCharCode.apply(null,f),c=e.parseFromString(b,"application/xml"),c.getElementsByTagName("Challenge")[0]){var g=c.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;g&&(d=m["default"].decode(g))}return d}function c(a){if(a)for(var b=new DataView(a),c=b.getUint16(4,!0),d=6,e=new DOMParser,f=0;c>f;f++){var g=b.getUint16(d,!0);d+=2;var h=b.getUint16(d,!0);if(d+=2,1===g){var i=a.slice(d,d+h),j=String.fromCharCode.apply(null,new Uint16Array(i)),k=e.parseFromString(j,"application/xml");if(k.getElementsByTagName("LA_URL")[0]){var l=k.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(l)return l}if(k.getElementsByTagName("LUI_URL")[0]){var m=k.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(m)return m}}else d+=h}return null}function d(a){var b,c,d,e,f,h=new Uint8Array([112,115,115,104,0,0,0,0]),i=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),j=0,k=null;if("pssh"in a)return g["default"].parseInitDataFromContentProtection(a);if("pro"in a)k=m["default"].decodeArray(a.pro.__text);else{if(!("prheader"in a))return null;k=m["default"].decodeArray(a.prheader.__text)}return b=k.length,c=4+h.length+i.length+4+b,d=new ArrayBuffer(c),e=new Uint8Array(d),f=new DataView(d),f.setUint32(j,c),j+=4,e.set(h,j),j+=h.length,e.set(i,j),j+=i.length,f.setUint32(j,b),j+=4,e.set(k,j),j+=b,e.buffer}function e(a){if("utf8"!==a&&"utf16"!==a)throw new i["default"]("Illegal PlayReady message format! -- "+a);h=a}var f=void 0,h="utf16";return f={uuid:n,schemeIdURI:p,systemString:o,getInitData:d,getRequestHeadersFromMessage:a,getLicenseRequestFromMessage:b,getLicenseServerURLFromInitData:c,setPlayReadyMessageFormat:e}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(103),g=d(f),h=a(165),i=d(h),j=a(10),k=d(j),l=a(1),m=d(l),n="9a04f079-9840-4286-ab92-e65be0885f95",o="com.microsoft.playready",p="urn:uuid:"+n;e.__dashjs_factory_name="KeySystemPlayReady",c["default"]=k["default"].getSingletonFactory(e),b.exports=c["default"]},{1:1,10:10,103:103,165:165}],110:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){return g["default"].parseInitDataFromContentProtection(a)}function b(){return null}function c(a){return new Uint8Array(a)}function d(){return null}var e=void 0;return e={uuid:j,schemeIdURI:l,systemString:k,getInitData:a,getRequestHeadersFromMessage:b,getLicenseRequestFromMessage:c,getLicenseServerURLFromInitData:d}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(103),g=d(f),h=a(10),i=d(h),j="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",k="com.widevine.alpha",l="urn:uuid:"+j;e.__dashjs_factory_name="KeySystemWidevine",c["default"]=i["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,103:103}],111:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){E=null,F=null,I=[],J=[],G=g["default"](z).getInstance(),H=u["default"](z).getInstance(),L=w()}function c(){E&&y();for(var a=0;a<J.length;a++)p(J[a]);A.trigger(s["default"].TEARDOWN_COMPLETE)}function d(){return F}function e(){for(var a=[],b=0;b<I.length;b++)a.push(I[b].initData);for(var b=0;b<J.length;b++)a.push(J[b].initData);return a}function f(a){var b=E;b||(b=document.createElement("video"));for(var c=!1,d=0;d<a.length;d++)for(var e=a[d].ks.systemString,f=a[d].configs,g=null,h=null,i=0;i<f.length;i++){var j=f[i].videoCapabilities;if(j&&0!==j.length){h=[];for(var k=0;k<j.length;k++)""!==b.canPlayType(j[k].contentType,e)&&h.push(j[k])}if(!(!g&&!h||g&&0===g.length||h&&0===h.length)){c=!0;var l=new o["default"](g,h),m=G.getKeySystemBySystemString(e);A.trigger(s["default"].KEY_SYSTEM_ACCESS_COMPLETE,{data:new q["default"](m,l)});break}}c||A.trigger(s["default"].KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})}function h(a){F=a.keySystem,A.trigger(s["default"].INTERNAL_KEY_SYSTEM_SELECTED)}function j(a){E!==a&&(E&&y(),E=a,E&&(E.addEventListener(C.keyerror,L),E.addEventListener(C.needkey,L),E.addEventListener(C.keymessage,L),E.addEventListener(C.keyadded,L),A.trigger(s["default"].VIDEO_ELEMENT_SELECTED)))}function l(a){if(!F)throw new Error("Can not create sessions until you have selected a key system");if(K||0===J.length){var b={sessionID:null,initData:a,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return I.push(b),E[C.generateKeyRequest](F.systemString,new Uint8Array(a)),b}throw new Error("Multiple sessions not allowed!")}function n(a,b){var c=a.sessionID;if(G.isClearKey(F))for(var d=0;d<b.keyPairs.length;d++)E[C.addKey](F.systemString,b.keyPairs[d].key,b.keyPairs[d].keyID,c);else E[C.addKey](F.systemString,new Uint8Array(b),a.initData,c)}function p(a){E[C.cancelKeyRequest](F.systemString,a.sessionID)}function r(){}function t(){}function v(){}function w(){return{handleEvent:function(a){var b=null;switch(a.type){case C.needkey:var c=ArrayBuffer.isView(a.initData)?a.initData.buffer:a.initData;A.trigger(s["default"].NEED_KEY,{key:new i["default"](c,"cenc")});break;case C.keyerror:if(b=x(J,a.sessionId),b||(b=x(I,a.sessionId)),b){var d="";switch(a.errorCode.code){case 1:d+="MEDIA_KEYERR_UNKNOWN - An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break;case 2:d+="MEDIA_KEYERR_CLIENT - The Key System could not be installed or updated.";break;case 3:d+="MEDIA_KEYERR_SERVICE - The message passed into update indicated an error from the license service.";break;case 4:d+="MEDIA_KEYERR_OUTPUT - There is no available output device with the required characteristics for the content protection system.";break;case 5:d+="MEDIA_KEYERR_HARDWARECHANGE - A hardware configuration change caused a content protection error.";break;case 6:d+="MEDIA_KEYERR_DOMAIN - An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain."}d+="  System Code = "+a.systemCode,A.trigger(s["default"].KEY_ERROR,{data:new k["default"](b,d)})}else B("No session token found for key error");break;case C.keyadded:b=x(J,a.sessionId),b||(b=x(I,a.sessionId)),b?(B("DRM: Key added."),A.trigger(s["default"].KEY_ADDED,{data:b})):B("No session token found for key added");break;case C.keymessage:if(K=null!==a.sessionId&&void 0!==a.sessionId,K?(b=x(J,a.sessionId),!b&&I.length>0&&(b=I.shift(),J.push(b),b.sessionID=a.sessionId)):I.length>0&&(b=I.shift(),J.push(b),0!==I.length&&H.mediaKeyMessageError("Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!")),b){var e=ArrayBuffer.isView(a.message)?a.message.buffer:a.message;b.keyMessage=e,A.trigger(s["default"].INTERNAL_KEY_MESSAGE,{data:new m["default"](b,e,a.defaultURL)})}else B("No session token found for key message")}}}}function x(a,b){if(b&&a){for(var c=a.length,d=0;c>d;d++)if(a[d].sessionID==b)return a[d];return null}return null}function y(){E.removeEventListener(C.keyerror,L),E.removeEventListener(C.needkey,L),E.removeEventListener(C.keymessage,L),E.removeEventListener(C.keyadded,L)}var z=this.context,A=a.eventBus,B=a.log,C=a.api,D=void 0,E=void 0,F=void 0,G=void 0,H=void 0,I=void 0,J=void 0,K=void 0,L=void 0;return D={getAllInitData:e,requestKeySystemAccess:f,getKeySystem:d,selectKeySystem:h,setMediaElement:j,createKeySession:l,updateKeySession:n,closeKeySession:p,setServerCertificate:r,loadKeySession:t,removeKeySession:v,reset:c},b(),D}Object.defineProperty(c,"__esModule",{value:!0});var f=a(107),g=d(f),h=a(125),i=d(h),j=a(119),k=d(j),l=a(120),m=d(l),n=a(123),o=d(n),p=a(122),q=d(p),r=a(13),s=d(r),t=a(152),u=d(t),v=a(10),w=d(v);e.__dashjs_factory_name="ProtectionModel_01b",c["default"]=w["default"].getClassFactory(e),b.exports=c["default"]},{10:10,107:107,119:119,120:120,122:122,123:123,125:125,13:13,152:152}],112:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){A=null,B=null,C=null,D=[],F=g["default"](G).getInstance(),E=w()}function c(){var a,b=D.length;if(0!==b)for(var c=function(a){x(a),0===D.length&&(B?(B.removeEventListener("encrypted",E),B.setMediaKeys(null).then(function(){H.trigger(q["default"].TEARDOWN_COMPLETE)})):H.trigger(q["default"].TEARDOWN_COMPLETE))},d=0;b>d;d++)a=D[d],function(b){a.session.closed.then(function(){c(b)}),v(a)["catch"](function(){c(b)})}(a);else H.trigger(q["default"].TEARDOWN_COMPLETE)}function d(){return A}function e(){for(var a=[],b=0;b<D.length;b++)a.push(D[b].initData);return a}function f(a){u(a,0)}function h(a){a.mksa.createMediaKeys().then(function(b){A=a.keySystem,C=b,B&&B.setMediaKeys(C),H.trigger(q["default"].INTERNAL_KEY_SYSTEM_SELECTED)})["catch"](function(){H.trigger(q["default"].INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+a.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})}function j(a){B!==a&&(B&&(B.removeEventListener("encrypted",E),B.setMediaKeys(null)),B=a,B&&(B.addEventListener("encrypted",E),C&&B.setMediaKeys(C)))}function l(a){if(!A||!C)throw new Error("Can not set server certificate until you have selected a key system");C.setServerCertificate(a).then(function(){I("DRM: License server certificate successfully updated."),H.trigger(q["default"].SERVER_CERTIFICATE_UPDATED)})["catch"](function(a){H.trigger(q["default"].SERVER_CERTIFICATE_UPDATED,{error:"Error updating server certificate -- "+a.name})})}function n(a,b){if(!A||!C)throw new Error("Can not create sessions until you have selected a key system");var c=C.createSession(b),d=y(c,a,b);c.generateRequest("cenc",a).then(function(){I("DRM: Session created.  SessionID = "+d.getSessionID()),H.trigger(q["default"].KEY_SESSION_CREATED,{data:d})})["catch"](function(a){x(d),H.trigger(q["default"].KEY_SESSION_CREATED,{data:null,error:"Error generating key request -- "+a.name})})}function p(a,b){var c=a.session;F.isClearKey(A)&&(b=b.toJWK()),c.update(b)["catch"](function(b){H.trigger(q["default"].KEY_ERROR,{data:new k["default"](a,"Error sending update() message! "+b.name)})})}function r(a){if(!A||!C)throw new Error("Can not load sessions until you have selected a key system");var b=C.createSession();b.load(a).then(function(c){if(c){var d=y(b);I("DRM: Session created.  SessionID = "+d.getSessionID()),H.trigger(q["default"].KEY_SESSION_CREATED,{data:d})}else H.trigger(q["default"].KEY_SESSION_CREATED,{data:null,error:"Could not load session! Invalid Session ID ("+a+")"})})["catch"](function(b){H.trigger(q["default"].KEY_SESSION_CREATED,{data:null,error:"Could not load session ("+a+")! "+b.name})})}function s(a){var b=a.session;b.remove().then(function(){I("DRM: Session removed.  SessionID = "+a.getSessionID()),H.trigger(q["default"].KEY_SESSION_REMOVED,{data:a.getSessionID()})},function(b){H.trigger(q["default"].KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+a.getSessionID()+"). "+b.name})})}function t(a){v(a)["catch"](function(b){x(a),H.trigger(q["default"].KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+a.getSessionID()+") "+b.name})})}function u(a,b){!function(b){var c=a[b].ks,d=a[b].configs;navigator.requestMediaKeySystemAccess(c.systemString,d).then(function(a){var b="function"==typeof a.getConfiguration?a.getConfiguration():null,d=new o["default"](c,b);d.mksa=a,H.trigger(q["default"].KEY_SYSTEM_ACCESS_COMPLETE,{data:d})})["catch"](function(){++b<a.length?u(a,b):H.trigger(q["default"].KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied!"})})}(b)}function v(a){var b=a.session;return b.removeEventListener("keystatuseschange",a),b.removeEventListener("message",a),b.close()}function w(){return{handleEvent:function(a){switch(a.type){case"encrypted":if(a.initData){var b=ArrayBuffer.isView(a.initData)?a.initData.buffer:a.initData;H.trigger(q["default"].NEED_KEY,{key:new i["default"](b,a.initDataType)})}}}}}function x(a){for(var b=0;b<D.length;b++)if(D[b]===a){D.splice(b,1);break}}function y(a,b,c){var d={session:a,initData:b,handleEvent:function(a){switch(a.type){case"keystatuseschange":H.trigger(q["default"].KEY_STATUSES_CHANGED,{data:this});break;case"message":var b=ArrayBuffer.isView(a.message)?a.message.buffer:a.message;H.trigger(q["default"].INTERNAL_KEY_MESSAGE,{data:new m["default"](this,b,void 0,a.messageType)})}},getSessionID:function(){return a.sessionId},getExpirationTime:function(){return a.expiration},getKeyStatuses:function(){return a.keyStatuses},getSessionType:function(){return c}};return a.addEventListener("keystatuseschange",d),a.addEventListener("message",d),a.closed.then(function(){x(d),I("DRM: Session closed.  SessionID = "+d.getSessionID()),H.trigger(q["default"].KEY_SESSION_CLOSED,{data:d.getSessionID()})}),D.push(d),d}var z,A,B,C,D,E,F,G=this.context,H=a.eventBus,I=a.log;return z={getAllInitData:e,requestKeySystemAccess:f,getKeySystem:d,selectKeySystem:h,setMediaElement:j,setServerCertificate:l,createKeySession:n,updateKeySession:p,loadKeySession:r,removeKeySession:s,closeKeySession:t,reset:c},b(),z}Object.defineProperty(c,"__esModule",{value:!0});var f=a(107),g=d(f),h=a(125),i=d(h),j=a(119),k=d(j),l=a(120),m=d(l),n=a(122),o=d(n),p=a(13),q=d(p),r=a(10),s=d(r);e.__dashjs_factory_name="ProtectionModel_21Jan2015",c["default"]=s["default"].getClassFactory(e),b.exports=c["default"]},{10:10,107:107,119:119,120:120,122:122,125:125,13:13}],113:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){D=null,E=null,F=null,G=null,H=[],J=g["default"](y).getInstance(),I=v()}function c(){try{for(var a=0;a<H.length;a++)p(H[a]);D&&D.removeEventListener(B.needkey,I),z.trigger(s["default"].TEARDOWN_COMPLETE)}catch(b){z.trigger(s["default"].TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+b.message})}}function d(){return E}function e(){for(var a=[],b=0;b<H.length;b++)a.push(H[b].initData);return a}function f(a){for(var b=!1,c=0;c<a.length;c++)for(var d=a[c].ks.systemString,e=a[c].configs,f=null,g=null,h=0;h<e.length;h++){var i=e[h].audioCapabilities,j=e[h].videoCapabilities;if(i&&0!==i.length){f=[];for(var k=0;k<i.length;k++)window[B.MediaKeys].isTypeSupported(d,i[k].contentType)&&f.push(i[k])}if(j&&0!==j.length){g=[];for(var l=0;l<j.length;l++)window[B.MediaKeys].isTypeSupported(d,j[l].contentType)&&g.push(j[l])}if(!(!f&&!g||f&&0===f.length||g&&0===g.length)){b=!0;var m=new o["default"](f,g),n=J.getKeySystemBySystemString(d);z.trigger(s["default"].KEY_SYSTEM_ACCESS_COMPLETE,{data:new q["default"](n,m)});break}}b||z.trigger(s["default"].KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})}function h(a){try{F=a.mediaKeys=new window[B.MediaKeys](a.keySystem.systemString),E=a.keySystem,G=a,D&&w(),z.trigger(s["default"].INTERNAL_KEY_SYSTEM_SELECTED)}catch(b){z.trigger(s["default"].INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+E.systemString+")! Could not create MediaKeys -- TODO"})}}function j(a){D!==a&&(D&&D.removeEventListener(B.needkey,I),D=a,D&&(D.addEventListener(B.needkey,I),F&&w()))}function l(a){if(!E||!F||!G)throw new Error("Can not create sessions until you have selected a key system");var b=null;if(null!==G.ksConfiguration.videoCapabilities&&G.ksConfiguration.videoCapabilities.length>0&&(b=G.ksConfiguration.videoCapabilities[0]),null===b&&null!==G.ksConfiguration.audioCapabilities&&G.ksConfiguration.audioCapabilities.length>0&&(b=G.ksConfiguration.audioCapabilities[0]),null===b)throw new Error("Can not create sessions for unknown content types.");var c=b.contentType,d=F.createSession(c,new Uint8Array(a)),e=x(d,a);d.addEventListener(B.error,e),d.addEventListener(B.message,e),d.addEventListener(B.ready,e),d.addEventListener(B.close,e),H.push(e),A("DRM: Session created.  SessionID = "+e.getSessionID()),z.trigger(s["default"].KEY_SESSION_CREATED,{data:e})}function n(a,b){var c=a.session;J.isClearKey(E)?c.update(new Uint8Array(b.toJWK())):c.update(new Uint8Array(b))}function p(a){var b=a.session;b.removeEventListener(B.error,a),b.removeEventListener(B.message,a),b.removeEventListener(B.ready,a),b.removeEventListener(B.close,a);for(var c=0;c<H.length;c++)if(H[c]===a){H.splice(c,1);break}b[B.release]()}function r(){}function t(){}function u(){}function v(){return{handleEvent:function(a){switch(a.type){case B.needkey:if(a.initData){var b=ArrayBuffer.isView(a.initData)?a.initData.buffer:a.initData;z.trigger(s["default"].NEED_KEY,{key:new i["default"](b,"cenc")})}}}}}function w(){var a=null,b=function(){D.removeEventListener("loadedmetadata",a),D[B.setMediaKeys](F),z.trigger(s["default"].VIDEO_ELEMENT_SELECTED)};D.readyState>=1?b():(a=b.bind(this),D.addEventListener("loadedmetadata",a))}function x(a,b){return{session:a,initData:b,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(a){switch(a.type){case B.error:var b="KeyError";z.trigger(s["default"].KEY_ERROR,{data:new k["default"](this,b)});break;case B.message:var c=ArrayBuffer.isView(a.message)?a.message.buffer:a.message;z.trigger(s["default"].INTERNAL_KEY_MESSAGE,{data:new m["default"](this,c,a.destinationURL)});break;case B.ready:A("DRM: Key added."),z.trigger(s["default"].KEY_ADDED);break;case B.close:A("DRM: Session closed.  SessionID = "+this.getSessionID()),z.trigger(s["default"].KEY_SESSION_CLOSED,{data:this.getSessionID()})}}}}var y=this.context,z=a.eventBus,A=a.log,B=a.api,C=void 0,D=void 0,E=void 0,F=void 0,G=void 0,H=void 0,I=void 0,J=void 0;return C={getAllInitData:e,requestKeySystemAccess:f,getKeySystem:d,selectKeySystem:h,setMediaElement:j,createKeySession:l,updateKeySession:n,closeKeySession:p,setServerCertificate:r,loadKeySession:t,removeKeySession:u,reset:c},b(),C}Object.defineProperty(c,"__esModule",{value:!0});var f=a(107),g=d(f),h=a(125),i=d(h),j=a(119),k=d(j),l=a(120),m=d(l),n=a(123),o=d(n),p=a(122),q=d(p),r=a(13),s=d(r),t=a(10),u=d(t);e.__dashjs_factory_name="ProtectionModel_3Feb2014",c["default"]=u["default"].getClassFactory(e),b.exports=c["default"]},{10:10,107:107,119:119,120:120,122:122,123:123,125:125,13:13}],114:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b){var c=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(b)));a+="/?";for(var d=0;d<c.kids.length;d++)a+=c.kids[d]+"&";return a=a.substring(0,a.length-1)}function b(){return"GET"}function c(){return"json"}function d(a){if(!a.hasOwnProperty("keys"))return null;for(var b=[],c=0;c<a.keys.length;c++){var d=a.keys[c],e=d.kid.replace(/=/g,""),f=d.k.replace(/=/g,"");b.push(new g["default"](e,f))}return new i["default"](b)}function e(a){return String.fromCharCode.apply(null,new Uint8Array(a))}var f=void 0;return f={getServerURLFromMessage:a,getHTTPMethod:b,getResponseType:c,getLicenseMessage:d,getErrorResponse:e}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(121),g=d(f),h=a(118),i=d(h),j=a(10),k=d(j);e.__dashjs_factory_name="ClearKey",c["default"]=k["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,118:118,121:121}],115:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){return a}function b(){return"POST"}function c(a){return f[a].responseType}function d(a,b){return f[b].getLicenseMessage(a)}function e(a,b){return f[b].getErrorResponse(a)}var f={"com.widevine.alpha":{responseType:"json",getLicenseMessage:function(a){return i["default"].decodeArray(a.license)},getErrorResponse:function(a){return a}},"com.microsoft.playready":{responseType:"arraybuffer",getLicenseMessage:function(a){return a},getErrorResponse:function(a){return String.fromCharCode.apply(null,new Uint8Array(a))}}},g=void 0;return g={getServerURLFromMessage:a,getHTTPMethod:b,getResponseType:c,getLicenseMessage:d,getErrorResponse:e}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(1),i=d(h);e.__dashjs_factory_name="DRMToday",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{1:1,10:10}],116:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){return a}function b(){return"POST"}function c(){return"arraybuffer"}function d(a){return a}function e(a){return String.fromCharCode.apply(null,new Uint8Array(a))}var f=void 0;return f={getServerURLFromMessage:a,getHTTPMethod:b,getResponseType:c,getLicenseMessage:d,getErrorResponse:e}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f);e.__dashjs_factory_name="PlayReady",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10}],117:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){return a}function b(){return"POST"}function c(){return"arraybuffer"}function d(a){return a}function e(a){return String.fromCharCode.apply(null,new Uint8Array(a))}var f=void 0;return f={getServerURLFromMessage:a,getHTTPMethod:b,getResponseType:c,getLicenseMessage:d,getErrorResponse:e}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f);e.__dashjs_factory_name="Widevine",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10}],118:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c){if(d(this,a),c&&"persistent"!==c&&"temporary"!==c)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=b,this.type=c}return e(a,[{key:"toJWK",value:function(){var a,b=this.keyPairs.length,c={keys:[]};for(a=0;b>a;a++){var d={kty:"oct",alg:"A128KW",kid:this.keyPairs[a].keyID,k:this.keyPairs[a].key};c.keys.push(d)}this.type&&(c.type=this.type);var e=JSON.stringify(c),f=e.length,g=new ArrayBuffer(f),h=new Uint8Array(g);for(a=0;f>a;a++)h[a]=e.charCodeAt(a);return g}}]),a}();c["default"]=f,b.exports=c["default"]},{}],119:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(a,b){d(this,f),this.sessionToken=a,this.error=b};c["default"]=e,b.exports=c["default"]},{}],120:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(a,b,c,e){d(this,f),this.sessionToken=a,this.message=b,this.defaultURL=c,this.messageType=e?e:"license-request"};c["default"]=e,b.exports=c["default"]},{}],121:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(a,b){d(this,f),this.keyID=a,this.key=b};c["default"]=e,b.exports=c["default"]},{}],122:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(a,b){d(this,f),this.keySystem=a,this.ksConfiguration=b};c["default"]=e,b.exports=c["default"]},{}],123:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(a,b,c,e,g){d(this,f),this.initDataTypes=["cenc"],a&&a.length&&(this.audioCapabilities=a),b&&b.length&&(this.videoCapabilities=b),this.distinctiveIdentifier=c,this.persistentState=e,this.sessionTypes=g};c["default"]=e,b.exports=c["default"]},{}],124:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(a,b){d(this,f),this.contentType=a,this.robustness=b};c["default"]=e,b.exports=c["default"]},{}],125:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(a,b){d(this,f),this.initData=a,this.initDataType=b};c["default"]=e,b.exports=c["default"]},{}],126:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b){var c=b.droppedVideoFrames-e;e=b.droppedVideoFrames;var g=b.totalVideoFrames-f;f=b.totalVideoFrames,d[a]?(d[a].droppedVideoFrames+=c,d[a].totalVideoFrames+=g):d[a]={droppedVideoFrames:c,totalVideoFrames:g}}function b(){return d}function c(a){d=[],e=a.droppedVideoFrames,f=a.totalVideoFrames}var d=[],e=0,f=0;return{push:a,getFrameHistory:b,reset:c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f);e.__dashjs_factory_name="DroppedFramesHistory";var h=g["default"].getClassFactory(e);c["default"]=h,b.exports=c["default"]},{10:10}],127:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){return n.mediaInfo.streamInfo}function c(){return n.mediaInfo}function d(){return n}function e(){return p}function f(){return n.mediaInfo.streamInfo.manifestInfo}function g(){return o}function h(){return q}function i(){return r}function j(){return s}function k(){return t}function l(){return u}var m=void 0,n=a.streamProcessor.getCurrentRepresentationInfo(),o=a.streamProcessor,p=a.currentValue,q=a.playbackIndex,r=a.switchHistory,s=a.droppedFramesHistory,t=a.currentRequest,u=a.hasRichBuffer;return m={getCurrentValue:e,getManifestInfo:f,getMediaInfo:c,getPlaybackIndex:h,getDroppedFramesHistory:j,getCurrentRequest:k,getSwitchHistory:i,getStreamInfo:b,getStreamProcessor:g,getTrackInfo:d,hasRichBuffer:l}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f);e.__dashjs_factory_name="RulesContext",c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{10:10}],128:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){var c=void 0===a?h:a,d=void 0===b?null:b,e={value:c,reason:d};return e}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=-1;e.__dashjs_factory_name="SwitchRequest";var i=g["default"].getClassFactory(e);i.NO_CHANGE=h,c["default"]=i,b.exports=c["default"]},{10:10}],129:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){d[a.oldValue]||(d[a.oldValue]={noDrops:0,drops:0,dropSize:0});var b=a.newValue-a.oldValue,c=0>b?1:0,f=c?-b:0,g=c?0:1;if(d[a.oldValue].drops+=c,d[a.oldValue].dropSize+=f,d[a.oldValue].noDrops+=g,e.push({idx:a.oldValue,noDrop:g,drop:c,dropSize:f}),e.length>h){var i=e.shift();d[i.idx].drops-=i.drop,d[i.idx].dropSize-=i.dropSize,d[i.idx].noDrops-=i.noDrop}}function b(){return d}function c(){d=[],e=[]}var d=[],e=[];return{push:a,getSwitchRequests:b,reset:c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=8;e.__dashjs_factory_name="SwitchRequestHistory";var i=g["default"].getClassFactory(e);c["default"]=i,b.exports=c["default"]},{10:10}],130:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){l=[],n=[];var a=w["default"](h).getInstance(),b=y["default"](h).getInstance(),c=u["default"](h).getInstance();c.getBufferOccupancyABREnabled()?(l.push(q["default"](h).create({metricsModel:a,dashMetrics:b})),n.push(s["default"](h).create({metricsModel:a,dashMetrics:b}))):(l.push(g["default"](h).create({metricsModel:a,dashMetrics:b})),l.push(i["default"](h).create({metricsModel:a})),l.push(o["default"](h).create()),l.push(m["default"](h).create()),n.push(k["default"](h).create()))}function b(a){switch(a){case D:return l;case E:return n;default:return null}}function c(a){return a.filter(function(a){return a.value>C["default"].NO_CHANGE})}function d(a){return 0!==a.length?a.reduce(function(a,b){return a.value<b.value?a:b}):void 0}function e(a){var b=l.map(function(b){return b.getMaxIndex(a)}),e=c(b),f=d(e);return f||C["default"](h).create()}function f(a){var b=n.map(function(b){return b.shouldAbandon(a)}),e=c(b),f=d(e);return f||C["default"](h).create()}var h=this.context,j=void 0,l=void 0,n=void 0;return j={initialize:a,getRules:b,getMaxQuality:e,shouldAbandonFragment:f}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(137),g=d(f),h=a(135),i=d(h),j=a(131),k=d(j),l=a(134),m=d(l),n=a(136),o=d(n),p=a(133),q=d(p),r=a(132),s=d(r),t=a(99),u=d(t),v=a(100),w=d(v),x=a(17),y=d(x),z=a(10),A=d(z),B=a(128),C=d(B),D="qualitySwitchRules",E="abandonFragmentRules";e.__dashjs_factory_name="ABRRulesCollection";var F=A["default"].getSingletonFactory(e);F.QUALITY_SWITCH_RULES=D,F.ABANDON_FRAGMENT_RULES=E,c["default"]=F,b.exports=c["default"]},{10:10,100:100,128:128,131:131,132:132,133:133,134:134,135:135,136:136,137:137,17:17,99:99}],131:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){p={},r={},s=[],t=i["default"](n).getInstance(),u=k["default"](n).getInstance(),v=m["default"](n).getInstance()}function b(a,b){p[a]=p[a]||{},p[a][b]=p[a][b]||{}}function c(a,b){s[a]=s[a]||[],s[a].push(b)}function d(a){var d=a.getMediaInfo(),f=d.type,i=a.getCurrentRequest(),k=g["default"](n).create(g["default"].NO_CHANGE,{name:e.__dashjs_factory_name});if(!isNaN(i.index)){b(f,i.index);var m=t.getStableBufferTime(),q=u.getCurrentBufferLevel(v.getReadOnlyMetricsFor(f));if(q>m)return k;var w=p[f][i.index];if(null===w||null===i.firstByteDate||r.hasOwnProperty(w.id))return k;if(void 0===w.firstByteTime&&(s[f]=[],w.firstByteTime=i.firstByteDate.getTime(),w.segmentDuration=i.duration,w.bytesTotal=i.bytesTotal,w.id=i.index),w.bytesLoaded=i.bytesLoaded,w.elapsedTime=(new Date).getTime()-w.firstByteTime,w.bytesLoaded>0&&w.elapsedTime>0&&c(f,Math.round(8*w.bytesLoaded/w.elapsedTime)),s[f].length>=l&&w.elapsedTime>j&&w.bytesLoaded<w.bytesTotal){
var x=s[f].reduce(function(a,b){return a+b},0);if(w.measuredBandwidthInKbps=Math.round(x/s[f].length),w.estimatedTimeOfDownload=+(8*w.bytesTotal/w.measuredBandwidthInKbps/1e3).toFixed(2),w.estimatedTimeOfDownload<w.segmentDuration*h||0===a.getTrackInfo().quality)return k;if(!r.hasOwnProperty(w.id)){var y=a.getStreamProcessor().getABRController(),z=w.bytesTotal-w.bytesLoaded,A=y.getBitrateList(d),B=y.getQualityForBitrate(d,w.measuredBandwidthInKbps*t.getBandwidthSafetyFactor()),C=w.bytesTotal*A[B].bitrate/A[y.getQualityFor(f,d.streamInfo)].bitrate;z>C&&(k.value=B,k.reason.throughput=w.measuredBandwidthInKbps,k.reason.fragmentID=w.id,r[w.id]=w,o("AbandonRequestsRule ( ",f,"frag id",w.id,") is asking to abandon and switch to quality to ",B," measured bandwidth was",w.measuredBandwidthInKbps),delete p[f][w.id])}}else w.bytesLoaded===w.bytesTotal&&delete p[f][w.id]}return k}function f(){a()}var h=1.8,j=500,l=5,n=this.context,o=q["default"](n).getInstance().log,p=void 0,r=void 0,s=void 0,t=void 0,u=void 0,v=void 0,w={shouldAbandon:d,reset:f};return a(),w}Object.defineProperty(c,"__esModule",{value:!0});var f=a(128),g=d(f),h=a(99),i=d(h),j=a(17),k=d(j),l=a(100),m=d(l),n=a(10),o=d(n),p=a(8),q=d(p);e.__dashjs_factory_name="AbandonRequestsRule",c["default"]=o["default"].getClassFactory(e),b.exports=c["default"]},{10:10,100:100,128:128,17:17,8:8,99:99}],132:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){s={},t=i["default"](l).getInstance()}function c(a,b,c){s[a]={index:b,quality:c}}function d(a,b,c){var d=s[a];return!d||b!==d.index||c<d.quality}function f(a){var b=a.getMediaInfo(),f=b.type,h=q.getReadOnlyMetricsFor(f),i=a.getCurrentRequest(),m=g["default"](l).create(g["default"].NO_CHANGE,{name:e.__dashjs_factory_name});if(0===h.BolaState.length)return n("WARNING: executing BolaAbandonRule before initializing BolaRule"),s[f]=null,m;var r=h.BolaState[0]._s,t=i.index,u=i.quality;if(isNaN(t)||0===u||!d(f,t,u)||!i.firstByteDate)return m;var v=Date.now(),w=v-i.firstByteDate.getTime(),x=i.bytesLoaded,y=i.bytesTotal,z=y-x,A=i.duration,B=p.getCurrentBufferLevel(h)?p.getCurrentBufferLevel(h):0,C=B+r.placeholderBuffer,D=8*x/(.001*w),E=r.bandwidthSafetyFactor*D,F=.001*(i.firstByteDate.getTime()-i.requestStartDate.getTime());.001*k>F&&(F=.001*k);var G=F+8*y/E,H="";o["default"].BOLA_DEBUG&&(H="index="+t+" quality="+u+" bytesLoaded/bytesTotal="+x+"/"+y+" bufferLevel="+B+" timeSince1stByte="+(w/1e3).toFixed(3)+" estThroughput="+(E/1e6).toFixed(3)+" latency="+F.toFixed(3));var I=y*r.bitrates[0]/r.bitrates[u],J=z-F*E/8;if(1>J&&(J=1),j>w||I>=z||B>r.bufferTarget||I>=J||A>=G)return m;var K=C-F;0>K&&(K=0);for(var L=0;u>L+1&&y*r.bitrates[L+1]/r.bitrates[u]<J;)++L;var M=u;if(r.state===o["default"].BOLA_STATE_STARTUP){M=0;for(var N=0;L>=N&&(I=y*r.bitrates[N]/r.bitrates[u],!(8*I/A>E));++N)M=N}else for(var O=(r.Vp*(r.utilities[u]+r.gp)-K)/J,N=0;L>=N;++N){I=y*r.bitrates[N]/r.bitrates[u];var P=(r.Vp*(r.utilities[N]+r.gp)-K)/I;P>O&&(M=N,O=P)}var Q=r.rebufferSafetyFactor*D*(B-F)/8;if(M===u&&J>Q&&(M=L),M===u)return m;for(;M>0&&(I=y*r.bitrates[M]/r.bitrates[u],!(Q>=I));)--M;var R=NaN;if(M>0){var S=r.utilities[M],T=r.utilities[M-1],P=r.bitrates[M],U=r.bitrates[M-1];R=r.Vp*((P*T-U*S)/(P-U)+r.gp)}else{var S=r.utilities[0],T=r.utilities[1],P=r.bitrates[0],U=r.bitrates[1];R=r.Vp*((P*T-U*S)/(P-U)+r.gp),R-=A}return C>R&&(r.placeholderBuffer=R-B,r.placeholderBuffer<0&&(r.placeholderBuffer=0)),r.lastQuality=M,q.updateBolaState(f,r),o["default"].BOLA_DEBUG&&n("BolaDebug "+f+" BolaAbandonRule abandon to "+M+" - "+H),c(f,t,u),m.value=M,m.reason.state=r.state,m.reason.throughput=D,m.reason.bufferLevel=B,m.reason.bytesLoaded=i.bytesLoaded,m.reason.bytesTotal=i.bytesTotal,m.reason.elapsedTimeMs=w,m}function h(){s={}}var j=500,k=200,l=this.context,n=m["default"](l).getInstance().log,p=a.dashMetrics,q=a.metricsModel,r=void 0,s=void 0,t=void 0;return r={shouldAbandon:f,reset:h},b(),r}Object.defineProperty(c,"__esModule",{value:!0});var f=a(128),g=d(f),h=a(99),i=d(h),j=a(10),k=d(j),l=a(8),m=d(l),n=a(133),o=d(n);e.__dashjs_factory_name="BolaAbandonRule",c["default"]=k["default"].getClassFactory(e),b.exports=c["default"]},{10:10,128:128,133:133,8:8,99:99}],133:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){N={},O={},P={},Q=[],R=k["default"](H).getInstance(),S=n["default"](H).getInstance(),L.on(r["default"].BUFFER_EMPTY,q,M),L.on(r["default"].PLAYBACK_SEEKING,s,M),L.on(r["default"].PERIOD_SWITCH_STARTED,B,M),L.on(r["default"].MEDIA_FRAGMENT_LOADED,C,M)}function c(a){return a.map(function(a){return Math.log(a)})}function d(a,b,d,e){var f=NaN;if(e?(f=0,e.forEach(function(a,b){a>e[f]&&(f=b)})):(e=c(d),f=e.length-1),0===f)return null;var g=1-e[0]+(e[f]-e[0])/(b/a-1),h=a/(e[0]+g-1);return{utilities:e,gp:g,Vp:h}}function f(a){var b={},c=a.getMediaInfo(),e=a.getStreamProcessor(),f=a.getStreamInfo(),g=a.getTrackInfo(),h=e.isDynamic(),i=f.manifestInfo.duration,j=g.fragmentDuration,k=c.bitrateList.map(function(a){return a.bandwidth}),l=d(y,z,k,null);if(null===l)return b.state=u,b;if(b.state=v,b.bitrates=k,b.utilities=l.utilities,b.Vp=l.Vp,b.gp=l.gp,b.isDynamic=h,b.movieDuration=i,b.fragmentDuration=j,b.bandwidthSafetyFactor=R.getBandwidthSafetyFactor(),b.rebufferSafetyFactor=A,b.bufferTarget=R.getStableBufferTime(),b.lastQuality=0,b.placeholderBuffer=0,b.throughputCount=h?F:G,x){for(var m="",n=0;n<k.length;++n){var o=l.utilities[n],p=k[n],q=0;if(n>0){var r=l.utilities[n-1],s=k[n-1];q=l.Vp*((r*p-o*s)/(p-s)+l.gp)}var t=l.Vp*(o+l.gp);m+="\n"+n+":"+(1e-6*k[n]).toFixed(3)+"Mbps "+q.toFixed(3)+"/"+t.toFixed(3)}I("BolaDebug "+c.type+" bitrates"+m)}return b}function h(a,b){for(var c=a.bitrates.length,d=NaN,e=NaN,f=0;c>f;++f){var g=(a.Vp*(a.utilities[f]+a.gp)-b)/a.bitrates[f];(isNaN(e)||g>=e)&&(e=g,d=f)}return d}function i(a,b){for(var c=J.getHttpRequests(a),d=[],e=c.length-1;e>=0&&d.length<b;--e){var f=c[e];f.type===l.HTTPRequest.MEDIA_SEGMENT_TYPE&&f._tfinish&&f.tresponse&&f.trace&&d.push(f)}return d}function j(a,b,c){var d=i(a,b);if(0===d.length)return 0;for(var e=0,f="",g=0;g<d.length;++g){var h=.001*(d[g]._tfinish.getTime()-d[g].trequest.getTime()),j=8*d[g].trace.reduce(function(a,b){return a+b.b[0]},0);x&&(f+=" "+(1e-6*j).toFixed(3)+"/"+h.toFixed(3)+"="+(1e-6*j/h).toFixed(3)+"Mbps"),e+=h/j}return x&&I("BolaDebug "+c+" BolaRule recent throughput = "+(d.length/(1e6*e)).toFixed(3)+"Mbps:"+f),d.length/e}function m(a,b){var c=0;return a.bitrates.some(function(a,d){return a>b||(c=d,!1)}),c}function o(a,b){var c=Date.now(),d=N[b],e=P[b],f=NaN;if(N[b]=c,P[b]=!1,!e){var g=i(a,1);g.length>0&&(f=g[0]._tfinish.getTime(),f>c&&(f=c))}var h=0;return h=e||d>f?c-d:c-f,isNaN(h)||0>=h?0:.001*h}function q(){x&&I("BolaDebug BUFFER_EMPTY"),Q.forEach(function(a){var b=K.getReadOnlyMetricsFor(a);if(0!==b.BolaState.length){var c=b.BolaState[0]._s;c.state===w&&(c.placeholderBuffer=0,K.updateBolaState(a,c))}})}function s(a){x&&I("BolaDebug PLAYBACK_SEEKING "+a.seekTime.toFixed(3)),Q.forEach(function(a){var b=K.getReadOnlyMetricsFor(a);if(0!==b.BolaState.length){var c=b.BolaState[0]._s;c.state!==u&&(c.state=v),K.updateBolaState(a,c)}}),O={},P={}}function B(){}function C(a){if(a&&a.chunk&&a.chunk.mediaInfo){var b=a.chunk.mediaInfo.type,c=a.chunk.start;void 0===b||isNaN(c)||(c<=O[b]?P[b]=!0:(P[b]=!1,O[b]=c))}}function D(a){var b=a.getStreamProcessor();b.getScheduleController().setTimeToLoadDelay(0);var c=g["default"](H).create(g["default"].NO_CHANGE,{name:e.__dashjs_factory_name}),d=a.getMediaInfo(),i=d.type,k=K.getReadOnlyMetricsFor(i);if(0===k.BolaState.length){x&&I("BolaDebug "+i+"\nBolaDebug "+i+" BolaRule for state=- fragmentStart="+S.getIndexHandlerTime(a.getStreamProcessor()).toFixed(3));var l=f(a);K.updateBolaState(i,l);var n=0;if(l.state!==u){Q.push(i);var p=j(k,l.throughputCount,i);if(0===p)return x&&I("BolaDebug "+i+" BolaRule quality unchanged for INITIALIZE"),c;n=m(l,p*l.bandwidthSafetyFactor),l.lastQuality=n,c.value=n,c.reason.state=l.state,c.reason.throughput=p}return x&&I("BolaDebug "+i+" BolaRule quality "+n+" for INITIALIZE"),c}var q=k.BolaState[0]._s;if(q.state===u)return x&&I("BolaDebug "+i+" BolaRule quality 0 for ONE_BITRATE"),c;var r=q.bitrates,s=q.utilities;x&&I("BolaDebug "+i+"\nBolaDebug "+i+" EXECUTE BolaRule for state="+q.state+" fragmentStart="+S.getIndexHandlerTime(a.getStreamProcessor()).toFixed(3));var t=J.getCurrentBufferLevel(k)?J.getCurrentBufferLevel(k):0,y=j(k,q.throughputCount,i);.1>=t&&(q.placeholderBuffer=0);var z=o(k,i);z>0&&(q.placeholderBuffer+=z),q.placeholderBuffer<0&&(q.placeholderBuffer=0);var B=t+q.placeholderBuffer,C=h(q,B);if(x&&I("BolaDebug "+i+" BolaRule bufferLevel="+t.toFixed(3)+"(+"+q.placeholderBuffer.toFixed(3)+"="+B.toFixed(3)+") recentThroughput="+(1e-6*y).toFixed(3)+" tentativeQuality="+C),q.state===v){var n=m(q,y*q.bandwidthSafetyFactor);if(t>q.fragmentDuration/A){q.state=w;for(var D=0,E=0;n>E;++E){var F=q.Vp*(q.gp+(r[n]*s[E]-r[E]*s[n])/(r[n]-r[E]));F>D&&(D=F)}D>t&&(q.placeholderBuffer=D-t)}return x&&I("BolaDebug "+i+" BolaRule quality "+n+" for STARTUP"),q.lastQuality=n,K.updateBolaState(i,q),c.value=n,c.reason.state=v,c.reason.throughput=y,c}if(C>q.lastQuality){var n=m(q,y);C>n&&(n<q.lastQuality&&(n=q.lastQuality),C=n)}if(y>0)for(var G=A*y*t/q.fragmentDuration;C>0&&r[C]>G;)--C;var L=0,M=q.Vp*(s[C]+q.gp);return L=B-M,L>0&&(L>q.placeholderBuffer?(L-=q.placeholderBuffer,q.placeholderBuffer=0):(q.placeholderBuffer-=L,L=0)),L>0?C===r.length-1?L=0:b.getScheduleController().setTimeToLoadDelay(1e3*L):L=0,q.lastQuality=C,K.updateBolaState(i,q),c.value=C,c.reason.state=q.state,c.reason.throughput=y,c.reason.bufferLevel=t,x&&I("BolaDebug "+i+" BolaRule quality "+C+" delay="+L.toFixed(3)+" for STEADY"),c}function E(){L.off(r["default"].BUFFER_EMPTY,q,M),L.off(r["default"].PLAYBACK_SEEKING,s,M),L.off(r["default"].PERIOD_SWITCH_STARTED,B,M),L.off(r["default"].MEDIA_FRAGMENT_LOADED,C,M),b()}var F=2,G=3,H=this.context,I=t["default"](H).getInstance().log,J=a.dashMetrics,K=a.metricsModel,L=p["default"](H).getInstance(),M=void 0,N=void 0,O=void 0,P=void 0,Q=void 0,R=void 0,S=void 0;return M={getMaxIndex:D,reset:E},b(),M}Object.defineProperty(c,"__esModule",{value:!0});var f=a(128),g=d(f),h=a(10),i=d(h),j=a(99),k=d(j),l=a(182),m=a(15),n=d(m),o=a(9),p=d(o),q=a(13),r=d(q),s=a(8),t=d(s),u=0,v=1,w=2,x=!1,y=10,z=30,A=.5;e.__dashjs_factory_name="BolaRule";var B=i["default"].getClassFactory(e);B.BOLA_STATE_ONE_BITRATE=u,B.BOLA_STATE_STARTUP=v,B.BOLA_STATE_STEADY=w,B.BOLA_DEBUG=x,c["default"]=B,b.exports=c["default"]},{10:10,128:128,13:13,15:15,182:182,8:8,9:9,99:99}],134:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){var f=a.getDroppedFramesHistory();if(f){for(var g=f.getFrameHistory(),h=0,j=0,k=i["default"].NO_CHANGE,l=1;l<g.length;l++)if(g[l]&&(h=g[l].droppedVideoFrames,j=g[l].totalVideoFrames,j>e&&h/j>d)){k=l-1,c("DroppedFramesRule, index: "+k+" Dropped Frames: "+h+" Total Frames: "+j);break}return i["default"](b).create(k,{droppedFrames:h})}return i["default"](b).create()}var b=this.context,c=k["default"](b).getInstance().log,d=.15,e=375;return{getMaxIndex:a}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(128),i=d(h),j=a(8),k=d(j);e.__dashjs_factory_name="DroppedFramesRule";var l=g["default"].getClassFactory(e);c["default"]=l,b.exports=c["default"]},{10:10,128:128,8:8}],135:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){p={},r=0,s=1e3,l.on(k["default"].PLAYBACK_SEEKING,e,n)}function c(a){var b=(new Date).getTime(),c=a.getMediaInfo().type,e=m.getReadOnlyMetricsFor(c),f=e.BufferState.length>0?e.BufferState[e.BufferState.length-1]:null,i=q["default"](h).create();return s>b-r||null===f?i:(d(c,f.state),f.state===g["default"].BUFFER_EMPTY&&void 0!==p[c].firstBufferLoadedEvent&&(j("Switch to index 0; buffer is empty."),i.value=0,i.reason="InsufficientBufferRule: Buffer is empty"),r=b,i)}function d(a,b){p[a]=p[a]||{},p[a].state=b,b!==g["default"].BUFFER_LOADED||p[a].firstBufferLoadedEvent||(p[a].firstBufferLoadedEvent=!0)}function e(){p={}}function f(){l.off(k["default"].PLAYBACK_SEEKING,e,n),p={},r=0}var h=this.context,j=o["default"](h).getInstance().log,l=i["default"](h).getInstance(),m=a.metricsModel,n=void 0,p=void 0,r=void 0,s=void 0;return n={getMaxIndex:c,reset:f},b(),n}Object.defineProperty(c,"__esModule",{value:!0});var f=a(62),g=d(f),h=a(9),i=d(h),j=a(13),k=d(j),l=a(10),m=d(l),n=a(8),o=d(n),p=a(128),q=d(p);e.__dashjs_factory_name="InsufficientBufferRule",c["default"]=m["default"].getClassFactory(e),b.exports=c["default"]},{10:10,128:128,13:13,62:62,8:8,9:9}],136:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){for(var f=a.getSwitchHistory(),g=f.getSwitchRequests(),h=0,i=0,j=0,l=k["default"](b).create(),m=0;m<g.length;m++)if(void 0!==g[m]&&(h+=g[m].drops,i+=g[m].noDrops,j+=g[m].dropSize,h+i>=e&&h/i>d)){l.value=m>0?m-1:0,l.reason={index:l.value,drops:h,noDrops:i,dropSize:j},c("Switch history rule index: "+l.value+" samples: "+(h+i)+" drops: "+h);break}return l}var b=this.context,c=i["default"](b).getInstance().log,d=.075,e=6;return{getMaxIndex:a}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(8),i=d(h),j=a(128),k=d(j);e.__dashjs_factory_name="SwitchRequest";var l=g["default"].getClassFactory(e);c["default"]=l,b.exports=c["default"]},{10:10,128:128,8:8}],137:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){D=[],E=[],F=k["default"](z).getInstance()}function c(a,b){D[a]=D[a]||[],D[a].push(b)}function d(a,b){return E[a]||(E[a]=[]),E[a].push(b),E[a].length>t?E[a].shift():void 0}function e(a){var b=void 0;return E[a]&&E[a].length>0&&(b=E[a].reduce(function(a,b){return a+b})/E[a].length),b}function f(a,b){var c=Math.min(D[a].length,b?q:s),d=D[a].slice(-1*c,D[a].length);return d.length>1&&d.reduce(function(a,b){return(b>=a*y||a>=b*x)&&c++,b}),c=Math.min(D[a].length,c),D[a].slice(-1*c,D[a].length)}function h(a,b){var c=f(a,b),d=0;if(c.length>0){var e=c.reduce(function(a,b){return a+b},0);d=e/c.length}return D[a].length>=o&&D[a].shift(),d/1e3*F.getBandwidthSafetyFactor()}function j(a,b,c){var d=!1;if(w>a&&(d=!0),!d)switch(c){case"video":d=u>b;break;case"audio":d=v>b}return d}function m(a){var b=a.getMediaInfo(),f=b.type,k=C.getReadOnlyMetricsFor(f),m=a.getStreamProcessor(),n=m.getABRController(),o=m.isDynamic(),p=B.getCurrentHttpRequest(k),q=k.BufferState.length>0?k.BufferState[k.BufferState.length-1]:null,s=a.hasRichBuffer(),t=r["default"](z).create();if(!k||!p||p.type!==l.HTTPRequest.MEDIA_SEGMENT_TYPE||!q||s)return t;var u=void 0,v=void 0;if(p.trace&&p.trace.length){v=p.tresponse.getTime()-p.trequest.getTime()||1,u=p._tfinish.getTime()-p.tresponse.getTime()||1;var w=p.trace.reduce(function(a,b){return a+b.b[0]},0),x=Math.round(8*w/(u/1e3)),y=void 0,F=void 0;j(v,u,f)?D[f]&&E[f]?(y=h(f,o),F=e(f)):(y=x/1e3,F=v):(c(f,x),y=h(f,o),d(f,v),F=e(f,o)),n.setAverageThroughput(f,y),n.getAbandonmentStateFor(f)!==i["default"].ABANDON_LOAD&&(q.state===g["default"].BUFFER_LOADED||o)&&(t.value=n.getQualityForBitrate(b,y,F),m.getScheduleController().setTimeToLoadDelay(0),A("ThroughputRule requesting switch to index: ",t.value,"type: ",f,"Average throughput",Math.round(y),"kbps"),t.reason={throughput:y,latency:F})}return t}function n(){b()}var o=20,q=3,s=4,t=s,u=50,v=5,w=50,x=1.3,y=1.3,z=this.context,A=p["default"](z).getInstance().log,B=a.dashMetrics,C=a.metricsModel,D=void 0,E=void 0,F=void 0,G={getMaxIndex:m,reset:n};return b(),G}Object.defineProperty(c,"__esModule",{value:!0});var f=a(62),g=d(f),h=a(59),i=d(h),j=a(99),k=d(j),l=a(182),m=a(10),n=d(m),o=a(8),p=d(o),q=a(128),r=d(q);e.__dashjs_factory_name="ThroughputRule",c["default"]=n["default"].getClassFactory(e),b.exports=c["default"]},{10:10,128:128,182:182,59:59,62:62,8:8,99:99}],138:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){j=g["default"](e).getInstance()}function c(a,b,c){var e=f.getCurrentBufferLevel(h.getReadOnlyMetricsFor(b));return e<d(a,b,c)}function d(a,b,c){var d=NaN,e=a.getCurrentRepresentationInfo();if("fragmentedText"===b)d=i.getAllTracksAreDisabled()?0:e.fragmentDuration;else if("audio"===b&&c){var g=f.getCurrentBufferLevel(h.getReadOnlyMetricsFor("video"));d=Math.floor(Math.max(g,e.fragmentDuration))}else{var k=e.mediaInfo.streamInfo,l=a.getABRController();if(l.isPlayingAtTopQuality(k)){var m=k.manifestInfo.duration>=j.getLongFormContentDurationThreshold();d=m?j.getBufferTimeAtTopQualityLongForm():j.getBufferTimeAtTopQuality()}else d=j.getStableBufferTime()}return d}var e=this.context,f=a.dashMetrics,h=a.metricsModel,i=a.textController,j=void 0,k={execute:c,getBufferTarget:d};return b(),k}Object.defineProperty(c,"__esModule",{value:!0});var f=a(99),g=d(f),h=a(10),i=d(h);e.__dashjs_factory_name="BufferLevelRule",c["default"]=i["default"].getClassFactory(e),b.exports=c["default"]},{10:10,99:99}],139:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(a,b){var c=a.getCurrentRepresentationInfo(),g=c.mediaInfo,i=g.type,j=a.getScheduleController(),k=j.getSeekTarget(),l=!isNaN(k),m=a.getBuffer(),n=l?k:e.getIndexHandlerTime(a);if(isNaN(n)||"fragmentedText"===i&&h.getAllTracksAreDisabled())return null;if(l&&j.setSeekTarget(NaN),m){var o=f.getBufferRange(a.getBuffer(),n);null!==o&&(d("Prior to making a request for time, NextFragmentRequestRule is aligning index handler's currentTime with bufferedRange.end.",n," was changed to ",o.end),n=o.end)}var p=void 0;return b?(n=b.startTime+b.duration/2,p=e.getFragmentRequestForTime(a,c,n,{timeThreshold:0,ignoreIsFinished:!0})):(p=e.getFragmentRequestForTime(a,c,n,{keepIdx:!l}),p&&a.getFragmentModel().isFragmentLoaded(p)&&(p=e.getNextFragmentRequest(a,c)),p&&(e.setIndexHandlerTime(a,p.startTime+p.duration),p.delayLoadingTime=(new Date).getTime()+j.getTimeToLoadDelay(),j.setTimeToLoadDelay(0))),p}var c=this.context,d=g["default"](c).getInstance().log,e=a.adapter,f=a.sourceBufferController,h=a.textController,i={execute:b};return i}Object.defineProperty(c,"__esModule",{value:!0});var f=a(8),g=d(f),h=a(10),i=d(h);e.__dashjs_factory_name="NextFragmentRequestRule",c["default"]=i["default"].getClassFactory(e),b.exports=c["default"]},{10:10,8:8}],140:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){for(var b="",c=0;c<a.length;++c){var d=a[c];b+=d.uchar}var e=b.length,f=b.replace(/^\s+/,"").length;return e-f}function b(a){return"left: "+3.125*a.x+"%; top: "+6.66*a.y1+"%; width: "+(100-3.125*a.x)+"%; height: "+6.66*Math.max(a.y2-1-a.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function c(a){return"red"===a?"rgb(255, 0, 0)":"green"===a?"rgb(0, 255, 0)":"blue"===a?"rgb(0, 0, 255)":"cyan"===a?"rgb(0, 255, 255)":"magenta"===a?"rgb(255, 0, 255)":"yellow"===a?"rgb(255, 255, 0)":"white"===a?"rgb(255, 255, 255)":"black"===a?"rgb(0, 0, 0)":a}function d(a,b){var d=a.videoHeight/15;return b?"font-size: "+d+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(b.foreground?c(b.foreground):"rgb(255, 255, 255)")+"; font-style: "+(b.italics?"italic":"normal")+"; text-decoration: "+(b.underline?"underline":"none")+"; white-space: pre; background-color: "+(b.background?c(b.background):"transparent")+";":"font-size: "+d+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function e(a){var b=a.replace(/^\s+/g,"");return b}function f(a){var b=a.replace(/\s+$/g,"");return b}function g(c,g,i,j){var k=null,l=null,m=!1,n=-1,o={start:g,end:i,spans:[]},p="style_cea608_white_black",q={},r={},s=[],t=void 0,u=void 0;for(t=0;15>t;++t){var v=j.rows[t],w="",x=null;if(!1===v.isEmpty()){var y=a(v.chars);null===k&&(k={x:y,y1:t,y2:t+1,p:[]}),y!==n&&m&&(k.p.push(o),o={start:g,end:i,spans:[]},k.y2=t,k.name="region_"+k.x+"_"+k.y1+"_"+k.y2,!1===q.hasOwnProperty(k.name)?(s.push(k),q[k.name]=k):(l=q[k.name],l.p.contat(k.p)),k={x:y,y1:t,y2:t+1,p:[]});for(var z=0;z<v.chars.length;++z){var A=v.chars[z],B=A.penState;if(null===x||!B.equals(x)){w.trim().length>0&&(o.spans.push({name:p,line:w,row:t}),w="");var C="style_cea608_"+B.foreground+"_"+B.background;B.underline&&(C+="_underline"),B.italics&&(C+="_italics"),r.hasOwnProperty(C)||(r[C]=JSON.parse(JSON.stringify(B))),x=B,p=C}w+=A.uchar}w.trim().length>0&&o.spans.push({name:p,line:w,row:t}),m=!0,n=y}else m=!1,n=-1,k&&(k.p.push(o),o={start:g,end:i,spans:[]},k.y2=t,k.name="region_"+k.x+"_"+k.y1+"_"+k.y2,!1===q.hasOwnProperty(k.name)?(s.push(k),q[k.name]=k):(l=q[k.name],l.p.contat(k.p)),k=null)}k&&(k.p.push(o),k.y2=t+1,k.name="region_"+k.x+"_"+k.y1+"_"+k.y2,!1===q.hasOwnProperty(k.name)?(s.push(k),q[k.name]=k):(l=q[k.name],l.p.contat(k.p)),k=null);var D=[];for(t=0;t<s.length;++t){var E=s[t],F="sub_cea608_"+h++,G=document.createElement("div");G.id=F;var H=b(E);G.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+H;var I=document.createElement("div");I.className="paragraph bodyStyle",I.style.cssText=d(c);var J=document.createElement("div");J.className="cueUniWrapper",J.style.cssText="unicode-bidi: normal; direction: ltr;";for(var K=0;K<E.p.length;++K){var L=E.p[K],M=0;for(u=0;u<L.spans.length;++u){var N=L.spans[u];if(N.line.length>0){if(0!==u&&M!=N.row){var O=document.createElement("br");O.className="lineBreak",J.appendChild(O)}var P=!1;M===N.row&&(P=!0),M=N.row;var Q=r[N.name],R=document.createElement("span");R.className="spanPadding "+N.name+" customSpanColor",R.style.cssText=d(c,Q),0!==u&&P?u===L.spans.length-1?R.textContent=f(N.line):R.textContent=N.line:0===u&&L.spans.length>1&&N.row===L.spans[1].row?R.textContent=e(N.line):R.textContent=N.line.trim(),J.appendChild(R)}}}I.appendChild(J),G.appendChild(I);var S={bodyStyle:["%",90]};for(u in r)r.hasOwnProperty(u)&&(S[u]=["%",90]);D.push({type:"html",start:g,end:i,cueHTMLElement:G,cueID:F,cellResolution:[32,15],isFromCEA608:!0,regions:s,regionID:E.name,videoHeight:c.videoHeight,videoWidth:c.videoWidth,fontSize:S,lineHeight:{},linePadding:{}})}return D}var h=0,i=void 0;return i={createHTMLCaptionsFromScreen:g}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f);e.__dashjs_factory_name="EmbeddedTextHtmlRender",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10}],141:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){B=!1,C=null,D=null,E=null,F=null,G=null,A=!1,w.on(i["default"].DATA_UPDATE_COMPLETED,r,this),w.on(i["default"].INIT_FRAGMENT_LOADED,s,this)}function c(a,b,c){E=a,j(b),F=c,G=F.getRepresentationController(),H=m["default"](v).getInstance()}function d(a){try{D=x.createSourceBuffer(C,a),B||(D.hasOwnProperty("initialize")&&D.initialize(E,this),B=!0)}catch(b){y.mediaSourceError("Error creating "+E+" source buffer.")}return D}function e(){return E}function f(){return D}function h(a){D=a}function j(a){C=a}function k(){return C}function l(a){F=a}function n(){return F}function o(){return 0}function p(){return 0}function q(a){w.off(i["default"].DATA_UPDATE_COMPLETED,r,this),w.off(i["default"].INIT_FRAGMENT_LOADED,s,this),a||(x.abort(C,D),x.removeSourceBuffer(C,D))}function r(a){a.sender.getStreamProcessor()===F&&w.trigger(i["default"].TIMED_TEXT_REQUESTED,{index:0,sender:a.sender})}function s(a){a.fragmentModel===F.getFragmentModel()&&a.chunk.bytes&&x.append(D,a.chunk)}function t(){return A}function u(a,b){var c=H.extract(a,E,b);c?x.append(c):w.trigger(i["default"].INIT_REQUESTED,{sender:z})}var v=this.context,w=g["default"](v).getInstance(),x=a.sourceBufferController,y=a.errHandler,z=void 0,A=void 0,B=void 0,C=void 0,D=void 0,E=void 0,F=void 0,G=void 0,H=void 0;return z={initialize:c,createBuffer:d,getType:e,getStreamProcessor:n,setStreamProcessor:l,getBuffer:f,setBuffer:h,getBufferLevel:o,getCriticalBufferLevel:p,setMediaSource:j,getMediaSource:k,getIsBufferingCompleted:t,switchInitData:u,reset:q},b(),z}Object.defineProperty(c,"__esModule",{value:!0});var f=a(9),g=d(f),h=a(13),i=d(h),j=a(10),k=d(j),l=a(153),m=d(l);e.__dashjs_factory_name="NotFragmentedTextBufferController",c["default"]=k["default"].getClassFactory(e),b.exports=c["default"]},{10:10,13:13,153:153,9:9}],142:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(a){t="fragmentedText"===a.type?i["default"](s).create({metricsModel:a.metricsModel,manifestModel:a.manifestModel,sourceBufferController:a.sourceBufferController,errHandler:a.errHandler,streamController:a.streamController,mediaController:a.mediaController,adapter:a.adapter,textController:a.textController}):k["default"](s).create({errHandler:a.errHandler,sourceBufferController:a.sourceBufferController})}function c(a,b,c){return t.initialize(a,b,c)}function d(a){return t.createBuffer(a)}function e(){return t.getType()}function f(){return t.getBuffer()}function g(a){t.setBuffer(a)}function h(){return t.getMediaSource()}function j(a){t.setMediaSource(a)}function l(a){t.setStreamProcessor(a)}function m(){t.getStreamProcessor()}function n(){return t.getBufferLevel()}function o(){return t.getCriticalBufferLevel()}function p(a){t.reset(a)}function q(){return t.getIsBufferingCompleted()}function r(a,b){t.switchInitData(a,b)}var s=this.context,t=void 0,u=void 0;return u={initialize:c,createBuffer:d,getType:e,getStreamProcessor:m,setStreamProcessor:l,getBuffer:f,setBuffer:g,getBufferLevel:n,getCriticalBufferLevel:o,setMediaSource:j,getMediaSource:h,getIsBufferingCompleted:q,switchInitData:r,reset:p},b(a),u}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(62),i=d(h),j=a(141),k=d(j);e.__dashjs_factory_name="TextBufferController",c["default"]=g["default"].getClassFactory(e),c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{10:10,141:141,62:62}],143:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){v=k["default"](j).getInstance(),w=m["default"](j).getInstance(),x=o["default"](j).getInstance(),n=i["default"](j).getInstance(),v.initialize(),p=!1}function b(a){a&&(a.errHandler&&(q=a.errHandler),a.dashManifestModel&&(r=a.dashManifestModel),a.mediaController&&(s=a.mediaController),a.videoModel&&(t=a.videoModel),a.streamController&&(u=a.streamController),a.textTracks&&(v=a.textTracks),a.vttParser&&(w=a.vttParser),a.ttmlParser&&(x=a.ttmlParser),n.setConfig({errHandler:q,dashManifestModel:r,mediaController:s,videoModel:t,streamController:u,textTracks:v,vttParser:w,ttmlParser:x}))}function c(){return n}function d(){return p}function e(a){n.addEmbeddedTrack(a)}function f(){for(var a=n.getConfig(),b=a.fragmentModel,c=a.embeddedTracks,d=a.isFragmented,e=a.fragmentedTracks,f=a.allTracksAreDisabled,g=t.getElement(),h=g.textTracks,i=h.length,j=i-c.length,k=v.getCurrentTrackIdx(),l=0;i>l;l++){var m=h[l];if(f="showing"!==m.mode,"showing"===m.mode){if(k!==l&&(v.setCurrentTrackIdx(l),v.addCaptions(l,0,null),d&&j>l)){var o=s.getCurrentTrackFor("fragmentedText",u.getActiveStreamInfo()),p=e[l];p!==o&&(b.abortRequests(),v.deleteTrackCues(o),s.setTrack(p),n.setCurrentFragmentedTrackIdx(l))}break}}f&&v.setCurrentTrackIdx(-1)}function g(){var a=n.getConfig().textTracks;return a.getCurrentTrackIdx()}function h(){p=!1,n.resetEmbedded()}var j=this.context,l=void 0,n=void 0,p=void 0,q=void 0,r=void 0,s=void 0,t=void 0,u=void 0,v=void 0,w=void 0,x=void 0;return l={setConfig:b,getTextSourceBuffer:c,getAllTracksAreDisabled:d,addEmbeddedTrack:e,setTextTrack:f,getCurrentTrackIdx:g,reset:h},a(),l}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(144),i=d(h),j=a(145),k=d(j),l=a(160),m=d(l),n=a(158),o=d(n);e.__dashjs_factory_name="TextController",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,144:144,145:145,158:158,160:160}],144:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b){I=null,P=null,Q=!1,R=NaN,S=[],V=null,z||d();var c=b.getStreamProcessor();if(M=c.getMediaInfoArr(),N.setConfig({videoModel:T}),N.initialize(),O=!G.getIsTextTrack(a),D=k["default"](t).getInstance(),L=i["default"](t).getInstance(),L.setConfig({boxParser:D}),O){P=c.getFragmentModel(),this.buffered=m["default"](t).create(),S=H.getTracksFor("fragmentedText",U.getActiveStreamInfo());for(var e=H.getCurrentTrackFor("fragmentedText",U.getActiveStreamInfo()),f=0;f<S.length;f++)if(S[f]===e){W=f;break}}}function b(){N.deleteAllTextTracks(),I=null,L=null,M=null,N=null,O=!1,P=null,Q=!1,R=NaN,S=[],T=null,U=null,z=!1,X=null}function c(a){var b=a.chunk;b.mediaInfo.embeddedCaptions&&n(b.bytes,b)}function d(){X=[],M=[],T=s["default"](t).getInstance(),N=u["default"](t).getInstance(),N.setConfig({videoModel:T}),N.initialize(),D=k["default"](t).getInstance(),L=i["default"](t).getInstance(),L.setConfig({boxParser:D}),O=!1,W=null,Y=!1,Z=0,aa=[],_=[],$=null,z=!0,ba=w["default"](t).getInstance(),x.on(E["default"].VIDEO_CHUNK_RECEIVED,c,this)}function e(){x.off(E["default"].VIDEO_CHUNK_RECEIVED,c,this),null!==N&&N.deleteAllTextTracks(),z=!1,X=[],aa=[null,null],_=[],$=null}function f(a){z||d(),"CC1"===a.id||"CC3"===a.id?X.push(a):v("Warning: Embedded track "+a.id+" not supported!")}function h(a){a&&(a.errHandler&&(F=a.errHandler),a.dashManifestModel&&(G=a.dashManifestModel),a.mediaController&&(H=a.mediaController),a.videoModel&&(T=a.videoModel),a.streamController&&(U=a.streamController),a.textTracks&&(N=a.textTracks),a.vttParser&&(J=a.vttParser),a.ttmlParser&&(K=a.ttmlParser))}function j(){var a={errHandler:F,dashManifestModel:G,mediaController:H,videoModel:T,fragmentModel:P,streamController:U,textTracks:N,isFragmented:O,embeddedTracks:X,fragmentedTracks:S};return a}function l(a){W=a}function n(a,b){function c(a,b){var c=new g["default"],d={subtitle:"subtitles",caption:"captions"},e=function(){var a=b.roles.length>0?d[b.roles[0]]:d.caption;return a=a===d.caption||a===d.subtitle?a:d.caption},f=function(){var a=!1;return b.codec&&b.codec.search("stpp")>=0&&(a=!0),b.mimeType&&b.mimeType.search("ttml")>=0&&(a=!0),a};c.captionData=a,c.lang=b.lang,c.label=b.id,c.index=b.index,c.isTTML=f(),c.video=T.getElement(),c.defaultTrack=p(b),c.isFragmented=O,c.isEmbedded=!!b.isEmbedded,c.kind=e(),c.roles=b.roles;var h=(M?M.length:0)+X.length;N.addTextTrack(c,h)}var d,e,f,h,i,j,k,l=b.mediaInfo,m=l.type,n=l.mimeType,q=l.codec||n;if(!q)return void v("No text type defined");if("fragmentedText"===m)if(Q)if(j=L.getSamplesInfo(a),e=j.sampleList,!V&&e.length>0&&(V=e[0].cts-b.start*R),q.search("stpp")>=0)for(I=null!==I?I:r(q),f=0;f<e.length;f++){var s=e[f],t=s.cts,u=t-V;this.buffered.add(u/R,(u+s.duration)/R);var w=new DataView(a,s.offset,s.subSizes[0]);k=y["default"].Utils.dataViewToString(w,"utf-8");var x=[],z=s.offset+s.subSizes[0];for(h=1;h<s.subSizes.length;h++){var B=new Uint8Array(a,z,s.subSizes[h]),C=String.fromCharCode.apply(null,B);x.push(C),z+=s.subSizes[h]}try{d=I.parse(k,t/R,(t+s.duration)/R,x),N.addCaptions(W,V/R,d)}catch(D){v("TTML parser error: "+D.message)}}else{var E=[];for(f=0;f<e.length;f++){var G=e[f];G.cts-=V,this.buffered.add(G.cts/R,(G.cts+G.duration)/R);var H=a.slice(G.offset,G.offset+G.size),J=y["default"].parseBuffer(H);for(h=0;h<J.boxes.length;h++){var K=J.boxes[h];if(v("VTT box1: "+K.type),"vtte"!==K.type&&"vttc"===K.type)for(v("VTT vttc boxes.length = "+K.boxes.length),i=0;i<K.boxes.length;i++){var P=K.boxes[i];if(v("VTT box2: "+P.type),"payl"===P.type){var S=P.cue_text;v("VTT cue_text = "+S);var U=G.cts/R,Y=(G.cts+G.duration)/R;E.push({start:U,end:Y,data:S,styles:{}}),v("VTT "+U+"-"+Y+" : "+S)}}}}E.length>0&&N.addCaptions(W,0,E);
}else{for(Q=!0,f=0;f<M.length;f++)c(null,M[f]);R=L.getMediaTimescaleFromMoov(a)}else if("text"===m){var w=new DataView(a,0,a.byteLength);k=y["default"].Utils.dataViewToString(w,"utf-8");try{d=r(q).parse(k),c(d,l)}catch(D){F.timedTextError(D,"parse",k)}}else if("video"===m)if("InitializationSegment"===b.segmentType){if(0===Z)for(Z=L.getMediaTimescaleFromMoov(a),f=0;f<X.length;f++)c(null,X[f])}else{if(0===Z)return void v("CEA-608: No timescale for embeddedTextTrack yet");var ca=function(a,b){function c(a,c,d){var e=null;if(T.getTTMLRenderingDiv())e=ba.createHTMLCaptionsFromScreen(T.getElement(),a,c,d);else{var f=d.getDisplayText();e=[{start:a,end:c,data:f,styles:{}}]}e&&N.addCaptions(b,0,e)}return c};j=L.getSamplesInfo(a);var da=j.sequenceNumber;if(!aa[0]&&!aa[1]){var ea=void 0,fa=void 0,ga=void 0;for(f=0;f<X.length;f++){if("CC1"===X[f].id?(ea=0,ga=N.getTrackIdxForId("CC1")):"CC3"===X[f].id&&(ea=1,ga=N.getTrackIdxForId("CC3")),-1===ga)return void v("CEA-608: data before track is ready.");fa=ca(this,ga),aa[f]=new A["default"].Cea608Parser(f,{newCue:fa},null)}}if(Z&&-1==_.indexOf(da)){if(null!==$&&da!==$+1)for(f=0;f<aa.length;f++)aa[f]&&aa[f].reset();for(var ha=o(a),ia=0;ia<aa.length;ia++){var ja=ha.fields[ia],ka=aa[ia];if(ka){for(f=0;f<ja.length;f++)ka.addData(ja[f][0]/Z,ja[f][1]);ha.endTime&&ka.cueSplitAtTime(ha.endTime/Z)}}$=da,_.push(da)}}}function o(a){var b=D.parse(a),c=b.getBox("moof"),d=b.getBox("tfdt"),e=b.getBox("tfhd"),f=b.getBoxes("trun"),g=null;if(0===f.length)return null;g=f[0],f.length>1&&v("Warning: Too many truns");for(var h=c.offset+g.data_offset,i=g.sample_count,j=h,k=d.baseMediaDecodeTime,l=new DataView(a),m={startTime:null,endTime:null,fields:[[],[]]},n=0,o=0;i>o;o++){var p=g.samples[o];void 0===p.sample_duration&&(p.sample_duration=e.default_sample_duration),void 0===p.sample_size&&(p.sample_size=e.default_sample_size),void 0===p.sample_composition_time_offset&&(p.sample_composition_time_offset=0);for(var q=k+n+p.sample_composition_time_offset,r=A["default"].findCea608Nalus(l,j,p.sample_size),s=0;s<r.length;s++)for(var t=A["default"].extractCea608DataFromRange(l,r[s]),u=0;2>u;u++)t[u].length>0&&m.fields[u].push([q,t[u]]);n+=p.sample_duration,j+=p.sample_size}m.fields[0].sort(function(a,b){return a[0]-b[0]}),m.fields[1].sort(function(a,b){return a[0]-b[0]});var w=k+n;return m.startTime=k,m.endTime=w,m}function p(a){var b=!1;return X.length>1&&a.isEmbedded?b=a.id&&"CC1"===a.id:1===X.length?a.id&&"CC"===a.id.substring(0,2)&&(b=!0):0===X.length&&(b=a.index===M[0].index),b}function r(a){var b;return a.search("vtt")>=0?b=J:(a.search("ttml")>=0||a.search("stpp")>=0)&&(b=K,b.setConfig({videoModel:T})),b}var t=this.context,v=q["default"](t).getInstance().log,x=C["default"](t).getInstance(),z=!1,B=void 0,D=void 0,F=void 0,G=void 0,H=void 0,I=void 0,J=void 0,K=void 0,L=void 0,M=void 0,N=void 0,O=void 0,P=void 0,Q=void 0,R=void 0,S=void 0,T=void 0,U=void 0,V=void 0,W=void 0,X=void 0,Y=void 0,Z=void 0,$=void 0,_=void 0,aa=void 0,ba=void 0;return B={initialize:a,append:n,abort:b,addEmbeddedTrack:f,resetEmbedded:e,setConfig:h,getConfig:j,setCurrentFragmentedTrackIdx:l}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(174),g=d(f),h=a(33),i=d(h),j=a(147),k=d(j),l=a(149),m=d(l),n=a(10),o=d(n),p=a(8),q=d(p),r=a(102),s=d(r),t=a(145),u=d(t),v=a(140),w=d(v),x=a(6),y=d(x),z=a(2),A=d(z),B=a(9),C=d(B),D=a(13),E=d(D);e.__dashjs_factory_name="TextSourceBuffer",c["default"]=o["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,102:102,13:13,140:140,145:145,147:147,149:149,174:174,2:2,33:33,6:6,8:8,9:9}],145:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(D=window.VTTCue||window.TextTrackCue,G=[],H=[],I=-1,J=0,K=0,L=0,M=0,N=null,O=null,R=!1,S=2147483647,P=!!navigator.userAgent.match(/Chrome/)&&!navigator.userAgent.match(/Edge/),void 0!==document.fullscreenElement?Q="fullscreenElement":void 0!==document.webkitIsFullScreen?Q="webkitIsFullScreen":document.msFullscreenElement?Q="msFullscreenElement":document.mozFullScreen&&(Q="mozFullScreen"))}function b(a){var b=G[a].kind,c=void 0!==G[a].label?G[a].label:G[a].lang,d=G[a].lang,e=P?document.createElement("track"):F.addTextTrack(b,c,d);return P&&(e.kind=b,e.label=c,e.srclang=d),e}function c(a){R=a,N&&!document[Q]&&(N.style.zIndex=a?S:null)}function d(a,c){if(G.length===c)return void B("Trying to add too many tracks.");if(G.push(a),void 0===F&&(F=a.video),G.length===c){G.sort(function(a,b){return a.index-b.index}),N=E.getTTMLRenderingDiv();for(var d=-1,e=0;e<G.length;e++){var f=b.call(this,e);H.push(f),G[e].defaultTrack&&(f["default"]=!0,d=e),P&&F.appendChild(f);var g=F.textTracks[e];g.nonAddedCues=[],N&&(G[e].isTTML||G[e].isEmbedded)?g.renderingType="html":g.renderingType="default",this.addCaptions(e,0,G[e].captionData),A.trigger(i["default"].TEXT_TRACK_ADDED)}if(q.call(this,d),d>=0){for(var h=0;h<F.textTracks.length;h++)F.textTracks[h].mode=h===d?"showing":"hidden";this.addCaptions(d,0,null)}A.trigger(i["default"].TEXT_TRACKS_ADDED,{index:I,tracks:G})}}function e(a,b,c,d,e,f){var g=a/b,h=c/d,i=0,j=0;g>h?(j=b,i=j/d*c):(i=a,j=i/c*d);var k=0,l=0,m=0,n=0,o=i/j;return o>e?(n=j,m=j/(1/e),k=(a-m)/2,l=0):(m=i,n=i/e,k=0,l=(b-n)/2),f?{x:k+.1*m,y:l+.1*n,w:.8*m,h:.8*n}:{x:k,y:l,w:m,h:n}}function f(){var a=this.getCurrentTextTrack();if(a&&"html"===a.renderingType){var b=F.clientWidth/F.clientHeight,c=!1;a.isFromCEA608&&(b=3.5/3,c=!0);var d=e.call(this,F.clientWidth,F.clientHeight,F.videoWidth,F.videoHeight,b,c),f=d.w,g=d.h;if(f!=L||g!=M){J=d.x,K=d.y,L=f,M=g,N.style.left=J+"px",N.style.top=K+"px",N.style.width=L+"px",N.style.height=M+"px";for(var h=0;a.activeCues&&h<a.activeCues.length;++h){var i=a.activeCues[h];i.scaleCue(i)}Q&&document[Q]||R?N.style.zIndex=S:N.style.zIndex=null}}}function h(a,b){var c=Math.round(.01*a*b).toString()+"px";return c}function j(a){var b=L,c=M;if(b*c!==0&&a.layout){var d=a.layout,e=h(d.left,b),f=h(d.top,c),g=h(d.width,b),i=h(d.height,c);N.style.left=e,N.style.top=f,N.style.width=g,N.style.height=i;var j=N.firstChild;j&&j.style&&(j.style.left="0px",j.style.top="0px",j.style.width=g,j.style.height=i,Q&&document[Q]||R?j.style.zIndex=S:j.style.zIndex=null)}}function k(a){var b,c,d,e,f,g=L,h=M,i=[g/a.cellResolution[0],h/a.cellResolution[1]];if(a.linePadding)for(b in a.linePadding)if(a.linePadding.hasOwnProperty(b)){var j=a.linePadding[b];c=(j*i[0]).toString();for(var k=document.getElementsByClassName("spanPadding"),l=0;l<k.length;l++)k[l].style.cssText=k[l].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+c),k[l].style.cssText=k[l].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+c)}if(a.fontSize)for(b in a.fontSize)if(a.fontSize.hasOwnProperty(b)){"%"===a.fontSize[b][0]?d=a.fontSize[b][1]/100:"c"===a.fontSize[b][0]&&(d=a.fontSize[b][1]),c=(d*i[1]).toString(),f="defaultFontSize"!==b?document.getElementsByClassName(b):document.getElementsByClassName("paragraph");for(var m=0;m<f.length;m++)f[m].style.cssText=f[m].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+c)}if(a.lineHeight)for(b in a.lineHeight)if(a.lineHeight.hasOwnProperty(b)){"%"===a.lineHeight[b][0]?e=a.lineHeight[b][1]/100:"c"===a.fontSize[b][0]&&(e=a.lineHeight[b][1]),c=(e*i[1]).toString(),f=document.getElementsByClassName(b);for(var n=0;n<f.length;n++)f[n].style.cssText=f[n].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+c)}}function l(a,b,c){var d=a>=0?F.textTracks[a]:null,e=this;if(d){if("showing"!==d.mode)return void(c&&c.length>0&&(d.nonAddedCues=d.nonAddedCues.concat(c)));if(c||(c=d.nonAddedCues,d.nonAddedCues=[]),c&&0!==c.length)for(var g in c){var h,i=c[g];d.cellResolution=i.cellResolution,d.isFromCEA608=i.isFromCEA608,O||"html"!==i.type&&"image"!==i.type||(O=setInterval(f.bind(this),500)),"image"===i.type?(h=new D(i.start-b,i.end-b,""),h.image=i.data,h.id=i.id,h.size=0,h.type="image",h.layout=i.layout,h.scaleCue=j.bind(e),h.onenter=function(){if(N&&"showing"===d.mode){var a=new Image;a.id="ttmlImage_"+this.id,a.src=this.image,a.style.cssText="pointer-events: none; display: block; visibility: visible !important; position: relative !important;",N.appendChild(a),j.call(e,this)}},h.onexit=function(){if(N)for(var a=N.childNodes,b=0;b<a.length;b++)a[b].id==="ttmlImage_"+this.id&&N.removeChild(a[b])}):"html"===i.type?(h=new D(i.start-b,i.end-b,""),h.cueHTMLElement=i.cueHTMLElement,h.regions=i.regions,h.regionID=i.regionID,h.cueID=i.cueID,h.videoWidth=i.videoWidth,h.videoHeight=i.videoHeight,h.cellResolution=i.cellResolution,h.fontSize=i.fontSize,h.lineHeight=i.lineHeight,h.linePadding=i.linePadding,h.scaleCue=k.bind(e),N.style.left=J+"px",N.style.top=K+"px",N.style.width=L+"px",N.style.height=M+"px",h.onenter=function(){"showing"===d.mode&&(B("Cue "+this.startTime+"-"+this.endTime+" : "+this.cueHTMLElement.id+" : "+this.cueHTMLElement.innerText),N.appendChild(this.cueHTMLElement),k.call(e,this))},h.onexit=function(){for(var a=N.childNodes,b=0;b<a.length;++b)a[b].id===this.cueID&&N.removeChild(a[b])}):(h=new D(i.start-b,i.end-b,i.data),i.styles&&(void 0!==i.styles.align&&"align"in h&&(h.align=i.styles.align),void 0!==i.styles.line&&"line"in h&&(h.line=i.styles.line),void 0!==i.styles.position&&"position"in h&&(h.position=i.styles.position),void 0!==i.styles.size&&"size"in h&&(h.size=i.styles.size))),d.addCue(h)}}}function n(){return I>=0?F.textTracks[I]:null}function o(){return I}function p(a){for(var b=-1,c=0;c<F.textTracks.length;c++)if(F.textTracks[c].label===a){b=c;break}return b}function q(a){if(I=a,x.call(this),a>=0){var b=F.textTracks[a];"html"===b.renderingType?v.call(this):w.call(this)}else w.call(this)}function r(a){return F.textTracks[a]}function s(a){if(a.cues){for(var b=a.cues,c=b.length-1,d=c;d>=0;d--)a.removeCue(b[d]);a.mode="disabled"}}function t(){for(var a=H.length,b=0;a>b;b++)if(P)F.removeChild(H[b]);else{var c=r.call(this,b);c.nonAddedCues=[],s.call(this,c)}H=[],G=[],O&&(clearInterval(O),O=null),x.call(this)}function u(a){F.removeChild(H[a]),H.splice(a,1)}function v(){if(P){var a=document.getElementById("native-cue-style");if(!a){a=document.createElement("style"),a.id="native-cue-style",document.head.appendChild(a);var b=a.sheet;F.id?b.insertRule("#"+F.id+"::cue {background: transparent}",0):0!==F.classList.length?b.insertRule("."+F.className+"::cue {background: transparent}",0):b.insertRule("video::cue {background: transparent}",0)}}}function w(){if(P){var a=document.getElementById("native-cue-style");a&&document.head.removeChild(a)}}function x(){if(N)for(;N.firstChild;)N.removeChild(N.firstChild)}function y(a){a&&a.videoModel&&(E=a.videoModel)}var z=this.context,A=g["default"](z).getInstance(),B=m["default"](z).getInstance().log,C=void 0,D=void 0,E=void 0,F=void 0,G=void 0,H=void 0,I=void 0,J=void 0,K=void 0,L=void 0,M=void 0,N=void 0,O=void 0,P=void 0,Q=void 0,R=void 0,S=void 0;return C={initialize:a,displayCConTop:c,addTextTrack:d,addCaptions:l,getTextTrack:r,getCurrentTextTrack:n,getCurrentTrackIdx:o,setCurrentTrackIdx:q,getTrackIdxForId:p,deleteTrackCues:s,deleteAllTextTracks:t,deleteTextTrack:u,setConfig:y}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(9),g=d(f),h=a(13),i=d(h),j=a(10),k=d(j),l=a(8),m=d(l);e.__dashjs_factory_name="TextTracks",c["default"]=k["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,13:13,8:8,9:9}],146:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){n=m["default"](f).create({updateEventName:i["default"].SERVICE_LOCATION_BLACKLIST_CHANGED,loadFailedEventName:i["default"].FRAGMENT_LOADING_COMPLETED}),p=q["default"](f).create({blacklistController:n}),r=o["default"](f).create({blacklistController:n}),s=p}function b(a){a.selector&&(s=a.selector)}function c(a){s=j.getIsDVB(a)?r:p}function d(a){var b=a.baseUrls,c=a.selectedIdx;if(!isNaN(c))return b[c];var d=s.select(b);return d?(a.selectedIdx=b.indexOf(d),d):void h.trigger(i["default"].URL_RESOLUTION_FAILED,{error:new Error(t,u)})}function e(){n.reset()}var f=this.context,h=g["default"](f).getInstance(),j=k["default"](f).getInstance(),l=void 0,n=void 0,p=void 0,r=void 0,s=void 0;return l={chooseSelectorFromManifest:c,select:d,reset:e,setConfig:b},a(),l}Object.defineProperty(c,"__esModule",{value:!0});var f=a(9),g=d(f),h=a(13),i=d(h),j=a(22),k=d(j),l=a(61),m=d(l),n=a(162),o=d(n),p=a(161),q=d(p),r=a(10),s=d(r),t=1,u="Failed to resolve a valid URL";e.__dashjs_factory_name="BaseURLSelector";var v=s["default"].getClassFactory(e);v.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=t,v.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE=u,c["default"]=v,b.exports=c["default"]},{10:10,13:13,161:161,162:162,22:22,61:61,9:9}],147:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){if(!a)return null;void 0===a.fileStart&&(a.fileStart=0);var b=k["default"].parseBuffer(a),d=g["default"](c).create();return d.setData(b),d}var b=void 0,c=this.context;return b={parse:a}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(154),g=d(f),h=a(10),i=d(h),j=a(6),k=d(j);e.__dashjs_factory_name="BoxParser",c["default"]=i["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,154:154,6:6}],148:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){g=!1}function b(){var a="WebKitMediaSource"in window,b="MediaSource"in window;return a||b}function c(){return g}function d(a){g=a}function e(a,b){var c=a.canPlayType(b);return"probably"===c||"maybe"===c}var f=void 0,g=void 0;return f={supportsMediaSource:b,supportsEncryptedMedia:c,supportsCodec:e,setEncryptedMediaSupported:d},a(),f}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f);e.__dashjs_factory_name="Capabilities",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10}],149:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b){var c=0;for(c=0;c<this.customTimeRangeArray.length&&a>this.customTimeRangeArray[c].start;c++);for(this.customTimeRangeArray.splice(c,0,{start:a,end:b}),c=0;c<this.customTimeRangeArray.length-1;c++)this.mergeRanges(c,c+1)&&c--;this.length=this.customTimeRangeArray.length}function b(){this.customTimeRangeArray=[],this.length=0}function c(a,b){for(var c=0;c<this.customTimeRangeArray.length;c++)if(a<=this.customTimeRangeArray[c].start&&b>=this.customTimeRangeArray[c].end)this.customTimeRangeArray.splice(c,1),c--;else{if(a>this.customTimeRangeArray[c].start&&b<this.customTimeRangeArray[c].end){this.customTimeRangeArray.splice(c+1,0,{start:b,end:this.customTimeRangeArray[c].end}),this.customTimeRangeArray[c].end=a;break}a>this.customTimeRangeArray[c].start&&a<this.customTimeRangeArray[c].end?this.customTimeRangeArray[c].end=a:b>this.customTimeRangeArray[c].start&&b<this.customTimeRangeArray[c].end&&(this.customTimeRangeArray[c].start=b)}this.length=this.customTimeRangeArray.length}function d(a,b){var c=this.customTimeRangeArray[a],d=this.customTimeRangeArray[b];return c.start<=d.start&&d.start<=c.end&&c.end<=d.end?(c.end=d.end,this.customTimeRangeArray.splice(b,1),!0):d.start<=c.start&&c.start<=d.end&&d.end<=c.end?(c.start=d.start,this.customTimeRangeArray.splice(b,1),!0):d.start<=c.start&&c.start<=d.end&&c.end<=d.end?(this.customTimeRangeArray.splice(a,1),!0):c.start<=d.start&&d.start<=c.end&&d.end<=c.end&&(this.customTimeRangeArray.splice(b,1),!0)}function e(a){return this.customTimeRangeArray[a].start}function f(a){return this.customTimeRangeArray[a].end}var g=[],h=0;return{customTimeRangeArray:g,length:h,add:a,clear:b,remove:c,mergeRanges:d,start:e,end:f}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f);e.__dashjs_factory_name="CustomTimeRanges",c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{10:10}],150:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){if(void 0!==t)return t;t=!1;var b,c="1",d="1";try{"undefined"!=typeof window&&(b=window[a])}catch(e){return r("Warning: DOMStorage access denied: "+e.message),t}if(!b||a!==o&&a!==p)return t;try{b.setItem(c,d),b.removeItem(c),t=!0}catch(e){r("Warning: DOMStorage is supported, but cannot be used: "+e.message)}return t}function b(){a(o)&&l.forEach(function(a){var b=localStorage.getItem(a.oldKey);if(b){localStorage.removeItem(a.oldKey);try{localStorage.setItem(a.newKey,b)}catch(c){r(c.message)}}})}function c(){u=i["default"](q).getInstance(),b()}function d(){var a=6e5;return Math.round((new Date).getTime()/a)*a}function e(b,c){return a(b)&&u["get"+c+"CachingInfo"]().enabled}function f(a){if(!e(o,"LastMediaSettings"))return null;var b=n.replace(/\?/,a),c=JSON.parse(localStorage.getItem(b))||{},d=(new Date).getTime()-parseInt(c.timestamp,10)>=u.getLastMediaSettingsCachingInfo().ttl||!1,f=c.settings;return d&&(localStorage.removeItem(b),f=null),f}function g(a){var b=NaN;if(e(o,"LastBitrate")){var c=m.replace(/\?/,a),d=JSON.parse(localStorage.getItem(c))||{},f=(new Date).getTime()-parseInt(d.timestamp,10)>=u.getLastBitrateCachingInfo().ttl||!1,g=parseInt(d.bitrate,10);isNaN(g)||f?f&&localStorage.removeItem(c):(b=g,r("Last saved bitrate for "+a+" was "+g))}return b}function h(a,b){if(e(o,"LastMediaSettings")){var c=n.replace(/\?/,a);try{localStorage.setItem(c,JSON.stringify({settings:b,timestamp:d()}))}catch(f){r(f.message)}}}function j(a,b){if(e(o,"LastBitrate")&&b){var c=m.replace(/\?/,a);try{localStorage.setItem(c,JSON.stringify({bitrate:b/1e3,timestamp:d()}))}catch(f){r(f.message)}}}var q=this.context,r=k["default"](q).getInstance().log,s=void 0,t=void 0,u=void 0;return s={getSavedBitrateSettings:g,setSavedBitrateSettings:j,getSavedMediaSettings:f,setSavedMediaSettings:h,isSupported:a},c(),s}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(99),i=d(h),j=a(8),k=d(j),l=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],m="dashjs_?_bitrate",n="dashjs_?_settings",o="localStorage",p="sessionStorage";e.__dashjs_factory_name="DOMStorage";var q=g["default"].getSingletonFactory(e);c["default"]=q,b.exports=c["default"]},{10:10,8:8,99:99}],151:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(){return o}function c(a){o=a}function d(a,b){var c=!0,d=0,e=void 0,f=void 0;if(void 0===b&&(b=!1),a.tag>16777215?(n.getUint32(o)!==a.tag&&(c=!1),d=4):a.tag>65535?(e=n.getUint16(o),f=n.getUint8(o+2),256*e+f!==a.tag&&(c=!1),d=3):a.tag>255?(n.getUint16(o)!==a.tag&&(c=!1),d=2):(n.getUint8(o)!==a.tag&&(c=!1),d=1),!c&&a.required&&!b)throw new i["default"]("required tag not found");return c&&(o+=d),c}function e(a,b){var c=d(a,b);return c&&h(),c}function f(a){var b=void 0;return d(a),b=h(),m[a.parse](b)}function g(a,b){var c=d(a,b),e=void 0;return c&&(e=h(),o+=e),c}function h(a){var b=1,c=128,d=8,e=-1,f=0,g=n.getUint8(o),h=void 0;for(h=0;d>h;h+=1){if((g&c)===c){f=void 0===a?g&~c:g,e=h;break}c>>=1}for(h=0;e>h;h+=1,b+=1)f=f<<8|255&n.getUint8(o+b);return o+=b,f}function j(a){var b=void 0;switch(a){case 4:b=n.getFloat32(o),o+=4;break;case 8:b=n.getFloat64(o),o+=8}return b}function k(a){var b=0,c=void 0;for(c=0;a>c;c+=1)b<<=8,b|=255&n.getUint8(o+c);return o+=a,b}function l(){return o<n.byteLength}var m=void 0,n=new DataView(a.data),o=0;return m={getPos:b,setPos:c,consumeTag:d,consumeTagAndSize:e,parseTag:f,skipOverElement:g,getMatroskaCodedNum:h,getMatroskaFloat:j,getMatroskaUint:k,moreData:l}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(165),i=d(h);e.__dashjs_factory_name="EBMLParser",c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{10:10,165:165}],152:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){l.trigger(i["default"].ERROR,{error:"capability",event:a})}function b(a,b,c){l.trigger(i["default"].ERROR,{error:"download",event:{id:a,url:b,request:c}})}function c(a,b,c,d){l.trigger(i["default"].ERROR,{error:"manifestError",event:{message:a,id:b,manifest:c,event:d}})}function d(a,b,c){l.trigger(i["default"].ERROR,{error:"cc",event:{message:a,id:b,cc:c}})}function e(a){l.trigger(i["default"].ERROR,{error:"mediasource",event:a})}function f(a){l.trigger(i["default"].ERROR,{error:"key_session",event:a})}function h(a){l.trigger(i["default"].ERROR,{error:"key_message",event:a})}var j=void 0,k=this.context,l=g["default"](k).getInstance();return j={capabilityError:a,downloadError:b,manifestError:c,timedTextError:d,mediaSourceError:e,mediaKeySessionError:f,mediaKeyMessageError:h}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(9),g=d(f),h=a(13),i=d(h),j=a(10),k=d(j),l="mediasource",m="mediakeys",n="manifest",o="SIDX",p="content",q="initialization",r="xlink",s="codec",t="parse",u="nostreams",v="parse";e.__dashjs_factory_name="ErrorHandler";var w=k["default"].getSingletonFactory(e);w.CAPABILITY_ERROR_MEDIASOURCE=l,w.CAPABILITY_ERROR_MEDIAKEYS=m,w.DOWNLOAD_ERROR_ID_MANIFEST=n,w.DOWNLOAD_ERROR_ID_SIDX=o,w.DOWNLOAD_ERROR_ID_CONTENT=p,w.DOWNLOAD_ERROR_ID_INITIALIZATION=q,w.DOWNLOAD_ERROR_ID_XLINK=r,w.MANIFEST_ERROR_ID_CODEC=s,w.MANIFEST_ERROR_ID_PARSE=t,w.MANIFEST_ERROR_ID_NOSTREAMS=u,w.TIMED_TEXT_ERROR_ID_PARSE=v,c["default"]=w,b.exports=c["default"]},{10:10,13:13,9:9}],153:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){var b=a.streamId,c=a.representationId;d[b]=d[b]||{},d[b][c]=a}function b(a,b){return d&&d[a]&&d[a][b]?d[a][b]:null}function c(){d={}}var d={},e={save:a,extract:b,reset:c};return e}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f);e.__dashjs_factory_name="InitCache",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10}],154:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){return a&&k&&k.boxes&&0!==k.boxes.length?i(k.fetch(a)):null}function b(a){for(var b,c=k.fetchAll(a),d=[],e=0,f=c.length;f>e;e++)b=i(c[e]),b&&d.push(b);return d}function c(a){k=a}function d(){if(!k||!k.boxes||!k.boxes.length)return null;var a=k.boxes[k.boxes.length-1].type,c=b(a);return c[c.length-1]}function e(){return k._cursor.offset}function f(){l={offset:"_offset",size:"size",type:"type"},m={references:"references",timescale:"timescale",earliest_presentation_time:"earliest_presentation_time",first_offset:"first_offset"},n={reference_type:"reference_type",referenced_size:"referenced_size",subsegment_duration:"subsegment_duration"},o={id:"id",value:"value",timescale:"timescale",scheme_id_uri:"scheme_id_uri",presentation_time_delta:"presentation_time_delta",event_duration:"event_duration",message_data:"message_data"},p={timescale:"timescale"},q={sequence_number:"sequence_number"},r={entry_count:"entry_count",entries:"entries"},s={base_data_offset:"base_data_offset",sample_description_index:"sample_description_index",default_sample_duration:"default_sample_duration",default_sample_size:"default_sample_size",default_sample_flags:"default_sample_flags",flags:"flags"},t={version:"version",baseMediaDecodeTime:"baseMediaDecodeTime",flags:"flags"},u={sample_count:"sample_count",first_sample_flags:"first_sample_flags",data_offset:"data_offset",flags:"flags",samples:"samples"},v={sample_size:"sample_size",sample_duration:"sample_duration",sample_composition_time_offset:"sample_composition_time_offset"}}function h(a,b,c){for(var d in c)b[d]=a[c[d]]}function i(a){if(!a)return null;var b,c,d=new g["default"];switch(h(a,d,l),a.hasOwnProperty("_incomplete")&&(d.isComplete=!a._incomplete),d.type){case"sidx":if(h(a,d,m),d.references)for(b=0,c=d.references.length;c>b;b++)h(a.references[b],d.references[b],n);break;case"emsg":h(a,d,o);break;case"mdhd":h(a,d,p);break;case"mfhd":h(a,d,q);break;case"subs":h(a,d,r);break;case"tfhd":h(a,d,s);break;case"tfdt":h(a,d,t);break;case"trun":if(h(a,d,u),d.samples)for(b=0,c=d.samples.length;c>b;b++)h(a.samples[b],d.samples[b],v)}return d}var j=void 0,k=void 0,l=void 0,m=void 0,n=void 0,o=void 0,p=void 0,q=void 0,r=void 0,s=void 0,t=void 0,u=void 0,v=void 0;return j={getBox:a,getBoxes:b,setData:c,getLastBox:d,getOffset:e},f(),j}Object.defineProperty(c,"__esModule",{value:!0});var f=a(168),g=d(f),h=a(10),i=d(h);e.__dashjs_factory_name="IsoFile",c["default"]=i["default"].getClassFactory(e),b.exports=c["default"]},{10:10,168:168}],155:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b){e=a,f=b}function b(){var a=f.getCurrentRepresentationInfo(),b=a.DVRWindow.end;return a.useCalculatedLiveEdgeTime&&(b=e.getExpectedLiveEdge(),e.setClientTimeOffset(b-a.DVRWindow.end)),b}function c(){e=null,f=null}var d=void 0,e=void 0,f=void 0;return d={initialize:a,getLiveEdge:b,reset:c}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f);e.__dashjs_factory_name="LiveEdgeFinder";var h=g["default"].getSingletonFactory(e);c["default"]=h,b.exports=c["default"]},{10:10}],156:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a,b){return JSON.stringify(a)===JSON.stringify(b)}var b=void 0;return b={areSimpleEquivalent:a}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f);e.__dashjs_factory_name="ObjectUtils",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10}],157:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){return a}function b(a){return a}var c=void 0;return c={modifyRequestURL:a,modifyRequestHeader:b}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f);e.__dashjs_factory_name="RequestModifier",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10}],158:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(a){a&&a.videoModel&&(da=a.videoModel)}function b(a){if(a.hasOwnProperty("begin")&&a.hasOwnProperty("end")){var b=o(a.begin),c=o(a.end);return[b,c]}return null}function c(){var a="cue_TTML_"+fa;return fa++,a}function d(a,b,c){function d(a,b){if(a.hasOwnProperty(b)){var c=a[b];f.indexOf(c)<0&&f.push(c)}}for(var e=[],f=[],g=[],h=0;h<a.length;h++){var i=a[h];d(i,"begin"),d(i,"end")}if(0===f.length)return g;if("undefined"!=typeof b&&"undefined"!=typeof c){for(var h=0;h<f.length;h++){var j=o(f[h]);j>b&&c>j&&e.push(j)}e.push(b),e.push(c)}else for(var h=0;h<f.length;h++)e.push(o(f[h]));e.sort(function(a,b){return a-b});for(var h=0;h<e.length-1;h++)g.push([e[h],e[h+1]]);return g}function e(a,b){return"undefined"!=typeof b&&b>a&&(a=b),a}function f(a,b){return"undefined"!=typeof b&&a>b&&(a=b),a}function g(a,b,c){var d=o(a.begin),g=o(a.end);return d=e(d,b),g=f(g,c),"undefined"!=typeof b&&"undefined"!=typeof c&&(b>g||d>c)?(N("TTML: Cue "+d+"-"+g+" outside interval "+b+"-"+c),null):[d,g]}function h(a,c){var d=!0;if(a.hasOwnProperty("span")){var e=b(a.span);null!==e&&(d=e[0]<c[1]&&e[1]>c[0])}return d}function j(a,e,f,i){var j=void 0,k=void 0,l=void 0,m=void 0,n=void 0,o=void 0,r="";if(Q=ea.xml_str2json(a),!Q)throw new Error("TTML document could not be parsed");if(da.getTTMLRenderingDiv()&&(n="html"),j=Q.tt,!j)throw new Error("TTML document lacks tt element");var s=p(j,"http://www.w3.org/ns/ttml");if(s&&q(j,s),m=j["tts:extent"],k=j.head,!k)throw new Error("TTML document lacks head element");k.layout&&(S=k.layout.region_asArray),k.styling&&(R=k.styling.style_asArray);var t={};if(i)for(o=0;o<i.length;o++){var x="urn:mpeg:14496-30:subs:"+(o+1).toString(),y="data:image/png;base64,"+btoa(i[o]);t[x]=y}if(k.metadata){var z=k.metadata.image_asArray;if(z)for(o=0;o<z.length;o++){var x="#"+z[o]["xml:id"],A=z[o].imagetype.toLowerCase(),y="data:image/"+A+";base64,"+z[o].__text;t[x]=y}}if(l=j.body,!l)throw new Error("TTML document lacks body element");var B=G(),F=da.getElement().clientWidth,L=da.getElement().clientHeight,M=[F/B[0],L/B[1]];X["font-size"]=M[1]+"px;";var O=[];if(S)for(o=0;o<S.length;o++)O.push(D(JSON.parse(JSON.stringify(S[o])),M));var P=p(Q.tt,"http://www.w3.org/ns/ttml#parameter");j.hasOwnProperty(P+":frameRate")&&(j.frameRate=parseInt(j[P+":frameRate"],10));for(var W=[],Y=j.body_asArray[0].__children,Z=0;Z<Y.length;Z++){var $=Y[Z].div,_=null;if(null===(_=b($))){var aa=$.p_asArray;if(null===_&&(!aa||0===aa.length))return r="TTML has div that contains no timing and no paragraphs.",N(r),W;for(var ba=0;ba<aa.length;ba++){var ca=aa[ba],fa=ca.span_asArray,ga=[];if(ca.hasOwnProperty("begin")&&ca.hasOwnProperty("end")){var ha=g(ca,e,f);null!==ha&&ga.push(ha)}else ga=d(fa,e,f);if(0!==ga.length)for(var ia=ca.__children,ja=0;ja<ga.length;ja++){for(var ka=ga[ja],la=[],ma=0;ma<ia.length;ma++){var na=ia[ma];h(na,ka)&&la.push(na)}if(0!==la.length)if("html"===n){U={},V={},T={};var oa=J(ca,$,M),pa=K(ca,M),qa=pa[1];pa=pa[0];var ra=document.createElement("div");ra.className=qa;var sa=I(la,M);sa.className="cueDirUniWrapper",u("unicode-bidi",pa)&&(sa.style.cssText+=v("unicode-bidi",pa),w("unicode-bidi",pa)),u("direction",pa)&&(sa.style.cssText+=v("direction",pa),w("direction",pa)),u("padding-left",pa)&&u("padding-right",pa)&&(sa.innerHTML=H(sa,pa)),u("padding-left",pa)&&u("padding-right",pa)&&(w("padding-left",pa),w("padding-right",pa));var ta="";if(u("regionID",oa)){var ua=v("regionID",oa);ta=ua.slice(ua.indexOf(":")+1,ua.length-1)}pa&&(ra.style.cssText=pa.join(" ")+"display:flex;"),oa&&(oa=oa.join(" ")),ra.appendChild(sa);var va=document.createElement("div");va.appendChild(ra),va.id=c(),va.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+oa,0===Object.keys(T).length&&(T.defaultFontSize="100"),W.push({start:ka[0],end:ka[1],type:"html",cueHTMLElement:va,regions:O,regionID:ta,cueID:va.id,videoHeight:L,videoWidth:F,cellResolution:B,fontSize:T||{defaultFontSize:"100"},lineHeight:U,linePadding:V})}else{var wa="",xa=la;xa.length&&xa.forEach(function(a){if(a.hasOwnProperty("span")){var b=a.span.__children;b.forEach(function(a){b.hasOwnProperty("metadata")||(a.hasOwnProperty("#text")?wa+=a["#text"].replace(/[\r\n]+/gm," ").trim():"br"in a&&(wa+="\n"))})}else wa+=a.hasOwnProperty("br")?"\n":a["#text"].replace(/[\r\n]+/gm," ").trim()}),W.push({start:ka[0],end:ka[1],data:wa,type:"text"})}}else r="TTML: Empty paragraph"}}else{var ya=void 0;if($.region){var za=E(S,$.region);ya=C(za,m)}ya||(ya=C($,m));var Aa=$["smpte:backgroundImage"];void 0!==Aa&&void 0!==t[Aa]&&W.push({start:_[0],end:_[1],id:c(),data:t[Aa],type:"image",layout:ya})}}if(""!==r&&N(r),W.length>0)return W;throw new Error(r)}function n(){P=/^([0-9][0-9]+):([0-5][0-9]):([0-5][0-9])|(60)(\.([0-9])+)?$/,T={},U={},V={},W={top:"auto;",left:"auto;",width:"90%;",height:"10%;","align-items":"flex-start;",overflow:"visible;","-ms-writing-mode":"lr-tb, horizontal-tb;","-webkit-writing-mode":"horizontal-tb;","-moz-writing-mode":"horizontal-tb;","writing-mode":"horizontal-tb;"},X={color:"rgb(255,255,255);",direction:"ltr;","font-family":"monospace, sans-serif;","font-style":"normal;","line-height":"normal;","font-weight":"normal;","text-align":"start;","justify-content":"flex-start;","text-decoration":"none;","unicode-bidi":"normal;","white-space":"normal;",width:"100%;"},Y={monospace:"font-family: monospace;",sansSerif:"font-family: sans-serif;",serif:"font-family: serif;",monospaceSansSerif:"font-family: monospace, sans-serif;",monospaceSerif:"font-family: monospace, serif;",proportionalSansSerif:"font-family: Arial;",proportionalSerif:"font-family: Times New Roman;","default":"font-family: monospace, sans-serif;"},Z={right:["justify-content: flex-end;","text-align: right;"],start:["justify-content: flex-start;","text-align: start;"],center:["justify-content: center;","text-align: center;"],end:["justify-content: flex-end;","text-align: end;"],
left:["justify-content: flex-start;","text-align: left;"]},$={start:"text-align: start;",center:"text-align: center;",end:"text-align: end;",auto:""},_={wrap:"white-space: normal;",noWrap:"white-space: nowrap;"},aa={normal:"unicode-bidi: normal;",embed:"unicode-bidi: embed;",bidiOverride:"unicode-bidi: bidi-override;"},ba={before:"align-items: flex-start;",center:"align-items: center;",after:"align-items: flex-end;"},ca={lrtb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rltb:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;unicode-bidi: bidi-override;",tbrl:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;",tblr:"-webkit-writing-mode: vertical-lr;writing-mode: vertical-lr;-webkit-text-orientation: upright;text-orientation: upright;",lr:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;",rl:"-webkit-writing-mode: horizontal-tb;writing-mode: horizontal-tb;direction: rtl;",tb:"-webkit-writing-mode: vertical-rl;writing-mode: vertical-rl;-webkit-text-orientation: upright;text-orientation: upright;"},ea=new i["default"]({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,matchers:[]})}function o(a){var b,c,d,e=P.test(a);if(!e)return NaN;if(b=a.split(":"),c=parseFloat(b[0])*l+parseFloat(b[1])*m+parseFloat(b[2]),b[3]){if(d=Q.tt.frameRate,!d||isNaN(d))return NaN;c+=parseFloat(b[3])/d}return c}function p(a,b){var c=Object.keys(a).filter(function(c){return("xmlns"===c.split(":")[0]||"xmlns"===c.split(":")[1])&&a[c]===b}).map(function(a){return a.split(":")[2]||a.split(":")[1]});return 1!=c.length?null:c[0]}function q(a,b){for(var c in a)if(a.hasOwnProperty(c)){if(("object"==typeof a[c]||a[c]instanceof Object)&&!Array.isArray(a[c]))q(a[c],b);else if(Array.isArray(a[c]))for(var d=0;d<a[c].length;d++)q(a[c][d],b);var e=b+":",f=c.indexOf(e);if(f>=0){var g=c.slice(f+e.length);a[g]=a[c],delete a[c]}}}function r(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function s(a){var b=a.slice(1),c=b.match(/.{2}/g),d=parseFloat(parseInt(parseInt(c[3],16)/255*1e3,10)/1e3),e=c.slice(0,3).map(function(a){return parseInt(a,16)});return"rgba("+e.join(",")+","+d+");"}function t(a){var b=void 0,c=void 0,d=void 0;return b=a.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),c=parseInt(b[b.length-1],10)/255,d="rgba("+b[0]+","+b[1]+","+b[2]+","+c+");"}function u(a,b){for(var c=0;c<b.length;c++)if(b[c].indexOf(a)>-1)return!0;return!1}function v(a,b){for(var c=0;c<b.length;c++)if(b[c].indexOf(a)>-1)return b[c];return null}function w(a,b){b.splice(b.indexOf(v(a,b)),1)}function x(a,b){for(var c=0;c<a.length;c++)for(var d=0;d<b.length;d++)a[c]&&a[c].split(":")[0].indexOf(b[d].split(":")[0])>-1&&a.splice(c,1);return a.concat(b)}function y(a){var b=new Array(2),c=-1===a.indexOf(":")?0:a.indexOf(":"),d=void 0;return-1===a.indexOf("%")?-1===a.indexOf("c")?-1===a.indexOf("p")?b[0]=b[1]=null:(b[0]="p",d=a.indexOf("p")):(b[0]="c",d=a.indexOf("c")):(b[0]="%",d=a.indexOf("%")),b[1]=a.slice(c,d),b}function z(a,b,c){var d,e,f=[];for(var g in a)if(a.hasOwnProperty(g)){var h=g.replace("ebutts:","");h=h.replace("xml:",""),h=h.replace("tts:",""),h=r(h),a[h]=a[g],delete a[g]}if("line-padding"in a){var i=parseFloat(a["line-padding"].slice(a["line-padding"].indexOf(":")+1,a["line-padding"].indexOf("c")));"id"in a&&(V[a.id]=i);var j=i*b[0]+"px;";f.push("padding-left:"+j),f.push("padding-right:"+j)}if("font-size"in a){var k=y(a["font-size"]),l=parseFloat(k[1]);"id"in a&&(T[a.id]=k),"%"===k[0]?d=l/100*b[1]+"px;":"c"===k[0]&&(d=l*b[1]+"px;"),f.push("font-size:"+d)}if("line-height"in a)if("normal"===a["line-height"])f.push("line-height: normal;");else{var m=y(a["line-height"]),n=parseFloat(m[1]);"id"in a&&(U[a.id]=m),"%"===m[0]?e=n/100*b[1]+"px;":"c"===m[0]&&(e=n*b[1]+"px;"),f.push("line-height:"+e)}"font-family"in a&&(a["font-family"]in Y?f.push(Y[a["font-family"]]):f.push("font-family:"+a["font-family"]+";")),"text-align"in a&&a["text-align"]in Z&&(f.push(Z[a["text-align"]][0]),f.push(Z[a["text-align"]][1])),"multi-row-align"in a&&(u("text-align",f)&&"auto"!=a["multi-row-align"]&&w("text-align",f),a["multi-row-align"]in $&&f.push($[a["multi-row-align"]]));var o;return"background-color"in a&&(o=a["background-color"].indexOf("#")>-1&&a["background-color"].length-1===8?s(a["background-color"]):a["background-color"].indexOf("rgba")>-1?t(a["background-color"]):a["background-color"]+";",f.push("background-color: "+o)),"color"in a&&(o=a.color.indexOf("#")>-1&&a.color.length-1===8?s(a.color):a.color.indexOf("rgba")>-1?t(a.color):a.color+";",f.push("color: "+o)),"wrap-option"in a&&(a["wrap-option"]in _?f.push(_[a["wrap-option"]]):f.push("white-space:"+a["wrap-option"])),"unicode-bidi"in a&&(a["unicode-bidi"]in aa?f.push(aa[a["unicode-bidi"]]):f.push("unicode-bidi:"+a["unicode-bidi"])),"font-style"in a&&f.push("font-style:"+a["font-style"]+";"),"font-weight"in a&&f.push("font-weight:"+a["font-weight"]+";"),"direction"in a&&f.push("direction:"+a.direction+";"),"text-decoration"in a&&f.push("text-decoration:"+a["text-decoration"]+";"),c&&(f=f.concat(D(a,b))),Q.tt.hasOwnProperty("xml:space")&&"preserve"===Q.tt["xml:space"]&&f.push("white-space: pre;"),f}function A(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d["xml:id"]===b||d.id===b)return d}return null}function B(a,b,c){var d=[],e=a.match(/\S+/g);return e.forEach(function(a){var e=A(R,a);if(e){var f=z(JSON.parse(JSON.stringify(e)),b,c);d=d.concat(f)}}),d}function C(a,b){var c=/([\d\.]+)(%|px)\s+([\d\.]+)(%|px)/;if("tts:extent"in a&&"tts:origin"in a){var d=c.exec(a["tts:extent"]),e=c.exec(a["tts:origin"]);if(null===d||null===e)return N("Bad extent or origin: "+a["tts:extent"]+" "+a["tts:origin"]),null;var f=parseFloat(d[1]),g=parseFloat(d[3]),h=parseFloat(e[1]),i=parseFloat(e[3]);if(b){var j=c.exec(b);if(null===j||"px"!==j[2]||"px"!==j[4])return N("Bad tt.extent: "+b),null;var k=parseFloat(j[1]),l=parseFloat(j[3]);"px"===d[2]&&(f=f/k*100),"px"===d[4]&&(g=g/l*100),"px"===e[2]&&(h=h/k*100),"px"===e[4]&&(i=i/l*100)}return{left:h,top:i,width:f,height:g}}return null}function D(a,b){var c=[];for(var d in a){var e=d.replace("tts:","");e=e.replace("xml:",""),e=r(e),a[e]=a[d],e!==d&&delete a[d]}if("extent"in a){var f=a.extent.split(/\s/);c.push("width: "+f[0]+";"),c.push("height: "+f[1]+";")}if("origin"in a){var g=a.origin.split(/\s/);c.push("left: "+g[0]+";"),c.push("top: "+g[1]+";")}if("display-align"in a&&c.push(ba[a["display-align"]]),"writing-mode"in a&&c.push(ca[a["writing-mode"]]),"style"in a){var h=B(a.style,b,!0);c=c.concat(h)}return"padding"in a&&c.push("padding:"+a.padding+";"),"overflow"in a&&c.push("overflow:"+a.overflow+";"),"show-background"in a&&c.push("show-background:"+a["show-background"]+";"),"id"in a&&c.push("regionID:"+a.id+";"),c}function E(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d["xml:id"]===b||d.id===b)return d}return null}function F(a,b){var c=[],d=a.match(/\S+/g);return d.forEach(function(a){var d=E(S,a);if(d){var e=D(JSON.parse(JSON.stringify(d)),b);c=c.concat(e)}}),c}function G(){var a=[32,15];return Q.tt.hasOwnProperty("ttp:cellResolution")?Q.tt["ttp:cellResolution"].split(" ").map(parseFloat):a}function H(a,b){for(var c=v("padding-left",b),d=v("padding-right",b),e=c.concat(" "+d+" "),f="",g="",h="",i=Array.prototype.slice.call(a.children),j=a.getElementsByClassName("lineBreak")[0],k=i.indexOf(j),l=[];-1!=k;)l.push(k),k=i.indexOf(j,k+1);var m="</span>",n="<br>",o='<span class="spanPadding" style="-webkit-box-decoration-break: clone; box-decoration-break: clone; ';if(l.length)l.forEach(function(a,b){if(0===b){for(var c="",d=0;a>d;d++)f+=i[d].outerHTML,0===d&&(c=e.concat(i[d].style.cssText));f=o+c+'">'+f}for(var j="",k=a+1;k<i.length;k++)g+=i[k].outerHTML,k===i.length-1&&(j+=e.concat(i[k].style.cssText));g=o+j+'">'+g,f&&g&&b===l.length-1?h+=f+m+n+g+m:f&&g&&b!==l.length-1?h+=f+m+n+g+m+n:f&&!g?h+=f+m:!f&&g&&b===l.length-1?h+=g+m:!f&&g&&b!==l.length-1&&(h+=g+m+n)});else{for(var p="",q=0;q<i.length;q++)p+=i[q].style.cssText;h=o+e+p+'">'+a.innerHTML+m}return h}function I(a,b){var c=document.createElement("div");return a.forEach(function(a){if(!a.hasOwnProperty("metadata"))if(a.hasOwnProperty("span")){var d=a.span.__children,e=document.createElement("span");if(a.span.hasOwnProperty("style")){var f=B(a.span.style,b);e.className="spanPadding "+a.span.style,e.style.cssText=f.join(" ")}d.forEach(function(a){if(!d.hasOwnProperty("metadata"))if(a.hasOwnProperty("#text")){var b=document.createTextNode(a["#text"]);e.appendChild(b)}else if("br"in a){e.hasChildNodes()&&c.appendChild(e);var f=document.createElement("br");f.className="lineBreak",c.appendChild(f);var g=document.createElement("span");g.className=e.className,g.style.cssText=e.style.cssText,e=g}}),c.appendChild(e)}else if(a.hasOwnProperty("br")){var g=document.createElement("br");g.className="lineBreak",c.appendChild(g)}else if(a.hasOwnProperty("#text")){var h=document.createElement("span");h.textContent=a["#text"],c.appendChild(h)}}),c}function J(a,b,c){var d,e,f=[],g=a.region,h=b.region;return h&&(d=F(h,c)),g?(e=f.concat(F(g,c)),f=d?x(d,e):e):d&&(f=d),L(f,W),f}function K(a,b){var c,d,e,f=[],g=a.style,h=Q.tt.body.style,i=Q.tt.body.div.style,j="";return h&&(c=B(h,b),j="paragraph "+h),i&&(d=B(i,b),c?(d=x(c,d),j+=" "+i):j="paragraph "+i),g?(e=B(g,b),c&&d?(f=x(d,e),j+=" "+g):c?(f=x(c,e),j+=" "+g):d?(f=x(d,e),j+=" "+g):(f=e,j="paragraph "+g)):c&&!d?f=c:!c&&d&&(f=d),L(f,X),[f,j]}function L(a,b){for(var c in b)b.hasOwnProperty(c)&&(u(c,a)||a.push(c+":"+b[c]))}var M=this.context,N=k["default"](M).getInstance().log,O=void 0,P=void 0,Q=void 0,R=void 0,S=void 0,T=void 0,U=void 0,V=void 0,W=void 0,X=void 0,Y=void 0,Z=void 0,$=void 0,_=void 0,aa=void 0,ba=void 0,ca=void 0,da=void 0,ea=void 0,fa=0;return O={parse:j,setConfig:a},n(),O}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(4),i=d(h),j=a(8),k=d(j),l=3600,m=60;e.__dashjs_factory_name="TTMLParser",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,4:4,8:8}],159:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){try{new window.URL("x","http://y"),j=n}catch(a){}finally{j=j||o}}function b(a){var b=a.indexOf("/"),c=a.lastIndexOf("/");return-1!==b?c===b+1?a:(-1!==a.indexOf("?")&&(a=a.substring(0,a.indexOf("?"))),a.substring(0,c+1)):""}function c(a){var b=a.match(m);return b?b[1]:""}function d(a){var b=a.match(k);return b?b[0]:""}function e(a){return!k.test(a)}function f(a){return e(a)&&"/"===a.charAt(0)}function g(a){return 0===a.indexOf("//")}function h(a){return l.test(a)}function i(a,b){return j(a,b)}var j=void 0,k=/^[a-z][a-z0-9+\-.]*:/i,l=/^https?:\/\//i,m=/^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i,n=function(a,b){try{return new window.URL(a,b).toString()}catch(c){return a}},o=function(a,h){var i=b;if(!h)return a;if(!e(a))return a;f(a)&&(i=c),g(a)&&(i=d);var j=i(h),k="/"!==j.charAt(j.length-1)&&"/"!==a.charAt(0)?"/":"";return[j,a].join(k)};a();var p={parseBaseUrl:b,parseOrigin:c,parseScheme:d,isRelative:e,isPathAbsolute:f,isSchemeRelative:g,isHTTPURL:h,resolve:i};return p}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f);e.__dashjs_factory_name="URLUtils",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10}],160:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){function a(){k=/(?:\r\n|\r|\n)/gm,l=/-->/,m=/(^[\s]+|[\s]+$)/g,n=/\s\b/g}function b(a){var b,e,g=[];a=a.split(k),b=a.length,e=-1;for(var i=0;b>i;i++){var j=a[i];if(j.length>0&&"WEBVTT"!==j&&j.match(l)){var n=d(j),o=n.cuePoints,p=n.styles,q=f(a,i+1),r=c(o[0].replace(m,"")),s=c(o[1].replace(m,""));!isNaN(r)&&!isNaN(s)&&r>=e&&s>r?""!==q?(e=r,g.push({start:r,end:s,data:q,styles:p})):h("Skipping cue due to empty/malformed cue text"):h("Skipping cue due to incorrect cue timing")}}return g}function c(a){var b=a.split(":"),c=b.length-1;return a=60*parseInt(b[c-1],10)+parseFloat(b[c]),2===c&&(a+=3600*parseInt(b[0],10)),a}function d(a){var b=a.split(l),c=b[1].split(n);return c.shift(),b[1]=c[0],c.shift(),{cuePoints:b,styles:e(c)}}function e(a){var b={};return a.forEach(function(a){if(a.split(/:/).length>1){var c=a.split(/:/)[1];c&&-1!=c.search(/%/)&&(c=parseInt(c.replace(/%/,""),10)),(a.match(/align/)||a.match(/A/))&&(b.align=c),(a.match(/line/)||a.match(/L/))&&(b.line=c),(a.match(/position/)||a.match(/P/))&&(b.position=c),(a.match(/size/)||a.match(/S/))&&(b.size=c)}}),b}function f(a,b){for(var c,d=b,e="",f="";""!==a[d]&&d<a.length;)d++;if(c=d-b,c>1)for(var g=0;c>g;g++){if(f=a[b+g],f.match(l)){e="";break}e+=f,g!==c-1&&(e+="\n")}else f=a[b],f.match(l)||(e=f);return e}var g=this.context,h=i["default"](g).getInstance().log,j=void 0,k=void 0,l=void 0,m=void 0,n=void 0;return j={parse:b},a(),j}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f),h=a(8),i=d(h);e.__dashjs_factory_name="VTTParser",c["default"]=g["default"].getSingletonFactory(e),b.exports=c["default"]},{10:10,8:8}],161:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(a){var b,c=0;return a&&a.some(function(a,b){return c=b,!d.contains(a.serviceLocation)})&&(b=a[c]),b}var c=void 0,d=a.blacklistController;return c={select:b}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f);e.__dashjs_factory_name="BasicSelector",c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{10:10}],162:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){function b(a){var b=[],c=function(a){return!b.length||!a.dvb_priority||-1===b.indexOf(a.dvb_priority)},d=function(a){return!f.contains(a.serviceLocation)||(a.dvb_priority&&b.push(a.dvb_priority),!1)};return a.filter(d).filter(c)}function c(a){var b,c,d=function(a,b){var c=a.dvb_priority-b.dvb_priority;return isNaN(c)?0:c},e=function(a,b,c){return!b||c[0].dvb_priority&&a.dvb_priority&&c[0].dvb_priority===a.dvb_priority},f=0,g=[],h=0;return c=a.sort(d).filter(e),c.length?(c.length>1&&(c.forEach(function(a){f+=a.dvb_weight,g.push(f)}),b=Math.floor(Math.random()*(f-1)),g.every(function(a,c){return h=c,!(a>b)})),c[h]):void 0}function d(a){return a&&c(b(a))}var e=void 0,f=a.blacklistController;return e={select:d}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(10),g=d(f);e.__dashjs_factory_name="DVBSelector",c["default"]=g["default"].getClassFactory(e),b.exports=c["default"]},{10:10}],163:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.qualityIndex=NaN};c["default"]=e,b.exports=c["default"]},{}],164:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null};c["default"]=e,b.exports=c["default"]},{}],165:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(a,b,c){d(this,f),this.code=a||null,this.message=b||null,this.data=c||null};c["default"]=e,b.exports=c["default"]},{}],166:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.action=f.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null};e.ACTION_DOWNLOAD="download",e.ACTION_COMPLETE="complete",c["default"]=e,b.exports=c["default"]},{}],167:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(166),i=d(h),j=function(a){function b(a){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.url=a||null,this.checkForExistenceOnly=!0}return f(b,a),b}(i["default"]);c["default"]=j,b.exports=c["default"]},{166:166}],168:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.offset=NaN,this.type=null,this.size=NaN,this.isComplete=!0};c["default"]=e,b.exports=c["default"]},{}],169:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null};c["default"]=e,b.exports=c["default"]},{}],170:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null};c["default"]=e,b.exports=c["default"]},{}],171:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[],this.BolaState=[]};c["default"]=e,b.exports=c["default"]},{}],172:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0,this.isFirst=!0};c["default"]=e,b.exports=c["default"]},{}],173:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(166),i=d(h),j=function(a){function b(a,c){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.url=a||null,this.type=c||null,this.mediaType="stream",this.responseType="text"}return f(b,a),b}(i["default"]);c["default"]=j,b.exports=c["default"]},{166:166}],174:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.video=null,this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1};c["default"]=e,b.exports=c["default"]},{}],175:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null};c["default"]=e,b.exports=c["default"]},{}],176:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null};c["default"]=e,b.exports=c["default"]},{}],177:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this._s=void 0};c["default"]=e,b.exports=c["default"]},{}],178:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.t=null,this.level=null};c["default"]=e,b.exports=c["default"]},{}],179:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=a(62),g=d(f),h=function i(){e(this,i),this.target=null,this.state=g["default"].BUFFER_EMPTY};c["default"]=h,b.exports=c["default"]},{62:62}],180:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.time=null,this.range=null,this.manifestInfo=null};c["default"]=e,b.exports=c["default"]},{}],181:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.time=null,this.droppedFrames=null};c["default"]=e,b.exports=c["default"]},{}],182:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function g(){d(this,g),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null},f=function h(){d(this,h),this.s=null,this.d=null,this.b=[]};e.MPD_TYPE="MPD",e.XLINK_EXPANSION_TYPE="XLinkExpansion",e.INIT_SEGMENT_TYPE="InitializationSegment",e.INDEX_SEGMENT_TYPE="IndexSegment",e.MEDIA_SEGMENT_TYPE="MediaSegment",e.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",e.OTHER_TYPE="other",c.HTTPRequest=e,c.HTTPRequestTrace=f},{}],183:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function h(){d(this,h),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.trackInfo=[]},f=function i(){d(this,i),this.id=null,this.index=null,this.start=null,this.duration=null},g=function j(){d(this,j),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null};c.ManifestUpdate=e,c.ManifestUpdateStreamInfo=f,c.ManifestUpdateTrackInfo=g},{}],184:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function g(){d(this,g),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};e.INITIAL_PLAYOUT_START_REASON="initial_playout",e.SEEK_START_REASON="seek",e.RESUME_FROM_PAUSE_START_REASON="resume",e.METRICS_COLLECTION_START_REASON="metrics_collection_start";var f=function h(){d(this,h),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};f.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",f.REBUFFERING_REASON="rebuffering",f.USER_REQUEST_STOP_REASON="user_request",f.END_OF_PERIOD_STOP_REASON="end_of_period",f.END_OF_CONTENT_STOP_REASON="end_of_content",f.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",f.FAILURE_STOP_REASON="failure",c.PlayList=e,c.PlayListTrace=f},{}],185:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.t=null,this.mt=null,this.to=null,this.lto=null};c["default"]=e,b.exports=c["default"]},{}],186:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.loadingRequests=[],this.executedRequests=[]};c["default"]=e,b.exports=c["default"]},{}],187:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null};c["default"]=e,b.exports=c["default"]},{}],188:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){d(this,f),this.tcpid=null,this.dest=null,this.topen=null,this.tclose=null,this.tconnect=null};c["default"]=e,b.exports=c["default"]},{}]},{},[5]),define("dash/dist/dash.all.min",function(){}),function(a,b){"function"==typeof define&&define.amd?define("dash-client/DashPlayerClient",["jquery","lodash/lodash","bam-video-players/events/PlayerEvents","./VideoMediaErrorHelper","./VideoNodeEvents","dash/dist/dash.mediaplayer.min","bandwagon/bandwagon","dash/dist/dash.all.min"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("bam-video-players/events/PlayerEvents"),require("./VideoMediaErrorHelper"),require("./VideoNodeEvents"),require("dash/dist/dash.mediaplayer.min"),require("bandwagon/bandwagon"),require("dash/dist/dash.all.min")):a.DashPlayerClient=b(a.jQuery,a._,a.PlayerEvents,a.VideoMediaErrorHelper,a.VideoNodeEvents,a.MediaPlayer,a.EventBus,a.dashjs)}(this,function(a,b,c,d,e,f,g,h){"use strict";function i(b){this.player=(new f).create(),this.getPlayerEventDispatcher(),j.call(this);var c=null,d=!1;this.player.initialize(b,c,d),this.video=b,this.$video=a(b),k.call(this),s("created")}function j(){this.player.on(f.events.MANIFEST_LOADED,l.bind(this)),this.player.on(f.events.ERROR,r.bind(this))}function k(){this.player.on(f.events.PLAYBACK_ENDED,m.bind(this)),this.player.on(f.events.PLAYBACK_PAUSED,o.bind(this)),this.player.on(f.events.PLAYBACK_PLAYING,n.bind(this)),this.player.on(f.events.PLAYBACK_TIME_UPDATED,p.bind(this)),this.player.on(f.events.PLAYBACK_ERROR,q.bind(this))}function l(a){s("onManifestParsed"),this.dispatcher.dispatchEvent(c.MEDIA_START)}function m(a){s("_onEnded"),this.dispatcher.dispatchEvent(c.MEDIA_COMPLETE)}function n(a){s("_onPlaying"),this.dispatcher.dispatchEvent(c.MEDIA_PLAYING)}function o(a){s("_onPause"),this.dispatcher.dispatchEvent(c.MEDIA_PAUSED)}function p(a){var b=this.video.currentTime,d=this.getDurationInSecs();this.dispatcher.dispatchEvent(c.MEDIA_TIME_UPDATE,{timeInSecs:b,duration:d})}function q(a){var b=a;s("Video Error",b),this.dispatcher.dispatchEvent(c.MEDIA_ERROR,{message:b})}function r(a,b){s(a,b);var d=a.error,e=a.event.message;s("Error",a,d,"::",e),this.dispatcher.dispatchEvent(c.MEDIA_ERROR,{message:e})}function s(){console.log("[DashPlayerClient]",Array.prototype.slice.call(arguments).join(" "))}return i.prototype.getPlayerEventDispatcher=function(){if(!this.dispatcher){var a=g.getInstanceByKey("DashPlayer");this.dispatcher={addEventListener:function(b,c){a.on(b,c)},removeEventListener:function(b,c){a.off(b,c)},dispatchEvent:function(b,c){a.publish(b,c)}}}return this.dispatcher},i.prototype.reset=function(){this.player.reset(),this.lastSeekTime=null},i.prototype.play=function(){this.player.play()},i.prototype.pause=function(){this.player.pause()},i.prototype.setVolume=function(a){this.player.setVolume(a/100)},i.prototype.seek=function(a){this.player.isSeeking()?this.lastSeekTime=a:(this.lastSeekTime=null,null!=a&&this.player.seek(a))},i.prototype.mute=function(){this.player.setMute(!0)},i.prototype.unmute=function(){this.player.setMute(!1)},i.prototype.getDurationInSecs=function(){return this.player.duration()},i.prototype.setClip=function(a){var b=a.path;this.player.attachSource(b)},i.prototype.getCurrentTimeInSecs=function(){return this.video.currentTime},i}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/clients/VideoClientFactory",["lodash/lodash","bluebird/js/browser/bluebird","bam-video-players/utils/VideoUtils","bam-video-players/players/clients/MediaElementClient","dash-client/DashPlayerClient"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash"),require("bluebird/js/browser/bluebird"),require("bam-video-players/utils/VideoUtils"),require("bam-video-players/players/clients/MediaElementClient"),require("dash-client/DashPlayerClient")):a.VideoClientFactory=b(a.lodash,a.Promise,a.VideoUtils,a.VideoClient,a.DashClient)}(this,function(a,b,c,d,e){function f(c,d,e){var f=g(c,e),j=null,k=null;if(0==a.size(c)&&f==o.UNKNOWN)return b.resolve(null);var l=i(f);return l?k=h(f,d):(j=p.NOT_SUPPORTED,k=b.resolve(null)),k.then(function(a){return!a&&l&&(j=p.UNKNOWN),{type:f,player:a,error:j}})}function g(b,c){var d=a.get(c,"playerType",null);if(!d){var e=k(b);switch(e){case m.HLS:d=o.HLS;break;case m.DASH:d=o.DASH;break;case m.MP4:d=o.NATIVE;break;default:d=o.UNKNOWN}d=j(d)}return l("_getPlayerType",d),d}function h(a,c){var f=null;switch(a){case o.HLS:console.warn("bam-video-players: master-2.5.x does not include implementation of HLSClient. Falling back to MediaElementClient"),f=d;break;case o.DASH:f=e;break;case o.NATIVE:
f=d;break;case"UnitTestFailingConstructor":f=function(){throw new Error("Constructor failure")}}return new b(function(b,d){if(f)try{var e=new f(c);return e.type=a,b(e)}catch(g){return d(g)}return b(null)})}function i(a){if(a==o.HLS||a==o.DASH){var b=c.getVideoSupport();return b.mse}return!0}function j(a){return!c.is.desktop()&&a==o.HLS&&c.browserNativelySupportsHls()?(l("swapPlayerTypeIfNativelySupported",!0),o.NATIVE):a}function k(b){var c=/\.([0-9a-z]+)(?:[\?#]|$)/i,d=a.toString(b).match(c),e=a.get(d,1),f=m.UNKNOWN;switch(e){case n.MP4:f=m.MP4;break;case n.M3U8:f=m.HLS;break;case n.MPD:f=m.DASH}return l("getVideoType",f),f}function l(){console.log("[VideoClientFacory]",Array.prototype.slice.call(arguments).join(" "))}var m={HLS:"HLS",DASH:"DASH",MP4:"MP4",UNKNOWN:"UNKNOWN"},n={MP4:"mp4",M3U8:"m3u8",MPD:"mpd"},o={HLS:"HLSPlayer",DASH:"DashPlayer",NATIVE:"HTMLCorePlayer",UNKNOWN:"UNKNOWN_PLAYER"},p={NOT_SUPPORTED:"Video type not supported on this device / browser",UNKNOWN:"Unknown player type requested"};return{getPlayerClient:f,getPlayerType:g,enums:{players:o,errors:p}}}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/BamHTMLPlayer",["jquery","lodash/lodash","bandwagon/bandwagon","bluebird/js/browser/bluebird","bam-video-players/players/AbstractHTMLPlayer","bam-video-players/players/VideoPlayerFactory","bam-video-players/players/clients/MediaElementClient","bam-video-players/events/VideoClientEvents","bam-video-players/events/PlayerEvents","bam-video-players/players/clients/VideoClientFactory"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("bandwagon/bandwagon"),require("bluebird/js/browser/bluebird"),require("bam-video-players/players/AbstractHTMLPlayer"),require("bam-video-players/players/VideoPlayerFactory"),require("bam-video-players/players/clients/MediaElementClient"),require("bam-video-players/events/VideoClientEvents"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/players/clients/VideoClientFactory")):a.BamHTMLPlayer=b(a.jQuery,a._,a.bandwagon,a.Promise,a.AbstractHTMLPlayer,a.VideoPlayerFactory,a.MediaElementClient,a.VideoClientEvents,a.PlayerEvents,a.VideoClientFactory)}(this,function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a,b,c){z("constructor"),n.call(this),this.savedProxyRequests=[],k.prototype["super"].constructor.call(this,a,b,c)}function l(a,b){return this.addingVideoClient&&(z("Client not ready. saving request",a),this.savedProxyRequests.push({fxn:a,arg:b})),this.currentVideoClient?this.currentVideoClient[a](b):void 0}function m(){var a=this;b.each(this.savedProxyRequests,function(b){z("replaying",b.fxn,b.arg),a.currentVideoClient[b.fxn](b.arg)}),this.savedProxyRequests=[]}function n(){this.currentVideoClient&&(this.currentVideoClient.destroy(),this.currentVideoClient=null,this.currentVideoClientType=null,delete this.currentVideoClient)}function o(a,c){var e=this,f=j.getPlayerType(a.path,this.config),g=this.currentVideoClientType!=f;return g?(0!=b.size(b.get(a,"path"))&&(this.addingVideoClient=!0),j.getPlayerClient(a.path,c,this.config).then(function(a){return q.call(e,a)})["catch"](function(a){return s.call(e,a),null}).then(function(a){p.call(e,a)})):(u.call(this,h.VIDEO_NODE_REUSED),d.resolve())}function p(a){a&&(this.addingVideoClient=!1,m.call(this,a))}function q(a){var c=b.get(a,"player");return c?(w.call(this,this.currentVideoClient),t.call(this,a),d.resolve(this.currentVideoClient)):(r.call(this,a),d.resolve(null))}function r(a){var c=!b.isNull(a);c&&(z("processsExpectedError",a.error),this.clientDispatcher.dispatchEvent(i.MEDIA_ERROR,{message:a.error}))}function s(a){z("processsUnexpectedError",err),self.clientDispatcher.dispatchEvent(i.MEDIA_ERROR,{message:a})}function t(a){z("replaceVideoClient",a.type),this.currentVideoClient=a.player,this.currentVideoClientType=a.type,u.call(this,h.VIDEO_NODE_ADDED),v.call(this,this.currentVideoClient)}function u(a){this.clientDispatcher.dispatchEvent(a,{$videoNode:this.currentVideoClient.$video,videoClientType:this.currentVideoClientType,videoClient:this.currentVideoClient})}function v(a){z("addVideoClientListeners",a);var c=a.getPlayerEventDispatcher(),d=this;b.each(B,function(a){var e=b.bind(x,d,a);b.set(A,a,e),c.addEventListener(a,e)})}function w(a){if(a){var c=a.getPlayerEventDispatcher();b.each(B,function(a){var d=b.get(A,a,d);c.removeEventListener(a,d)}),z("removeVideoClient.dispatchEvent"),this.clientDispatcher.dispatchEvent(h.VIDEO_NODE_REMOVED,{videoClient:a})}}function x(a,b){console.log("rebroadcasting",a),this.clientDispatcher.dispatchEvent(a,b)}function y(){var a=c.getInstanceByKey("BamHTMLPlayer"+Date.now()),b={addEventListener:function(b,c){a.on(b,c)},removeEventListener:function(b,c){a.off(b,c)},dispatchEvent:function(b,c){a.publish(b,c)},removeAllListeners:function(){a.removeAllListeners()}};return b}function z(){console.log("[BamHTMLPlayer]",Array.prototype.slice.call(arguments).join(" "))}var A={};k.prototype=Object.create(e.prototype),k.prototype.constructor=k,k.prototype["super"]=e.prototype,k.prototype.toString=function(){return"BamHTMLPlayer"},k.prototype.getPlayerInfo=function(){return this.currentVideoClientType},k.prototype.init=function(){this.clientDispatcher=y(),k.prototype["super"].init.call(this,"video")},k.prototype.destroy=function(){k.prototype["super"].destroy(),n.call(this)},k.prototype.createVideoClient=function(a,b){z("createVideoClient");var c=this;return{getPlayerEventDispatcher:function(){return c.clientDispatcher},setClip:function(b){o.call(c,b,a),l.call(c,"setClip",b)},mute:function(){l.call(c,"mute")},unmute:function(){l.call(c,"unmute")},pause:function(){l.call(c,"pause")},play:function(){l.call(c,"play")},reset:function(){l.call(c,"reset")},seek:function(a){l.call(c,"seek",a)},setVolume:function(a){l.call(c,"setVolume",a)},getDurationInSecs:function(){return l.call(c,"getDurationInSecs")},getCurrentTimeInSecs:function(){return l.call(c,"getCurrentTimeInSecs")}}};var B=[i.MEDIA_COMPLETE,i.MEDIA_ERROR,i.MEDIA_PAUSED,i.MEDIA_PLAYING,i.MEDIA_START,i.MEDIA_TIME_UPDATE,i.META_DATA_LOADED];return f.registerPlayer(k),k}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/interfaces/HLSInterface",["jquery","lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash")):a.HLSInterface=b(a.jQuery,a._)}(this,function(a,b,c){"use strict";function d(a){}return d.prototype.getPlayerEventDispatcher=function(){var a={addEventListener:function(a,b){},removeEventListener:function(a,b){},dispatchEvent:function(a,b){}};return a},d.prototype.reset=function(){},d.prototype.play=function(){},d.prototype.pause=function(){},d.prototype.setVolume=function(a){},d.prototype.seek=function(a){},d.prototype.getDurationInSecs=function(){return 0},d.prototype.setClip=function(a){},d.prototype.getCurrentTimeInSecs=function(){return 0},d}),function(a,b){"function"==typeof define&&define.amd?define("bam-video-players/players/DashPlayer",["jquery","lodash/lodash","bam-video-players/players/AbstractHTMLPlayer","bam-video-players/players/VideoPlayerFactory","bam-video-players/events/PlayerEvents","bam-video-players/events/UserEvents","bam-video-players/events/FullScreenEvents","bam-video-players/players/ui/helpers/PlayerUIHelper","bam-video-players/players/interfaces/HLSInterface","dash-client/DashPlayerClient"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("lodash/lodash"),require("bam-video-players/players/AbstractHTMLPlayer"),require("bam-video-players/players/VideoPlayerFactory"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/events/UserEvents"),require("bam-video-players/events/FullScreenEvents"),require("bam-video-players/players/ui/helpers/PlayerUIHelper"),require("bam-video-players/players/interfaces/HLSInterface"),require("dash-client/DashPlayerClient")):a.DashPlayer=b(a.jQuery,a._,a.AbstractHTMLPlayer,a.VideoPlayerFactory,a.PlayerEvents,a.UserEvents,a.FullScreenEvents,a.PlayerUIHelper,a.HLSInterface,a.DashPlayerClient)}(this,function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a,b,c){k.prototype["super"].constructor.call(this,a,b,c)}function l(){console.log("[DashPlayer]",Array.prototype.slice.call(arguments).join(" "))}return k.prototype=Object.create(c.prototype),k.prototype.constructor=k,k.prototype["super"]=c.prototype,k.prototype.toString=function(){return"DashPlayer"},k.prototype.init=function(){k.prototype["super"].init.call(this,"video")},k.prototype.createVideoClient=function(a,b){return a instanceof HTMLUnknownElement?(l("createDashPlayer INTERFACE ONLY"),new i):(l("createDashPlayer"),new j(a,b))},d.registerPlayer(k),k}),function(a,b){require&&require.config&&require.config({paths:{jquery:"jquery/jquery","jquery-ui":"jquery-ui/index",text:"requirejs-text/text"}}),"function"==typeof define&&define.amd?define("bam-video-players/VideoPlayerManager",["bam-video-players/players/VideoPlayerFactory","bam-video-players/events/PlayerEvents","bam-video-players/players/AbstractPlayer","bam-video-players/players/HTML5Player","bam-video-players/players/PrimetimePlayer","bam-video-players/players/FlashPlayer","bam-video-players/players/MultiViewFlashPlayer","bam-video-players/players/BamHTMLPlayer","bam-video-players/players/DashPlayer"],b):"object"==typeof exports?module.exports=b(require("bam-video-players/players/VideoPlayerFactory"),require("bam-video-players/events/PlayerEvents"),require("bam-video-players/players/AbstractPlayer"),require("bam-video-players/players/HTML5Player"),require("bam-video-players/players/PrimetimePlayer"),require("bam-video-players/players/FlashPlayer"),require("bam-video-players/players/MultiViewFlashPlayer"),require("bam-video-players/players/BamHTMLPlayer"),require("bam-video-players/players/DashPlayer")):a.VideoPlayerManager=b(a.VideoPlayerFactory,a.PlayerEvents,a.AbstractPlayer,a.HTML5Player,a.PrimetimePlayer,a.FlashPlayer,a.MultiViewFlashPlayer,a.BamHTMLPlayer,a.DashPlayer,null)}(this,function(a,b){"use strict";var c={FlashInstances:{},PlayerEvents:b,getPlayer:function(b,c){return a.getPlayer(b,c)}};return window.VideoPlayerManager=c,c}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/utils/AdvisorySlateHelper",[],b):"object"==typeof exports?module.exports=b():a.AdvisorySlateHelper=b()}(this,function(){"use strict";function a(a){}return a.prototype=$.extend(a.prototype,{addAdvisorySlateIfNecessary:function(a,b){return"error"!=b.state&&"undefined"!=typeof b.advisorySlates&&(a=this._checkRatings(b.advisorySlates,a)),a},_checkRatings:function(a,b){if(b&&b.length>0){var c=b[0];if(c.metaData){var d=c.metaData.advisory_rating,e=c.metaData.tv_rating;if("undefined"!=typeof e){var f=a.parental_control_bumpers[e][d].high;b.unshift({type:"video-bump",path:f})}}}return b}}),new a}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/timecode/TimecodeHandler",["bindable/jquery.bindable","video-playback-manager/vpm/models/TimecodeModel","video-playback-manager/vpm/models/PlaybackModel"],b):"object"==typeof exports?module.exports=b(require("bindable/jquery.bindable"),require("video-playback-manager/vpm/models/TimecodeModel"),require("video-playback-manager/vpm/models/PlaybackModel")):a.TimecodeHandler=b(null,a.TimecodeModel,a.PlaybackModel)}(this,function(a,b,c){"use strict";function d(){a(this)}return d.prototype=$.extend(d.prototype,{publicFunction:function(){},timecodeEventHandler:function(a){var b=a.timecode,d=a.uniqueId,e=a.gameId;if(console.log("TimecodeHandler timecodeEventHandler: timecode="+b+", uniqueId="+d+", gameId="+e),null!==b&&"undefined"!=typeof b){var f=this.getDurationInSeconds(b);console.log("TimecodeHandler timecodeEventHandler: currentStreamTimecode="+f);var g=c.getMediaItemFromContentId(d);if(g&&g.isMediaCatalogPath){var h=g.mediaCatalog.calendarEventId;VPM.model.setCurrentTimecode(h,b.substring(0,8)),console.log("TimecodeHandler timecodeEventHandler: Add eventId to the event payload eventId="+h),a.eventId=h;try{a.gameId=g.clip.metaData.game_id,console.log("TimecodeHandler timecodeEventHandler: revising gameId to be gameId="+a.gameId)}catch(i){}$(this).trigger(VPMEvents.TIMECODE_UPDATE,a)}}},getDurationInSeconds:function(a){for(var b=a.split(":").reverse(),c=0,d=0;b[c];)d+=0===c?parseInt(b[c],10):parseInt(b[c],10)*Math.pow(60,c),c++;return d}}),d}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaplayer/MediaPlayer",["logger/ClassLogger","bandwagon/bandwagon","video-playback-manager/vpm/VideoMessage","bam-video-players/VideoPlayerManager","video-playback-manager/vpm/utils/AdvisorySlateHelper","video-playback-manager/vpm/timecode/TimecodeHandler"],b):"object"==typeof exports?module.exports=b(require("logger/ClassLogger"),require("bandwagon/bandwagon"),require("video-playback-manager/vpm/VideoMessage"),require("bam-video-players/VideoPlayerManager"),require("video-playback-manager/vpm/utils/AdvisorySlateHelper"),require("video-playback-manager/vpm/timecode/TimecodeHandler")):a.MediaPlayer=b(a.ClassLogger,null,a.VideoMessage,a.VideoPlayerManager,a.AdvisorySlateHelper,a.TimecodeHandler)}(this,function(a,b,c,d,e,f){"use strict";function g(){}var h=new a("MediaPlayer");return g.prototype=$.extend(g.prototype,{_config:{},videoPlayer:null,_errorManager:null,_autoPlayNext:!1,init:function(a){return h.log("init:"),this._config=a,this.videoPlayer||(h.log("init: create new videoPlayer, config = ",a),this._setupVideoPlayer()),this},setErrorManager:function(a){this._errorManager=a},playMediaClip:function(a){h.log("playMediaClip: clip = ",a),this._config.videocore.playlist=[],this._config.videocore.playlist.push(a),this._config.state="default",this._internalPlay(a)},_timecodeHandler:null,timecodeEventHandler:function(a){this._timecodeHandler||(this._timecodeHandler=new f),this._timecodeHandler.timecodeEventHandler(a)},_setupVideoPlayer:function(){if(!this.videoPlayer){this.videoPlayer=d.getPlayer(this._config.videocore);var a,c,e=this,f=this._config.container||"#video-player";a=b.getInstanceByKey(f),c=b.getRegisteredEventsByKey("PLAYER_EVENTS"),a.on(c.STREAM_MEDIA_ERROR,function(a,b){a.data&&e._errorManager.mediaErrorEventHandler(a.data)}),a.on(c.MEDIA_ERROR,function(a,b){a.data&&e._errorManager.errorEventHandler(a.data)}),a.on(c.MEDIA_START,function(a,b){var c=a.player?a.player.clip:null;h.log("_internalPlay CLIP_START handler: clip = ",c)}),a.on(c.TIME_CODE,function(a,b){a.data&&e.timecodeEventHandler(a.data)})}},_internalPlay:function(a){h.log("_internalPlay: clip = ",a),this.currentClip=a;try{h.log("_internalPlay: clip.content_id = "+a.content_id)}catch(b){}this._setupVideoPlayer();var c=[a];c=e.addAdvisorySlateIfNecessary(c,this._config);try{var d=this._config.get("vpm.autoPlay",!1);d||this._autoPlayNext?(this.videoPlayer.device.is.desktop||this._autoPlayNext||console.warn("Warning: You are a autoplaying video on a device. Please ensure this is supported."),this.videoPlayer.play(c)):(this._autoPlayNext=!0,this.videoPlayer.setClip(c))}catch(b){h.error("_internalPlay: error = ",b)}}}),g}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/mediaitem/data/MediaItemTypeHelper",["logger/ClassLogger","video-playback-manager/vpm/mediaitem/data/MediaItemType","video-playback-manager/vpm/models/PlaybackModel"],b):"object"==typeof exports?module.exports=b(require("logger/ClassLogger"),require("video-playback-manager/vpm/mediaitem/data/MediaItemType"),require("video-playback-manager/vpm/models/PlaybackModel")):a.MediaItemTypeHelper=b(a.ClassLogger,a.MediaItemType,a.PlaybackModel)}(this,function(a,b,c){"use strict";function d(){}var e=new a("MediaItemTypeHelper");return d.prototype=$.extend(d.prototype,{determineMediaType:function(a){e.log("determineMediaType:");var d="UNKNOWN",f="undefined"!=typeof a.calendar_event_id?!0:!1;return d=f?b.MEDIA_FRAMEWORK_EVENT_CONTENT:"undefined"!=typeof a.path?b.SIMPLE_URL:c.loadMetadataFileForContentId===!0?b.METADATA_FILE:b.MEDIA_FRAMEWORK_CONTENT}}),new d}),function(a,b){"function"==typeof define&&define.amd?define("video-playback-manager/vpm/VideoPlaybackManager",["logger/ClassLogger","bindable/jquery.bindable","video-playback-manager/vpm/events/VPMEvents","video-playback-manager/vpm/mediaitem/mediacliploader/MediaItemClipLoaderEventEnum","video-playback-manager/vpm/mediaitem/data/MediaItem","video-playback-manager/vpm/models/PlaybackModel","video-playback-manager/vpm/config/VpmConfigHelper","video-playback-manager/vpm/error/ErrorManager","video-playback-manager/vpm/mediaitem/MediaItemManager","video-playback-manager/vpm/mediaplayer/MediaPlayer","video-playback-manager/vpm/mediaitem/data/MediaItemTypeHelper"],b):"object"==typeof exports?module.exports=b(require("logger/ClassLogger"),require("bindable/jquery.bindable"),require("video-playback-manager/vpm/events/VPMEvents"),require("video-playback-manager/vpm/mediaitem/mediacliploader/MediaItemClipLoaderEventEnum"),require("video-playback-manager/vpm/mediaitem/data/MediaItem"),require("video-playback-manager/vpm/models/PlaybackModel"),require("video-playback-manager/vpm/config/VpmConfigHelper"),require("video-playback-manager/vpm/error/ErrorManager"),require("video-playback-manager/vpm/mediaitem/MediaItemManager"),require("video-playback-manager/vpm/mediaplayer/MediaPlayer"),require("video-playback-manager/vpm/mediaitem/data/MediaItemTypeHelper")):a.VideoPlaybackManager=b(a.ClassLogger,null,null,a.MediaItemClipLoaderEventEnum,a.MediaItem,a.PlaybackModel,a.VpmConfigHelper,a.ErrorManager,a.MediaItemManager,a.MediaPlayer,a.MediaItemTypeHelper)}(this,function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(c){function d(a){k||(k=!0,e._mediaItemManager.init(a),e.addMediaItemManagerEventListeners(e._mediaItemManager))}var e=this;this._instanceNumber=++m,this._logger=new a("VideoPlaybackManager_"+this._instanceNumber),this._logger.log("constructor: instanceNumber="+this._instanceNumber),this._config=c,b(this);var k=!1;if(e.mediaPlayer||(e.mediaPlayer=new j),e._mediaItemManager||(e._mediaItemManager=new i(e.mediaPlayer)),e._errorManager||(e._errorManager=new h(e._mediaItemManager)),e.mediaPlayer.setErrorManager(e._errorManager),e._mediaItemManager.setErrorManager(e._errorManager),this._config){var l=this._config.vpm,n=new g(l);n.applyUrlOverridesToConfig(),n.addRandomValuesToConfig(),f.updateModelUsingConfig(l),l&&e._errorManager.setupErrorHandlingConstants(l),d(l)}e.mediaPlayer.init(this._config)}var m=0;return l.prototype=$.extend(l.prototype,{_instanceNumber:0,_logger:null,_config:{},_mediaItemManager:null,_errorManager:null,mediaPlayer:null,playMedia:function(a){this._logger.log("playMedia: mediaRequest = ",a);var b=new e(a,f.considerHlsPlayback);b.type=k.determineMediaType(a),this._mediaItemManager.playMediaItem(b)},updateUserProfile:function(a){this._logger.log("updateUserProfile: profile = ",a),f.userProfile=a},addMediaItemManagerEventListeners:function(a){var b=this;a.bind(d.MEDIA_ITEM_CLIP_SET,function(a,c){b.onMediaItemClipSet(a,c)}),a.bind(d.MEDIA_FRAMEWORK_REQUIRED,function(a,c){b.onMediaFrameworkRequired(a,c)}),a.bind(d.MEDIA_ITEM_ERROR,function(a,c){b.onMediaItemError(a,c)})},onMediaItemClipSet:function(a,b){this._logger.log("onMediaItemClipSet:")},onMediaFrameworkRequired:function(a,b){this._logger.log("onMediaFrameworkRequired:")},onMediaItemError:function(a,b){this._logger.log("onMediaItemError:")}}),l}),define("media-app-core/mediaPlatform",["video-playback-manager/vpm/VideoPlaybackManager"],function(a){return a}),define("media-app-core/events/eventManager",["underscore","media-app-core/models/applicationState","bandwagon/bandwagon","media-app-core/events/applicationEvents","bam-video-players/events/PlayerEvents","bam-video-advertising/events/AdEvents","media-app-core/mediaPlatform","video-playback-manager/vpm/events/VPMEvents"],function(a,b,c,d,e,f,g,h){function i(e){var f=b.get("mediaConfig"),g=f.get("videocore.property_state.container");a.extend(d,e),this.dispatcher=c.getInstanceByKey(g)}return i.prototype={Events:{Ads:f,Application:d,MediaPlatform:{Media:{},Catalog:{},Exceptions:{}},Player:e,VPM:h},getDispatcher:function(){return this.dispatcher}},i}),define("media-app/events/extensionEvents",[],function(){return{SETUP_MINI_MODE:"__media_app_setup_mini_mode",ENTER_MINI_MODE:"__media_app_enter_mini_mode",EXIT_MINI_MODE:"__media_app_exit_mini_mode",ADVANCE_PLAYLIST:"__media_app_advance_playlist",SELECT_ACTIVE_MEDIA:"__media_app_select_active_media"}}),function(a,b){"function"==typeof define&&define.amd?define("bam-media-utils/logging/logLevel",["lodash/lodash"],b):"object"==typeof module&&module.exports?module.exports=b(require("lodash/lodash")):a.MediaLogLevel=b(a._)}(this,function(a){function b(){var b=this;this.levelCodes=d,Object.keys(this.levelCodes).forEach(function(c){a.set(b,c,b.levelCodes[c])})}var c={0:"all",1:"trace",2:"debug.all",2.2:"debug.allEvents",2.4:"debug.playbackEvents",2.6:"debug.userEvents",2.8:"debug.setup",3:"info",4:"warn",5:"error"},d=a.invert(c);return b.prototype=Object.create(a.assign({},c,d)),new b}),function(a,b){"function"==typeof define&&define.amd?define("bam-media-utils/logging/logEvent",["bam-media-utils/logging/logLevel"],b):"object"==typeof module&&module.exports?module.exports=b(require("bam-media-utils/logging/logLevel")):a.MediaLogEvent=b(a.MediaLogLevel)}(this,function(a){function b(a,b,c,d){this.level=void 0===a?null:a,this.source=b||"",this.message=c||"",this.extraArgs=d||[]}return b.prototype.toArgs=function(){return["("+a[this.level]+"): ",this.source,this.message].concat(this.extraArgs)},b}),function(a,b){"function"==typeof define&&define.amd?define("bam-media-utils/logging/logger",["lodash/lodash","bam-media-utils/logging/logLevel","bam-media-utils/logging/logEvent"],b):"object"==typeof module&&module.exports?module.exports=b(require("lodash/lodash"),require("bam-media-utils/logging/logLevel"),require("bam-media-utils/logging/logEvent")):a.MediaLogger=b(a._,a.MediaLogLevel,a.MediaLogEvent)}(this,function(a,b,c){function d(e){var f=this;this.logLevel=e||b.all,this.setLogLevel=function(a){this.logLevel=a},this._log=function(a){a.level<this.logLevel||(console[b[a.level]]?console[b[a.level]].apply(console,a.toArgs()):console.log.apply(console,a.toArgs()))},Object.keys(b.levelCodes).forEach(function(e){var g=b[e];a.get(d.prototype,e)||a.set(d.prototype,e,function(a,b){var d=Array.prototype.slice.call(arguments).slice(3);this._log(new c(g,a,b,d))}.bind(f))})}return d}),define("media-app-core/utils/logger",["media-app-core/models/applicationState","bam-media-utils/logging/logLevel","bam-media-utils/logging/logger"],function(a,b,c){function d(d){var f=a.get("mediaConfig"),g=f.get("videocore.logging.level","warn");this.objectName=d.length?d:e,this.baseLogger=new c(b[g])}var e="Logger";return d.prototype=$.extend(d.prototype,{log:function(){var a=Array.prototype.slice.call(arguments);a.unshift("["+this.objectName+"]"),this.baseLogger.info.apply(this.baseLogger,a)},debug:function(){var a=Array.prototype.slice.call(arguments);a.unshift("["+this.objectName+"]"),this.baseLogger.debug.apply(this.baseLogger,a)},warn:function(){var a=Array.prototype.slice.call(arguments);a.unshift("["+this.objectName+"]"),this.baseLogger.warn.apply(this.baseLogger,a)},error:function(){var a=Array.prototype.slice.call(arguments);a.unshift("["+this.objectName+"]"),this.baseLogger.error.apply(this.baseLogger,a)}}),d}),function(a,b){"function"==typeof define&&define.amd?define("bam-wiretap/utils/TokenHelpers",["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):a.TokenHelpers=b(a.jQuery)}(this,function(a){var b={SITE_TRAFFIC:function(a){return this.pageConfig.siteTraffic||"[Site traffic - unavailable]"},SITE_LANG_LOCALE:function(a){return this.pageConfig.langLocale||"[Lang locale - unavailable]"},TEAM_ABBREV:function(a){return this.pageConfig.teamAbbrev||"[Team - unavailable]"},GAMEDAY_GAME_ID:function(a){return void 0},GAMEDAY_GAME_PK:function(a){return(a.dynamicVars&&a.dynamicVars.game?a.dynamicVars.game.gamePk:a.meta.game_pk)||"none"},MEDIA_IPID:function(a){return a.player.clip.content_id},MEDIA_PLAYER_FORMAT:function(a){return a.player.toString()},MEDIA_PLAYER_VERSION:function(a){var b,c=a.player.toString();switch(c){case"MultiViewFlashPlayer":case"FlashPlayer":b=a.config.flash?a.config.flash.name+"_"+a.config.flash.release:"fvp";break;case"HTML5Player":b="HTML5";break;case"DashPlayer":b="HTML5:DashPlayer";break;case"PrimetimePlayer":b="HTML5:PrimetimePlayer";break;default:b="Player version not found"}return b},MEDIA_PLAYER_CONTEXT:function(a){var b=this.pageConfig.playerContext||this.pageConfig.location;return b||(b="Video Playback Page"),b},MEDIA_COMPONENT_LOCATION:function(a){var b="",c=this.pageConfig.section;return"embed"===c?(b=this.pageConfig.playerContext?this.pageConfig.playerContext:this.pageConfig.location,b=b?b:"Embedded Player"):"vpp"===c?b="Video Playback Page":"nhltv"===c&&(b="Media Player"),b},MEDIA_STREAM_ID:function(a){return a.clip.content_id+"|"+a.config.playbackScenario},MEDIA_STREAM_VIDEO:function(b){var c="none";if(Array.isArray(b.meta.keywordsDisplay)){var d=a.map(b.meta.keywordsDisplay,function(a,b){return a&&a.displayName?a.displayName:null});c=d.join("|")}return c},MEDIA_STREAM_PLAYER:function(a){return this.pageConfig.topic?this.pageConfig.topic.title:"none"},MEDIA_STREAM_TYPE:function(a){var b;return b=a.clip.isHighlight?"VOD":a.clip.isAudioOnly?"Audio":a.clip.isLive===!0?"Live":a.clip.isLive===!1?"Archive":"VOD"}};return b}),function(a,b){"function"==typeof define&&define.amd?define("bam-wiretap/Wiretap",["jquery","bam-wiretap/utils/TokenHelpers"],b):"object"==typeof module&&module.exports?module.exports=b(require("jquery"),require("bam-wiretap/utils/TokenHelpers")):a.Wiretap=b(a.jQuery,a.TokenHelpers)}(this,function(a,b){"use strict";function c(c,d,e){this.pageContextData=window.adobeAnalytics&&window.adobeAnalytics.contextData||{},this.trackingConfig=("string"==typeof c?JSON.parse(c):c)||{},this.tokenHelpers=b,this.pageConfig=e||{},d&&("function"==typeof d?this.setTrackingProps=d:"object"==typeof d&&a.extend(this.tokenHelpers,d))}return c.prototype={constructor:c,track:function(a){delete a.wire,"function"==typeof window.trackAsync&&window.trackAsync(a)},trackEventHandler:function(a){this.track(a)},setTrackingProps:function(a){return a}},c}),function(a,b){"function"==typeof define&&define.amd?define("bam-wiretap/plugins/bam/MediaTimer",["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):a.MediaTimer=b(a.jQuery)}(this,function(a){function b(a){a&&(this.wiretapVideo=a,this.dispatcher=this.wiretapVideo.bandwagon.getInstanceByKey("#video-player"),this.intervalEvents=this.wiretapVideo.trackingConfig.intervals,this.eventDefaults=this.wiretapVideo.trackingConfig.defaults,e.call(this))}function c(a){var b=Math.floor(a/60).toString();return 10>b?"0"+b:b}function d(a){var b=Math.floor(a%60).toString();return 10>b?"0"+b:b}function e(){this.dispatcher.on(this.wiretapVideo.PlayerEvents.MEDIA_START,this.startTracking.bind(this)),this.dispatcher.on(this.wiretapVideo.PlayerEvents.MEDIA_RESUME,this.start.bind(this)),this.dispatcher.on(this.wiretapVideo.AdEvents.AD_COMPLETE,this.start.bind(this)),this.dispatcher.on(this.wiretapVideo.PlayerEvents.MEDIA_PAUSED,this.stop.bind(this)),this.dispatcher.on(this.wiretapVideo.AdEvents.AD_START,this.stop.bind(this)),this.dispatcher.on(this.wiretapVideo.PlayerEvents.MEDIA_COMPLETE,this.track.bind(this)),window.addEventListener("beforeunload",this.track.bind(this))}return b.prototype={init:function(){this.player&&this.player.clip&&(this.clip=this.player.clip,this.videoLength=this.player.clip.duration?1e3*this.player.clip.duration:0,this.isTracking=!1,this.totalTime=0,this.hasTracked=!1,this.mediaStarted=!0,this.start())},start:function(){!this.isTracking&&this.mediaStarted&&(this.startTime=new Date,this.isTracking=!0)},stop:function(){this.isTracking&&(this.stopTime=new Date,this.isTracking=!1,this.setInterval())},setInterval:function(){var a=0;this.startTime&&this.stopTime&&(a=this.stopTime-this.startTime),this.totalTime+=a,this.startTime=null,this.stopTime=null},startTracking:function(a,b){this.isTracking&&(this.stop(),this.track()),this.player=a.player||this.player,this.init()},track:function(){if(!this.hasTracked&&this.videoLength){var b=this;this.isTracking&&this.stop();var e=a.extend({},b.player);e.clip=b.clip;var f=e.clip.metaData.duration,g=f.split(":"),h=0;h=3===g.length?60*+g[0]*60+60*+g[1]+ +g[2]:2===g.length?60*+g[0]+ +g[1]:+g[1];c(h),d(h);a.each(b.intervalEvents,function(f,g){var i=h*g.wire.duration;c(i),d(i);if(b.videoLength>=b.videoLength*g.wire.duration){var j=a.extend({},b.eventDefaults[g.wire.defaults],g);b.wiretapVideo.setTrackingProps(j,{player:e}),j&&b.wiretapVideo.prototype.track(j)}}),this.isTracking=!1,this.hasTracked=!0,this.mediaStarted=!1}}},b}),function(a,b){"function"==typeof define&&define.amd?define("bam-wiretap/WiretapVideo",["jquery","bam-wiretap/Wiretap","bam-wiretap/plugins/bam/MediaTimer"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("bam-wiretap/Wiretap"),require("bam-wiretap/plugins/bam/MediaTimer")):a.WiretapVideo=b(a.jQuery,a.Wiretap,a.MediaTimer)}(this,function(a,b,c,d){"use strict";function e(a,b,d){e.prototype["super"].constructor.call(this,a,b,d),this.bandwagon=this.pageConfig.bandwagon,this.bandwagon&&(this.screens={},this.PlayerEvents=this.bandwagon.getRegisteredEventsByKey("PLAYER_EVENTS"),this.AdEvents=this.bandwagon.getRegisteredEventsByKey("AD_EVENTS"),this.ApplicationEvents=this.bandwagon.getRegisteredEventsByKey("APPLICATION_EVENTS"),g.call(this),this.trackingConfig.intervals&&(this.mediaTimer=new c(this)))}function f(b,c){var d,e=b.match(/@\w+@/g);return e.forEach(function(e){d=e.substr(1,e.length-2),b=b.replace(e,a.proxy(this.tokenHelpers[d],this,c))}.bind(this)),b}function g(){var b,c,d=this;a.each(d.trackingConfig.containers,function(e,f){if(b=d.bandwagon.getInstanceByKey(e),!b)return!0;for(var g in f){var h=f[g];if(h.wire&&(d.PlayerEvents[h.wire.pEventKey]||d.AdEvents[h.wire.pEventKey]||d.ApplicationEvents[h.wire.pEventKey])){if(h.wire.events){var i=h.wire.events;for(var j in i)i.hasOwnProperty(j)&&i[j].wire&&i[j].wire.defaults&&a.extend(i[j],d.trackingConfig.defaults[i[j].wire.defaults]);h.wire.events=i}else h.wire.defaults&&a.extend(h,d.trackingConfig.defaults[h.wire.defaults]);c=a.proxy(d.trackEventHandler,d,{trackObj:h}),"AdEvents"===h.wire.eventsModel?b.on(d.AdEvents[h.wire.pEventKey],c):"ApplicationEvents"===h.wire.eventsModel?b.on(d.ApplicationEvents[h.wire.pEventKey],c):b.on(d.PlayerEvents[h.wire.pEventKey],c)}}})}return e.prototype=Object.create(b),e.prototype.constructor=e,e.prototype["super"]=b.prototype,e.prototype.trackEventHandler=function(b,c,d){var e;if(!b.trackObj)return!1;if("trackingEvent"===d.type&&c.data&&c.data.impressionKey){var f=b.trackObj.wire.events;for(var g in f)if(f.hasOwnProperty(g)&&f[g].wire){if(f[g].wire.impressionKey===c.data.impressionKey){e=f[g];break}g++}if(!e)return!1}else e=b.trackObj;var h=this.setTrackingProps(a.extend(!0,{},e),c);h&&this.prototype.track(h)},e.prototype.setTrackingProps=function(b,c){var d=this,e={};return e.player=c?c.player:{},e.config=e.player.config||{},e.clip=e.player.clip||{},e.meta=e.clip.metaData||{},e.dynamicVars={},e.meta.game_pk?e.dynamicVars=this.getScreenDataForContentId(String(e.meta.game_pk)):e.clip.content_id&&(e.dynamicVars=this.getScreenDataForContentId(String(e.clip.content_id))),a.each(b,function(a,c){c=c.toString(),-1!==c.indexOf("@")&&(b[a]=f.call(d,c,e)),("undefined"==b[a]||null==b[a])&&delete b[a]}),b},e.prototype.setScreenDataForContentId=function(a){if(a&&a.contentId){var b=String(a.contentId);this.screens[b]=a}},e.prototype.getScreenDataForContentId=function(a){var b={};if(a){var c=String(a);this.screens[c]&&(b=this.screens[c])}return b},e}),function(a,b){"function"==typeof define&&define.amd?define("bam-wiretap/WiretapApp",["jquery","bam-wiretap/Wiretap"],b):"object"==typeof module&&module.exports?module.exports=b(require("jquery"),require("bam-wiretap/Wiretap")):a.WiretapApp=b(a.jQuery,a.Wiretap);
}(this,function(a,b){"use strict";function c(b,e,f){c.prototype["super"].constructor.call(this,b,e,f);var g=this.trackingConfig.scope?this.trackingConfig.scope:"body";this.$SCOPE=a(g),d.call(this)}function d(){var b,c=this,d=c.trackingConfig.app;for(var e in d){if(!d[e].wire||!d[e].wire.selector)return!0;b=d[e].wire.eventType?d[e].wire.eventType:"click",d[e].wire.defaults&&a.extend(d[e],c.trackingConfig.defaults[d[e].wire.defaults]);var f=a.proxy(c.trackEventHandler,c,{trackObj:d[e]});c.$SCOPE.on(b,d[e].wire.selector,f)}}function e(a,b){a="string"==typeof a?a.toLowerCase():"default";var c=f[a]||f["default"];return c&&c[b]?c[b]:"["+b+" - unavailable]"}c.prototype=Object.create(b),c.prototype.constructor=c,c.prototype["super"]=b.prototype;var f={"default":{sponsor:"NHL",siteName:"National Hockey League"},nhl:{sponsor:"NHL",siteName:"National Hockey League"},wch:{sponsor:"WCH",siteName:"World Cup of Hockey"},mlb:{sponsor:"MLB",siteName:"Major League Baseball"}};return c.prototype.trackEventHandler=function(b,c){if(!b.trackObj)return!1;var d=this.setTrackingProps(a.extend(!0,{},b.trackObj),a(c.currentTarget));d&&this.prototype.track(d)},c.prototype.setTrackingProps=function(b,c){var d,f,g=this.pageConfig,h=this;return a.each(b,function(a,i){i=i.toString(),-1!==i.indexOf("@")&&(i.match(/@INDEX_\w+@/)&&(d=b.wire&&b.wire.parent?b.wire.parent:null,i=h.util.setIndex(i,c,d)),i.match(/@TEXT@/)&&(i=h.util.setText(i,c)),i.match(/@TEAM_ABBREV@/)&&(f=g.teamAbbrev?g.teamAbbrev:"[Team - unavailable]",i=i.replace(/@TEAM_ABBREV@/,f)),i.match(/@SITE_TRAFFIC@/)&&(f=g.siteTraffic?g.siteTraffic:"[Site traffic - unavailable]",i=i.replace(/@SITE_TRAFFIC@/,f)),i.match(/@SITE_NAME@/)&&(f=g.teamDisplay?g.teamDisplay:e(g.property,"siteName"),i=i.replace(/@SITE_NAME@/,f)),i.match(/@MEDIA_SPONSOR@/)&&(f=e(g.property,"sponsor"),i=i.replace(/@MEDIA_SPONSOR@/,f)),i.match(/@LANG_LOCALE@/)&&(f=g.langLocale?g.langLocale:"[Lang locale - unavailable]",i=i.replace(/@LANG_LOCALE@/,f)),b[a]=i),("undefined"==b[a]||null==b[a])&&delete b[a]}),b},c.prototype.util={setText:function(a,b,c){var d=c?b.parents(c.s).text():b.text();return d=d.trim().replace(/\s+/g," "),a.replace(/@TEXT@/g,d)},setIndex:function(a,b,c,d){var e,f;return e=a.match(/@INDEX_\d+_PARENT@/)&&c?b.parents(c.s).index():b.index(),a.match(/@INDEX_0/)?f=0:a.match(/@INDEX_1/)&&(f=1),a.replace(/@INDEX_\w+@/g,e+f)}},c}),define("media-app-core/utils/tracking",["media-app-core/models/applicationState","media-app-core/events/applicationEvents","bam-wiretap/WiretapVideo","bam-wiretap/WiretapApp"],function(a,b,c,d){"use strict";function e(){f=this}var f;return e.prototype={config:{},wiretapVideo:null,wiretapApp:null,init:function(b){var c=a.get("mediaConfig");c.get("videocore.tracking")&&(this.config=b)},initVideoTracking:function(b){try{var d=a.get("mediaConfig");if(d.get("videocore.tracking.omniture.video")){var e=a.get("eventManager"),f=$.extend({},this.config.appData,{PlayerEvents:e.Events.Player,multiviewManager:b});this.wiretapVideo=new c(this.config.omniture.videoJson,this.config.omniture.tokenHelpers,f)}}catch(g){}},initUserTracking:function(){try{var b=a.get("mediaConfig");b.get("videocore.tracking.omniture.app")&&(this.wiretapApp=new d(this.config.omniture.appJson,this.config.omniture.tokenHelpers,this.config.appData))}catch(c){}}},f||new e}),define("media-app-core/views/mediaPlayer",["backbone","media-app-core/utils/logger","media-app-core/models/applicationState","media-app-core/mediaPlatform","media-app-core/utils/parameters","media-app-core/utils/tracking"],function(a,b,c,d,e,f){var g=a.View.extend({mediaConfig:null,videoPlaybackManager:null,slots:[],eventManager:null,dispatcher:null,AdEvents:null,ApplicationEvents:null,MediaPlatformEvents:null,PlayerEvents:null,initialize:function(){b=new b("vpm-media-app-core:mediaPlayer");var a=this;a.mediaConfig=c.get("mediaConfig"),a.eventManager=c.get("eventManager"),a.dispatcher=this.eventManager.getDispatcher(),a.AdEvents=this.eventManager.Events.Ads,a.ApplicationEvents=this.eventManager.Events.Application,a.MediaPlatformEvents=this.eventManager.Events.MediaPlatform,a.PlayerEvents=this.eventManager.Events.Player,a.VPMEvents=this.eventManager.Events.VPM,a.initListeners(),a.videoPlaybackManager=new d(a.mediaConfig);var e=c.get("initialMediaRequest").toJSON();a.videoPlaybackManager.playMedia(e)},setDefaultMediaLayout:function(){},initListeners:function(){var a=this.AdEvents,b=this.ApplicationEvents,c=this.PlayerEvents,d=this.VPMEvents;this.dispatcher.on(b.REQUEST_MEDIA,this.onRequestMedia.bind(this)),this.dispatcher.on(a.AD_COMPANION,this.onAdCompanion.bind(this)),this.dispatcher.on(a.AD_COMPLETE,this.onAdComplete.bind(this)),this.dispatcher.on(a.AD_DEFAULT_COMPANION,this.onAdDefaultCompanion.bind(this)),this.dispatcher.on(a.AD_ERROR,this.onAdError.bind(this)),this.dispatcher.on(a.AD_PLUGIN_ERROR,this.onAdPluginError.bind(this)),this.dispatcher.on(a.AD_PLUGIN_LOADED,this.onAdPluginLoaded.bind(this)),this.dispatcher.on(a.AD_PREROLL_COMPLETE,this.onAdPrerollComplete.bind(this)),this.dispatcher.on(a.AD_PREROLL_START,this.onAdPrerollStart.bind(this)),this.dispatcher.on(a.AD_START,this.onAdStart.bind(this)),this.dispatcher.on(a.AD_TIME_UPDATE,this.onAdTimeUpdate.bind(this)),this.dispatcher.on(c.CLOSED_CAPTIONS_OFF,this.onClosedCaptionsOff.bind(this)),this.dispatcher.on(c.CLOSED_CAPTIONS_ON,this.onClosedCaptionsOn.bind(this)),this.dispatcher.on(c.CLOSED_CAPTIONS_AVAILABLE,this.onClosedCaptionsAvailable.bind(this)),this.dispatcher.on(c.CLOSED_CAPTIONS_TRACKS_CHANGED,this.onClosedCaptionsTracksChanged.bind(this)),this.dispatcher.on(c.CONTROLS_VISIBILITY_CHANGED,this.onControlsVisibilityChanged.bind(this)),this.dispatcher.on(c.CUE_POINT,this.onCuePoint.bind(this)),this.dispatcher.on(d.ERROR_MESSAGE,this.onErrorMessage.bind(this)),this.dispatcher.on(c.FULLSCREEN_CHANGE,this.onFullscreenChange.bind(this)),this.dispatcher.on(c.FULLSCREEN_END,this.onFullscreenEnd.bind(this)),this.dispatcher.on(c.FULLSCREEN_START,this.onFullscreenStart.bind(this)),this.dispatcher.on(c.MEDIA_COMPLETE,this.onMediaComplete.bind(this)),this.dispatcher.on(c.MEDIA_ERROR,this.onMediaError.bind(this)),this.dispatcher.on(c.MEDIA_PAUSED,this.onMediaPaused.bind(this)),this.dispatcher.on(c.MEDIA_PLAYING,this.onMediaPlaying.bind(this)),this.dispatcher.on(c.MEDIA_RESIZE,this.onMediaResize.bind(this)),this.dispatcher.on(c.MEDIA_RESUME,this.onMediaResume.bind(this)),this.dispatcher.on(c.MEDIA_SEEK,this.onMediaSeek.bind(this)),this.dispatcher.on(c.MEDIA_SET,this.onMediaSet.bind(this)),this.dispatcher.on(c.MEDIA_START,this.onMediaStart.bind(this)),this.dispatcher.on(c.MEDIA_TIME_UPDATE,this.onMediaTimeUpdate.bind(this)),this.dispatcher.on(c.MEDIA_VOLUME_CHANGED,this.onMediaVolumeChanged.bind(this)),this.dispatcher.on(d.META_DATA_LOADED,this.onMetaDataLoaded.bind(this)),this.dispatcher.on(c.META_DATA_PARSED,this.onMetaDataParsed.bind(this)),this.dispatcher.on(d.PLAYBACK_STARTED,this.onPlayerStarted.bind(this)),this.dispatcher.on(c.PLAYER_INITIALIZING,this.onPlayerInitializing.bind(this)),this.dispatcher.on(d.PLAYER_LOADED,this.onPlayerLoaded.bind(this)),this.dispatcher.on(c.PLAYLIST_COMPLETE,this.onPlaylistCompleted.bind(this)),this.dispatcher.on(c.PLAYLIST_START,this.onPlaylistStart.bind(this)),this.dispatcher.on(d.SEEK_COMPLETE,this.onSeekComplete.bind(this)),this.dispatcher.on(d.TIMECODE_UPDATE,this.onTimeCode.bind(this)),this.dispatcher.on(c.TRACKING_EVENT,this.onTrackingEvent.bind(this))},_setMediaLayout:function(a){c.set("mediaLayout",a)},onRequestMedia:function(a,b){var d=this;a||(a=c.get("initialMediaRequest"),a=a.toJSON());var f=e.get("path"),g=e.get("trackPath");f&&(a.path=f),g&&(a.trackPath=g),d.videoPlaybackManager&&d.videoPlaybackManager.playMedia(a)},onAdCompanion:function(a,c){b.log("onAdCompanion",a,c)},onAdComplete:function(a,c){b.log("onAdComplete",a,c)},onAdDefaultCompanion:function(a,c){b.log("onAdDefaultCompanion",a,c)},onAdError:function(a,c){b.log("onAdError",a,c)},onAdPluginError:function(a,c){b.log("onAdPluginError",a,c)},onAdPluginLoaded:function(a,c){b.log("onAdPluginLoaded",a,c)},onAdPrerollComplete:function(a,c){b.log("onAdPrerollComplete",a,c)},onAdPrerollStart:function(a,c){b.log("onAdPrerollStart",a,c)},onAdStart:function(a,c){b.log("onAdStart",a,c)},onAdTimeUpdate:function(a,c){b.log("onAdTimeUpdate",a,c)},onClosedCaptionsOff:function(a,c,d){b.log("onClosedCaptionsOff",a,c,d)},onClosedCaptionsOn:function(a,c,d){b.log("onClosedCaptionsOn",a,c,d)},onClosedCaptionsAvailable:function(a,c,d){b.log("onClosedCaptionsAvailable",a,c,d)},onClosedCaptionsTracksChanged:function(a,c,d){b.log("onClosedCaptionsTracksChanged",a,c,d)},onControlsVisibilityChanged:function(a,c,d){b.log("onControlsVisibilityChanged",a,c,d)},onCuePoint:function(a,c,d){b.log("onCuePoint",a,c,d)},onErrorMessage:function(a,c,d){b.log("onErrorMessage",a,c,d)},onFullscreenChange:function(a,c,d){b.log("onFullscreenChange",a,c,d)},onFullscreenEnd:function(a,c,d){b.log("onFullscreenEnd",a,c,d)},onFullscreenStart:function(a,c,d){b.log("onFullscreenStart",a,c,d)},onMediaComplete:function(a,c,d){b.log("onMediaComplete",a,c,d)},onMediaError:function(a,c,d){b.log("onMediaError",a,c,d)},onMediaPaused:function(a,c,d,e){b.log("onMediaPaused",a,d,e)},onMediaPlaying:function(a,c,d){b.log("onMediaPlaying",a,c,d)},onMediaResize:function(a,c,d){b.log("onMediaResize",a,c,d)},onMediaResume:function(a,c,d){b.log("onMediaResume",a,c,d)},onMediaSeek:function(a,c,d){b.log("onMediaSeek",a,c,d)},onMediaSet:function(a,c,d){b.log("onMediaSet",a,c,d)},onMediaStart:function(a,c,d){b.log("onMediaStart",a,c,d)},onMediaTimeUpdate:function(a,c,d){b.log("onMediaTimeUpdate",a,c,d)},onMediaVolumeChanged:function(a,c,d){b.log("onMediaVolumeChanged",a,c,d)},onMetaDataLoaded:function(a,c,d){b.log("onMetaDataLoaded",a,c,d)},onMetaDataParsed:function(a,c,d){b.log("onMetaDataParsed",a,c,d)},onPlayerStarted:function(a,c,d){b.log("onPlayerStarted",a,c,d)},onPlayerInitializing:function(a,c,d){b.log("onPlayerInitializing",a,c,d)},onPlayerLoaded:function(a,c,d){b.log("onPlayerLoaded",a,c,d),this.onRequestMedia()},onPlaylistCompleted:function(a,c,d){b.log("onPlaylistCompleted",a,c,d)},onPlaylistStart:function(a,c,d){b.log("onPlaylistStart",a,c,d)},onSeekComplete:function(a,c,d){b.log("onSeekComplete",a,c,d)},onTimeCode:function(a,c,d){b.log("onTimeCode",a,c,d)},onTrackingEvent:function(a,c,d){b.log("onTrackingEvent",a,c,d)},onContainerResize:function(a,c){b.log("onContainerResize",a,c)},onCatalogContentLoaded:function(a,b){var d=c.get("mediaItem");d.set(a)},onMediaNotPlayable:function(a,b,c){this.dispatcher.publish(this.ApplicationEvents.SHOW_MESSAGE,{key:"media.media_not_playable",container:c.container})},onNotAuthorized:function(a,b,c){this.dispatcher.publish(this.ApplicationEvents.SHOW_MESSAGE,{key:"authorization.not_authorized",container:c.container})},onInvalidAuthorization:function(a,b,c){this.dispatcher.publish(this.ApplicationEvents.SHOW_MESSAGE,{key:"authorization.invalid_authorization",container:c.container})},onExpiredAuthorization:function(a,b,c){this.dispatcher.publish(this.ApplicationEvents.SHOW_MESSAGE,{key:"authorization.expired_authorization",container:c.container})},onTemporarilyUnavailable:function(a,b,c){this.dispatcher.publish(this.ApplicationEvents.SHOW_MESSAGE,{key:"general.temporarily_unavailable",container:c.container})},onBlackout:function(a,b,c){this.dispatcher.publish(this.ApplicationEvents.SHOW_MESSAGE,{key:"media.blackout",container:c.container})},onNotEntitled:function(a,b,c){this.dispatcher.publish(this.ApplicationEvents.SHOW_MESSAGE,{key:"media.not_entitled",container:c.container})},onParentalControl:function(a,b,c){this.dispatcher.publish(this.ApplicationEvents.SHOW_MESSAGE,{key:"media.parental_control",container:c.container})},onPlaybackError:function(a,b,c){this.dispatcher.publish(this.ApplicationEvents.SHOW_MESSAGE,{key:"media.playback_error",container:c.container})},onMediaPlatformException:function(a,b,c){this.dispatcher.publish(this.ApplicationEvents.SHOW_MESSAGE,{key:"media.invalid_media",container:c.container})},onChangeMediaLayout:function(a,d){b.log("onChangeMediaLayout",a,d),this.layoutManager.updateMediaLayout(d,c.get("mediaLayout")).then(function(){b.log("onChangeMediaLayout -- updateMediaLayout -- Success")})["catch"](function(){b.log("onChangeMediaLayout -- updateMediaLayout -- Nothing updated")})}});return g}),function(a){"undefined"!=typeof define&&define.amd?define("scrollMonitor/scrollMonitor",[],a):"undefined"!=typeof module&&module.exports?module.exports=a():window.scrollMonitor=a()}(function(){function a(){if(j.viewportTop=i(),j.viewportBottom=j.viewportTop+j.viewportHeight,j.documentHeight=v(),j.documentHeight!==w){for(y=k.length;y--;)k[y].recalculateLocation();w=j.documentHeight}}function b(){j.viewportHeight=u(),a(),d()}function c(){clearTimeout(z),z=setTimeout(b,100)}function d(){for(A=k.length;A--;)k[A].update();for(A=k.length;A--;)k[A].triggerCallbacks()}function e(a,b){function c(a){if(0!==a.length)for(u=a.length;u--;)v=a[u],v.callback.call(d,x),v.isOne&&a.splice(u,1)}var d=this;this.watchItem=a,b?b===+b?this.offsets={top:b,bottom:b}:this.offsets={top:b.top||t.top,bottom:b.bottom||t.bottom}:this.offsets=t,this.callbacks={};for(var e=0,f=s.length;f>e;e++)d.callbacks[s[e]]=[];this.locked=!1;var g,h,i,k,u,v;this.triggerCallbacks=function(){switch(this.isInViewport&&!g&&c(this.callbacks[m]),this.isFullyInViewport&&!h&&c(this.callbacks[n]),this.isAboveViewport!==i&&this.isBelowViewport!==k&&(c(this.callbacks[l]),h||this.isFullyInViewport||(c(this.callbacks[n]),c(this.callbacks[p])),g||this.isInViewport||(c(this.callbacks[m]),c(this.callbacks[o]))),!this.isFullyInViewport&&h&&c(this.callbacks[p]),!this.isInViewport&&g&&c(this.callbacks[o]),this.isInViewport!==g&&c(this.callbacks[l]),!0){case g!==this.isInViewport:case h!==this.isFullyInViewport:case i!==this.isAboveViewport:case k!==this.isBelowViewport:c(this.callbacks[r])}g=this.isInViewport,h=this.isFullyInViewport,i=this.isAboveViewport,k=this.isBelowViewport},this.recalculateLocation=function(){if(!this.locked){var a=this.top,b=this.bottom;if(this.watchItem.nodeName){var d=this.watchItem.style.display;"none"===d&&(this.watchItem.style.display="");var e=this.watchItem.getBoundingClientRect();this.top=e.top+j.viewportTop,this.bottom=e.bottom+j.viewportTop,"none"===d&&(this.watchItem.style.display=d)}else this.watchItem===+this.watchItem?this.watchItem>0?this.top=this.bottom=this.watchItem:this.top=this.bottom=j.documentHeight-this.watchItem:(this.top=this.watchItem.top,this.bottom=this.watchItem.bottom);this.top-=this.offsets.top,this.bottom+=this.offsets.bottom,this.height=this.bottom-this.top,void 0===a&&void 0===b||this.top===a&&this.bottom===b||c(this.callbacks[q])}},this.recalculateLocation(),this.update(),g=this.isInViewport,h=this.isFullyInViewport,i=this.isAboveViewport,k=this.isBelowViewport}function f(b){x=b,a(),d()}var g="undefined"==typeof window,h=!g,i=function(){return g?0:window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop},j={},k=[],l="visibilityChange",m="enterViewport",n="fullyEnterViewport",o="exitViewport",p="partiallyExitViewport",q="locationChange",r="stateChange",s=[l,m,n,o,p,q,r],t={top:0,bottom:0},u=function(){return g?0:window.innerHeight||document.documentElement.clientHeight},v=function(){return g?0:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight)};j.viewportTop=null,j.viewportBottom=null,j.documentHeight=null,j.viewportHeight=u();var w,x,y,z,A;e.prototype={on:function(a,b,c){switch(!0){case a===l&&!this.isInViewport&&this.isAboveViewport:case a===m&&this.isInViewport:case a===n&&this.isFullyInViewport:case a===o&&this.isAboveViewport&&!this.isInViewport:case a===p&&this.isAboveViewport:if(b.call(this,x),c)return}if(!this.callbacks[a])throw new Error("Tried to add a scroll monitor listener of type "+a+". Your options are: "+s.join(", "));this.callbacks[a].push({callback:b,isOne:c||!1})},off:function(a,b){if(!this.callbacks[a])throw new Error("Tried to remove a scroll monitor listener of type "+a+". Your options are: "+s.join(", "));for(var c,d=0;c=this.callbacks[a][d];d++)if(c.callback===b){this.callbacks[a].splice(d,1);break}},one:function(a,b){this.on(a,b,!0)},recalculateSize:function(){this.height=this.watchItem.offsetHeight+this.offsets.top+this.offsets.bottom,this.bottom=this.top+this.height},update:function(){this.isAboveViewport=this.top<j.viewportTop,this.isBelowViewport=this.bottom>j.viewportBottom,this.isInViewport=this.top<=j.viewportBottom&&this.bottom>=j.viewportTop,this.isFullyInViewport=this.top>=j.viewportTop&&this.bottom<=j.viewportBottom||this.isAboveViewport&&this.isBelowViewport},destroy:function(){var a=k.indexOf(this),b=this;k.splice(a,1);for(var c=0,d=s.length;d>c;c++)b.callbacks[s[c]].length=0},lock:function(){this.locked=!0},unlock:function(){this.locked=!1}};for(var B=function(a){return function(b,c){this.on.call(this,a,b,c)}},C=0,D=s.length;D>C;C++){var E=s[C];e.prototype[E]=B(E)}if(h)try{a()}catch(F){try{window.$(a)}catch(F){throw new Error("If you must put scrollMonitor in the <head>, you must use jQuery.")}}return h&&(window.addEventListener?(window.addEventListener("scroll",f),window.addEventListener("resize",c)):(window.attachEvent("onscroll",f),window.attachEvent("onresize",c))),j.beget=j.create=function(a,b){"string"==typeof a?a=document.querySelector(a):a&&a.length>0&&(a=a[0]);var c=new e(a,b);return k.push(c),c.update(),c},j.update=function(){x=null,a(),d()},j.recalculateLocations=function(){j.documentHeight=0,j.update()},j}),function(a,b){"function"==typeof define&&define.amd?define("bam-visibly/visibly",[],b):a.visibly=b()}(this,function(){return this.visibly={q:document,p:void 0,prefixes:["webkit","ms","o","moz","khtml"],props:["VisibilityState","visibilitychange","Hidden"],m:["focus","blur"],visibleCallbacks:[],hiddenCallbacks:[],genericCallbacks:[],_callbacks:[],cachedPrefix:"",fn:null,onVisible:function(a){"function"==typeof a&&this.visibleCallbacks.push(a)},onHidden:function(a){"function"==typeof a&&this.hiddenCallbacks.push(a)},getPrefix:function(){if(!this.cachedPrefix)for(var a=0;b=this.prefixes[a++];)if(b+this.props[2]in this.q)return this.cachedPrefix=b,this.cachedPrefix},visibilityState:function(){return this._getProp(0)},hidden:function(){return this._getProp(2)},visibilitychange:function(a){"function"==typeof a&&this.genericCallbacks.push(a);var b=this.genericCallbacks.length;if(b)if(this.cachedPrefix)for(;b--;)this.genericCallbacks[b].call(this,this.visibilityState());else for(;b--;)this.genericCallbacks[b].call(this,arguments[0])},isSupported:function(a){return this._getPropName(2)in this.q},_getPropName:function(a){return""==this.cachedPrefix?this.props[a].substring(0,1).toLowerCase()+this.props[a].substring(1):this.cachedPrefix+this.props[a]},_getProp:function(a){return this.q[this._getPropName(a)]},_execute:function(a){if(a){this._callbacks=1==a?this.visibleCallbacks:this.hiddenCallbacks;for(var b=this._callbacks.length;b--;)this._callbacks[b]()}},_visible:function(){window.visibly._execute(1),window.visibly.visibilitychange.call(window.visibly,"visible")},_hidden:function(){window.visibly._execute(2),window.visibly.visibilitychange.call(window.visibly,"hidden")},_nativeSwitch:function(){this[this._getProp(2)?"_hidden":"_visible"]()},_listen:function(){try{this.isSupported()?this.q.addEventListener(this._getPropName(1),function(){window.visibly._nativeSwitch.apply(window.visibly,arguments)},1):this.q.addEventListener?(window.addEventListener(this.m[0],this._visible,1),window.addEventListener(this.m[1],this._hidden,1)):this.q.attachEvent&&(this.q.attachEvent("onfocusin",this._visible),this.q.attachEvent("onfocusout",this._hidden))}catch(a){}},init:function(){this.getPrefix(),this._listen()}},this.visibly.init(),this.visibly}),function(a,b){"function"==typeof define&&define.amd?define("active-sponsorship/active-sponsorship",["require","exports","module","scrollMonitor/scrollMonitor","bam-visibly/visibly"],function(a,c,d){d.exports=b(a("scrollMonitor/scrollMonitor"),a("bam-visibly/visibly"))}):"object"==typeof exports?module.exports=b(require("scrollMonitor/scrollMonitor"),require("bam-visibly/visibly")):a.bamActiveSponsorship=b(a.scrollMonitor,a.visibly)}(this,function(a,b){"use strict";function c(){b.visibilitychange(function(a){h=a,i=(!b.hidden()).toString()}),g=!0}function d(b){var c=a.create(b),d=c.top+c.height/2>=a.viewportTop,e=c.bottom-c.height/2<=a.viewportBottom,f=c.isInViewport&&d&&e;return c.destroy(),f.toString()}function e(a){var b=f.getElementById(a);return g||c(),b?{tabvisible:i,inviewport:d(b)}:void 0}var f=document,g=(window,!1),h="hidden",i="false";return{adSlotTargeting:e,tabState:h,tabVisible:i}}),function(a){"function"==typeof define&&define.amd?define("paperboy/paperboy",a):"object"==typeof module&&module.exports?module.exports=a():window.paperboy=a()}(function(){"use strict";function a(a,b){for(var c=0;c<a.length;c+=1)if(a[c]===b)return c;return-1}function b(a,c,d){return!a[d]&&c[d]?!1:c[d]?"*"===c[d]||c[d]===a[d]?b(a,c,d+1):!1:!0}function c(a,b,c){window.console&&(console[f]("Error in callback for "+a+" event. "+b.message),console.log(b))}var d={},e=Array.prototype.slice;d.isWildcardMatch=function(a,c){return b(a.split(/[\.:]/g),c.split(/[\.:]/g),0)};var f=window.console&&console.error?"error":"log";return d.mixin=function(d,f,g){function h(a,b){throw new Error("tried to "+a+" a non-existent event type: "+b+". Options are: "+f.join(", "))}function i(a,b,c,d,e){e=!!e,b&&!a[c]?h("add",c):a[c]||(a[c]=[]),a[c].push({callback:d,isOne:e})}function j(a,b,c,d){if(b&&!a)h("remove",c);else if(!a)return;for(var e,f=0;e=a[f];f+=1)if(e.callback===d)return void a.splice(f,1)}function k(a,b,d,e,f){for(var g=a.slice(),h=0;h<g.length;h++){try{g[h].callback.apply(b,d)}catch(i){c(f,i,g[h].callback)}g[h].isOne&&j(a,!1,e,g[h].callback)}}function l(a,c,e){var f=e[0];c&&!a[f]&&h("trigger",f),a["*"]&&k(a["*"],d,e,f,f),e.shift();var g=f.split(/[\.:]/g);for(var i in a){var j=i.split(/[\.:]/g);"*"!==i&&a.hasOwnProperty(i)&&b(g,j,0)&&k(a[i],d,e,f,f)}}var m={"*":[]},n=!!f,o={"*":[]},p={"*":[]},q={},r={},s=!!g;if(f)for(var t=0;t<f.length;t+=1)m[f[t]]=[];if(g)for(var t=0;t<g.length;t+=1)o[g[t]]=[],p[g[t]]=[];d.on=function(a,b,c){i(m,n,a,b,c)},d.one=function(a,b){d.on(a,b,!0)},d.off=d.on.remove=function(a,b){j(m[a],n,a,b)},d.is=function(a,b,c){q[a]&&(b.apply(d,r[a]),c)||i(o,s,a,b,c)},d.is.one=function(a,b){d.is(a,b,!0)},d.is.remove=function(a,b){j(o[a],n,a,b)},d.not=function(a,b,c){(q[a]||(b.apply(d,r[a]||[]),!c))&&i(p,s,a,b,c)},d.not.one=function(a,b){d.not(a,b,!0)},d.not.remove=function(a,b){j(p[a],n,a,b)};var u=function(){var a=e.call(arguments);l(m,n,a)};return u.is=function(a){if(!q[a]){var b=e.call(arguments);q[a]=!0,r[a]=b.slice(1),l(o,s,b)}},u.not=function(a){if(q[a]){var b=e.call(arguments);q[a]=!1,r[a]=b.slice(1),l(p,s,b)}},d.on.accepts=function(b){return n?-1!==a(f,b):!0},d.is.accepts=function(b){return s?-1!==a(g,b):!0},u.repeat=function(a,b,c){if(b)for(var f=0;f<b.length;f+=1)!d.on.accepts||d.on.accepts(b[f])?!function(b){a.on(b,function(){var a=e.call(arguments);a.unshift(b),u.apply(d,a)})}(b[f]):h("repeat",b[f]);else a.on("*",function(){u.apply(d,arguments)});if(c)for(var f=0;f<c.length;f+=1)d.is.accepts(c[f])?!function(b){a.is(b,function(){var a=e.call(arguments);a.unshift(b),u.is.apply(d,a)}),a.not(b,function(){var a=e.call(arguments);a.unshift(b),u.not.apply(d,a)})}(c[f]):h("repeat state",b[f]);else c!==!1&&a.is&&a.is.accepts&&(a.is("*",function(){u.is.apply(d,arguments)}),a.not("*",function(){u.not.apply(d,arguments)}))},u},d.emitter=function(a){var b={};return b.trigger=d.mixin(b,a),b},d}),function(a,b){"function"==typeof define&&define.amd?define("doubleclick/gpt",["require","exports","module","jquery","bam.url/url","ensureArray/ensureArray","active-sponsorship/active-sponsorship","paperboy/paperboy"],function(a,c,d){d.exports=b(a("jquery"),a("bam.url/url"),a("ensureArray/ensureArray"),a("active-sponsorship/active-sponsorship"),a("paperboy/paperboy"))}):"object"==typeof exports?module.exports=b(require("jquery"),require("bam.url/url"),require("ensureArray/ensureArray"),require("active-sponsorship/active-sponsorship"),require("paperboy/paperboy")):a.bamDoubleclickGpt=b(a.jQuery,a.bamUrl,a.bamEnsureArray,a.bamActiveSponsorship,a.paperboy)}(this,function(a,b,c,d,e){"use strict";function f(a){var b,c,d,e=document.cookie.split(";");for(b=0;b<e.length;b++)if(c=e[b].substr(0,e[b].indexOf("=")),d=e[b].substr(e[b].indexOf("=")+1),c=c.replace(/^\s+|\s+$/g,""),c==a)return decodeURIComponent(d);return""}function g(a){window.crtg_nid=a.nid||"3665",window.crtg_cookiename=a.cookiename||"crtg_mlb",window.crtg_varname=a.varname||"crtg_content",window.crtg_rnd=Math.floor(99999999999*Math.random()),window.crtg_content=f(window.crtg_cookiename),window.crtg_split=window.crtg_content.split(";"),window.crtg_object={};var b=document.location.protocol+"//rtax.criteo.com/delivery/rta/rta.js?netId="+encodeURIComponent(window.crtg_nid);b+="&cookieName="+encodeURIComponent(window.crtg_cookiename),b+="&rnd="+window.crtg_rnd,b+="&varName="+encodeURIComponent(window.crtg_varname);var c=document.createElement("script");c.async=!0,c.type="text/javascript",c.src=b;var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}function h(){var a=p.networkId+p.adUnitHierarchy1;return a}function i(a){for(var b=p.thresholds.length;b;)if(b-=1,a>=p.thresholds[b])return b}var j,k,l,m,n={},o=e.mixin(n),p={networkId:"/2605/",inventoryHierarchy:"mlb.mlb/",adUnitHierarchy1:"mlb.mlb",adUnitHierarchy2:"/test",adUnitHierarchy3:"",adUnitHierarchy4:"",adUnitHierarchy5:"",appView:"web",skinElement:"body",enableSingleRequest:!1,responsive:!1,thresholds:[0,480,670,768,980,1024],targeting:{},slotRenderedHandler:a.noop},q=b.Location().getParam("adtest"),r=a("html"),s=a(window);window.googletag=window.googletag||{},window.gptadslots=window.gptadslots||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(function(){window.googletag.pubads().enableAsyncRendering(),window.googletag.pubads().collapseEmptyDivs(),window.googletag.pubads().addEventListener("slotRenderEnded",p.slotRenderedHandler)});var t=function(){var a="https:"===document.location.protocol,b=document.createElement("script");b.async=!0,b.type="text/javascript",b.src=(a?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)};return window.setTakeover=function(b){var c=b.bgColor||"#000000",d=b.bgImage?"url("+b.bgImage+")":"none",e=b.bgPosition||"center top",f=b.bgRepeat||"no-repeat",g=b.bgAttachment||"scroll";if(r.addClass("sponsored-takeover"),k.css({"background-color":c,"background-image":d,"background-position":e,"background-repeat":f,"background-attachment":g}),b.clickHref){var h=b.clickHref,i=b.clickTarget||"_blank",j=b.clickHeight||"900px",l=b.clickTop||k.position().top||"0";r.find("#sponsored-takeover-link").length||a("<a></a>").attr({id:"sponsored-takeover-link",target:i,href:h}).css({display:"block",position:"absolute","z-index":"0",width:"100%",height:j,top:l}).prependTo(k)}a("#sidebar-takeover-news").insertAfter(a("#sidebar-takeover-ad")),a(".club-bg-skin__link").remove()},n.subscribeSlotRendered=function(a){window.googletag.pubads().addEventListener("slotRenderEnded",a)},n.groupRefresh=function(a){for(var b,d,e=c(a),f=0;f<e.length;f+=1)b=e[f]&&e[f].container||"",d=e[f]&&e[f].targeting||p.targeting,b in window.gptadslots&&(n.setTargeting(b,d),n.display(b),n.refresh(b))},n.responsiveRefresh=function(b){b=void 0!==b?b:{};var c=p.targeting,d=!!b.refreshExistingAd;l.each(function(){var b=a(this);b.find(".ad-responsive-size").hide().each(function(){var e=a(this),f=e.data("thresholds"),g=a.inArray(m,f)>-1;if(g){var h=b.data("targeting"),i=e.data("targeting"),k=a.extend({},c,h,i),l=e.attr("id"),o=e.data("sizes");if(l in window.gptadslots)a.isEmptyObject(k)||(n.setTargeting(l,k),n.display(l),d&&n.refresh(l));else{var p=b.hasClass("ad-outofpage");p?n.queue(function(){window.gptadslots[l]=window.googletag.defineOutOfPageSlot(j,l).addService(window.googletag.pubads())}):n.queue(function(){window.gptadslots[l]=window.googletag.defineSlot(j,o,l).addService(window.googletag.pubads())}),a.isEmptyObject(k)||n.setTargeting(l,k),n.display(l)}}return!g})})},n.responsiveInit=function(){var a;m=i(s.width()),n.responsiveRefresh(),s.on("resize",function(){clearTimeout(a),a=setTimeout(function(){var a,b=i(s.width());b!==m&&(a=m,m=b,n.responsiveRefresh(),o("AD_THRESHOLD_CHANGE",{previous:a,threshold:b}))},500)})},n.queue=function(a){window.googletag.cmd.push(a)},n.enableSingleRequest=function(){n.queue(function(){window.googletag.pubads().enableSingleRequest()})},n.defineOutOfPageSlot=function(a){var b=a.container,c=a.targeting,d=j;a.inventoryHierarchy&&(d=h()+a.inventoryHierarchy),n.queue(function(){window.gptadslots[b]=window.googletag.defineOutOfPageSlot(d,b).addService(window.googletag.pubads())}),n.setTargeting(b,c)},n.defineSlot=function(b){var c=p.targeting,d=b.container,e=b.sizes,f=a.extend({},b.targeting,c),g=j;b.inventoryHierarchy&&(g=h()+b.inventoryHierarchy),n.queue(function(){window.gptadslots[d]=window.googletag.defineSlot(g,e,d).addService(window.googletag.pubads())}),n.setTargeting(d,f)},n.defineAndDisplaySlot=function(a){var b=a.container,c=a.sizes,d=j;a.inventoryHierarchy&&(d=h()+a.inventoryHierarchy),n.queue(function(){window.gptadslots[b]=window.googletag.pubads().display(d,c,b)})},n.setPageTargeting=function(a){n.queue(function(){for(var b in a)a.hasOwnProperty(b)&&window.googletag.pubads().setTargeting(b,a[b])})},n.setTargeting=function(b,c){n.queue(function(){c=a.extend({},c,d.adSlotTargeting(b));for(var e in c)c.hasOwnProperty(e)&&window.gptadslots[b].setTargeting(e,c[e])})},n.enableServices=function(){n.queue(function(){window.googletag.enableServices()})},n.display=function(a){document.getElementById(a).style.display="block",n.queue(function(){window.googletag.display(a)})},n.refresh=function(a){for(var b=c(a),d=window.googletag.pubads(),e=[],f=0;f<b.length;f++)e.push(window.gptadslots[b[f]]);d.refresh(e)},n.resetResponsiveSlots=function(){l=a(".ad-responsive-slot")},n.siteCoreConfig=function(b){a.extend(p,b),"web"!==p.appView||window.googletag.apiReady||t()},n.init=function(b){if(l=a(".ad-responsive-slot"),a.extend(p,b),b&&b.inventoryHierarchy){var c=p.inventoryHierarchy.split("/");c.forEach(function(a,b){var c="adUnitHierarchy"+(b+1),d=b>0?"/"+a:a;p[c]=d})}if(k=a(p.skinElement),j=p.networkId+p.adUnitHierarchy1+p.adUnitHierarchy2+p.adUnitHierarchy3+p.adUnitHierarchy4+p.adUnitHierarchy5,window.deviceBootstrap){var d=window.deviceBootstrap().formFactor,f=window.deviceBootstrap().platform,h=["tablet","phone"].indexOf(d)>-1,m=["ios","android"].indexOf(f)>-1;j+="/"+d,h&&(j+="/"+(m?f:"other")),n.setPageTargeting({devicetype:window.deviceBootstrap().formFactor})}if(window.DeviceType&&n.setPageTargeting({devicetype:window.DeviceType.device}),q&&n.setPageTargeting({adtest:q}),p.enableSingleRequest&&n.enableSingleRequest(),p.hasOwnProperty("outOfPageAd")&&n.defineOutOfPageSlot(p.outOfPageAd),p.hasOwnProperty("ads"))for(var r=0;r<p.ads.length;r++)n.defineSlot(p.ads[r]);if(p.hasOwnProperty("criteo")){g(p.criteo);for(var u=1;u<window.crtg_split.length;u++)window.crtg_object[window.crtg_split[u-1].split("=")[0]]=window.crtg_split[u-1].split("=")[1];n.setPageTargeting(window.crtg_object)}if(n.enableServices(),p.responsive&&n.responsiveInit(),p.hasOwnProperty("outOfPageAd")&&n.display(p.outOfPageAd.container),p.hasOwnProperty("ads"))for(var v=0;v<p.ads.length;v++)n.display(p.ads[v].container);"web"!==p.appView||window.googletag.apiReady||t(),n.on=e.on,o("DOUBLE_CLICK_INIT_COMPLETE",{threshold:i(s.width())})},n}),define("text!vpm-media-app/templates/FreewheelBannerSlot.html",[],function(){return'<span id="{{slotId}}" class="_fwph">\n    <form id="_fw_form_{{slotId}}" style="display:none;">\n        <input type="hidden" name="_fw_input_{{slotId}}" id="_fw_input_{{slotId}}" value="{{slotParams}}">\n    </form>\n    <span id="_fw_container_{{slotId}}" class="_fwac"></span>\n</span>\n';
}),define("vpm-media-app/views/a__d__central",["backbone","media-app-core/models/applicationState","doubleclick/gpt","lodash/lodash","pageMeta/pageMeta","handlebars/handlebars","text!vpm-media-app/templates/FreewheelBannerSlot.html"],function(a,b,c,d,e,f,g){var h=a.View.extend({viewName:"Ads",tagName:"div",segmentID:void 0,markup:"",mobileAdContainer:document.querySelector(".mobile-sponsored"),$skin:$("#content-wrap"),assets:{},events:{},AdConfig:{adUnitHierarchy1:e.doubleclick_adunit?e.doubleclick_adunit:"mlb.mlb",adUnitHierarchy2:"/multimedia",outOfPageAd:{container:"ad-skin"}},freewheelBannerSlotTemplate:f.compile(g),cacheAdRails:function(a){var c=b.get("device").formFactor;this.assets=a,"desktop"===c?this.showDesktopAd():this.showMobileAd()},requestAd:function(a){var d,e,f=a.container;if(b.get("isSponsored")&&f&&$(f).is(":visible")){f.classList.remove("unloaded"),d=a.container.id,e={},c.defineSlot({container:d,sizes:a.sizes}),e.pos=1;try{c.setTargeting(d,e),window.googletag.display(d)}catch(g){console.log(g)}}},showDesktopAd:function(){if(!this.$skin.hasClass("sponsored")&&b.get("isSponsored")){this.$skin.css({backgroundColor:this.assets.bgColor,backgroundImage:"url("+this.assets.bgImage+")",backgroundRepeat:"no-repeat",backgroundPosition:"center top"}),this.$skin.addClass("sponsored"),this.$skin.removeClass("no-skins"),this.$skin.unbind("click");var a=this;this.$skin.click(function(b){if(a.assets&&a.assets.clickHref&&a.$skin.hasClass("sponsored")&&a.$skin.is(":visible")){for(var c=$(b.target),d=["#media-view","#metadata","#playlists-view","#alerts-container","#message-container","#custom-footer","#bottom","#mobile-sponsored-ad","#video-player"],e=!1,f=0;f<d.length;f++)c.closest("#content-wrap "+d[f]).length>0&&(e=!0);e||window.open(a.assets.clickHref)}})}},updateDesktopAd:function(a){var c=this,d=b.get("device").formFactor;a.matches&&"desktop"===d&&c.showDesktopAd()},hideDesktopAd:function(a){var c=this,d=b.get("device").formFactor;a.matches&&"desktop"!==d&&(c.$skin.removeClass("sponsored"),c.$skin.addClass("no-skins"),c.$skin.unbind("click"),c.showMobileAd())},showMobileAd:function(){this.requestAd({sizes:[320,40],container:this.mobileAdContainer})},initialize:function(a){this.mediaConfig=b.get("mediaConfig"),this.eventManager=b.get("eventManager"),this.dispatcher=this.eventManager.getDispatcher(),this.siteSection=this.mediaConfig.get("videocore.advertising.siteSection","mlb_video_hub");var c=b.get("appType");"app"==c?(this.initListeners(),this.render(),this.setupCompanion(),window.googletag=window.googletag||{},window.gptadslots=window.gptadslots||{},window.googletag.cmd=window.googletag.cmd||[]):console.log("page ads not enabled for embed and share views")},setupGptAds:function(){var a=b.get("device").formFactor;"desktop"===a?(console.log("setup doubleclick ad skin"),window.setTakeover=$.proxy(this.cacheAdRails,this)):delete this.AdConfig.outOfPageAd;var d={adunit:"video",pageid:"topic_video_"+b.get("id")};c.setPageTargeting(d),c.init(this.AdConfig),"phone"===a&&this.showMobileAd()},parseTopicSkin:function(a){var b="";return d.each(a,function(a){a.cuts&&a.cuts.length&&d.each(a.cuts,function(a){1680===a.width&&(b&&console.warn("Background image is being overridden: "+b),b=a.src)})}),b},setupTopicSkin:function(){var a=b.get("topicSkin"),c=this.parseTopicSkin(a);c&&(this.$skin.removeClass("no-skins"),this.$skin.addClass("sponsored"),this.$skin.css({backgroundImage:"url("+c+")",backgroundRepeat:"no-repeat",backgroundPosition:"center top"}),this.$skin.unbind("click"))},initListeners:function(){var a=(this.eventManager.Events.Player,this.eventManager.Events.Application,window.matchMedia("(max-width: 568px)")),b=window.matchMedia("(min-width: 569px) and (max-width: 767px)"),c=window.matchMedia("(min-width: 768px) and (max-width: 1023px)"),d=window.matchMedia("(min-width: 1024px) and (max-width: 1307px)"),e=window.matchMedia("(min-width: 1308px)");a.addListener($.proxy(this.hideDesktopAd,this)),b.addListener($.proxy(this.updateDesktopAd,this)),c.addListener($.proxy(this.updateDesktopAd,this)),d.addListener($.proxy(this.updateDesktopAd,this)),e.addListener($.proxy(this.updateDesktopAd,this))},render:function(){var a=b.get("isSponsored");a?this.setupGptAds():b.get("topicSkin")&&b.get("topicSkin").length>0&&this.setupTopicSkin()},setupCompanion:function(){var a=$("#companion-ad-slot");-1!==["desktop","tablet"].indexOf(b.get("device").formFactor)?a.html(this.freewheelBannerSlotTemplate({slotId:this.siteSection+"_300_100",slotParams:"cd=300,100&slau=300x100&w=300&h=100"})):a.hide()}});return h}),define("text!flashblock-detector/templates/alert.html",[],function(){return'<div class="alert banner-message help">\n    <span id="close" class="icons__item pull-right" data-name="close"><i class="icon bam-icon--close"></i></span>\n    <div class="alert-message-text">Your Flash Player plugin has been blocked. Please click "Click to use Plug-in" below to play the video.\n        </span>\n    </div>\n</div>\n'}),define("flashblock-detector/flashblock-detector",["handlebars/handlebars","lodash/lodash","jquery","text!./templates/alert.html"],function(a,b,c,d){function e(e,f,h){var i=b.assign({},g,f);if(window.deviceBootstrap().is[i.browser]){setTimeout(function(){var b=document.getElementById(e);if("undefined"!=typeof b.PercentLoaded&&b.PercentLoaded())h("not_blocked");else{if(i.showAlert){var f=a.compile(d);c("#"+e).before(f)}h("blocked")}},2e3)}}var f;a.registerPartial("flashblock-alert",d);var g={showAlert:!0};return f={init:e}}),function(a,b){"function"==typeof define&&define.amd?define("vpm-media-app/utils/tagExtractor",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash/lodash")):a.utilsTagExtractor=b(null)}(this,function(a){function b(b){try{var c={};return b.some(function(b){if("mlbtax"===b.type)switch(b.value){case"umpire_review":return a.assign(c,e.umpire_review),!0;case"vtp_review":return a.assign(c,e.vtp_review),!0;case"vtp_player_tracking":case"player_tracking":return a.assign(c,e.player_tracking),!0;default:return!1}return!1}),c.label?c:!1}catch(d){console.trace(),console.log("get tag error",d)}}function c(a,b){var c=a.filter(function(a){return-1===f.indexOf(a.type)?!1:(a.link=b+"/video/search/"+g[a.type]+"/"+encodeURIComponent(a.displayName),!0)});return c.length>0?c:!1}var d={replay:{type:"replay",label:"Replay"},statcast:{type:"statcast",label:"Statcast"}},e={umpire_review:d.replay,vtp_review:d.replay,player_tracking:d.statcast},f=["mlbtax"],g={mlbtax:"tag"};return{getTag:b,getKeywordTags:c}}),function(a,b){"function"==typeof define&&define.amd?define("bam-embed-utils/index",["moment/moment"],b):"object"==typeof exports?module.exports=b(require("moment")):a.BamHbsHelpers=b(a.moment)}(this,function(a){"use strict";var b={isVideoEmbeddable:function(b,c){var d=b.keywordsAll?b.keywordsAll:b.keywords||{},e=a(b.date),f=a(),c=c||48,g=e.add(c,"h").isBefore(f),h=d.filter(function(a){return a.hasOwnProperty("type")&&"mmtax"===a.type&&a.hasOwnProperty("value")}),i=void 0!==h.find(function(a){return"embeddable"===a.value}),j=void 0===h.find(function(a){return"not_embeddable"===a.value});return j&&(g||i)?(g?console.log("** THIS IS EMBEDDABLE - published long enough"):console.log("** THIS IS EMBEDDABLE - skipping "+c+"hr share rule"),!0):(console.log("** THIS IS NOT EMBEDDABLE"),!1)}};return b}),define("jquery.bindable/jquery.bindable",["require","exports","module","jquery"],function(a,b,c){var d=a("jquery"),e=/\s+/;return d.unwhite=function(a){return a=a&&d.trim(a),a.length?a.split(e):[]},d.eventProxy=function(a,b){var c=d.proxy.apply(null,arguments);return function(){return c.apply(null,Array.prototype.slice.call(arguments,1))}},d.bindable=function(a,b){return a instanceof Object||(b=a,a={}),a=d.isFunction(a)?a.prototype:a,d.each(["bind","one","unbind","on","off"],function(b,c){a[c]=function(a,b,e){return d(this)[c](a,b,e),this}}),a.trigger=function(a,b){var c=new d.Event(a),e=new d.Event(c);return c.preventDefault(),e.type="*",c.type!==e.type&&d.event.trigger(c,b,this),d.event.trigger(e,b,this),this},"string"==typeof b&&d.each(d.unwhite(b),function(b,c){a[c]=function(a,b){return arguments.length?this.bind(c,a,b):this.trigger(c)}}),a},$.bindable.bind($)}),define("facebook/fb",["require","exports","module","bam.url/url","jquery.bindable/jquery.bindable"],function(a,b,c){var d,e=a("bam.url/url"),f=a("jquery.bindable/jquery.bindable"),g="v2.0",h="notLoggedIn",i="isLoggedIn",j=g+"/me",k=g+"/me/friends",l=g+"/me/home",m=g+"/me/feed",n=g+"/me/likes",o=g+"/me/movies",p=g+"/me/books",q=g+"/me/notes",r=g+"/me/photos",s=g+"/me/albums",t=g+"/me/videos",u=g+"/me/events",v=g+"/me/groups",w=g+"/me/checkins",x=("undefined"!=typeof dc_lang?dc_lang:"",function(){}),y=!1,z=window.location.hostname;(z.match(/^.*?-?(\w*)\./)||["","dev"])[1];b.init=function(a){var b=this,c=$.Deferred();e.Location(window.location).getDomain()+".com";return window.FB||y?(c.resolve(),$(window).trigger("bam.social.fbready")):(a=$.extend({appId:"qa.mlb.com"===window.location.hostname?$("meta[property='fb:app_id']").attr("content"):$("meta[property='fb:app_id']").attr("content")||"7848098180",cookie:!0,xfbml:!0,version:g},a),0===$("#fb-root").length&&$("body").prepend('<div id="fb-root"></div>'),window.fbAsyncInit=function(){y=!0,FB.init(a),$(window).trigger("bam.social.fbready"),b.trigger("FBApiInit"),c.resolve()},function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/en_US/sdk.js",e.parentNode.insertBefore(d,e))}(document,"script","facebook-jssdk")),c.promise()},b.ready=$.Deferred(),b.render=function(){window.FB&&FB.XFBML.parse()},b.api={userInfo:function(a){this.execute(j,a)},userFriends:function(a){this.execute(k,a)},userNewsFeed:function(a){this.execute(l,a)},userWallFeed:function(a){this.execute(m,a)},userLikes:function(a){this.execute(n,a)},userMovies:function(a){this.execute(o,a)},userBooks:function(a){this.execute(p,a)},userNotes:function(a){this.execute(q,a)},userPhotos:function(a){this.execute(r,a)},userAlbums:function(a){this.execute(s,a)},userVideos:function(a){this.execute(t,a)},userEvents:function(a){this.execute(u,a)},userGroups:function(a){this.execute(v,a)},userCheckins:function(a){this.execute(w,a)},execute:function(a,b){FB.api(a,"function"==typeof b?b:x)}},b.auth={login:function(a){FB.login(function(a){a.session&&a.perms?d.trigger(i):d.trigger(h)},{scope:a})},logout:function(){FB.logout(function(a){d.trigger(EVENT_IS_LOGOUT)})},update:function(a){a.session&&a.perms?d.trigger(i):d.trigger(h)}},b.event={subscribe:function(a,b){return FB.Event.subscribe(a,b),this},unsubscribe:function(a,b){return FB.Event.unsubscribe(a,b),this}},b.fql={},b.iframes={like:function(a){var c=a.svc_cfg.isFBML,d=a.svc_cfg.ref?"ref="+a.svc_cfg.ref:"",e=(a.svc_cfg.url?a.svc_cfg.url:a.url,a.parent.cfg.sequenceloading||a.parent.cfg.manuallyloading?"data-url":"src");$(a.target).empty().html(c?'<div class="fb-like" data-href="'+a.parent.cfg.url+'" data-send="false" data-layout="'+a.svc_cfg.layout+'" data-width="'+a.width+'" data-height="'+a.height+'" data-show-faces="'+a.svc_cfg.showface+'" data-action="'+a.svc_cfg.action+'"'+d+"></div>":'<iframe class="fb-like" '+e+'="//www.facebook.com/plugins/like.php?href='+encodeURIComponent(a.parent.cfg.url)+"&amp;"+d+"&amp;layout="+a.svc_cfg.layout+"&amp;width="+a.width+"&amp;action="+a.svc_cfg.action+"&amp;height="+a.height+'" scrolling="no" frameborder="0"  allowTransparency="true"></iframe>'),c?(a.svc_cfg.omniture&&(b.unbind("FBLike"),b.bind("FBLike",function(){a.omniture&&bam&&bam.tracking&&bam.tracking.track?bam.tracking.track(a.svc_cfg.omniture):a.svc_cfg.omniture&&"function"==typeof fireTracking&&a.svc_cfg.omniture.pagename&&a.svc_cfg.omniture.sectionid&&fireTracking(a.svc_cfg.omniture.pagename,a.svc_cfg.omniture.sectionid)})),a.parent.cfg.manuallyloading||(window.FB?FB.XFBML.parse():$(window).bind("bam.social.fbready",function(){FB.XFBML.parse()}))):$(a.target).css({border:"none",overflow:"hidden",height:a.height+"px",width:a.width+"px"})},comments:function(a){}},f(b)}),define("bitly/bitly",["require","exports","module","jquery.bindable/jquery.bindable"],function(a,b,c){var d=a("jquery.bindable/jquery.bindable"),e={},f="urlLoaded",g=($.Deferred(),{mlb:{login:"mlbam",api:"R_a7e33697d1994f138f490d325ed1539f"},milb:{login:"milb",api:"R_0afcd900266c4a74acce538f54f1b1a0"},worldbaseballclassic:{login:"mlbam",api:"R_a7e33697d1994f138f490d325ed1539f"},usabaseball:{login:"mlbam",api:"R_a7e33697d1994f138f490d325ed1539f"},yesnetwork:{login:"yesnetwork",api:"R_c7696069b0ef4a3cb4576979bc14a454"}}),h=function(a){return a?a:window.location.host.split(".").splice(-2,1)};c=function(){function a(a,b,c){var d="https:"===location.protocol?"https://api-ssl.bitly.com":"http://api.bitly.com";return g[h(c)]?e[a]?e[a]:$.ajax({dataType:"jsonp",url:d+"/v3/shorten?login="+g[h(c)].login+"&apiKey="+g[h(c)].api+"&format=json",data:{longUrl:a},success:function(b){e[a]=b}}):{data:a}}function b(a,c,d){return this instanceof b?(this.url=a,this.format=c,void(this.config=d)):new b(a,c,d)}return b.prototype={shorten:function(){var b=this;return $.when(a(this.url,this.format,this.config)).done(function(a){b.trigger(f,[a.data.url])}),this}},d(b.prototype),{url:b,getShortenUrl:a}}(),$.extend(b,c)}),define("social/social",["require","exports","module","jquery","jquery.bindable/jquery.bindable","facebook/fb","bam.url/url","bitly/bitly","client/client"],function(a,b,c){var d,e,f=a("jquery"),g=a("jquery.bindable/jquery.bindable"),h=a("facebook/fb"),i=a("bam.url/url"),j=(a("bitly/bitly"),a("client/client")),k=[],l=!1,m=[],n=[],o=f.Deferred(),p=[function(){return o.promise()}()],q=0,r=!1,s=f.Deferred(),t=f.Deferred(),u=function(){m=[],k=[],n=[],o=f.Deferred(),p=[function(){return o.promise()}()],q=0},v=function(a){a.resolve(),q++,q+1===p.length&&o.resolve()},w=function(a,b){b=f.extend({width:800,height:400,scrollbars:1,menubar:0,toolbar:0,location:0,status:0,resizable:1},b),b.left=b.left||screen.width/2-b.width/2,b.top=b.top||screen.height/2-b.height/1.5,j.isWindowsPhone?window.location(a):window.open(a,"bamshare",f.param(b).replace(/&/g,","))},x=function(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("msie")?parseInt(a.split("msie")[1]):!1},y=function(a,b){var c=a.attr("data-omniture");return c?!1:void a.attr("data-omniture",JSON.stringify(b))},z=function(a,b){if("string"==typeof a&&b){var c;return"string"!=typeof extra&&(b=f.param(b)),a.indexOf("%3A")>-1?(c=a.indexOf("%3F")>-1?"%26":"%3F",b=encodeURIComponent(b)):c=a.indexOf("?")>-1?"&":"?",a+c+b}},A=(f(document),function(a){this.cfg=f.extend({container:"",url:document.location.href,title:document.title,tracking:void 0,showCounters:!1,sequenceloading:!0,manuallyloading:!1,shorty:!1,disableCount:!1},a)});A.prototype={_services:{email:{cfg:function(){return{tracking:{},type:void 0,params:i.parseQueryParameters(),shorty:!1,email_params:{news:["content_id","vkey"],media:["content_id","metaId","title","blurb"],photos:["content_id","metaId","title","c_id"],"social/hitpix":["photoid","c_id","blast","title"],"photos/player":["player_id","title"]}}}(),getUrl:function(a){var b,c="",d={};if(this instanceof A&&a.type&&a.type in a.email_params){c="/"+a.type+"/email/send.jsp?",b=a.email_params[a.type];for(var e=0,g=b.length;g>e;e++){var h;switch(b[e]){case"metaId":h=a.params.content_id;break;case"title":h=this.cfg.title;break;case"blurb":h=this.cfg.blurb;break;default:h=a.params[b[e]]}d[b[e]]=h}}return c+f.param(d)||!1},dfd:f.Deferred(),pop_cfg:{height:470,width:500,status:1}},facebook:{cfg:{tracking:{tcid:"fb_share"},layout:"button_count",action:"recommend",showface:!1,type:"share",popWidth:980,popHeight:300,isFBML:!1,shorty:!0,ref:"fb_share",countPosition:"outside",title:void 0,disableCount:!1,showCounters:!1},dfd:f.Deferred(),getUrl:function(a){var b=j.isDesktop?"http://www.facebook.com":"http://m.facebook.com",c=a.title?a.title:this.cfg.title;return this instanceof A&&"share"===a.type?b+"/sharer.php?u="+encodeURIComponent(this._getUrlWithTracking(a))+"&t="+encodeURIComponent(c):"#"},pop_cfg:{height:450,width:980,scrollbars:0},callafter:{share:function(a){var b=a.svc_cfg.countPosition&&"inside"===a.svc_cfg.countPosition?f(a.target):f(a.target).parent();b.append("<span class='share_count'><div>"+(a.count&&a.count>0?a.count:0)+"</div></span>")},like:function(a){p.push(function(){return a.parent._services.twitter.dfd.promise()}());var b=a.svc_cfg,c=b.layout,e=(b.action,b.width?b.width:"standard"!==c?"box_count"===c?55:150:450);height="button_count"!==c?90:20,f.extend(a,{width:e,height:height}),k.push(a),a.parent.cfg.sequenceloading!==!1?f(function(){for(d=0;d<k.length;d++)h.iframes.like(k[d]);b.isFBML||-1!==f.inArray("iframe.fb-like",n)||n.push("iframe.fb-like"),v(a.parent._services.facebook.dfd)}):h.iframes.like(a)}},getCount:{share:function(a,b,c){if(!b.disableCount){var d=this._getUrlWithTracking(b),e=this;f.ajax({dataType:"jsonp",url:"https://graph.facebook.com/",data:{id:b.ourl},jsonp:"callback",timeout:3e3,success:function(f){a({target:c,svc_cfg:b,url:d,count:f.shares,parent:e})}})}},like:function(a,b,c){var d=this._getUrlWithTracking(b);a({target:c,svc_cfg:b,url:d,parent:this})}}},google:{cfg:{tracking:{tcid:"gp_share"},type:"plusone",annotation:"bubble",size:"medium",width:"80px",shorty:!1,omniture:"",disableCount:!1,showCounters:!1,callback:function(){}},dfd:f.Deferred(),callafter:{share:function(a){var b=a.svc_cfg.countPosition&&"inside"===a.svc_cfg.countPosition?f(a.target):f(a.target).parent();b.append("<span class='share_count'><div>"+(a.count&&a.count>0?a.count:0)+"</div></span>")},plusone:function(a){var b=f(a.target),c=1e5,d=1,e=Math.floor(Math.random()*(c-d+1))+d;b.html('<div class="g-plusone-paused" id="gp-btn-'+e+"\" data-omniture='"+JSON.stringify(a.svc_cfg.omniture)+"' data-width=\""+a.svc_cfg.width+'" data-size="'+a.svc_cfg.size+'" data-annotation="'+a.svc_cfg.annotation+'" data-href="'+a.parent._getUrlWithTracking(a.svc_cfg)+'"></div>'),a.parent.cfg.sequenceloading||"undefined"==typeof gapi||E(f("#gp-btn-"+e)),r||(r=!0,f.ajax({url:"https://apis.google.com/js/plusone.js",dataType:"script",type:"GET",data:{parsetags:"explicit"},success:function(){t.resolve(),a.parent.sequenceloading||"undefined"==typeof gapi||f(".g-plusone-paused").each(function(){var a=f(this),b=a.parent();0===b.find("iframe").length&&E(a)})}}))}},getUrl:function(a){var b="https://plus.google.com";return this instanceof A&&"share"===a.type?b+"/share?url="+encodeURIComponent(this._getUrlWithTracking(a)):"#"},pop_cfg:{height:300,width:700,scrollbars:0},getCount:{share:function(a,b,c){var d=x()&&x()<10?!1:!0;if(d&&!b.disableCount){var e=this,g={params:{nolog:!0,id:this._getUrlWithTracking(b),source:"widget",userId:"@viewer",groupId:"@self"},jsonrpc:"2.0",key:"p",apiVersion:"v1",method:"pos.plusones.get",id:"p"};f.ajax({url:"https://clients6.google.com/rpc",type:"POST",data:JSON.stringify(g),dataType:"json",contentType:"application/json; charset=utf-8",success:function(d){a({target:c,svc_cfg:b,count:d.result.metadata.globalCounts.count,parent:e})},error:function(a){console.log(a)}})}},plusone:function(a,b,c){var d=(this._getUrlWithTracking(b),this);a({target:c,svc_cfg:b,parent:d})}}},pinterest:{cfg:{tracking:{tcid:"pt_share"},type:"default",shorty:!1,layout:"horizontal",loadapi:!1,title:void 0},callafter:{"default":function(a){var b=f(a.target),c=a.svc_cfg.title?a.svc_cfg.title:a.parent.cfg.title;if(b.html('<a href="http://pinterest.com/pin/create/button/?url='+encodeURIComponent(a.parent.cfg.url)+"&media="+encodeURIComponent(a.svc_cfg.image)+"&description="+encodeURIComponent(c)+'" class="pin-it-button" count-layout="'+a.svc_cfg.layout+'"></a>'),!l||a.svc_cfg.loadapi){if(l=!0,"undefined"!=typeof build_pinterest_button)return build_pinterest_button(b[0]),!1;!function(a){var b=a.getElementsByTagName("SCRIPT")[0],c=a.createElement("SCRIPT");c.type="text/javascript",c.async=!0,c["data-pin-build"]="build_pinterest_button",c.src="//assets.pinterest.com/js/pinit.js",b.parentNode.insertBefore(c,b)}(document)}}},getUrl:function(a){},pop_cfg:{height:300,width:700,scrollbars:0},getCount:{"default":function(a,b,c){var d=this;d.cfg.url=d._getUrlWithTracking(b),a({target:c,svc_cfg:b,parent:d})}}},twitter:{cfg:{tracking:{tcid:"tw_share"},text:void 0,via:void 0,shorty:!0,hashtags:void 0,type:"default",related:void 0,tweetTracking:void 0,counturl:void 0,showCounters:!1,countPosition:"outside",title:void 0,disableCount:!1},dfd:f.Deferred(),callafter:{"default":function(a){var b=a.scfg.countPosition&&"inside"===a.scfg.countPosition?f(a.target):f(a.target).parent();b.append("<span class='share_count'><div>"+(a.count&&a.count>0?a.count:0)+"</div></span>")},follow:function(a){m.push(a),p.push(function(){return a.parent._services.twitter.dfd.promise()}());var b=a.svc_cfg.via.split("").length>5?"125px":"100px";a.svc_cfg.width&&(b=a.svc_cfg.width),f(function(){for(e=0;e<m.length;e++)f(a.target).html('<iframe class="tweet-follow" allowtransparency="true" frameborder="0" scrolling="no" data-url="http://platform.twitter.com/widgets/follow_button.html?screen_name='+a.svc_cfg.via+"&show_count="+a.svc_cfg.showCounters+'"  style="width:'+b+'; height:20px;"></iframe>');-1===f.inArray("iframe.tweet-follow",n)&&n.push("iframe.tweet-follow"),v(a.parent._services.twitter.dfd)})}},getUrl:function(a){var b=a.tracking?this._getUrlWithTracking(a):a.ourl,c=(a.tracking?a.urltracking:a.counturl,this);a.title?a.title:c.cfg.title;return"/site-core/bower_components/twitter-redirector/twitter-redirect.html?url="+encodeURIComponent(b)+"&text="+encodeURIComponent(a.text||this.cfg.title)+(a.via?"&via="+a.via:"")+(a.related&&a.related.split(":")[0]!==a.via?"&related="+a.related:""+(a.hashtags?"&hashtags="+a.hashtags:""))},pop_cfg:{height:300,width:700,scrollbars:0},getCount:{"default":function(a,b,c){if(!b.disableCount){var d=this;f.ajax({dataType:"jsonp",url:window.location.protocol+"//cdn.api.twitter.com/1/urls/count.json",data:{url:b.tracking?b.urltracking:b.counturl,mode:"preview"},success:function(e){a({count:e.count,target:c,parent:d,scfg:b})}})}},follow:function(a,b,c){var d=(this._getUrlWithTracking(b),this);a({target:c,svc_cfg:b,parent:d})}}},reddit:{cfg:{tracking:{tcid:"reddit_share"},shorty:!1,type:"default",title:void 0},callafter:{"default":function(a){f("<span class='share_count'><div /></span>").find("div").text(a.count).end().insertAfter(a.target)}},getUrl:function(a){return this instanceof A&&"http://www.reddit.com/submit?url="+encodeURIComponent(this._getUrlWithTracking(a))},pop_cfg:{height:300,width:700,scrollbars:0},getCount:{"default":function(a,b,c){var d=this;f.ajax({url:"/delegator/http://www.reddit.com/api/info.json",data:{url:d._getUrlWithTracking(b)},timeout:3e3,dataType:"json",success:function(b){a({count:b.data.children.length>0?b.data.children[0].data.score:0,target:c,parent:d})}})}}},digg:{cfg:{tracking:{tcid:"dg_share"},shorty:!1,title:void 0},dfd:f.Deferred(),getUrl:function(a){var b=a.title?a.title:this.cfg.title;return this instanceof A&&"http://digg.com/submit?url="+encodeURIComponent(this._getUrlWithTracking(a))+"&bodytext="+encodeURIComponent(b)},pop_cfg:{height:300,width:700,scrollbars:0},getCount:function(a,b){f.ajax({dataType:"jsonp",url:"http://widgets.digg.com/buttons/count",data:{url:this._getUrlWithTracking(b)},jsonp:"cb",timeout:3e3,success:function(b){a(b.diggs)}})}}},_getUrlWithTracking:function(a){return a.tracking?z(this.cfg.url,f.extend(a.tracking,this.cfg.tracking)):this.cfg.url},bind:function(a,b,c){f(b).hasClass("added")?u():f(b).addClass("added"),c=f.extend(!0,{},this._services[a].cfg,c);var d=this,e=f(b,this.cfg.container),g="undefined"!=typeof c.showCounters?c.showCounters:this.cfg.showCounters,h=f.extend(!0,{},this._services[a].pop_cfg,c.pop_cfg),i=function(){},j=function(){},k=f.extend(!0,{},d),l=f.extend(!0,{},c);c.ourl=d._getUrlWithTracking(k.cfg),c.urltracking=d._getUrlWithTracking(c);var m=this._services[a].getUrl.call(this,c);return c.twbaseurl=m,"twitter"===a&&c.tweetTracking&&y(e,c.tweetTracking),"undefined"!=typeof this._services[a].callafter&&(i="function"==typeof this._services[a].callafter?this._services[a].callafter:this._services[a].callafter[c.type]),"undefined"!=typeof this._services[a].getCount&&(j="function"==typeof this._services[a].getCount?this._services[a].getCount:this._services[a].getCount[c.type]),g&&j&&(this.cfg.manuallyloading?j.call(d,i,c,e):f(document).ready(function(){j.call(d,i,c,e)})),e.on("click",function(b){return b.preventDefault(),d.cfg.url=k.cfg.url,c.tracking=l.tracking,m=d._services[a].getUrl.call(d,c),c.omniture&&"undefined"!=typeof bam&&bam.tracking&&bam.tracking.track?bam.tracking.track(c.omniture):c.omniture&&"function"==typeof fireTracking?c.omniture.pagename&&c.omniture.sectionid&&fireTracking(c.omniture.pagename,c.omniture.sectionid):c.omniture&&"undefined"!=typeof Curveball&&"undefined"!=typeof Curveball.MobileTracking&&"undefined"!=typeof Curveball.MobileTracking.fireAsync&&"function"==typeof Curveball.MobileTracking.fireAsync&&Curveball.MobileTracking.fireAsync(c.omniture),"pinterest"!==a?(w(d._services[a].getUrl.call(d,c),h),!1):void 0}),this}};var B;for(B in A.prototype._services)A.prototype[B]=function(a){return function(b,c){return this.bind(a,b,c)}}(B);var C=function(a){var b="object"!=typeof a?f.parseJSON(a):a;"undefined"!==bam&&bam.tracking&&bam.tracking.track?bam.tracking.track(b):b&&"function"==typeof fireTracking&&b.pagename&&b.sectionid&&fireTracking(b.pagename,b.sectionid)},D=function(a,b){b=b||0;var c=a.eq(b),d=a.length,e=c.attr("data-url");d>b?(f(c).one("load",function(){D(a,++b)}),f(c).attr("src",e)):s.resolve()},E=function(a){gapi.plusone.render(a.attr("id"),{size:a.attr("data-size"),annotation:a.attr("data-annotation"),width:a.attr("data-width"),href:a.attr("data-href"),callback:function(){a.attr("data-omniture")&&C(a.attr("data-omniture"))}})},F=function(a,b){b=b||0;var c=a.eq(b),d=a.length;d>b&&(c.attr("id","g-plusone-"+b).removeClass("g-plusone-paused"),E(c),b++,F(a,b))},G={feeds:function(a,b){b=f.extend({url:document.location.href,headline:document.title,caption:void 0,desc:f("meta[name='description']").attr("content")||"",img:void 0,usr_msg:void 0,force_display:"dialog",track_pfx:(window.omPageName||"Facebook UI")+": ",success:void 0,error:void 0},b),f(a).unbind().bind("click",function(){f("html, body").animate({scrollTop:0},"slow"),b.track_pfx&&"undefined"!=typeof bam&&bam.tracking&&bam.tracking.track&&bam.tracking.track({genericExternalLinkTracker:{tracked:b.track_pfx+"Initial Click"}}),b.track_pfx&&"function"==typeof fireTracking&&fireTracking(b.track_pfx.pagename,b.track_pfx.sectionid),b.track_pfx&&"undefined"!=typeof Curveball&&"function"==typeof Curveball.MobileTracking.fireAsync&&Curveball.MobileTracking.fireAsync(b.track_pfx),FB.ui({method:"feed",name:b.headline,link:b.url,picture:b.img,caption:b.caption,description:b.desc},function(a){a&&a.post_id?(b.track_pfx&&bam.tracking&&bam.tracking.track&&bam.tracking.track({genericExternalLinkTracker:{tracked:b.track_pfx+"Success Click"}}),"function"==typeof b.success&&b.success()):(b.track_pfx&&bam.tracking&&bam.tracking.track&&bam.tracking.track({genericExternalLinkTracker:{tracked:b.track_pfx+"Cancel Click"}}),"function"==typeof b.error&&b.error())})})},publish:function(a,b){return b=f.extend({url:document.location.href,headline:document.title,caption:void 0,desc:f("meta[name='description']").attr("content")||"",img:void 0,usr_msg:void 0,force_display:"dialog",track_pfx:(window.omPageName||"Facebook UI")+": ",success:void 0,error:void 0},b),f(a).unbind().bind("click",function(){return f("html, body").animate({scrollTop:0},"slow"),b.track_pfx&&"undefined"!=typeof bam&&bam.tracking&&bam.tracking.track&&bam.tracking.track({genericExternalLinkTracker:{tracked:b.track_pfx+"Initial Click"}}),b.track_pfx&&"function"==typeof fireTracking&&fireTracking(b.track_pfx.pagename,b.track_pfx.sectionid),b.track_pfx&&"undefined"!=typeof Curveball&&"function"==typeof Curveball.MobileTracking.fireAsync&&Curveball.MobileTracking.fireAsync(b.track_pfx),window.FB.ui({method:"stream.publish",display:b.force_display,message:b.usr_msg,attachment:{name:b.headline,caption:b.caption,description:b.desc,href:b.url,media:b.img&&[{type:"image",href:b.url,src:b.img}]}},function(a){a&&a.post_id?(b.track_pfx&&bam.tracking&&bam.tracking.track&&bam.tracking.track({genericExternalLinkTracker:{tracked:b.track_pfx+"Success Click"}}),"function"==typeof b.success&&b.success()):(b.track_pfx&&bam.tracking&&bam.tracking.track&&bam.tracking.track({genericExternalLinkTracker:{tracked:b.track_pfx+"Cancel Click"}}),"function"==typeof b.error&&b.error())}),!1}),this}};g(G),f.when(h.init()).done(function(a){h.event.subscribe("edge.create",function(){h.trigger("FBLike")})}),f.when.apply(null,p).then(function(){f.when(s,t).done(function(){F(f(".g-plusone-paused"))}),n.length>0?D(f(n.join())):s.resolve()}),b.Lib=A,b.FB=G,b.framesLoader=D,b.renderGooglePlusOne=F,b.doOminitureTracking=C}),define("vpm-media-app/views/pattern/share/share",["require","exports","module","social/social","lodash/lodash"],function(a,b,c){function d(a){var b=$(a),c=b.attr("data-link"),d=b.attr("data-headline"),g=(b.attr("data-blurb"),b.attr("data-embed")),h=b.attr("data-cid"),i=b.attr("data-print"),j=b.find(".p-share__link--embed"),k=b.find(".p-share__link--link"),l=b.find(".p-share__link--print"),m=b.find(".p-share__link--email"),n=b.find(".p-share__link--facebook"),o=b.find(".p-share__link--reddit"),p=b.find(".p-share__link--twitter"),q=b.attr("data-twitter-handle"),r=b.find(".p-share__close"),s=b.find(".p-share__copy"),t=b.attr("data-tracking-prefix"),u=new e.Lib({title:d,url:c,disableOnclick:!0,showCounters:!1,shorty:!1,sequenceloading:!1});k&&k.on("click",function(){s.parent().css("display","block"),s.val(c),s.select()}),j&&j.on("click",function(){s.parent().css("display","block"),s.val(f.unescape(g)),s.select()}),l&&l.on("click",function(){window.open(i)}),m&&m.on("click",function(){var a="mailto:?subject="+d+"&body="+d+"%0D%0A%0D%0A"+c;window.location=a}),p&&u.twitter(p,{via:q,tracking:{tcid:"tw_"+t+"_"+h}}),n&&u.facebook(n,{type:"share",tracking:{tcid:"fb_"+t+"_"+h}}),o&&u.reddit(o,{type:"share",tracking:{tcid:"reddit_"+t+"_"+h}}),r.on("click",function(){r.parent().css("display","none")})}var e=a("social/social"),f=a("lodash/lodash");return d}),define("media-app/views/mediaPlayer",["handlebars/handlebars","media-app-core/models/applicationState","media-app-core/views/mediaPlayer","vpm-media-app/views/a__d__central","media-app/templates/applicationTemplates","flashblock-detector/flashblock-detector","vpm-media-app/utils/tagExtractor","pageMeta/pageMeta","bam-embed-utils/index","vpm-media-app/views/pattern/share/share","mlb-video-launcher/index","media-app/models/metaData"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=c.extend({initialize:function(){c.prototype.initialize.call(this),this.ads=new d},initListeners:function(){var a=this.ApplicationEvents,b=this.VPMEvents,d=this.PlayerEvents;c.prototype.initListeners.call(this),this.dispatcher.on.call(this,a.ENTER_MINI_MODE,this.onEnterMiniMode),this.dispatcher.on.call(this,a.EXIT_MINI_MODE,this.onExitMiniMode),this.dispatcher.on.call(this,b.META_DATA_LOADED,this.onMetadataLoaded),this.dispatcher.on.call(this,d.PLAYER_LOADED,this.onPlayerLoaded),this.dispatcher.on.call(this,d.MEDIA_COMPLETE,this.onMediaComplete)},onMetadataLoaded:function(a){var b=new k({root:window.server_path.server}),c=window.dataBootstrap,d={topic_id:c.id,topic_slug:c.slug,content_id:a.content_id,content_slug:a.slug},f=b.getVPPLink(d);a.social={contentId:a.content_id,className:"custom-class-name",headline:a.headline,blurb:a.blurb,url:f,embed:"&lt;iframe src='"+f.replace("/video","/video/share")+"' width='540' height='360'&gt;&lt;/iframe&gt;",twitterHandle:$("#video-section__wrapper").data("global-twitter-handle"),trackingPrefix:"video",networks:[{platform:"facebook","alt-text":"Facebook Share",icon:"facebook"},{platform:"twitter","alt-text":"Twitter Share",
icon:"twitter"},{platform:"email","alt-text":"Email",icon:"email"},{platform:"link","alt-text":"Copy Link",icon:"link"}]};var m=i.isVideoEmbeddable(a,48);m&&a.social.networks.push({platform:"embed","alt-text":"Embed",icon:"embed"});var n=window.i18n_dictionary||{};a.tagsLabel=n.tags?n.tags:"Tags";var o=g.getTag(a.keywords);o&&(a.tag=o),a.keywordTags=g.getKeywordTags(a.keywordsDisplay,h["context-url-prefix"]),a.appView=h["app-view"]||"web",a.device="desktop"===window.getStartupDeviceTypeString()?"desktop":"mobile",l.set({metadata:a}),$("#metadata-container").html(e.metaDataTemplate(a));for(var p=document.querySelectorAll(".p-share"),q=0;q<p.length;q++)j(p[q])},onFlashRequired:function(a){var b=a.app.isFlashRequiredForDesktop||!1,c="desktop"===window.getStartupDeviceTypeString();b&&c&&this.dispatcher.publish(this.ApplicationEvents.FLASH_REQUIRED,{})},onPlayerLoaded:function(){var a=this;if(c.prototype.onPlayerLoaded.call(this),a.videoPlaybackManager){var b=a.videoPlaybackManager.mediaPlayer.videoPlayer;console.log("mediaPlayer videoPlayer instance: ",b),b.isFlash?f.init(b.id,{browser:"desktop",showAlert:!1},function(b){"blocked"===b&&a.dispatcher.publish(a.ApplicationEvents.FLASHBLOCK_DETECTED,{})}):this.onFlashRequired(mediaConfig)}else this.onFlashRequired(mediaConfig);this.dispatcher.publish(this.ApplicationEvents.SETUP_MINI_MODE),this.renderCompanionTokens()},setStaticPathForCompanions:function(){var a=window.server_path.uistatic_video?window.server_path.uistatic_video:window.server_path.uistatic;a+="/video/companions/",window.dataBootstrap&&window.dataBootstrap.pageConfig?window.dataBootstrap.pageConfig.companionPath=a:console.warn("error setting static path for companions, check pathhelper")},renderCompanionTokens:function(){var b=$(".custom-companion-template");this.setStaticPathForCompanions(),$.each(b,function(b,c){var d=$(c);if(d.length){var e=d.data("script"),f=d.data("style"),g=d.html(),h=a.compile(g);$("#bottom #companion-wrapper").append(h({cmsData:window.dataBootstrap})).show();var i=$("head");e&&i.append("<script type='text/javascript' src='"+encodeURI(e)+"'>"),f&&i.append("<link type='text/css' rel='stylesheet' href='"+encodeURI(f)+"'>")}})},onNotAuthorized:function(){},onBlackout:function(a,b,c){var d=this.eventManager.getDispatcher();d.publish(this.ApplicationEvents.SHOW_MESSAGE,{key:"media.blackout",container:c.container})},onEnterMiniMode:function(){},onExitMiniMode:function(){},onMediaComplete:function(){var a=this,b=a.videoPlaybackManager.mediaPlayer.videoPlayer;b&&b.isFullScreen&&b.exitFullScreen&&b.exitFullScreen()}});return m}),define("media-app/control/router",["backbone","media-app-core/models/applicationState","media-app/views/mediaPlayer"],function(a,b,c){var d=a.Router.extend({routes:{"*path":"default"},mediaConfig:null,initialize:function(){this.mediaConfig=b.get("mediaConfig"),this.initListeners()},initListeners:function(){},"default":function(){var a=b.get("view");a||(a=new c({el:this.mediaConfig.get("videocore.property_state.container")}),b.set("view",a))}});return d}),define("media-app/models/mediaRequest",["backbone"],function(a){var b=a.Model.extend({defaults:{content_id:void 0,calendar_event_id:void 0,startTimeOffset:void 0,type:"video"},checkForOverrides:function(){},mediaRequestNotice:function(){console.log("Media Request Updated",this.attributes)},initialize:function(){this.bind("change",this.mediaRequestNotice)}});return b}),define("media-app-core/models/mediaItem",["backbone"],function(a){var b=a.Model.extend({defaults:{id:null,mediaLocation:null,metadata:null}});return b}),define("media-app/utils/messageCenter",["media-app-core/messages/messageManager"],function(a){function b(a){var b=$("#message-center");b.html(a)}function c(){var a=$("#message-center");a.show()}function d(){var a=$("#message-center");a.hide()}return{showMessage:b,show:c,hide:d}}),define("media-app/views/videoPreview",["jquery","backbone","bluebird/js/browser/bluebird","media-app-core/models/applicationState","media-app/templates/applicationTemplates","media-app/utils/messageCenter","media-app/models/metaData"],function(a,b,c,d,e,f,g){var h=b.View.extend({tagname:"div",id:"video-preview",eventManager:null,initialize:function(){this.eventManager=d.get("eventManager"),this.render(),this.placeInMessageCenter()},render:function(){var a=this;return a.$el.html(e.videoPreviewTemplate(g.get("metadata"))),c.resolve(this)},addListener:function(a,b){this.$el.find("#video-preview-mask").on(a,b)},placeInMessageCenter:function(){f.showMessage(this.$el)}});return h}),function(a){"use strict";"function"==typeof define&&define.amd?define("jquery.countdown/dist/jquery.countdown",["jquery"],a):a(jQuery)}(function(a){"use strict";function b(a){if(a instanceof Date)return a;if(String(a).match(g))return String(a).match(/^[0-9]*$/)&&(a=Number(a)),String(a).match(/\-/)&&(a=String(a).replace(/\-/g,"/")),new Date(a);throw new Error("Couldn't cast `"+a+"` to a date object.")}function c(a){var b=a.toString().replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");return new RegExp(b)}function d(a){return function(b){var d=b.match(/%(-|!)?[A-Z]{1}(:[^;]+;)?/gi);if(d)for(var f=0,g=d.length;g>f;++f){var h=d[f].match(/%(-|!)?([a-zA-Z]{1})(:[^;]+;)?/),j=c(h[0]),k=h[1]||"",l=h[3]||"",m=null;h=h[2],i.hasOwnProperty(h)&&(m=i[h],m=Number(a[m])),null!==m&&("!"===k&&(m=e(l,m)),""===k&&10>m&&(m="0"+m.toString()),b=b.replace(j,m.toString()))}return b=b.replace(/%%/,"%")}}function e(a,b){var c="s",d="";return a&&(a=a.replace(/(:|;|\s)/gi,"").split(/\,/),1===a.length?c=a[0]:(d=a[0],c=a[1])),1===Math.abs(b)?d:c}var f=[],g=[],h={precision:100,elapse:!1};g.push(/^[0-9]*$/.source),g.push(/([0-9]{1,2}\/){2}[0-9]{4}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),g.push(/[0-9]{4}([\/\-][0-9]{1,2}){2}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),g=new RegExp(g.join("|"));var i={Y:"years",m:"months",n:"daysToMonth",w:"weeks",d:"daysToWeek",D:"totalDays",H:"hours",M:"minutes",S:"seconds"},j=function(b,c,d){this.el=b,this.$el=a(b),this.interval=null,this.offset={},this.options=a.extend({},h),this.instanceNumber=f.length,f.push(this),this.$el.data("countdown-instance",this.instanceNumber),d&&("function"==typeof d?(this.$el.on("update.countdown",d),this.$el.on("stoped.countdown",d),this.$el.on("finish.countdown",d)):this.options=a.extend({},h,d)),this.setFinalDate(c),this.start()};a.extend(j.prototype,{start:function(){null!==this.interval&&clearInterval(this.interval);var a=this;this.update(),this.interval=setInterval(function(){a.update.call(a)},this.options.precision)},stop:function(){clearInterval(this.interval),this.interval=null,this.dispatchEvent("stoped")},toggle:function(){this.interval?this.stop():this.start()},pause:function(){this.stop()},resume:function(){this.start()},remove:function(){this.stop.call(this),f[this.instanceNumber]=null,delete this.$el.data().countdownInstance},setFinalDate:function(a){this.finalDate=b(a)},update:function(){if(0===this.$el.closest("html").length)return void this.remove();var b,c=void 0!==a._data(this.el,"events"),d=new Date;b=this.finalDate.getTime()-d.getTime(),b=Math.ceil(b/1e3),b=!this.options.elapse&&0>b?0:Math.abs(b),this.totalSecsLeft!==b&&c&&(this.totalSecsLeft=b,this.elapsed=d>=this.finalDate,this.offset={seconds:this.totalSecsLeft%60,minutes:Math.floor(this.totalSecsLeft/60)%60,hours:Math.floor(this.totalSecsLeft/60/60)%24,days:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToWeek:Math.floor(this.totalSecsLeft/60/60/24)%7,daysToMonth:Math.floor(this.totalSecsLeft/60/60/24%30.4368),totalDays:Math.floor(this.totalSecsLeft/60/60/24),weeks:Math.floor(this.totalSecsLeft/60/60/24/7),months:Math.floor(this.totalSecsLeft/60/60/24/30.4368),years:Math.abs(this.finalDate.getFullYear()-d.getFullYear())},this.options.elapse||0!==this.totalSecsLeft?this.dispatchEvent("update"):(this.stop(),this.dispatchEvent("finish")))},dispatchEvent:function(b){var c=a.Event(b+".countdown");c.finalDate=this.finalDate,c.elapsed=this.elapsed,c.offset=a.extend({},this.offset),c.strftime=d(this.offset),this.$el.trigger(c)}}),a.fn.countdown=function(){var b=Array.prototype.slice.call(arguments,0);return this.each(function(){var c=a(this).data("countdown-instance");if(void 0!==c){var d=f[c],e=b[0];j.prototype.hasOwnProperty(e)?d[e].apply(d,b.slice(1)):null===String(e).match(/^[$A-Z_][0-9A-Z_$]*$/i)?(d.setFinalDate.call(d,e),d.start()):a.error("Method %s does not exist on jQuery.countdown".replace(/\%s/gi,e))}else new j(this,b[0],b[1])})}}),define("media-app/views/leave-behind/list",["jquery","backbone","bluebird/js/browser/bluebird","media-app-core/models/applicationState","media-app/templates/applicationTemplates","jquery.countdown/dist/jquery.countdown","media-app/utils/messageCenter","lodash/lodash","media-app/models/metaData"],function(a,b,c,d,e,f,g,h,i){var j=b.View.extend({tagname:"div",id:"lb-list",nextVideo:-1,events:{"click .replay-video":"playVideoFromLeaveBehind"},thumbWidth:215,eventManager:null,initialize:function(){this.eventManager=d.get("eventManager"),this.mediaConfig=d.get("mediaConfig"),this.tidyView(),this.render(),this.placeInMessageCenter(),this.playVideoAfterCountdown(),this.eventManager=d.get("eventManager"),this.dispatcher=this.eventManager.getDispatcher(),this.ApplicationEvents=this.eventManager.Events.Application},formatPlaylistItems:function(){var a=this,b=this.attributes.list,c=[];return b.forEach(function(b,d,e){var f=null;e[d].image&&(f=e[d].image.cuts.filter(function(b){return b.width===a.thumbWidth}));var g=h.cloneDeep(e[d]);g.image=f?f[0]:null,c.push(g)}),c},render:function(){var a=this,b=this.formatPlaylistItems(),d={videoMeta:i.get("metadata"),list:b,viewData:{nextVideo:a.nextVideo,countdown:a.mediaConfig.get("embed.playNextVideoInterval",5),thumbnailNotFound:a.mediaConfig.get("embed.not_found_img")}};return this.$el.html(e.leavebehindListHtml(d)),c.resolve(this)},show:function(){var a=this;a.$el.addClass("show-lb-list"),a.tidyView(),a.render(),g.show(),a.playVideoAfterCountdown()},hide:function(){var a=this;a.$el.removeClass("show-lb-list"),g.hide()},updateNextVideo:function(){var a=this.attributes.list.findIndex(function(a){return!a.played});this.nextVideo=0>a?0:a},tidyView:function(){var a=i.get("metadata").content_id,b=this.attributes.list;b.forEach(function(b,c,d){d[c].id===a&&(d[c].played=!0)}),this.updateNextVideo(),this.attributes.list=0===this.nextVideo?b.map(function(a){return Object.assign({},a,{played:!1})}):b},getVideoToPlay:function(){return this.attributes.list[this.nextVideo]},scrollToNextItem:function(){var b=this.getVideoToPlay(),c=a(".leave-behind-list__topic-item[data-id="+b.id+"]").outerHeight()*this.nextVideo;a(".leave-behind-list--responsive").scrollTop(c)},onCountDownFinish:function(){var a=this,b=a.getVideoToPlay(),c={content_id:b.id,type:b.type};console.log("VPM Media App ::: LBList ::: onCountDownFinish, requesting video -->",c),a.hide(),a.dispatcher.publish(a.ApplicationEvents.REQUEST_MEDIA,c)},playVideoAfterCountdown:function(){var b=this;console.log("VPM Media App ::: LBList ::: playvideoafter countdown"),b.scrollToNextItem();var c=this.mediaConfig.get("embed.playNextVideoInterval",5),d=new Date;d.setSeconds(d.getSeconds()+c),a(".countdown > .timer").countdown(d,function(b){a(".timer",".countdown").text(b.strftime("%S"))}).on("finish.countdown",b.onCountDownFinish.bind(b))},stopCountDown:function(){a(".countdown > .timer").countdown("stop")},playVideoFromLeaveBehind:function(b){var c=this;c.stopCountDown();var d=a(b.currentTarget),e=d.data("id").toString(),f={content_id:e||"1241365283",type:"video"};c.hide(),console.log("VPM Media App ::: LBList ::: playVideoFromLeaveBehind ::: requesting video -->",f),c.dispatcher.publish(c.ApplicationEvents.REQUEST_MEDIA,f)},placeInMessageCenter:function(){g.showMessage(this.$el)}});return j}),define("media-app/views/leave-behind/replay",["jquery","backbone","bluebird/js/browser/bluebird","media-app-core/models/applicationState","media-app/templates/applicationTemplates","media-app/utils/messageCenter","media-app/models/metaData"],function(a,b,c,d,e,f,g){var h=b.View.extend({tagname:"div",id:"lb-replay",visibilityClass:"show-lb-replay",eventManager:null,events:{"click .replay-video":"replayVideo"},initialize:function(){this.eventManager=d.get("eventManager"),this.visibilityClass="show-lb-replay",this.render(),this.placeInMessageCenter(),this.dispatcher=this.eventManager.getDispatcher(),this.ApplicationEvents=this.eventManager.Events.Application},render:function(){var a=this,b={videoMeta:g.get("metadata")};return a.$el.html(e.leavebehindReplayHtml(b)),c.resolve(this)},show:function(){var a=this;a.$el.addClass(a.visibilityClass),f.show()},hide:function(){var a=this;a.$el.removeClass(a.visibilityClass),f.hide()},replayVideo:function(b){var c=this,d=a(b.currentTarget),e=d.data("id").toString(),f={content_id:e||"1241365283",type:"video"};c.hide(),console.log("VPM Media App ::: LBReplay ::: replayVideo ::: requesting video -->",f),c.dispatcher.publish(c.ApplicationEvents.REQUEST_MEDIA,f)},placeInMessageCenter:function(){f.showMessage(this.$el)}});return h}),define("text!vpm-media-app/tracking/tracking-video.json",[],function(){return'{\n  "defaults": {\n    "progress": {\n      "eVar13": "@MEDIA_PLAYER_CONTEXT@",\n      "prop25": "@MEDIA_STREAM_ID@",\n      "eVar28": "@MEDIA_STREAM_ID@",\n      "prop26": "@MEDIA_PLAYER_VERSION@",\n      "prop27": "@MEDIA_PLAYER_CONTEXT@",\n      "prop28": "4.0",\n      "prop29": "Progressive Download",\n      "prop30": "@MEDIA_STREAM_TITLE@",\n      "prop32": "@MEDIA_INDEX_NAME@",\n      "prop33": "@GAMEDAY_GAME_ID@",\n      "prop34": "@GAMEDAY_GAME_PK@",\n      "prop35": "@CURRENT_TIME_STAMP@",\n      "prop43": "@MEDIA_TOPIC_NAME@",\n      "prop49": "@MEDIA_EMBED_HOST@",\n      "eVar49": "@MEDIA_EMBED_HOST@",\n      "prop54": "@MEDIA_SYSTEM_AUTO_PLAY@"\n    }\n  },\n  "containers": {\n    "#video-player": [\n      {\n        "wire": {\n          "defaults": "progress",\n          "pEventKey": "MEDIA_START"\n        },\n        "events": "event4,event2,event27"\n      },\n      {\n        "wire": {\n          "pEventKey": "MEDIA_COMPLETE"\n        },\n        "events": "event2,event28",\n        "eVar13": "@MEDIA_PLAYER_CONTEXT@",\n        "eVar28": "@MEDIA_STREAM_ID@",\n        "prop49": "@MEDIA_EMBED_HOST@",\n        "eVar49": "@MEDIA_EMBED_HOST@",\n        "prop54": "@MEDIA_SYSTEM_AUTO_PLAY@"\n      },\n      {\n        "wire": {\n          "eventsModel": "AdEvents",\n          "pEventKey": "AD_BLOCK_DETECTED"\n        },\n        "events": "event96",\n        "prop12": "@MEDIA_PLAYER_CONTEXT@",\n        "prop13": "@MEDIA_PLAYER_LOCATION@",\n        "prop14": "@AD_BLOCK_CONTEXT_ERROR@",\n        "prop70": "AdBlock On",\n        "eVar38": "AdBlock On"\n      }\n    ]\n  }\n}\n'}),define("text!vpm-media-app/tracking/tracking-app.json",[],function(){return'{\n  "scope": "body",\n  "defaults": {\n    "base": {\n      "pageName": "@SITE_NAME@: Multimedia: Video Playback Page",\n      "prop18": "@MEDIA_SPONSOR@"\n    }\n  },\n  "app": [\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".js-playlists .carousel-list:nth-child(1) .js-carousel__arrow--left"\n      },\n      "a.action": "Video Playback Page Module: Featured Playlist 1: Left Arrow Click",\n      "prop12": "Video Playback Page Module: Featured Playlist",\n      "prop14": "Video Playback Page Module: Featured Playlist 1: Left Arrow Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".js-playlists .carousel-list:nth-child(1) .js-carousel__arrow--right"\n      },\n      "a.action": "Video Playback Page Module: Featured Playlist 1: Right Arrow Click",\n      "prop12": "Video Playback Page Module: Featured Playlist",\n      "prop14": "Video Playback Page Module: Featured Playlist 1: Right Arrow Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".js-playlists .carousel-list:nth-child(1) .js-carousel__item"\n      },\n      "a.action": "Video Playback Page Module: Featured Playlist 1: Thumbnail @INDEX_0@ Click",\n      "prop12": "Video Playback Page Module: Featured Playlist",\n      "prop14": "Video Playback Page Module: Featured Playlist 1: Thumbnail @INDEX_0@ Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".js-playlists .carousel-list:nth-child(2) .js-carousel__arrow--left"\n      },\n      "a.action": "Video Playback Page Module: Featured Playlist 2: Left Arrow Click",\n      "prop12": "Video Playback Page Module: Featured Playlist",\n      "prop14": "Video Playback Page Module: Featured Playlist 2: Left Arrow Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".js-playlists .carousel-list:nth-child(2) .js-carousel__arrow--right"\n      },\n      "a.action": "Video Playback Page Module: Featured Playlist 2: Right Arrow Click",\n      "prop12": "Video Playback Page Module: Featured Playlist",\n      "prop14": "Video Playback Page Module: Featured Playlist 2: Right Arrow Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".js-playlists .carousel-list:nth-child(2) .js-carousel__item"\n      },\n      "a.action": "Video Playback Page Module: Featured Playlist 2: Thumbnail @INDEX_1@ Click",\n      "prop12": "Video Playback Page Module: Featured Playlist",\n      "prop14": "Video Playback Page Module: Featured Playlist 2: Thumbnail @INDEX_1@ Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".js-playlists .carousel-tiles .js-carousel__arrow--left",\n        "parent": {\n          "s": ".carousel"\n        }\n      },\n      "a.action": "Video Playback Page Topic Carousel @INDEX_1_PARENT@: Left Arrow Click",\n      "prop12": "Video Playback Page Topic Carousel",\n      "prop14": "Video Playback Page Topic Carousel @INDEX_1_PARENT@: Left Arrow Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".js-playlists .carousel-tiles .js-carousel__arrow--right",\n        "parent": {\n          "s": ".carousel"\n        }\n      },\n      "a.action": "Video Playback Page Topic Carousel @INDEX_1_PARENT@: Right Arrow Click",\n      "prop12": "Video Playback Page Topic Carousel",\n      "prop14": "Video Playback Page Topic Carousel @INDEX_1_PARENT@: Right Arrow Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".js-playlists .carousel-tiles .js-carousel__item",\n        "parent": {\n          "s": ".carousel"\n        }\n      },\n      "a.action": "Video Playback Page Topic Carousel @INDEX_1_PARENT@: Panel Click",\n      "prop12": "Video Playback Page Topic Carousel",\n      "prop14": "Video Playback Page Topic Carousel @INDEX_1_PARENT@: Panel Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".js-playlists .carousel-tiles .js-carousel__cover:not(.js-carousel__item)",\n        "parent": {\n          "s": ".carousel"\n        }\n      },\n      "a.action": "Video Playback Page Topic Carousel @INDEX_1_PARENT@: Thumbnail Click",\n      "prop12": "Video Playback Page Topic Carousel",\n      "prop14": "Video Playback Page Topic Carousel @INDEX_1_PARENT@: Thumbnail Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".video-meta__share .video-meta__link"\n      },\n      "a.action": "Video Playback Page Module: Tag Click",\n      "prop12": "Video Playback Page Module",\n      "prop14": "Video Playback Page Module: Tag Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".video-meta__share .social-share"\n      },\n      "a.action": "Video Playback Page Module: Share Click",\n      "prop12": "Video Playback Page Module",\n      "prop14": "Video Playback Page Module: Share Click"\n    },\n    {\n      "wire": {\n        "selector": ".video--logobar__link"\n      },\n      "a.action": "Back to Home Page Click (@TEAM_ABBREV@)"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".section-banner .section-banner__subheading"\n      },\n      "a.action": "Video Playback Header: Browse Click @TEAM_ABBREV@",\n      "prop12": "Video Playback Header",\n      "prop14": "Video Playback Header: Browse Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".section-banner .section-banner__tray-link"\n      },\n      "a.action": "Video Playback Header: Browse Click: Topic Click",\n      "prop12": "Video Playback Header",\n      "prop14": "Video Playback Header: Browse Click: Topic Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".section-banner .section-banner__search-link"\n      },\n      "a.action": "Video Playback Header: Search Click",\n      "prop12": "Video Playback Header",\n      "prop14": "Video Playback Header: Search Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".section-banner .p-share__share-link"\n      },\n      "a.action": "Video Playback Header: Share Click",\n      "prop12": "Video Playback Header",\n      "prop14": "Video Playback Header: Share Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".section-banner .p-share__link--facebook"\n      },\n      "a.action": "Video Playback Header: Share Click: Facebook Click",\n      "prop12": "Video Playback Header",\n      "prop14": "Video Playback Header: Share Click: Facebook Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".section-banner .p-share__link--twitter"\n      },\n      "a.action": "Video Playback Header: Share Click: Twitter Click",\n      "prop12": "Video Playback Header",\n      "prop14": "Video Playback Header: Share Click: Twitter Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".section-banner .p-share__link--gplus"\n      },\n      "a.action": "Video Playback Header: Share Click: Google+ Click",\n      "prop12": "Video Playback Header",\n      "prop14": "Video Playback Header: Share Click: Google+ Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".section-banner .p-share__link--embed"\n      },\n      "a.action": "Video Playback Header: Share Click: Embed Click",\n      "prop12": "Video Playback Header",\n      "prop14": "Video Playback Header: Share Click: Embed Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".section-banner .p-share__link--link"\n      },\n      "a.action": "Video Playback Header: Share Click: Link Click",\n      "prop12": "Video Playback Header",\n      "prop14": "Video Playback Header: Share Click: Link Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".section-banner .p-share__link--email"\n      },\n      "a.action": "Video Playback Header: Share Click: Email Click",\n      "prop12": "Video Playback Header",\n      "prop14": "Video Playback Header: Share Click: Email Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".video-meta__share .p-share__item"\n      },\n      "a.action": "Video Playback Page Module: Share Click: Facebook Click",\n      "prop12": "Video Playback Page Module",\n      "prop14": "Video Playback Page Module: Share Click: Facebook Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".video-meta__share .p-icon--twitter"\n      },\n      "a.action": "Video Playback Page Module: Share Click: Twitter Click",\n      "prop12": "Video Playback Page Module",\n      "prop14": "Video Playback Page Module: Share Click: Twitter Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".video-meta__share .p-share__link--gplus"\n      },\n      "a.action": "Video Playback Page Module: Share Click: Google+ Click",\n      "prop12": "Video Playback Page Module",\n      "prop14": "Video Playback Page Module: Share Click: Google+ Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".video-meta__share .p-share__link--embed"\n      },\n      "a.action": "Video Playback Page Module: Share Click: Embed Click",\n      "prop12": "Video Playback Page Module",\n      "prop14": "Video Playback Page Module: Share Click: Embed Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".video-meta__share .p-share__link--link"\n      },\n      "a.action": "Video Playback Page Module: Share Click: Link Click",\n      "prop12": "Video Playback Page Module",\n      "prop14": "Video Playback Page Module: Share Click: Link Click"\n    },\n    {\n      "wire": {\n        "defaults": "base",\n        "selector": ".video-meta__share .p-share__link--email"\n      },\n      "a.action": "Video Playback Page Module: Share Click: Email Click",\n      "prop12": "Video Playback Page Module",\n      "prop14": "Video Playback Page Module: Share Click: Email Click"\n    }\n  ]\n}\n'}),function(a,b){"function"==typeof define&&define.amd?define("bam-wiretap/utils/MLBTokenHelpers",["jquery"],b):"object"==typeof exports?module.exports=b(require("jquery")):a.MLBTokenHelpers=b(a.jQuery)}(this,function(a){function b(a){var b,c="nil";return window===window.parent&&window.parent.location?b=window.parent.location:(b=document.createElement("a"),b.href=document.referrer),this.embedParent={hostname:b.hostname,locale:c},a?this.embedParent[a]:this.embedParent}var c={SITE_NAME:function(a){return this.pageConfig.teamDisplay||"Major League Baseball"},AD_BLOCK_CONTEXT_ERROR:function(a){var b=this.pageConfig.teamAbbrev||"MLB",c=b+": "+this.pageConfig.playerContext;return c||(c=b+": Video Playback Page"),c=c.replace(/\+/g,"%20"),c=decodeURIComponent(c),c+": AdBlock On"},MEDIA_SPONSOR:function(a){return"MLB"},MEDIA_TOPIC_NAME:function(a){return this.pageConfig.topicName},MEDIA_SYSTEM_AUTO_PLAY:function(a){return this.pageConfig.systemAutoPlay},MEDIA_EMBED_HOST:function(a){return this.embedParent&&this.embedParent.hostname?this.embedParent.hostname:b.call(this,"hostname")},MEDIA_STREAM_TITLE:function(a){var b="";return a.meta&&Object.keys(a.meta).length?b=a.meta.seoTitle||a.meta.title||a.meta.blurb||"":a.clip&&Object.keys(a.clip).length&&(b=a.clip.seoTitle||a.clip.title||a.clip.blurb||""),""==b&&a.dynamicVars.title&&(b=a.dynamicVars.title),b},MEDIA_STREAM_ID:function(a){var b=null;return a.player.playerStateHelper?b=a.player.playerStateHelper._state.clip.content_id+"|"+a.player.playerStateHelper._state.clip.metaData.currentPlaybackScenario:a.clip&&a.meta&&(b=a.clip.content_id+"|"+a.meta.currentPlaybackScenario),b},MEDIA_PLAYER_CONTEXT:function(a){var b=this.pageConfig.teamAbbrev||"MLB",c=this.pageConfig.playerContext;return c?"string"==typeof c&&(c.indexOf("_articles")>-1?c="Embedded Article Player":c.indexOf("_mixed_feed")>-1?c=b+" Mixed Panel Player":c.indexOf("_video_tray")>-1&&(c=b+" Video Tray")):c="Video Playback Page",c=c.replace(/\+/g,"%20"),c=decodeURIComponent(c),c||null},MEDIA_PlAYER_LOCATION:function(a){var b=(this.pageConfig.teamAbbrev||"MLB",this.pageConfig.playerLocation||this.pageConfig.playerContext);return b||(b="Video Embed Player"),b=b.replace(/\+/g,"%20"),b=decodeURIComponent(b),b||null},MEDIA_INDEX_NAME:function(a){var b=a.meta.keywords||{};for(var c in b)if(b[c]&&"mlbtax"==b[c].type)return b[c].displayName;return null},CURRENT_TIME_STAMP:function(){var a=new Date;return a.getUTCMonth()+1+"/"+a.getUTCDate()+"/"+a.getUTCFullYear()+" "+(a.getUTCHours()-4)+":"+a.getUTCMinutes()+":"+a.getUTCSeconds()},MEDIA_EMBED_HOST:function(a){return this.embedParent&&this.embedParent.hostname?this.embedParent.hostname:b.call(this,"hostname")},GAMEDAY_GAME_ID:function(a){return a.meta.game_id?a.meta.game_id:null},GAMEDAY_GAME_PK:function(a){return a.meta.game_pk?a.meta.game_pk:null},MEDIA_PLAYER_VERSION:function(a){var b,c=a.player.toString();switch(c){case"MultiViewFlashPlayer":case"FlashPlayer":b="flash";break;case"HTML5Player":b="html5";break;case"DashPlayer":b="html5:DashPlayer";break;case"PrimetimePlayer":b="html5:PrimetimePlayer";break;default:b="Player version not found"}return b}};return c}),!function(a,b){"function"==typeof define&&define.amd?define("bam-wiretap/plugins/comscore/streamsense.5.2.0.160629.min",[],function(){return a.ns_=b(a.ns_)}):"object"==typeof module&&module.exports?module.exports=b():a.ns_=b(a.ns_)}(this,function(a){a=a||{},a.ns_=a;var b={uid:function(){var a=1;return function(){return+new Date+"_"+a++}}(),filter:function(a,b){var c={};for(var d in b)b.hasOwnProperty(d)&&a(b[d])&&(c[d]=b[d]);return c},extend:function(a){var b,c=arguments.length;a=a||{};for(var d=1;c>d;d++)if(b=arguments[d])for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);return a},getString:function(a,b){var c=String(a);return null==a?b||"na":c},getLong:function(a,b){var c=Number(a);return null==a||isNaN(c)?b||0:c},getInteger:function(a,b){var c=Number(parseInt(a));return null==a||isNaN(c)?b||0:c},getBoolean:function(a,b){var c="true"==String(a).toLowerCase();return null==a?b||!1:c},parseBoolean:function(a,b){return b=b||!1,a?"0"!=a&&void 0:b},isNotEmpty:function(a){return!this.isEmpty(a)},isEmpty:function(a){return void 0===a||null===a||""===a||a instanceof Array&&0===a.length},indexOf:function(a,b){var c=-1;return this.forEach(b,function(b,d){b==a&&(c=d)}),c},forEach:function(a,b,c){try{if("function"==typeof b)if(c="undefined"!=typeof c?c:null,"number"!=typeof a.length||"undefined"==typeof a[0]){var d="undefined"!=typeof a.__proto__;for(var e in a)a.hasOwnProperty(e)&&(!d||d&&"undefined"==typeof a.__proto__[e])&&"function"!=typeof a[e]&&b.call(c,a[e],e)}else for(var f=0,g=a.length;g>f;f++)b.call(c,a[f],f)}catch(h){}},regionMatches:function(a,b,c,d,e){if(0>b||0>d||b+e>a.length||d+e>c.length)return!1;for(;--e>=0;){var f=a.charAt(b++),g=c.charAt(d++);if(f!=g)return!1}return!0},size:function(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&b++;return b},log:function(a,b){if("undefined"!=typeof b&&b&&"undefined"!=typeof console&&console){var c=new Date,d=c.getHours()+":"+c.getMinutes()+":"+c.getSeconds();console.log(d,a)}},isTrue:function(a){return"undefined"!=typeof a&&("string"==typeof a?(a=a.toLowerCase(),"true"===a||"1"===a||"on"===a):!!a)},toString:function(a){if("undefined"==typeof a)return"undefined";if("string"==typeof a)return a;if("[object Array]"===Object.prototype.toString.call(a))return a.join(",");if(this.size(a)>0){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=c+":"+a[c]+";");return b}return a.toString()},exists:function(a){return"undefined"!=typeof a&&null!=a},firstGreaterThan0:function(){for(var a=0,b=arguments.length;b>a;a++){var c=arguments[a];if(c>0)return c}return 0},cloneObject:function(a){if(null==a||"object"!=typeof a)return a;var b=function(){function a(){}function b(b){return"object"==typeof b?(a.prototype=b,new a):b}function c(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}function d(){this.copiedObjects=[];var a=this;this.recursiveDeepCopy=function(b){return a.deepCopy(b)},this.depth=0}function e(a,b){var c=new d;return b&&(c.maxDepth=b),c.deepCopy(a)}function f(a){return"undefined"!=typeof window&&window&&window.Node?a instanceof Node:"undefined"!=typeof document&&a===document||"number"==typeof a.nodeType&&a.attributes&&a.childNodes&&a.cloneNode}var g=[];return c.prototype={constructor:c,canCopy:function(){return!1},create:function(a){},populate:function(a,b,c){}},d.prototype={constructor:d,maxDepth:256,cacheResult:function(a,b){this.copiedObjects.push([a,b])},getCachedResult:function(a){for(var b=this.copiedObjects,c=b.length,d=0;c>d;d++)if(b[d][0]===a)return b[d][1]},deepCopy:function(a){if(null===a)return null;if("object"!=typeof a)return a;var b=this.getCachedResult(a);if(b)return b;for(var c=0;c<g.length;c++){var d=g[c];if(d.canCopy(a))return this.applyDeepCopier(d,a)}throw new Error("Unable to clone the following object "+a)},applyDeepCopier:function(a,b){var c=a.create(b);if(this.cacheResult(b,c),this.depth++,this.depth>this.maxDepth)throw new Error("Maximum recursion depth exceeded.");
return a.populate(this.recursiveDeepCopy,b,c),this.depth--,c}},e.DeepCopier=c,e.deepCopiers=g,e.register=function(a){a instanceof c||(a=new c(a)),g.unshift(a)},e.register({canCopy:function(){return!0},create:function(a){return a instanceof a.constructor?b(a.constructor.prototype):{}},populate:function(a,b,c){for(var d in b)b.hasOwnProperty(d)&&(c[d]=a(b[d]));return c}}),e.register({canCopy:function(a){return a instanceof Array},create:function(a){return new a.constructor},populate:function(a,b,c){for(var d=0;d<b.length;d++)c.push(a(b[d]));return c}}),e.register({canCopy:function(a){return a instanceof Date},create:function(a){return new Date(a)}}),e.register({canCopy:function(a){return f(a)},create:function(a){return"undefined"!=typeof document&&a===document?document:a.cloneNode(!1)},populate:function(a,b,c){if("undefined"!=typeof document&&b===document)return document;if(b.childNodes&&b.childNodes.length)for(var d=0;d<b.childNodes.length;d++){var e=a(b.childNodes[d]);c.appendChild(e)}}}),{deepCopy:e}}();return b.deepCopy(a)},safeGet:function(a,b){return b=this.exists(b)?b:"",this.exists(a)?a:b},getBrowserName:function(){if(!navigator)return"";var a,b,c=navigator.userAgent||"",d=navigator.appName||"";return-1!=(b=c.indexOf("Opera"))||-1!=(b=c.indexOf("OPR/"))?d="Opera":-1!=(b=c.indexOf("Android"))?d="Android":-1!=(b=c.indexOf("Chrome"))?d="Chrome":-1!=(b=c.indexOf("Safari"))?d="Safari":-1!=(b=c.indexOf("Firefox"))?d="Firefox":-1!=(b=c.indexOf("IEMobile"))?d="Internet Explorer Mobile":"Microsoft Internet Explorer"==d||"Netscape"==d?d="Internet Explorer":(a=c.lastIndexOf(" ")+1)<(b=c.lastIndexOf("/"))?(d=c.substring(a,b),d.toLowerCase()==d.toUpperCase()&&(d=navigator.appName)):d="unknown",d},getBrowserFullVersion:function(){if(!navigator)return"";var a,b,c,d,e=navigator.userAgent||"",f=navigator.appName||"",g=navigator.appVersion?""+parseFloat(navigator.appVersion):"";return-1!=(b=e.indexOf("Opera"))?(g=e.substring(b+6),-1!=(b=e.indexOf("Version"))&&(g=e.substring(b+8))):-1!=(b=e.indexOf("OPR/"))?g=e.substring(b+4):-1!=(b=e.indexOf("Android"))?g=e.substring(b+11):-1!=(b=e.indexOf("Chrome"))?g=e.substring(b+7):-1!=(b=e.indexOf("Safari"))?(g=e.substring(b+7),-1!=(b=e.indexOf("Version"))&&(g=e.substring(b+8))):-1!=(b=e.indexOf("Firefox"))?g=e.substring(b+8):"Microsoft Internet Explorer"==f?(d=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=d.exec(e)&&(g=parseFloat(RegExp.$1))):"Netscape"==f?(d=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!=d.exec(e)&&(g=parseFloat(RegExp.$1))):g=e.lastIndexOf(" ")+1<(b=e.lastIndexOf("/"))?e.substring(b+1):"unknown",g=g.toString(),-1!=(c=g.indexOf(";"))&&(g=g.substring(0,c)),-1!=(c=g.indexOf(" "))&&(g=g.substring(0,c)),-1!=(c=g.indexOf(")"))&&(g=g.substring(0,c)),a=parseInt(""+g,10),isNaN(a)&&(g=""+parseFloat(navigator.appVersion)),g},browserAcceptsLargeURLs:function(){return"undefined"==typeof window||(null!==window.ActiveXObject,!0)},getNamespace:function(){return a.ns_||a}};return a.StreamSense=a.StreamSense||function(){var c=function(){var a="cs_";return function(){var c="undefined"!=typeof localStorage?localStorage:null;b.extend(this,{get:function(b){return c&&c.getItem(a+b)},set:function(b,d){c&&c.setItem(a+b,d)},has:function(b){return c&&c.getItem(a+b)},remove:function(b){c&&c.removeItem(a+b)},clear:function(){for(var b=0;c&&b<c.length;++b){var d=c.key(b);d.substr(0,a.length)===a&&c.removeItem(d)}}})}}(),d=function(a,b){if("undefined"==typeof Image)return void("function"==typeof setTimeout?b&&setTimeout(b,0):b&&b());var c=new Image;c.onload=function(){b&&b(200),c=null},c.onerror=function(){b&&b(),c=null},c.src=a},e=function(a,b,c){"function"==typeof setTimeout?c&&setTimeout(function(){c(200)},0):c&&c(200)},f=function(){return{dir:function(){return null},append:function(a,b,c){},write:function(a,b,c){},deleteFile:function(){return!1},read:function(){return null}}}(),g=function(){return{PLATFORM:"generic",httpGet:d,httpPost:e,Storage:c,IO:f,onDataFetch:function(a){a()},getCrossPublisherId:function(){return null},getAppName:function(){return h.UNKNOWN_VALUE},getAppVersion:function(){return h.UNKNOWN_VALUE},getVisitorId:function(){return this.getDeviceName()+ +new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceModel:function(){return h.UNKNOWN_VALUE},getPlatformVersion:function(){return h.UNKNOWN_VALUE},getPlatformName:function(){return"js"},getRuntimeName:function(){return h.UNKNOWN_VALUE},getRuntimeVersion:function(){return h.UNKNOWN_VALUE},getDisplayResolution:function(){return h.UNKNOWN_RESOLUTION},getApplicationResolution:function(){return h.UNKNOWN_RESOLUTION},getLanguage:function(){return h.UNKNOWN_VALUE},getPackageName:function(){return null},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},setPlatformAPI:function(){},isCrossPublisherIdChanged:function(){return!1},setTimeout:function(a,b){return setTimeout(a,b)},clearTimeout:function(a){return clearTimeout(a)},getDeviceArchitecture:function(){return h.UNKNOWN_VALUE},getConnectionType:function(){return h.UNKNOWN_VALUE},getDeviceJailBrokenFlag:function(){return h.UNKNOWN_VALUE},isConnSecure:function(){return"s"===document.location.href.charAt(4)},processMeasurementLabels:function(){}}}(),h={UNKNOWN_VALUE:"unknown",UNKNOWN_RESOLUTION:"0x0"};b.jsonObjectToStringDictionary=function(a){var b={};for(var c in a){var d=a[c];null===d||void 0===d?b[c]=d:b[c]=a[c]+""}return b},b.getKeys=function(a,b){var c,d=[];for(c in a)b&&!b.test(c)||!a.hasOwnProperty(c)||(d[d.length]=c);return d},b.fixEventTime=function(a){if(a.ns_ts)return parseInt(a.ns_ts);var b=+new Date;return a.ns_ts=b+"",b},b.isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},b.addNewPlaybackInterval=function(a,c,d,e){var f={};if(!(d>=c))return b.cloneObject(a);if(f.start=c,f.end=d,0==a.length)return a.push(f),b.cloneObject(a);var g;for(g=0;g<a.length;g++)if(f.start>=a[g].start&&f.end<=a[g].end)return b.cloneObject(a);var h,i=!1;for(h=0;h<a.length;h++)if(h+1===a.length&&f.start>=a[h].start||f.start>=a[h].start&&f.start<a[h+1].start){a.splice(h+1,0,f),i=!0;break}i||a.splice(0,0,f);var j=[a[0]];for(g=1;g<a.length;g++)j[j.length-1].end+e<a[g].start?j.push(a[g]):j[j.length-1].end<a[g].end&&(j[j.length-1].end=a[g].end);return b.cloneObject(j)};var i=function(){var a=["play","pause","pause-on-buffering","end","buffer","buffer-stop","keep-alive","hb","custom","load","start","skstart","adskip","cta","error","trans","drmfa","drmap","drmde","bitrt","playrt","volume","window","audio","video","subs","cdn"];return{PLAY:0,PAUSE:1,PAUSE_ON_BUFFERING:2,END:3,BUFFER:4,BUFFER_STOP:5,KEEPALIVE:6,HEARTBEAT:7,CUSTOM:8,LOAD:9,ENGAGE:10,SEEK_START:11,AD_SKIP:12,CTA:13,ERROR:14,TRANSFER:15,DRM_FAILED:16,DRM_APPROVED:17,DRM_DENIED:18,BIT_RATE:19,PLAYBACK_RATE:20,VOLUME:21,WINDOW_STATE:22,AUDIO:23,VIDEO:24,SUBS:25,CDN:26,toString:function(b){return a[b]}}}(),j=function(){return{IDLE:0,PLAYBACK_NOT_STARTED:1,PLAYING:2,PAUSED:3,BUFFERING_BEFORE_PLAYBACK:4,BUFFERING_DURING_PLAYBACK:5,BUFFERING_DURING_SEEKING:6,BUFFERING_DURING_PAUSE:7,SEEKING_BEFORE_PLAYBACK:8,SEEKING_DURING_PLAYBACK:9,SEEKING_DURING_BUFFERING:10,SEEKING_DURING_PAUSE:11,PAUSED_DURING_BUFFERING:12}}(),k=function(){var a=["c","s","r"];return{SINGLE_CLIP:0,SEGMENTED:1,REDUCED:2,toString:function(b){return a[b]}}}(),l={STREAMSENSE_VERSION:"5.2.0.160629",MODEL_VERSION:"5.3",DEFAULT_PLAYERNAME:"js_api",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,THROTTLING_DELAY:500,INTERVAL_MERGE_TOLERANCE:500,STANDARD_METADATA_LABELS:["ns_st_ci","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_li","ns_st_ad","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pu","c3","c4","c6"],LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_alias","ca_ns_alias","cb_ns_alias","cc_ns_alias","cd_ns_alias","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_ap_smv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","cs_partner","cs_xcid","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_smv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sc","ns_st_psq","ns_st_asq","ns_st_sq","ns_st_ppc","ns_st_apc","ns_st_spc","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_sl","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_ad","ns_st_li","ns_st_ci","ns_st_si","ns_st_pt","ns_st_dpt","ns_st_ipt","ns_st_et","ns_st_det","ns_st_upc","ns_st_dupc","ns_st_iupc","ns_st_upa","ns_st_dupa","ns_st_iupa","ns_st_lpc","ns_st_dlpc","ns_st_lpa","ns_st_dlpa","ns_st_pa","ns_ap_jb","ns_ap_et","ns_ap_res","ns_ap_sd","ns_ap_po","ns_ap_ot","ns_ap_c12m","cs_c12u","ca_cs_c12u","cb_cs_c12u","cc_cs_c12u","cd_cs_c12u","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_ap_cfg","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_dbc","ns_st_bt","ns_st_dbt","ns_st_bp","ns_st_lt","ns_st_skc","ns_st_dskc","ns_st_ska","ns_st_dska","ns_st_skd","ns_st_skt","ns_st_dskt","ns_st_pc","ns_st_dpc","ns_st_pp","ns_st_br","ns_st_pbr","ns_st_rt","ns_st_prt","ns_st_ub","ns_st_vo","ns_st_pvo","ns_st_ws","ns_st_pws","ns_st_ki","ns_st_rp","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pl","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_sr","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_stc","ns_st_ce","ns_st_ia","ns_st_dt","ns_st_ddt","ns_st_tdt","ns_st_tm","ns_st_dtm","ns_st_ttm","ns_st_de","ns_st_pu","ns_st_ti","ns_st_cu","ns_st_fee","ns_st_ft","ns_st_at","ns_st_pat","ns_st_vt","ns_st_pvt","ns_st_tt","ns_st_ptt","ns_st_cdn","ns_st_pcdn","ns_st_ami","ns_st_amt","ns_st_ams","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","ns_ap_referrer","ns_clid","ns_campaign","ns_source","ns_mchannel","ns_linkname","ns_fee","gclid","utm_campaign","utm_source","utm_medium","utm_term","utm_content","ns_ecommerce","ns_ec_sv","ns_client_id","ns_order_id","ns_ec_cur","ns_orderline_id","ns_orderlines","ns_prod_id","ns_qty","ns_prod_price","ns_prod_grp","ns_brand","ns_shop","ns_category","category","ns_c","ns_search_term","ns_search_result","ns_m_exp","ns_m_chs","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9","ns_ap_er","ns_st_amc"]},m=function(){function a(){function a(){I={},I.ns_st_pt="0",I.ns_st_bt="0",I.ns_st_bc="0",I.ns_st_pc="0",I.ns_st_cl="0",I.ns_st_pn="1",I.ns_st_tp="1",I.ns_st_skc="0",I.ns_st_et="0",I.ns_st_cn="1",I.ns_st_sc="0",I.ns_st_ska="0",I.ns_st_skd="0",I.ns_st_skt="0",I.ns_st_upc="0",I.ns_st_lpc="0",I.ns_st_upa="0",I.ns_st_lpa="0",I.ns_st_ub="0",I.ns_st_br="0",f=!1,e=!1,d=h.UNKNOWN_VALUE,g=NaN,m=0,j=0,i=NaN,n=NaN,p=0,o=0,k=0,s=NaN,q=[],r=[],t=0,u=0,v=0,w=0,x=0,y=0,z=NaN,A=0,B=!1,C=NaN,F=!1,E=0,H=0,D=0,G=0,J=0,K=0,L=0,M=0,N=0,O=0,P=0}function c(){var a,b,c=0;for(a=0;a<q.length;a++)c+=Math.abs(q[a].end-q[a].start);Q.setUniquePlaybackInterval(c);var d=0;for(a=0;a<q.length;a++)b=Math.abs(q[a].end-q[a].start),b>d&&(d=b);Q.setLongestPlaybackInterval(d);var e=0;for(a=0;a<r.length;a++)e+=Math.abs(r[a].end-r[a].start);Q.setAssetUniquePlaybackInterval(e);var f=0;for(a=0;a<r.length;a++)b=Math.abs(r[a].end-r[a].start),b>f&&(f=b);Q.setAssetLongestPlaybackInterval(f)}var d,e,f,g,i,j,k,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q=this,R=l.INTERVAL_MERGE_TOLERANCE;b.extend(this,{getHash:function(){return d},setHash:function(a){d=a},setPlaybackIntervalMergeTolerance:function(a){R=a},getPlaybackIntervalMergeTolerance:function(){return R},setLabels:function(a){null!=a&&b.extend(I,a)},getLabels:function(){return I},setLabel:function(a,b){var c={};c[a]=b,Q.setLabels(c)},getLabel:function(a){return I[a]},getClipNumber:function(){return parseInt(Q.getLabel("ns_st_cn"))},setClipNumber:function(a){Q.setLabel("ns_st_cn",a+"")},getPartNumber:function(){return parseInt(Q.getLabel("ns_st_pn"))},createLabels:function(a){var c=a||{};c.ns_st_dbt=Q.getBufferingTime()-A+"",A=Q.getBufferingTime(),c.ns_st_det=Q.getElapsedTime()-o+"",o=Q.getElapsedTime(),c.ns_st_dupc=Q.getUniquePlaybackInterval()-t+"",t=Q.getUniquePlaybackInterval(),parseInt(c.ns_st_dupc)<0&&(c.ns_st_dupc="0");var d;d=b.exists(c.ns_st_upc)?parseInt(c.ns_st_upc):Q.getUniquePlaybackInterval(),c.ns_st_iupc=d-u+"",u=d,parseInt(c.ns_st_iupc)<0&&(c.ns_st_iupc="0"),c.ns_st_dupa=Q.getAssetUniquePlaybackInterval()-v+"",v=Q.getAssetUniquePlaybackInterval(),parseInt(c.ns_st_dupa)<0&&(c.ns_st_dupa="0");var e;e=b.exists(c.ns_st_upa)?parseInt(c.ns_st_upa):Q.getAssetUniquePlaybackInterval(),c.ns_st_iupa=e-w+"",w=e,parseInt(c.ns_st_iupa)<0&&(c.ns_st_iupa="0"),c.ns_st_dlpc=Q.getLongestPlaybackInterval()-x+"",x=Q.getLongestPlaybackInterval(),parseInt(c.ns_st_dlpc)<0&&(c.ns_st_dlpc="0"),c.ns_st_dlpa=Q.getAssetLongestPlaybackInterval()-y+"",y=Q.getAssetLongestPlaybackInterval(),parseInt(c.ns_st_dlpa)<0&&(c.ns_st_dlpa="0");var g;return g=b.exists(c.ns_st_pt)?parseInt(c.ns_st_pt):Q.getPlaybackTime(),c.ns_st_ipt=g-k+"",k=g,c.ns_st_dpt=Q.getPlaybackTime()-j+"",j=Q.getPlaybackTime(),c.ns_st_dpc=Q.getPauses()-J+"",J=Q.getPauses(),c.ns_st_dskc=Q.getSeeks()-K+"",K=Q.getSeeks(),c.ns_st_dbc=Q.getBuffers()-L+"",L=Q.getBuffers(),c.ns_st_dskt=Q.getSeekingTime()-D+"",D=Q.getSeekingTime(),c.ns_st_dska=Q.getSeekingAmount()-G+"",G=Q.getSeekingAmount(),b.extend(c,Q.getLabels()),Q.setSeekingDirection(0),f&&(c.ns_st_spc=M+"",c.ns_st_apc=N+"",c.ns_st_sq=O+"",c.ns_st_asq=P+""),f||b.parseBoolean(c.ns_st_sc)||(c.ns_st_sc="1"),c},getVideoTrack:function(){return Q.getLabel("ns_st_vt")},setVideoTrack:function(a){Q.setLabel("ns_st_vt",a+"")},getAudioTrack:function(){return Q.getLabel("ns_st_at")},setAudioTrack:function(a){Q.setLabel("ns_st_at",a+"")},getSubtitleTrack:function(){return Q.getLabel("ns_st_tt")},setSubtitleTrack:function(a){Q.setLabel("ns_st_tt",a+"")},getCDN:function(){return Q.getLabel("ns_st_cdn")},setCDN:function(a){Q.setLabel("ns_st_cdn",a+"")},getClipPlaybackIntervals:function(){return q},setClipPlaybackIntervals:function(a){q=a},getAssetPlaybackIntervals:function(){return r},getUniquePlaybackInterval:function(){return parseInt(Q.getLabel("ns_st_upc"))},getAssetUniquePlaybackInterval:function(){return parseInt(Q.getLabel("ns_st_upa"))},setAssetUniquePlaybackInterval:function(a){Q.setLabel("ns_st_upa",a+"")},setUniquePlaybackInterval:function(a){Q.setLabel("ns_st_upc",a+"")},getLongestPlaybackInterval:function(){return parseInt(Q.getLabel("ns_st_lpc"))},setLongestPlaybackInterval:function(a){Q.setLabel("ns_st_lpc",a+"")},getAssetLongestPlaybackInterval:function(){return parseInt(Q.getLabel("ns_st_lpa"))},setAssetLongestPlaybackInterval:function(a){Q.setLabel("ns_st_lpa",a+"")},incrementPauses:function(){Q.setLabel("ns_st_pc",Q.getPauses()+1+"")},incrementSeeks:function(){Q.setLabel("ns_st_skc",Q.getSeeks()+1+"")},incrementPlayCounter:function(){O++},getPlayCounter:function(){return O},getBufferingTime:function(){return parseInt(Q.getLabel("ns_st_bt"))},setBufferingTime:function(a){Q.setLabel("ns_st_bt",a+"")},addBufferingTime:function(a){if(!isNaN(z)){var b=Q.getBufferingTime();b+=a-z,Q.setBufferingTime(b),z=NaN}},setPlaybackStartPosition:function(a){s=parseInt(a)},getPlaybackStartPosition:function(){return s},addInterval:function(a){isNaN(s)||isNaN(a)||(q=b.addNewPlaybackInterval(q,s,a,R),r=b.addNewPlaybackInterval(r,s,a,R),c(),s=NaN)},getElapsedTime:function(){return parseInt(Q.getLabel("ns_st_et"))},setElapsedTime:function(a){Q.setLabel("ns_st_et",a+"")},addElapsedTime:function(a){if(!isNaN(n)){var b=Q.getElapsedTime();b+=a-n,Q.setElapsedTime(b),n=NaN}},getElapsedTimestamp:function(){return n},setElapsedTimestamp:function(a){n=a},addPlaybackTime:function(a){if(!isNaN(g)){var b=Q.getPlaybackTime();b+=a-g,Q.setPlaybackTime(b),g=NaN}},getPlaybackTime:function(){return parseInt(Q.getLabel("ns_st_pt"))},getExpectedPlaybackPosition:function(a){return isNaN(g)||(m+=a-g),m},setPlaybackTimeOffset:function(a){m=a},getPlaybackTimeOffset:function(){return m},setPlaybackTime:function(a){Q.setLabel("ns_st_pt",a+"")},getPlaybackTimestamp:function(){return g},setPlaybackTimestamp:function(a){g=a},setPreviousPlaybackTime:function(a){j=a},setPreviousPlaybackTimestamp:function(a){i=a},getBufferingTimestamp:function(){return z},setBufferingTimestamp:function(a){z=a},getPauses:function(){return parseInt(Q.getLabel("ns_st_pc"))},setPauses:function(a){Q.setLabel("ns_st_pc",a+"")},getSeeks:function(){return parseInt(Q.getLabel("ns_st_skc"))},setSeeks:function(a){Q.setLabel("ns_st_skc",a+"")},setSeeking:function(a){B=a},isSeeking:function(){return B},setCollectingSeekingTime:function(a){F=a},isCollectingSeekingTime:function(){return F},setClipStarted:function(a){e=a},isClipStarted:function(){return e},setPlaybackStarted:function(a){f=a},isPlaybackStarted:function(){return f},setSeekingTimestamp:function(a){C=a},getSeekingTimestamp:function(){return C},addSeekingTime:function(a){if(!isNaN(C)){var b=Q.getSeekingTime();b+=a-C,Q.setSeekingTime(b),C=NaN}},getSeekingTime:function(){return parseInt(Q.getLabel("ns_st_skt"))},setSeekingTime:function(a){Q.setLabel("ns_st_skt",a+"")},setSeekingTimeBeforeEnd:function(a){H=a},getSeekingTimeBeforeEnd:function(){return H},setSeekStartPosition:function(a){E=a},getSeekStartPosition:function(){return E},setSeekingAmount:function(a){Q.setLabel("ns_st_ska",a+"")},getSeekingAmount:function(){return parseInt(Q.getLabel("ns_st_ska"))},addSeekingAmount:function(a){var b=Q.getSeekingAmount();b+=Math.abs(a-E),Q.setSeekingAmount(b);var c;E==a?c=0:E>a?c=-1:a>E&&(c=1),Q.setSeekingDirection(c),E=0},getSeekingDirection:function(){return parseInt(Q.getLabel("ns_st_skd"))},setSeekingDirection:function(a){Q.setLabel("ns_st_skd",a+"")},resetClipLifecycleLabels:function(){I.ns_st_pt="0",j=0,k=0,I.ns_st_bt="0",A=0,I.ns_st_bc="0",L=0,I.ns_st_pc="0",J=0,O=0,I.ns_st_upa="0",v=0,w=0,I.ns_st_et="0",o=0,I.ns_st_lpa="0",y=0,I.ns_st_skt="0",D=0,I.ns_st_ska="0",G=0,I.ns_st_skc="0",K=0},incrementSegmentPlaybackCounter:function(){M++},incrementClipLoadCounter:function(){Q.setLabel("ns_st_sc",Q.getClipLoadCounter()+1+"")},incrementAssetPlaybackCounter:function(){N++},setPreviousUniquePlaybackInterval:function(a){t=a},setPreviousEventIndependentUniquePlaybackInterval:function(a){u=a},setPreviousLongestPlaybackInterval:function(a){x=a},resetAssetPlaybackCounters:function(){r=[],Q.setAssetUniquePlaybackInterval(0),v=0,w=0,Q.setAssetLongestPlaybackInterval(0),y=0},setSegmentPlaybackCounter:function(a){M=a},setClipLoadCounter:function(a){Q.setLabel("ns_st_sc",a+"")},setAssetPlaybackCounter:function(a){N=a},setLowestPartNumberPlayed:function(a){p=a},getSegmentPlaybackCounter:function(){return M},getClipLoadCounter:function(){return parseInt(Q.getLabel("ns_st_sc"))},getAssetPlaybackCounter:function(){return N},getLowestPartNumberPlayed:function(){return p},getBuffers:function(){return parseInt(Q.getLabel("ns_st_bc"))},incrementBufferCount:function(){Q.setLabel("ns_st_bc",Q.getBuffers()+1+"")},getPreviousBufferingTime:function(){return A},setPlaySequenceCounter:function(a){P=a},incrementPlaySequenceCounter:function(){P++},getPlaySequenceCounter:function(){return P}}),a()}return a.resetClip=function(a,b,c){for(var d=a.getLabels(),e={},f=0;c&&f<c.length;++f)d.hasOwnProperty(c[f])&&(e[c[f]]=d[c[f]]);b.setLabels(e),b.setPlaybackIntervalMergeTolerance(a.getPlaybackIntervalMergeTolerance())},a}(),n=function(){function a(){function a(){c=new m,f={},f.ns_st_bp="0",f.ns_st_pa="0",f.ns_st_pp="0",f.ns_st_sp="1",f.ns_st_id=+new Date+"",d=NaN,e=NaN,h={},i=0,g=!1,j=!1,k=0,l=0}var c,d,e,f,g,h,i,j,k,l,n=this;b.extend(this,{resetClip:function(){var a=c;c=new m,m.resetClip(a,c)},hashExists:function(a){return null!=h[a]},storeHash:function(a){h[a]={}},removeHash:function(a){delete h[a]},storeClipPlaybackCounters:function(){for(var a in h)if(h.hasOwnProperty(a)&&h[a].clipNumber===c.getClipNumber()){b.extend(h[a],{segmentPlaybackCounter:c.getSegmentPlaybackCounter(),clipLoadCounter:c.getClipLoadCounter(),assetPlaybackCounter:c.getAssetPlaybackCounter(),lowestPartNumberPlayed:c.getLowestPartNumberPlayed(),seeking:c.isSeeking(),seekingTimeBeforeEnd:c.getSeekingTimeBeforeEnd(),seekingStartPosition:c.getSeekStartPosition(),clipPlaybackIntervals:c.getClipPlaybackIntervals(),uniquePlaybackInterval:c.getUniquePlaybackInterval(),longestPlaybackInterval:c.getLongestPlaybackInterval(),playSequenceCounter:c.getPlaySequenceCounter(),videoTrack:c.getVideoTrack(),audioTrack:c.getAudioTrack(),subtitleTrack:c.getSubtitleTrack(),cdn:c.getCDN()});break}},getStoredClipRegisters:function(a){return h[a]},getClipNumber:function(a){return h[a].clipNumber},getMaxClipNumber:function(){return i},storeClipNumber:function(a,b){h[a].clipNumber=b,b>i&&(i=b)},setLabels:function(a){null!=a&&b.extend(f,a)},getLabels:function(){return f},setLabel:function(a,b){var c={};c[a]=b,n.setLabels(c)},getLabel:function(a){return f[a]},getClip:function(){return c},createLabels:function(a){var d=a||{};return j||(d.ns_st_pb=null!=d.ns_st_pb?d.ns_st_pb:"1"),b.extend(d,n.getLabels()),c.isPlaybackStarted()&&(d.ns_st_ppc=k+"",d.ns_st_psq=l+""),d},incrementPlayCounter:function(){n.setLabel("ns_st_sp",parseInt(n.getLabel("ns_st_sp"))+1+"")},incrementPauses:function(){n.setLabel("ns_st_pp",n.getPauses()+1+"")},addPlaybackTime:function(a){if(!isNaN(e)){var b=n.getPlaybackTime();b+=a-e,n.setPlaybackTime(b),e=NaN}},addBufferingTime:function(a){if(!isNaN(d)){var b=n.getBufferingTime();b+=a-d,n.setBufferingTime(b),d=NaN}},getBufferingTime:function(){return parseInt(n.getLabel("ns_st_bp"))},setBufferingTime:function(a){n.setLabel("ns_st_bp",a+"")},getPlaybackTime:function(){return parseInt(n.getLabel("ns_st_pa"))},setBufferingTimestamp:function(a){d=a},getBufferingTimestamp:function(){return d},setPlaybackTime:function(a){n.setLabel("ns_st_pa",a+"")},setPlaybackTimestamp:function(a){e=a},getPlaybackTimestamp:function(){return e},getPauses:function(){return parseInt(n.getLabel("ns_st_pp"))},setPauses:function(a){n.setLabel("ns_st_pp",a+"")},isPlaylistStarted:function(){return g},setPlaylistStarted:function(a){g=a},getPlaybackCounter:function(){return k},incrementPlaybackCounter:function(){k++},setFirstEventSent:function(a){j=a},setPlaySequenceCounter:function(a){l=a},incrementPlaySequenceCounter:function(){l++}}),a()}return a.resetPlaylist=function(b,c,d){for(var e=b.getClip(),f=b.getLabels(),g={},h=0;d&&h<d.length;h++)f.hasOwnProperty(d[h])&&(g[d[h]]=f[d[h]]);c=new a,c.setLabels(g),m.resetClip(e,c.getClip(),d)},a}(),o=function(){return function(a){function c(){e=1}function d(c){f=b.extend({},c);var d=a.getSSECore().getPixelURL();if(a.getAppCore()){if(a.getSSECore().isProperlyInitialized()){var e=a.getSSECore().getExports().et;if("function"==typeof a.getAppCore().getMeasurementDispatcher){var g=a.getAppCore().getMeasurementDispatcher();g.send(e.HIDDEN,c,d)}else{var h=a.getSSECore().getExports().am,i=h.newApplicationMeasurement(a.getAppCore(),e.HIDDEN,c,d);a.getAppCore().getQueue().offer(i)}}}else d&&a.getSSECore().getPlatformAPI().httpGet(a.getSSECore().prepareUrl(d,c))}var e,f,g=this;b.extend(this,{newEvent:function(a){d(a.eventLabels),a.eventType!=i.HEARTBEAT&&g.incrementEventCounter()},getEventCounter:function(){return e},incrementEventCounter:function(){e++},setEventCounter:function(a){e=a},getMeasurementSnapshot:function(){return f}}),c()}}(),p=function(){return function(a){function c(){g=0,h=0}function d(){h++;var c={},d=b.fixEventTime(c);c.ns_st_po=a.getPlaylist().getClip().getPlaybackTimeOffset()+d-a.getPlaylist().getClip().getPlaybackTimestamp()+"",c.ns_st_pa=a.getPlaylist().getPlaybackTime()+d-a.getPlaylist().getPlaybackTimestamp()+"",c.ns_st_pt=a.getPlaylist().getClip().getPlaybackTime()+d-a.getPlaylist().getClip().getPlaybackTimestamp()+"",c.ns_st_dpt=d-a.getPlaylist().getClip().getPlaybackTimestamp()+"",a.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK?(c.ns_st_bp=a.getPlaylist().getBufferingTime()+d-a.getPlaylist().getBufferingTimestamp()+"",c.ns_st_bt=a.getPlaylist().getClip().getBufferingTime()+d-a.getPlaylist().getClip().getBufferingTimestamp()+"",c.ns_st_dbt=d-a.getPlaylist().getClip().getBufferingTimestamp()+""):c.ns_st_dbt=a.getPlaylist().getClip().getBufferingTime()-a.getPlaylist().getClip().getPreviousBufferingTime()+"",c.ns_st_et=a.getPlaylist().getClip().getElapsedTime()+d-a.getPlaylist().getClip().getElapsedTimestamp()+"",c.ns_st_det=d-a.getPlaylist().getClip().getElapsedTimestamp()+"";var e=b.cloneObject(a.getPlaylist().getClip().getClipPlaybackIntervals()),f=b.cloneObject(a.getPlaylist().getClip().getAssetPlaybackIntervals());e=b.addNewPlaybackInterval(e,a.getPlaylist().getClip().getPlaybackStartPosition(),parseInt(c.ns_st_po),a.getPlaylist().getClip().getPlaybackIntervalMergeTolerance()),f=b.addNewPlaybackInterval(f,a.getPlaylist().getClip().getPlaybackStartPosition(),parseInt(c.ns_st_po),a.getPlaylist().getClip().getPlaybackIntervalMergeTolerance());var l,m,n=0;for(l=0;l<e.length;l++)n+=Math.abs(e[l].end-e[l].start);c.ns_st_upc=n+"",c.ns_st_dupc=n-a.getPlaylist().getClip().getUniquePlaybackInterval()+"";var o=0;for(l=0;l<e.length;l++)m=Math.abs(e[l].end-e[l].start),m>o&&(o=m);c.ns_st_lpc=o+"",c.ns_st_dlpc=o-a.getPlaylist().getClip().getLongestPlaybackInterval()+"";var p=0;for(l=0;l<f.length;l++)p+=Math.abs(f[l].end-f[l].start);c.ns_st_upa=p+"",c.ns_st_dupa=p-a.getPlaylist().getClip().getAssetUniquePlaybackInterval()+"";var q=0;for(l=0;l<f.length;l++)m=Math.abs(f[l].end-f[l].start),m>q&&(q=m);c.ns_st_lpa=q+"",c.ns_st_dlpa=q-a.getPlaylist().getClip().getAssetLongestPlaybackInterval()+"",c.ns_st_hc=a.getHeartbeat().getCount()+"";var r=a.getSSECore().createLabels(i.HEARTBEAT,c,d);a.getEventManager().newEvent(r),g=0,k.resume()}function e(){null!=f&&(a.getSSECore().getPlatformAPI().clearTimeout(f),f=null)}var f,g,h,k=this,m=l.DEFAULT_HEARTBEAT_INTERVAL;b.extend(this,{getCount:function(){return h},setIntervals:function(a){m=a},getInterval:function(a){var b=0;if(null!=m)for(var c=0;c<m.length;c++){var d=m[c],e=d.playingtime;if(!e||e>a){b=d.interval;break}}return b},getIntervals:function(){return m},resume:function(){e();var b=k.getInterval(a.getPlaylist().getClip().getPlaybackTime()+(+new Date-a.getPlaylist().getClip().getPlaybackTimestamp()));if(b>0){var c=g>0?g:b;f=a.getSSECore().getPlatformAPI().setTimeout(d,c)}g=0},pause:function(){e();var b=k.getInterval(a.getPlaylist().getClip().getPlaybackTime()+(+new Date-a.getPlaylist().getClip().getPlaybackTimestamp()));g=b-(a.getPlaylist().getClip().getPlaybackTime()+(+new Date-a.getPlaylist().getClip().getPlaybackTimestamp()))%b}}),c()}}(),q=function(){return function(a){function c(){}function d(){var c={},d=b.fixEventTime(c);c.ns_st_po=a.getPlaylist().getClip().getExpectedPlaybackPosition(d)+"",a.getPlaylist().addPlaybackTime(d),a.getPlaylist().setPlaybackTimestamp(d),a.getPlaylist().getClip().addPlaybackTime(d),a.getPlaylist().getClip().setPlaybackTimestamp(d),a.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK&&(a.getPlaylist().addBufferingTime(d),a.getPlaylist().setBufferingTimestamp(d),a.getPlaylist().getClip().addBufferingTime(d),a.getPlaylist().getClip().setBufferingTimestamp(d)),a.getPlaylist().getClip().addElapsedTime(d),a.getPlaylist().getClip().setElapsedTimestamp(d),a.getPlaylist().getClip().addInterval(parseInt(c.ns_st_po)),a.getPlaylist().getClip().setPlaybackStartPosition(parseInt(c.ns_st_po));var e=a.getSSECore().createLabels(i.KEEPALIVE,c,d);a.getEventManager().newEvent(e),g.resume()}function e(){null!=f&&(a.getSSECore().getPlatformAPI().clearTimeout(f),f=null)}var f,g=this,h=l.DEFAULT_KEEP_ALIVE_INTERVAL;b.extend(g,{resume:function(){e(),f=a.getSSECore().getPlatformAPI().setTimeout(d,h)},pause:function(){e()},setInterval:function(a){h=a},getInterval:function(){return h}}),c()}}(),r=function(){return function(a){function c(){f=j.IDLE,e=null,d=NaN}var d,e,f,g=this;b.extend(g,{eventTypeToState:function(a){if(f==j.IDLE){if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_BEFORE_PLAYBACK;if(a==i.BUFFER)return j.BUFFERING_BEFORE_PLAYBACK}else if(f==j.PLAYBACK_NOT_STARTED){if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_BEFORE_PLAYBACK;if(a==i.BUFFER)return j.BUFFERING_BEFORE_PLAYBACK;if(a==i.END||a==i.AD_SKIP)return j.IDLE}else if(f==j.PLAYING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.BUFFER)return j.BUFFERING_DURING_PLAYBACK;if(a==i.PAUSE)return j.PAUSED;if(a==i.SEEK_START)return j.SEEKING_DURING_PLAYBACK}else if(f==j.PAUSED){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.BUFFER)return j.BUFFERING_DURING_PAUSE;if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_DURING_PAUSE}else if(f==j.BUFFERING_BEFORE_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PAUSE||a==i.BUFFER_STOP)return j.PLAYBACK_NOT_STARTED;if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_BEFORE_PLAYBACK}else if(f==j.BUFFERING_DURING_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY||a==i.BUFFER_STOP)return j.PLAYING;if(a==i.PAUSE_ON_BUFFERING)return j.PAUSED_DURING_BUFFERING;if(a==i.SEEK_START)return j.SEEKING_DURING_BUFFERING;if(a==i.PAUSE)return j.PAUSED}else if(f==j.BUFFERING_DURING_SEEKING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.BUFFER_STOP)return j.SEEKING_DURING_PLAYBACK;if(a==i.PAUSE)return j.PAUSED}else if(f==j.BUFFERING_DURING_PAUSE){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.SEEK_START)return j.SEEKING_DURING_PAUSE;if(a==i.BUFFER_STOP||a==i.PAUSE)return j.PAUSED}else if(f==j.SEEKING_BEFORE_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PAUSE)return j.PLAYBACK_NOT_STARTED;if(a==i.PLAY)return j.PLAYING;if(a==i.BUFFER)return j.BUFFERING_BEFORE_PLAYBACK}else if(f==j.SEEKING_DURING_PLAYBACK){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.PAUSE)return j.PAUSED;if(a==i.BUFFER)return j.BUFFERING_DURING_SEEKING}else if(f==j.SEEKING_DURING_BUFFERING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.PAUSE||a==i.BUFFER_STOP)return j.PAUSED}else if(f==j.SEEKING_DURING_PAUSE){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.PLAY)return j.PLAYING;if(a==i.PAUSE||a==i.BUFFER_STOP)return j.PAUSED;if(a==i.BUFFER)return j.BUFFERING_DURING_PAUSE}else if(f==j.PAUSED_DURING_BUFFERING){if(a==i.END||a==i.AD_SKIP)return j.IDLE;if(a==i.SEEK_START)return j.SEEKING_DURING_BUFFERING;if(a==i.PAUSE)return j.PAUSED;if(a==i.PLAY||a==i.BUFFER_STOP)return j.PLAYING}return null},getCurrentState:function(){return f},newEvent:function(a,b){var c=g.eventTypeToState(a);f!=c&&(e=f,f=c,d=b)},getPreviousState:function(){return e},getLastStateChangeTimestamp:function(){return d}}),c()}}(),s=function(){return function(a){var c=this;b.extend(c,{onSeekStartWhenPausedOrBufferingDuringPause:function(b,c){
var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().isCollectingSeekingTime()||(a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().getClip().setCollectingSeekingTime(!0)):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b))},onBufferWhenSeekingOrPlayBackNotStartedOrPaused:function(b,c){a.getPlaylist().setBufferingTimestamp(b),a.getPlaylist().getClip().setBufferingTimestamp(b)},onPlayWhenSeekingDuringBufferingOrSeekingDuringPause:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)},onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b)},onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause:function(b,c){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause:function(b,c){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))}})}}(),t=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onBufferStop:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().isCollectingSeekingTime()||(a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().getClip().setCollectingSeekingTime(!0)):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b))},onPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().setPlaySequenceCounter(0),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()+"",a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),u=function(){return function(a){var c=this;b.extend(c,{onEndAndSkip:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b)},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),v=function(){return function(a){var c=this;b.extend(c,{onPauseOnBuffering:function(b,c){var d=parseInt(c.ns_st_po);a.getSSECore().stopPausedOnBufferingTimer(),a.getHeartbeat().pause(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e),a.getPlaylist().setBufferingTimestamp(b),a.getPlaylist().getClip().setBufferingTimestamp(b),a.getPlaylist().getClip().setPlaybackTimeOffset(d)},onBufferStop:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b)},onEndOrAdSkip:function(c,d){var e=parseInt(d.ns_st_po);a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().addPlaybackTime(c),a.getPlaylist().getClip().addElapsedTime(c),a.getPlaylist().getClip().addInterval(e);var f=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(f),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getHeartbeat().pause(),a.getSSECore().resetKeepAlive(),a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e)},onPause:function(b,c){var d=parseInt(c.ns_st_po);a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e)},onPlay:function(b,c){a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().getClip().addBufferingTime(b)}})}}(),w=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getSSECore().stopPausedOnBufferingTimer(),a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses(),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),x=function(){return function(a){var c=this;b.extend(c,{onBuffer:function(b,c){a.getPlaylist().getClip().setSeekingTime(a.getPlaylist().getClip().getSeekingTimeBeforeEnd()),a.getPlaylist().setBufferingTimestamp(b),a.getPlaylist().getClip().setBufferingTimestamp(b)},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().setSeekingTime(a.getPlaylist().getClip().getSeekingTimeBeforeEnd()),a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b)},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().setSeekingTime(a.getPlaylist().getClip().getSeekingTimeBeforeEnd()),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabel("ns_st_pn"))<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabel("ns_st_pn"))),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().setPlaySequenceCounter(0),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()+"",a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),y=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),z=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addBufferingTime(c),a.getPlaylist().getClip().addBufferingTime(c),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onBufferStop:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().isCollectingSeekingTime()||(a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().getClip().setCollectingSeekingTime(!0)):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b))},onPause:function(b,c){a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses()},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().addBufferingTime(b),a.getPlaylist().getClip().addBufferingTime(b),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),A=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()?a.getPlaylist().getClip().setSeekingTimestamp(b):a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().isSeeking()||(a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().setPlaySequenceCounter(0),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()+"",a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),B=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){var e=parseInt(d.ns_st_po);a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addPlaybackTime(c),a.getPlaylist().getClip().addPlaybackTime(c),a.getPlaylist().getClip().addElapsedTime(c),a.getPlaylist().getClip().addInterval(e);var f=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(f),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onBuffer:function(b,c){a.getSSECore().isPauseOnBufferingEnabled()&&a.getSSECore().startPausedOnBufferingTimer(b,c),a.getPlaylist().getClip().incrementBufferCount(),a.getPlaylist().setBufferingTimestamp(b),a.getPlaylist().getClip().setBufferingTimestamp(b)},onSeekStart:function(b,c){var d=parseInt(c.ns_st_po);a.getHeartbeat().pause(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().getClip().incrementSeeks(),a.getPlaylist().getClip().setSeeking(!0),a.getPlaylist().getClip().setCollectingSeekingTime(!0),a.getPlaylist().getClip().setSeekStartPosition(d),a.getPlaylist().getClip().setSeekingTimestamp(b),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e)},onPause:function(b,c){var d=parseInt(c.ns_st_po);a.getHeartbeat().pause(),a.getSSECore().resetKeepAlive(),a.getPlaylist().addPlaybackTime(b),a.getPlaylist().getClip().addPlaybackTime(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().addInterval(d),a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses();var e=a.getSSECore().createLabels(i.PAUSE,c,b);a.getEventManager().newEvent(e)}})}}(),C=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPause:function(b,c){a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().isPlaylistStarted()||(a.getPlaylist().setPlaylistStarted(!0),a.getPlaylist().incrementPlaybackCounter()),a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().getClip().setClipStarted(!0),a.getPlaylist().getClip().setPlaybackStarted(!0),a.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==a.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)<=a.getPlaylist().getClip().getLowestPartNumberPlayed())&&(a.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(a.getPlaylist().getClip().getLabels().ns_st_pn)),a.getPlaylist().getClip().incrementAssetPlaybackCounter(),a.getPlaylist().getClip().setPlaySequenceCounter(0),a.getPlaylist().getClip().resetAssetPlaybackCounters()),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()+"",a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),D=function(){return function(a){var c=this;b.extend(c,{onPause:function(b,c){a.getPlaylist().incrementPauses(),a.getPlaylist().getClip().incrementPauses(),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1))}})}}(),E=function(){return function(a){var c=this;b.extend(c,{onEndOrAdSkip:function(c,d){parseInt(d.ns_st_po),a.getSSECore().resetHeartbeat(),a.getSSECore().resetKeepAlive(),a.getPlaylist().getClip().addElapsedTime(c);var e=a.getSSECore().createLabels(i.END,d,c);a.getEventManager().newEvent(e),a.getPlaylist().getClip().isSeeking()&&a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().setSeekingTimeBeforeEnd(c-a.getPlaylist().getClip().getSeekingTimestamp()),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().storeClipPlaybackCounters(),a.getPlaylist().getClip().resetClipLifecycleLabels(),a.getPlaylist().getClip().setPlaybackStarted(!1),d.hasOwnProperty("ns_st_pe")&&b.parseBoolean(d.ns_st_pe,!1)&&a.getSSECore().resetPlaylist()},onPlay:function(b,c){var d=parseInt(c.ns_st_po);a.getPlaylist().incrementPlaySequenceCounter(),a.getPlaylist().getClip().incrementPlaySequenceCounter(),a.getPlaylist().getClip().isSeeking()&&(a.getPlaylist().getClip().isCollectingSeekingTime()&&(a.getPlaylist().getClip().addSeekingTime(b),a.getPlaylist().getClip().setCollectingSeekingTime(!1)),a.getPlaylist().getClip().addSeekingAmount(d),a.getPlaylist().getClip().setSeeking(!1)),a.getPlaylist().getClip().incrementPlayCounter(),a.getPlaylist().setPlaybackTimestamp(b),a.getPlaylist().getClip().setPlaybackTimestamp(b),a.getPlaylist().getClip().addElapsedTime(b),a.getPlaylist().getClip().setElapsedTimestamp(b),a.getPlaylist().getClip().setPlaybackStartPosition(d),a.getSSECore().isLoadingTimeSent()||(c.ns_st_lt=a.getSSECore().getLoadTimeOffset()+b-a.getSSECore().getInitTimestamp()+"",a.getSSECore().setLoadingTimeSent(!0)),a.getHeartbeat().resume(),a.getKeepAlive().resume();var e=a.getSSECore().createLabels(i.PLAY,c,b);a.getEventManager().newEvent(e)}})}}(),F=function(){return function(){function a(){m=new G(ba),b.getNamespace().comScore?(ca=b.getNamespace().comScore.exports,m.setAppCore(ca.c())):m.setAppCore(null),m.setKeepAlive(new q(m)),m.setHeartbeat(new p(m)),m.setEventManager(new o(m)),m.setStateMachine(new r),m.setPlaylist(new n),_={},F=new x(m),H=new y(m),I=new A(m),J=new B(m),K=new t(m),L=new v(m),M=new w(m),N=new u(m),O=new z(m),P=new C(m),Q=new D(m),R=new E(m),S=new s(m),T=!1,U=0,V=+new Date,W=!0,Y=!1,$=[]}function c(a){var b=m.getStateMachine().getCurrentState();if(b==j.IDLE||b==j.PLAYBACK_NOT_STARTED||b==j.BUFFERING_BEFORE_PLAYBACK||b==j.SEEKING_BEFORE_PLAYBACK){if(a==i.PLAY)return!0}else if(b==j.PLAYING){if(a==i.END||a==i.AD_SKIP||a==i.SEEK_START||a==i.PAUSE)return!0}else if(b==j.PAUSED||b==j.BUFFERING_DURING_PAUSE||b==j.SEEKING_DURING_PLAYBACK||b==j.SEEKING_DURING_BUFFERING||b==j.SEEKING_DURING_PAUSE){if(a==i.END||a==i.AD_SKIP||a==i.PLAY)return!0}else if(b==j.BUFFERING_DURING_PLAYBACK){if(a==i.PAUSE_ON_BUFFERING||a==i.END||a==i.AD_SKIP||a==i.SEEK_START||a==i.PAUSE||a==i.PLAY)return!0}else if(b==j.BUFFERING_DURING_SEEKING){if(a==i.END||a==i.AD_SKIP||a==i.PAUSE||a==i.PLAY)return!0}else if(b==j.PAUSED_DURING_BUFFERING&&(a==i.END||a==i.AD_SKIP||a==i.BUFFER_STOP||a==i.PLAY))return!0;return!1}function d(a,b,d){var e=m.getStateMachine().getCurrentState();a==i.AD_SKIP&&!d.hasOwnProperty("ns_st_ui")&&c(a)?d.ns_st_ui="skip":a==i.SEEK_START&&!d.hasOwnProperty("ns_st_ui")&&c(a)&&(d.ns_st_ui="seek"),e==j.IDLE?a==i.BUFFER?F.onBuffer(b,d):a==i.SEEK_START?F.onSeekStart(b,d):a==i.PLAY&&F.onPlay(b,d):e==j.PLAYBACK_NOT_STARTED?a==i.END||a==i.AD_SKIP?I.onEndOrAdSkip(b,d):a==i.SEEK_START?I.onSeekStart(b,d):a==i.PLAY?I.onPlay(b,d):a==i.BUFFER&&S.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):e==j.PLAYING?a==i.END||a==i.AD_SKIP?J.onEndOrAdSkip(b,d):a==i.BUFFER?J.onBuffer(b,d):a==i.SEEK_START?J.onSeekStart(b,d):a==i.PAUSE&&J.onPause(b,d):e==j.PAUSED?a==i.END||a==i.AD_SKIP?H.onEndOrAdSkip(b,d):a==i.PLAY?H.onPlay(b,d):a==i.BUFFER?S.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):a==i.SEEK_START&&S.onSeekStartWhenPausedOrBufferingDuringPause(b,d):e==j.BUFFERING_BEFORE_PLAYBACK?a==i.END||a==i.AD_SKIP?K.onEndOrAdSkip(b,d):a==i.BUFFER_STOP?K.onBufferStop(b,d):a==i.SEEK_START?K.onSeekStart(b,d):a==i.PAUSE?K.onPause(b,d):a==i.PLAY&&K.onPlay(b,d):e==j.BUFFERING_DURING_PLAYBACK?a==i.PAUSE_ON_BUFFERING?L.onPauseOnBuffering(b,d):a==i.BUFFER_STOP?L.onBufferStop(b,d):a==i.END||a==i.AD_SKIP?L.onEndOrAdSkip(b,d):a==i.SEEK_START?L.onSeekStart(b,d):a==i.PAUSE?L.onPause(b,d):a==i.PLAY&&L.onPlay(b,d):e==j.BUFFERING_DURING_SEEKING?a==i.END||a==i.AD_SKIP?M.onEndOrAdSkip(b,d):a==i.PAUSE?M.onPause(b,d):a==i.PLAY?M.onPlay(b,d):a==i.BUFFER_STOP&&S.onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause(b,d):e==j.BUFFERING_DURING_PAUSE?a==i.END||a==i.AD_SKIP?N.onEndAndSkip(b,d):a==i.PAUSE?N.onPause(b,d):a==i.PLAY?N.onPlay(b,d):a==i.SEEK_START?S.onSeekStartWhenPausedOrBufferingDuringPause(b,d):a==i.BUFFER_STOP&&S.onBufferStopWhenBufferingDuringSeekingOrBufferingDuringPause(b,d):e==j.SEEKING_BEFORE_PLAYBACK?a==i.END||a==i.AD_SKIP?P.onEndOrAdSkip(b,d):a==i.PAUSE?P.onPause(b,d):a==i.PLAY?P.onPlay(b,d):a==i.BUFFER&&S.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):e==j.SEEKING_DURING_PLAYBACK?a==i.END||a==i.AD_SKIP?R.onEndOrAdSkip(b,d):a==i.PLAY?R.onPlay(b,d):a==i.BUFFER?S.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):a==i.PAUSE&&S.onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause(b,d):e==j.SEEKING_DURING_BUFFERING?a==i.PAUSE?Q.onPause(b,d):a==i.BUFFER?S.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):a==i.PLAY?S.onPlayWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):a==i.END||a==i.AD_SKIP?S.onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):a==i.BUFFER_STOP&&S.onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):e==j.PAUSED_DURING_BUFFERING?a==i.END||a==i.AD_SKIP?O.onEndOrAdSkip(b,d):a==i.BUFFER_STOP?O.onBufferStop(b,d):a==i.SEEK_START?O.onSeekStart(b,d):a==i.PAUSE?O.onPause(b,d):a==i.PLAY&&O.onPlay(b,d):e==j.SEEKING_DURING_PAUSE&&(a==i.BUFFER?S.onBufferWhenSeekingOrPlayBackNotStartedOrPaused(b,d):a==i.PLAY?S.onPlayWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):a==i.PAUSE?S.onPauseWhenSeekingDuringPlaybackOrSeekingDuringPause(b,d):a==i.END||a==i.AD_SKIP?S.onEndOrAdSkipWhenSeekingDuringBufferingOrSeekingDuringPause(b,d):a==i.BUFFER_STOP&&S.onBufferStopWhenSeekingDuringBufferingOrSeekingDuringPause(b,d)),
c(a)&&m.getPlaylist().setFirstEventSent(!0)}function e(a,c){var d=a||"",e="undefined",f=fa.comScore||fa.sitestat||function(a){var c,d,f,g,h,i="comScore=",j=ga.cookie,k="",m="indexOf",n="substring",o="length",p=b.browserAcceptsLargeURLs()?l.URL_LENGTH_LIMIT:l.RESTRICTED_URL_LENGTH_LIMIT,q="&ns_",r="&",s=fa.encodeURIComponent||escape;if(j[m](i)+1)for(g=0,f=j.split(";"),h=f[o];h>g;g++)d=f[g][m](i),d+1&&(k=r+unescape(f[g][n](d+i[o])));a+=q+"_t="+ +new Date+q+"c="+(ga.characterSet||ga.defaultCharset||"")+k,a.length>p&&a.indexOf(r)>0&&(c=a.substr(0,p-8).lastIndexOf(r),a=(a.substring(0,c)+q+"cut="+s(a.substring(c+1))).substr(0,p)),ba.getPlatformAPI().httpGet(a),typeof ns_p===e&&(ns_p={src:a}),ns_p.lastMeasurement=a};if(typeof c!==e){var g=[],h=fa.encodeURIComponent||escape;for(var i in c)c.hasOwnProperty(i)&&g.push(h(i)+"="+h(c[i]));/[\?\&]$/.test(d)||(d+="&"),d+=g.join("&")}return f(d)}function f(a,c){for(var d,e=fa.encodeURIComponent||escape,f=[],g=l.LABELS_ORDER,h=a.split("?"),i=h[0],j=h[1],k=j.split("&"),m=0,n=k.length;n>m;m++){var o=k[m].split("="),p=unescape(o[0]),q=unescape(o[1]);p&&(c[p]=q)}for(var r={},s=0,t=g.length;t>s;s++){var u=g[s];if(c.hasOwnProperty(u)){var v=c[u];"undefined"!=typeof v&&null!=v&&(r[u]=!0,f.push(e(u)+"="+e(c[u])))}}for(var w in c)if(c.hasOwnProperty(w)){if(r[w])continue;var x=c[w];"undefined"!=typeof x&&null!=x&&f.push(e(w)+"="+e(c[w]))}d=i+"?"+f.join("&"),d=d+(d.indexOf("&c8=")<0?"&c8="+e(ga.title):"")+(d.indexOf("&c7=")<0?"&c7="+e(ga.URL):"")+(d.indexOf("&c9=")<0?"&c9="+e(ga.referrer):"");var y=b.browserAcceptsLargeURLs()?l.URL_LENGTH_LIMIT:l.RESTRICTED_URL_LENGTH_LIMIT;if(d.length>y&&d.indexOf("&")>0){var z=d.substr(0,y-8).lastIndexOf("&");d=(d.substring(0,z)+"&ns_cut="+e(d.substring(z+1))).substr(0,y)}return d}var m,F,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba=this,ca={},da=l.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,ea=l.THROTTLING_DELAY;b.extend(ba,{createLabels:function(a,c,d){var e={};if("undefined"!=typeof document){var f=document;e.c7=f.URL,e.c8=f.title,e.c9=f.referrer}return null!=c&&b.extend(e,c),e.ns_ts=null!=e.ns_ts?e.ns_ts:+new Date+"",e.ns_st_ev=null!=e.ns_st_ev?e.ns_st_ev:i.toString(a),e.ns_st_mp=null!=e.ns_st_mp?e.ns_st_mp:l.DEFAULT_PLAYERNAME,e.ns_st_mv=null!=e.ns_st_mv?e.ns_st_mv:l.STREAMSENSE_VERSION,e.ns_st_ub=null!=e.ns_st_ub?e.ns_st_ub:"0",e.ns_st_br=null!=e.ns_st_br?e.ns_st_br:"0",e.ns_st_pn=null!=e.ns_st_pn?e.ns_st_pn:"1",e.ns_st_tp=null!=e.ns_st_tp?e.ns_st_tp:"1",e.ns_st_it=null!=e.ns_st_it?e.ns_st_it:k.toString(k.SINGLE_CLIP),e.ns_st_sv=null!=e.ns_st_sv?e.ns_st_sv:l.STREAMSENSE_VERSION,e.ns_st_smv=null!=e.ns_st_smv?e.ns_st_smv:l.MODEL_VERSION,e.ns_type=null!=e.ns_type?e.ns_type:"hidden",e.ns_st_ec=null!=e.ns_st_ec?e.ns_st_ec:m.getEventManager().getEventCounter()+"",e.ns_st_po=null!=e.ns_st_po?e.ns_st_po:m.getPlaylist().getPlaylist().getClip().getExpectedPlaybackPosition(d)+"",e.ns_st_ki=null!=e.ns_st_ki?e.ns_st_ki:m.getKeepAlive().getInterval()+"",m.getPlaylist().createLabels(e),m.getPlaylist().getClip().createLabels(e),b.extend(e,ba.getLabels()),b.extend(e,c),{eventType:a,eventLabels:e}},newEvent:function(a,b,c,e){ba.stopDelayedTransitionTimer();var f=m.getStateMachine().getCurrentState(),g=m.getStateMachine().eventTypeToState(a);if(null!=g&&g!=f)if(!ba.isThrottlingEnabled()||f!=j.PLAYING&&f!=j.PAUSED||g!=j.PLAYING&&g!=j.PAUSED||e){c.ns_st_po||(m.getStateMachine().getCurrentState()==j.PLAYING&&a==i.BUFFER||m.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK&&a==i.BUFFER_STOP?c.ns_st_po=m.getPlaylist().getClip().getPlaybackTimeOffset()+(b-m.getPlaylist().getClip().getPlaybackTimestamp())+"":c.ns_st_po=m.getPlaylist().getClip().getExpectedPlaybackPosition(b)+""),d(a,b,c);var h=0;isNaN(m.getStateMachine().getLastStateChangeTimestamp())||(h=b-m.getStateMachine().getLastStateChangeTimestamp()),m.getStateMachine().newEvent(a,b);for(var k=0,l=$.length;l>k;k++)$[k](f,g,c,h)}else Z=m.getPlatformAPI().setTimeout(function(a,c,d){return function(){ba.newEvent(a,b,d,!0)}}(a,g,c),ea)},newPseudoEvent:function(a,b,c){if(a!=i.LOAD&&a!=i.ENGAGE||m.getStateMachine().getCurrentState()==j.IDLE){a!=i.ERROR||c.ns_st_er||(c.ns_st_er=h.UNKNOWN_VALUE),m.getStateMachine().getCurrentState()!=j.IDLE&&m.getStateMachine().getCurrentState()!=j.PLAYBACK_NOT_STARTED&&m.getStateMachine().getCurrentState()!=j.SEEKING_BEFORE_PLAYBACK&&m.getStateMachine().getCurrentState()!=j.BUFFERING_BEFORE_PLAYBACK&&(m.getPlaylist().getClip().addElapsedTime(b),m.getPlaylist().getClip().setElapsedTimestamp(b));var d,e,f,g=!0,k=!1;switch(a){case i.BIT_RATE:d="ns_st_br",e="ns_st_pbr",k=!0;break;case i.PLAYBACK_RATE:d="ns_st_rt",e="ns_st_prt",k=!0;break;case i.VOLUME:d="ns_st_vo",e="ns_st_pvo",k=!0;break;case i.WINDOW_STATE:d="ns_st_ws",e="ns_st_pws",k=!0;break;case i.AUDIO:d="ns_st_at",e="ns_st_pat",k=!1;break;case i.VIDEO:d="ns_st_vt",e="ns_st_pvt",k=!1;break;case i.SUBS:d="ns_st_tt",e="ns_st_ptt",k=!1;break;case i.CDN:d="ns_st_cdn",e="ns_st_pcdn",k=!1;break;default:g=!1}if(g&&c.hasOwnProperty(d)&&(k?(ba.getLabels().hasOwnProperty(d)&&(f=ba.getLabels()[d],c[e]=f),ba.setLabel(d,c[d])):(m.getPlaylist().getClip().getLabels().hasOwnProperty(d)&&(f=m.getPlaylist().getClip().getLabels()[d],c[e]=f),m.getPlaylist().getClip().setLabel(d,c[d]))),!g||m.getStateMachine().getCurrentState()==j.PLAYING||m.getStateMachine().getCurrentState()==j.BUFFERING_DURING_PLAYBACK){c.ns_st_po||(c.ns_st_po=m.getPlaylist().getClip().getExpectedPlaybackPosition(b)+""),m.getStateMachine().getCurrentState()!=j.PLAYING&&m.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PLAYBACK||(m.getPlaylist().addPlaybackTime(b),m.getPlaylist().setPlaybackTimestamp(b),m.getPlaylist().getClip().addPlaybackTime(b),m.getPlaylist().getClip().setPlaybackTimestamp(b),m.getPlaylist().getClip().addInterval(parseInt(c.ns_st_po)),m.getPlaylist().getClip().setPlaybackStartPosition(parseInt(c.ns_st_po))),m.getStateMachine().getCurrentState()!=j.BUFFERING_BEFORE_PLAYBACK&&m.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PAUSE&&m.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_PLAYBACK&&m.getStateMachine().getCurrentState()!=j.BUFFERING_DURING_SEEKING||(m.getPlaylist().addBufferingTime(b),m.getPlaylist().setBufferingTimestamp(b),m.getPlaylist().getClip().addBufferingTime(b),m.getPlaylist().getClip().setBufferingTimestamp(b));var l=ba.createLabels(a,c,b);m.getEventManager().newEvent(l)}}},getState:function(){return m.getStateMachine().getCurrentState()},addListener:function(a){$.push(a)},removeListener:function(a){$.splice(b.indexOf(a,$),1)},getLabel:function(a){return _[a]},getLabels:function(){return _},setLabel:function(a,b){null==b?delete _[a]:_[a]=b},setLabels:function(a){for(var b in a)a.hasOwnProperty(b)&&ba.setLabel(b,a[b])},getPlatformAPI:function(){return m.getAppCore()?m.getAppCore().getPlatformAPI():g},getExports:function(){return ca},isProperlyInitialized:function(){var a=m.getAppCore().getAppContext(),b=m.getAppCore().getSalt(),c=m.getAppCore().getPixelURL();return a&&c&&b},setImplementationType:function(a){m.getStateMachine().getCurrentState()!=j.IDLE||a!=k.SINGLE_CLIP&&a!=k.SEGMENTED&&a!=k.REDUCED||m.getPlaylist().setLabel("ns_st_it",k.toString(a))},setThrottlingDelay:function(a){ea=a},getThrottlingDelay:function(){return ea},isThrottlingEnabled:function(){return Y},setThrottlingEnabled:function(a){Y=a},isLoadingTimeSent:function(){return T},setLoadingTimeSent:function(a){T=a},getLoadTimeOffset:function(){return U},setLoadTimeOffset:function(a){U=a},getInitTimestamp:function(){return V},setPauseOnBufferingInterval:function(a){da=a},getPauseOnBufferingInterval:function(){return da},isPauseOnBufferingEnabled:function(){return W},setPauseOnBufferingEnabled:function(a){W=a},startPausedOnBufferingTimer:function(a,c){ba.stopPausedOnBufferingTimer(),X=ba.getPlatformAPI().setTimeout(function(){var d={},e=b.fixEventTime(d),f=parseInt(c.ns_st_po);d.ns_st_po=f+e-a+"",ba.newEvent(i.PAUSE_ON_BUFFERING,e,d)},da)},stopPausedOnBufferingTimer:function(){null!=X&&(ba.getPlatformAPI().clearTimeout(X),X=null)},stopDelayedTransitionTimer:function(){Z&&(ba.getPlatformAPI().clearTimeout(Z),Z=null)},setPixelURL:function(a){if(null==a||0==a.length)return null;var b=decodeURIComponent||unescape,c=a.indexOf("?");if(c>=0){if(c<a.length-1){for(var d=a.substring(c+1).split("&"),e=0,f=d.length;f>e;e++){var g=d[e],h=g.split("=");2==h.length?ba.setLabel(h[0],b(h[1])):1==h.length&&ba.setLabel(l.PAGE_NAME_LABEL,b(h[0]))}a=a.substring(0,c+1)}}else a+="?";return aa=a},getPixelURL:function(){return aa?aa:"undefined"!=typeof ns_p&&"string"==typeof ns_p.src?aa=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?aa=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null},getSseSM:function(){return m},resetPlaylist:function(a){var b=m.getPlaylist();m.setPlaylist(new n),n.resetPlaylist(b,m.getPlaylist(),a)},resetHeartbeat:function(){m.getHeartbeat().pause();var a=m.getHeartbeat().getIntervals();m.setHeartbeat(new p(m)),m.getHeartbeat().setIntervals(a)},resetKeepAlive:function(){m.getKeepAlive().pause();var a=m.getKeepAlive().getInterval();m.setKeepAlive(new q(m)),m.getKeepAlive().setInterval(a)}});var fa,ga;b.isBrowser()?(fa=window,ga=document):(fa={},ga={location:{href:""},title:"",URL:"",referrer:"",cookie:""}),b.extend(ba,{prepareUrl:f,viewNotify:e}),a()}}(),G=function(){return function(a){var c,d,e,f,g,h,i=this;b.extend(i,{getAppCore:function(){return c},getSSECore:function(){return a},getEventManager:function(){return d},getStateMachine:function(){return e},getHeartbeat:function(){return f},getKeepAlive:function(){return g},getPlaylist:function(){return h},setAppCore:function(a){c=a},setKeepAlive:function(a){g=a},setHeartbeat:function(a){f=a},setEventManager:function(a){d=a},setStateMachine:function(a){e=a},setPlaylist:function(a){h=a}})}}(),H=function(){return function(a,c){function d(){h=new F,g=!0,a&&k.setLabels(a),c&&k.setPixelURL(c)}function e(a,b){k.notify(i.CUSTOM,a,b)}function f(){g&&h.getSseSM().getStateMachine().getCurrentState()!=j.IDLE&&k.end()}var g,h,k=this,m=l.STANDARD_METADATA_LABELS;b.extend(this,{isProperlyInitialized:function(){return h.isProperlyInitialized()},reset:function(a){var b=h;b.getSseSM().getKeepAlive().pause(),b.getSseSM().getHeartbeat().pause(),h=new F,n.resetPlaylist(b.getSseSM().getPlaylist(),h.getSseSM().getPlaylist(),a)},setPauseOnBufferingInterval:function(a){h.setPauseOnBufferingInterval(a)},getPauseOnBufferingInterval:function(){return h.getPauseOnBufferingInterval()},setKeepAliveInterval:function(a){h.getSseSM().getKeepAlive().setInterval(a)},getKeepAliveInterval:function(){return h.getSseSM().getKeepAlive().getInterval()},setHeartbeatIntervals:function(a){h.getSseSM().getHeartbeat().setIntervals(a)},play:function(a,b){k.notify(i.PLAY,a,b)},pause:function(a,b){k.notify(i.PAUSE,a,b)},end:function(a,b){k.notify(i.END,a,b)},bufferStart:function(a,b){k.notify(i.BUFFER,a,b)},bufferStop:function(a,b){k.notify(i.BUFFER_STOP,a,b)},load:function(a,b){k.notify(i.LOAD,a,b)},engage:function(a,b){k.notify(i.ENGAGE,a,b)},seekStart:function(a,b){k.notify(i.SEEK_START,a,b)},skipAd:function(a,b){k.notify(i.AD_SKIP,a,b)},callToAction:function(a,b){k.notify(i.CTA,a,b)},error:function(a,b){k.notify(i.ERROR,a,b)},transferPlayback:function(a,b){k.notify(i.TRANSFER,a,b)},drmFail:function(a,b){k.notify(i.DRM_FAILED,a,b)},drmApprove:function(a,b){k.notify(i.DRM_APPROVED,a,b)},drmDeny:function(a,b){k.notify(i.DRM_DENIED,a,b)},changeBitrate:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_br=a+"",k.notify(i.BIT_RATE,d,b)}},changePlaybackRate:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_rt=a+"",k.notify(i.PLAYBACK_RATE,d,b)}},changeVolume:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_vo=a+"",k.notify(i.VOLUME,d,b)}},changeWindowState:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_ws=a+"",k.notify(i.WINDOW_STATE,d,b)}},changeAudio:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_at=a+"",k.notify(i.AUDIO,d,b)}},changeVideo:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_vt=a+"",k.notify(i.VIDEO,d,b)}},changeSubtitle:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_tt=a+"",k.notify(i.SUBS,d,b)}},changeCDN:function(a,b,c){if(null!=a){var d=c||{};d.ns_st_cdn=a+"",k.notify(i.CDN,d,b)}},notify:function(a){var c,d;if(c="object"==typeof arguments[1]?arguments[1]:"object"==typeof arguments[2]?arguments[2]:{},d="number"==typeof arguments[1]?arguments[1]:"number"==typeof arguments[2]?arguments[2]:NaN,i.toString(a)){c=b.jsonObjectToStringDictionary(c);var e=b.fixEventTime(c);c.ns_st_po||isNaN(d)||(c.ns_st_po=b.getInteger(d,0)+""),c.ns_st_po&&h.getSseSM().getPlaylist().getClip().setPlaybackTimeOffset(parseInt(c.ns_st_po)),a==i.PLAY||a==i.PAUSE||a==i.BUFFER||a==i.END||a==i.SEEK_START||a==i.AD_SKIP||a==i.BUFFER_STOP?h.newEvent(a,e,c):h.newPseudoEvent(a,e,c)}},getLabels:function(){return h.getLabels()},getState:function(){return h.getSseSM().getStateMachine().getCurrentState()},setLabels:function(a){h.setLabels(a)},getLabel:function(a){return h.getLabel(a)},setLabel:function(a,b){h.setLabel(a,b)},getLoadTimeOffset:function(){return h.getLoadTimeOffset()},setLoadTimeOffset:function(a){h.setLoadTimeOffset(a)},setPixelURL:function(a){return h.setPixelURL(a)},getPixelURL:function(){return h.getPixelURL()},setImplementationType:function(a){h.setImplementationType(a)},isPauseOnBufferingEnabled:function(){return h.isPauseOnBufferingEnabled()},setPauseOnBufferingEnabled:function(a){h.setPauseOnBufferingEnabled(a)},isThrottlingEnabled:function(){return h.isThrottlingEnabled()},setThrottlingEnabled:function(a){h.setThrottlingEnabled(a)},setThrottlingDelay:function(a){h.setThrottlingDelay(a)},getThrottlingDelay:function(){return h.getThrottlingDelay()},setPlaybackIntervalMergeTolerance:function(a){h.getSseSM().getPlaylist().getClip().setPlaybackIntervalMergeTolerance(a)},getPlaybackIntervalMergeTolerance:function(){return h.getSseSM().getPlaylist().getClip().getPlaybackIntervalMergeTolerance()},setClip:function(a,c,d){if(void 0===d&&(d=!0),a=b.jsonObjectToStringDictionary(a),d&&h.getSseSM().getStateMachine().getCurrentState()!==j.IDLE&&k.end(),h.getSseSM().getStateMachine().getCurrentState()==j.IDLE){var e="",f=0;if(null!=a.ns_st_cn)e=a.ns_st_cn;else for(var g=0;g<m.length;g++)a[m[g]]&&(e+=m[g]+":"+a[m[g]]+";");var i=h.getSseSM().getPlaylist(),l=i.getClip();l.isClipStarted()?(i.hashExists(l.getHash())||(i.storeHash(l.getHash()),i.storeClipNumber(l.getHash(),l.getClipNumber())),i.storeClipPlaybackCounters(),f=i.hashExists(e)?i.getClipNumber(e):b.exists(a.ns_st_cn)?parseInt(a.ns_st_cn):i.getMaxClipNumber()+1):f=i.hashExists(e)?i.getClipNumber(e):l.getClipNumber(),i.resetClip(),l=i.getClip(),l.setHash(e),l.setClipNumber(f),l.setLabels(a);var n=i.getStoredClipRegisters(e);return n&&(l.setClipStarted(!0),l.setSegmentPlaybackCounter(n.segmentPlaybackCounter),l.setClipLoadCounter(n.clipLoadCounter),l.setAssetPlaybackCounter(n.assetPlaybackCounter),l.setLowestPartNumberPlayed(n.lowestPartNumberPlayed),l.setSeeking(n.seeking),l.setSeekingTimeBeforeEnd(n.seekingTimeBeforeEnd),l.setSeekStartPosition(n.seekingStartPosition),l.setClipPlaybackIntervals(n.clipPlaybackIntervals),l.setUniquePlaybackInterval(n.uniquePlaybackInterval),l.setLongestPlaybackInterval(n.longestPlaybackInterval),l.setVideoTrack(n.videoTrack),l.setAudioTrack(n.audioTrack),l.setSubtitleTrack(n.subtitleTrack),l.setCDN(n.cdn),l.setPlaySequenceCounter(n.playSequenceCounter),l.setPreviousUniquePlaybackInterval(n.uniquePlaybackInterval),l.setPreviousEventIndependentUniquePlaybackInterval(n.uniquePlaybackInterval),l.setPreviousLongestPlaybackInterval(n.longestPlaybackInterval)),l.incrementClipLoadCounter(),l.isClipStarted()&&c&&(i.incrementPlayCounter(),i.incrementPlaybackCounter()),c&&i.setPlaySequenceCounter(0),!0}return!1},setPlaylist:function(a,c){return void 0===c&&(c=!0),a=b.jsonObjectToStringDictionary(a),c&&h.getSseSM().getStateMachine().getCurrentState()!==j.IDLE&&k.end(),h.getSseSM().getStateMachine().getCurrentState()==j.IDLE&&(h.getSseSM().getPlaylist().isPlaylistStarted()&&h.resetPlaylist(),h.getSseSM().getPlaylist().setLabels(a),!0)},importState:function(){},exportState:function(){return{}},getVersion:function(){return l.STREAMSENSE_VERSION},addListener:function(a){h.addListener(a)},removeListener:function(a){h.removeListener(a)},getClip:function(){return h.getSseSM().getPlaylist().getClip()},getPlaylist:function(){return h.getSseSM().getPlaylist()},setHttpGet:function(a){"function"==typeof a&&(h.getPlatformAPI().httpGet=a)},setHttpPost:function(a){"function"==typeof a&&(h.getPlatformAPI().httpPost=a)},setExitEndEventEnabled:function(a){g=a},isExitEndEventEnabled:function(){return g},getPlatformAPI:function(){return h.getPlatformAPI()}}),b.extend(k,{customNotify:e,viewNotify:function(a,b){a=a||k.getPixelURL(),a&&h.viewNotify(a,b)}}),b.isBrowser()&&(window.addEventListener?(window.addEventListener("beforeunload",f),window.addEventListener("unload",f)):window.attachEvent&&(window.attachEvent("onbeforeunload",f),window.attachEvent("onunload",f))),d()}}();return function(c){function d(a,b){return x[z]||f(a,b)}function e(){z=-1;for(var b=0;y>=b;b++)if(x.hasOwnProperty(b+"")){z=b;break}return a.StreamSense.activeIndex=z,z}function f(b,c){return b=b||null,c=c||null,b&&"object"==typeof b&&(c=b,b=null),x[++y]=new a.StreamSense(c,b),e(),x[y]}function g(){var b=!1,c=z;if("number"==typeof arguments[0]&&isFinite(arguments[0]))c=arguments[0];else if(arguments[0]instanceof a.StreamSense)for(var d in x)if(x.hasOwnProperty(d)&&x[d]===arguments[0]){c=d;break}return x.hasOwnProperty(c+"")&&(b=x[c],delete x[c],b.reset(),e()),b}function h(a){return a=a||{},d().setPlaylist(a),d().getPlaylist()}function i(a,b,c){return a=a||{},"number"==typeof b&&(a.ns_st_cn=b+""),d().setClip(a,c),d().getClip()}function j(a,b,c){return"undefined"!=typeof a&&(c=c||null,b=b||{},d().notify(a,b,c))}function k(a){"undefined"!=typeof a&&d().setLabels(a)}function l(){return d().getLabels()}function m(a){"undefined"!=typeof a&&d().getPlaylist().setLabels(a)}function n(){return d().getPlaylist().getLabels()}function o(a){"undefined"!=typeof a&&d().getClip().setLabels(a)}function p(){return d().getClip().getLabels()}function q(a){return d().reset(a||{})}function r(a){return d().getPlaylist().reset(a||{})}function s(a){return d().getClip().reset(a||{})}function t(a){return a=a||{},d().viewNotify(null,a)}function u(a,b){return arguments.length>2&&(a=arguments[1],b=arguments[2]),a=a||{},"number"==typeof b&&(a.ns_st_po=b+""),d().customNotify(a,b)}function v(){return d().exportState()}function w(a){d().importState(a)}var x={},y=-1,z=-1;b.extend(c,{activeIndex:z,newInstance:f,"new":f,destroyInstance:g,destroy:g,newPlaylist:h,newClip:i,notify:j,setLabels:k,getLabels:l,setPlaylistLabels:m,getPlaylistLabels:n,setClipLabels:o,getClipLabels:p,resetInstance:q,resetPlaylist:r,resetClip:s,viewEvent:t,customEvent:u,exportState:v,importState:w})}(H),H.PlayerEvents=i,H.InternalStates=j,H.ImplementationType=k,H}(),a.StreamingTag=a.StreamingTag||function(){var c=a.StreamSense,d=(a.StreamSense.PlayerEvents,a.StreamSense.InternalStates||null),e=a.StreamSense.ImplementationType||null,f=null!=a.StreamSense.InternalStates&&null!=a.StreamSense.ImplementationType;return function(){var a={LongFormOnDemand:"12",ShortFormOnDemand:"11",Live:"13",UserGeneratedLongFormOnDemand:"22",UserGeneratedShortFormOnDemand:"21",UserGeneratedLive:"23",Bumper:"99",Other:"00"},g={LinearOnDemandPreRoll:"11",LinearOnDemandMidRoll:"12",LinearOnDemandPostRoll:"13",LinearLive:"21",BrandedOnDemandPreRoll:"31",BrandedOnDemandMidRoll:"32",BrandedOnDemandPostRoll:"33",BrandedOnDemandContent:"34",BrandedOnDemandLive:"35",Other:"00"},h=function(a){function g(){if(f)if(b.getNamespace().comScore)q=new c,q.setImplementationType(e.REDUCED);else if(b.exists(a))if(r=b.isTrue(a.debug),b.exists(a.customerC2)&&a.customerC2.length>0){var d=a.secure?"https://sb":"http"+("s"==document.location.href.charAt(4)?"s://sb":"://b");q=new c,q.setPixelURL(d+".scorecardresearch.com/p?c1=2"),q.setLabel("c2",a.customerC2),q.setImplementationType(e.REDUCED)}else r&&console&&console.log("Warning: customerC2 is not provided (or incorrect) in the StreamingTag configuration.")}function h(a){b.exists(a)||(a={});for(var c in t)t.hasOwnProperty(c)&&!b.exists(a[t[c]])&&("ns_st_ci"==t[c]?a.ns_st_ci="0":a[t[c]]="*null");return a}function i(a){for(var b in t)if(t.hasOwnProperty(b)&&!j(t[b],o,a))return!1;return!0}function j(a,c,d){if(b.exists(a)&&b.exists(c)&&b.exists(d)){var e=c[a],f=d[a];return b.exists(e)&&b.exists(f)&&e===f}return!1}function k(a){n++;var c={ns_st_cn:n+"",ns_st_pn:"1",ns_st_tp:"0"};b.extend(c,a),q.setClip(c),o=a,q.play()}function l(a){n++,a=h(a);var c={ns_st_cn:n+"",ns_st_pn:"1",ns_st_tp:"1",ns_st_ad:"1"};b.extend(c,a),q.setClip(c),q.play(),p=!1}function m(a,b){a=h(a),u==s.None&&(u=b),p&&u==b&&i(a)?(q.getClip().setLabels(a),q.getState()!=d.PLAYING&&q.play()):k(a),p=!0,u=b}var n=0,o=null,p=!1,q=null,r=!1,s={None:0,AudioContent:1,VideoContent:2},t=["ns_st_ci","c3","c4","c6","ns_st_st","ns_st_pu","ns_st_pr","ns_st_ep","ns_st_sn","ns_st_en","ns_st_ct"],u=s.None;b.extend(this,{playAdvertisement:function(){if(q){r&&console&&console.warn("Calling deprecated function 'playAdvertisement'. Please call 'playVideoAdvertisement' or 'playAudioAdvertisement' functions instead.");var a={ns_st_ct:"va"};l(a)}},playVideoAdvertisement:function(a,c){if(q){var d={ns_st_ct:"va"};c?d.ns_st_ct="va"+c:r&&console&&console.warn("Calling 'playVideoAdvertisement' without specifying the media type as a second parameter."),a&&b.extend(d,a),l(d)}},playAudioAdvertisement:function(a,c){if(q){var d={ns_st_ct:"aa"};c?d.ns_st_ct="aa"+c:r&&console&&console.warn("Calling 'playAudioAdvertisement' without specifying the media type as a second parameter."),a&&b.extend(d,a),l(d)}},playContentPart:function(a){if(q){r&&console&&console.warn("Calling deprecated function 'playContentPart'. Please call 'playVideoContentPart' or 'playAudioContentPart' functions instead.");var c={ns_st_ct:"vc"};a&&b.extend(c,a),m(c,s.VideoContent)}},playVideoContentPart:function(a,c){if(q){var d={ns_st_ct:"vc"};c?d.ns_st_ct="vc"+c:r&&console&&console.warn("Calling 'playVideoContentPart' without specifying the media type as a second parameter."),a&&b.extend(d,a),m(d,s.VideoContent)}},playAudioContentPart:function(a,c){if(q){var d={ns_st_ct:"ac"};c?d.ns_st_ct="ac"+c:r&&console&&console.warn("Calling 'playAudioContentPart' without specifying the media type as a second parameter."),a&&b.extend(d,a),m(d,s.AudioContent)}},stop:function(){q&&q.pause()}}),g()};return function(a){}(h),h.ContentType=a,h.AdType=g,h}()}(),a}),define("bam-wiretap/plugins/comscore/StreamSense",["jquery","bam-wiretap/plugins/comscore/streamsense.5.2.0.160629.min"],function(a,b){"use strict";function c(b){if(!b)throw new Error("Config object is required.");if(!b.clientID||!b.enabled)throw new Error("Config object is not enabled.");var c,e,f,g=b;this.clientName="",this.metaData={},this.MEDIA_TYPE=ns_.StreamingTag.ContentType.ShortFormOnDemand,this.initialize=function(){this.clientName=g.clientName?g.clientName:"",f={customerC2:""+g.clientID};g.playlist&&g.playlist[0]?g.playlist[0]:{};this.createStreamingTag(),g.autoTrackVideo&&d.call(this,g)},this.trackContentPart=function(){e.playVideoContentPart(this.metaData,this.MEDIA_TYPE),c=!0},this.trackStop=function(){c=!1,e.stop()},this.trackAdvertisement=function(b){c&&this.trackStop();var d="0";b&&b.data&&b.data.duration>0?d=String(b.data.duration):b&&b.duration>0&&(d=String(b.duration)),d=h(d);var f=a.extend({},this.metaData,{ns_st_cl:d});e.playVideoAdvertisement(f,this.MEDIA_TYPE)},this.createStreamingTag=function(){e&&(e=null),e=new ns_.StreamingTag(f)},this.setMetaData=function(a){this.metaData={c3:"string"==typeof this.clientName?this.clientName.toLowerCase():"",ns_st_ci:a.id?""+a.id:"0",ns_st_ge:"Sports",ns_st_cl:""+(a.duration||0),ns_st_ce:"0",ns_st_ia:"0",ns_st_ti:"*null",ns_st_ddt:"*null",ns_st_tdt:"*null",ns_st_pr:""+(a.topic?a.topic:"*null"),ns_st_ep:""+(a.title?a.title:"*null")}},this.initialize()}function d(b){var c=b.dispatcher,d=b.PlayerEvents,h=b.AdEvents,i=b.VPMEvents;c&&d&&(b.trackingEvents&&b.trackingEvents.length||(b.trackingEvents={},b.trackingEvents[i.META_DATA_LOADED]=f.bind(this),b.trackingEvents[d.MEDIA_START]=g.bind(this),b.trackingEvents[d.MEDIA_RESUME]=this.trackContentPart.bind(this),b.trackingEvents[h.AD_START]=this.trackAdvertisement.bind(this),b.trackingEvents[d.MEDIA_COMPLETE]=e.bind(this),b.trackingEvents[d.MEDIA_ERROR]=this.trackStop.bind(this),b.trackingEvents[d.ERROR]=this.trackStop.bind(this),b.trackingEvents[d.MEDIA_PAUSED]=this.trackStop.bind(this),b.trackingEvents[h.AD_COMPLETE]=this.trackStop.bind(this),a(window).on("beforeunload",this.trackStop.bind(this))),a.each(b.trackingEvents,function(a,b){c.on(a,b)}))}function e(a,b){this.trackStop()}function f(a,b){var c={};this.trackStop(),this.createStreamingTag(),a&&(c.id=a.content_id,c.title=a.title,c.duration=h(a.duration)),this.setMetaData(c)}function g(a,b){this.trackStop(),this.trackContentPart(a,b)}function h(a){if(a=""+a,a.indexOf(":")>-1){var b=[1,60,3600,86400],c=a.split(":");c.reverse(),a=0;for(var d=c.length-1;d>=0;d--)a+=(parseInt(c[d])||0)*b[d]}else a=isNaN(parseInt(a))?0:parseInt(a);return a=1e3*a}return c}),define("vpm-media-app/tracking/tracking",["media-app-core/models/applicationState","lodash/lodash","bam.url/url","bandwagon/bandwagon","pageMeta/pageMeta","bam-wiretap/WiretapVideo","text!vpm-media-app/tracking/tracking-video.json","bam-wiretap/WiretapApp","text!vpm-media-app/tracking/tracking-app.json","bam-wiretap/utils/MLBTokenHelpers","bam-wiretap/plugins/comscore/StreamSense"],function(a,b,c,d,e,f,g,h,i,j,k){function l(){var l=a.get("mediaConfig"),m=l.get("videocore.tracking"),n="",o="";if(Object.keys(m).length){if(e.team_id){var p=window.team_info,q=b.filter(p,function(a){return a.id==e.team_id});n=q.abbreviation,o=q.name}if(m.omniture&&m.omniture.app){var r=c.Location(),s={siteTraffic:"mlb",property:window.videoProperty,topicName:window.dataBootstrap.title?window.dataBootstrap.title:"",playerContext:r.getParam("playerContext"),location:r.getParam("location"),systemAutoPlay:r.getParam("systemAutoPlay")?"System Generated":"User Generated",section:"vpp",topic:window.dataBootstrap,langLocale:e.lang};e.team_id&&(s.teamAbbrev=n,s.teamDisplay=o);try{m.omniture.app&&(this.wiretapApp=new h(i,j,s)),m.omniture.video&&(s.bandwagon=d,this.wiretapVideo=new f(g,j,s))}catch(t){console.log("Wiretap was not initialized.")}}if(m.comscore&&m.comscore.enabled){var u=m.comscore.streamSense.clientName;try{this.eventManager=a.get("eventManager"),this.dispatcher=this.eventManager.getDispatcher(),this.PlayerEvents=this.eventManager.Events.Player,this.VPMEvents=this.eventManager.Events.VPM,this.AdEvents=this.eventManager.Events.Ads;var v=$.extend({},m.comscore.streamSense,{clientName:u,dispatcher:this.dispatcher,PlayerEvents:this.PlayerEvents,VPMEvents:this.VPMEvents,AdEvents:this.AdEvents});this.streamSenseTracker=new k(v)}catch(t){console.log("Comscore was not initialized.")}}}}return{initTracking:l}}),define("media-app/utils/mediaConfigUtils",["media-app-core/utils/parameters","flashobject/utils/FlashUtils","lodash/lodash","pageMeta/pageMeta"],function(a,b,c,d){function e(a,b){switch(i(a),j(a),b){case"embed":h(a);break;case"share":g(a),m();break;case"app":f(a),m()}}function f(a){var b=a.get("videocore.autoPlaySupported"),c=r(a),d=q(b)&&c;k(a,c,d)}function g(b){var c=a.get("leaveBehindEnabled");q(c)===!1?b.set("videocore.lb","disabled"):b.set("videocore.lb",a.get("lb")||b.get("share.lb"));var d=b.get("videocore.autoPlaySupported"),e=r(b),f=q(d)&&e&&b.get("share.autoPlaySupported");k(b,e,f),b.set("embed.playNextVideoInterval",b.get("share.playNextVideoInterval"))}function h(b){var d=a.get("leaveBehindEnabled");d?b.set("videocore.lb",a.get("lb")||"list"):b.set("videocore.lb","disabled"),b.set("videocore.autoPlay",a.get("autostart"));var e=b.get("videocore.autoPlay"),f=r(b),g=q(e)&&f;k(b,f,g);var h=a.get("customFreewheelProps");h=JSON.parse(decodeURIComponent(h)),h=c.extend({},{ksg:window.Krux.segments,kuid:window.Krux.user},h),n(h)}function i(b){var c=a.get("siteSection"),e=window.deviceBootstrap().formFactor;if(c)console.log("overriding siteSection to",c),b.set("videocore.advertising.siteSection",c),c.indexOf("video_tray")>-1&&"desktop"!==e&&(console.log("Overriding HTML Ad Profile to Limited for "+c),b.set("videocore.advertising.freewheel.useLimitedProfile",!0));else{var f=d.club,g=d.fileCode?d.fileCode:null;"mlb"!==f&&(b.set("videocore.advertising.siteSection",g+"_video_hub"),b.set("videocore.advertising.siteSectionArray",[g,"video","hub"]))}}function j(b){var c=a.get("volume"),d=a.get("mute");("0"===c||c)&&b.set("videocore.volume",c),d&&b.set("videocore.volume",0)}function k(a,b,c){a.set("videocore.autoPlaySupported",b),a.set("videocore.autoPlay",c),a.set("embed.autostart",c),a.set("vpm.autoPlay",c),a.set("videocore.loadPoster",!c)}function l(a){var b=s;return b.userType="FREE",console.log("customFreewheelProps",b),b}function m(){var a={ksg:window.Krux.segments,kuid:window.Krux.user};n(a)}function n(a){s=a,o()}function o(){var a=require("bandwagon/bandwagon"),b="PROPERTY_INTENTIONS",c=a.getInstanceByKey(b),d=a.getRegisteredEventsByKey(b);c.publish(d.freewheel,l)}function p(c,d){e(c,d);var f=c.get("global.videoPlayers.desktop.preferHTML5Player",!1),g=window.getStartupDeviceTypeString();c.get("videocore.staticUrl").indexOf("local")>-1&&c.set("videocore.staticUrl","https://qa.mlbstatic.com");var h=window.initialMedia&&window.initialMedia.metaData?window.initialMedia.metaData:{},i="MEDIA_ON"===h.mediaState||"MEDIA_DONE"===h.mediaState,j=a.get("testFlash")?!0:!1,k=!1;if(i||j){if(i){k="desktop"===g?b.isFlashPlaybackSupported():!1;var l=c.get("global.livePlaybackScenarios");c.set("global.preferredPlaybackScenarios",l),c.set("vpm.preferredPlaybackScenarios",l),c.set("videocore.preferredPlaybackScenarios",l)}c.set("global.videoPlayers.desktop.preferHTML5Player",!1),c.set("vpm.videoPlayers.desktop.preferHTML5Player",!1),c.set("videocore.videoPlayers.desktop.preferHTML5Player",!1),c.set("app.isFlashRequiredForDesktop",!0),f=!1}if("desktop"!==g||f||!k){var m=c.get("videocore.advertising.freewheel.useLimitedProfile",!1);if(c.set("videocore.advertising.freewheel.adManager",c.videocore.advertising.freewheel.fwAdManagers.html),c.set("videocore.advertising.freewheel.adServer",c.videocore.advertising.freewheel.fwAdServers.html),m)if("desktop"===g){var n=c.get("mediaConfig.videocore.advertising.freewheel.fwAdProfiles.htmlDesktopLimited",c.videocore.advertising.freewheel.fwAdProfiles.html);c.set("videocore.advertising.freewheel.adProfile",n)}else c.set("videocore.advertising.freewheel.adProfile",c.videocore.advertising.freewheel.fwAdProfiles.htmlLimited);else"desktop"===g?c.set("videocore.advertising.freewheel.adProfile",c.videocore.advertising.freewheel.fwAdProfiles.html):c.set("videocore.advertising.freewheel.adProfile",c.videocore.advertising.freewheel.fwAdProfiles.device)}return c}function q(a){return"false"===a?!1:!0}function r(a){var b=window.deviceBootstrap(),c=b.is.desktop,e=!0,f=d["app-view"]||"web";return c||(e=!!(b.is.ios&&b.platformVersion.startsWith("10.")||b.is.android&&b.is.chrome),!a.get("app.androidAutoplayEnabled",!1)&&b.is.android&&(console.log("autoplay on android is currently disabled."),e=!1),!a.get("app.iOSAutoPlayEnabled",!0)&&b.is.ios&&(console.log("autoplay on ios is currently disabled."),e=!1),e?a.set("videocore.volume",0):a.set("videocore.volume",50),console.log("device supported?: ",e)),a.get("app.appViewAutoplayEnabled",!1)||"web"===f||(console.log("autoplay on app views is currently disabled."),a.set("videocore.volume",50),e=!1),e}var s={};return{init:p}}),define("media-app/utils/eventInterceptor",["lodash/lodash"],function(a){function b(){this.interceptions=[]}function c(a,b){this.interceptions.push({eventName:a,fn:b})}function d(b,c){return a.forEach(this.interceptions,function(a){b===a.eventName&&(c=a.fn(c))}),
c}function e(){return f||(f=new b),f}var f;return b.prototype={intercept:d,addInterception:c},e()}),define("media-app/utils/eventReplicator",["lodash/lodash","media-app/utils/eventInterceptor","media-app/models/metaData"],function(a,b,c){function d(b,d,f,g){a.forIn(d,function(a){b.on(a,function(b,d){f.postMessage({type:d.type,playerId:g,payload:e(a,b)},"*"),"mediaStart"===a&&(console.log("repost meta event"),f.postMessage({type:"META_DATA_LOADED",playerId:g,payload:e("META_DATA_LOADED",c.attributes.metadata)},"*"))})})}function e(a,b){function c(a,b){if(!("function"==typeof b||void 0===b||null===b||b instanceof Window)){if(b instanceof Object){if(d.indexOf(b)>-1)return;d.push(b)}return b}}var d=[];b&&b.player&&(b.player={});try{return JSON.parse(JSON.stringify(b,c))}catch(e){return console.log("removeCircularReferences: error replicating event: ",a,e),{}}}return{replicate:d}}),function(a,b){"function"==typeof define&&define.amd?define("bam-media-search/index",[],b):"object"==typeof exports?module.exports=b():a.MediaSearch=b()}(this,function(){"use strict";function a(a,c){this.moreResults=!1,this.serverPath=void 0,this.searchPath="/svc/search/v2/{lang_index}/{search_route}",this.metaData={hits:"",from:""},this.queryParams={q:"",fq:"",page:"1",sort:"new",type:"",from:"",to:"",hl:"false",facet:""},this.tag=a.tag,this.topic=a.topic,"undefined"!=typeof $&&"function"==typeof $.extend?this.queryParams=$.extend(!0,this.queryParams,a.queryParams):this.queryParams=Object.assign(this.queryParams,a.queryParams||{});var d=this.setServerPath(c);d&&(this.setSearchPath=b.bind(this),d=this.setSearchPath(a)),d&&(d=this.prototype.setQueryParams.call(this),this.moreResults=d),d||console.warn("Media Search has failed to initialize.")}function b(a){var b=a.langIndex;if(b||"undefined"==typeof window||(b=window.searchLangIndex),!b)return!1;this.searchPath=this.searchPath.replace("{lang_index}",b);var c="";return a.teamId||a.topic||a.tag?(a.topic&&(c+="topic/"+a.topic+"/"),a.teamId&&(c+=a.videoProperty&&"mlb"===a.videoProperty?"sitesearch/team/"+a.teamId+"/":"team/"+a.teamId+"/"),a.tag&&a.tag.key&&a.tag.value&&(c+="tag/"+a.tag.key+"/"+encodeURIComponent(a.tag.value)+"/")):c="query/","/"===c.charAt(c.length-1)&&(c=c.slice(0,-1)),this.searchPath=this.searchPath.replace("{search_route}",c),!0}return a.prototype={constructor:a,setServerPath:function(a){return!1},setQueryParams:function(){var a="",b=this.queryParams;return Object.getOwnPropertyNames(b).forEach(function(c,d,e){b[c]&&(a+=c+"="+encodeURIComponent(b[c])+"&")}),"&"===a.charAt(a.length-1)&&(a=a.slice(0,-1)),this.queryString=this.searchPath+"?"+a,!0}},a}),function(a,b){"function"==typeof define&&define.amd?define("bam-media-search/client-search",["jquery","bluebird/js/browser/bluebird","bam-media-search/index"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("bluebird/js/browser/bluebird"),require("bam-media-search/index")):a.ClientMediaSearch=b(a.jQuery,a["null"],a.MediaSearch)}(this,function(a,b,c){"use strict";function d(a,b){d.prototype["super"].constructor.call(this,a,b),this.exec=e,this.isFetching=!1}function e(){this.isFetching=!0;var c=this;return new b(function(b,d){c.queryString&&c.serverPath?c.moreResults?a.ajax({method:"GET",url:c.serverPath+c.queryString,contentType:"application/json"}).done(a.proxy(function(a){var d=a.meta.page_size+a.meta.offset,e=a.meta.hits;c.metaData.from=e>d?d:e,c.metaData.hits=e,c.queryParams.page=parseInt(c.queryParams.page)+1,c.prototype.setQueryParams.call(c),d>=e&&(c.moreResults=!1),c.isFetching=!1,b(a.docs)},this)).fail(a.proxy(function(a){c.isFetching=!1,d("Video Search failed to load")},this)):d("Reached the end of the results"):d("Search unavailable")})}return d.prototype=Object.create(c),d.prototype.constructor=d,d.prototype["super"]=c.prototype,d.prototype.setServerPath=function(b){if(b)this.serverPath=b;else{if(!window.server_path.search.client||""===a.trim(window.server_path.search.client))return!1;this.serverPath=window.server_path.search.client}return!0},d}),define("vpm-media-app/utils/dateFormatter",["moment/moment"],function(a){"use strict";function b(b){var c=b.display_timestamp||b.first_published||b.date;return c=new Date(c),"[object Date]"!==Object.prototype.toString.call(c)||isNaN(c.getTime())?"":(c=new Date(c.toUTCString()).toISOString(),a(c).utcOffset("-05:00").format("ll"))}return{formatCarouselDate:b}}),define("vpm-media-app/utils/formatSearchResults",["vpm-media-app/utils/tagExtractor","moment/moment","mlb-video-launcher/index","pageMeta/pageMeta","vpm-media-app/utils/dateFormatter"],function(a,b,c,d,e){"use strict";function f(b,c){Array.isArray(b)&&b.length>0&&b.forEach(function(b){if(b.keywordsAll||b.keywords){var d=b.keywordsAll?b.keywordsAll:b.keywords,e=a.getTag(d);e&&(b.tag=e)}g(b),h(b,c)})}function g(a){!a.id&&a.asset_id&&(a.id=a.asset_id),a.display_date=e.formatCarouselDate(a)}function h(a,b){var c=b.topic?b.topic:"";return a.useLinks=!0,a.url=j.getVPPLink({v2:!1,content_id:a.id,topic_id:c,content_slug:a.slug}),a}function i(a,b){return Array.isArray(a)&&a.length>0&&a.forEach(function(a){h(a,b)}),a}var j=new c;return b.locale(d.locale||"en"),{formatList:f,getLinks:i,getLink:h}}),define("media-app/models/playlist",["backbone","bluebird/js/browser/bluebird","media-app-core/models/applicationState","pageMeta/pageMeta","bam-media-search/client-search","vpm-media-app/utils/formatSearchResults"],function(a,b,c,d,e,f){var g=a.Model.extend({"default":{id:null,title:null,searchQuery:null,list:[],currentMediaId:void 0,searchPage:1,teamId:d.team_id},fetch:function(){var a={langIndex:window.searchLangIndex||"mlb_global_en",videoProperty:this.get("videoProperty"),teamId:this["default"].teamId||this.get("teamId"),queryParams:{page:this.get("searchPage")||this["default"].searchPage,sort:"new",type:"video",expand:"image",listed:"true"}};return this.get("queryKey")?(a.langIndex=window.userSearchLangIndex||"mlb_global_sitesearch_en",a.queryParams[this.get("queryKey")]=this.get("queryValue")):a.topic=this.get("topicId"),this.set("searchPage",this.get("searchPage")?this.get("searchPage")+1:this["default"].searchPage+1),new b(function(b,c){var d=new e(a);d.exec().then(function(c){f.formatList(c,a),b(c)})["catch"](function(a){c(a)})})}});return g}),define("media-app/collections/playlists",["backbone","bluebird/js/browser/bluebird","lodash/lodash","media-app/models/playlist","vpm-media-app/utils/tagExtractor","media-app-core/models/applicationState"],function(a,b,c,d,e,f){var g=a.Collection.extend({model:d,modelId:function(a){return a.id},initialize:function(){var a=[],b=window.dataBootstrap,e=window.videoProperty,g=1,h=["q","game_pk","team_id","player"],i={q:{parameter:"q",valuePrefix:!1,displayValue:""},game_pk:{parameter:"fq",valuePrefix:"tag_game_pk",displayValue:"Game"},player:{parameter:"fq",valuePrefix:"tag_player_id",displayValue:"Player"},team_id:{parameter:"fq",valuePrefix:"tag_team_id",displayValue:"Team"}};if(b.list&&(this.checkForTags(b.list),!b.pageConfig.hideActivePlaylist)){var j=new d({type:"carousel-list",id:"web-media-playlist--"+g,topicId:b.id,title:b.title,list:b.list,searchPage:2});a.push(j),g++}if(Object.keys(window.requestParams.query).length>0){var k=c.intersection(Object.keys(window.requestParams.query),h);if(k.length>0){var l={videoProperty:e,type:"carousel-list",id:"web-media-playlist--"+g,title:"Search results for:",list:[]};k.forEach(function(a){l.queryKey||(l.title+=" "+i[a].displayValue+" "+window.requestParams.query[a],l.queryKey=i[a].parameter,l.queryValue=i[a].valuePrefix?i[a].valuePrefix+":"+window.requestParams.query[a]:window.requestParams.query[a])}),a.push(new d(l)),g++}}if(!b.pageConfig.suppressAdditionalPlaylist,"embed"===f.get("appType")){var m=a.slice(a.length-1);return m[0].set({id:"web-media-playlist--1"}),this.set(m,{remove:!1}),this}return f.get("isMostPopularLoaded")&&a.length>1&&(a=a.reverse()),c.forEach(b.promos,function(b,c){if(b.headline&&b.id){var e=new d({type:"carousel-tiles",id:"web-media-playlist--"+(c+g),topicId:b.id,title:b.headline,list:[]});a.push(e)}}),this.set(a,{remove:!1}),this},checkForTags:function(a){return a.forEach(function(a){if(a.keywordsDisplay||a.keywords){var b=a.keywordsDisplay?a.keywordsDisplay:a.keywords,c={};try{c=e.getTag(b),c&&(a.tag=c)}catch(d){console.log("getTag failed: ",d)}}}),a},fill:function(){var a=[],c=this;return this.models.forEach(function(b){0===b.attributes.list.length&&a.push(b.fetch().then(function(a){a=c.checkForTags(a),b.set({list:a})}))}),b.all(a)},updateModel:function(a){var c=this,d=c.models.findIndex(function(b){return b.get("id")===a});return new b(function(a,b){c.models[d].fetch().bind(c.models[d]).then(function(b){this.set("list",this.attributes.list.concat(b)),a({list:b,modelId:this.attributes.id})})})}});return g}),define("media-app/events/targetEvents",[],function(){return{META_DATA_LOADED:"META_DATA_LOADED",FLASH_BLOCK:"flashBlock",MEDIA_START:"mediaStart",MEDIA_PAUSED:"mediaPaused",MEDIA_COMPLETE:"mediaComplete",MEDIA_RESUME:"mediaResume",AD_START:"adStart",AD_COMPLETE:"adComplete",__media_app_flashblock_detected:"__media_app_flashblock_detected",__media_app_flash_required:"__media_app_flash_required"}}),define("media-app/utils/resizeCenter",["jquery"],function(a){function b(a,b){e[a]=b}function c(){for(var a in e)e[a]()}function d(a){delete e[a]}var e={};return a(document).ready(function(){a(window).on("resize",c)}),{subscribe:b,unsubscribe:d}}),define("media-app/views/blockMessage",["jquery","backbone","bluebird/js/browser/bluebird","media-app-core/models/applicationState","media-app/templates/applicationTemplates","media-app/utils/messageCenter","media-app/utils/resizeCenter","media-app/models/metaData"],function(a,b,c,d,e,f,g,h){var i=b.View.extend({tagname:"div",id:"block-msg",eventManager:null,events:{},initialize:function(a){this.eventManager=d.get("eventManager"),this.message=a.message,this.dispatcher=this.eventManager.getDispatcher(),this.ApplicationEvents=this.eventManager.Events.Application,g.subscribe("blockMessageResize",this.updateSize.bind(this)),this.render(),this.placeInMessageCenter()},render:function(){var a=this,b={metaData:h.get("metadata"),message:this.message};return a.$el.html(e.blockTemplate(b)),c.resolve(this)},updateSize:function(){a("#"+this.id).css("height",a("#media-view").height()+"px")},show:function(){a("#"+this.id).css("display","block"),this.updateSize()},hide:function(){a("#"+this.id).css("display","none")},placeInMessageCenter:function(){f.showMessage(this.$el)}});return i}),define("media-app/applicationEmbed",["media-app/property/dependencies","media-app-core/models/applicationState","media-app/views/application","media-app-core/messages/messageManager","media-app-core/events/eventManager","media-app/events/extensionEvents","media-app/control/router","media-app/models/mediaRequest","media-app-core/models/mediaItem","media-app/utils/messageCenter","media-app/views/videoPreview","media-app/views/leave-behind/list","media-app/views/leave-behind/replay","vpm-media-app/tracking/tracking","media-app/utils/mediaConfigUtils","media-app/utils/eventReplicator","media-app/utils/eventInterceptor","media-app-core/utils/parameters","flashobject/utils/FlashUtils","lodash/lodash","media-app/collections/playlists","media-app/events/targetEvents","media-app/views/blockMessage","media-app/models/metaData"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){function y(c,d){var g,h,j,k=d.query;if(a.inject(),c=o.init(c,"embed"),b.set("id",window.dataBootstrap.id),b.set("mediaConfig",c),b.set("appType","embed"),g=new e(f),b.set("eventManager",g),h=g.dispatcher,n.initTracking(),B()){var l=$(window.frameElement).data("config")||{};l&&l.alias&&C(l.alias)}x.set("metadata",initialMedia.metaData),j=g.Events,b.set("mediaItem",new i),z(c),h.on(j.Player.MEDIA_COMPLETE,A),h.on(j.Player.AD_BLOCK_FOUND,function(){var a=new w({message:t.get(c,"videocore.advertising.adBlocker.blockMessage")});a.show()}),h.on(j.Application.FLASH_REQUIRED,function(){var a=new w({message:t.get(c,"videocore.messages.flashRequired")});a.show()});var m={MEDIA_START:"mediaStart",MEDIA_PAUSED:"mediaPaused",MEDIA_COMPLETE:"mediaComplete",MEDIA_RESUME:"mediaResume",META_DATA_LOADED:"META_DATA_LOADED"},q=c.get("embed.eventsToReplicate",m);p.replicate(h,q,window.parent,k.playerId)}function z(a){var e=new c({el:a.get("app.backbone.container","#app")});return e.render().then(function(){return d.loadMessages()}).then(function(){return E=new u,0===E.models[0].attributes.list.length?E.fill():Promise.resolve()}).then(function(){var a,c,d=window.dataBootstrap.pageConfig&&window.dataBootstrap.pageConfig.preferSearchList;if(window.initialMedia&&window.initialMedia.content_id&&!d)a=window.initialMedia.content_id;else{var e=E.models.length&&E.models[0];if(e){var f=e.get("list");f&&f.length&&(a=f[0].id)}}return c=new h({content_id:a}),b.set("initialMediaRequest",c),Promise.resolve()}).then(function(){new g,Backbone.history.start({pushState:a.get("app.backbone.pushState",!1)})})}function A(a){console.log("onMediaComplete()");var c=b.get("mediaConfig").get("videocore.lb");switch(c){case"replay":b.get("lbReplay")?b.get("lbReplay").show():b.set("lbReplay",new m);break;case"preview":new k;break;case"disabled":break;case"list":default:var d=E.get("web-media-playlist--1");d&&(b.get("lbList")?b.get("lbList").show():b.set("lbList",new l(d)),a.player.$player.attr("src")&&(a.player.$player.attr("src",null),a.player.controls.hide()))}}function B(){return!!window.frameElement}function C(a){D(initialMedia.metaData,a),dataBootstrap.list=t.map(dataBootstrap.list,function(b){return D(b,a)}),q.addInterception("META_DATA_LOADED",function(b){return D(b,a)})}function D(a,b){return(+a.id||+a.contentId||+a.content_id)!==+b.contentId?a:a=t.assign({},a,b)}var E=null;return{init:y}}),function(a,b){"function"==typeof define&&define.amd?define("media-config/models/MediaConfig",["lodash/lodash"],b):"object"==typeof exports?module.exports=b(require("lodash")):a.MediaConfig=b(a._)}(this,function(a){function b(c){if(!(this instanceof b))return new b(c);a.assign(this,c);var d=this.get("vpm.metaUtil.regex",null);d&&this.set("vpm.metaUtil.regex",new RegExp(d))}return b.prototype.get=function(b,c){return a.get(this,b,c)},b.prototype.set=function(b,c){a.set(this,b,c)},b}),define("console.wrapper/console.wrapper",["require","exports","module"],function(a,b,c){var d,e=function(){},f=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],g=window.console=window.console||{},h=[];c={disable:function(){for(var a=f.length;a--;)d=f[a],g[d]?(h[d]=g[d],g[d]=e):g[d]=e},enable:function(){for(var a=f.length;a--;)d=f[a],g[d]&&(g[d]=h[d])},dump:function(a){for(var b=document.querySelector(a),c=f.length;c--;)verb=f[c],g[verb]=function(a,b,c){return function(){a.apply(g,arguments);var d=document.createElement("div");d.classList.add(b),d.textContent=b+": "+Array.prototype.slice.call(arguments).join(" "),c.appendChild(d)}}(g[verb],verb,b)}},$.extend(b,c)}),define("embed-startup",["require","../scripts/utils/polyfills/polyfills","media-app/applicationEmbed","media-config/models/MediaConfig","console.wrapper/console.wrapper","pageMeta/pageMeta","bam.url/url"],function(a){a("../scripts/utils/polyfills/polyfills");var b=a("media-app/applicationEmbed"),c=a("media-config/models/MediaConfig"),d=new c(window.mediaConfig),e=a("console.wrapper/console.wrapper"),f=a("pageMeta/pageMeta"),g=a("bam.url/url"),h=window.requestParams;"production"===f.env||"beta"===f.env?(e.disable(),g.Location(window.location).getParam("logEnabled")&&e.enable()):g.Location(window.location).getParam("logDisabled")&&e.disable(),b.init(d,h)}),function(a){var b=document,c="appendChild",d="styleSheet",e=b.createElement("style");e.type="text/css",b.getElementsByTagName("head")[0][c](e),e[d]?e[d].cssText=a:e[c](b.createTextNode(a))}('/*! jQuery UI - v1.10.0 - 2013-01-28\n* http://jqueryui.com\n* Includes: jquery.ui.core.css, jquery.ui.resizable.css, jquery.ui.selectable.css, jquery.ui.accordion.css, jquery.ui.autocomplete.css, jquery.ui.button.css, jquery.ui.datepicker.css, jquery.ui.dialog.css, jquery.ui.menu.css, jquery.ui.progressbar.css, jquery.ui.slider.css, jquery.ui.spinner.css, jquery.ui.tabs.css, jquery.ui.tooltip.css\n* Copyright (c) 2013 jQuery Foundation and other contributors Licensed MIT */\n\n/* Layout helpers\n----------------------------------*/\n.ui-helper-hidden {\n	display: none;\n}\n.ui-helper-hidden-accessible {\n	border: 0;\n	clip: rect(0 0 0 0);\n	height: 1px;\n	margin: -1px;\n	overflow: hidden;\n	padding: 0;\n	position: absolute;\n	width: 1px;\n}\n.ui-helper-reset {\n	margin: 0;\n	padding: 0;\n	border: 0;\n	outline: 0;\n	line-height: 1.3;\n	text-decoration: none;\n	font-size: 100%;\n	list-style: none;\n}\n.ui-helper-clearfix:before,\n.ui-helper-clearfix:after {\n	content: "";\n	display: table;\n}\n.ui-helper-clearfix:after {\n	clear: both;\n}\n.ui-helper-clearfix {\n	min-height: 0; /* support: IE7 */\n}\n.ui-helper-zfix {\n	width: 100%;\n	height: 100%;\n	top: 0;\n	left: 0;\n	position: absolute;\n	opacity: 0;\n	filter:Alpha(Opacity=0);\n}\n\n.ui-front {\n	z-index: 100;\n}\n\n\n/* Interaction Cues\n----------------------------------*/\n.ui-state-disabled {\n	cursor: default !important;\n}\n\n\n/* Icons\n----------------------------------*/\n\n/* states and images */\n.ui-icon {\n	display: block;\n	text-indent: -99999px;\n	overflow: hidden;\n	background-repeat: no-repeat;\n}\n\n\n/* Misc visuals\n----------------------------------*/\n\n/* Overlays */\n.ui-widget-overlay {\n	position: fixed;\n	top: 0;\n	left: 0;\n	width: 100%;\n	height: 100%;\n}\n.ui-resizable {\n	position: relative;\n}\n.ui-resizable-handle {\n	position: absolute;\n	font-size: 0.1px;\n	display: block;\n}\n.ui-resizable-disabled .ui-resizable-handle,\n.ui-resizable-autohide .ui-resizable-handle {\n	display: none;\n}\n.ui-resizable-n {\n	cursor: n-resize;\n	height: 7px;\n	width: 100%;\n	top: -5px;\n	left: 0;\n}\n.ui-resizable-s {\n	cursor: s-resize;\n	height: 7px;\n	width: 100%;\n	bottom: -5px;\n	left: 0;\n}\n.ui-resizable-e {\n	cursor: e-resize;\n	width: 7px;\n	right: -5px;\n	top: 0;\n	height: 100%;\n}\n.ui-resizable-w {\n	cursor: w-resize;\n	width: 7px;\n	left: -5px;\n	top: 0;\n	height: 100%;\n}\n.ui-resizable-se {\n	cursor: se-resize;\n	width: 12px;\n	height: 12px;\n	right: 1px;\n	bottom: 1px;\n}\n.ui-resizable-sw {\n	cursor: sw-resize;\n	width: 9px;\n	height: 9px;\n	left: -5px;\n	bottom: -5px;\n}\n.ui-resizable-nw {\n	cursor: nw-resize;\n	width: 9px;\n	height: 9px;\n	left: -5px;\n	top: -5px;\n}\n.ui-resizable-ne {\n	cursor: ne-resize;\n	width: 9px;\n	height: 9px;\n	right: -5px;\n	top: -5px;\n}\n.ui-selectable-helper {\n	position: absolute;\n	z-index: 100;\n	border: 1px dotted black;\n}\n.ui-accordion .ui-accordion-header {\n	display: block;\n	cursor: pointer;\n	position: relative;\n	margin-top: 2px;\n	padding: .5em .5em .5em .7em;\n	min-height: 0; /* support: IE7 */\n}\n.ui-accordion .ui-accordion-icons {\n	padding-left: 2.2em;\n}\n.ui-accordion .ui-accordion-noicons {\n	padding-left: .7em;\n}\n.ui-accordion .ui-accordion-icons .ui-accordion-icons {\n	padding-left: 2.2em;\n}\n.ui-accordion .ui-accordion-header .ui-accordion-header-icon {\n	position: absolute;\n	left: .5em;\n	top: 50%;\n	margin-top: -8px;\n}\n.ui-accordion .ui-accordion-content {\n	padding: 1em 2.2em;\n	border-top: 0;\n	overflow: auto;\n}\n.ui-autocomplete {\n	position: absolute;\n	top: 0;\n	left: 0;\n	cursor: default;\n}\n.ui-button {\n	display: inline-block;\n	position: relative;\n	padding: 0;\n	line-height: normal;\n	margin-right: .1em;\n	cursor: pointer;\n	vertical-align: middle;\n	text-align: center;\n	overflow: visible; /* removes extra width in IE */\n}\n.ui-button,\n.ui-button:link,\n.ui-button:visited,\n.ui-button:hover,\n.ui-button:active {\n	text-decoration: none;\n}\n/* to make room for the icon, a width needs to be set here */\n.ui-button-icon-only {\n	width: 2.2em;\n}\n/* button elements seem to need a little more width */\nbutton.ui-button-icon-only {\n	width: 2.4em;\n}\n.ui-button-icons-only {\n	width: 3.4em;\n}\nbutton.ui-button-icons-only {\n	width: 3.7em;\n}\n\n/* button text element */\n.ui-button .ui-button-text {\n	display: block;\n	line-height: normal;\n}\n.ui-button-text-only .ui-button-text {\n	padding: .4em 1em;\n}\n.ui-button-icon-only .ui-button-text,\n.ui-button-icons-only .ui-button-text {\n	padding: .4em;\n	text-indent: -9999999px;\n}\n.ui-button-text-icon-primary .ui-button-text,\n.ui-button-text-icons .ui-button-text {\n	padding: .4em 1em .4em 2.1em;\n}\n.ui-button-text-icon-secondary .ui-button-text,\n.ui-button-text-icons .ui-button-text {\n	padding: .4em 2.1em .4em 1em;\n}\n.ui-button-text-icons .ui-button-text {\n	padding-left: 2.1em;\n	padding-right: 2.1em;\n}\n/* no icon support for input elements, provide padding by default */\ninput.ui-button {\n	padding: .4em 1em;\n}\n\n/* button icon element(s) */\n.ui-button-icon-only .ui-icon,\n.ui-button-text-icon-primary .ui-icon,\n.ui-button-text-icon-secondary .ui-icon,\n.ui-button-text-icons .ui-icon,\n.ui-button-icons-only .ui-icon {\n	position: absolute;\n	top: 50%;\n	margin-top: -8px;\n}\n.ui-button-icon-only .ui-icon {\n	left: 50%;\n	margin-left: -8px;\n}\n.ui-button-text-icon-primary .ui-button-icon-primary,\n.ui-button-text-icons .ui-button-icon-primary,\n.ui-button-icons-only .ui-button-icon-primary {\n	left: .5em;\n}\n.ui-button-text-icon-secondary .ui-button-icon-secondary,\n.ui-button-text-icons .ui-button-icon-secondary,\n.ui-button-icons-only .ui-button-icon-secondary {\n	right: .5em;\n}\n\n/* button sets */\n.ui-buttonset {\n	margin-right: 7px;\n}\n.ui-buttonset .ui-button {\n	margin-left: 0;\n	margin-right: -.3em;\n}\n\n/* workarounds */\n/* reset extra padding in Firefox, see h5bp.com/l */\ninput.ui-button::-moz-focus-inner,\nbutton.ui-button::-moz-focus-inner {\n	border: 0;\n	padding: 0;\n}\n.ui-datepicker {\n	width: 17em;\n	padding: .2em .2em 0;\n	display: none;\n}\n.ui-datepicker .ui-datepicker-header {\n	position: relative;\n	padding: .2em 0;\n}\n.ui-datepicker .ui-datepicker-prev,\n.ui-datepicker .ui-datepicker-next {\n	position: absolute;\n	top: 2px;\n	width: 1.8em;\n	height: 1.8em;\n}\n.ui-datepicker .ui-datepicker-prev-hover,\n.ui-datepicker .ui-datepicker-next-hover {\n	top: 1px;\n}\n.ui-datepicker .ui-datepicker-prev {\n	left: 2px;\n}\n.ui-datepicker .ui-datepicker-next {\n	right: 2px;\n}\n.ui-datepicker .ui-datepicker-prev-hover {\n	left: 1px;\n}\n.ui-datepicker .ui-datepicker-next-hover {\n	right: 1px;\n}\n.ui-datepicker .ui-datepicker-prev span,\n.ui-datepicker .ui-datepicker-next span {\n	display: block;\n	position: absolute;\n	left: 50%;\n	margin-left: -8px;\n	top: 50%;\n	margin-top: -8px;\n}\n.ui-datepicker .ui-datepicker-title {\n	margin: 0 2.3em;\n	line-height: 1.8em;\n	text-align: center;\n}\n.ui-datepicker .ui-datepicker-title select {\n	font-size: 1em;\n	margin: 1px 0;\n}\n.ui-datepicker select.ui-datepicker-month-year {\n	width: 100%;\n}\n.ui-datepicker select.ui-datepicker-month,\n.ui-datepicker select.ui-datepicker-year {\n	width: 49%;\n}\n.ui-datepicker table {\n	width: 100%;\n	font-size: .9em;\n	border-collapse: collapse;\n	margin: 0 0 .4em;\n}\n.ui-datepicker th {\n	padding: .7em .3em;\n	text-align: center;\n	font-weight: bold;\n	border: 0;\n}\n.ui-datepicker td {\n	border: 0;\n	padding: 1px;\n}\n.ui-datepicker td span,\n.ui-datepicker td a {\n	display: block;\n	padding: .2em;\n	text-align: right;\n	text-decoration: none;\n}\n.ui-datepicker .ui-datepicker-buttonpane {\n	background-image: none;\n	margin: .7em 0 0 0;\n	padding: 0 .2em;\n	border-left: 0;\n	border-right: 0;\n	border-bottom: 0;\n}\n.ui-datepicker .ui-datepicker-buttonpane button {\n	float: right;\n	margin: .5em .2em .4em;\n	cursor: pointer;\n	padding: .2em .6em .3em .6em;\n	width: auto;\n	overflow: visible;\n}\n.ui-datepicker .ui-datepicker-buttonpane button.ui-datepicker-current {\n	float: left;\n}\n\n/* with multiple calendars */\n.ui-datepicker.ui-datepicker-multi {\n	width: auto;\n}\n.ui-datepicker-multi .ui-datepicker-group {\n	float: left;\n}\n.ui-datepicker-multi .ui-datepicker-group table {\n	width: 95%;\n	margin: 0 auto .4em;\n}\n.ui-datepicker-multi-2 .ui-datepicker-group {\n	width: 50%;\n}\n.ui-datepicker-multi-3 .ui-datepicker-group {\n	width: 33.3%;\n}\n.ui-datepicker-multi-4 .ui-datepicker-group {\n	width: 25%;\n}\n.ui-datepicker-multi .ui-datepicker-group-last .ui-datepicker-header,\n.ui-datepicker-multi .ui-datepicker-group-middle .ui-datepicker-header {\n	border-left-width: 0;\n}\n.ui-datepicker-multi .ui-datepicker-buttonpane {\n	clear: left;\n}\n.ui-datepicker-row-break {\n	clear: both;\n	width: 100%;\n	font-size: 0;\n}\n\n/* RTL support */\n.ui-datepicker-rtl {\n	direction: rtl;\n}\n.ui-datepicker-rtl .ui-datepicker-prev {\n	right: 2px;\n	left: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-next {\n	left: 2px;\n	right: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-prev:hover {\n	right: 1px;\n	left: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-next:hover {\n	left: 1px;\n	right: auto;\n}\n.ui-datepicker-rtl .ui-datepicker-buttonpane {\n	clear: right;\n}\n.ui-datepicker-rtl .ui-datepicker-buttonpane button {\n	float: left;\n}\n.ui-datepicker-rtl .ui-datepicker-buttonpane button.ui-datepicker-current,\n.ui-datepicker-rtl .ui-datepicker-group {\n	float: right;\n}\n.ui-datepicker-rtl .ui-datepicker-group-last .ui-datepicker-header,\n.ui-datepicker-rtl .ui-datepicker-group-middle .ui-datepicker-header {\n	border-right-width: 0;\n	border-left-width: 1px;\n}\n.ui-dialog {\n	position: absolute;\n	top: 0;\n	left: 0;\n	padding: .2em;\n	outline: 0;\n}\n.ui-dialog .ui-dialog-titlebar {\n	padding: .4em 1em;\n	position: relative;\n}\n.ui-dialog .ui-dialog-title {\n	float: left;\n	margin: .1em 0;\n	white-space: nowrap;\n	width: 90%;\n	overflow: hidden;\n	text-overflow: ellipsis;\n}\n.ui-dialog .ui-dialog-titlebar-close {\n	position: absolute;\n	right: .3em;\n	top: 50%;\n	width: 21px;\n	margin: -10px 0 0 0;\n	padding: 1px;\n	height: 20px;\n}\n.ui-dialog .ui-dialog-content {\n	position: relative;\n	border: 0;\n	padding: .5em 1em;\n	background: none;\n	overflow: auto;\n}\n.ui-dialog .ui-dialog-buttonpane {\n	text-align: left;\n	border-width: 1px 0 0 0;\n	background-image: none;\n	margin-top: .5em;\n	padding: .3em 1em .5em .4em;\n}\n.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset {\n	float: right;\n}\n.ui-dialog .ui-dialog-buttonpane button {\n	margin: .5em .4em .5em 0;\n	cursor: pointer;\n}\n.ui-dialog .ui-resizable-se {\n	width: 12px;\n	height: 12px;\n	right: -5px;\n	bottom: -5px;\n	background-position: 16px 16px;\n}\n.ui-draggable .ui-dialog-titlebar {\n	cursor: move;\n}\n.ui-menu {\n	list-style: none;\n	padding: 2px;\n	margin: 0;\n	display: block;\n	outline: none;\n}\n.ui-menu .ui-menu {\n	margin-top: -3px;\n	position: absolute;\n}\n.ui-menu .ui-menu-item {\n	margin: 0;\n	padding: 0;\n	width: 100%;\n}\n.ui-menu .ui-menu-divider {\n	margin: 5px -2px 5px -2px;\n	height: 0;\n	font-size: 0;\n	line-height: 0;\n	border-width: 1px 0 0 0;\n}\n.ui-menu .ui-menu-item a {\n	text-decoration: none;\n	display: block;\n	padding: 2px .4em;\n	line-height: 1.5;\n	min-height: 0; /* support: IE7 */\n	font-weight: normal;\n}\n.ui-menu .ui-menu-item a.ui-state-focus,\n.ui-menu .ui-menu-item a.ui-state-active {\n	font-weight: normal;\n	margin: -1px;\n}\n\n.ui-menu .ui-state-disabled {\n	font-weight: normal;\n	margin: .4em 0 .2em;\n	line-height: 1.5;\n}\n.ui-menu .ui-state-disabled a {\n	cursor: default;\n}\n\n/* icon support */\n.ui-menu-icons {\n	position: relative;\n}\n.ui-menu-icons .ui-menu-item a {\n	position: relative;\n	padding-left: 2em;\n}\n\n/* left-aligned */\n.ui-menu .ui-icon {\n	position: absolute;\n	top: .2em;\n	left: .2em;\n}\n\n/* right-aligned */\n.ui-menu .ui-menu-icon {\n	position: static;\n	float: right;\n}\n.ui-progressbar {\n	height: 2em;\n	text-align: left;\n	overflow: hidden;\n}\n.ui-progressbar .ui-progressbar-value {\n	margin: -1px;\n	height: 100%;\n}\n.ui-progressbar .ui-progressbar-overlay {\n	background: url("/bridge/lib/jqueryui-amd/themes/base/images/animated-overlay.gif");\n	height: 100%;\n	filter: alpha(opacity=25);\n	opacity: 0.25;\n}\n.ui-progressbar-indeterminate .ui-progressbar-value {\n	background-image: none;\n}\n.ui-slider {\n	position: relative;\n	text-align: left;\n}\n.ui-slider .ui-slider-handle {\n	position: absolute;\n	z-index: 2;\n	width: 1.2em;\n	height: 1.2em;\n	cursor: default;\n}\n.ui-slider .ui-slider-range {\n	position: absolute;\n	z-index: 1;\n	font-size: .7em;\n	display: block;\n	border: 0;\n	background-position: 0 0;\n}\n\n/* For IE8 - See #6727 */\n.ui-slider.ui-state-disabled .ui-slider-handle,\n.ui-slider.ui-state-disabled .ui-slider-range {\n	filter: inherit;\n}\n\n.ui-slider-horizontal {\n	height: .8em;\n}\n.ui-slider-horizontal .ui-slider-handle {\n	top: -.3em;\n	margin-left: -.6em;\n}\n.ui-slider-horizontal .ui-slider-range {\n	top: 0;\n	height: 100%;\n}\n.ui-slider-horizontal .ui-slider-range-min {\n	left: 0;\n}\n.ui-slider-horizontal .ui-slider-range-max {\n	right: 0;\n}\n\n.ui-slider-vertical {\n	width: .8em;\n	height: 100px;\n}\n.ui-slider-vertical .ui-slider-handle {\n	left: -.3em;\n	margin-left: 0;\n	margin-bottom: -.6em;\n}\n.ui-slider-vertical .ui-slider-range {\n	left: 0;\n	width: 100%;\n}\n.ui-slider-vertical .ui-slider-range-min {\n	bottom: 0;\n}\n.ui-slider-vertical .ui-slider-range-max {\n	top: 0;\n}\n.ui-spinner {\n	position: relative;\n	display: inline-block;\n	overflow: hidden;\n	padding: 0;\n	vertical-align: middle;\n}\n.ui-spinner-input {\n	border: none;\n	background: none;\n	color: inherit;\n	padding: 0;\n	margin: .2em 0;\n	vertical-align: middle;\n	margin-left: .4em;\n	margin-right: 22px;\n}\n.ui-spinner-button {\n	width: 16px;\n	height: 50%;\n	font-size: .5em;\n	padding: 0;\n	margin: 0;\n	text-align: center;\n	position: absolute;\n	cursor: default;\n	display: block;\n	overflow: hidden;\n	right: 0;\n}\n/* more specificity required here to overide default borders */\n.ui-spinner a.ui-spinner-button {\n	border-top: none;\n	border-bottom: none;\n	border-right: none;\n}\n/* vertical centre icon */\n.ui-spinner .ui-icon {\n	position: absolute;\n	margin-top: -8px;\n	top: 50%;\n	left: 0;\n}\n.ui-spinner-up {\n	top: 0;\n}\n.ui-spinner-down {\n	bottom: 0;\n}\n\n/* TR overrides */\n.ui-spinner .ui-icon-triangle-1-s {\n	/* need to fix icons sprite */\n	background-position: -65px -16px;\n}\n.ui-tabs {\n	position: relative;/* position: relative prevents IE scroll bug (element with position: relative inside container with overflow: auto appear as "fixed") */\n	padding: .2em;\n}\n.ui-tabs .ui-tabs-nav {\n	margin: 0;\n	padding: .2em .2em 0;\n}\n.ui-tabs .ui-tabs-nav li {\n	list-style: none;\n	float: left;\n	position: relative;\n	top: 0;\n	margin: 1px .2em 0 0;\n	border-bottom: 0;\n	padding: 0;\n	white-space: nowrap;\n}\n.ui-tabs .ui-tabs-nav li a {\n	float: left;\n	padding: .5em 1em;\n	text-decoration: none;\n}\n.ui-tabs .ui-tabs-nav li.ui-tabs-active {\n	margin-bottom: -1px;\n	padding-bottom: 1px;\n}\n.ui-tabs .ui-tabs-nav li.ui-tabs-active a,\n.ui-tabs .ui-tabs-nav li.ui-state-disabled a,\n.ui-tabs .ui-tabs-nav li.ui-tabs-loading a {\n	cursor: text;\n}\n.ui-tabs .ui-tabs-nav li a, /* first selector in group seems obsolete, but required to overcome bug in Opera applying cursor: text overall if defined elsewhere... */\n.ui-tabs-collapsible .ui-tabs-nav li.ui-tabs-active a {\n	cursor: pointer;\n}\n.ui-tabs .ui-tabs-panel {\n	display: block;\n	border-width: 0;\n	padding: 1em 1.4em;\n	background: none;\n}\n.ui-tooltip {\n	padding: 8px;\n	position: absolute;\n	z-index: 9999;\n	max-width: 300px;\n	-webkit-box-shadow: 0 0 5px #aaa;\n	box-shadow: 0 0 5px #aaa;\n}\nbody .ui-tooltip {\n	border-width: 2px;\n}\n\n/* Component containers\n----------------------------------*/\n.ui-widget {\n	font-family: Verdana,Arial,sans-serif/*{ffDefault}*/;\n	font-size: 1.1em/*{fsDefault}*/;\n}\n.ui-widget .ui-widget {\n	font-size: 1em;\n}\n.ui-widget input,\n.ui-widget select,\n.ui-widget textarea,\n.ui-widget button {\n	font-family: Arial,sans-serif/*{ffDefault}*/;\n	font-size: 1em;\n}\n.ui-widget-content {\n	border: 1px solid #aaaaaa/*{borderColorContent}*/;\n	background: #ffffff/*{bgColorContent}*/;\n	color: #222222/*{fcContent}*/;\n}\n.ui-widget-content a {\n	color: #222222/*{fcContent}*/;\n}\n.ui-widget-header {\n	border: 1px solid #aaaaaa/*{borderColorHeader}*/;\n	background: #cccccc/*{bgColorHeader}*/;\n	color: #222222/*{fcHeader}*/;\n	font-weight: bold;\n}\n.ui-widget-header a {\n	color: #222222/*{fcHeader}*/;\n}\n\n/* Interaction states\n----------------------------------*/\n.ui-state-default,\n.ui-widget-content .ui-state-default,\n.ui-widget-header .ui-state-default {\n	border: 1px solid #d3d3d3/*{borderColorDefault}*/;\n	background: #e6e6e6/*{bgColorDefault}*/;\n	font-weight: normal/*{fwDefault}*/;\n	color: #555555/*{fcDefault}*/;\n}\n.ui-state-default a,\n.ui-state-default a:link,\n.ui-state-default a:visited {\n	color: #555555/*{fcDefault}*/;\n	text-decoration: none;\n}\n.ui-state-hover,\n.ui-widget-content .ui-state-hover,\n.ui-widget-header .ui-state-hover,\n.ui-state-focus,\n.ui-widget-content .ui-state-focus,\n.ui-widget-header .ui-state-focus {\n	border: 1px solid #999999/*{borderColorHover}*/;\n	background: #dadada/*{bgColorHover}*/;\n	font-weight: normal/*{fwDefault}*/;\n	color: #212121/*{fcHover}*/;\n}\n.ui-state-hover a,\n.ui-state-hover a:hover,\n.ui-state-hover a:link,\n.ui-state-hover a:visited {\n	color: #212121/*{fcHover}*/;\n	text-decoration: none;\n}\n.ui-state-active,\n.ui-widget-content .ui-state-active,\n.ui-widget-header .ui-state-active {\n	border: 1px solid #aaaaaa/*{borderColorActive}*/;\n	background: #ffffff/*{bgColorActive}*/;\n	font-weight: normal/*{fwDefault}*/;\n	color: #212121/*{fcActive}*/;\n}\n.ui-state-active a,\n.ui-state-active a:link,\n.ui-state-active a:visited {\n	color: #212121/*{fcActive}*/;\n	text-decoration: none;\n}\n\n/* Interaction Cues\n----------------------------------*/\n.ui-state-highlight,\n.ui-widget-content .ui-state-highlight,\n.ui-widget-header .ui-state-highlight {\n	border: 1px solid #fcefa1/*{borderColorHighlight}*/;\n	background: #fbf9ee/*{bgColorHighlight}*/;\n	color: #363636/*{fcHighlight}*/;\n}\n.ui-state-highlight a,\n.ui-widget-content .ui-state-highlight a,\n.ui-widget-header .ui-state-highlight a {\n	color: #363636/*{fcHighlight}*/;\n}\n.ui-state-error,\n.ui-widget-content .ui-state-error,\n.ui-widget-header .ui-state-error {\n	border: 1px solid #cd0a0a/*{borderColorError}*/;\n	background: #fef1ec/*{bgColorError}*/;\n	color: #cd0a0a/*{fcError}*/;\n}\n.ui-state-error a,\n.ui-widget-content .ui-state-error a,\n.ui-widget-header .ui-state-error a {\n	color: #cd0a0a/*{fcError}*/;\n}\n.ui-state-error-text,\n.ui-widget-content .ui-state-error-text,\n.ui-widget-header .ui-state-error-text {\n	color: #cd0a0a/*{fcError}*/;\n}\n.ui-priority-primary,\n.ui-widget-content .ui-priority-primary,\n.ui-widget-header .ui-priority-primary {\n	font-weight: bold;\n}\n.ui-priority-secondary,\n.ui-widget-content .ui-priority-secondary,\n.ui-widget-header .ui-priority-secondary {\n	opacity: .7;\n	filter:Alpha(Opacity=70);\n	font-weight: normal;\n}\n.ui-state-disabled,\n.ui-widget-content .ui-state-disabled,\n.ui-widget-header .ui-state-disabled {\n	opacity: .35;\n	filter:Alpha(Opacity=35);\n	background-image: none;\n}\n.ui-state-disabled .ui-icon {\n	filter:Alpha(Opacity=35); /* For IE8 - See #6059 */\n}\n\n/* Icons\n----------------------------------*/\n\n/* states and images */\n.ui-icon {\n	width: 16px;\n	height: 16px;\n	background-position: 16px 16px;\n}\n.ui-icon,\n.ui-widget-content .ui-icon {\n	/*background-image: url(/bridge/lib/jqueryui-amd/themes/base/images/ui-icons_222222_256x240.png)!*{iconsContent}*!;*/\n}\n.ui-widget-header .ui-icon {\n	/*background-image: url(/bridge/lib/jqueryui-amd/themes/base/images/ui-icons_222222_256x240.png)!*{iconsHeader}*!;*/\n}\n.ui-state-default .ui-icon {\n	/*background-image: url(/bridge/lib/jqueryui-amd/themes/base/images/ui-icons_888888_256x240.png)!*{iconsDefault}*!;*/\n}\n.ui-state-hover .ui-icon,\n.ui-state-focus .ui-icon {\n	/*background-image: url(/bridge/lib/jqueryui-amd/themes/base/images/ui-icons_454545_256x240.png)!*{iconsHover}*!;*/\n}\n.ui-state-active .ui-icon {\n	/*background-image: url(/bridge/lib/jqueryui-amd/themes/base/images/ui-icons_454545_256x240.png)!*{iconsActive}*!;*/\n}\n.ui-state-highlight .ui-icon {\n	/*background-image: url(/bridge/lib/jqueryui-amd/themes/base/images/ui-icons_2e83ff_256x240.png)!*{iconsHighlight}*!;*/\n}\n.ui-state-error .ui-icon,\n.ui-state-error-text .ui-icon {\n	/*background-image: url(/bridge/lib/jqueryui-amd/themes/base/images/ui-icons_cd0a0a_256x240.png)!*{iconsError}*!;*/\n}\n\n/* positioning */\n.ui-icon-carat-1-n { background-position: 0 0; }\n.ui-icon-carat-1-ne { background-position: -16px 0; }\n.ui-icon-carat-1-e { background-position: -32px 0; }\n.ui-icon-carat-1-se { background-position: -48px 0; }\n.ui-icon-carat-1-s { background-position: -64px 0; }\n.ui-icon-carat-1-sw { background-position: -80px 0; }\n.ui-icon-carat-1-w { background-position: -96px 0; }\n.ui-icon-carat-1-nw { background-position: -112px 0; }\n.ui-icon-carat-2-n-s { background-position: -128px 0; }\n.ui-icon-carat-2-e-w { background-position: -144px 0; }\n.ui-icon-triangle-1-n { background-position: 0 -16px; }\n.ui-icon-triangle-1-ne { background-position: -16px -16px; }\n.ui-icon-triangle-1-e { background-position: -32px -16px; }\n.ui-icon-triangle-1-se { background-position: -48px -16px; }\n.ui-icon-triangle-1-s { background-position: -64px -16px; }\n.ui-icon-triangle-1-sw { background-position: -80px -16px; }\n.ui-icon-triangle-1-w { background-position: -96px -16px; }\n.ui-icon-triangle-1-nw { background-position: -112px -16px; }\n.ui-icon-triangle-2-n-s { background-position: -128px -16px; }\n.ui-icon-triangle-2-e-w { background-position: -144px -16px; }\n.ui-icon-arrow-1-n { background-position: 0 -32px; }\n.ui-icon-arrow-1-ne { background-position: -16px -32px; }\n.ui-icon-arrow-1-e { background-position: -32px -32px; }\n.ui-icon-arrow-1-se { background-position: -48px -32px; }\n.ui-icon-arrow-1-s { background-position: -64px -32px; }\n.ui-icon-arrow-1-sw { background-position: -80px -32px; }\n.ui-icon-arrow-1-w { background-position: -96px -32px; }\n.ui-icon-arrow-1-nw { background-position: -112px -32px; }\n.ui-icon-arrow-2-n-s { background-position: -128px -32px; }\n.ui-icon-arrow-2-ne-sw { background-position: -144px -32px; }\n.ui-icon-arrow-2-e-w { background-position: -160px -32px; }\n.ui-icon-arrow-2-se-nw { background-position: -176px -32px; }\n.ui-icon-arrowstop-1-n { background-position: -192px -32px; }\n.ui-icon-arrowstop-1-e { background-position: -208px -32px; }\n.ui-icon-arrowstop-1-s { background-position: -224px -32px; }\n.ui-icon-arrowstop-1-w { background-position: -240px -32px; }\n.ui-icon-arrowthick-1-n { background-position: 0 -48px; }\n.ui-icon-arrowthick-1-ne { background-position: -16px -48px; }\n.ui-icon-arrowthick-1-e { background-position: -32px -48px; }\n.ui-icon-arrowthick-1-se { background-position: -48px -48px; }\n.ui-icon-arrowthick-1-s { background-position: -64px -48px; }\n.ui-icon-arrowthick-1-sw { background-position: -80px -48px; }\n.ui-icon-arrowthick-1-w { background-position: -96px -48px; }\n.ui-icon-arrowthick-1-nw { background-position: -112px -48px; }\n.ui-icon-arrowthick-2-n-s { background-position: -128px -48px; }\n.ui-icon-arrowthick-2-ne-sw { background-position: -144px -48px; }\n.ui-icon-arrowthick-2-e-w { background-position: -160px -48px; }\n.ui-icon-arrowthick-2-se-nw { background-position: -176px -48px; }\n.ui-icon-arrowthickstop-1-n { background-position: -192px -48px; }\n.ui-icon-arrowthickstop-1-e { background-position: -208px -48px; }\n.ui-icon-arrowthickstop-1-s { background-position: -224px -48px; }\n.ui-icon-arrowthickstop-1-w { background-position: -240px -48px; }\n.ui-icon-arrowreturnthick-1-w { background-position: 0 -64px; }\n.ui-icon-arrowreturnthick-1-n { background-position: -16px -64px; }\n.ui-icon-arrowreturnthick-1-e { background-position: -32px -64px; }\n.ui-icon-arrowreturnthick-1-s { background-position: -48px -64px; }\n.ui-icon-arrowreturn-1-w { background-position: -64px -64px; }\n.ui-icon-arrowreturn-1-n { background-position: -80px -64px; }\n.ui-icon-arrowreturn-1-e { background-position: -96px -64px; }\n.ui-icon-arrowreturn-1-s { background-position: -112px -64px; }\n.ui-icon-arrowrefresh-1-w { background-position: -128px -64px; }\n.ui-icon-arrowrefresh-1-n { background-position: -144px -64px; }\n.ui-icon-arrowrefresh-1-e { background-position: -160px -64px; }\n.ui-icon-arrowrefresh-1-s { background-position: -176px -64px; }\n.ui-icon-arrow-4 { background-position: 0 -80px; }\n.ui-icon-arrow-4-diag { background-position: -16px -80px; }\n.ui-icon-extlink { background-position: -32px -80px; }\n.ui-icon-newwin { background-position: -48px -80px; }\n.ui-icon-refresh { background-position: -64px -80px; }\n.ui-icon-shuffle { background-position: -80px -80px; }\n.ui-icon-transfer-e-w { background-position: -96px -80px; }\n.ui-icon-transferthick-e-w { background-position: -112px -80px; }\n.ui-icon-folder-collapsed { background-position: 0 -96px; }\n.ui-icon-folder-open { background-position: -16px -96px; }\n.ui-icon-document { background-position: -32px -96px; }\n.ui-icon-document-b { background-position: -48px -96px; }\n.ui-icon-note { background-position: -64px -96px; }\n.ui-icon-mail-closed { background-position: -80px -96px; }\n.ui-icon-mail-open { background-position: -96px -96px; }\n.ui-icon-suitcase { background-position: -112px -96px; }\n.ui-icon-comment { background-position: -128px -96px; }\n.ui-icon-person { background-position: -144px -96px; }\n.ui-icon-print { background-position: -160px -96px; }\n.ui-icon-trash { background-position: -176px -96px; }\n.ui-icon-locked { background-position: -192px -96px; }\n.ui-icon-unlocked { background-position: -208px -96px; }\n.ui-icon-bookmark { background-position: -224px -96px; }\n.ui-icon-tag { background-position: -240px -96px; }\n.ui-icon-home { background-position: 0 -112px; }\n.ui-icon-flag { background-position: -16px -112px; }\n.ui-icon-calendar { background-position: -32px -112px; }\n.ui-icon-cart { background-position: -48px -112px; }\n.ui-icon-pencil { background-position: -64px -112px; }\n.ui-icon-clock { background-position: -80px -112px; }\n.ui-icon-disk { background-position: -96px -112px; }\n.ui-icon-calculator { background-position: -112px -112px; }\n.ui-icon-zoomin { background-position: -128px -112px; }\n.ui-icon-zoomout { background-position: -144px -112px; }\n.ui-icon-search { background-position: -160px -112px; }\n.ui-icon-wrench { background-position: -176px -112px; }\n.ui-icon-gear { background-position: -192px -112px; }\n.ui-icon-heart { background-position: -208px -112px; }\n.ui-icon-star { background-position: -224px -112px; }\n.ui-icon-link { background-position: -240px -112px; }\n.ui-icon-cancel { background-position: 0 -128px; }\n.ui-icon-plus { background-position: -16px -128px; }\n.ui-icon-plusthick { background-position: -32px -128px; }\n.ui-icon-minus { background-position: -48px -128px; }\n.ui-icon-minusthick { background-position: -64px -128px; }\n.ui-icon-close { background-position: -80px -128px; }\n.ui-icon-closethick { background-position: -96px -128px; }\n.ui-icon-key { background-position: -112px -128px; }\n.ui-icon-lightbulb { background-position: -128px -128px; }\n.ui-icon-scissors { background-position: -144px -128px; }\n.ui-icon-clipboard { background-position: -160px -128px; }\n.ui-icon-copy { background-position: -176px -128px; }\n.ui-icon-contact { background-position: -192px -128px; }\n.ui-icon-image { background-position: -208px -128px; }\n.ui-icon-video { background-position: -224px -128px; }\n.ui-icon-script { background-position: -240px -128px; }\n.ui-icon-alert { background-position: 0 -144px; }\n.ui-icon-info { background-position: -16px -144px; }\n.ui-icon-notice { background-position: -32px -144px; }\n.ui-icon-help { background-position: -48px -144px; }\n.ui-icon-check { background-position: -64px -144px; }\n.ui-icon-bullet { background-position: -80px -144px; }\n.ui-icon-radio-on { background-position: -96px -144px; }\n.ui-icon-radio-off { background-position: -112px -144px; }\n.ui-icon-pin-w { background-position: -128px -144px; }\n.ui-icon-pin-s { background-position: -144px -144px; }\n.ui-icon-play { background-position: 0 -160px; }\n.ui-icon-pause { background-position: -16px -160px; }\n.ui-icon-seek-next { background-position: -32px -160px; }\n.ui-icon-seek-prev { background-position: -48px -160px; }\n.ui-icon-seek-end { background-position: -64px -160px; }\n.ui-icon-seek-start { background-position: -80px -160px; }\n/* ui-icon-seek-first is deprecated, use ui-icon-seek-start instead */\n.ui-icon-seek-first { background-position: -80px -160px; }\n.ui-icon-stop { background-position: -96px -160px; }\n.ui-icon-eject { background-position: -112px -160px; }\n.ui-icon-volume-off { background-position: -128px -160px; }\n.ui-icon-volume-on { background-position: -144px -160px; }\n.ui-icon-power { background-position: 0 -176px; }\n.ui-icon-signal-diag { background-position: -16px -176px; }\n.ui-icon-signal { background-position: -32px -176px; }\n.ui-icon-battery-0 { background-position: -48px -176px; }\n.ui-icon-battery-1 { background-position: -64px -176px; }\n.ui-icon-battery-2 { background-position: -80px -176px; }\n.ui-icon-battery-3 { background-position: -96px -176px; }\n.ui-icon-circle-plus { background-position: 0 -192px; }\n.ui-icon-circle-minus { background-position: -16px -192px; }\n.ui-icon-circle-close { background-position: -32px -192px; }\n.ui-icon-circle-triangle-e { background-position: -48px -192px; }\n.ui-icon-circle-triangle-s { background-position: -64px -192px; }\n.ui-icon-circle-triangle-w { background-position: -80px -192px; }\n.ui-icon-circle-triangle-n { background-position: -96px -192px; }\n.ui-icon-circle-arrow-e { background-position: -112px -192px; }\n.ui-icon-circle-arrow-s { background-position: -128px -192px; }\n.ui-icon-circle-arrow-w { background-position: -144px -192px; }\n.ui-icon-circle-arrow-n { background-position: -160px -192px; }\n.ui-icon-circle-zoomin { background-position: -176px -192px; }\n.ui-icon-circle-zoomout { background-position: -192px -192px; }\n.ui-icon-circle-check { background-position: -208px -192px; }\n.ui-icon-circlesmall-plus { background-position: 0 -208px; }\n.ui-icon-circlesmall-minus { background-position: -16px -208px; }\n.ui-icon-circlesmall-close { background-position: -32px -208px; }\n.ui-icon-squaresmall-plus { background-position: -48px -208px; }\n.ui-icon-squaresmall-minus { background-position: -64px -208px; }\n.ui-icon-squaresmall-close { background-position: -80px -208px; }\n.ui-icon-grip-dotted-vertical { background-position: 0 -224px; }\n.ui-icon-grip-dotted-horizontal { background-position: -16px -224px; }\n.ui-icon-grip-solid-vertical { background-position: -32px -224px; }\n.ui-icon-grip-solid-horizontal { background-position: -48px -224px; }\n.ui-icon-gripsmall-diagonal-se { background-position: -64px -224px; }\n.ui-icon-grip-diagonal-se { background-position: -80px -224px; }\n\n\n/* Misc visuals\n----------------------------------*/\n\n/* Corner radius */\n.ui-corner-all,\n.ui-corner-top,\n.ui-corner-left,\n.ui-corner-tl {\n	border-top-left-radius: 4px/*{cornerRadius}*/;\n}\n.ui-corner-all,\n.ui-corner-top,\n.ui-corner-right,\n.ui-corner-tr {\n	border-top-right-radius: 4px/*{cornerRadius}*/;\n}\n.ui-corner-all,\n.ui-corner-bottom,\n.ui-corner-left,\n.ui-corner-bl {\n	border-bottom-left-radius: 4px/*{cornerRadius}*/;\n}\n.ui-corner-all,\n.ui-corner-bottom,\n.ui-corner-right,\n.ui-corner-br {\n	border-bottom-right-radius: 4px/*{cornerRadius}*/;\n}\n\n/* Overlays */\n.ui-widget-overlay {\n	background: #aaaaaa/*{bgColorOverlay}*/;\n	opacity: .3/*{opacityOverlay}*/;\n	filter: Alpha(Opacity=30)/*{opacityFilterOverlay}*/;\n}\n.ui-widget-shadow {\n	margin: -8px/*{offsetTopShadow}*/ 0 0 -8px/*{offsetLeftShadow}*/;\n	padding: 8px/*{thicknessShadow}*/;\n	background: #aaaaaa/*{bgColorShadow}*/;\n	opacity: .3/*{opacityShadow}*/;\n	filter: Alpha(Opacity=30)/*{opacityFilterShadow}*/;\n	border-radius: 8px/*{cornerRadiusShadow}*/;\n}\n'),
require(["embed-startup"]);